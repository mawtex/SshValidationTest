



/// <reference path='./IListener.ts' />





/// <reference path='./ISubscription.ts' />
/// <reference path='./IListener.ts' />
/// <reference path='./IListenerQueue.ts' />
/// <reference path='./IEventInformation.ts' />
/// <reference path='../Generics/Collections/IHashTable.ts' />

/// <reference path='./ISubscription.ts' />
/// <reference path='./IListener.ts' />
/// <reference path='./IListenerQueue.ts' />
/// <reference path='./IEventInformation.ts' />
/// <reference path='./IEventHub.ts' />
/// <reference path='../Generics/Collections/IHashTable.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        /**
         * An event hub for subscribing to and publishing events.
        */
        var EventHub = (function () {
            function EventHub() {
                this._events = {};
                if (EventHub._instance) {
                    throw new Error('Error: Instantiation failed: Use EventHub.instance() instead of new.');
                }
                EventHub._instance = this;
            }
            EventHub.instance = function () {
                return EventHub._instance;
            };
            /**
             * Subscribe to an event.
             *
             * @param eventName The name of the event to subscribe to.
             * @param listener The listener subscribing to the event.
            */
            EventHub.prototype.subscribe = function (eventName, listener) {
                var _this = this;
                var index;
                if (!this._events.hasOwnProperty(eventName)) {
                    this._events[eventName] = { queue: [] };
                }
                index = this._events[eventName].queue.push(listener) - 1;
                return (function (topic, index) {
                    return {
                        remove: function () {
                            delete _this._events[eventName].queue[index];
                        }
                    };
                })(eventName, index);
            };
            /**
             * Publishes an event.
             *
             * @param eventName The name of the event to subscribe to.
             * @param eventInformation The information to provide all subscribers when the event is published.
            */
            EventHub.prototype.publish = function (eventName, eventInformation) {
                if (!this._events.hasOwnProperty(eventName)) {
                    return;
                }
                this._events[eventName].queue.forEach(function (listener) {
                    if (listener !== void 0) {
                        listener(eventInformation);
                    }
                });
            };
            EventHub._instance = new EventHub();
            return EventHub;
        }());
        Composer.EventHub = EventHub;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='./IAnalyticsProduct.ts' />
///<reference path='./IAnalyticsSearchResults.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='./IAnalyticsCoupon.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));





///<reference path='../../Typings/tsd.d.ts' />
///<reference path='../System/IDisposable.ts' />

///<reference path='../../Typings/tsd.d.ts' />

///<reference path='../../Typings/tsd.d.ts' />

/// <reference path="../../typings/tsd.d.ts" />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../Generics/Collections/IHashTable.ts' />

///<reference path='../../Typings/tsd.d.ts' />



///<reference path='../../Typings/tsd.d.ts' />

///<reference path='../../Typings/tsd.d.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var UIBusyHandle = (function () {
            /*
             * Start the busy state, to be called before the async call
             * @param loadingIndicatorContext JQuery element of what the handler will remove/add class "hidden".
             * @param containerContext JQuery element containing inputs that will be disabled while busy.
             * @param msDelay Number of ms before activating async. If done is called before the end
             *        of the delay, the loadingIndicatorContext will not be shown.
             */
            function UIBusyHandle(loadingIndicatorContext, containerContext, msDelay) {
                this.loadingIndicatorContext = loadingIndicatorContext;
                this.containerContext = containerContext;
                this.startBusy(msDelay);
            }
            /*
             * Ends the busy state, to be called in the then of the async call
             */
            UIBusyHandle.prototype.done = function () {
                this.endBusy();
            };
            UIBusyHandle.prototype.startBusy = function (msDelay) {
                var _this = this;
                this.timeoutHandle = setTimeout(function () {
                    _this.containerContext.find(':input:enabled').addClass('async-busy').prop('disabled', true);
                    _this.loadingIndicatorContext.removeClass('hidden');
                }, msDelay);
            };
            UIBusyHandle.prototype.endBusy = function () {
                clearTimeout(this.timeoutHandle);
                this.loadingIndicatorContext.addClass('hidden');
                this.containerContext.find(':input.async-busy').removeClass('async-busy').prop('disabled', false);
            };
            return UIBusyHandle;
        }());
        Composer.UIBusyHandle = UIBusyHandle;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../Typings/tsd.d.ts' />



/// <reference path='./Mvc/IControllerConfiguration.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        ;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path="../../typings/tsd.d.ts" />
/// <reference path='../Generics/Collections/IHashTable.ts' />
/// <reference path='../Events/IEventHub.ts' />
/// <reference path='./IController.ts' />
/// <reference path='./IControllerContext.ts' />
/// <reference path='./IRegisterActionOptions.ts' />
/// <reference path='./IControllerActionContext.ts' />
///<reference path='../Templating/IComposerTemplates.ts' />
///<reference path='../Templating/IComposerTemplates.ts' />
/// <reference path='../JQueryPlugins/IParsleyJqueryPlugin.ts' />
/// <reference path='../Validation/IParsley.ts' />
/// <reference path='../UI/UIBusyParam.ts' />
/// <reference path='../UI/UIBusyHandle.ts' />
/// <reference path='../IComposerContext.ts' />
/// <reference path='../IComposerConfiguration.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        /**
        * Provides methods that respond to client-side requests.
        */
        var Controller = (function () {
            function Controller(context, eventHub, composerContext, composerConfiguration) {
                this.context = context;
                this.eventHub = eventHub;
                this.composerContext = composerContext;
                this.composerConfiguration = composerConfiguration;
                this._composerEventPostfix = '.composer';
                this._defaultEventsToMonitor = ['click', 'mouseover', 'mouseout', 'contextmenu', 'submit', 'focus', 'blur', 'change']; // 'dblclick'
                if (_.isEmpty(context)) {
                    throw new Error('context is required');
                }
                if (_.isEmpty(eventHub)) {
                    throw new Error('eventHub is required');
                }
                if (_.isEmpty(composerContext)) {
                    throw new Error('composerContext is required');
                }
            }
            Controller.registerAction = function (classToRegisterActionOn, registerActionOptions) {
                var classPrototype = classToRegisterActionOn.prototype;
                if (!Controller.prototype.isPrototypeOf(classPrototype)) {
                    throw new Error('The class you are trying to register the action on is not a controller.');
                }
                if (_.isFunction(registerActionOptions.actionDelegate)) {
                    if (!classPrototype.hasOwnProperty(registerActionOptions.actionName) ||
                        registerActionOptions.overwrite &&
                            classPrototype.hasOwnProperty(registerActionOptions.actionName) &&
                            _.isFunction(classPrototype[registerActionOptions.actionName])) {
                        classPrototype[registerActionOptions.actionName] = registerActionOptions.actionDelegate;
                    }
                    else {
                        throw new Error("You cannot overwrite the action named \"" + registerActionOptions.actionName + "\" without specifying overwrite = true in the registerActionOptions.");
                    }
                }
                else {
                    throw new Error("Unable to register action " + registerActionOptions.actionName + ". The action delegate is not a function.");
                }
            };
            Controller.prototype.initialize = function () {
                if (_.isEmpty(this.eventsToMonitor)) {
                    this.eventsToMonitor = this._defaultEventsToMonitor;
                }
                this.registerDomEvents();
            };
            Controller.prototype.dispose = function () {
                this.unregisterDomEvents();
            };
            Controller.prototype.asyncBusy = function (options) {
                if (options === void 0) { options = {}; }
                options = _.merge({
                    elementContext: this.context.container,
                    containerContext: this.context.container,
                    loadingIndicatorSelector: '.loading-indicator',
                    msDelay: 0
                }, options);
                var loadingIndicatorContext = options.elementContext.find(options.loadingIndicatorSelector);
                var handle = new Composer.UIBusyHandle(loadingIndicatorContext, options.containerContext, options.msDelay);
                return handle;
            };
            /*
             * Prevents a form from submitting.
             * @param context A controller action context.
             */
            Controller.prototype.preventFormSubmit = function (context) {
                context.event.preventDefault();
            };
            Controller.prototype.render = function (templateId, viewModel, parentSelector) {
                var _this = this;
                var container = this.context.container;
                if (!_.isEmpty(parentSelector)) {
                    container = this.context.container.find(parentSelector);
                }
                var elements = container.find("[data-templateid=\"" + templateId + "\"]");
                if (_.isEmpty(elements)) {
                    console.warn("Could not find the template '" + templateId + "' inside its container.", container);
                }
                elements.each(function (index, item) {
                    var renderedTemplate = _this.getRenderedTemplateContents(templateId, viewModel);
                    if (renderedTemplate !== null) {
                        item.outerHTML = renderedTemplate;
                    }
                });
            };
            Controller.prototype.getRenderedTemplateContents = function (templateId, viewModel) {
                var template = Orckestra.Composer.Templates[templateId];
                if (!_.isFunction(template)) {
                    console.error("Template '" + templateId + "' not found in compiled templates.");
                    return null;
                }
                try {
                    return template(viewModel);
                }
                catch (error) {
                    // catch handlebars rendering errors mostly
                    console.error(error.name + ": " + error.message + " in template '" + templateId + "'.", viewModel);
                }
            };
            Controller.prototype.registerFormsForValidation = function (context, customOptions) {
                if (customOptions === void 0) { customOptions = {}; }
                var formValidators = [];
                var options = {
                    trigger: 'focusout change',
                    focus: 'first',
                    errorTemplate: '<li></li>',
                    classHandler: function (fieldInstance) {
                        var handleSelector = fieldInstance.$element.data('parsleyClassHandlerSelector');
                        // returning undefined will make parsley use the default classHandler
                        if (_.isEmpty(handleSelector)) {
                            return undefined;
                        }
                        var classHandler = fieldInstance.$element.closest(handleSelector);
                        return classHandler;
                    }
                };
                _.assign(options, customOptions);
                context.each(function (index, element) {
                    formValidators.push($(element).parsley(options));
                });
                if (customOptions.serverValidationContainer) {
                    this.hideServerValidationMessageOnClientValidation(formValidators, customOptions.serverValidationContainer);
                }
                return formValidators;
            };
            /**
             * Hide any messages from previous server validation
             * when the new form is used to prevent mixing up
             * client side validation message with server side
             * messages.
             *
             * @param formValidators all the parlsey forms to manage
             * @param serverValidationContainer the jQuery selector to find messages to empty
             */
            Controller.prototype.hideServerValidationMessageOnClientValidation = function (formValidators, serverValidationContainer) {
                _.each(formValidators, function (parsley) {
                    parsley.subscribe('parsley:field:validate', function () {
                        parsley.$element.find(serverValidationContainer).empty();
                        _.defer(function () { parsley.unsubscribe('parsley:field:validate'); });
                    });
                });
            };
            Controller.prototype.registerDomEvents = function () {
                var _this = this;
                var parseAction = this.parseAction.bind(this);
                this._unregister = function () {
                    _this.context.container.off(_this._composerEventPostfix, parseAction);
                };
                this.eventsToMonitor.forEach(function (item) {
                    _this.context.container.on("" + item + _this._composerEventPostfix, parseAction);
                });
            };
            Controller.prototype.unregisterDomEvents = function () {
                if (this._unregister !== void 0) {
                    this._unregister();
                }
            };
            Controller.prototype.parseAction = function (e) {
                this.applyControllerAction($(e.target), e);
            };
            Controller.prototype.applyControllerAction = function (context, e) {
                var controllerActions, eventAttribute = "oc-" + e.type, rawActions = context.data(eventAttribute);
                if (_.isEmpty(rawActions)) {
                    if (context.length > 0 && context[0] !== this.context.container[0]) {
                        this.applyControllerAction(context.parent(), e);
                    }
                    return;
                }
                controllerActions = rawActions.replace(/\s+/g, '').split(',');
                this.applyControllerActions(context, e, controllerActions);
            };
            Controller.prototype.applyControllerActions = function (context, e, controllerActions) {
                var _this = this;
                controllerActions.forEach(function (controllerAction) {
                    var controllerActionContext;
                    if (_.isFunction(_this[controllerAction])) {
                        controllerActionContext = {
                            elementContext: context,
                            event: e
                        };
                        _this[controllerAction].apply(_this, [controllerActionContext]);
                    }
                });
            };
            return Controller;
        }());
        Composer.Controller = Controller;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../Typings/tsd.d.ts' />

///<reference path='../../../Typings/tsd.d.ts' />

///<reference path='../../../Typings/tsd.d.ts' />
///<reference path='../Controller.ts' />
///<reference path='../ComposerClient.ts' />
///<reference path='../IControllerActionContext.ts' />
///<reference path='../../Events/IEventInformation.ts' />
///<reference path='ILocalizationProvider.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var LocalizationProvider = (function () {
            function LocalizationProvider() {
                this._localizationTree = {};
                if (LocalizationProvider._instance) {
                    throw new Error('Error: Instantiation failed: Use LocalizationProvider.instance() instead of new.');
                }
                LocalizationProvider._instance = this;
            }
            LocalizationProvider.instance = function () {
                return LocalizationProvider._instance;
            };
            /**
             * Boostrap the localization.
             *
             * This call is responsibly for refreshing all localization
             * to the current page culture
             */
            LocalizationProvider.prototype.initialize = function (composerContext) {
                this._composerContext = composerContext;
                var provider = this;
                var language = this._composerContext.language;
                return Composer.ComposerClient.get('/api/localization/' + language)
                    .then(function (result) {
                    var tree = result;
                    provider._localizationTree = tree;
                });
            };
            /**
             * Get a  localized string
             *
             * @param categoryName The category used to bundle this localization
             * @param keyName The exact key to localize
             * @return the localizedString or null if none found
            */
            LocalizationProvider.prototype.getLocalizedString = function (categoryName, keyName) {
                categoryName = (categoryName || '').toLowerCase();
                var tree = (this._localizationTree || {});
                var categories = (tree.LocalizedCategories || {});
                var category = (categories[categoryName] || {});
                var values = (category.LocalizedValues || {});
                var value = values[keyName];
                return value;
            };
            /*
             * Note: not really protected, this is a Typescript scoped method
             * called from the javascript scoped handlebars helper.
             */
            LocalizationProvider.prototype.handleBarsHelper_localize = function (categoryName, keyName) {
                var value = this.getLocalizedString(categoryName, keyName);
                if (_.isUndefined(value)) {
                    value = '[' + categoryName + '.' + keyName + ']';
                }
                return value;
            };
            /*
             * Note: not really protected, this is a Typescript scoped method
             * called from the javascript scoped handlebars helper.
             */
            LocalizationProvider.prototype.handleBarsHelper_localizeFormat = function (categoryName, keyName, options) {
                var value;
                var format = this.getLocalizedString(categoryName, keyName);
                if (_.isUndefined(format)) {
                    value = '[' + categoryName + '.' + keyName + ']';
                }
                else {
                    value = this.stringFormat(format, options);
                }
                return value;
            };
            /*
             * Note: not really protected, this is a Typescript scoped method
             * called from the javascript scoped handlebars helper.
             */
            LocalizationProvider.prototype.handleBarsHelper_isLocalized = function (categoryName, keyName) {
                var value = this.getLocalizedString(categoryName, keyName);
                if (_.isEmpty(value) || _.isUndefined(value)) {
                    return false;
                }
                return true;
            };
            /*
             * Substitute to String.Format in C#
             * This is a limited version to support numeric placeholders {0} without formatting
             */
            LocalizationProvider.prototype.stringFormat = function (format, options) {
                return format.replace(/\{\s*([^}\s]+)\s*\}/g, function (m, p1, offset, string) {
                    return options[p1] !== void 0 ? options[p1] : p1;
                });
            };
            LocalizationProvider._instance = new LocalizationProvider();
            return LocalizationProvider;
        }());
        Composer.LocalizationProvider = LocalizationProvider;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../Typings/tsd.d.ts' />
///<reference path='./Localization/ILocalizationProvider.ts' />
///<reference path='./Localization/LocalizationProvider.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var ComposerClient = (function () {
            function ComposerClient() {
            }
            ComposerClient.get = function (url, data) {
                return this.sendRequest('GET', url, data);
            };
            ComposerClient.post = function (url, data) {
                return this.sendRequest('POST', url, data);
            };
            ComposerClient.put = function (url, data) {
                return this.sendRequest('PUT', url, data);
            };
            ComposerClient.remove = function (url, data) {
                return this.sendRequest('DELETE', url, data);
            };
            ComposerClient.sendRequest = function (method, url, data) {
                var _this = this;
                var settings = {
                    contentType: 'application/json',
                    dataType: 'json',
                    data: data ? JSON.stringify(data) : null,
                    method: method,
                    url: url,
                    headers: {
                        'Accept-Language': this.getPageCulture()
                    }
                };
                return Q($.ajax(settings)).fail(function (reason) { return _this.onRequestRejected(reason); });
            };
            ComposerClient.getPageCulture = function () {
                var culture = $('html').attr('lang');
                if (!culture) {
                    throw new Error('No lang attribute was found on the <html> element. Please make sure it is included.');
                }
                return culture;
            };
            ComposerClient.onRequestRejected = function (reason) {
                if (reason.readyState === 0) {
                    throw { Errors: [{ LocalizedErrorMessage: this.getAjaxFailedErrorMessage() }] };
                }
                if (reason.readyState === 4 && reason.status === 205) {
                    console.log('Page must be reloaded.');
                    var redirectUrl = this.getReloadUrl();
                    window.location.href = redirectUrl;
                }
                if (reason.readyState === 4 && reason.status === 401) {
                    throw { Errors: [{ LocalizedErrorMessage: this.getUnauthorizedErrorMessage() }] };
                }
                if (reason.readyState === 4 && reason.status === 500 && reason.responseJSON !== null) {
                    throw { Errors: reason.responseJSON.Errors };
                }
                throw reason;
            };
            ComposerClient.getReloadUrl = function () {
                var rawQueryString = window.location.search;
                var value = 'session=expired';
                if (this.doesUrlContainQueryString(rawQueryString, value)) {
                    return window.location.href;
                }
                var splitter = '&';
                if (_.isEmpty(rawQueryString)) {
                    splitter = '/?';
                }
                var qs = "" + rawQueryString + splitter + value;
                var urls = window.location.href.split('?', 2);
                var url = "" + urls[0] + qs;
                return url;
            };
            ComposerClient.doesUrlContainQueryString = function (url, value) {
                var regex = new RegExp('(\\?|\\&)' + value, 'i');
                return regex.test(url);
            };
            ComposerClient.getAjaxFailedErrorMessage = function () {
                return Composer.LocalizationProvider.instance().getLocalizedString('General', 'L_ErrorAjaxFailed');
            };
            ComposerClient.getUnauthorizedErrorMessage = function () {
                return Composer.LocalizationProvider.instance().getLocalizedString('General', 'L_ErrorUnauthorized');
            };
            return ComposerClient;
        }());
        Composer.ComposerClient = ComposerClient;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Mvc/ComposerClient.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Events/EventHub.ts' />
///<reference path='IMembershipRepository.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var MembershipRepository = (function () {
            function MembershipRepository() {
            }
            /**
            * Attempt to Log In using Composer API.
            * @param
            */
            MembershipRepository.prototype.login = function (formData, returnUrl) {
                var data = _.extend({ ReturnUrl: returnUrl }, formData);
                return Composer.ComposerClient.post('/api/membership/login', data);
            };
            /**
            * Logout using Composer API.
            * @param
            */
            MembershipRepository.prototype.logout = function (returnUrl, preserveCustomerInfo) {
                if (returnUrl === void 0) { returnUrl = ''; }
                if (preserveCustomerInfo === void 0) { preserveCustomerInfo = false; }
                var data = {
                    ReturnUrl: returnUrl,
                    PreserveCustomerInfo: preserveCustomerInfo
                };
                return Composer.ComposerClient.post('/api/membership/logout', data);
            };
            /**
            * Attempt to register using Composer API.
            * @param
            */
            MembershipRepository.prototype.register = function (formData, returnUrl) {
                var data = _.extend({ ReturnUrl: returnUrl }, formData);
                return Composer.ComposerClient.post('/api/membership/register', data);
            };
            /**
            * Attempt to trigger the forgot password email using Composer API.
            * @param
            */
            MembershipRepository.prototype.forgotPassword = function (formData) {
                var data = _.extend({}, formData);
                return Composer.ComposerClient.post('/api/membership/forgotpassword', data);
            };
            /**
            * Attempt to reset password for the Customer identified by the ticket using Composer API.
            * @param
            */
            MembershipRepository.prototype.resetPassword = function (formData, ticket, returnUrl) {
                var data = _.extend({ ReturnUrl: returnUrl, ticket: ticket }, formData);
                return Composer.ComposerClient.post('/api/membership/resetpassword', data);
            };
            /**
            * Attempt to change the password for the connected Customer using Composer API.
            * @param
            */
            MembershipRepository.prototype.changePassword = function (formData, returnUrl) {
                var data = _.extend({ ReturnUrl: returnUrl }, formData);
                return Composer.ComposerClient.post('/api/membership/changepassword', data);
            };
            /**
             * If the current user is authenticated or not
             */
            MembershipRepository.prototype.isAuthenticated = function () {
                return Composer.ComposerClient.get('/api/membership/isAuthenticated');
            };
            return MembershipRepository;
        }());
        Composer.MembershipRepository = MembershipRepository;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Repositories/MembershipRepository.ts' />
///<reference path='IMembershipService.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var MembershipService = (function () {
            function MembershipService(membershipRepository) {
                if (!membershipRepository) {
                    throw new Error('Error: membershipRepository is required');
                }
                this.membershipRepository = membershipRepository;
            }
            /**
            * Attempt to Log In using Composer API.
            * @param
            */
            MembershipService.prototype.login = function (formData, returnUrl) {
                return this.membershipRepository.login(formData, returnUrl);
            };
            /**
            * Logout using Composer API.
            * @param
            */
            MembershipService.prototype.logout = function (returnUrl, preserveCustomerInfo) {
                if (returnUrl === void 0) { returnUrl = ''; }
                if (preserveCustomerInfo === void 0) { preserveCustomerInfo = false; }
                return this.membershipRepository.logout(returnUrl, preserveCustomerInfo);
            };
            /**
            * Attempt to register using Composer API.
            * @param
            */
            MembershipService.prototype.register = function (formData, returnUrl) {
                return this.membershipRepository.register(formData, returnUrl);
            };
            /**
            * Attempt to trigger the forgot password email using Composer API.
            * @param
            */
            MembershipService.prototype.forgotPassword = function (formData) {
                return this.membershipRepository.forgotPassword(formData);
            };
            /**
            * Attempt to reset password for the Customer identified by the ticket using Composer API.
            * @param
            */
            MembershipService.prototype.resetPassword = function (formData, ticket, returnUrl) {
                return this.membershipRepository.resetPassword(formData, ticket, returnUrl);
            };
            /**
            * Attempt to change the password for the connected Customer using Composer API.
            * @param
            */
            MembershipService.prototype.changePassword = function (formData, returnUrl) {
                return this.membershipRepository.changePassword(formData, returnUrl);
            };
            /**
             * If the current user is authenticated or not
             */
            MembershipService.prototype.isAuthenticated = function () {
                var _this = this;
                if (_.isUndefined(this.memoizeIsAuthenticated)) {
                    this.memoizeIsAuthenticated = _.memoize(function (arg) { return _this.isAuthenticatedImpl(); });
                }
                return this.memoizeIsAuthenticated();
            };
            /**
             * If the current user is authenticated or not
             */
            MembershipService.prototype.isAuthenticatedImpl = function () {
                return this.membershipRepository.isAuthenticated();
            };
            return MembershipService;
        }());
        Composer.MembershipService = MembershipService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/jqueryPlugins/ISerializeObjectJqueryPlugin.ts' />
///<reference path='../../../Common/Source/Typescript/MembershipService.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        (function (MyAccountEvents) {
            MyAccountEvents[MyAccountEvents["AccountCreated"] = 0] = "AccountCreated";
            MyAccountEvents[MyAccountEvents["AccountUpdated"] = 1] = "AccountUpdated";
            MyAccountEvents[MyAccountEvents["AddressCreated"] = 2] = "AddressCreated";
            MyAccountEvents[MyAccountEvents["AddressUpdated"] = 3] = "AddressUpdated";
            MyAccountEvents[MyAccountEvents["AddressDeleted"] = 4] = "AddressDeleted";
            MyAccountEvents[MyAccountEvents["LoggedIn"] = 5] = "LoggedIn";
            MyAccountEvents[MyAccountEvents["LoggedOut"] = 6] = "LoggedOut";
            MyAccountEvents[MyAccountEvents["PasswordChanged"] = 7] = "PasswordChanged";
            MyAccountEvents[MyAccountEvents["ForgotPasswordInstructionSent"] = 8] = "ForgotPasswordInstructionSent";
        })(Composer.MyAccountEvents || (Composer.MyAccountEvents = {}));
        var MyAccountEvents = Composer.MyAccountEvents;
        ;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
/// <reference path='../../../../Composer.UI\Source\Typescript\Events\EventHub.ts' />
/// <reference path='./IAnalyticsPlugin.ts' />
/// <reference path='./IAnalyticsOrder.ts' />
/// <reference path='./IAnalyticsTransaction.ts' />
/// <reference path='./IAnalyticsSearchFilters.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Plugins/IPlugin.ts' />
/// <reference path='../../../../Composer.MyAccount.UI/Common/Source/Typescript/MyAccountEvents.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var AnalyticsPlugin = (function () {
            function AnalyticsPlugin() {
            }
            AnalyticsPlugin.prototype.initialize = function () {
                this.useVariantIdWhenPossible = true;
                this.eventHub = Composer.EventHub.instance();
                this.cacheProvider = Composer.CacheProvider.instance();
                this.registerSubscriptions();
            };
            AnalyticsPlugin.setCheckoutOrigin = function (checkoutOrigin) {
                Composer.CacheProvider.instance().sessionStorage.setItem('analytics.checkoutOrigin', checkoutOrigin);
            };
            AnalyticsPlugin.getCheckoutOrigin = function () {
                return Composer.CacheProvider.instance().sessionStorage.getItem('analytics.checkoutOrigin');
            };
            /**
             * Binds all the events for Analytics
             */
            AnalyticsPlugin.prototype.registerSubscriptions = function () {
                var _this = this;
                this.eventHub.subscribe('lineItemAdding', function (eventInfo) {
                    _this.onLineItemAdding(eventInfo);
                });
                this.eventHub.subscribe('lineItemRemoving', function (eventInfo) {
                    _this.onLineItemRemoving(eventInfo);
                });
                this.eventHub.subscribe('productDetailsRendered', function (eventInfo) {
                    _this.onProductDetailsRendered(eventInfo);
                });
                this.eventHub.subscribe('checkoutStepRendered', function (eventInfo) {
                    _this.onCheckoutStepRendered(eventInfo);
                });
                this.eventHub.subscribe('checkoutNavigationRendered', function (eventInfo) {
                    _this.onCheckoutNavigationRendered(eventInfo);
                });
                this.eventHub.subscribe('CheckoutConfirmation', function (eventInfo) {
                    _this.onCheckoutCompleted(eventInfo);
                });
                this.eventHub.subscribe('searchResultRendered', function (eventInfo) {
                    _this.onSearchResultRendered(eventInfo);
                });
                this.eventHub.subscribe('relatedProductsLoaded', function (eventInfo) {
                    _this.onRelatedProductsLoaded(eventInfo);
                });
                this.eventHub.subscribe('productClick', function (eventInfo) {
                    _this.onProductClick(eventInfo);
                });
                this.eventHub.subscribe('pageNotFound', function (eventInfo) {
                    _this.onPageNotFound(eventInfo);
                });
                this.eventHub.subscribe('wishListLineItemAdding', function (eventInfo) {
                    _this.onWishListLineItemAdding(eventInfo);
                });
                this.eventHub.subscribe('wishListLineItemAddingToCart', function (eventInfo) {
                    _this.onLineItemAdding(eventInfo);
                });
                this.eventHub.subscribe('wishListCopyingShareUrl', function (eventInfo) {
                    _this.onWishListCopingShareUrl(eventInfo);
                });
                this.eventHub.subscribe(Composer.MyAccountEvents[Composer.MyAccountEvents.LoggedIn], function (eventInfo) {
                    _this.onUserLoggedIn(eventInfo);
                });
                this.eventHub.subscribe(Composer.MyAccountEvents[Composer.MyAccountEvents.AccountCreated], function (eventInfo) {
                    _this.onUserCreated(eventInfo);
                });
                this.eventHub.subscribe(Composer.MyAccountEvents[Composer.MyAccountEvents.ForgotPasswordInstructionSent], function (eventInfo) {
                    _this.onRecoverPassword(eventInfo);
                });
                this.eventHub.subscribe('noResultsFound', function (eventInfo) {
                    _this.onNoResultsFound(eventInfo);
                });
                this.eventHub.subscribe('searchTermCorrected', function (eventInfo) {
                    _this.onSearchTermCorrected(eventInfo);
                });
                this.eventHub.subscribe('singleCategoryAdded', function (eventInfo) {
                    _this.onSingleFacetChanged(eventInfo);
                });
                this.eventHub.subscribe('singleFacetsChanged', function (eventInfo) {
                    _this.onSingleFacetChanged(eventInfo);
                });
                this.eventHub.subscribe('multiFacetChanged', function (eventInfo) {
                    _this.onMultiFacetChanged(eventInfo);
                });
                this.eventHub.subscribe('sortingChanged', function (eventInfo) {
                    _this.onSortingChanged(eventInfo);
                });
            };
            /**
             * Occurs when a user log in
             */
            AnalyticsPlugin.prototype.onUserLoggedIn = function (eventInfo) {
                if (!eventInfo) {
                    return;
                }
                var data = eventInfo.data;
                this.userLoggedIn('regular', data.ReturnUrl);
            };
            /**
             * Occurs when a user creates an account
             */
            AnalyticsPlugin.prototype.onUserCreated = function (eventInfo) {
                if (!eventInfo) {
                    return;
                }
                this.userCreated();
            };
            /**
             * Occurs when a user log in
             */
            AnalyticsPlugin.prototype.onRecoverPassword = function (eventInfo) {
                if (!eventInfo) {
                    return;
                }
                this.recoverPassword();
            };
            AnalyticsPlugin.prototype.onSingleFacetChanged = function (eventInfo) {
                if (!eventInfo) {
                    return;
                }
                var data = eventInfo.data;
                var facetKey = data.facetKey;
                if (_.isString(data.facetKey)) {
                    facetKey = data.facetKey.replace('[]', '').toLowerCase();
                    if (facetKey.indexOf('category') !== -1) {
                        facetKey = 'category';
                    }
                }
                ;
                var searchFilters = {
                    facetKey: facetKey,
                    facetValue: data.facetValue,
                    pageType: data.pageType
                };
                this.singleFacetChanged(searchFilters);
            };
            AnalyticsPlugin.prototype.onMultiFacetChanged = function (eventInfo) {
                if (!eventInfo) {
                    return;
                }
                var data = eventInfo.data;
                var facetKey = _.isString(data.facetKey) ? data.facetKey.replace('[]', '').toLowerCase() : data.facetKey;
                var searchFilters = {
                    facetKey: facetKey,
                    facetValue: data.facetValue,
                    pageType: data.pageType
                };
                this.multiFacetChanged(searchFilters);
            };
            AnalyticsPlugin.prototype.onSortingChanged = function (eventInfo) {
                if (!eventInfo) {
                    return;
                }
                var data = eventInfo.data;
                this.sortingChanged(data.sortingType, data.pageType);
            };
            /**
             * Occurs when a 404 page loads.
             */
            AnalyticsPlugin.prototype.onPageNotFound = function (eventInfo) {
                if (!eventInfo) {
                    return;
                }
                var data = eventInfo.data;
                this.sendEvent('event', '404 Errors', data.PageUrl, data.ReferrerUrl);
            };
            /**
            * Occurs when a user click on 'Copy Share Url' button
            */
            AnalyticsPlugin.prototype.onWishListCopingShareUrl = function (eventInfo) {
                if (!eventInfo) {
                    return;
                }
                var data = eventInfo.data;
                this.shareWishList(data);
            };
            /**
             * Occurs when a Line Item is being added to the Wish List.
             */
            AnalyticsPlugin.prototype.onWishListLineItemAdding = function (eventInfo) {
                if (!eventInfo) {
                    return;
                }
                var data = eventInfo.data;
                var analyticsProduct = {
                    name: data.DisplayName,
                    price: this.trimPrice(data.ListPrice)
                };
                this.addToWishList(analyticsProduct);
            };
            /**
             * Occurs when a Line Item is being added.
             */
            AnalyticsPlugin.prototype.onLineItemAdding = function (eventInfo) {
                if (!eventInfo) {
                    return;
                }
                var data = eventInfo.data;
                var analyticsProduct = {
                    name: data.DisplayName,
                    id: data.ProductId,
                    variant: data.Variant,
                    price: this.trimPriceAndUnlocalize(data.ListPrice),
                    quantity: data.Quantity,
                    category: data.CategoryId,
                    brand: data.Brand,
                    list: data.List
                };
                this.addToCart(analyticsProduct, data.List);
            };
            /**
             * Occurs when a Line item is being removed.
             */
            AnalyticsPlugin.prototype.onLineItemRemoving = function (eventInfo) {
                if (!eventInfo) {
                    return;
                }
                var data = eventInfo.data;
                var analyticsProduct = {
                    name: data.DisplayName,
                    id: data.ProductId,
                    variant: data.Variant,
                    price: this.trimPriceAndUnlocalize(data.ListPrice),
                    quantity: data.Quantity,
                    category: data.CategoryId,
                    brand: data.Brand
                };
                this.removeFromCart(analyticsProduct, data.List);
            };
            /**
             * Occurs when a product Details is rendered.
             */
            AnalyticsPlugin.prototype.onProductDetailsRendered = function (eventInfo) {
                if (!eventInfo) {
                    return;
                }
                var data = eventInfo.data;
                var analyticsProducts = [];
                analyticsProducts.push({
                    name: data.DisplayName,
                    id: data.ProductId,
                    price: this.trimPriceAndUnlocalize(data.ListPrice),
                    brand: data.Brand,
                    category: data.CategoryId,
                    variant: data.Variant
                });
                this.productDetailImpressions(analyticsProducts, 'Detail');
            };
            /**
             *  Occurs when a Checkout Step is rendered.
             */
            AnalyticsPlugin.prototype.onCheckoutStepRendered = function (eventInfo) {
                var _this = this;
                if (!eventInfo) {
                    return;
                }
                var data = eventInfo.data;
                var analyticsProducts = [];
                if (data.Cart) {
                    Q.resolve(data.Cart).then(function (cart) {
                        _.each(cart.LineItemDetailViewModels, function (lineItemDetailViewModel) {
                            var analyticsProduct = {
                                name: lineItemDetailViewModel.ProductSummary.DisplayName,
                                id: lineItemDetailViewModel.ProductId,
                                price: _this.trimPriceAndUnlocalize(lineItemDetailViewModel.ListPrice),
                                quantity: lineItemDetailViewModel.Quantity,
                                category: lineItemDetailViewModel.ProductSummary.CategoryId.replace(/-/g, '/'),
                                variant: _this.buildVariantForLineItem(lineItemDetailViewModel),
                                brand: lineItemDetailViewModel.ProductSummary.Brand
                            };
                            if (_this.useVariantIdWhenPossible && lineItemDetailViewModel.VariantId) {
                                analyticsProduct.id = lineItemDetailViewModel.VariantId;
                            }
                            analyticsProducts.push(analyticsProduct);
                        });
                        var checkoutOrigin = AnalyticsPlugin.getCheckoutOrigin();
                        var transaction = {
                            checkoutOrigin: checkoutOrigin
                        };
                        _this.checkout(data.StepNumber, transaction, analyticsProducts);
                    });
                }
            };
            /**
             * Occurs when a the Checkout Navigation strip is rendered.
             */
            AnalyticsPlugin.prototype.onCheckoutNavigationRendered = function (eventInfo) {
                if (!eventInfo) {
                    return;
                }
                var data = eventInfo.data;
                this.checkoutOption(data.StepNumber);
            };
            /**
             * Occurs when a the Checkout completes, creating an order out of a Cart.
             */
            AnalyticsPlugin.prototype.onCheckoutCompleted = function (eventInfo) {
                var _this = this;
                if (!eventInfo) {
                    return;
                }
                var data = eventInfo.data;
                var order = {
                    id: data.OrderNumber,
                    affiliation: data.Affiliation,
                    revenue: data.Revenu,
                    tax: data.Tax,
                    shipping: data.Shipping,
                    coupon: _.isEmpty(data.Coupons) ? '' : data.Coupons.map(function (c) { return c.CouponCode; }).join(', '),
                    currencyCode: data.BillingCurrency
                };
                var transaction = this.mapAnalyticTransactionFromOrder(data);
                var products = this.mapAnalyticProductsFromLineItems(data);
                var coupons = this.mapAnalyticCouponsFromOrder(data);
                _.each(coupons, function (coupon) {
                    _this.couponsUsed(coupon);
                });
                this.purchase(order, transaction, products);
            };
            /**
             * Occurs when the Search results on a page are rendered.
             */
            AnalyticsPlugin.prototype.onSearchResultRendered = function (eventInfo) {
                var _this = this;
                if (!eventInfo) {
                    return;
                }
                var data = eventInfo.data;
                if (data.ProductSearchResults.SearchResults.length > 0) {
                    var products = [];
                    _.each(data.ProductSearchResults.SearchResults, function (product, i) {
                        var analyticsProduct = {
                            id: product.ProductId,
                            name: product.DisplayName,
                            price: _this.trimPriceAndUnlocalize(product.Pricing.IsOnSale ? product.Pricing.Price : product.Pricing.ListPrice),
                            brand: product.Brand,
                            category: product.CategoryId,
                            list: data.ListName,
                            position: (i + 1) + (data.MaxItemsPerPage * (data.PageNumber - 1))
                        };
                        products.push(analyticsProduct);
                    });
                    this.productImpressions(products);
                }
                this.sendEvent('event', 'Search Results', 'Rendered', data.ProductSearchResults.Keywords, data.ProductSearchResults.TotalCount);
            };
            /**
             * Occurs when Related Products are loaded.
             */
            AnalyticsPlugin.prototype.onRelatedProductsLoaded = function (eventInfo) {
                var _this = this;
                if (!eventInfo) {
                    return;
                }
                var data = eventInfo.data;
                var products = [];
                _.each(data.Products, function (product, i) {
                    var analyticsProduct = {
                        id: product.ProductId,
                        name: product.DisplayName,
                        price: _this.trimPriceAndUnlocalize(product.Price),
                        brand: product.Brand,
                        list: data.ListName,
                        category: product.CategoryId,
                        position: i + 1
                    };
                    products.push(analyticsProduct);
                });
                this.productImpressions(products);
            };
            /**
             * Occurs when the user clicks on a product.
             */
            AnalyticsPlugin.prototype.onProductClick = function (eventInfo) {
                if (!eventInfo) {
                    return;
                }
                var data = eventInfo.data;
                var position = data.Index + 1;
                if (data.MaxItemsPerPage && data.PageNumber) {
                    position = position + (data.MaxItemsPerPage * (parseInt(data.PageNumber, 10) - 1));
                }
                var product = {
                    id: data.Product.ProductId,
                    name: data.Product.DisplayName,
                    price: this.trimPriceAndUnlocalize(data.Product.Price || data.Product.Pricing.Price),
                    brand: data.Product.Brand,
                    category: data.Product.CategoryId,
                    position: position
                };
                var products = [product];
                this.productClick(products, data.ListName);
            };
            /**
             * Occurs when no results were found for a search.
             */
            AnalyticsPlugin.prototype.onNoResultsFound = function (eventInfo) {
                if (!eventInfo) {
                    return;
                }
                var data = eventInfo.data;
                this.noResultsFound(data.Keyword);
            };
            /**
             * Occurs when a search term has been auto corrected during a search.
             */
            AnalyticsPlugin.prototype.onSearchTermCorrected = function (eventInfo) {
                if (!eventInfo) {
                    return;
                }
                var data = eventInfo.data;
                var searchResults = {
                    keywordCorrected: data.KeywordCorrected,
                    keywordEntered: data.KeywordEntered
                };
                this.searchKeywordCorrection(searchResults);
            };
            AnalyticsPlugin.prototype.buildVariantForLineItem = function (lineItem) {
                if (lineItem.VariantId && lineItem.KeyVariantAttributesList) {
                    return this.buildVariantName(lineItem.KeyVariantAttributesList);
                }
                return undefined;
            };
            AnalyticsPlugin.prototype.buildVariantName = function (kvas) {
                var nameParts = [];
                for (var i = 0; i < kvas.length; i++) {
                    var value = kvas[i].OriginalValue;
                    nameParts.push(value);
                }
                return nameParts.join(' ');
            };
            AnalyticsPlugin.prototype.mapAnalyticProductsFromLineItems = function (data) {
                var _this = this;
                var products = [];
                products = _.map(data.LineItems, function (lineItem) {
                    var analyticsProduct = {
                        id: lineItem.ProductId,
                        name: lineItem.Name,
                        price: lineItem.Price,
                        variant: _this.buildVariantForLineItem(lineItem),
                        quantity: lineItem.Quantity,
                        category: lineItem.CategoryId,
                        brand: lineItem.Brand
                    };
                    if (_this.useVariantIdWhenPossible && lineItem.VariantId) {
                        analyticsProduct.id = lineItem.VariantId;
                    }
                    return analyticsProduct;
                });
                return products;
            };
            AnalyticsPlugin.prototype.mapAnalyticCouponsFromOrder = function (data) {
                var coupons = [];
                var billingCurrency = data.BillingCurrency;
                coupons = _.map(data.Coupons, function (coupon) {
                    var analyticsCoupon = {
                        code: coupon.CouponCode,
                        discountAmount: coupon.Amount,
                        currencyCode: billingCurrency,
                        promotionName: coupon.PromotionName
                    };
                    return analyticsCoupon;
                });
                return coupons;
            };
            AnalyticsPlugin.prototype.mapAnalyticTransactionFromOrder = function (data) {
                var checkoutOrigin = AnalyticsPlugin.getCheckoutOrigin();
                var analyticsTransaction = {
                    shippingType: data.ShippingOptions,
                    checkoutOrigin: checkoutOrigin
                };
                return analyticsTransaction;
            };
            //Abstract methods
            AnalyticsPlugin.prototype.userLoggedIn = function (type, source) {
                console.error('Not implemented Exception');
            };
            AnalyticsPlugin.prototype.userCreated = function () {
                console.error('Not implemented Exception');
            };
            AnalyticsPlugin.prototype.recoverPassword = function () {
                console.error('Not implemented Exception');
            };
            AnalyticsPlugin.prototype.singleFacetChanged = function (searchFilters) {
                console.error('Not implemented Exception');
            };
            AnalyticsPlugin.prototype.multiFacetChanged = function (searchFilters) {
                console.error('Not implemented Exception');
            };
            AnalyticsPlugin.prototype.sortingChanged = function (sortingType, pageType) {
                console.error('Not implemented Exception');
            };
            AnalyticsPlugin.prototype.productImpressions = function (products) {
                console.error('Not implemented Exception');
            };
            AnalyticsPlugin.prototype.productClick = function (product, listName) {
                console.error('Not implemented Exception');
            };
            AnalyticsPlugin.prototype.productDetailImpressions = function (products, listName) {
                console.error('Not implemented Exception');
            };
            AnalyticsPlugin.prototype.addToCart = function (product, listName) {
                console.error('Not implemented Exception');
            };
            AnalyticsPlugin.prototype.addToWishList = function (product) {
                console.error('Not implemented Exception');
            };
            AnalyticsPlugin.prototype.removeFromCart = function (product, listName) {
                console.error('Not implemented Exception');
            };
            AnalyticsPlugin.prototype.checkout = function (step, transaction, products) {
                console.error('Not implemented Exception');
            };
            AnalyticsPlugin.prototype.checkoutOption = function (step) {
                console.error('Not implemented Exception');
            };
            AnalyticsPlugin.prototype.purchase = function (order, transaction, products) {
                console.error('Not implemented Exception');
            };
            AnalyticsPlugin.prototype.couponsUsed = function (order) {
                console.error('Not implemented Exception');
            };
            AnalyticsPlugin.prototype.shareWishList = function (data) {
                console.error('Not implemented Exception');
            };
            AnalyticsPlugin.prototype.searchKeywordCorrection = function (data) {
                console.error('Not implemented Exception');
            };
            AnalyticsPlugin.prototype.noResultsFound = function (keywordNotFound) {
                console.error('Not implemented Exception');
            };
            /**
             * Send a custom event to the analytics providers with multiples informations concerning the event
             * https://support.google.com/analytics/answer/1033068?hl=en
             * @param {string} eventName - The name of the custom event to send (e.g. productClick)
             * @param {string} category - The name that you supply as a way to group objects that you want to track (e.g. Product)
             * @param {string} action - The name the type of event or interaction you want to track for a particular web object (e.g. Click)
             * @param {string} label - Provide additional information for events that you want to track (e.g. Url of the clicked product)
             * @param {number} value - Use it to assign a numerical value to a tracked page object (e.g. Price of the product)
             */
            AnalyticsPlugin.prototype.sendEvent = function (eventName, category, action, label, value) {
                console.error('Not implemented Exception');
            };
            AnalyticsPlugin.prototype.trimPrice = function (price) {
                if (typeof price === 'number') {
                    return price;
                }
                return price ? parseFloat(price.match(/[\d\.\d]+/i)[0]) : null;
            };
            AnalyticsPlugin.prototype.trimPriceAndUnlocalize = function (price) {
                if (!price || typeof price === 'number') {
                    return price;
                }
                // remove anything that is not a digit, '.' or ','
                price = price.replace(/[^0-9,.]/, '');
                // if price contains a '.' its an English price and you can remove any ','
                if (price.indexOf('.') !== -1) {
                    price = price.replace(',', '');
                }
                else {
                    price = price.replace(',', '.');
                }
                return price ? parseFloat(price.match(/[\d\.\d]+/i)[0]) : null;
            };
            AnalyticsPlugin.prototype.formatDate = function (date) {
                var d = new Date(date), month = '' + (d.getMonth() + 1), day = '' + d.getDate(), year = d.getFullYear();
                if (month.length < 2) {
                    month = '0' + month;
                }
                if (day.length < 2) {
                    day = '0' + day;
                }
                return [year, month, day].join('-');
            };
            return AnalyticsPlugin;
        }());
        Composer.AnalyticsPlugin = AnalyticsPlugin;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));



/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
/// <reference path='../../../../Composer.UI/Source/Typescript/Mvc/ComposerClient.ts' />
/// <reference path='../../../../Composer.UI/Source/Typescript/Events/EventHub.ts' />
/// <reference path='./AnalyticsPlugin.ts' />
/// <reference path='./IAnalyticsProduct.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var GoogleAnalyticsPlugin = (function (_super) {
            __extends(GoogleAnalyticsPlugin, _super);
            function GoogleAnalyticsPlugin() {
                _super.apply(this, arguments);
            }
            GoogleAnalyticsPlugin.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                if (!window['dataLayer']) {
                    console.warn('The dataLayer variable does not exists. Have you included the gtm.js script ?');
                    window['dataLayer'] = [];
                }
            };
            GoogleAnalyticsPlugin.prototype.userLoggedIn = function (type, source) {
                dataLayer.push({
                    event: 'accountLogin',
                    loginType: type,
                    loginSource: source
                });
            };
            GoogleAnalyticsPlugin.prototype.userCreated = function () {
                dataLayer.push({
                    event: 'accountCreated'
                });
            };
            GoogleAnalyticsPlugin.prototype.recoverPassword = function () {
                dataLayer.push({
                    event: 'passRecovery'
                });
            };
            GoogleAnalyticsPlugin.prototype.singleFacetChanged = function (searchFilters) {
                dataLayer.push({
                    event: 'filterRefinement',
                    filterName: searchFilters.facetKey,
                    filterValue: searchFilters.facetValue,
                    sectionName: searchFilters.pageType
                });
            };
            GoogleAnalyticsPlugin.prototype.multiFacetChanged = function (searchFilters) {
                dataLayer.push({
                    event: 'filterRefinement',
                    filterName: searchFilters.facetKey,
                    filterValue: searchFilters.facetValue,
                    sectionName: searchFilters.pageType
                });
            };
            GoogleAnalyticsPlugin.prototype.sortingChanged = function (sortingType, pageType) {
                dataLayer.push({
                    event: 'sortingOption',
                    sortingType: sortingType,
                    sectionName: pageType
                });
            };
            GoogleAnalyticsPlugin.prototype.productImpressions = function (products) {
                dataLayer.push({
                    event: 'productImpressions',
                    ecommerce: {
                        impressions: products
                    }
                });
            };
            GoogleAnalyticsPlugin.prototype.productClick = function (products, listName) {
                dataLayer.push({
                    event: 'productClick',
                    ecommerce: {
                        click: {
                            actionField: {
                                list: listName
                            },
                            products: products
                        }
                    }
                });
            };
            GoogleAnalyticsPlugin.prototype.productDetailImpressions = function (products, listName) {
                dataLayer.push({
                    event: 'productDetailImpressions',
                    ecommerce: {
                        detail: {
                            actionField: {
                                list: listName
                            },
                            products: products
                        }
                    }
                });
            };
            GoogleAnalyticsPlugin.prototype.addToCart = function (product, listName) {
                dataLayer.push({
                    event: 'addToCart',
                    ecommerce: {
                        add: {
                            actionField: { list: listName },
                            products: [product]
                        }
                    }
                });
            };
            GoogleAnalyticsPlugin.prototype.addToWishList = function (product) {
                dataLayer.push({
                    'event': 'addToWishList',
                    'productName': product.name,
                    'productPrice': product.price
                });
            };
            GoogleAnalyticsPlugin.prototype.couponsUsed = function (coupon) {
                dataLayer.push({
                    'event': 'checkoutComplete',
                    'couponCode': coupon.code,
                    'discountAmount': coupon.discountAmount
                });
            };
            GoogleAnalyticsPlugin.prototype.shareWishList = function (data) {
                dataLayer.push({
                    'event': 'shareMyWishList'
                });
            };
            GoogleAnalyticsPlugin.prototype.removeFromCart = function (product, listName) {
                dataLayer.push({
                    event: 'removeFromCart',
                    ecommerce: {
                        remove: {
                            actionField: { list: listName },
                            products: [product]
                        }
                    }
                });
            };
            GoogleAnalyticsPlugin.prototype.checkout = function (step, transaction, products) {
                dataLayer.push({
                    event: 'checkout',
                    transaction: transaction,
                    ecommerce: {
                        checkout: {
                            actionField: {
                                step: this.getStepNumber(step)
                            },
                            products: products
                        }
                    }
                });
            };
            GoogleAnalyticsPlugin.prototype.checkoutOption = function (step) {
                dataLayer.push({
                    event: 'checkoutOption',
                    ecommerce: {
                        checkout_option: {
                            actionField: {
                                step: this.getStepNumber(step)
                            }
                        }
                    }
                });
            };
            GoogleAnalyticsPlugin.prototype.purchase = function (order, transaction, products) {
                dataLayer.push({
                    event: 'purchase',
                    transaction: transaction,
                    ecommerce: {
                        purchase: {
                            actionField: order,
                            products: products
                        }
                    }
                });
            };
            GoogleAnalyticsPlugin.prototype.noResultsFound = function (keywordNotFound) {
                dataLayer.push({
                    'event': 'noResults',
                    'keywordEntered': keywordNotFound
                });
            };
            GoogleAnalyticsPlugin.prototype.searchKeywordCorrection = function (searchResults) {
                dataLayer.push({
                    'event': 'keywordCorrection',
                    'keywordCorrected': searchResults.keywordCorrected,
                    'keywordEntered': searchResults.keywordEntered
                });
            };
            GoogleAnalyticsPlugin.prototype.sendEvent = function (eventName, category, action, label, value) {
                dataLayer.push({
                    event: eventName,
                    gaEventCategory: category,
                    gaEventAction: action,
                    gaEventLabel: label,
                    gaEventValue: value
                });
            };
            GoogleAnalyticsPlugin.prototype.getStepNumber = function (step) {
                return step + 1;
            };
            return GoogleAnalyticsPlugin;
        }(Composer.AnalyticsPlugin));
        Composer.GoogleAnalyticsPlugin = GoogleAnalyticsPlugin;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Events/EventHub.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var AddToCartNotificationController = (function (_super) {
            __extends(AddToCartNotificationController, _super);
            function AddToCartNotificationController() {
                _super.apply(this, arguments);
            }
            AddToCartNotificationController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.registerSubscriptions();
            };
            AddToCartNotificationController.prototype.registerSubscriptions = function () {
                var _this = this;
                this.eventHub.subscribe('lineItemAddedToCart', function (e) {
                    _this.displayNotification(e);
                });
            };
            AddToCartNotificationController.prototype.displayNotification = function (e) {
                var _this = this;
                var notificationContainer = $(this.context.container), notificationTime = notificationContainer.data('notificationTime'), cart = e.data.Cart;
                if (notificationTime > 0) {
                    this.render('AddToCartNotificationModal', cart);
                    notificationContainer.removeClass('hidden');
                    setTimeout(function () {
                        _this.closeNotification();
                    }, parseInt(notificationTime, 10));
                }
            };
            AddToCartNotificationController.prototype.onClose = function (e) {
                e.event.preventDefault();
                this.closeNotification();
            };
            AddToCartNotificationController.prototype.closeNotification = function () {
                $(this.context.container).addClass('hidden');
            };
            return AddToCartNotificationController;
        }(Composer.Controller));
        Composer.AddToCartNotificationController = AddToCartNotificationController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
/// <reference path='./ICachePolicy.ts' />

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />



var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        (function (CacheError) {
            CacheError[CacheError["NotFound"] = 0] = "NotFound";
            CacheError[CacheError["Expired"] = 1] = "Expired";
        })(Composer.CacheError || (Composer.CacheError = {}));
        var CacheError = Composer.CacheError;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='./ICachePolicy.ts' />

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
/// <reference path='./../Storage/IStorage.ts' />
/// <reference path='./../Storage/IStorageItem.ts' />
/// <reference path='./CacheError.ts' />
/// <reference path='./ICache.ts' />
/// <reference path='./ICacheItem.ts' />
/// <reference path='./ICachePolicy.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var NoExpirationPolicy = {};
        /**
         * This cache uses a client-side storage engine to provide object caching
         */
        var StorageBasedCache = (function () {
            function StorageBasedCache(storage, type) {
                var _this = this;
                if (!storage) {
                    throw new Error('The storage is required');
                }
                if (!type) {
                    throw new Error('The type is required');
                }
                this._type = type;
                this._storage = storage;
                this._storageInitializing =
                    storage.init().then(function () { return storage.initObjectStore(_this._type); });
            }
            StorageBasedCache.prototype.get = function (key) {
                var _this = this;
                if (!key) {
                    throw new Error('The key is required');
                }
                return this._storageInitializing
                    .then(function () { return _this._storage.get(_this._type, key); })
                    .then(function (cacheItem) { return _this.validate(key, cacheItem).then(function () { return cacheItem.value; }); });
            };
            StorageBasedCache.prototype.validate = function (key, item) {
                var _this = this;
                return Q.Promise(function (resolve, reject) {
                    if (_.isNull(item) || _.isNull(item.value)) {
                        reject(Composer.CacheError.NotFound);
                    }
                    else if (_this.isExpired(item)) {
                        _this._storageInitializing
                            .then(function () { return _this._storage.remove(_this._type, key); })
                            .done(function () { return reject(Composer.CacheError.Expired); }, function (reason) { return reject(reason); });
                    }
                    else {
                        item.lastAccessed = new Date().getTime();
                        var storageItem = {
                            id: key,
                            value: item
                        };
                        _this._storageInitializing
                            .then(function () { return _this._storage.set(_this._type, storageItem); })
                            .done(function () { return resolve(void 0); }, function (reason) { return reject(reason); });
                    }
                });
            };
            StorageBasedCache.prototype.isExpired = function (item) {
                var expirationTime, now = new Date().getTime();
                if (item.policy && item.policy.absoluteExpiration) {
                    expirationTime = item.policy.absoluteExpiration;
                }
                else if (item.policy && item.policy.slidingExpiration) {
                    expirationTime = item.lastAccessed + (item.policy.slidingExpiration * 1000);
                }
                else {
                    return false;
                }
                return expirationTime < now;
            };
            StorageBasedCache.prototype.set = function (key, value, policy, type) {
                var _this = this;
                if (!key) {
                    throw new Error('The key is required');
                }
                var typeItem = !type ? this._type : type;
                var cacheItem = {
                    value: value,
                    policy: !policy ? NoExpirationPolicy : policy,
                    lastAccessed: new Date().getTime()
                };
                var storageItem = {
                    id: key,
                    value: cacheItem
                };
                return this._storageInitializing
                    .then(function () { return _this._storage.set(typeItem, storageItem); })
                    .then(function () { return value; });
            };
            StorageBasedCache.prototype.clear = function (key) {
                var _this = this;
                if (!key) {
                    throw new Error('The key is required');
                }
                return this._storageInitializing
                    .then(function () { return _this._storage.remove(_this._type, key); });
            };
            StorageBasedCache.prototype.fullClear = function () {
                var _this = this;
                return this._storageInitializing
                    .then(function () { return _this._storage.fullRemove(_this._type); });
            };
            return StorageBasedCache;
        }());
        Composer.StorageBasedCache = StorageBasedCache;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
/// <reference path='./IStorage.ts' />
/// <reference path='./IStorageItem.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var BackingStorage = (function () {
            function BackingStorage(_storage) {
                this._storage = _storage;
                this._isInitialized = false;
                this._initializedObjectStores = {};
            }
            BackingStorage.prototype.init = function () {
                var _this = this;
                return Q.fcall(function () {
                    _this._isInitialized = true;
                });
            };
            BackingStorage.prototype.initObjectStore = function (type) {
                var _this = this;
                if (!type) {
                    throw new Error('The type is required');
                }
                return Q.fcall(function () {
                    if (!_this._isInitialized) {
                        throw new Error('The local storage has not been initialized');
                    }
                    _this.initObjectStoreImpl(type);
                });
            };
            BackingStorage.prototype.initObjectStoreImpl = function (type) {
                var objectStore = this.getObjectStore(type);
                if (!objectStore) {
                    objectStore = {};
                    this.setObjectStore(type, objectStore);
                }
                this._initializedObjectStores[type] = true;
            };
            BackingStorage.prototype.get = function (type, id) {
                var _this = this;
                if (!type) {
                    throw new Error('The type is required');
                }
                if (!id) {
                    throw new Error('The id is required');
                }
                return Q.fcall(function () {
                    if (!_this._isInitialized) {
                        throw new Error('The local storage has not been initialized');
                    }
                    if (!_this._initializedObjectStores[type]) {
                        throw new Error('The object store ' + type + ' has not been initialized');
                    }
                    return _this.getImpl(type, id);
                });
            };
            BackingStorage.prototype.getImpl = function (type, id) {
                var objectStore = this.getObjectStore(type);
                if (objectStore.hasOwnProperty(id)) {
                    return objectStore[id];
                }
                return null;
            };
            BackingStorage.prototype.remove = function (type, id) {
                var _this = this;
                if (!type) {
                    throw new Error('The type is required');
                }
                if (!id) {
                    throw new Error('The id is required');
                }
                return Q.fcall(function () {
                    if (!_this._isInitialized) {
                        throw new Error('The local storage has not been initialized');
                    }
                    if (!_this._initializedObjectStores[type]) {
                        throw new Error('The object store ' + type + ' has not been initialized');
                    }
                    _this.removeImpl(type, id);
                });
            };
            BackingStorage.prototype.fullRemove = function (type) {
                var _this = this;
                if (!type) {
                    throw new Error('The type is required');
                }
                return Q.fcall(function () {
                    if (!_this._isInitialized) {
                        throw new Error('The local storage has not been initialized');
                    }
                    if (!_this._initializedObjectStores[type]) {
                        throw new Error('The object store ' + type + ' has not been initialized');
                    }
                    _this.fullRemoveImpl(type);
                });
            };
            BackingStorage.prototype.removeImpl = function (type, id) {
                var objectStore = this.getObjectStore(type);
                if (objectStore.hasOwnProperty(id)) {
                    delete objectStore[id];
                    this.setObjectStore(type, objectStore);
                }
            };
            BackingStorage.prototype.fullRemoveImpl = function (type) {
                this.setObjectStore(type, null);
            };
            BackingStorage.prototype.set = function (type, item) {
                var _this = this;
                if (!type) {
                    throw new Error('The type is required');
                }
                if (!item) {
                    throw new Error('The item is required');
                }
                if (!item.id) {
                    throw new Error('The item id is required');
                }
                return Q.fcall(function () {
                    if (!_this._isInitialized) {
                        throw new Error('The local storage has not been initialized');
                    }
                    if (!_this._initializedObjectStores[type]) {
                        throw new Error('The object store ' + type + ' has not been initialized');
                    }
                    _this.setImpl(type, item);
                });
            };
            BackingStorage.prototype.setImpl = function (type, item) {
                var objectStore = this.getObjectStore(type);
                objectStore[item.id] = item.value;
                this.setObjectStore(type, objectStore);
            };
            BackingStorage.prototype.getObjectStore = function (type) {
                var objectStoreString = this._storage.getItem(type);
                var objectStore = JSON.parse(objectStoreString);
                return objectStore;
            };
            BackingStorage.prototype.setObjectStore = function (type, objectStore) {
                var objectStoreString = JSON.stringify(objectStore);
                this._storage.setItem(type, objectStoreString);
            };
            return BackingStorage;
        }());
        Composer.BackingStorage = BackingStorage;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        (function (StorageType) {
            StorageType[StorageType["localStorage"] = 0] = "localStorage";
            StorageType[StorageType["sessionStorage"] = 1] = "sessionStorage";
        })(Composer.StorageType || (Composer.StorageType = {}));
        var StorageType = Composer.StorageType;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
/// <reference path='./StorageType.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var localStoragePolyFill;
        var sessionStoragePolyFill;
        var StoragePolyfill = (function () {
            function StoragePolyfill() {
            }
            StoragePolyfill.create = function (windowHandle, storageType) {
                var lastStorage, lastStorageKey, storagePolyFill;
                if (storageType === void 0) {
                    throw {
                        name: 'StoragePolyfillException',
                        message: "A storage type must be specified in the storage polyfill create method."
                    };
                }
                switch (storageType) {
                    case Composer.StorageType.localStorage:
                        storagePolyFill = localStoragePolyFill;
                        break;
                    case Composer.StorageType.sessionStorage:
                        storagePolyFill = sessionStoragePolyFill;
                        break;
                }
                if (storagePolyFill !== void 0) {
                    return storagePolyFill;
                }
                function persist(storage) {
                    windowHandle.name = JSON.stringify(storage);
                }
                function getStorageKey(key) {
                    return key.concat(storageType.toString());
                }
                function getStorageApi() {
                    return {
                        clear: function () {
                            var key;
                            Object.keys(storagePolyFill).forEach(function (key) {
                                if (storagePolyFill.hasOwnProperty(key)) {
                                    delete storagePolyFill[key];
                                }
                            });
                            persist(storagePolyFill);
                        },
                        getItem: function (key) {
                            key = getStorageKey(key);
                            return storagePolyFill[key] || null;
                        },
                        key: function (index) {
                            var keys = null;
                            keys = Object.keys(storagePolyFill).filter(function (value, indexToMatch) { return indexToMatch === index; });
                            return keys.length > 0 ? keys[0] : null;
                        },
                        removeItem: function (key) {
                            key = getStorageKey(key);
                            if (key in storagePolyFill && storagePolyFill.hasOwnProperty(key)) {
                                delete storagePolyFill[key];
                                persist(storagePolyFill);
                            }
                        },
                        setItem: function (key, data) {
                            key = getStorageKey(key);
                            storagePolyFill[key] = data;
                            persist(storagePolyFill);
                        },
                        dispose: function () {
                            persist(storagePolyFill);
                        }
                    };
                }
                storagePolyFill = Object.create(getStorageApi());
                if (windowHandle.name !== '') {
                    lastStorage = JSON.parse(windowHandle.name);
                    for (lastStorageKey in lastStorage) {
                        if (lastStorage.hasOwnProperty(lastStorageKey)) {
                            storagePolyFill[lastStorageKey] = lastStorage[lastStorageKey];
                        }
                    }
                }
                switch (storageType) {
                    case Composer.StorageType.localStorage:
                        localStoragePolyFill = storagePolyFill;
                        return localStoragePolyFill;
                    case Composer.StorageType.sessionStorage:
                        sessionStoragePolyFill = storagePolyFill;
                        return sessionStoragePolyFill;
                }
            };
            return StoragePolyfill;
        }());
        Composer.StoragePolyfill = StoragePolyfill;
        ;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='./StoragePolyfill.ts' />
///<reference path='./StorageType.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        //We need to defer the evaluation of the storage since on google chrome / incognito mode,
        //it raise a security error exception / access denied
        function getStorage(storageCallback, storageType, window) {
            var dummyData = '__composer__data__bidon__';
            try {
                var storageToUse = storageCallback();
                if (storageToUse !== void 0) {
                    //Hack to support safari browser / anonymous mode since it support local storage but with a max size of 0kb,
                    //thus we try to insert dummy data to check if it break or not.
                    storageToUse.setItem(dummyData, dummyData);
                    storageToUse.removeItem(dummyData);
                    return storageToUse;
                }
            }
            catch (e) {
                console.log('Storage is not supported or is disabled. window.name will be used instead.');
            }
            return Composer.StoragePolyfill.create(window, storageType);
        }
        Composer.StorageFactory = {
            create: function (storageType, window) {
                switch (storageType) {
                    case Composer.StorageType.localStorage:
                        return getStorage(function () { return window.localStorage; }, storageType, window);
                    case Composer.StorageType.sessionStorage:
                        return getStorage(function () { return window.sessionStorage; }, storageType, window);
                    default:
                        throw {
                            name: 'StorageTypeException',
                            message: "The storage type \"" + storageType + "\" is currently not supported."
                        };
                }
            }
        };
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='./ICache.ts' />
///<reference path='./ICacheProvider.ts' />
///<reference path='./StorageBasedCache.ts' />
///<reference path='../Storage/IStorage.ts' />
///<reference path='../Storage/BackingStorage.ts' />
/// <reference path='../Storage/StorageFactory.ts' />
/// <reference path='../Storage/StorageType.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var CacheProvider = (function () {
            function CacheProvider() {
                this.window = window;
                if (CacheProvider._instance) {
                    throw new Error('Error: Instantiation failed: Use CacheProvider.instance() instead of new.');
                }
                this.defaultCache = this.getDefaultCache();
                this.customCache = this.getCustomCache();
                this.localStorage = this.getLocalStorage();
                this.sessionStorage = this.getSessionStorage();
                CacheProvider._instance = this;
            }
            CacheProvider.instance = function () {
                return CacheProvider._instance;
            };
            CacheProvider.prototype.getCache = function (cacheKey) {
                var backingStorage = this.getLocalStorage();
                return new Composer.StorageBasedCache(new Composer.BackingStorage(backingStorage), cacheKey);
            };
            CacheProvider.prototype.getDefaultCache = function () {
                return this.getCache(CacheProvider.defaultCacheKey);
            };
            CacheProvider.prototype.getCustomCache = function () {
                return this.getCache(CacheProvider.customCacheKey);
            };
            CacheProvider.prototype.getLocalStorage = function () {
                return Composer.StorageFactory.create(Composer.StorageType.localStorage, window);
            };
            CacheProvider.prototype.getSessionStorage = function () {
                return Composer.StorageFactory.create(Composer.StorageType.sessionStorage, window);
            };
            CacheProvider.defaultCacheKey = 'oc-cache';
            CacheProvider.customCacheKey = 'composer-signInHeaderCache';
            CacheProvider._instance = new CacheProvider();
            return CacheProvider;
        }());
        Composer.CacheProvider = CacheProvider;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
/// <reference path='./../Mvc/ComposerClient.ts' />
/// <reference path='./ICartRepository.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var CartRepository = (function () {
            function CartRepository() {
            }
            CartRepository.prototype.getCart = function () {
                return Composer.ComposerClient.get('/api/cart/getcart');
            };
            CartRepository.prototype.addLineItem = function (productId, variantId, quantity, recurringOrderFrequencyName, recurringOrderProgramName) {
                if (!productId) {
                    throw new Error('The product id is required');
                }
                if (quantity <= 0) {
                    throw new Error('The quantity must be greater than zero');
                }
                var data = {
                    ProductId: productId,
                    VariantId: variantId,
                    Quantity: quantity,
                    RecurringOrderFrequencyName: recurringOrderFrequencyName,
                    RecurringOrderProgramName: recurringOrderProgramName
                };
                return Composer.ComposerClient.post('/api/cart/lineitem', data);
            };
            CartRepository.prototype.updateLineItem = function (lineItemId, quantity, recurringOrderFrequencyName, recurringOrderProgramName) {
                if (!lineItemId) {
                    throw new Error('The line item id is required');
                }
                if (quantity <= 0) {
                    throw new Error('The quantity must be greater than zero');
                }
                var data = {
                    LineItemId: lineItemId,
                    Quantity: quantity,
                    RecurringOrderFrequencyName: recurringOrderFrequencyName,
                    RecurringOrderProgramName: recurringOrderProgramName
                };
                return Composer.ComposerClient.put('/api/cart/lineitem', data);
            };
            CartRepository.prototype.deleteLineItem = function (lineItemId) {
                if (!lineItemId) {
                    throw new Error('The line item id is required');
                }
                var data = {
                    LineItemId: lineItemId
                };
                return Composer.ComposerClient.remove('/api/cart/lineitem', data);
            };
            CartRepository.prototype.updateBillingMethodPostalCode = function (postalCode) {
                if (!postalCode) {
                    throw new Error('The postal code is required');
                }
                var data = {
                    PostalCode: postalCode
                };
                return Composer.ComposerClient.post('/api/cart/billingaddress', data);
            };
            CartRepository.prototype.updateShippingMethodPostalCode = function (postalCode) {
                if (!postalCode) {
                    throw new Error('The postal code is required');
                }
                var data = {
                    PostalCode: postalCode
                };
                return Composer.ComposerClient.post('/api/cart/shippingaddress', data);
            };
            CartRepository.prototype.setCheapestShippingMethod = function () {
                var data = {
                    UseCheapest: true
                };
                return Composer.ComposerClient.post('/api/cart/shippingmethod', data);
            };
            CartRepository.prototype.addCoupon = function (couponCode) {
                if (!couponCode) {
                    throw new Error('The coupon code is required');
                }
                var data = {
                    CouponCode: couponCode
                };
                return Composer.ComposerClient.post('/api/cart/coupon', data);
            };
            CartRepository.prototype.removeCoupon = function (couponCode) {
                if (!couponCode) {
                    throw new Error('The coupon code is required');
                }
                var data = {
                    CouponCode: couponCode
                };
                return Composer.ComposerClient.remove('/api/cart/coupon', data);
            };
            CartRepository.prototype.clean = function () {
                var data = {};
                return Composer.ComposerClient.remove('/api/cart/clean', data);
            };
            CartRepository.prototype.updateCart = function (param) {
                if (!param) {
                    throw new Error('The param is required');
                }
                return Composer.ComposerClient.post('/api/cart/updateCart', param);
            };
            CartRepository.prototype.completeCheckout = function (currentStep) {
                var data = {
                    CurrentStep: currentStep
                };
                return Composer.ComposerClient.post('/api/cart/completecheckout', data);
            };
            return CartRepository;
        }());
        Composer.CartRepository = CartRepository;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Cache/CacheProvider.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Cache/CacheError.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Repositories/CartRepository.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Events/EventHub.ts' />
///<reference path='./ICartService.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var CartService = (function () {
            function CartService(cartRepository, eventHub) {
                this.cacheKey = 'CartViewModel';
                this.cachePolicy = { slidingExpiration: 300 }; // 5min
                if (!cartRepository) {
                    throw new Error('Error: cartRepository is required');
                }
                if (!eventHub) {
                    throw new Error('Error: eventHub is required');
                }
                this.cacheProvider = Composer.CacheProvider.instance();
                this.cartRepository = cartRepository;
                this.eventHub = eventHub;
            }
            CartService.prototype.getCart = function () {
                var _this = this;
                return this.getCacheCart()
                    .fail(function (reason) {
                    if (_this.canHandle(reason)) {
                        return _this.getFreshCart();
                    }
                    console.error('An error occured while getting the cart from cache.', reason);
                    throw reason;
                });
            };
            CartService.prototype.canHandle = function (reason) {
                return reason === Composer.CacheError.Expired || reason === Composer.CacheError.NotFound;
            };
            CartService.prototype.getFreshCart = function () {
                var _this = this;
                if (!CartService.GettingFreshCart) {
                    CartService.GettingFreshCart = this.cartRepository.getCart()
                        .then(function (cart) { return _this.setCartToCache(cart); });
                }
                // to avoid getting a fresh cart multiple times within a page session
                return CartService.GettingFreshCart
                    .fail(function (reason) {
                    console.error('An error occured while getting a fresh cart.', reason);
                    throw reason;
                });
            };
            CartService.prototype.addLineItem = function (productId, price, variantId, quantity, recurringOrderFrequencyName, recurringOrderProgramName) {
                var _this = this;
                if (quantity === void 0) { quantity = 1; }
                var data = {
                    ProductId: productId,
                    VariantId: variantId,
                    Quantity: quantity,
                    Price: price
                };
                this.eventHub.publish('cartUpdating', { data: data });
                return this.cartRepository.addLineItem(productId, variantId, quantity, recurringOrderFrequencyName, recurringOrderProgramName)
                    .then(function (cart) { return _this.setCartToCache(cart); })
                    .then(function (cart) {
                    var addedToCartData = {
                        Cart: cart,
                        ProductId: productId,
                        VariantId: variantId
                    };
                    _this.eventHub.publish('cartUpdated', { data: cart });
                    _this.eventHub.publish('lineItemAddedToCart', { data: addedToCartData });
                });
            };
            CartService.prototype.updateLineItem = function (lineItemId, quantity, productId, recurringOrderFrequencyName, recurringOrderProgramName) {
                var _this = this;
                var data = {
                    LineItemId: lineItemId,
                    Quantity: quantity,
                    ProductId: productId
                };
                this.eventHub.publish('cartUpdating', { data: data });
                return this.cartRepository.updateLineItem(lineItemId, quantity, recurringOrderFrequencyName, recurringOrderProgramName)
                    .then(function (cart) { return _this.setCartToCache(cart); })
                    .then(function (cart) { return _this.eventHub.publish('cartUpdated', { data: cart }); });
            };
            CartService.prototype.deleteLineItem = function (lineItemId, productId) {
                var _this = this;
                var data = {
                    LineItemId: lineItemId,
                    ProductId: productId
                };
                this.eventHub.publish('cartUpdating', { data: data });
                return this.cartRepository.deleteLineItem(lineItemId)
                    .then(function (cart) { return _this.setCartToCache(cart); })
                    .then(function (cart) { return _this.eventHub.publish('cartUpdated', { data: cart }); });
            };
            CartService.prototype.updateBillingMethodPostalCode = function (postalCode) {
                var _this = this;
                return this.cartRepository.updateBillingMethodPostalCode(postalCode)
                    .then(function (cart) { return _this.setCartToCache(cart); });
            };
            CartService.prototype.updateShippingMethodPostalCode = function (postalCode) {
                var _this = this;
                return this.cartRepository.updateShippingMethodPostalCode(postalCode)
                    .then(function (cart) { return _this.setCartToCache(cart); });
            };
            CartService.prototype.setCheapestShippingMethod = function () {
                var _this = this;
                return this.cartRepository.setCheapestShippingMethod()
                    .then(function (cart) { return _this.setCartToCache(cart); });
            };
            CartService.prototype.addCoupon = function (couponCode) {
                var _this = this;
                return this.cartRepository.addCoupon(couponCode)
                    .then(function (cart) { return _this.setCartToCache(cart); });
            };
            CartService.prototype.removeCoupon = function (couponCode) {
                var _this = this;
                return this.cartRepository.removeCoupon(couponCode)
                    .then(function (cart) { return _this.setCartToCache(cart); });
            };
            CartService.prototype.clean = function () {
                var _this = this;
                return this.cartRepository.clean()
                    .then(function (cart) { return _this.setCartToCache(cart); });
            };
            CartService.prototype.updateCart = function (param) {
                var _this = this;
                return this.cartRepository.updateCart(param)
                    .then(function (result) { return _this.setCartToCache(result.Cart).then(function () { return result; }); });
            };
            CartService.prototype.completeCheckout = function (currentStep) {
                var _this = this;
                return this.cartRepository.completeCheckout(currentStep)
                    .then(function (result) { return _this.setCartToCache(null).then(function () { return result; }); });
            };
            CartService.prototype.invalidateCache = function () {
                return this.cacheProvider.defaultCache.clear(this.cacheKey);
            };
            CartService.prototype.getCacheCart = function () {
                return this.cacheProvider.defaultCache.get(this.cacheKey);
            };
            CartService.prototype.setCartToCache = function (cart) {
                return this.cacheProvider.defaultCache.set(this.cacheKey, cart, this.cachePolicy);
            };
            return CartService;
        }());
        Composer.CartService = CartService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />

/// <reference path='../../Typings/tsd.d.ts' />
/// <reference path='./IError.ts' />

/// <reference path='../../Typings/tsd.d.ts' />
/// <reference path='./IError.ts' />

/// <reference path='../../Typings/tsd.d.ts' />
/// <reference path='./IErrorCollection.ts' />
/// <reference path='./IError.ts' />
/// <reference path='./IErrorHandler.ts' />
/// <reference path='../Mvc/Localization/LocalizationProvider.ts' />
/// <reference path='../Events/EventHub.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var ErrorHandler = (function () {
            function ErrorHandler() {
            }
            ErrorHandler.instance = function () {
                var instance = new ErrorHandler();
                var memoize = function () { return instance; };
                ErrorHandler.instance = memoize;
                return memoize();
            };
            /**
             * Will output the error to the user.
             * @param {IError} error Error to display.
             */
            ErrorHandler.prototype.outputError = function (error) {
                this.publishGenericErrorEvent(error);
            };
            /**
             * Will localize an error based on its code and will display it
             * to the user.
             * @param {string} errorCode Error code to localize.
             */
            ErrorHandler.prototype.outputErrorFromCode = function (errorCode) {
                var error = this.createErrorFromCode(errorCode);
                this.publishGenericErrorEvent(error);
            };
            ErrorHandler.prototype.createErrorFromCode = function (errorCode) {
                var localization = Composer.LocalizationProvider.instance().getLocalizedString('Errors', "L_" + errorCode);
                var error = {
                    ErrorCode: errorCode,
                    LocalizedErrorMessage: localization
                };
                return error;
            };
            /**
             * Removes all errors from the current page.
             */
            ErrorHandler.prototype.removeErrors = function () {
                this.publishGenericErrorEvent();
            };
            ErrorHandler.prototype.publishGenericErrorEvent = function (error) {
                var errorColl = this.createErrorCollection(error);
                Composer.EventHub.instance().publish('GeneralErrorOccured', {
                    data: errorColl
                });
            };
            ErrorHandler.prototype.createErrorCollection = function (error) {
                var errorCollection = {
                    Errors: []
                };
                if (error) {
                    errorCollection.Errors.push(error);
                }
                return errorCollection;
            };
            return ErrorHandler;
        }());
        Composer.ErrorHandler = ErrorHandler;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Repositories/CartRepository.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/ErrorHandling/ErrorHandler.ts' />
///<reference path='CartService.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var FullCartController = (function (_super) {
            __extends(FullCartController, _super);
            function FullCartController() {
                _super.apply(this, arguments);
                this.source = 'Checkout';
                this.loaded = false;
                this.cartService = new Composer.CartService(new Composer.CartRepository(), this.eventHub);
            }
            FullCartController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.registerSubscriptions();
                this.loadCart();
            };
            FullCartController.prototype.registerSubscriptions = function () {
                var _this = this;
                this.eventHub.subscribe('cartUpdated', function (e) { return _this.onCartUpdated(e.data); });
            };
            FullCartController.prototype.onCartUpdated = function (cart) {
                this.render('CartContent', cart);
                Composer.ErrorHandler.instance().removeErrors();
            };
            FullCartController.prototype.loadCart = function () {
                var _this = this;
                this.cartService.getFreshCart()
                    .then(function (cart) {
                    if (_this.loaded) {
                        return cart;
                    }
                    var e = {
                        data: {
                            Cart: cart,
                            StepNumber: _this.context.viewModel.CurrentStep
                        }
                    };
                    _this.eventHub.publish('checkoutStepRendered', e);
                    return cart;
                })
                    .done(function (cart) {
                    _this.eventHub.publish('cartUpdated', { data: cart });
                    _this.loaded = true;
                }, function (reason) { return _this.loadCartFailed(reason); });
            };
            FullCartController.prototype.loadCartFailed = function (reason) {
                console.error('Error while loading the cart.', reason);
                this.context.container.find('.js-loading').hide();
                Composer.ErrorHandler.instance().outputErrorFromCode('LoadCartFailed');
            };
            FullCartController.prototype.updateLineItem = function (actionContext) {
                var _this = this;
                if (!this.debounceUpdateLineItem) {
                    this.debounceUpdateLineItem =
                        _.debounce(function (args) {
                            return _this.executeLineItemUpdate(args);
                        }, 300);
                }
                var context = actionContext.elementContext;
                context.closest('.cart-row').addClass('is-loading');
                var lineItemId = context.data('lineitemid');
                var productId = context.attr('data-productid');
                var action = context.data('action');
                var quantity = parseInt(context.data('quantity'), 10);
                var tmpQuantity = context.data('tmp-qte') ? parseInt(context.data('tmp-qte'), 10) : null;
                var updatedQuantity = this.updateQuantity(action, tmpQuantity ? tmpQuantity : quantity);
                var recurringOrderFrequencyName = context.data('recurringorderfrequencyname');
                var recurringOrderProgramName = context.data('recurringorderprogramname');
                context.data('tmp-qte', updatedQuantity);
                var args = {
                    context: context,
                    lineItemId: lineItemId,
                    originalQuantity: quantity,
                    updatedQuantity: updatedQuantity,
                    productId: productId,
                    recurringOrderFrequencyName: recurringOrderFrequencyName,
                    recurringOrderProgramName: recurringOrderProgramName
                };
                if (quantity !== updatedQuantity) {
                    //use only debouced function when incrementing/decrementing quantity
                    this.debounceUpdateLineItem(args);
                }
                else {
                    this.executeLineItemUpdate(args);
                }
            };
            FullCartController.prototype.executeLineItemUpdate = function (args) {
                var _this = this;
                this.cartService.getCart().then(function (cart) {
                    var lineItem = _.find(cart.LineItemDetailViewModels, function (li) { return li.Id === args.lineItemId; });
                    if (_this.isUpdateRequired(args, lineItem)) {
                        var delta = args.updatedQuantity - lineItem.Quantity;
                        var positiveDelta = delta < 0 ? delta * -1 : delta;
                        var data = _this.getLineItemDataForAnalytics(lineItem, positiveDelta);
                        if (delta !== 0) {
                            var eventName = (delta > 0) ? 'lineItemAdding' : 'lineItemRemoving';
                            _this.eventHub.publish(eventName, { data: data });
                        }
                        args.context.removeData('tmp-qte');
                        args.context.data('quantity', args.updatedQuantity);
                        return _this.cartService.updateLineItem(args.lineItemId, args.updatedQuantity, args.productId, args.recurringOrderFrequencyName === '' ? null : args.recurringOrderFrequencyName, args.recurringOrderProgramName);
                    }
                    else {
                        _this.render('CartContent', cart);
                        return cart;
                    }
                }).fail(function (reason) { return _this.lineItemUpdateFailed(args.context, reason); });
            };
            FullCartController.prototype.isUpdateRequired = function (updateLineItemArgs, lineItem) {
                if (!lineItem) {
                    return false;
                }
                var shouldUpdateQuantity = updateLineItemArgs.updatedQuantity - lineItem.Quantity !== 0;
                var shouldUpdateRecurringFrequency = updateLineItemArgs.recurringOrderFrequencyName !== lineItem.RecurringOrderFrequencyName;
                var shouldUpdateRecurringProgram = updateLineItemArgs.recurringOrderProgramName !== lineItem.RecurringOrderProgramName;
                return shouldUpdateQuantity || shouldUpdateRecurringFrequency || shouldUpdateRecurringProgram;
            };
            FullCartController.prototype.lineItemUpdateFailed = function (context, reason) {
                console.error('Error while updating line item quantity.', reason);
                context.closest('.cart-row').removeClass('is-loading');
                Composer.ErrorHandler.instance().outputErrorFromCode('LineItemUpdateFailed');
            };
            FullCartController.prototype.getLineItemDataForAnalytics = function (lineItem, quantity) {
                var data = {
                    List: this.source,
                    DisplayName: lineItem.ProductSummary.DisplayName,
                    ProductId: lineItem.ProductId,
                    ListPrice: lineItem.ListPrice,
                    Brand: lineItem.ProductSummary.Brand,
                    CategoryId: lineItem.ProductSummary.CategoryId,
                    Variant: undefined,
                    Quantity: quantity
                };
                if (lineItem.VariantId && lineItem.KeyVariantAttributesList) {
                    data.Variant = this.buildVariantName(lineItem.KeyVariantAttributesList);
                }
                return data;
            };
            FullCartController.prototype.updateQuantity = function (action, quantity) {
                if (!action) {
                    return quantity;
                }
                switch (action.toUpperCase()) {
                    case 'INCREMENT':
                        quantity++;
                        break;
                    case 'DECREMENT':
                        quantity--;
                        if (quantity < 1) {
                            quantity = 1;
                        }
                        break;
                }
                return quantity;
            };
            FullCartController.prototype.deleteLineItem = function (actionContext) {
                var _this = this;
                var context = actionContext.elementContext;
                var lineItemId = context.data('lineitemid');
                var productId = context.attr('data-productid');
                context.closest('.cart-row').addClass('is-loading');
                this.cartService.getCart()
                    .then(function (cart) {
                    var lineItem = _.find(cart.LineItemDetailViewModels, function (li) { return li.Id === lineItemId; });
                    var data = _this.getLineItemDataForAnalytics(lineItem, lineItem.Quantity);
                    _this.eventHub.publish('lineItemRemoving', { data: data });
                    return _this.cartService.deleteLineItem(lineItemId, productId);
                }).fail(function (reason) { return _this.onLineItemDeleteFailed(context, reason); });
            };
            FullCartController.prototype.onLineItemDeleteFailed = function (context, reason) {
                console.error('Error while deleting line item.', reason);
                context.closest('.cart-row').removeClass('is-loading');
                Composer.ErrorHandler.instance().outputErrorFromCode('LineItemDeleteFailed');
            };
            FullCartController.prototype.buildVariantName = function (kvas) {
                var nameParts = [];
                for (var i = 0; i < kvas.length; i++) {
                    var value = kvas[i].OriginalValue;
                    nameParts.push(value);
                }
                return nameParts.join(' ');
            };
            return FullCartController;
        }(Orckestra.Composer.Controller));
        Composer.FullCartController = FullCartController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Mvc/ComposerClient.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var ShippingMethodService = (function () {
            function ShippingMethodService() {
            }
            /**
            * Return a Promise which returns the ShippingMethods available for the cart.
            */
            ShippingMethodService.prototype.getShippingMethods = function () {
                return Composer.ComposerClient.get('/api/cart/shippingmethods');
            };
            return ShippingMethodService;
        }());
        Composer.ShippingMethodService = ShippingMethodService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Mvc/ComposerClient.ts' />
///<reference path='./IRegionService.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var RegionService = (function () {
            function RegionService() {
            }
            RegionService.prototype.getRegions = function () {
                var _this = this;
                if (_.isUndefined(this._memoizeGetRegions)) {
                    this._memoizeGetRegions = _.memoize(function (arg) { return _this.getRegionsImpl(); });
                }
                return this._memoizeGetRegions();
            };
            RegionService.prototype.getRegionsImpl = function () {
                return Composer.ComposerClient.get('/api/address/regions');
            };
            return RegionService;
        }());
        Composer.RegionService = RegionService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.MyAccount.UI/Common/Source/Typescript/MembershipService.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/ErrorHandling/ErrorHandler.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Repositories/CartRepository.ts' />
///<reference path='../../../CheckoutShippingMethod/source/Typescript/ShippingMethodService.ts' />
///<reference path='../../../CartSummary/Source/Typescript/CartService.ts' />
///<reference path='./IBaseCheckoutController.ts' />
///<reference path='./RegionService.ts' />
///<reference path='./ICheckoutService.ts' />
///<reference path='./ICheckoutContext.ts' />
///<reference path='./IRegisterOptions.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var CheckoutService = (function () {
            function CheckoutService() {
                this.orderConfirmationCacheKey = 'orderConfirmationCacheKey';
                this.orderCacheKey = 'orderCacheKey';
                this.registeredControllers = {};
                if (CheckoutService.instance) {
                    throw new Error('Instantiation failed: Use CheckoutService.instance() instead of new.');
                }
                this.eventHub = Composer.EventHub.instance();
                this.window = window;
                this.allControllersReady = Q.defer();
                this.cacheProvider = Composer.CacheProvider.instance();
                this.cartService = new Composer.CartService(new Composer.CartRepository(), this.eventHub);
                this.membershipService = new Composer.MembershipService(new Composer.MembershipRepository());
                this.regionService = new Composer.RegionService();
                this.shippingMethodService = new Composer.ShippingMethodService();
                this.registerAllControllersInitialized();
                CheckoutService.instance = this;
            }
            CheckoutService.getInstance = function () {
                if (!CheckoutService.instance) {
                    CheckoutService.instance = new CheckoutService();
                }
                ;
                return CheckoutService.instance;
            };
            CheckoutService.prototype.registerAllControllersInitialized = function () {
                var _this = this;
                this.eventHub.subscribe('allControllersInitialized', function () {
                    _this.initialize();
                });
            };
            CheckoutService.prototype.initialize = function () {
                var _this = this;
                var authenticatedPromise = this.membershipService.isAuthenticated();
                var getCartPromise = this.getCart();
                var regionsPromise = this.regionService.getRegions();
                var shippingMethodsPromise = this.shippingMethodService.getShippingMethods();
                Q.all([authenticatedPromise, getCartPromise, regionsPromise, shippingMethodsPromise])
                    .spread(function (authVm, cartVm, regionsVm, shippingMethodsVm) {
                    var results = {
                        authenticationViewModel: authVm,
                        cartViewModel: cartVm,
                        regionsViewModel: regionsVm,
                        shippingMethodsViewModel: shippingMethodsVm
                    };
                    return _this.renderControllers(results);
                })
                    .then(function () {
                    _this.allControllersReady.resolve(true);
                })
                    .fail(function (reason) {
                    console.error('Error while initializing CheckoutService.', reason);
                    Composer.ErrorHandler.instance().outputErrorFromCode('CheckoutRenderFailed');
                });
            };
            CheckoutService.prototype.registerController = function (controller) {
                var _this = this;
                if (this.allControllersReady.promise.isPending()) {
                    this.allControllersReady.resolve(false);
                }
                this.allControllersReady.promise
                    .then(function (allControllersReady) {
                    if (allControllersReady) {
                        throw new Error('Too late to register all controllers are ready.');
                    }
                    else {
                        var controllerName = controller.viewModelName;
                        _this.registeredControllers[controllerName] = controller;
                    }
                });
            };
            CheckoutService.prototype.unregisterController = function (controllerName) {
                delete this.registeredControllers[controllerName];
            };
            CheckoutService.prototype.renderControllers = function (checkoutContext) {
                var controllerInstance, renderDataPromises = [];
                for (var controllerName in this.registeredControllers) {
                    if (this.registeredControllers.hasOwnProperty(controllerName)) {
                        controllerInstance = this.registeredControllers[controllerName];
                        renderDataPromises.push(controllerInstance.renderData(checkoutContext));
                    }
                }
                return Q.all(renderDataPromises);
            };
            CheckoutService.prototype.updatePostalCode = function (postalCode) {
                return this.cartService.updateBillingMethodPostalCode(postalCode);
            };
            CheckoutService.prototype.invalidateCache = function () {
                return this.cartService.invalidateCache();
            };
            CheckoutService.prototype.getCart = function () {
                var _this = this;
                if (!_.isNumber(CheckoutService.checkoutStep)) {
                    throw new Error('CheckoutService.checkoutStep has not been set or is not a number.');
                }
                return this.invalidateCache()
                    .then(function () { return _this.cartService.getCart(); })
                    .then(function (cart) {
                    return _this.handleCheckoutSecurity(cart, CheckoutService.checkoutStep);
                })
                    .fail(function (reason) {
                    _this.handleError(reason);
                });
            };
            CheckoutService.prototype.updateCart = function () {
                var _this = this;
                this.allControllersReady.promise
                    .then(function (allControllersReady) {
                    if (!allControllersReady) {
                        throw new Error('All registered controllers are not ready.');
                    }
                });
                if (!_.isNumber(CheckoutService.checkoutStep)) {
                    throw new Error('CheckoutService.checkoutStep has not been set or is not a number.');
                }
                var emptyVm = {
                    CurrentStep: CheckoutService.checkoutStep,
                    UpdatedCart: {}
                };
                return this.buildCartUpdateViewModel(emptyVm)
                    .then(function (vm) { return _this.cartService.updateCart(vm); });
            };
            CheckoutService.prototype.completeCheckout = function () {
                var _this = this;
                if (!_.isNumber(CheckoutService.checkoutStep)) {
                    throw new Error('CheckoutService.checkoutStep has not been set or is not a number.');
                }
                var emptyVm = {
                    CurrentStep: CheckoutService.checkoutStep,
                    UpdatedCart: {}
                };
                return this.buildCartUpdateViewModel(emptyVm)
                    .then(function (vm) {
                    if (_.isEmpty(vm.UpdatedCart)) {
                        console.log('No modification required to the cart.');
                        return vm;
                    }
                    return _this.cartService.updateCart(vm);
                })
                    .then(function (result) {
                    if (result && result.HasErrors) {
                        throw new Error('Error while updating the cart. Complete Checkout will not complete.');
                    }
                    console.log('Publishing the cart!');
                    return _this.cartService.completeCheckout(CheckoutService.checkoutStep);
                });
            };
            CheckoutService.prototype.buildCartUpdateViewModel = function (vm) {
                var _this = this;
                var validationPromise;
                var viewModelUpdatePromise;
                validationPromise = Q(vm).then(function (vm) {
                    return _this.getCartValidation(vm);
                });
                viewModelUpdatePromise = validationPromise.then(function (vm) {
                    return _this.getCartUpdateViewModel(vm);
                });
                return viewModelUpdatePromise;
            };
            CheckoutService.prototype.getCartValidation = function (vm) {
                var validationPromise = this.collectValidationPromises();
                var promise = validationPromise.then(function (results) {
                    console.log('Aggregrating all validation results');
                    var hasFailedValidation = _.any(results, function (r) { return !r; });
                    if (hasFailedValidation) {
                        throw new Error('There were validation errors.');
                    }
                    return vm;
                });
                return promise;
            };
            CheckoutService.prototype.getCartUpdateViewModel = function (vm) {
                var updateModelPromise = this.collectUpdateModelPromises();
                var promise = updateModelPromise.then(function (updates) {
                    console.log('Aggregating all ViewModel updates.');
                    _.each(updates, function (update) {
                        if (update) {
                            var keys = _.keys(update);
                            _.each(keys, function (key) {
                                vm.UpdatedCart[key] = update[key];
                            });
                        }
                    });
                    return vm;
                });
                return promise;
            };
            CheckoutService.prototype.collectValidationPromises = function () {
                var promises = [];
                var controllerInstance;
                var controllerOptions;
                for (var controllerName in this.registeredControllers) {
                    if (this.registeredControllers.hasOwnProperty(controllerName)) {
                        controllerInstance = this.registeredControllers[controllerName];
                        promises.push(controllerInstance.getValidationPromise());
                    }
                }
                return Q.all(promises);
            };
            CheckoutService.prototype.collectUpdateModelPromises = function () {
                var promises = [];
                var controllerInstance;
                var controllerOptions;
                for (var controllerName in this.registeredControllers) {
                    if (this.registeredControllers.hasOwnProperty(controllerName)) {
                        controllerInstance = this.registeredControllers[controllerName];
                        promises.push(controllerInstance.getUpdateModelPromise());
                    }
                }
                return Q.all(promises);
            };
            CheckoutService.prototype.handleCheckoutSecurity = function (cart, targetedStep) {
                var lastStep = cart.OrderSummary.CheckoutRedirectAction.LastCheckoutStep;
                var redirectUrl = cart.OrderSummary.CheckoutRedirectAction.RedirectUrl;
                if (targetedStep > lastStep) {
                    this.window.location.href = redirectUrl;
                }
                return cart;
            };
            CheckoutService.prototype.handleError = function (reason) {
                console.error('Unable to retrieve the cart for the checkout', reason);
                throw reason;
            };
            CheckoutService.prototype.setOrderConfirmationToCache = function (orderConfirmationviewModel) {
                this.cacheProvider.defaultCache.set(this.orderConfirmationCacheKey, orderConfirmationviewModel).done();
            };
            CheckoutService.prototype.getOrderConfirmationFromCache = function () {
                return this.cacheProvider.defaultCache.get(this.orderConfirmationCacheKey);
            };
            CheckoutService.prototype.clearOrderConfirmationFromCache = function () {
                this.cacheProvider.defaultCache.clear(this.orderConfirmationCacheKey).done();
            };
            CheckoutService.prototype.setOrderToCache = function (orderConfirmationviewModel) {
                this.cacheProvider.defaultCache.set(this.orderCacheKey, orderConfirmationviewModel).done();
            };
            return CheckoutService;
        }());
        Composer.CheckoutService = CheckoutService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/JQueryPlugins/ISerializeObjectJqueryPlugin.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/ErrorHandling/ErrorHandler.ts' />
///<reference path='CheckoutService.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var BaseCheckoutController = (function (_super) {
            __extends(BaseCheckoutController, _super);
            function BaseCheckoutController() {
                _super.apply(this, arguments);
                this.debounceTimeout = 300;
            }
            BaseCheckoutController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.checkoutService = Composer.CheckoutService.getInstance();
                this.registerController();
            };
            BaseCheckoutController.prototype.registerController = function () {
                this.checkoutService.registerController(this);
            };
            BaseCheckoutController.prototype.unregisterController = function () {
                this.checkoutService.unregisterController(this.viewModelName);
            };
            BaseCheckoutController.prototype.renderData = function (checkoutContext) {
                throw new Error('Method not implemented');
            };
            BaseCheckoutController.prototype.getValidationPromise = function () {
                var _this = this;
                return Q.fcall(function () { return _this.isValidForUpdate(); });
            };
            BaseCheckoutController.prototype.getUpdateModelPromise = function () {
                var _this = this;
                return Q.fcall(function () {
                    var vm = {};
                    vm[_this.viewModelName] = _this.getViewModelUpdated();
                    return vm;
                });
            };
            BaseCheckoutController.prototype.registerSubscriptions = function () {
                var _this = this;
                this.eventHub.subscribe(this.viewModelName + "Rendered", function () {
                    _this.formInstances = _this.registerFormsForValidation($('form', _this.context.container));
                });
            };
            BaseCheckoutController.prototype.getViewModelUpdated = function () {
                var formContext = $('form', this.context.container), viewModel = formContext.serializeObject();
                return JSON.stringify(viewModel);
            };
            BaseCheckoutController.prototype.isValidForUpdate = function () {
                var isValidForUpdate = _.all(this.formInstances, function (formInstance) { return formInstance.validate(undefined, true); });
                return isValidForUpdate;
            };
            BaseCheckoutController.prototype.onRenderDataFailed = function (reason) {
                this.removeLoading();
                console.error("Failed rendering the control in charge of '" + this.viewModelName + "'.", reason);
                Composer.ErrorHandler.instance().outputErrorFromCode('CheckoutRenderFailed');
            };
            BaseCheckoutController.prototype.removeLoading = function () {
                this.context.container.find('.js-loading').hide();
            };
            return BaseCheckoutController;
        }(Orckestra.Composer.Controller));
        Composer.BaseCheckoutController = BaseCheckoutController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../CheckoutCommon/source/Typescript/BaseCheckoutController.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var BillingAddressCheckoutController = (function (_super) {
            __extends(BillingAddressCheckoutController, _super);
            function BillingAddressCheckoutController() {
                _super.apply(this, arguments);
            }
            BillingAddressCheckoutController.prototype.initialize = function () {
                this.viewModelName = 'BillingAddress';
                _super.prototype.initialize.call(this);
            };
            BillingAddressCheckoutController.prototype.changeUseShippingAddress = function () {
                this.setBillingAddressFormVisibility();
                this.setBillingAddressFormValidation();
            };
            BillingAddressCheckoutController.prototype.renderData = function (checkoutContext) {
                var _this = this;
                return Q.fcall(function () {
                    if (checkoutContext.authenticationViewModel.IsAuthenticated) {
                        _this.renderAuthenticated(checkoutContext);
                    }
                    else {
                        _this.renderUnauthenticated(checkoutContext);
                    }
                    ;
                });
            };
            BillingAddressCheckoutController.prototype.renderAuthenticated = function (checkoutContext) {
                this.unregisterController();
                this.render(this.viewModelName, checkoutContext.authenticationViewModel);
            };
            BillingAddressCheckoutController.prototype.renderUnauthenticated = function (checkoutContext) {
                this.registerSubscriptions();
                this.render(this.viewModelName, checkoutContext.cartViewModel);
                this.render('AddressRegionPicker', {
                    Regions: checkoutContext.regionsViewModel,
                    SelectedRegion: this.getRegionCode(checkoutContext.cartViewModel)
                });
                this.eventHub.publish(this.viewModelName + "Rendered", checkoutContext.cartViewModel);
            };
            BillingAddressCheckoutController.prototype.registerSubscriptions = function () {
                var _this = this;
                this.eventHub.subscribe(this.viewModelName + "Rendered", function () { return _this.onRendered(); });
            };
            BillingAddressCheckoutController.prototype.renderDataFailed = function (reason) {
                console.error('Failed to render Billing Address control', reason);
                this.context.container.find('.js-loading').hide();
                //TODO: Error handling
            };
            BillingAddressCheckoutController.prototype.getRegionCode = function (cart) {
                if (cart.Payment === undefined ||
                    cart.Payment.BillingAddress === undefined ||
                    cart.Payment.BillingAddress.RegionCode === undefined ||
                    cart.Payment.BillingAddress.UseShippingAddress) {
                    return '';
                }
                return cart.Payment.BillingAddress.RegionCode;
            };
            BillingAddressCheckoutController.prototype.onRendered = function () {
                var _this = this;
                var useShippingAddress = this.useShippingAddress();
                this.eventHub.subscribe('postalCodeChanged', function (e) { return _this.onPostalCodeChanged(useShippingAddress, e.data); });
                this.formInstances = this.registerFormsForValidation(this.getVisibleForms());
            };
            BillingAddressCheckoutController.prototype.useShippingAddress = function () {
                return $(this.context.container).find('input[name=UseShippingAddress]:checked').val() === 'true';
            };
            BillingAddressCheckoutController.prototype.onPostalCodeChanged = function (useShippingAddress, cart) {
                if (!useShippingAddress) {
                    return;
                }
                var postalCode = cart.ShippingAddress.PostalCode;
                this.checkoutService.updatePostalCode(postalCode).done();
            };
            BillingAddressCheckoutController.prototype.getVisibleForms = function () {
                var visibleForms = $('form', this.context.container).not('form:has(.hide)');
                return visibleForms;
            };
            BillingAddressCheckoutController.prototype.setBillingAddressFormVisibility = function () {
                var useShippingAddress = this.useShippingAddress();
                if (useShippingAddress) {
                    $('#BillingAddressContent').addClass('hide');
                }
                else {
                    $('#BillingAddressContent').removeClass('hide');
                }
            };
            BillingAddressCheckoutController.prototype.setBillingAddressFormValidation = function () {
                var useShippingAddress = this.useShippingAddress();
                var isValidationEnabled = this.isBillingAddressFormValidationEnabled();
                if (useShippingAddress) {
                    if (isValidationEnabled) {
                        this.disableBillingAddressFormValidation();
                    }
                }
                else {
                    if (!isValidationEnabled) {
                        this.enableBillingAddressFormValidation();
                    }
                }
            };
            BillingAddressCheckoutController.prototype.isBillingAddressFormValidationEnabled = function () {
                var _this = this;
                return _.some(this.formInstances, function (formInstance) {
                    return _this.isBillingAddressFormInstance(formInstance);
                });
            };
            BillingAddressCheckoutController.prototype.disableBillingAddressFormValidation = function () {
                var _this = this;
                var formInstance = _.find(this.formInstances, function (formInstance) {
                    return _this.isBillingAddressFormInstance(formInstance);
                });
                formInstance.destroy();
                _.remove(this.formInstances, function (formInstance) {
                    return _this.isBillingAddressFormInstance(formInstance);
                });
            };
            BillingAddressCheckoutController.prototype.isBillingAddressFormInstance = function (formInstance) {
                return formInstance.$element.is('form#BillingAddress');
            };
            BillingAddressCheckoutController.prototype.enableBillingAddressFormValidation = function () {
                this.formInstances = this.formInstances.concat(this.registerFormsForValidation($('form#BillingAddress')));
            };
            return BillingAddressCheckoutController;
        }(Orckestra.Composer.BaseCheckoutController));
        Composer.BillingAddressCheckoutController = BillingAddressCheckoutController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Mvc/ComposerClient.ts' />
///<reference path='./ICustomerRepository.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var CustomerRepository = (function () {
            function CustomerRepository() {
            }
            /**
            * Attempt to register using Composer API.
            * @param
            */
            CustomerRepository.prototype.updateAccount = function (formData, returnUrl) {
                var data = _.extend({ ReturnUrl: returnUrl }, formData);
                return Composer.ComposerClient.post('/api/customer/update', data);
            };
            /**
            * Get the customer addresses.
            */
            CustomerRepository.prototype.getAddresses = function () {
                return Composer.ComposerClient.get('/api/customer/addresses');
            };
            /**
            * Create a new customer address
            * @param
            */
            CustomerRepository.prototype.createAddress = function (formData, returnUrl) {
                var data = _.extend({ ReturnUrl: returnUrl }, formData);
                return Composer.ComposerClient.post('/api/customer/addresses', data);
            };
            /**
            * Update a customer address
            * @param
            */
            CustomerRepository.prototype.updateAddress = function (formData, addressId, returnUrl) {
                var data = _.extend({ ReturnUrl: returnUrl }, formData);
                return Composer.ComposerClient.post('/api/customer/addresses/' + addressId, data);
            };
            /**
            * Delete a customer address
            * @param
            */
            CustomerRepository.prototype.deleteAddress = function (addressId, returnUrl) {
                var data = { ReturnUrl: returnUrl };
                return Composer.ComposerClient.remove('/api/customer/addresses/' + addressId, data);
            };
            /**
            * Set default address for a customer
            * @param
            */
            CustomerRepository.prototype.setDefaultAddress = function (addressId, returnUrl) {
                var data = { ReturnUrl: returnUrl };
                return Composer.ComposerClient.post('/api/customer/setdefaultaddress/' + addressId, data);
            };
            return CustomerRepository;
        }());
        Composer.CustomerRepository = CustomerRepository;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Repositories/CustomerRepository.ts' />
///<reference path='ICustomerService.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var CustomerService = (function () {
            function CustomerService(customerRepository) {
                if (!customerRepository) {
                    throw new Error('Error: customerRepository is required');
                }
                this.customerRepository = customerRepository;
            }
            /**
            * Attempt to register using Composer API.
            * @param
            */
            CustomerService.prototype.updateAccount = function (formData, returnUrl) {
                return this.customerRepository.updateAccount(formData, returnUrl);
            };
            /**
            * Get the customer addresses.
            */
            CustomerService.prototype.getAddresses = function () {
                var _this = this;
                if (_.isUndefined(this.memoizeGetAdresses)) {
                    this.memoizeGetAdresses = _.memoize(function (arg) { return _this.getAddressesImpl(); });
                }
                return this.memoizeGetAdresses();
            };
            CustomerService.prototype.getAddressesImpl = function () {
                return this.customerRepository.getAddresses();
            };
            /**
            * Create a new customer address
            * @param
            */
            CustomerService.prototype.createAddress = function (formData, returnUrl) {
                return this.customerRepository.createAddress(formData, returnUrl);
            };
            /**
            * Update a customer address
            * @param
            */
            CustomerService.prototype.updateAddress = function (formData, addressId, returnUrl) {
                return this.customerRepository.updateAddress(formData, addressId, returnUrl);
            };
            /**
            * Delete a customer address
            * @param
            */
            CustomerService.prototype.deleteAddress = function (addressId, returnUrl) {
                return this.customerRepository.deleteAddress(addressId, returnUrl);
            };
            /**
            * Set default address for a customer
            * @param
            */
            CustomerService.prototype.setDefaultAddress = function (addressId, returnUrl) {
                return this.customerRepository.setDefaultAddress(addressId, returnUrl);
            };
            return CustomerService;
        }());
        Composer.CustomerService = CustomerService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/jqueryPlugins/ISerializeObjectJqueryPlugin.ts' />
///<reference path='../../../Common/Source/Typescript/MembershipService.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        (function (MyAccountStatus) {
            MyAccountStatus[MyAccountStatus["Success"] = 0] = "Success";
            MyAccountStatus[MyAccountStatus["InvalidTicket"] = 1] = "InvalidTicket";
            MyAccountStatus[MyAccountStatus["DuplicateEmail"] = 2] = "DuplicateEmail";
            MyAccountStatus[MyAccountStatus["DuplicateUserName"] = 3] = "DuplicateUserName";
            MyAccountStatus[MyAccountStatus["InvalidQuestion"] = 4] = "InvalidQuestion";
            MyAccountStatus[MyAccountStatus["InvalidPassword"] = 5] = "InvalidPassword";
            MyAccountStatus[MyAccountStatus["InvalidPasswordAnswer"] = 6] = "InvalidPasswordAnswer";
            MyAccountStatus[MyAccountStatus["InvalidEmail"] = 7] = "InvalidEmail";
            MyAccountStatus[MyAccountStatus["Failed"] = 8] = "Failed";
            MyAccountStatus[MyAccountStatus["UserRejected"] = 9] = "UserRejected";
            MyAccountStatus[MyAccountStatus["RequiresApproval"] = 10] = "RequiresApproval";
            MyAccountStatus[MyAccountStatus["AjaxFailed"] = 11] = "AjaxFailed";
        })(Composer.MyAccountStatus || (Composer.MyAccountStatus = {}));
        var MyAccountStatus = Composer.MyAccountStatus;
        ;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));



///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Mvc/ComposerClient.ts' />
///<reference path='../../../../Composer.MyAccount.UI/Common/Source/Typescript/CustomerService.ts' />
///<reference path='../../../CheckoutCommon/Source/Typescript/AddressDto.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var BillingAddressRegisteredCheckoutService = (function () {
            function BillingAddressRegisteredCheckoutService(customerService) {
                this.customerService = customerService;
            }
            /**
            * Get the customer addresses. The selected billing address is taken from the cart by default.
            * If no address has been set in the cart, the selected billing address corresponds to the preferred address.
            */
            BillingAddressRegisteredCheckoutService.prototype.getBillingAddresses = function (cart) {
                var _this = this;
                if (!cart) {
                    throw new Error('The cart is required');
                }
                return this.customerService.getAddresses()
                    .then(function (addresses) {
                    addresses.AddressesLoaded = true;
                    addresses.SelectedBillingAddressId = _this.getSelectedBillingAddressId(cart, addresses);
                    return addresses;
                });
            };
            BillingAddressRegisteredCheckoutService.prototype.getSelectedBillingAddressId = function (cart, addressList) {
                if (this.isBillingAddressFromCartValid(cart, addressList)) {
                    return cart.Payment.BillingAddress.AddressBookId;
                }
                return this.getPreferredBillingAddressId(addressList);
            };
            BillingAddressRegisteredCheckoutService.prototype.isBillingAddressFromCartValid = function (cart, addressList) {
                if (cart.Payment === undefined) {
                    return false;
                }
                if (cart.Payment.BillingAddress === undefined) {
                    return false;
                }
                return _.any(addressList.Addresses, function (address) { return address.Id === cart.Payment.BillingAddress.AddressBookId; });
            };
            BillingAddressRegisteredCheckoutService.prototype.getPreferredBillingAddressId = function (addressList) {
                var preferredBillingAddress = _.find(addressList.Addresses, function (address) { return address.IsPreferredBilling; });
                return preferredBillingAddress === undefined ? undefined : preferredBillingAddress.Id;
            };
            return BillingAddressRegisteredCheckoutService;
        }());
        Composer.BillingAddressRegisteredCheckoutService = BillingAddressRegisteredCheckoutService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../Typings/tsd.d.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var UIModal = (function () {
            function UIModal(window, modalContextSelector, confirmAction, sender) {
                var _this = this;
                this.openModal = function (event) {
                    _this.modalContext = $(_this.modalContextSelector);
                    _this.confirmDeferred = Q.defer();
                    _this.modalContext.on('shown.bs.modal', function (event) {
                        $('[data-dismiss]', event.target).focus();
                    });
                    _this.modalContext.on('hide.bs.modal', function (event) {
                        $(event.target).off('shown.bs.modal hide.bs.modal');
                        if (_this.confirmDeferred.promise.isPending()) {
                            _this.confirmDeferred.resolve(false);
                        }
                    });
                    _this.modalContext.modal('show');
                    _this.confirmDeferred.promise
                        .then(function (value) {
                        _this.modalContext.modal('hide');
                        if (value) {
                            return _this.confirmAction.call(_this.sender, event);
                        }
                    })
                        .done(null, function (error) {
                        console.log(error);
                    });
                };
                this.confirmAction = confirmAction;
                this.modalContextSelector = modalContextSelector;
                this.window = window;
                this.sender = sender;
                this.registerDomEvents();
            }
            UIModal.prototype.registerDomEvents = function () {
                $(this.window.document).on('click', '.modal--confirm', this.confirmModal.bind(this));
                $(this.window.document).on('click', '.modal--cancel', this.cancelModal.bind(this));
            };
            UIModal.prototype.unregisterDomEvents = function () {
                $(this.window.document).off('click', '.modal--confirm', this.confirmModal);
                $(this.window.document).off('click', '.modal--cancel', this.cancelModal);
            };
            UIModal.prototype.confirmModal = function () {
                this.confirmDeferred.resolve(true);
            };
            UIModal.prototype.cancelModal = function () {
                this.confirmDeferred.resolve(false);
            };
            UIModal.prototype.dispose = function () {
                this.unregisterDomEvents();
            };
            return UIModal;
        }());
        Composer.UIModal = UIModal;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.MyAccount.UI/Common/Source/Typescript/CustomerService.ts' />
///<reference path='../../../../Composer.MyAccount.UI/Common/Source/Typescript/MyAccountEvents.ts' />
///<reference path='../../../../Composer.MyAccount.UI/Common/Source/Typescript/MyAccountStatus.ts' />
///<reference path='../../../CheckoutCommon/source/Typescript/BaseCheckoutController.ts' />
///<reference path='./BillingAddressRegisteredCheckoutService.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/UI/UIModal.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var BillingAddressRegisteredCheckoutController = (function (_super) {
            __extends(BillingAddressRegisteredCheckoutController, _super);
            function BillingAddressRegisteredCheckoutController() {
                _super.apply(this, arguments);
                this.debounceChangeBillingMethod = _.debounce(this.changeBillingAddressImpl, 500, { 'leading': true });
                this.modalElementSelector = '#confirmationModal';
                this.customerService = new Composer.CustomerService(new Composer.CustomerRepository());
                this.billingAddressRegisteredCheckoutService = new Composer.BillingAddressRegisteredCheckoutService(this.customerService);
            }
            BillingAddressRegisteredCheckoutController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.viewModelName = 'BillingAddressRegistered';
                this.uiModal = new Composer.UIModal(window, this.modalElementSelector, this.deleteAddress, this);
            };
            BillingAddressRegisteredCheckoutController.prototype.registerSubscriptions = function () {
                var _this = this;
                this.eventHub.subscribe(this.viewModelName + "Rendered", function (e) { return _this.onRendered(e); });
                this.eventHub.subscribe(Composer.MyAccountEvents[Composer.MyAccountEvents.AddressDeleted], function (e) { return _this.onAddressDeleted(e); });
            };
            BillingAddressRegisteredCheckoutController.prototype.renderData = function (checkoutContext) {
                if (checkoutContext.authenticationViewModel.IsAuthenticated) {
                    return this.renderAuthenticated(checkoutContext);
                }
                else {
                    this.renderUnauthenticated(checkoutContext);
                }
            };
            BillingAddressRegisteredCheckoutController.prototype.renderUnauthenticated = function (checkoutContext) {
                this.unregisterController();
                this.render(this.viewModelName, checkoutContext.authenticationViewModel);
            };
            BillingAddressRegisteredCheckoutController.prototype.renderAuthenticated = function (checkoutContext) {
                var _this = this;
                this.registerSubscriptions();
                this.render(this.viewModelName, { IsAuthenticated: true });
                return this.billingAddressRegisteredCheckoutService.getBillingAddresses(checkoutContext.cartViewModel)
                    .then(function (billingAdressesVm) {
                    _this.render(_this.viewModelName, checkoutContext.cartViewModel);
                    _this.render('BillingRegisteredAddresses', billingAdressesVm);
                })
                    .fail(function (reason) { return _this.handleError(reason); })
                    .fin(function () { return _this.eventHub.publish(_this.viewModelName + "Rendered", checkoutContext.cartViewModel); });
            };
            BillingAddressRegisteredCheckoutController.prototype.onRendered = function (e) {
                var _this = this;
                this.formInstances = this.registerFormsForValidation($('#RegisteredBillingAddress', this.context.container));
                var selectedBillingAddressId = $(this.context.container).find('input[name=BillingAddressId]:checked').val();
                if (!selectedBillingAddressId) {
                    return;
                }
                this.checkoutService.getCart()
                    .then(function (cart) {
                    if (selectedBillingAddressId !== cart.Payment.BillingAddress.AddressBookId) {
                        _this.debounceChangeBillingMethod();
                    }
                })
                    .fail(function (reason) { return _this.handleError(reason); });
            };
            BillingAddressRegisteredCheckoutController.prototype.setSelectedBillingAddress = function () {
                var _this = this;
                var selectedBillingAddressId = $(this.context.container).find('input[name=BillingAddressId]:checked').val();
                if (!selectedBillingAddressId) {
                    return;
                }
                this.checkoutService.getCart()
                    .done(function (cart) {
                    if (selectedBillingAddressId !== cart.Payment.BillingAddress.AddressBookId) {
                        _this.debounceChangeBillingMethod();
                    }
                });
            };
            BillingAddressRegisteredCheckoutController.prototype.changeBillingAddress = function (actionContext) {
                this.debounceChangeBillingMethod();
            };
            BillingAddressRegisteredCheckoutController.prototype.changeBillingAddressImpl = function () {
                var _this = this;
                this.checkoutService.updateCart()
                    .done(function (result) {
                    if (result.HasErrors) {
                        throw new Error('The updated cart contains errors');
                    }
                }, function (reason) { return _this.handleError(reason); });
            };
            /**
             * Requires the element in action context to have a data-address-id.
             */
            BillingAddressRegisteredCheckoutController.prototype.deleteAddress = function (event) {
                var _this = this;
                var element = $(event.target);
                var $addressListItem = element.closest('[data-address-id]');
                var addressId = $addressListItem.data('address-id');
                var busy = this.asyncBusy({ elementContext: element, containerContext: $addressListItem });
                return this.customerService.deleteAddress(addressId, '')
                    .then(function (result) {
                    _this.eventHub.publish(Composer.MyAccountEvents[Composer.MyAccountEvents.AddressDeleted], { data: addressId });
                })
                    .fail(function () { return _this.renderFailedForm(Composer.MyAccountStatus[Composer.MyAccountStatus.AjaxFailed]); })
                    .fin(function () { return busy.done(); });
            };
            BillingAddressRegisteredCheckoutController.prototype.deleteAddressConfirm = function (actionContext) {
                this.uiModal.openModal(actionContext.event);
            };
            BillingAddressRegisteredCheckoutController.prototype.onAddressDeleted = function (e) {
                var addressId = e.data;
                var $addressListItem = $(this.context.container).find('[data-address-id=' + addressId + ']');
                $addressListItem.remove();
            };
            BillingAddressRegisteredCheckoutController.prototype.useShippingAddress = function () {
                var useShippingAddress = $(this.context.container).find('input[name=UseShippingAddress]:checked').val() === 'true';
                return useShippingAddress;
            };
            BillingAddressRegisteredCheckoutController.prototype.getVisibleForms = function () {
                var visibleForms = $('form', this.context.container).not('form:has(.hide)');
                return visibleForms;
            };
            BillingAddressRegisteredCheckoutController.prototype.changeUseShippingAddress = function () {
                this.setBillingAddressFormVisibility();
                this.setBillingAddressFormValidation();
                this.setSelectedBillingAddress();
            };
            BillingAddressRegisteredCheckoutController.prototype.setBillingAddressFormVisibility = function () {
                var useShippingAddress = this.useShippingAddress();
                if (useShippingAddress) {
                    $('#BillingAddressContent').addClass('hide');
                }
                else {
                    $('#BillingAddressContent').removeClass('hide');
                }
            };
            BillingAddressRegisteredCheckoutController.prototype.setBillingAddressFormValidation = function () {
                var useShippingAddress = this.useShippingAddress();
                var isValidationEnabled = this.isBillingAddressFormValidationEnabled();
                if (useShippingAddress) {
                    if (isValidationEnabled) {
                        this.disableBillingAddressFormValidation();
                    }
                }
                else {
                    if (!isValidationEnabled) {
                        this.enableBillingAddressFormValidation();
                    }
                }
            };
            BillingAddressRegisteredCheckoutController.prototype.isBillingAddressFormValidationEnabled = function () {
                var _this = this;
                return _.some(this.formInstances, function (formInstance) {
                    return _this.isBillingAddressFormInstance(formInstance);
                });
            };
            BillingAddressRegisteredCheckoutController.prototype.disableBillingAddressFormValidation = function () {
                var _this = this;
                var formInstance = _.find(this.formInstances, function (formInstance) {
                    return _this.isBillingAddressFormInstance(formInstance);
                });
                formInstance.destroy();
                _.remove(this.formInstances, function (formInstance) {
                    return _this.isBillingAddressFormInstance(formInstance);
                });
            };
            BillingAddressRegisteredCheckoutController.prototype.isBillingAddressFormInstance = function (formInstance) {
                var isBillingAddressFormInstance = formInstance.$element.is('form#BillingAddressRegistered');
                return isBillingAddressFormInstance;
            };
            BillingAddressRegisteredCheckoutController.prototype.enableBillingAddressFormValidation = function () {
                this.formInstances = this.formInstances.concat(this.registerFormsForValidation($('form#BillingAddressRegistered')));
            };
            BillingAddressRegisteredCheckoutController.prototype.renderFailedForm = function (status) {
                //TODO
            };
            BillingAddressRegisteredCheckoutController.prototype.handleError = function (reason) {
                this.eventHub.publish('cartUpdatingFailed', null);
                console.error('The user changed the billing address, but an error occured when updating the preferred billing address', reason);
            };
            return BillingAddressRegisteredCheckoutController;
        }(Orckestra.Composer.BaseCheckoutController));
        Composer.BillingAddressRegisteredCheckoutController = BillingAddressRegisteredCheckoutController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../CheckoutCommon/source/Typescript/BaseCheckoutController.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var CheckoutNavigationController = (function (_super) {
            __extends(CheckoutNavigationController, _super);
            function CheckoutNavigationController() {
                _super.apply(this, arguments);
                this.currentStep = null;
            }
            CheckoutNavigationController.prototype.initialize = function () {
                this.viewModelName = 'checkoutNavigation';
                _super.prototype.initialize.call(this);
                this.checkoutService = Composer.CheckoutService.getInstance();
                this.currentStep = _.findWhere(this.context.viewModel.Steps, { IsActive: true });
                this.renderData();
            };
            CheckoutNavigationController.prototype.renderData = function () {
                var _this = this;
                return Q.fcall(function () {
                    _this.eventHub.publish('checkoutStepRendered', {
                        data: {
                            StepNumber: _this.currentStep.StepNumber,
                            Cart: _this.checkoutService.getCart()
                        }
                    });
                });
            };
            return CheckoutNavigationController;
        }(Orckestra.Composer.Controller));
        Composer.CheckoutNavigationController = CheckoutNavigationController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='./ICheckoutGetCartPromiseFailureHandler.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));



var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Mvc/ComposerClient.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Events/IEventHub.ts' />
///<reference path='../../../CheckoutCommon/source/Typescript/IUpdatePaymentOptions.ts' />
///<reference path='./IGetPaymentMethodsOptions' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var PaymentProvider = (function () {
            function PaymentProvider(window, eventHub) {
                this.window = window;
                this.eventHub = eventHub;
            }
            PaymentProvider.prototype.getCurrentPaymentMethod = function () {
                return this._currentPaymentMethod;
            };
            /**
            * Return a Promise which returns an array of Payment Methods.
            */
            PaymentProvider.prototype.getPaymentMethods = function (getPaymentMethodOptions) {
                return Composer.ComposerClient.post('/api/payment/paymentmethods', getPaymentMethodOptions);
            };
            PaymentProvider.prototype.updatePaymentMethod = function (request) {
                var _this = this;
                return Composer.ComposerClient.put('/api/payment/paymentmethod', request)
                    .then(function (payload) {
                    _this._currentPaymentMethod = request;
                    return payload;
                });
            };
            return PaymentProvider;
        }());
        Composer.PaymentProvider = PaymentProvider;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.Cart.UI/CheckoutCommon/Source/TypeScript/BaseCheckoutController.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var CheckoutCompleteController = (function (_super) {
            __extends(CheckoutCompleteController, _super);
            function CheckoutCompleteController() {
                _super.apply(this, arguments);
            }
            CheckoutCompleteController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.viewModelName = 'CompleteCheckout';
            };
            CheckoutCompleteController.prototype.renderData = function (checkoutContext) {
                return Q(this.render('CheckoutComplete', checkoutContext.cartViewModel));
            };
            return CheckoutCompleteController;
        }(Orckestra.Composer.BaseCheckoutController));
        Composer.CheckoutCompleteController = CheckoutCompleteController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../CheckoutCommon/source/Typescript/BaseCheckoutController.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var GuestCustomerInfoCheckoutController = (function (_super) {
            __extends(GuestCustomerInfoCheckoutController, _super);
            function GuestCustomerInfoCheckoutController() {
                _super.apply(this, arguments);
            }
            GuestCustomerInfoCheckoutController.prototype.initialize = function () {
                this.viewModelName = 'GuestCustomerInfo';
                _super.prototype.initialize.call(this);
            };
            GuestCustomerInfoCheckoutController.prototype.renderData = function (checkoutContext) {
                var _this = this;
                return Q.fcall(function () {
                    if (checkoutContext.authenticationViewModel.IsAuthenticated) {
                        _this.renderAuthenticated(checkoutContext);
                    }
                    else {
                        _this.renderUnauthenticated(checkoutContext);
                    }
                });
            };
            GuestCustomerInfoCheckoutController.prototype.renderAuthenticated = function (checkoutContext) {
                this.unregisterController();
                this.render(this.viewModelName, checkoutContext.authenticationViewModel);
            };
            GuestCustomerInfoCheckoutController.prototype.renderUnauthenticated = function (checkoutContext) {
                this.registerSubscriptions();
                this.render(this.viewModelName, checkoutContext.cartViewModel);
                this.eventHub.publish(this.viewModelName + "Rendered", null);
            };
            return GuestCustomerInfoCheckoutController;
        }(Orckestra.Composer.BaseCheckoutController));
        Composer.GuestCustomerInfoCheckoutController = GuestCustomerInfoCheckoutController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../CheckoutCommon/source/Typescript/BaseCheckoutController.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var CheckoutOrderConfirmationController = (function (_super) {
            __extends(CheckoutOrderConfirmationController, _super);
            function CheckoutOrderConfirmationController() {
                _super.apply(this, arguments);
                this.orderConfirmationCacheKey = 'orderConfirmationCacheKey';
                this.orderCacheKey = 'orderCacheKey';
            }
            CheckoutOrderConfirmationController.prototype.initialize = function () {
                var _this = this;
                _super.prototype.initialize.call(this);
                this.cacheProvider = Composer.CacheProvider.instance();
                this.cacheProvider.defaultCache.get(this.orderCacheKey)
                    .then(function (result) {
                    _this.eventHub.publish('CheckoutConfirmation', { data: result });
                    _this.cacheProvider.defaultCache.clear(_this.orderCacheKey).done();
                })
                    .fail(function (reason) {
                    console.error('Unable to retrieve order number from cache, attempt to redirect.');
                });
                this.cacheProvider.defaultCache.get(this.orderConfirmationCacheKey)
                    .then(function (result) {
                    var orderConfirmationviewModel = {
                        OrderNumber: result.OrderNumber,
                        CustomerEmail: result.CustomerEmail
                    };
                    if (orderConfirmationviewModel !== undefined) {
                        _this.render('CheckoutOrderConfirmation', orderConfirmationviewModel);
                        _this.eventHub.publish('checkoutStepRendered', {
                            data: { StepNumber: _this.context.viewModel.CurrentStep }
                        });
                    }
                    else {
                        console.error('Order was placed but it is not possible to retrieve order number from cache.');
                    }
                })
                    .fail(function (reason) {
                    console.error('Unable to retrieve order number from cache, attempt to redirect.');
                    var redirectUrl = _this.context.viewModel.RedirectUrl;
                    if (redirectUrl) {
                        window.location.href = redirectUrl;
                    }
                    else {
                        console.error('Redirect url was not detected.');
                    }
                });
            };
            return CheckoutOrderConfirmationController;
        }(Orckestra.Composer.Controller));
        Composer.CheckoutOrderConfirmationController = CheckoutOrderConfirmationController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../CheckoutCommon/source/Typescript/BaseCheckoutController.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var CheckoutOrderSummaryController = (function (_super) {
            __extends(CheckoutOrderSummaryController, _super);
            function CheckoutOrderSummaryController() {
                _super.apply(this, arguments);
            }
            CheckoutOrderSummaryController.prototype.initialize = function () {
                this.viewModelName = 'CheckoutOrderSummary';
                _super.prototype.initialize.call(this);
                this.registerSubscriptions();
                Composer.CheckoutService.checkoutStep = this.context.viewModel.CurrentStep;
            };
            CheckoutOrderSummaryController.prototype.registerSubscriptions = function () {
                var _this = this;
                _super.prototype.registerSubscriptions.call(this);
                var handle;
                this.eventHub.subscribe('cartUpdating', function () {
                    clearTimeout(handle);
                    handle = setTimeout(function () { return _this.renderLoading(); }, 300);
                });
                this.eventHub.subscribe('cartUpdatingFailed', function () {
                    clearTimeout(handle);
                    _this.reRender();
                });
                this.eventHub.subscribe('cartUpdated', function (e) {
                    clearTimeout(handle);
                    e.data.LoadCheckoutOrderSummary = true;
                    _this.render(_this.viewModelName, e.data);
                });
            };
            CheckoutOrderSummaryController.prototype.renderData = function (checkoutContext) {
                var _this = this;
                return Q.fcall(function () {
                    checkoutContext.cartViewModel.LoadCheckoutOrderSummary = true;
                    _this.render(_this.viewModelName, checkoutContext.cartViewModel);
                });
            };
            CheckoutOrderSummaryController.prototype.reRender = function () {
                var _this = this;
                this.renderLoading();
                this.checkoutService.getCart()
                    .then(function (cartVm) {
                    cartVm.LoadCheckoutOrderSummary = true;
                    _this.render(_this.viewModelName, cartVm);
                })
                    .fail(function (reason) { return _this.onRenderDataFailed(reason); });
            };
            CheckoutOrderSummaryController.prototype.renderLoading = function () {
                return this.render(this.viewModelName, { LoadCheckoutOrderSummary: true, GettingCart: true });
            };
            /**
             *  Update the cart.
             *  If errors are returned, it stay in the same page.
             *  If there is no errors it moves to the next step.
             */
            CheckoutOrderSummaryController.prototype.nextStep = function (actionContext) {
                var busy = this.asyncBusy({ elementContext: actionContext.elementContext });
                Composer.ErrorHandler.instance().removeErrors();
                this.checkoutService.updateCart()
                    .then(function (result) {
                    if (result.HasErrors === false) {
                        window.location.href = result.NextStepUrl;
                    }
                    else {
                        console.error('Error while updating the cart');
                        busy.done();
                    }
                })
                    .fail(function (reason) {
                    console.error('Error on checkout submit.', reason);
                    Composer.ErrorHandler.instance().outputErrorFromCode('CheckoutNextStepFailed');
                    busy.done();
                });
            };
            return CheckoutOrderSummaryController;
        }(Orckestra.Composer.BaseCheckoutController));
        Composer.CheckoutOrderSummaryController = CheckoutOrderSummaryController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../CheckoutCommon/source/Typescript/BaseCheckoutController.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var CompleteCheckoutOrderSummaryController = (function (_super) {
            __extends(CompleteCheckoutOrderSummaryController, _super);
            function CompleteCheckoutOrderSummaryController() {
                _super.apply(this, arguments);
            }
            CompleteCheckoutOrderSummaryController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.viewModelName = 'CompleteCheckoutOrderSummary';
                Composer.CheckoutService.checkoutStep = this.context.viewModel.CurrentStep;
                this.registerSubscriptions();
            };
            CompleteCheckoutOrderSummaryController.prototype.renderData = function (checkoutContext) {
                return Q(this.render(this.viewModelName, checkoutContext.cartViewModel));
            };
            /**
            *  complete Checkout
            *  If errors are returned, it stays in the same page.
            *  If there is no errors it moves to the next step.
            */
            CompleteCheckoutOrderSummaryController.prototype.nextStep = function (actionContext) {
                var _this = this;
                var busy = this.asyncBusy();
                this.checkoutService.completeCheckout()
                    .then(function (result) {
                    if (_.isEmpty(result.OrderNumber)) {
                        throw {
                            message: 'We could not complete the order because the order number is empty',
                            data: result
                        };
                    }
                    _this.eventHub.publish('checkoutCompleted', { data: result });
                    _this.checkoutService.setOrderToCache(result);
                    return result;
                })
                    .then(function (result) {
                    var orderConfirmationviewModel = {
                        OrderNumber: result.OrderNumber,
                        CustomerEmail: result.CustomerEmail
                    };
                    _this.checkoutService.setOrderConfirmationToCache(orderConfirmationviewModel);
                    if (result.NextStepUrl) {
                        window.location.href = result.NextStepUrl;
                    }
                })
                    .fail(function (reason) {
                    console.error('An error occurred while completing the checkout.', reason);
                    Composer.ErrorHandler.instance().outputErrorFromCode('CompleteCheckoutFailed');
                    busy.done();
                });
            };
            CompleteCheckoutOrderSummaryController.prototype.registerSubscriptions = function () {
                var _this = this;
                _super.prototype.registerSubscriptions.call(this);
                var handle;
                this.eventHub.subscribe('cartUpdating', function () {
                    clearTimeout(handle);
                    handle = setTimeout(function () { return _this.renderLoading(); }, 300);
                });
                this.eventHub.subscribe('cartUpdatingFailed', function () {
                    clearTimeout(handle);
                    _this.reRender();
                });
                this.eventHub.subscribe('cartUpdated', function (e) {
                    clearTimeout(handle);
                    e.data.GettingCart = false;
                    _this.render(_this.viewModelName, e.data);
                });
            };
            CompleteCheckoutOrderSummaryController.prototype.renderLoading = function () {
                var loadingViewModel = { GettingCart: true };
                return this.render(this.viewModelName, loadingViewModel);
            };
            CompleteCheckoutOrderSummaryController.prototype.reRender = function () {
                var _this = this;
                this.renderLoading();
                this.checkoutService
                    .getCart()
                    .then(function (cartVm) { return _this.render(_this.viewModelName, cartVm); })
                    .fail(function (reason) { return _this.onRenderDataFailed(reason); });
            };
            return CompleteCheckoutOrderSummaryController;
        }(Orckestra.Composer.BaseCheckoutController));
        Composer.CompleteCheckoutOrderSummaryController = CompleteCheckoutOrderSummaryController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../../Composer.UI/Source/Typings/tsd.d.ts' />



///<reference path='../../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../../Composer.UI/Source/Typescript/System/IDisposable.ts' />
///<reference path='../ViewModels/IActivePaymentViewModel.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var BaseCheckoutPaymentProvider = (function () {
            function BaseCheckoutPaymentProvider(window, eventHub, providerType, providerName) {
                this._providerType = providerType;
                this._providerName = providerName;
                this._window = window;
                this._eventHub = eventHub;
            }
            Object.defineProperty(BaseCheckoutPaymentProvider.prototype, "providerType", {
                /**
                 * Obtains the underlying type of the Payment Provider.
                 * @return {string} Type of the Payment Provider.
                 */
                get: function () {
                    return this._providerType;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(BaseCheckoutPaymentProvider.prototype, "providerName", {
                /**
                 * Obtains the name of the Payment Provider.
                 * @return {string} Name of the Payment provider.
                 */
                get: function () {
                    return this._providerName;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(BaseCheckoutPaymentProvider.prototype, "window", {
                get: function () {
                    return this._window;
                },
                enumerable: true,
                configurable: true
            });
            /**
             * Method called to get a promise for payment validation.
             * Returns a promise of boolean. The return boolean needs to be false for validation error,
             * or true if valid.
             * @return {Q.Promise<boolean>} Promise that will be executed when we validate the payment control.
             */
            BaseCheckoutPaymentProvider.prototype.validatePayment = function (activePaymentVM) {
                throw new Error('This Payment Provider does not implement the "validatePayment" method.');
            };
            /**
             * Method called to get a promise when payment will submit.
             * @return {Q.Promise<any>} Promise that will be executed when to cart is about the be updated.
             */
            BaseCheckoutPaymentProvider.prototype.submitPayment = function (activePaymentVM) {
                throw new Error('This Payment Provider does not implement the "submitPayment" method.');
            };
            /**
             * Gets the container for the Payment Provider.
             * @return {JQuery} jQuery object.
             */
            BaseCheckoutPaymentProvider.prototype.getForm = function () {
                var form = $('#PaymentForm');
                if (!form || _.isEmpty(form)) {
                    throw new Error('Could not find the element PaymentForm on this page.');
                }
                return form;
            };
            BaseCheckoutPaymentProvider.prototype.dispose = function () {
                //Nothing to do here.
            };
            return BaseCheckoutPaymentProvider;
        }());
        Composer.BaseCheckoutPaymentProvider = BaseCheckoutPaymentProvider;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../ViewModels/IPaymentMethodViewModel.ts' />

///<reference path='../../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../../Composer.UI/Source/Typescript/Mvc/ComposerClient.ts' />
///<reference path='../../../../../Composer.UI/Source/Typescript/Events/EventHub.ts' />
///<reference path='../Providers/BaseCheckoutPaymentProvider.ts' />
///<reference path='../Repositories/IPaymentRepository.ts' />
///<reference path='./IPaymentService.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var PaymentService = (function () {
            function PaymentService(eventHub, paymentRepository) {
                this.eventHub = eventHub;
                this.paymentRepository = paymentRepository;
            }
            /**
             * Return a list of acceptable payment providers details with labels
             * @param  {providers: Array<string>}      Array of provider names.
             * @return {Array<IPaymentMethodViewModel} List of payment provider details
             */
            PaymentService.prototype.getPaymentMethods = function (providers) {
                return this.paymentRepository.getPaymentMethods(providers);
            };
            /**
             * Return the active payment for the active cart
             * @return {IActivePaymentViewModel} Active payment for the active cart.
             */
            PaymentService.prototype.getActivePayment = function () {
                return this.paymentRepository.getActivePayment();
            };
            PaymentService.prototype.removePaymentMethod = function (paymentMethodId, paymentProviderName) {
                return this.paymentRepository.removePaymentMethod(paymentMethodId, paymentProviderName);
            };
            PaymentService.prototype.setPaymentMethod = function (request) {
                return this.paymentRepository.setPaymentMethod(request);
            };
            return PaymentService;
        }());
        Composer.PaymentService = PaymentService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='./IPaymentMethodViewModel.ts' />
///<reference path='./IActivePaymentViewModel.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));



///<reference path='IPaymentProfileListItemViewModel.ts' />

///<reference path='../../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../../Composer.UI/Source/Typescript/Mvc/ComposerClient.ts' />
///<reference path="IPaymentRepository.ts" />
///<reference path="../ViewModels/IPaymentViewModel.ts" />
///<reference path="../ViewModels/IActivePaymentViewModel.ts" />
///<reference path="../ViewModels/IPaymentProfileListViewModel.ts" />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var PaymentRepository = (function () {
            function PaymentRepository() {
            }
            /**
             * Return a list of saved payment methods for a specified array of payment provider names
             * @param  {providers: Array<string>}       Array of provider names.
             * @return {Array<IPaymentMethodViewModel>} Instance of the provider.
             */
            PaymentRepository.prototype.getPaymentMethods = function (providers) {
                return Composer.ComposerClient.post('/api/payment/paymentmethods', { Providers: providers });
            };
            /**
             * Return the active payment for the active cart
             * @return {IActivePaymentViewModel} Active payment for the active cart.
             */
            PaymentRepository.prototype.getActivePayment = function () {
                return Composer.ComposerClient.get('/api/payment/activepayment');
            };
            PaymentRepository.prototype.removePaymentMethod = function (paymentMethodId, paymentProviderName) {
                return Composer.ComposerClient.remove('/api/payment/removemethod', {
                    PaymentMethodId: paymentMethodId,
                    PaymentProviderName: paymentProviderName
                });
            };
            PaymentRepository.prototype.setPaymentMethod = function (request) {
                return Composer.ComposerClient.put('/api/payment/paymentMethod', request);
            };
            return PaymentRepository;
        }());
        Composer.PaymentRepository = PaymentRepository;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='../../../../../Composer.UI/Source/Typings/tsd.d.ts' />
/// <reference path='../../../../../Composer.UI/Source/Typescript/Events/IEventHub.ts' />
/// <reference path='./BaseCheckoutPaymentProvider.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var CheckoutPaymentProviderFactory = (function () {
            function CheckoutPaymentProviderFactory(window, eventHub) {
                this._eventHub = eventHub;
                this._window = window;
            }
            /**
             * Determines if the Checkout Payment Provider exists or not.
             * @param  {string}  providerType Type of the provider.
             * @return {boolean}              True if the provider exists in the Orckestra.Composer namespace.
             */
            CheckoutPaymentProviderFactory.prototype.hasProvider = function (providerType) {
                if (Orckestra.Composer[providerType]) {
                    return true;
                }
                return false;
            };
            /**
             * Gets an instance of a Checkout Payment provider. If the provider does not exists, throws an
             * error.
             * @param  {string}                   providerType                  Type of the provider.
             * @param  {string}                   providerName                  Name of the provider.
             * @return {ICheckoutPaymentProvider}                               Instance of the provider.
             */
            CheckoutPaymentProviderFactory.prototype.getInstance = function (providerType, providerName) {
                if (this.hasProvider(providerType)) {
                    var Clazz = Orckestra.Composer[providerType];
                    var instance = new Clazz(this._window, providerName, this._eventHub);
                    return instance;
                }
                throw new Error('Unable to find a class named "' + providerType + '".');
            };
            return CheckoutPaymentProviderFactory;
        }());
        Composer.CheckoutPaymentProviderFactory = CheckoutPaymentProviderFactory;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='Services/IPaymentService.ts' />
///<reference path='Services/PaymentService.ts' />
///<reference path='Repositories/PaymentRepository.ts' />
///<reference path='Providers/BaseCheckoutPaymentProvider.ts' />
///<reference path='Providers/CheckoutPaymentProviderFactory.ts' />
///<reference path='ViewModels/IPaymentViewModel.ts' />
///<reference path='ViewModels/IActivePaymentViewModel.ts' />
///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/ErrorHandling/ErrorHandler.ts' />
///<reference path='../../../../Composer.Cart.UI/CheckoutCommon/Source/TypeScript/CheckoutService.ts' />
///<reference path='../../../../Composer.Cart.UI/CheckoutCommon/Source/TypeScript/BaseCheckoutController.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var CheckoutPaymentController = (function (_super) {
            __extends(CheckoutPaymentController, _super);
            function CheckoutPaymentController() {
                _super.apply(this, arguments);
                /**
                 * this prevents changing payment method more than once per click
                 * this happens when "new credit card" is selected since we need to
                 * listen for both click and change events to handle both when we
                 * change to new credit card or when new CC is already selected and
                 * we want to come back to the new CC screen
                 */
                this.debounceChangePaymentMethod = _.debounce(this.executeChangePaymentMethod, 300);
            }
            CheckoutPaymentController.prototype.initialize = function () {
                var _this = this;
                _super.prototype.initialize.call(this);
                this._window = window;
                this.viewModelName = 'CheckoutPayment';
                this.paymentService = new Composer.PaymentService(this.eventHub, new Composer.PaymentRepository());
                this.paymentProviders = this.getPaymentProviders();
                this.eventHub.subscribe('paymentMethodsUpdated', function (_) { return _this.renderData(); });
                this.registerSubscriptions();
            };
            CheckoutPaymentController.prototype.selectCreditCardPaymentMethod = function () {
                if (this.viewModel.CreditCardPaymentMethod) {
                    // If a saved credit card is available select the first one
                    if (this.viewModel.SavedCreditCards.length > 0) {
                        this.payWithSavedCreditCard();
                    }
                    else {
                        this.payWithCreditCard();
                    }
                }
            };
            //TODO is it used ?
            CheckoutPaymentController.prototype.payWithSavedCreditCard = function () {
                var provider = _.first(this.viewModel.SavedCreditCards);
                this.changePaymentMethodInternal(provider.Id, provider.PaymentProviderName);
            };
            //TODO is it used ?
            CheckoutPaymentController.prototype.payWithCreditCard = function () {
                var provider = this.viewModel.CreditCardPaymentMethod;
                this.changePaymentMethodInternal(provider.Id, provider.PaymentProviderName);
            };
            CheckoutPaymentController.prototype.changePaymentMethodInternal = function (activeMethodId, paymentProviderName, paymentType) {
                this.viewModel.IsProviderLoading = true;
                this._busyHandler = _super.prototype.asyncBusy.call(this, { elementContext: $(document), containerContext: $(document) });
                this.debounceChangePaymentMethod({ activeMethodId: activeMethodId, paymentProviderName: paymentProviderName, paymentType: paymentType });
            };
            CheckoutPaymentController.prototype.changePaymentMethod = function (actionContext) {
                var activeMethodId = actionContext.elementContext.data('payment-id');
                var paymentProviderName = actionContext.elementContext.data('payment-provider');
                var paymentType = actionContext.elementContext.data('payment-type');
                this.changePaymentMethodInternal(activeMethodId, paymentProviderName, paymentType);
            };
            CheckoutPaymentController.prototype.executeChangePaymentMethod = function (args) {
                var _this = this;
                var activeMethodId = args.activeMethodId, paymentProviderName = args.paymentProviderName, paymentType = args.paymentType;
                this.setPaymentMethod(this.viewModel.PaymentId, activeMethodId, paymentProviderName, paymentType)
                    .then(function (_) { return _this.checkoutService.getCart(); })
                    .then(function (cart) { return _this.eventHub.publish('cartUpdated', { data: cart }); })
                    .fin(function () {
                    _this.viewModel.IsProviderLoading = false;
                    _this.releaseBusyHandler();
                    _this.renderView();
                    _this.formInstances = _this.registerFormsForValidation(_this.context.container.find('form'));
                });
            };
            CheckoutPaymentController.prototype.renderData = function () {
                var _this = this;
                return this.paymentService
                    .getPaymentMethods(_.map(this.paymentProviders, function (p) { return p.providerName; }))
                    .then(function (vm) {
                    if (!vm) {
                        throw new Error('No viewModel received');
                    }
                    if (_.isEmpty(vm.PaymentMethods)) {
                        throw new Error('No payment method was found.');
                    }
                    _this.viewModel = vm;
                    if (_this.viewModel.ActivePaymentViewModel) {
                        _this.activePaymentProvider = _this.findPaymentProviderByType(vm.ActivePaymentViewModel.ProviderType);
                        return _this.viewModel;
                    }
                    else {
                        var defaultPaymentMethod = _this.findDefaultPaymentMethod(vm.PaymentMethods);
                        // only set the payment method if we found an appropriate default payment method
                        if (!!defaultPaymentMethod) {
                            // If we don't already have an active payment selected
                            // we found a defaultPaymentMethod (either the default or the only one)
                            // there is always going to be at least one (default provider + saved payment methods)
                            return _this.setPaymentMethod(vm.PaymentId, defaultPaymentMethod.Id, defaultPaymentMethod.PaymentProviderName, defaultPaymentMethod.PaymentType);
                        }
                    }
                })
                    .then(function (vm) {
                    _this.renderView();
                    _this.formInstances = _this.registerFormsForValidation(_this.context.container.find('form'));
                })
                    .fail(function (reason) {
                    _this.onInitializePaymentMethodFailed(reason);
                });
            };
            CheckoutPaymentController.prototype.getValidationPromise = function () {
                if (!this.activePaymentProvider || !this.viewModel.ActivePaymentViewModel) {
                    return Q(false);
                }
                if (!this.isValidForUpdate()) {
                    return Q(false);
                }
                return this.activePaymentProvider
                    .validatePayment(this.viewModel.ActivePaymentViewModel);
            };
            CheckoutPaymentController.prototype.getUpdateModelPromise = function () {
                var _this = this;
                return Q.fcall(function () {
                    console.log('Committing payment information.');
                    return _this.activePaymentProvider.submitPayment(_this.viewModel.ActivePaymentViewModel);
                });
            };
            CheckoutPaymentController.prototype.dispose = function () {
                _super.prototype.dispose.call(this);
                _.each(this.paymentProviders, function (p) { return p.dispose(); });
            };
            CheckoutPaymentController.prototype.findDefaultPaymentMethod = function (paymentMethods) {
                var defaultPaymentMethod = _.find(paymentMethods, function (paymentMethod) { return paymentMethod.Default && paymentMethod.IsValid; });
                if (!!defaultPaymentMethod) {
                    return defaultPaymentMethod;
                }
                else {
                    return _.find(paymentMethods, function (paymentMethod) { return paymentMethod.IsValid; });
                }
                //return null;
            };
            CheckoutPaymentController.prototype.onInitializePaymentMethodFailed = function (reason) {
                _super.prototype.removeLoading.call(this);
                console.error('Error while retrieving payment methods', reason);
                Composer.ErrorHandler.instance().outputErrorFromCode('CheckoutRenderFailed');
            };
            CheckoutPaymentController.prototype.renderView = function () {
                this.render(this.viewModelName, this.viewModel);
            };
            CheckoutPaymentController.prototype.setPaymentMethod = function (paymentId, activeMethodId, paymentProviderName, paymentType) {
                var _this = this;
                return this.paymentService.setPaymentMethod({
                    PaymentId: paymentId,
                    PaymentProviderName: paymentProviderName,
                    PaymentMethodId: activeMethodId,
                    PaymentType: paymentType,
                    Providers: _.map(this.paymentProviders, function (p) { return p.providerName; })
                })
                    .then(function (paymentViewModel) {
                    _this.activePaymentProvider = _this.findPaymentProviderByType(paymentViewModel.ActivePaymentViewModel.ProviderType);
                    _this.viewModel = paymentViewModel;
                    Composer.ErrorHandler.instance().removeErrors();
                    return paymentViewModel;
                })
                    .fail(function (reason) {
                    _this.onChangePaymentMethodFailed(reason);
                });
            };
            CheckoutPaymentController.prototype.onChangePaymentMethodFailed = function (reason) {
                if (this.viewModel) {
                    this.viewModel.ActivePaymentViewModel = null;
                    this.viewModel.IsLoading = false;
                }
                console.error('Error while changing the payment method.', reason);
                Composer.ErrorHandler.instance().outputErrorFromCode('PaymentMethodChangeFailed');
            };
            CheckoutPaymentController.prototype.findPaymentProviderByType = function (providerType) {
                var provider = _.find(this.paymentProviders, function (provider) {
                    return provider.providerType === providerType;
                });
                if (!provider) {
                    throw new Error('Unable to resove any payment provider named "' + providerType + '"');
                }
                return provider;
            };
            CheckoutPaymentController.prototype.getPaymentProviders = function () {
                if (_.isEmpty(this.context.viewModel.PaymentProviders)) {
                    console.error('No payment provider was found in the Context.');
                }
                var factory = new Composer.CheckoutPaymentProviderFactory(this._window, this.eventHub);
                var providers = [];
                _.each(this.context.viewModel.PaymentProviders, function (vm) {
                    var provider = factory.getInstance(vm.ProviderType, vm.ProviderName);
                    providers.push(provider);
                });
                return providers;
            };
            CheckoutPaymentController.prototype.releaseBusyHandler = function () {
                if (this._busyHandler) {
                    this._busyHandler.done();
                    this._busyHandler = null;
                }
            };
            return CheckoutPaymentController;
        }(Orckestra.Composer.BaseCheckoutController));
        Composer.CheckoutPaymentController = CheckoutPaymentController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Events/IEventHub.ts' />
///<reference path='../../../../Composer.Cart.UI/CartSummary/Source/Typescript/CartService.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var ShippingAddressCheckoutService = (function () {
            function ShippingAddressCheckoutService(cartService, eventHub) {
                if (!cartService) {
                    throw new Error('Error: cartService is required');
                }
                if (!eventHub) {
                    throw new Error('Error: eventHub is required');
                }
                this.cartService = cartService;
                this.eventHub = eventHub;
            }
            ShippingAddressCheckoutService.prototype.setCheapestShippingMethodUsing = function (postalCode) {
                var _this = this;
                this.eventHub.publish('cartUpdating', null);
                return this.cartService.updateShippingMethodPostalCode(postalCode)
                    .then(function () { return _this.cartService.setCheapestShippingMethod(); })
                    .then(function () { return _this.cartService.getCart(); })
                    .then(function (cart) {
                    _this.eventHub.publish('cartUpdated', { data: cart });
                    _this.eventHub.publish('postalCodeChanged', { data: cart });
                })
                    .fail(function (reason) { return _this.handleError(reason); });
            };
            ShippingAddressCheckoutService.prototype.handleError = function (reason) {
                console.error('The user changed the postal code, ' +
                    'but we were unable to update the cart dynamically and estimate shipping fees', reason);
                this.eventHub.publish('cartUpdatingFailed', null);
            };
            return ShippingAddressCheckoutService;
        }());
        Composer.ShippingAddressCheckoutService = ShippingAddressCheckoutService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../CheckoutCommon/source/Typescript/BaseCheckoutController.ts' />
///<reference path='../../../CartSummary/Source/Typescript/CartService.ts' />
///<reference path='ShippingAddressCheckoutService.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var ShippingAddressCheckoutController = (function (_super) {
            __extends(ShippingAddressCheckoutController, _super);
            function ShippingAddressCheckoutController() {
                _super.apply(this, arguments);
                this.shippingAddressCheckoutService = new Composer.ShippingAddressCheckoutService(new Composer.CartService(new Composer.CartRepository(), this.eventHub), this.eventHub);
            }
            ShippingAddressCheckoutController.prototype.initialize = function () {
                this.viewModelName = 'ShippingAddress';
                _super.prototype.initialize.call(this);
            };
            ShippingAddressCheckoutController.prototype.renderData = function (checkoutContext) {
                var _this = this;
                return Q.fcall(function () {
                    if (checkoutContext.authenticationViewModel.IsAuthenticated) {
                        _this.unregisterController();
                        _this.render(_this.viewModelName, checkoutContext.authenticationViewModel);
                    }
                    else {
                        _this.registerSubscriptions();
                        _this.render(_this.viewModelName, checkoutContext.cartViewModel);
                        _this.render('AddressRegionPicker', {
                            Regions: checkoutContext.regionsViewModel,
                            SelectedRegion: _this.getRegionCode(checkoutContext.cartViewModel)
                        });
                        _this.eventHub.publish(_this.viewModelName + "Rendered", checkoutContext.cartViewModel);
                    }
                });
            };
            ShippingAddressCheckoutController.prototype.getRegionCode = function (cart) {
                if (cart.ShippingAddress === undefined || cart.ShippingAddress.RegionCode === undefined) {
                    return '';
                }
                return cart.ShippingAddress.RegionCode;
            };
            ShippingAddressCheckoutController.prototype.changePostalCode = function (actionContext) {
                var context = actionContext.elementContext;
                context.val(context.val().toUpperCase());
                if (!this.isValidForUpdate()) {
                    return;
                }
                var postalCode = context.val();
                this.shippingAddressCheckoutService.setCheapestShippingMethodUsing(postalCode).done();
            };
            return ShippingAddressCheckoutController;
        }(Orckestra.Composer.BaseCheckoutController));
        Composer.ShippingAddressCheckoutController = ShippingAddressCheckoutController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Mvc/ComposerClient.ts' />
///<reference path='../../../../Composer.MyAccount.UI/Common/Source/Typescript/CustomerService.ts' />
///<reference path='../../../CheckoutCommon/Source/Typescript/AddressDto.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var ShippingAddressRegisteredService = (function () {
            function ShippingAddressRegisteredService(customerService) {
                this.customerService = customerService;
            }
            /**
           * Get the customer addresses. The selected shipping address is taken from the cart by default.
           * If no address has been set in the cart, the selected shipping address corresponds to the preferred address.
           */
            ShippingAddressRegisteredService.prototype.getShippingAddresses = function (cart) {
                var _this = this;
                if (!cart) {
                    throw new Error('The cart is required');
                }
                return this.customerService.getAddresses()
                    .then(function (addresses) {
                    addresses.AddressesLoaded = true;
                    addresses.SelectedShippingAddressId = _this.getSelectedShippingAddressId(cart, addresses);
                    return addresses;
                });
            };
            ShippingAddressRegisteredService.prototype.getSelectedShippingAddressId = function (cart, addressList) {
                if (this.isShippingAddressFromCartValid(cart, addressList)) {
                    return cart.ShippingAddress.AddressBookId;
                }
                return this.getPreferredShippingAddressId(addressList);
            };
            ShippingAddressRegisteredService.prototype.isShippingAddressFromCartValid = function (cart, addressList) {
                if (cart.ShippingAddress === undefined) {
                    return false;
                }
                return _.any(addressList.Addresses, function (address) { return address.Id === cart.ShippingAddress.AddressBookId; });
            };
            ShippingAddressRegisteredService.prototype.getPreferredShippingAddressId = function (addressList) {
                var preferredShippingAddress = _.find(addressList.Addresses, function (address) { return address.IsPreferredShipping; });
                return preferredShippingAddress === undefined ? undefined : preferredShippingAddress.Id;
            };
            return ShippingAddressRegisteredService;
        }());
        Composer.ShippingAddressRegisteredService = ShippingAddressRegisteredService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Repositories/CustomerRepository.ts' />
///<reference path='../../../../Composer.MyAccount.UI/Common/Source/Typescript/CustomerService.ts' />
///<reference path='../../../../Composer.MyAccount.UI/Common/Source/Typescript/MyAccountEvents.ts' />
///<reference path='../../../../Composer.MyAccount.UI/Common/Source/Typescript/MyAccountStatus.ts' />
///<reference path='../../../CheckoutCommon/source/Typescript/BaseCheckoutController.ts' />
///<reference path='ShippingAddressRegisteredService.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/UI/UIModal.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var ShippingAddressRegisteredController = (function (_super) {
            __extends(ShippingAddressRegisteredController, _super);
            function ShippingAddressRegisteredController() {
                _super.apply(this, arguments);
                this.debounceChangeShippingMethod = _.debounce(this.changeShippingAddressImpl, 500, { 'leading': true });
                this.customerService = new Composer.CustomerService(new Composer.CustomerRepository());
                this.shippingAddressRegisteredService = new Composer.ShippingAddressRegisteredService(this.customerService);
            }
            ShippingAddressRegisteredController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.viewModelName = 'ShippingAddressRegistered';
                this.deleteModalElementSelector = '#confirmationModal';
                this.uiModal = new Composer.UIModal(window, this.deleteModalElementSelector, this.deleteAddress, this);
            };
            ShippingAddressRegisteredController.prototype.registerSubscriptions = function () {
                var _this = this;
                this.eventHub.subscribe(this.viewModelName + "Rendered", function (e) { return _this.onRendered(e); });
                this.eventHub.subscribe(Composer.MyAccountEvents[Composer.MyAccountEvents.AddressDeleted], function (e) { return _this.onAddressDeleted(e); });
            };
            ShippingAddressRegisteredController.prototype.renderData = function (checkoutContext) {
                var _this = this;
                if (checkoutContext.authenticationViewModel.IsAuthenticated) {
                    this.registerSubscriptions();
                    this.render(this.viewModelName, { IsAuthenticated: true, GettingCart: true });
                    return this.shippingAddressRegisteredService.getShippingAddresses(checkoutContext.cartViewModel)
                        .then(function (shippingAdressesVm) {
                        _this.render(_this.viewModelName, checkoutContext.cartViewModel);
                        _this.render('RegisteredAddresses', shippingAdressesVm);
                    })
                        .fail(function (reason) { return _this.handleError(reason); })
                        .fin(function () { return _this.eventHub.publish(_this.viewModelName + "Rendered", checkoutContext.cartViewModel); });
                }
                else {
                    this.unregisterController();
                    this.render(this.viewModelName, checkoutContext.authenticationViewModel);
                }
            };
            ShippingAddressRegisteredController.prototype.onRendered = function (e) {
                var _this = this;
                this.formInstances = this.registerFormsForValidation($('#RegisteredShippingAddress', this.context.container));
                var selectedShippingAddressId = $(this.context.container).find('input[name=ShippingAddressId]:checked').val();
                if (!selectedShippingAddressId) {
                    return;
                }
                this.checkoutService.getCart()
                    .done(function (cart) {
                    if (selectedShippingAddressId !== cart.ShippingAddress.AddressBookId) {
                        _this.debounceChangeShippingMethod();
                    }
                });
            };
            ShippingAddressRegisteredController.prototype.onAddressDeleted = function (e) {
                var addressId = e.data;
                var $addressListItem = $(this.context.container).find('[data-address-id=' + addressId + ']');
                $addressListItem.remove();
            };
            ShippingAddressRegisteredController.prototype.changeShippingAddress = function (actionContext) {
                this.debounceChangeShippingMethod();
            };
            ShippingAddressRegisteredController.prototype.changeShippingAddressImpl = function () {
                var _this = this;
                this.eventHub.publish('cartUpdating', null);
                this.checkoutService.updateCart()
                    .done(function (result) {
                    if (result.HasErrors) {
                        throw new Error('The updated cart contains errors');
                    }
                    _this.eventHub.publish('cartUpdated', { data: result.Cart });
                }, function (reason) { return _this.handleError(reason); });
            };
            ShippingAddressRegisteredController.prototype.deleteAddressConfirm = function (actionContext) {
                this.uiModal.openModal(actionContext.event);
            };
            ShippingAddressRegisteredController.prototype.deleteAddress = function (event) {
                var _this = this;
                var element = $(event.target);
                var $addressListItem = element.closest('[data-address-id]');
                var addressId = $addressListItem.data('address-id');
                var busy = this.asyncBusy({ elementContext: element, containerContext: $addressListItem });
                return this.customerService.deleteAddress(addressId, '')
                    .then(function (result) {
                    _this.eventHub.publish(Composer.MyAccountEvents[Composer.MyAccountEvents.AddressDeleted], { data: addressId });
                })
                    .fail(function () { return _this.renderFailedForm(Composer.MyAccountStatus[Composer.MyAccountStatus.AjaxFailed]); })
                    .fin(function () { return busy.done(); });
            };
            ShippingAddressRegisteredController.prototype.renderFailedForm = function (status) {
                //TODO
            };
            ShippingAddressRegisteredController.prototype.handleError = function (reason) {
                this.eventHub.publish('cartUpdatingFailed', null);
                console.error('The user changed the shipping address, but we were unable to estimate shipping dynamically', reason);
            };
            return ShippingAddressRegisteredController;
        }(Orckestra.Composer.BaseCheckoutController));
        Composer.ShippingAddressRegisteredController = ShippingAddressRegisteredController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../CheckoutCommon/source/Typescript/BaseCheckoutController.ts' />
///<reference path='ShippingMethodService.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var ShippingMethodCheckoutController = (function (_super) {
            __extends(ShippingMethodCheckoutController, _super);
            function ShippingMethodCheckoutController() {
                _super.apply(this, arguments);
                this.debounceMethodSelected = _.debounce(this.methodSelectedImpl, 500, { 'leading': true });
            }
            ShippingMethodCheckoutController.prototype.initialize = function () {
                this.viewModelName = 'ShippingMethod';
                _super.prototype.initialize.call(this);
            };
            ShippingMethodCheckoutController.prototype.renderData = function (checkoutContext) {
                var _this = this;
                return Q.fcall(function () {
                    var selectedShippingMethodName = '';
                    if (!_.isUndefined(checkoutContext.cartViewModel.ShippingMethod)) {
                        selectedShippingMethodName = checkoutContext.cartViewModel.ShippingMethod.Name;
                        checkoutContext.shippingMethodsViewModel.ShippingMethods.forEach(function (shippingMethod) {
                            if (shippingMethod.Name === selectedShippingMethodName) {
                                checkoutContext.shippingMethodsViewModel.SelectedShippingProviderId = shippingMethod.ShippingProviderId;
                            }
                        });
                    }
                    _this.render(_this.viewModelName, {
                        Methods: checkoutContext.shippingMethodsViewModel,
                        SelectedMethod: selectedShippingMethodName,
                        HasMethods: !_.isEmpty(checkoutContext.shippingMethodsViewModel.ShippingMethods)
                    });
                    _this.eventHub.publish(_this.viewModelName + "Rendered", null);
                });
            };
            ShippingMethodCheckoutController.prototype.methodSelected = function (actionContext) {
                Composer.ErrorHandler.instance().removeErrors();
                this.debounceMethodSelected(actionContext);
            };
            ShippingMethodCheckoutController.prototype.methodSelectedImpl = function (actionContext) {
                var _this = this;
                this.eventHub.publish('cartUpdating', null);
                this.updateShippingProviderId(actionContext)
                    .then(function () { return _this.checkoutService.updateCart(); })
                    .then(function (result) {
                    if (result.HasErrors) {
                        throw new Error('The updated cart contains errors');
                    }
                    _this.eventHub.publish('cartUpdated', { data: result.Cart });
                })
                    .fail(function (reason) { return _this.handleError(reason); });
            };
            ShippingMethodCheckoutController.prototype.updateShippingProviderId = function (actionContext) {
                return Q.fcall(function () {
                    var shippingProviderId = actionContext.elementContext.data('shipping-provider-id');
                    $('#ShippingProviderId').val(shippingProviderId.toString());
                });
            };
            ShippingMethodCheckoutController.prototype.handleError = function (reason) {
                this.eventHub.publish('cartUpdatingFailed', null);
                console.error('The user changed the shipping method, but we were unable to update the cart dynamically', reason);
                Composer.ErrorHandler.instance().outputErrorFromCode('ShippingMethodUpdateFailed');
            };
            return ShippingMethodCheckoutController;
        }(Orckestra.Composer.BaseCheckoutController));
        Composer.ShippingMethodCheckoutController = ShippingMethodCheckoutController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Events/EventHub.ts' />
///<reference path='../../../../Composer.Cart.UI/CartSummary/Source/Typescript/CartService.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var CouponService = (function () {
            function CouponService(cartService, eventHub) {
                if (!cartService) {
                    throw new Error('Error: cartService is required');
                }
                if (!eventHub) {
                    throw new Error('Error: eventHub is required');
                }
                this.cartService = cartService;
                this.eventHub = eventHub;
            }
            /**
            * Adds a coupon using the Composer API.
            * @param couponCode Code of the Coupon to add through the API.
            */
            CouponService.prototype.addCoupon = function (couponCode) {
                var _this = this;
                var data = {
                    CouponCode: couponCode
                };
                this.eventHub.publish('couponUpdating', { data: data });
                return this.cartService.addCoupon(couponCode)
                    .then(function () { return _this.cartService.getCart(); })
                    .then(function (cart) {
                    _this.eventHub.publish('cartUpdated', { data: cart });
                    _this.publishCouponUpdatedEvent(cart, true);
                }, function (reason) {
                    console.error('Error while adding coupon', reason);
                    _this.publishCouponUpdatedEvent(undefined, false);
                });
            };
            /**
             * Removes a coupon using the Composer API
             * @param {String} couponCode Code of the coupon to remove.
             */
            CouponService.prototype.removeCoupon = function (couponCode) {
                var _this = this;
                var data = {
                    CouponCode: couponCode
                };
                return this.cartService.removeCoupon(couponCode)
                    .then(function () { return _this.cartService.getCart(); })
                    .then(function (cart) {
                    _this.eventHub.publish('cartUpdated', { data: cart });
                    _this.publishCouponUpdatedEvent(cart, true);
                }, function (reason) { return _this.publishCouponUpdatedEvent(undefined, false); });
            };
            CouponService.prototype.publishCouponUpdatedEvent = function (result, isSuccess) {
                this.eventHub.publish('couponUpdated', { data: result });
            };
            return CouponService;
        }());
        Composer.CouponService = CouponService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Repositories/CartRepository.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/JQueryPlugins/ISerializeObjectJqueryPlugin.ts' />
///<reference path='./CouponService.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        /**
         * Controller for the Coupons section.
         */
        var CouponController = (function (_super) {
            __extends(CouponController, _super);
            function CouponController() {
                _super.apply(this, arguments);
                this.couponService = new Composer.CouponService(new Composer.CartService(new Composer.CartRepository(), this.eventHub), this.eventHub);
                this.isFirstLoad = true;
            }
            CouponController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.registerSubscriptions();
            };
            /**
             * Registers events on the eventHub.
             */
            CouponController.prototype.registerSubscriptions = function () {
                var _this = this;
                this.eventHub.subscribe('cartUpdated', function (eventInfo) {
                    var cart = eventInfo.data;
                    _this.render(_this.isFirstLoad || _.isEmpty(cart) || cart.IsCartEmpty ? 'CouponsSummary' : 'Coupons', cart);
                    _this.isFirstLoad = false;
                });
                this.eventHub.subscribe('couponUpdated', function (e) {
                    _this.onCouponUpdated(e.data);
                });
            };
            /**
             * Event triggered when adding a coupon.
             * @param {IControllerActionContext} actionContext - Event context.
             */
            CouponController.prototype.applyCoupon = function (actionContext) {
                actionContext.event.preventDefault();
                var formData = actionContext.elementContext.serializeObject();
                if (_.isEmpty(formData.couponCode)) {
                    console.log('The coupon code may not be null');
                    return;
                }
                var busy = this.asyncBusy({ elementContext: actionContext.elementContext, msDelay: 300 });
                this.couponService.addCoupon(formData.couponCode)
                    .done(function () { return busy.done(); });
            };
            /**
             * Event triggered when removing a coupon.
             * @param {IControllerActionContext} actionContext - Event context.
             */
            CouponController.prototype.removeCoupon = function (actionContext) {
                var couponCode = actionContext.elementContext.data('couponcode');
                if (_.isEmpty(couponCode)) {
                    console.log('The coupon code may not be null');
                    return;
                }
                var busy = this.asyncBusy({ elementContext: actionContext.elementContext });
                this.couponService.removeCoupon(couponCode.toString())
                    .done(function () { return busy.done(); });
            };
            /**
             * Event handler for coupon updated. Fires even if request fails.
             * @param {any} viewModel - ViewModel received by the request. May be undefined if the request failed.
             */
            CouponController.prototype.onCouponUpdated = function (viewModel) {
                var formElement = this.getCouponForm();
                var hasErrorMessage = (!viewModel) || _.some(viewModel.Coupons.Messages, function (m) { return m.Level === 'danger'; });
                if (!hasErrorMessage) {
                    formElement.trigger('reset');
                }
            };
            /**
             * Gets the coupon form handled by this Controller.
             * @return {JQuery} JQuery element matching the first form.
             */
            CouponController.prototype.getCouponForm = function () {
                var forms = $(this.context.container).find('form:first');
                return forms;
            };
            return CouponController;
        }(Orckestra.Composer.Controller));
        Composer.CouponController = CouponController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='./IGetOrderDetailsUrlRequest.ts' />
///<reference path='./IGuestOrderDetailsViewModel.ts' />

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Events/IEventHub.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/ComposerClient.ts' />
///<reference path='./IFindOrderService.ts' />
///<reference path='./IGetOrderDetailsUrlRequest.ts' />
///<reference path='./IGuestOrderDetailsViewModel.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var FindOrderService = (function () {
            function FindOrderService(eventHub) {
                this.eventHub = eventHub;
            }
            FindOrderService.prototype.getOrderDetailsUrl = function (req) {
                var _this = this;
                var promise = Composer.ComposerClient.post('/api/order/url', req)
                    .then(function (vm) {
                    _this.eventHub.publish('orderDetailsUrlUpdated', {
                        data: vm
                    });
                    return vm;
                });
                return promise;
            };
            return FindOrderService;
        }());
        Composer.FindOrderService = FindOrderService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/jqueryPlugins/ISerializeObjectJqueryPlugin.ts' />
///<reference path='./IFindOrderService.ts' />
///<reference path='./FindOrderService.ts' />
///<reference path='./IGetOrderDetailsUrlRequest.ts' />
///<reference path='./IGuestOrderDetailsViewModel.ts' />
///<reference path='./IFindMyOrderViewModel.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var FindMyOrderController = (function (_super) {
            __extends(FindMyOrderController, _super);
            function FindMyOrderController() {
                _super.apply(this, arguments);
            }
            FindMyOrderController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.registerFormsForValidation(this.context.container.find('form'));
                this.findOrderService = new Composer.FindOrderService(this.eventHub);
            };
            FindMyOrderController.prototype.getWindow = function () {
                return window;
            };
            FindMyOrderController.prototype.onFindMyOrder = function (actionContext) {
                var _this = this;
                actionContext.event.preventDefault();
                var busy = this.asyncBusy();
                var request = actionContext.elementContext.serializeObject();
                this.findOrderAsync(request)
                    .then(function (vm) {
                    _this.getWindow().location.href = vm.Url;
                })
                    .fail(function (reason) {
                    busy.done();
                    if (reason.status && reason.status === 404) {
                        _this.handleOrderNotFound(reason, request);
                    }
                    else {
                        console.error(reason);
                    }
                });
            };
            FindMyOrderController.prototype.findOrderAsync = function (request) {
                return this.findOrderService.getOrderDetailsUrl(request);
            };
            FindMyOrderController.prototype.handleOrderNotFound = function (reason, request) {
                var vm = {
                    Email: request.Email,
                    OrderNumber: request.OrderNumber,
                    OrderNotFound: true
                };
                this.render('FindMyOrder', vm);
            };
            return FindMyOrderController;
        }(Orckestra.Composer.Controller));
        Composer.FindMyOrderController = FindMyOrderController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../Typings/tsd.d.ts' />

///<reference path='../../Typings/tsd.d.ts' />
///<reference path='./IScheduledCallback.ts' />
///<reference path='./EventHub.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        /**
         * Class in charge of scheduling multiple calls to an event.
         * This class is a multiton. Please use the instance() method to get an instance.
         */
        var EventScheduler = (function () {
            /**
             * Constructor. Should be used for testing purposes and inside the multiton only.
             * @param eventName The name of the event to subscribe to.
             */
            function EventScheduler(eventName) {
                var _this = this;
                var instance = EventScheduler.instances[eventName];
                if (instance) {
                    throw new Error('Error: Instantiation failed: Use EventScheduler.instance(eventName: string) instead of new.');
                }
                this.eventName = eventName;
                this.onEventCallbacks = [];
                Composer.EventHub.instance().subscribe(this.eventName, function (e) { return _this.trigger(e.data); });
            }
            /**
             * Get an instance of the EventScheduler for a specific event.
             * @param eventName The name of the event to listen to.
             */
            EventScheduler.instance = function (eventName) {
                var instance = EventScheduler.instances[eventName];
                if (!instance) {
                    instance = new EventScheduler(eventName);
                    EventScheduler.instances[eventName] = instance;
                }
                return instance;
            };
            /**
             * Subscribes a callback to the EventScheduler.
             * @param callback Function to call when the event arises. Must return a promise.
             */
            EventScheduler.prototype.subscribe = function (callback) {
                this.onEventCallbacks.push(callback);
            };
            /**
             * Sets the callback method that will be invoked after all the others are done executing.
             * @param postEventCallback Function to call when all other callbacks have been executed.
             */
            EventScheduler.prototype.setPostEventCallback = function (postEventCallback) {
                this.postEventCallback = postEventCallback;
            };
            EventScheduler.prototype.trigger = function (data) {
                var _this = this;
                var promise = this.triggerCallbacks(data);
                promise
                    .then(function (data) { return _this.triggerPostEvent(data); })
                    .done(function () { return console.log("Event '" + _this.eventName + "' fulfilled by the Event Schedule successfully."); }, function (reason) { return _this.onError(reason); });
            };
            EventScheduler.prototype.triggerCallbacks = function (data) {
                var promise;
                if (_.isEmpty(this.onEventCallbacks)) {
                    promise = Q(data);
                }
                else {
                    var promises = _.map(this.onEventCallbacks, function (callback) { return callback(data); });
                    promise = Q.all(promises)
                        .then(function (values) {
                        return data;
                    });
                }
                return promise;
            };
            EventScheduler.prototype.triggerPostEvent = function (data) {
                var promise;
                if (this.postEventCallback) {
                    promise = this.postEventCallback(data);
                }
                else {
                    promise = Q(data);
                }
                return promise;
            };
            /**
             * Gets invoked when an error occurs while executing the promises chain.
             */
            EventScheduler.prototype.onError = function (reason) {
                console.error("An error occured while processing the event '" + this.eventName + "' with the EventScheduler.", reason);
            };
            EventScheduler.instances = {};
            return EventScheduler;
        }());
        Composer.EventScheduler = EventScheduler;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Events/EventScheduler.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Repositories/CartRepository.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Events/EventHub.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Events/IEventInformation.ts' />
///<reference path='../../../CartSummary/Source/Typescript/CartService.ts' />
///<reference path='../../../../Composer.MyAccount.UI/Common/Source/Typescript/MyAccountEvents.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var MiniCartController = (function (_super) {
            __extends(MiniCartController, _super);
            function MiniCartController() {
                _super.apply(this, arguments);
                this.cartService = new Composer.CartService(new Composer.CartRepository(), this.eventHub);
            }
            MiniCartController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.initializeMiniCartQuantity();
                this.registerSubscriptions();
            };
            MiniCartController.prototype.initializeMiniCartQuantity = function () {
                var _this = this;
                this.cartService.getCart()
                    .done(function (cart) {
                    if (!_.isEmpty(cart)) {
                        _this.renderCart(cart);
                    }
                });
            };
            MiniCartController.prototype.registerSubscriptions = function () {
                var _this = this;
                var loggedInScheduler = Composer.EventScheduler.instance(Composer.MyAccountEvents[Composer.MyAccountEvents.LoggedIn]);
                var loggedOutScheduler = Composer.EventScheduler.instance(Composer.MyAccountEvents[Composer.MyAccountEvents.LoggedOut]);
                this.eventHub.subscribe('cartUpdated', function (e) { return _this.onCartUpdated(e); });
                loggedOutScheduler.subscribe(function (e) { return _this.onRefreshUser(e); });
                loggedInScheduler.subscribe(function (e) { return _this.onRefreshUser(e); });
            };
            MiniCartController.prototype.onCartUpdated = function (e) {
                var cart = e.data;
                this.renderCart(cart);
            };
            MiniCartController.prototype.onRefreshUser = function (e) {
                return this.cartService.invalidateCache();
            };
            MiniCartController.prototype.renderCart = function (cart) {
                var viewModel = (_.isEmpty(cart) || cart.TotalQuantity === 0) ? {} : cart;
                this.render('MinicartQuantity', viewModel);
            };
            MiniCartController.prototype.onError = function (reason) {
                console.error("An error occured while rendering the cart with the MiniCartController.", reason);
            };
            return MiniCartController;
        }(Orckestra.Composer.Controller));
        Composer.MiniCartController = MiniCartController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Events/EventScheduler.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Repositories/CartRepository.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Events/EventHub.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Events/IEventInformation.ts' />
///<reference path='../../../../Composer.Analytics.UI/Analytics/Source/Typescript/GoogleAnalyticsPlugin.ts' />
///<reference path='../../../CartSummary/Source/Typescript/CartService.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var MiniCartSummaryController = (function (_super) {
            __extends(MiniCartSummaryController, _super);
            function MiniCartSummaryController() {
                _super.apply(this, arguments);
                this.cartService = new Composer.CartService(new Composer.CartRepository(), this.eventHub);
                this.cacheProvider = Composer.CacheProvider.instance();
            }
            MiniCartSummaryController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.initializeMiniCartSummary();
                this.registerSubscriptions();
            };
            MiniCartSummaryController.prototype.registerSubscriptions = function () {
                var _this = this;
                this.eventHub.subscribe('cartUpdated', function (e) {
                    _this.renderMiniCart(e.data);
                });
                this.eventHub.subscribe('lineItemAddedToCart', function (e) {
                    _this.displayMiniCart(e);
                });
                this.eventHub.subscribe('languageSwitched', function (e) {
                    _this.invalidateCart(e);
                });
            };
            MiniCartSummaryController.prototype.invalidateCart = function (e) {
                this.cartService.invalidateCache();
                this.initializeMiniCartSummary();
            };
            MiniCartSummaryController.prototype.displayMiniCart = function (e) {
                var miniCartContainer = $(this.context.container);
                var notificationTime = parseInt(miniCartContainer.data('notificationTime'), 10);
                var scrollToLineItemKey = e.data.ProductId + '-' + (e.data.VariantId || '');
                if (notificationTime > 0) {
                    miniCartContainer.addClass('displayMiniCart');
                    // Scroll to added item
                    $('.minicart-summary-products', miniCartContainer).stop().animate({
                        scrollTop: $('[data-lineitem-id="' + scrollToLineItemKey + '"]', miniCartContainer).position().top
                    }, 1000);
                    setTimeout(function () {
                        miniCartContainer.removeClass('displayMiniCart');
                    }, notificationTime);
                }
            };
            MiniCartSummaryController.prototype.onCloseMiniCart = function (e) {
                var miniCartContainer = $(this.context.container);
                miniCartContainer.addClass('hidden');
                setTimeout(function () {
                    miniCartContainer.removeClass('hidden');
                }, 500);
            };
            MiniCartSummaryController.prototype.onCheckout = function (actionContext) {
                // Set origin of checkout that we will be used in AnalyticsPlugin
                Composer.AnalyticsPlugin.setCheckoutOrigin('Mini Cart Checkout');
            };
            MiniCartSummaryController.prototype.initializeMiniCartSummary = function () {
                var _this = this;
                var busy = this.asyncBusy({ containerContext: this.context.container });
                this.cartService.getCart().done(function (cart) {
                    if (!_.isEmpty(cart)) {
                        _this.renderMiniCart(cart);
                    }
                    busy.done();
                });
            };
            MiniCartSummaryController.prototype.renderMiniCart = function (cart) {
                this.render('MinicartSummary', cart);
            };
            return MiniCartSummaryController;
        }(Orckestra.Composer.Controller));
        Composer.MiniCartSummaryController = MiniCartSummaryController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path="../../../CheckoutPayment/source/Typescript/ViewModels/IActivePaymentViewModel.ts" />



'use strict';

///<reference path='./ICreateVaultTokenOptions.ts' />
///<reference path='./ISetDefaultCustomerPaymentMethodViewModel.ts' />
///<reference path='./IMonerisAddVaultProfileViewModel.ts' />
///<reference path='../../../CheckoutPayment/source/Typescript/ViewModels/IPaymentMethodViewModel.ts' />
///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Mvc/ComposerClient.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var MonerisPaymentService = (function () {
            function MonerisPaymentService() {
            }
            /**
             * Adds a token from Moneris to the current payment.
             * @param  {ICreateVaultTokenOptions} request Request to add the Vault Token.
             * @return {Q.Promise<any>}                   Promise of the AJAX request.
             */
            MonerisPaymentService.prototype.addCreditCard = function (request) {
                return Composer.ComposerClient.post('/api/vaultprofile/addprofile', request);
            };
            MonerisPaymentService.prototype.setDefaultCustomerPaymentMethod = function (request) {
                return Composer.ComposerClient.put('/api/cart/setdefaultpaymentmethod', request);
            };
            MonerisPaymentService.prototype.removePaymentMethod = function (paymentMethodId, paymentProviderName) {
                return Composer.ComposerClient.remove('/api/payment/removemethod', {
                    PaymentMethodId: paymentMethodId,
                    PaymentProviderName: paymentProviderName
                });
            };
            return MonerisPaymentService;
        }());
        Composer.MonerisPaymentService = MonerisPaymentService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../MonerisPaymentService.ts' />
///<reference path='../../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../../Composer.Cart.UI/CheckoutPayment/Source/Typescript/ViewModels/IActivePaymentViewModel.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var BaseSpecializedMonerisCanadaPaymentProvider = (function () {
            function BaseSpecializedMonerisCanadaPaymentProvider(window, paymentService, eventHub) {
                this._window = window;
                this._paymentService = paymentService;
                this._eventHub = eventHub;
            }
            /**
             * Register event handlers for dom events
             */
            BaseSpecializedMonerisCanadaPaymentProvider.prototype.registerDomEvents = function () {
                // do nothing
            };
            /**
             * Unregister event handlers for dom events
             */
            BaseSpecializedMonerisCanadaPaymentProvider.prototype.unregisterDomEvents = function () {
                // do nothing
            };
            /**
             * Method called to get a promise for payment validation.
             * Returns a promise of boolean. The return boolean needs to be false for validation error,
             * or true if valid.
             * @param   {IActivePaymentViewModel}   The current active payment view model
             * @return  {Q.Promise<boolean>}        Promise that will be executed when we validate the payment control.
             */
            BaseSpecializedMonerisCanadaPaymentProvider.prototype.validatePayment = function (activePaymentVM) {
                return Q(true);
            };
            /**
             * Add the temporary token to the vault profile of the user
             * @param   {IActivePaymentViewModel}   The current active payment view model
             * @return  {Q.Promise<any>}            The object is the updated properties of the cart used in CheckoutService.updateCart()
             */
            BaseSpecializedMonerisCanadaPaymentProvider.prototype.addVaultProfileToken = function (activePaymentVM) {
                return Q({});
            };
            return BaseSpecializedMonerisCanadaPaymentProvider;
        }());
        Composer.BaseSpecializedMonerisCanadaPaymentProvider = BaseSpecializedMonerisCanadaPaymentProvider;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='BaseSpecializedMonerisCanadaPaymentProvider.ts' />
///<reference path='../MonerisPaymentService.ts' />
///<reference path='../IMonerisResponseData.ts' />
///<reference path='../../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../../Composer.UI/Source/Typescript/JQueryPlugins/ISerializeObjectJqueryPlugin.ts' />
///<reference path='../../../../../Composer.UI/Source/Typescript/ErrorHandling/ErrorHandler.ts' />
///<reference path='../../../../../Composer.Cart.UI/CheckoutPayment/Source/Typescript/ViewModels/IActivePaymentViewModel.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var CreditCardMonerisCanadaPaymentProvider = (function (_super) {
            __extends(CreditCardMonerisCanadaPaymentProvider, _super);
            function CreditCardMonerisCanadaPaymentProvider(window, paymentService, eventHub) {
                _super.call(this, window, paymentService, eventHub);
            }
            /**
             * Register event handlers for dom events
             */
            CreditCardMonerisCanadaPaymentProvider.prototype.registerDomEvents = function () {
                $(this._window).on('message.composer', this.handleMessageResponse.bind(this));
            };
            /**
             * Unregister event handlers for dom events
             */
            CreditCardMonerisCanadaPaymentProvider.prototype.unregisterDomEvents = function () {
                $(this._window).off('message.composer', this.handleMessageResponse);
            };
            /**
             * Method called to get a promise for payment validation.
             * Returns a promise of boolean. The return boolean needs to be false for validation error,
             * or true if valid.
             * @param   {IActivePaymentViewModel}   The current active payment view model
             * @return  {Q.Promise<boolean>}        Promise that will be executed when we validate the payment control.
             */
            CreditCardMonerisCanadaPaymentProvider.prototype.validatePayment = function (activePaymentVM) {
                var _this = this;
                return Q
                    .fcall(function () { return _this.collectAndValidateFormData(); })
                    .then(function (_) {
                    _this.hideAllMonerisErrors();
                    _this._validationDefer = Q.defer();
                    _this._validationDefer.promise
                        .then(function (monerisRes) {
                        _this._validationDefer = null;
                        if (!monerisRes.dataKey) {
                            throw new Error('Moneris did not return a dataKey.');
                        }
                        _this._monerisResponseData = monerisRes;
                        return true;
                    });
                    if (_this._monerisResponseData) {
                        _this._validationDefer.resolve(_this._monerisResponseData);
                    }
                    else {
                        _this.getMonerisIFrame().contentWindow.postMessage('', activePaymentVM.CapturePaymentUrl);
                    }
                    return _this._validationDefer.promise;
                });
            };
            CreditCardMonerisCanadaPaymentProvider.prototype.validateMonerisIFrame = function (vm) {
                var _this = this;
                var monerisFrame = this.getMonerisIFrame();
                var monerisContentWindow = monerisFrame.contentWindow;
                var promise;
                this.hideAllMonerisErrors();
                this._validationDefer = Q.defer();
                promise = this._validationDefer.promise
                    .then(function (monerisRes) {
                    _this._validationDefer = null;
                    if (!monerisRes.dataKey) {
                        throw new Error('Moneris did not return a dataKey.');
                    }
                    _this._monerisResponseData = monerisRes;
                    return true;
                });
                if (this._monerisResponseData) {
                    this._validationDefer.resolve(this._monerisResponseData);
                }
                else {
                    monerisContentWindow.postMessage('', vm.CapturePaymentUrl);
                }
                return this._validationDefer.promise;
            };
            /**
             * Add the temporary token to the vault profile of the user
             * @param   {IActivePaymentViewModel}   The current active payment view model
             * @return  {Q.Promise<any>}            The object is the updated properties of the cart used in CheckoutService.updateCart()
             */
            CreditCardMonerisCanadaPaymentProvider.prototype.addVaultProfileToken = function (activePaymentVM) {
                var _this = this;
                if (!activePaymentVM.ShouldCapturePayment) {
                    return Q({});
                }
                var formData = this.collectAndValidateFormData();
                var request = {
                    CardHolderName: formData.cardholder,
                    CreatePaymentProfile: formData.createPaymentProfile,
                    VaultTokenId: this._monerisResponseData.dataKey,
                    PaymentId: activePaymentVM.Id,
                    PaymentProviderName: activePaymentVM.ProviderName
                };
                console.log('Adding Moneris payment information.');
                return this._paymentService
                    .addCreditCard(request)
                    .then(function (result) {
                    if (!result.Success) {
                        _this._monerisResponseData = null;
                        throw new Error("Moneris: Could not add the credit card to the payment:\n                                                (" + result.ErrorCode + ") " + result.ErrorMessage);
                    }
                    activePaymentVM.ShouldCapturePayment = false;
                    return {};
                });
            };
            CreditCardMonerisCanadaPaymentProvider.prototype.handleMessageResponse = function (e) {
                var monerisEvent = e.originalEvent;
                var msgData = monerisEvent.data;
                var responseData = JSON.parse(monerisEvent.data);
                if (responseData.errorMessage && !_.isEmpty(responseData.errorMessage)) {
                    this.handleMonerisError(monerisEvent, responseData);
                }
                else {
                    this.handleMonerisSuccess(responseData);
                }
            };
            CreditCardMonerisCanadaPaymentProvider.prototype.handleMonerisSuccess = function (responseData) {
                if (!this._validationDefer) {
                    throw new Error('Received Moneris success response, but no validation defer was found.');
                }
                this._validationDefer.resolve(responseData);
            };
            CreditCardMonerisCanadaPaymentProvider.prototype.handleMonerisError = function (monerisEvent, responseData) {
                var errorMsg = monerisEvent.origin + " SENT (" + responseData.responseCode + ") " + responseData.dataKey + "\n            - " + responseData.errorMessage;
                this.showMonerisErrors(responseData.responseCode);
                if (this._validationDefer) {
                    this._validationDefer.reject(new Error(errorMsg));
                }
                else {
                    console.error(errorMsg, responseData);
                }
            };
            CreditCardMonerisCanadaPaymentProvider.prototype.showMonerisErrors = function (errorCodes) {
                var shouldShowGeneral = false;
                _.each(errorCodes, function (code) {
                    var errorNode = $("#monerisError" + code);
                    if (_.isEmpty(errorNode)) {
                        shouldShowGeneral = true;
                    }
                    errorNode.removeClass('hide');
                });
                if (shouldShowGeneral) {
                    $('#monerisErrorGeneral').removeClass('hide');
                }
            };
            CreditCardMonerisCanadaPaymentProvider.prototype.collectAndValidateFormData = function () {
                var form = this.getForm();
                var formData = this._formData || form.serializeObject();
                if (!formData.cardholder) {
                    throw new Error('The form does not contain a field named "cardholder". This is required.');
                }
                return formData;
            };
            CreditCardMonerisCanadaPaymentProvider.prototype.getMonerisIFrame = function () {
                var frames = $('#monerisFrame');
                if (_.isEmpty(frames)) {
                    throw new Error('Cannot find monerisFrame DOM element');
                }
                return frames[0];
            };
            CreditCardMonerisCanadaPaymentProvider.prototype.hideAllMonerisErrors = function () {
                this.getForm()
                    .find('.parsley-errors-list>.parsley-required')
                    .addClass('hide');
                $('#monerisErrorGeneral').addClass('hide');
            };
            /**
             * Gets the container for the Payment Provider.
             * @return {JQuery} jQuery object.
             */
            CreditCardMonerisCanadaPaymentProvider.prototype.getForm = function () {
                var form = $('#PaymentForm');
                if (!form || _.isEmpty(form)) {
                    throw new Error('Could not find the element PaymentForm on this page.');
                }
                return form;
            };
            return CreditCardMonerisCanadaPaymentProvider;
        }(Composer.BaseSpecializedMonerisCanadaPaymentProvider));
        Composer.CreditCardMonerisCanadaPaymentProvider = CreditCardMonerisCanadaPaymentProvider;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='BaseSpecializedMonerisCanadaPaymentProvider.ts' />
///<reference path='../MonerisPaymentService.ts' />
///<reference path='../../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../../Composer.UI/Source/Typescript/ErrorHandling/ErrorHandler.ts' />
///<reference path='../../../../../Composer.UI/Source/Typescript/UI/UIModal.ts' />
///<reference path='../../../../../Composer.Cart.UI/CheckoutPayment/Source/Typescript/ViewModels/IActivePaymentViewModel.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var SavedCreditCardMonerisCanadaPaymentProvider = (function (_super) {
            __extends(SavedCreditCardMonerisCanadaPaymentProvider, _super);
            function SavedCreditCardMonerisCanadaPaymentProvider(window, paymentService, eventHub) {
                _super.call(this, window, paymentService, eventHub);
                this._deleteModalElementSelector = '#confirmationModal';
                this._uiModal = new Composer.UIModal(window, this._deleteModalElementSelector, this.deleteCart, this);
            }
            /**
             * Register event handlers for dom events
             */
            SavedCreditCardMonerisCanadaPaymentProvider.prototype.registerDomEvents = function () {
                $(this._window.document).on('click', '.moneris--deletecard', this._uiModal.openModal);
            };
            /**
             * Unregister event handlers for dom events
             */
            SavedCreditCardMonerisCanadaPaymentProvider.prototype.unregisterDomEvents = function () {
                $(this._window.document).off('click', '.moneris--deletecard', this._uiModal.openModal);
            };
            /**
             * Method called to get a promise for payment validation.
             * Returns a promise of boolean. The return boolean needs to be false for validation error,
             * or true if valid.
             * @param   {IActivePaymentViewModel}   The current active payment view model
             * @return  {Q.Promise<boolean>}        Promise that will be executed when we validate the payment control.
             */
            SavedCreditCardMonerisCanadaPaymentProvider.prototype.validatePayment = function (activePaymentVM) {
                // Considering the credit card was already added we do not need to run additional validations
                return Q(true);
            };
            /**
             * Add the temporary token to the vault profile of the user
             * @param   {IActivePaymentViewModel}   The current active payment view model
             * @return  {Q.Promise<any>}            The object is the updated properties of the cart used in CheckoutService.updateCart()
             */
            SavedCreditCardMonerisCanadaPaymentProvider.prototype.addVaultProfileToken = function (activePaymentVM) {
                // no need to add the payment method to the vault
                return Q({});
            };
            SavedCreditCardMonerisCanadaPaymentProvider.prototype.deleteCart = function (event) {
                var _this = this;
                var element = $(event.target);
                var paymentMethodId = element.data('payment-id');
                var paymentProviderName = element.data('payment-provider');
                //TODO : To replace with async busy from controller when change inheritance with controller.
                this._busyHandler = new Composer.UIBusyHandle($(document), $(document), 0);
                // TODO: publish valid event
                return this._paymentService
                    .removePaymentMethod(paymentMethodId, paymentProviderName)
                    .then(function () { return _this._eventHub.publish('paymentMethodsUpdated', null); })
                    .fail(function (reason) { return Composer.ErrorHandler.instance().outputError(reason); })
                    .fin(function () {
                    _this.releaseBusyHandler();
                });
            };
            SavedCreditCardMonerisCanadaPaymentProvider.prototype.releaseBusyHandler = function () {
                if (this._busyHandler) {
                    this._busyHandler.done();
                    this._busyHandler = null;
                }
            };
            return SavedCreditCardMonerisCanadaPaymentProvider;
        }(Composer.BaseSpecializedMonerisCanadaPaymentProvider));
        Composer.SavedCreditCardMonerisCanadaPaymentProvider = SavedCreditCardMonerisCanadaPaymentProvider;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='./ICreateVaultTokenOptions.ts' />
///<reference path='./IMonerisResponseData.ts' />
///<reference path='./MonerisPaymentService.ts' />
///<reference path='./Providers/BaseSpecializedMonerisCanadaPaymentProvider.ts' />
///<reference path='./Providers/CreditCardMonerisCanadaPaymentProvider.ts' />
///<reference path='./Providers/SavedCreditCardMonerisCanadaPaymentProvider.ts' />
///<reference path='../../../CheckoutPayment/Source/Typescript/Providers/BaseCheckoutPaymentProvider.ts' />
///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Events/IEventHub.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/JQueryPlugins/ISerializeObjectJqueryPlugin.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var MonerisCanadaPaymentProvider = (function (_super) {
            __extends(MonerisCanadaPaymentProvider, _super);
            function MonerisCanadaPaymentProvider(window, providerName, eventHub) {
                _super.call(this, window, eventHub, 'MonerisCanadaPaymentProvider', providerName);
                this._monerisPaymentService = new Composer.MonerisPaymentService();
                this.registerSpecializedProviders();
                this.registerDomEvents();
            }
            Object.defineProperty(MonerisCanadaPaymentProvider.prototype, "providers", {
                get: function () {
                    return this._providers;
                },
                enumerable: true,
                configurable: true
            });
            /**
             * Method called to get a promise for payment validation.
             * Returns a promise of boolean. The return boolean needs to be false for validation error,
             * or true if valid.
             * @return {Q.Promise<boolean>} Promise that will be executed when we validate the payment control.
             */
            MonerisCanadaPaymentProvider.prototype.validatePayment = function (activePaymentVM) {
                return this.getProvider(activePaymentVM.PaymentMethodType).validatePayment(activePaymentVM);
            };
            MonerisCanadaPaymentProvider.prototype.submitPayment = function (activePaymentVM) {
                return this.getProvider(activePaymentVM.PaymentMethodType)
                    .addVaultProfileToken(activePaymentVM);
            };
            MonerisCanadaPaymentProvider.prototype.dispose = function () {
                this.unregisterDomEvents();
            };
            MonerisCanadaPaymentProvider.prototype.setDefaultCustomerPaymentMethod = function (activePaymentVM) {
                return this._monerisPaymentService
                    .setDefaultCustomerPaymentMethod({
                    PaymentMethodId: activePaymentVM.Id,
                    PaymentProviderName: activePaymentVM.ProviderName
                });
            };
            MonerisCanadaPaymentProvider.prototype.registerSpecializedProviders = function () {
                this._providers = {
                    'SavedCreditCard': new Composer.SavedCreditCardMonerisCanadaPaymentProvider(this.window, this._monerisPaymentService, this._eventHub),
                    'CreditCard': new Composer.CreditCardMonerisCanadaPaymentProvider(this.window, this._monerisPaymentService, this._eventHub)
                };
            };
            MonerisCanadaPaymentProvider.prototype.registerDomEvents = function () {
                _.forEach(this.providers, function (p) { return p.registerDomEvents(); });
            };
            MonerisCanadaPaymentProvider.prototype.unregisterDomEvents = function () {
                _.forEach(this.providers, function (p) { return p.unregisterDomEvents(); });
            };
            MonerisCanadaPaymentProvider.prototype.getProvider = function (providerName) {
                if (!this.providers[providerName]) {
                    throw new Error('Provider not found');
                }
                return this.providers[providerName];
            };
            return MonerisCanadaPaymentProvider;
        }(Composer.BaseCheckoutPaymentProvider));
        Composer.MonerisCanadaPaymentProvider = MonerisCanadaPaymentProvider;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Events/IEventHub.ts' />
///<reference path='../../../CheckoutPayment/Source/Typescript/ViewModels/IActivePaymentViewModel.ts' />
///<reference path='../../../CheckoutPayment/source/Typescript/Providers/BaseCheckoutPaymentProvider.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var OnSitePOSPaymentProvider = (function (_super) {
            __extends(OnSitePOSPaymentProvider, _super);
            function OnSitePOSPaymentProvider(window, providerName, eventHub) {
                _super.call(this, window, eventHub, 'OnSitePOSPaymentProvider', providerName);
            }
            /**
             * Method called to get a promise for payment validation.
             * Returns a promise of boolean. The return boolean needs to be false for validation error,
             * or true if valid.
             * @return {Q.Promise<boolean>} Promise that will be executed when we validate the payment control.
             */
            OnSitePOSPaymentProvider.prototype.validatePayment = function (activeVM) {
                return Q(true);
            };
            /**
             * Method called to get a promise when payment will submit.
             * @return {Q.Promise<any>} Promise that will be executed when to cart is about the be updated.
             */
            OnSitePOSPaymentProvider.prototype.submitPayment = function (activeVM) {
                return Q({});
            };
            return OnSitePOSPaymentProvider;
        }(Composer.BaseCheckoutPaymentProvider));
        Composer.OnSitePOSPaymentProvider = OnSitePOSPaymentProvider;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/JqueryPlugins/ISerializeObjectJqueryPlugin.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerContext.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var OrderDetailsController = (function (_super) {
            __extends(OrderDetailsController, _super);
            function OrderDetailsController() {
                _super.apply(this, arguments);
            }
            OrderDetailsController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
            };
            return OrderDetailsController;
        }(Composer.Controller));
        Composer.OrderDetailsController = OrderDetailsController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));



///<reference path='../../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../../Composer.UI/Source/Typescript/Mvc/ComposerClient.ts' />
///<reference path='../Parameters/IGetOrderParameters' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var OrderService = (function () {
            function OrderService() {
            }
            OrderService.prototype.getPastOrders = function (options) {
                if (options === void 0) { options = { page: 1 }; }
                return Composer.ComposerClient.post('/api/order/past-orders', options);
            };
            OrderService.prototype.getCurrentOrders = function (options) {
                if (options === void 0) { options = { page: 1 }; }
                return Composer.ComposerClient.post('/api/order/current-orders', options);
            };
            return OrderService;
        }());
        Composer.OrderService = OrderService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/JqueryPlugins/ISerializeObjectJqueryPlugin.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerContext.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
///<reference path='./Services/OrderService' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var CurrentOrdersController = (function (_super) {
            __extends(CurrentOrdersController, _super);
            function CurrentOrdersController() {
                _super.apply(this, arguments);
                this.orderService = new Composer.OrderService();
            }
            CurrentOrdersController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.getCurrentOrders();
            };
            CurrentOrdersController.prototype.getOrders = function (context) {
                var page = context.elementContext.data('page');
                context.event.preventDefault();
                this.getCurrentOrders({
                    page: page
                });
            };
            CurrentOrdersController.prototype.getCurrentOrders = function (param) {
                var _this = this;
                var busyHandle = this.asyncBusy();
                this.orderService.getCurrentOrders(param)
                    .done(function (viewModel) {
                    _this.render('CurrentOrders', viewModel);
                    if (!_.isEmpty(viewModel)) {
                        _this.render('OrderHistoryPagination', viewModel.Pagination);
                    }
                    busyHandle.done();
                }, function (reason) {
                    console.error(reason);
                    busyHandle.done();
                });
            };
            return CurrentOrdersController;
        }(Composer.Controller));
        Composer.CurrentOrdersController = CurrentOrdersController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/JqueryPlugins/ISerializeObjectJqueryPlugin.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerContext.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
///<reference path='./Services/OrderService' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var PastOrdersController = (function (_super) {
            __extends(PastOrdersController, _super);
            function PastOrdersController() {
                _super.apply(this, arguments);
                this.orderService = new Composer.OrderService();
            }
            PastOrdersController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.getPastOrders();
            };
            PastOrdersController.prototype.getOrders = function (context) {
                var page = context.elementContext.data('page');
                context.event.preventDefault();
                this.getPastOrders({ page: page });
            };
            PastOrdersController.prototype.getPastOrders = function (param) {
                var _this = this;
                var busyHandle = this.asyncBusy();
                this.orderService.getPastOrders(param)
                    .done(function (viewModel) {
                    _this.render('PastOrders', viewModel);
                    if (!_.isEmpty(viewModel)) {
                        _this.render('OrderHistoryPagination', viewModel.Pagination);
                    }
                    busyHandle.done();
                }, function (reason) {
                    console.error(reason);
                    busyHandle.done();
                });
            };
            return PastOrdersController;
        }(Composer.Controller));
        Composer.PastOrdersController = PastOrdersController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Events/EventHub.ts' />
///<reference path='../../../../Composer.Cart.UI/CartSummary/Source/Typescript/CartService.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var OrderSummaryService = (function () {
            function OrderSummaryService(cartService, eventHub) {
                if (!cartService) {
                    throw new Error('Error: cartService is required');
                }
                if (!eventHub) {
                    throw new Error('Error: eventHub is required');
                }
                this.cartService = cartService;
                this.eventHub = eventHub;
            }
            OrderSummaryService.prototype.setCheapestShippingMethodUsing = function (postalCode) {
                var _this = this;
                this.eventHub.publish('cartUpdating', { data: { PostalCode: postalCode } });
                return this.cartService.updateShippingMethodPostalCode(postalCode)
                    .then(function () { return _this.cartService.setCheapestShippingMethod(); })
                    .then(function () { return _this.cartService.getCart(); })
                    .then(function (cart) { return _this.eventHub.publish('cartUpdated', { data: cart }); })
                    .fail(function (reason) {
                    console.error('Error while updating the shipping method using the postal code', reason);
                    throw reason;
                });
            };
            OrderSummaryService.prototype.cleanCart = function () {
                return this.cartService.clean();
            };
            return OrderSummaryService;
        }());
        Composer.OrderSummaryService = OrderSummaryService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Repositories/CartRepository.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/JQueryPlugins/ISerializeObjectJqueryPlugin.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/ErrorHandling/ErrorHandler.ts' />
///<reference path='../../../../Composer.Analytics.UI/Analytics/Source/Typescript/GoogleAnalyticsPlugin.ts' />
///<reference path='../../../CartSummary/Source/Typescript/CartService.ts' />
///<reference path='OrderSummaryService.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var OrderSummaryController = (function (_super) {
            __extends(OrderSummaryController, _super);
            function OrderSummaryController() {
                _super.apply(this, arguments);
                this.cacheProvider = Composer.CacheProvider.instance();
                this.cartService = new Composer.CartService(new Composer.CartRepository(), this.eventHub);
                this.orderSummaryService = new Composer.OrderSummaryService(this.cartService, this.eventHub);
            }
            OrderSummaryController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.registerSubscriptions();
            };
            OrderSummaryController.prototype.registerSubscriptions = function () {
                var _this = this;
                this.eventHub.subscribe('cartUpdated', function (e) { return _this.render('OrderSummary', e.data); });
            };
            OrderSummaryController.prototype.openModal = function (actionContext) {
                var _this = this;
                this.postalCodeModal = $('#postalCodeModal');
                this.postalCodeInput = $('#postalCode');
                this.clearForm();
                //Due to how HTML5 defines its semantics, the autofocus HTML attribute has no effect in Bootstrap modals
                //http://getbootstrap.com/javascript/#modals
                this.postalCodeModal.on('shown.bs.modal', function () {
                    _this.postalCodeInput.focus();
                });
                this.postalCodeModal.modal('show');
            };
            OrderSummaryController.prototype.clearForm = function () {
                this.postalCodeInput.val('');
                this.render('EstimateShippingValidationForm', { PostalCodeMalformed: false, PostalCodeEmpty: false });
                return;
            };
            OrderSummaryController.prototype.closeModal = function (actionContext) {
                this.postalCodeModal.modal('hide');
                this.postalCodeModal.off('shown.bs.modal');
            };
            OrderSummaryController.prototype.estimateShipping = function (actionContext) {
                var _this = this;
                var formContext = actionContext.elementContext, formValues = formContext.serializeObject(), postalCode = formValues.postalCode.toUpperCase(), postalCodePattern = formContext.data('regex'), postalCodeRegexPattern = new RegExp(postalCodePattern.toString()), result = postalCodeRegexPattern.test(postalCode), busyHandle;
                actionContext.event.preventDefault();
                if (!result) {
                    if (postalCode === '') {
                        return this.render('EstimateShippingValidationForm', { PostalCodeEmpty: true });
                    }
                    else {
                        return this.render('EstimateShippingValidationForm', { PostalCodeMalformed: true, PostalCode: formValues.postalCode });
                    }
                }
                busyHandle = this.asyncBusy();
                this.orderSummaryService.setCheapestShippingMethodUsing(postalCode)
                    .then(function (data) {
                    _this.closeModal(actionContext);
                    return data;
                }, function (reason) {
                    Composer.ErrorHandler.instance().outputErrorFromCode('PostalCodeUpdateFailed');
                })
                    .fin(function () { return busyHandle.done(); });
            };
            OrderSummaryController.prototype.proceedToCheckout = function (actionContext) {
                var nextStepUrl = actionContext.elementContext.data('nextstepurl').toString();
                if (!nextStepUrl) {
                    throw 'No next step Url was defined.';
                }
                Composer.AnalyticsPlugin.setCheckoutOrigin('Checkout');
                var busy = this.asyncBusy();
                this.orderSummaryService.cleanCart().done(function () {
                    window.location.href = nextStepUrl;
                }, function (reason) {
                    console.error('Error while proceeding to Checkout', reason);
                    Composer.ErrorHandler.instance().outputErrorFromCode('ProceedToCheckoutFailed');
                    busy.done();
                });
            };
            return OrderSummaryController;
        }(Orckestra.Composer.Controller));
        Composer.OrderSummaryController = OrderSummaryController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
/// <reference path='../../../../Composer.UI/Source/Typescript/Cache/CacheError.ts' />
/// <reference path='../../../../Composer.UI/Source/Typescript/Cache/ICache.ts' />
/// <reference path='../../../../Composer.UI/Source/Typescript/Cache/ICachePolicy.ts' />
/// <reference path='../../../../Composer.UI/Source/Typescript/Mvc/ComposerClient.ts' />
/// <reference path='./IWishListRepository.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var WishListRepository = (function () {
            function WishListRepository() {
            }
            WishListRepository.prototype.getWishList = function () {
                return Composer.ComposerClient.get('/api/wishlist/getwishlist');
            };
            WishListRepository.prototype.getWishListSummary = function () {
                return Composer.ComposerClient.get('/api/wishlist/getwishlistsummary');
            };
            WishListRepository.prototype.addLineItem = function (productId, variantId, quantity) {
                if (!productId) {
                    throw new Error('The product id is required');
                }
                if (quantity <= 0) {
                    throw new Error('The quantity must be greater than zero');
                }
                var data = {
                    ProductId: productId,
                    VariantId: variantId,
                    Quantity: quantity
                };
                return Composer.ComposerClient.post('/api/wishlist/lineitem', data);
            };
            WishListRepository.prototype.deleteLineItem = function (lineItemId) {
                if (!lineItemId) {
                    throw new Error('The line item id is required');
                }
                var data = {
                    LineItemId: lineItemId
                };
                return Composer.ComposerClient.remove('/api/wishlist/lineitem', data);
            };
            return WishListRepository;
        }());
        Composer.WishListRepository = WishListRepository;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Events/EventScheduler.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/jqueryPlugins/ISerializeObjectJqueryPlugin.ts' />
///<reference path='../../../Common/Source/Typescript/MyAccountEvents.ts' />
///<reference path='../../../Common/Source/Typescript/MembershipService.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var AccountHeaderController = (function (_super) {
            __extends(AccountHeaderController, _super);
            function AccountHeaderController() {
                _super.apply(this, arguments);
                this.membershipService = new Composer.MembershipService(new Composer.MembershipRepository());
            }
            AccountHeaderController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.registerSubscriptions();
            };
            AccountHeaderController.prototype.registerSubscriptions = function () {
                var _this = this;
                var scheduler = Composer.EventScheduler.instance(Composer.MyAccountEvents[Composer.MyAccountEvents.LoggedOut]);
                scheduler.setPostEventCallback(function (data) { return _this.onLoggedOut(data); });
            };
            AccountHeaderController.prototype.onLoggedOut = function (data) {
                var promise = Q.fcall(function () {
                    var newLocation = decodeURIComponent(data.ReturnUrl) || window.location.href;
                    window.location.replace(newLocation);
                });
                return promise;
            };
            AccountHeaderController.prototype.fullLogout = function (actionContext) {
                var _this = this;
                var returnUrlQueryString = 'ReturnUrl=';
                var returnUrl = '';
                actionContext.event.preventDefault();
                if (window.location.href.indexOf(returnUrlQueryString) > -1) {
                    returnUrl = window.location.href.substring(window.location.href.indexOf(returnUrlQueryString)
                        + returnUrlQueryString.length);
                }
                var busy = this.asyncBusy({ elementContext: actionContext.elementContext });
                this.membershipService.logout(returnUrl, false)
                    .then(function (result) { return _this.eventHub.publish(Composer.MyAccountEvents[Composer.MyAccountEvents.LoggedOut], { data: result }); })
                    .fin(function () { return busy.done(); })
                    .done();
            };
            return AccountHeaderController;
        }(Orckestra.Composer.Controller));
        Composer.AccountHeaderController = AccountHeaderController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/jqueryPlugins/ISerializeObjectJqueryPlugin.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var MyAccountController = (function (_super) {
            __extends(MyAccountController, _super);
            function MyAccountController() {
                _super.apply(this, arguments);
            }
            MyAccountController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
            };
            MyAccountController.prototype.getFormData = function (actionContext) {
                return actionContext.elementContext.serializeObject();
            };
            MyAccountController.prototype.renderFormErrorMessages = function (reason) {
                this.render('FormErrorMessages', reason);
                this.context.container.find('input[type="password"]').val('');
                this.registerFormsForValidation(this.context.container.find('form'), {
                    serverValidationContainer: '[data-templateid="FormErrorMessages"]'
                });
            };
            return MyAccountController;
        }(Orckestra.Composer.Controller));
        Composer.MyAccountController = MyAccountController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/jqueryPlugins/ISerializeObjectJqueryPlugin.ts' />
///<reference path='../../../Common/Source/Typescript/CustomerService.ts' />
///<reference path='../../../Common/Source/Typescript/MyAccountEvents.ts' />
///<reference path='../../../Common/Source/Typescript/MyAccountStatus.ts' />
///<reference path='../../../MyAccount/Source/Typescript/MyAccountController.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/UI/UIModal.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        //TODO refactor modal : create a generic modal service
        var AddressListController = (function (_super) {
            __extends(AddressListController, _super);
            function AddressListController() {
                _super.apply(this, arguments);
                this.deleteModalElementSelector = '#confirmationModal';
                this.customerService = new Composer.CustomerService(new Composer.CustomerRepository());
            }
            AddressListController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.uiModal = new Composer.UIModal(window, this.deleteModalElementSelector, this.deleteAddress, this);
                this.registerSubscriptions();
            };
            AddressListController.prototype.registerSubscriptions = function () {
                var _this = this;
                this.eventHub.subscribe(Composer.MyAccountEvents[Composer.MyAccountEvents.AddressDeleted], function (e) { return _this.onAddressDeleted(e); });
            };
            AddressListController.prototype.onAddressDeleted = function (e) {
                var result = e.data;
                var $container = result.$container;
                $container.remove();
            };
            /**
            * Requires the element in action context to have a data-address-id.
            */
            AddressListController.prototype.setDefaultAddress = function (actionContext) {
                var $addressListItem = $(actionContext.elementContext).closest('[data-address-id]');
                var addressId = $addressListItem.data('address-id');
                var busy = this.asyncBusy({ elementContext: actionContext.elementContext, containerContext: $addressListItem });
                this.customerService.setDefaultAddress(addressId.toString(), '')
                    .then(function (result) { return location.reload(); }, function (reason) { return console.error(reason); })
                    .fin(function () { return busy.done(); })
                    .done();
            };
            /**
            * Requires the element in action context to have a data-address-id.
            */
            AddressListController.prototype.deleteAddress = function (event) {
                var _this = this;
                var element = $(event.target);
                var $addressListItem = element.closest('[data-address-id]');
                var addressId = $addressListItem.data('address-id');
                var busy = this.asyncBusy({ elementContext: element, containerContext: $addressListItem });
                this.customerService.deleteAddress(addressId, '')
                    .then(function (result) { return _this.onDeleteAddressFulfilled(result, $addressListItem); }, function (reason) { return console.error(reason); })
                    .fin(function () { return busy.done(); })
                    .done();
            };
            AddressListController.prototype.onDeleteAddressFulfilled = function (result, $addressListItem) {
                var data = {
                    result: result,
                    $container: $addressListItem
                };
                this.eventHub.publish(Composer.MyAccountEvents[Composer.MyAccountEvents.AddressDeleted], { data: data });
            };
            AddressListController.prototype.deleteAddressConfirm = function (actionContext) {
                this.uiModal.openModal(actionContext.event);
            };
            return AddressListController;
        }(Orckestra.Composer.MyAccountController));
        Composer.AddressListController = AddressListController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
///<reference path='../../../Common/Source/Typescript/MembershipService.ts' />
///<reference path='../../../Common/Source/Typescript/MyAccountEvents.ts' />
///<reference path='../../../MyAccount/Source/Typescript/MyAccountController.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var ChangePasswordController = (function (_super) {
            __extends(ChangePasswordController, _super);
            function ChangePasswordController() {
                _super.apply(this, arguments);
                this.membershipService = new Composer.MembershipService(new Composer.MembershipRepository());
            }
            ChangePasswordController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.registerSubscriptions();
            };
            ChangePasswordController.prototype.registerSubscriptions = function () {
                var _this = this;
                this.registerFormsForValidation(this.context.container.find('form'));
                this.eventHub.subscribe(Composer.MyAccountEvents[Composer.MyAccountEvents.PasswordChanged], function (e) { return _this.onPasswordChanged(e); });
            };
            ChangePasswordController.prototype.onPasswordChanged = function (e) {
                var result = e.data;
                if (result.ReturnUrl) {
                    window.location.replace(decodeURIComponent(result.ReturnUrl));
                }
                else {
                    this.render('ChangePassword', result);
                    this.registerFormsForValidation(this.context.container.find('form'), {
                        serverValidationContainer: '[data-templateid="ChangePasswordSuccessful"]'
                    });
                }
            };
            /**
             * Event triggered when submitting the change password form.
             * @param {IControllerActionContext} actionContext - Event context.
             */
            ChangePasswordController.prototype.changePassword = function (actionContext) {
                var _this = this;
                actionContext.event.preventDefault();
                var formData = this.getFormData(actionContext);
                var returnUrlQueryString = 'ReturnUrl=';
                var returnUrl = '';
                if (window.location.href.indexOf(returnUrlQueryString) > -1) {
                    returnUrl = window.location.href.substring(window.location.href.indexOf(returnUrlQueryString)
                        + returnUrlQueryString.length);
                }
                var busy = this.asyncBusy({ elementContext: actionContext.elementContext });
                this.membershipService.changePassword(formData, returnUrl)
                    .then(function (result) { return _this.onChangePasswordFulfilled(result); }, function (reason) { return _this.renderFormErrorMessages(reason); })
                    .fin(function () { return busy.done(); })
                    .done();
            };
            ChangePasswordController.prototype.onChangePasswordFulfilled = function (result) {
                this.eventHub.publish(Composer.MyAccountEvents[Composer.MyAccountEvents.PasswordChanged], { data: result });
            };
            return ChangePasswordController;
        }(Orckestra.Composer.MyAccountController));
        Composer.ChangePasswordController = ChangePasswordController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        Composer.urlHelper = {
            getURLParameter: function (url, name) {
                return decodeURIComponent((new RegExp('[?|&]' + name
                    + '=' + '([^&;]+?)(&|#|;|$)').exec(url) || [, ''])[1].replace(/\+/g, '%20')) || null;
            }
        };
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Utils/UrlHelper.ts' />
///<reference path='../../../Common/Source/Typescript/MembershipService.ts' />
///<reference path='../../../Common/Source/Typescript/MyAccountEvents.ts' />
///<reference path='../../../Common/Source/Typescript/MyAccountStatus.ts' />
///<reference path='../../../MyAccount/Source/Typescript/MyAccountController.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var CreateAccountController = (function (_super) {
            __extends(CreateAccountController, _super);
            function CreateAccountController() {
                _super.apply(this, arguments);
                this.membershipService = new Composer.MembershipService(new Composer.MembershipRepository());
            }
            CreateAccountController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.registerSubscriptions();
            };
            CreateAccountController.prototype.registerSubscriptions = function () {
                var _this = this;
                this.registerFormsForValidation(this.context.container.find('form'));
                this.eventHub.subscribe(Composer.MyAccountEvents[Composer.MyAccountEvents.AccountCreated], function (e) { return _this.onAccountCreated(e); });
            };
            CreateAccountController.prototype.onAccountCreated = function (e) {
                var result = e.data;
                if (result.ReturnUrl) {
                    window.location.replace(decodeURIComponent(result.ReturnUrl));
                }
                else {
                    this.render('CreateAccount', result);
                }
            };
            CreateAccountController.prototype.createAccount = function (actionContext) {
                var _this = this;
                actionContext.event.preventDefault();
                var formData = this.getFormData(actionContext);
                var returnUrlQueryString = 'ReturnUrl=';
                var returnUrl = '';
                if (window.location.href.indexOf(returnUrlQueryString) > -1) {
                    returnUrl = Composer.urlHelper.getURLParameter(location.search, 'ReturnUrl');
                }
                var busy = this.asyncBusy({ elementContext: actionContext.elementContext });
                this.membershipService.register(formData, returnUrl)
                    .then(function (result) { return _this.onRegisterFulfilled(result); }, function (reason) { return _this.renderFormErrorMessages(reason); })
                    .fin(function () { return busy.done(); })
                    .done();
            };
            CreateAccountController.prototype.onRegisterFulfilled = function (result) {
                this.eventHub.publish(Composer.MyAccountEvents[Composer.MyAccountEvents.AccountCreated], { data: result });
                if (result.Status === Composer.MyAccountStatus[Composer.MyAccountStatus.Success]) {
                    this.eventHub.publish(Composer.MyAccountEvents[Composer.MyAccountEvents.LoggedIn], { data: result });
                }
            };
            return CreateAccountController;
        }(Orckestra.Composer.MyAccountController));
        Composer.CreateAccountController = CreateAccountController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/jqueryPlugins/ISerializeObjectJqueryPlugin.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Utils/UrlHelper.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/JQueryPlugins/IParsleyJqueryPlugin.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Validation/IParsley.ts' />
///<reference path='../../../Common/Source/Typescript/CustomerService.ts' />
///<reference path='../../../Common/Source/Typescript/MyAccountEvents.ts' />
///<reference path='../../../MyAccount/Source/Typescript/MyAccountController.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var EditAddressController = (function (_super) {
            __extends(EditAddressController, _super);
            function EditAddressController() {
                _super.apply(this, arguments);
                this.customerService = new Composer.CustomerService(new Composer.CustomerRepository());
            }
            EditAddressController.prototype.initialize = function () {
                var _this = this;
                _super.prototype.initialize.call(this);
                this.registerSubscriptions();
                var busy = this.asyncBusy({ msDelay: 300, loadingIndicatorSelector: '.loading-indicator-regions' });
                Composer.ComposerClient.get('/api/address/regions')
                    .then(function (regions) { return _this.rebuildRegionSelector(regions); })
                    .done(function () { return busy.done(); });
            };
            EditAddressController.prototype.registerSubscriptions = function () {
                var _this = this;
                this.registerFormsForValidation(this.context.container.find('form'));
                this.eventHub.subscribe(Composer.MyAccountEvents[Composer.MyAccountEvents.AddressCreated], function (e) { return _this.onAddressCreatedOrUpdated(e); });
                this.eventHub.subscribe(Composer.MyAccountEvents[Composer.MyAccountEvents.AddressUpdated], function (e) { return _this.onAddressCreatedOrUpdated(e); });
            };
            EditAddressController.prototype.onAddressCreatedOrUpdated = function (e) {
                var result = e.data;
                if (result.ReturnUrl) {
                    window.location.replace(decodeURIComponent(result.ReturnUrl));
                }
                else {
                    this.render('EditAddress', result);
                    this.registerFormsForValidation(this.context.container.find('form'), {
                        serverValidationContainer: '[data-templateid="FormErrorMessages"]'
                    });
                }
            };
            /**
             * Rerender the region selector, keeping the currently selected value
             */
            EditAddressController.prototype.rebuildRegionSelector = function (regions) {
                var selectedRegion = this.context.container.find('[data-templateid="AddressRegionPicker"]').val();
                this.render('AddressRegionPicker', { Regions: regions, SelectedRegion: selectedRegion });
            };
            EditAddressController.prototype.adjustPostalCode = function (actionContext) {
                actionContext.elementContext.val(actionContext.elementContext.val().toUpperCase());
                _.all(this._formInstances, function (formInstance) { return formInstance.validate('shipping-based-on', true); });
            };
            EditAddressController.prototype.createAddress = function (actionContext) {
                var _this = this;
                actionContext.event.preventDefault();
                var formData = this.getFormData(actionContext);
                var returnUrlQueryString = 'ReturnUrl=';
                var returnUrl = '';
                if (window.location.href.indexOf(returnUrlQueryString) > -1) {
                    returnUrl = Composer.urlHelper.getURLParameter(location.search, 'ReturnUrl');
                }
                var busy = this.asyncBusy({ elementContext: actionContext.elementContext });
                this.customerService.createAddress(formData, returnUrl)
                    .then(function (result) { return _this.onCreateAddressFulfilled(result); }, function (reason) { return _this.renderFormErrorMessages(reason); })
                    .fin(function () { return busy.done(); })
                    .done();
            };
            EditAddressController.prototype.onCreateAddressFulfilled = function (result) {
                this.eventHub.publish(Composer.MyAccountEvents[Composer.MyAccountEvents.AddressCreated], { data: result });
            };
            EditAddressController.prototype.updateAddress = function (actionContext) {
                var _this = this;
                actionContext.event.preventDefault();
                var formData = this.getFormData(actionContext);
                var addressId = this.context.container.find('[data-address-id]').data('address-id').toString();
                var returnUrlQueryString = 'ReturnUrl=';
                var returnUrl = '';
                if (window.location.href.indexOf(returnUrlQueryString) > -1) {
                    returnUrl = Composer.urlHelper.getURLParameter(location.search, 'ReturnUrl');
                }
                var busy = this.asyncBusy({ elementContext: actionContext.elementContext });
                this.customerService.updateAddress(formData, addressId, returnUrl)
                    .then(function (result) { return _this.onUpdateAddressFulfilled(result); }, function (reason) { return _this.renderFormErrorMessages(reason); })
                    .fin(function () { return busy.done(); })
                    .done();
            };
            EditAddressController.prototype.onUpdateAddressFulfilled = function (result) {
                this.eventHub.publish(Composer.MyAccountEvents[Composer.MyAccountEvents.AddressUpdated], { data: result });
            };
            return EditAddressController;
        }(Orckestra.Composer.MyAccountController));
        Composer.EditAddressController = EditAddressController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
///<reference path='../../../Common/Source/Typescript/MembershipService.ts' />
///<reference path='../../../Common/Source/Typescript/MyAccountEvents.ts' />
///<reference path='../../../Common/Source/Typescript/MyAccountStatus.ts' />
///<reference path='../../../MyAccount/Source/Typescript/MyAccountController.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var ForgotPasswordController = (function (_super) {
            __extends(ForgotPasswordController, _super);
            function ForgotPasswordController() {
                _super.apply(this, arguments);
                this.membershipService = new Composer.MembershipService(new Composer.MembershipRepository());
            }
            ForgotPasswordController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.registerSubscriptions();
            };
            ForgotPasswordController.prototype.registerSubscriptions = function () {
                var _this = this;
                this.registerFormsForValidation(this.context.container.find('form'));
                this.eventHub.subscribe(Composer.MyAccountEvents[Composer.MyAccountEvents.ForgotPasswordInstructionSent], function (e) { return _this.onForgotPasswordInstructionSent(e); });
            };
            ForgotPasswordController.prototype.onForgotPasswordInstructionSent = function (e) {
                var result = e.data;
                if (result.ReturnUrl) {
                    window.location.replace(decodeURIComponent(result.ReturnUrl));
                }
                else {
                    this.render('ForgotPassword', result);
                }
            };
            /**
             * Event triggered when submitting the forgot password form.
             * @param {IControllerActionContext} actionContext - Event context.
             */
            ForgotPasswordController.prototype.forgotPassword = function (actionContext) {
                var _this = this;
                actionContext.event.preventDefault();
                var formData = this.getFormData(actionContext);
                var busy = this.asyncBusy({ elementContext: actionContext.elementContext });
                this.membershipService.forgotPassword(formData)
                    .then(function (result) { return _this.onForgotPasswordFulfilled(result); }, function (reason) { return _this.renderFormErrorMessages(reason); })
                    .fin(function () { return busy.done(); })
                    .done();
            };
            ForgotPasswordController.prototype.onForgotPasswordFulfilled = function (result) {
                this.eventHub.publish(Composer.MyAccountEvents[Composer.MyAccountEvents.ForgotPasswordInstructionSent], { data: result });
            };
            return ForgotPasswordController;
        }(Orckestra.Composer.MyAccountController));
        Composer.ForgotPasswordController = ForgotPasswordController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/jqueryPlugins/ISerializeObjectJqueryPlugin.ts' />
///<reference path='../../../Common/Source/Typescript/MembershipService.ts' />
///<reference path='../../../Common/Source/Typescript/MyAccountEvents.ts' />
///<reference path='../../../MyAccount/Source/Typescript/MyAccountController.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var NewPasswordController = (function (_super) {
            __extends(NewPasswordController, _super);
            function NewPasswordController() {
                _super.apply(this, arguments);
                this.membershipService = new Composer.MembershipService(new Composer.MembershipRepository());
            }
            NewPasswordController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.registerSubscriptions();
            };
            NewPasswordController.prototype.registerSubscriptions = function () {
                var _this = this;
                this.registerFormsForValidation(this.context.container.find('form'));
                this.eventHub.subscribe(Composer.MyAccountEvents[Composer.MyAccountEvents.PasswordChanged], function (e) { return _this.onPasswordChanged(e); });
            };
            NewPasswordController.prototype.onPasswordChanged = function (e) {
                var result = e.data;
                if (result.ReturnUrl) {
                    window.location.replace(decodeURIComponent(result.ReturnUrl));
                }
                else {
                    this.render('NewPassword', result);
                }
            };
            /**
             * Event triggered when submitting the new password form.
             * @param {IControllerActionContext} actionContext - Event context.
             */
            NewPasswordController.prototype.newPassword = function (actionContext) {
                var _this = this;
                actionContext.event.preventDefault();
                var formData = this.getFormData(actionContext);
                var returnUrlQueryString = 'ReturnUrl=';
                var ticketQueryString = 'ticket=';
                var returnUrl = '';
                var ticket = '';
                if (window.location.href.indexOf(returnUrlQueryString) > -1) {
                    returnUrl = window.location.href.substring(window.location.href.indexOf(returnUrlQueryString)
                        + returnUrlQueryString.length);
                }
                if (window.location.href.indexOf(ticketQueryString) > -1) {
                    ticket = window.location.href.substring(window.location.href.indexOf(ticketQueryString)
                        + ticketQueryString.length);
                }
                var busy = this.asyncBusy({ elementContext: actionContext.elementContext });
                this.membershipService.resetPassword(formData, ticket, returnUrl)
                    .then(function (result) { return _this.onResetPasswordFulfilled(result); }, function (reason) { return _this.renderFormErrorMessages(reason); })
                    .fin(function () { return busy.done(); })
                    .done();
            };
            NewPasswordController.prototype.onResetPasswordFulfilled = function (result) {
                this.eventHub.publish(Composer.MyAccountEvents[Composer.MyAccountEvents.PasswordChanged], { data: result });
            };
            return NewPasswordController;
        }(Orckestra.Composer.MyAccountController));
        Composer.NewPasswordController = NewPasswordController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Events/EventScheduler.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Cache/CacheProvider.ts' />
///<reference path='../../../Common/Source/Typescript/MembershipService.ts' />
///<reference path='../../../Common/Source/Typescript/MyAccountEvents.ts' />
///<reference path='../../../Common/Source/Typescript/MyAccountStatus.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        /**
         * Controller for the Coupons section.
         */
        var ReturningCustomerController = (function (_super) {
            __extends(ReturningCustomerController, _super);
            function ReturningCustomerController() {
                _super.apply(this, arguments);
                this.membershipService = new Composer.MembershipService(new Composer.MembershipRepository());
                this.cacheProvider = Composer.CacheProvider.instance();
            }
            ReturningCustomerController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.registerSubscriptions();
            };
            ReturningCustomerController.prototype.registerSubscriptions = function () {
                var _this = this;
                this.registerFormsForValidation(this.context.container.find('form'));
                var scheduler = Composer.EventScheduler.instance(Composer.MyAccountEvents[Composer.MyAccountEvents.LoggedIn]);
                scheduler.setPostEventCallback(function (data) { return _this.onLoggedIn(data); });
            };
            ReturningCustomerController.prototype.onLoggedIn = function (data) {
                var _this = this;
                var promise = Q.fcall(function () {
                    if (data.ReturnUrl) {
                        window.location.replace(decodeURIComponent(data.ReturnUrl));
                    }
                    else {
                        _this.render('ReturningCustomer', data);
                        _this.registerFormsForValidation(_this.context.container.find('form'), {
                            serverValidationContainer: '[data-templateid="ReturningCustomerFormsServerValidations"]'
                        });
                    }
                });
                return promise;
            };
            /**
             * Event triggered when submitting the login form.
             * @param {IControllerActionContext} actionContext - Event context.
             */
            ReturningCustomerController.prototype.login = function (actionContext) {
                var _this = this;
                actionContext.event.preventDefault();
                var busy = this.asyncBusy();
                this.loginImpl(actionContext)
                    .then(function (result) { return _this.onLoginFulfilled(result, busy); })
                    .fail(function (reason) { return _this.onLoginRejected(reason, busy); })
                    .done();
            };
            ReturningCustomerController.prototype.loginImpl = function (actionContext) {
                var formData = actionContext.elementContext.serializeObject();
                var href = window.location.href;
                var returnUrlKey = 'ReturnUrl=';
                var returnUrl = href.indexOf(returnUrlKey) > -1 ? href.substring(href.indexOf(returnUrlKey) + returnUrlKey.length) : '';
                return this.membershipService.login(formData, returnUrl);
            };
            ReturningCustomerController.prototype.onLoginFulfilled = function (result, busy) {
                if (result.Status === Composer.MyAccountStatus[Composer.MyAccountStatus.Success]) {
                    this.eventHub.publish(Composer.MyAccountEvents[Composer.MyAccountEvents.LoggedIn], { data: result });
                    this.cacheProvider.defaultCache.set('customerId', null).done();
                }
                else {
                    this.renderFailedForm(result.Status);
                    busy.done();
                }
            };
            ReturningCustomerController.prototype.onLoginRejected = function (reason, busy) {
                var errorCode = Composer.MyAccountStatus[Composer.MyAccountStatus.AjaxFailed];
                if (reason && reason.Errors && reason.Errors[0] && reason.Errors[0].ErrorCode) {
                    errorCode = reason.Errors[0].ErrorCode;
                }
                this.renderFailedForm(errorCode);
                busy.done();
            };
            /**
             * Render the template for message failures
             * Register Format validation to hide those server message on client interaction
             * Reset potentially unsafe fields
             */
            ReturningCustomerController.prototype.renderFailedForm = function (status) {
                this.render('ReturningCustomerFormsServerValidations', { Status: status });
                this.context.container.find('input[type="password"]').val('');
                this.registerFormsForValidation(this.context.container.find('form'), {
                    serverValidationContainer: '[data-templateid="ReturningCustomerFormsServerValidations"]'
                });
            };
            return ReturningCustomerController;
        }(Orckestra.Composer.Controller));
        Composer.ReturningCustomerController = ReturningCustomerController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
/// <reference path='./../Mvc/ComposerClient.ts' />
/// <reference path='./ISignInHeaderRepository.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var SignInHeaderRepository = (function () {
            function SignInHeaderRepository() {
            }
            SignInHeaderRepository.prototype.getSignInHeader = function (param) {
                return Composer.ComposerClient.get('/api/membership/signin');
            };
            return SignInHeaderRepository;
        }());
        Composer.SignInHeaderRepository = SignInHeaderRepository;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Repositories/SignInHeaderRepository.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Cache/CacheProvider.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var SignInHeaderService = (function () {
            function SignInHeaderService(signInHeaderRepository) {
                this.cacheKey = 'SignInHeaderViewModel';
                this.cachePolicy = { slidingExpiration: 300 }; // 5min
                if (!signInHeaderRepository) {
                    throw new Error('Error: signInHeaderRepository is required');
                }
                this.cacheProvider = Composer.CacheProvider.instance();
                this.signInHeaderRepository = signInHeaderRepository;
            }
            SignInHeaderService.prototype.getSignInHeader = function (param) {
                var _this = this;
                return this.getSignInHeaderFromCache(param)
                    .fail(function (reason) {
                    if (_this.canHandle(reason)) {
                        return _this.getFreshSignInHeader(param);
                    }
                    throw reason;
                });
            };
            SignInHeaderService.prototype.canHandle = function (reason) {
                return reason === Composer.CacheError.Expired || reason === Composer.CacheError.NotFound;
            };
            SignInHeaderService.prototype.getFreshSignInHeader = function (param) {
                var _this = this;
                return this.signInHeaderRepository.getSignInHeader(param)
                    .then(function (cart) { return _this.setSignInHeaderToCache(param, cart); });
            };
            SignInHeaderService.prototype.buildSignedInCacheKey = function (param) {
                return this.cacheKey + '.' + param.cultureInfo + '.' + param.isAuthenticated + '.' + param.encryptedCustomerId;
            };
            SignInHeaderService.prototype.invalidateCache = function () {
                return this.cacheProvider.customCache.fullClear();
            };
            SignInHeaderService.prototype.getSignInHeaderFromCache = function (param) {
                var composedKey = this.buildSignedInCacheKey(param);
                return this.cacheProvider.customCache.get(composedKey);
            };
            SignInHeaderService.prototype.setSignInHeaderToCache = function (param, cart) {
                var composedKey = this.buildSignedInCacheKey(param);
                return this.cacheProvider.customCache.set(composedKey, cart, this.cachePolicy);
            };
            return SignInHeaderService;
        }());
        Composer.SignInHeaderService = SignInHeaderService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Events/EventScheduler.ts' />
///<reference path='../../../Common/Source/Typescript/MyAccountEvents.ts' />
///<reference path='./SignInHeaderService.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var SignInHeaderController = (function (_super) {
            __extends(SignInHeaderController, _super);
            function SignInHeaderController() {
                _super.apply(this, arguments);
                this.signInHeaderService = new Composer.SignInHeaderService(new Composer.SignInHeaderRepository());
            }
            SignInHeaderController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.initializeSignInHeader();
                this.registerSubscriptions();
            };
            SignInHeaderController.prototype.initializeSignInHeader = function () {
                var _this = this;
                var cultureInfo = $('html').attr('lang');
                var param = { cultureInfo: cultureInfo };
                this.signInHeaderService.getSignInHeader(param)
                    .then(function (signInHeader) { return _this.render('SignInHeader', signInHeader); });
            };
            SignInHeaderController.prototype.registerSubscriptions = function () {
                var _this = this;
                var loggedInScheduler = Composer.EventScheduler.instance(Composer.MyAccountEvents[Composer.MyAccountEvents.LoggedIn]);
                var loggedOutScheduler = Composer.EventScheduler.instance(Composer.MyAccountEvents[Composer.MyAccountEvents.LoggedOut]);
                loggedOutScheduler.subscribe(function (e) { return _this.onLoggedOut(e); });
                loggedInScheduler.subscribe(function (e) { return _this.onLoggedIn(e); });
            };
            SignInHeaderController.prototype.onLoggedOut = function (e) {
                return this.signInHeaderService.invalidateCache();
            };
            SignInHeaderController.prototype.onLoggedIn = function (e) {
                return this.signInHeaderService.invalidateCache();
            };
            return SignInHeaderController;
        }(Orckestra.Composer.Controller));
        Composer.SignInHeaderController = SignInHeaderController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Utils/UrlHelper.ts' />
///<reference path='../../../Common/Source/Typescript/CustomerService.ts' />
///<reference path='../../../SignInHeader/Source/Typescript/SignInHeaderService.ts' />
///<reference path='../../../Common/Source/Typescript/MyAccountEvents.ts' />
///<reference path='../../../MyAccount/Source/Typescript/MyAccountController.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var UpdateAccountController = (function (_super) {
            __extends(UpdateAccountController, _super);
            function UpdateAccountController() {
                _super.apply(this, arguments);
                this.customerService = new Composer.CustomerService(new Composer.CustomerRepository());
                this.signInHeaderService = new Composer.SignInHeaderService(new Composer.SignInHeaderRepository());
            }
            UpdateAccountController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.registerSubscriptions();
            };
            UpdateAccountController.prototype.registerSubscriptions = function () {
                var _this = this;
                this.registerFormsForValidation(this.context.container.find('form'));
                this.eventHub.subscribe(Composer.MyAccountEvents[Composer.MyAccountEvents.AccountUpdated], function (e) { return _this.onAccountUpdated(e); });
            };
            UpdateAccountController.prototype.onAccountUpdated = function (e) {
                var result = e.data;
                if (result.ReturnUrl) {
                    window.location.replace(decodeURIComponent(result.ReturnUrl));
                }
                else {
                    this.render('UpdateAccount', result);
                    this.registerFormsForValidation(this.context.container.find('form'), {
                        serverValidationContainer: '[data-templateid="UpdateAccountSuccessful"]'
                    });
                }
            };
            UpdateAccountController.prototype.enableSubmitButton = function (actionContext) {
                $('#UpdateAccountSubmit').prop('disabled', false);
            };
            UpdateAccountController.prototype.updateAccount = function (actionContext) {
                var _this = this;
                actionContext.event.preventDefault();
                var formData = this.getFormData(actionContext);
                var returnUrlQueryString = 'ReturnUrl=';
                var returnUrl = '';
                if (window.location.href.indexOf(returnUrlQueryString) > -1) {
                    returnUrl = Composer.urlHelper.getURLParameter(location.search, 'ReturnUrl');
                }
                var busy = this.asyncBusy({ elementContext: actionContext.elementContext });
                this.customerService.updateAccount(formData, returnUrl)
                    .then(function (result) {
                    _this.signInHeaderService.invalidateCache();
                    return result;
                })
                    .then(function (result) { return _this.onUpdateAccountFulfilled(result); })
                    .fail(function (reason) {
                    console.error('Error updating the account.', reason);
                    _this.renderFormErrorMessages(reason);
                })
                    .fin(function () { return busy.done(); });
            };
            UpdateAccountController.prototype.onUpdateAccountFulfilled = function (result) {
                this.eventHub.publish(Composer.MyAccountEvents[Composer.MyAccountEvents.AccountUpdated], { data: result });
                return Q(result);
            };
            return UpdateAccountController;
        }(Orckestra.Composer.MyAccountController));
        Composer.UpdateAccountController = UpdateAccountController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../../Composer.UI/Source/Typings/tsd.d.ts' />

///<reference path='../../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../../Composer.UI/Source/Typescript/Mvc/ComposerClient.ts' />
///<reference path='../../../../../Composer.UI/Source/TypeScript/Cache/CacheProvider.ts' />
///<reference path='../../../../../Composer.UI/Source/TypeScript/Cache/CacheError.ts' />
///<reference path='../IWishListRepository.ts' />
///<reference path='./IWishListService.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var WishListService = (function () {
            function WishListService(wishListRepository, eventHub) {
                this.cacheKey = 'WishListSummaryViewModel';
                this.cachePolicy = { slidingExpiration: 300 }; // 5min
                if (!wishListRepository) {
                    throw new Error('Error: wishListRepository is required');
                }
                if (!eventHub) {
                    throw new Error('Error: eventHub is required');
                }
                this.wishListRepository = wishListRepository;
                this.cacheProvider = Composer.CacheProvider.instance();
                this.eventHub = eventHub;
            }
            WishListService.prototype.getWishListSummary = function () {
                var _this = this;
                return this.getCacheWishListSummary()
                    .fail(function (reason) {
                    if (_this.canHandle(reason)) {
                        return _this.getFreshWishListSummary();
                    }
                    console.error('An error occured while getting the wishList from cache.', reason);
                    throw reason;
                });
            };
            WishListService.prototype.getFreshWishListSummary = function () {
                var _this = this;
                if (!WishListService.GettingFreshWishListSummary) {
                    WishListService.GettingFreshWishListSummary =
                        this.wishListRepository.getWishListSummary().then(function (wishList) { return _this.setWishListToCache(wishList); });
                }
                // to avoid getting a fresh wishlist multiple times within a page session
                return WishListService.GettingFreshWishListSummary
                    .fail(function (reason) {
                    console.error('An error occured while getting a fresh wish list.', reason);
                    throw reason;
                });
            };
            WishListService.prototype.getSignInUrl = function () {
                return this.getWishListSummary()
                    .then(function (wishList) {
                    return wishList.SignInUrl;
                });
            };
            WishListService.prototype.getLineItem = function (productId, variantId) {
                return this.getWishListSummary().then(function (wishList) {
                    if (wishList && wishList.Items) {
                        return wishList.Items.filter(function (it) { return it.ProductId === productId && it.VariantId === variantId; })[0];
                    }
                    return null;
                });
            };
            WishListService.prototype.addLineItem = function (productId, variantId, quantity) {
                var _this = this;
                if (quantity === void 0) { quantity = 1; }
                var data = {
                    ProductId: productId,
                    VariantId: variantId,
                    Quantity: quantity
                };
                this.eventHub.publish('wishListUpdating', { data: data });
                return this.wishListRepository.addLineItem(productId, variantId, quantity)
                    .then(function (wishList) { return _this.setWishListToCache(wishList); })
                    .then(function (wishList) {
                    _this.eventHub.publish('wishListUpdated', { data: wishList });
                    return wishList;
                })
                    .fail(function (reason) {
                    _this.clearCache();
                    throw reason;
                });
            };
            WishListService.prototype.removeLineItem = function (lineItemId) {
                var _this = this;
                var data = {
                    LineItemId: lineItemId
                };
                this.eventHub.publish('wishListUpdating', { data: data });
                return this.wishListRepository.deleteLineItem(lineItemId)
                    .then(function (wishList) { return _this.setWishListToCache(wishList); })
                    .then(function (wishList) {
                    _this.eventHub.publish('wishListUpdated', { data: wishList });
                    return wishList;
                })
                    .fail(function (reason) {
                    _this.clearCache();
                    throw reason;
                });
            };
            WishListService.prototype.clearCache = function () {
                return this.cacheProvider.defaultCache.clear(this.cacheKey);
            };
            WishListService.prototype.getCacheWishListSummary = function () {
                return this.cacheProvider.defaultCache.get(this.cacheKey);
            };
            WishListService.prototype.setWishListToCache = function (wishList) {
                return this.cacheProvider.defaultCache.set(this.cacheKey, wishList, this.cachePolicy);
            };
            WishListService.prototype.canHandle = function (reason) {
                return reason === Composer.CacheError.Expired || reason === Composer.CacheError.NotFound;
            };
            return WishListService;
        }());
        Composer.WishListService = WishListService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
///<reference path='../../../../Composer.Cart.UI/WishList/Source/Typescript/WishListRepository.ts' />
///<reference path='../../../../Composer.Cart.UI/WishList/Source/Typescript/Services/WishListService.ts' />
///<reference path='../../../../Composer.Cart.UI/CartSummary/Source/Typescript/CartService.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Repositories/CartRepository.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var WishListController = (function (_super) {
            __extends(WishListController, _super);
            function WishListController() {
                _super.apply(this, arguments);
                this._wishListService = new Composer.WishListService(new Composer.WishListRepository(), this.eventHub);
                this._cartService = new Composer.CartService(new Composer.CartRepository(), this.eventHub);
            }
            WishListController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
            };
            WishListController.prototype.addToCart = function (actionContext) {
                var context = actionContext.elementContext;
                var container = context.closest('.wishlist-tile');
                var productId = context.data('productid');
                var price = context.data('price');
                var brand = context.data('brand');
                var variantId = context.data('variantid');
                var variant = context.data('variant');
                var name = context.data('name');
                var category = context.data('category');
                this.eventHub.publish('wishListLineItemAddingToCart', {
                    data: this.getProductDataForAnalytics(productId, variant, name, price, brand, category)
                });
                container.addClass('is-loading');
                this._cartService.addLineItem(productId, price, variantId, 1)
                    .fin(function () { return container.removeClass('is-loading'); });
            };
            WishListController.prototype.getListNameForAnalytics = function () {
                throw new Error('ListName not defined for this controller');
            };
            WishListController.prototype.getProductDataForAnalytics = function (productId, variant, displayName, price, brand, category) {
                var data = {
                    List: this.getListNameForAnalytics(),
                    ProductId: productId,
                    Variant: variant,
                    DisplayName: displayName,
                    ListPrice: price,
                    Brand: brand,
                    CategoryId: category,
                    Quantity: 1
                };
                return data;
            };
            return WishListController;
        }(Orckestra.Composer.Controller));
        Composer.WishListController = WishListController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
///<reference path='./WishListController.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var MyWishListController = (function (_super) {
            __extends(MyWishListController, _super);
            function MyWishListController() {
                _super.apply(this, arguments);
            }
            MyWishListController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.registerSubscriptions();
            };
            MyWishListController.prototype.registerSubscriptions = function () {
                var _this = this;
                this.eventHub.subscribe('wishListUpdated', function (e) { return _this.onWishListUpdated(e); });
            };
            MyWishListController.prototype.copyShareUrl = function (actionContext) {
                var shareUrl = $('#txtShareUrl');
                var succeed;
                shareUrl.focus().select();
                try {
                    succeed = document.execCommand('copy');
                }
                catch (e) {
                    succeed = false;
                }
                this.eventHub.publish('wishListCopyingShareUrl', {
                    data: {}
                });
                return succeed;
            };
            MyWishListController.prototype.deleteLineItem = function (actionContext) {
                var context = actionContext.elementContext;
                var lineItemId = context.data('lineitemid');
                var container = context.closest('.wishlist-tile');
                container.addClass('is-loading');
                this._wishListService.removeLineItem(lineItemId)
                    .then(function (wishList) {
                    container.parent().remove();
                })
                    .fin(function () {
                    container.removeClass('is-loading');
                });
            };
            MyWishListController.prototype.onWishListUpdated = function (e) {
                this.renderWishListQuantity(e.data);
                if (e.data.TotalQuantity === 0) {
                    this.context.window.location.reload();
                }
            };
            MyWishListController.prototype.renderWishListQuantity = function (wishList) {
                this.render('WishListQuantity', wishList);
            };
            MyWishListController.prototype.getListNameForAnalytics = function () {
                return 'My Wish List';
            };
            return MyWishListController;
        }(Orckestra.Composer.WishListController));
        Composer.MyWishListController = MyWishListController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Events/EventScheduler.ts' />
///<reference path='../../../../Composer.Cart.UI/WishList/Source/TypeScript/WishListRepository.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Events/EventHub.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Events/IEventInformation.ts' />
///<reference path='../../../../Composer.MyAccount.UI/Common/Source/Typescript/MyAccountEvents.ts' />
///<reference path='../../../../Composer.Cart.UI/WishList/Source/Typescript/Services/WishListService.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var WishListInHeaderController = (function (_super) {
            __extends(WishListInHeaderController, _super);
            function WishListInHeaderController() {
                _super.apply(this, arguments);
                this._wishListService = new Composer.WishListService(new Composer.WishListRepository(), this.eventHub);
            }
            WishListInHeaderController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.initializeWishListQuantity();
                this.registerSubscriptions();
            };
            WishListInHeaderController.prototype.initializeWishListQuantity = function () {
                var _this = this;
                if (!this.context.viewModel.IsAuthenticated) {
                    this._wishListService.clearCache();
                }
                this._wishListService.getWishListSummary()
                    .done(function (wishList) {
                    if (!_.isEmpty(wishList)) {
                        _this.renderWishList(wishList);
                    }
                });
            };
            WishListInHeaderController.prototype.registerSubscriptions = function () {
                var _this = this;
                var loggedInScheduler = Composer.EventScheduler.instance(Composer.MyAccountEvents[Composer.MyAccountEvents.LoggedIn]);
                var loggedOutScheduler = Composer.EventScheduler.instance(Composer.MyAccountEvents[Composer.MyAccountEvents.LoggedOut]);
                this.eventHub.subscribe('wishListUpdated', function (e) { return _this.onWishListUpdated(e); });
                loggedOutScheduler.subscribe(function (e) { return _this.onRefreshUser(e); });
                loggedInScheduler.subscribe(function (e) { return _this.onRefreshUser(e); });
            };
            WishListInHeaderController.prototype.onWishListUpdated = function (e) {
                var wishList = e.data;
                this.renderWishList(wishList);
            };
            WishListInHeaderController.prototype.onRefreshUser = function (e) {
                return this._wishListService.clearCache();
            };
            WishListInHeaderController.prototype.renderWishList = function (wishList) {
                this.render('WishListQuantity', wishList);
            };
            WishListInHeaderController.prototype.onError = function (reason) {
                console.error("An error occured while rendering the wishList with the WishListInHeader.", reason);
            };
            return WishListInHeaderController;
        }(Orckestra.Composer.Controller));
        Composer.WishListInHeaderController = WishListInHeaderController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
///<reference path='../../../../Composer.Cart.UI/WishList/Source/Typescript/WishListRepository.ts' />
///<reference path='../../../../Composer.Cart.UI/WishList/Source/Typescript/Services/WishListService.ts' />
///<reference path='../../../../Composer.Cart.UI/CartSummary/Source/Typescript/CartService.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Repositories/CartRepository.ts' />
///<reference path='../../../WishList/Source/Typescript/WishListController.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var SharedWishListController = (function (_super) {
            __extends(SharedWishListController, _super);
            function SharedWishListController() {
                _super.apply(this, arguments);
            }
            SharedWishListController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
            };
            SharedWishListController.prototype.getListNameForAnalytics = function () {
                return 'Shared Wish List';
            };
            return SharedWishListController;
        }(Orckestra.Composer.WishListController));
        Composer.SharedWishListController = SharedWishListController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var ProductIdentifierDto = (function () {
            function ProductIdentifierDto(ProductId, VariantId) {
                this.ProductId = ProductId;
                this.VariantId = VariantId;
            }
            return ProductIdentifierDto;
        }());
        Composer.ProductIdentifierDto = ProductIdentifierDto;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../RelatedProducts/Source/TypeScript/ProductIdentifierDto.ts' />

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Mvc/ComposerClient.ts' />
///<reference path='./IInventoryService.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var InventoryService = (function () {
            function InventoryService() {
            }
            InventoryService.prototype.isAvailableToSell = function (sku) {
                var _this = this;
                if (!sku) {
                    throw new Error('The sku is required');
                }
                if (!this._memoizeIsAvailableToSell) {
                    this._memoizeIsAvailableToSell = _.memoize(function (arg) { return _this.isAvailableToSellImpl(arg); });
                }
                return this._memoizeIsAvailableToSell(sku);
            };
            InventoryService.prototype.isAvailableToSellImpl = function (sku) {
                var data = { skus: [sku] };
                return Composer.ComposerClient.post('/api/inventory/findInventoryItems', data)
                    .then(function (availableSkus) { return _.contains(availableSkus, sku); });
            };
            return InventoryService;
        }());
        Composer.InventoryService = InventoryService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../RelatedProducts/Source/TypeScript/ProductIdentifierDto.ts' />

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Mvc/IControllerContext.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Mvc/ComposerClient.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Events/EventHub.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        //
        //Isolated logic, this class rebuild the keyVariantAttributeItems array
        //as expected by KvaItems.hbs
        //TODO: Instancier dans productService (passer dans le constructeur)
        var KeyVariantAttributeItemsBuilder = (function () {
            //Passer viewModel
            function KeyVariantAttributeItemsBuilder(context) {
                if (!context) {
                    throw new Error('Error: context is required');
                }
                if (!context.viewModel) {
                    throw new Error('Error: context.viewModel is required');
                }
                this.context = context;
            }
            //Find possible kva value states bases on the given selection
            //
            //<returns>
            // KeyVariantAttributeItem ViewModel ready for render
            //</returns>
            KeyVariantAttributeItemsBuilder.prototype.BuildKeyVariantAttributeItemsFor = function (selectedKvas) {
                selectedKvas = selectedKvas || {};
                //Get the last known KvaState and use it as a starting point
                var keyVariantAttributeItems = this.context.viewModel.keyVariantAttributeItems || [];
                //Initiate
                var reverseKvaLookup = this.InitiateKVAStateFor(keyVariantAttributeItems, selectedKvas);
                //Find
                var reachableVariants = this.FindReachableVariantsFrom(keyVariantAttributeItems, selectedKvas);
                //Enable
                this.EnableKVAState(reverseKvaLookup, reachableVariants, selectedKvas);
                //Memoize the KvaState for later
                this.context.viewModel.keyVariantAttributeItems = keyVariantAttributeItems;
                //
                return keyVariantAttributeItems;
            };
            //Toggle the Selected state and Disable everything
            //After this initial state, the KVAs will either be
            // Selected or Disable
            //
            //<returns>
            //  A Lookup of all KVA for later easy access using
            //  lookup[propertyName][value]
            //</returns>
            KeyVariantAttributeItemsBuilder.prototype.InitiateKVAStateFor = function (keyVariantAttributeItems, selectedKvas) {
                var reverseLookup = {};
                _.each(keyVariantAttributeItems, function (kva) {
                    var propertyName = kva.PropertyName;
                    var selectedValue = selectedKvas[propertyName];
                    reverseLookup[propertyName] = {};
                    _.each(kva.Values, function (val) {
                        val.Selected = val.Value === selectedValue;
                        val.Disabled = true;
                        reverseLookup[propertyName][val.Value] = val;
                    });
                });
                return reverseLookup;
            };
            //Find all reachable variants from the given configuration
            //Those are variant that could possibly be reach by changing
            //one and only one KVA value
            //<returns>
            //  An array of Variants with all their properties
            //</returns>
            KeyVariantAttributeItemsBuilder.prototype.FindReachableVariantsFrom = function (keyVariantAttributeItems, selectedKvas) {
                var allVariants = (this.context.viewModel.allVariants || {});
                var possibleVariantsLookup = {};
                //Changing Selection
                _.each(selectedKvas, function (value, propertyName) {
                    var possibleMove = _.omit(selectedKvas, propertyName);
                    var v = _.each(_.filter(allVariants, { Kvas: possibleMove }), function (variant) {
                        possibleVariantsLookup[variant.Id] = variant;
                    });
                });
                //
                var variants = _.mapValues(possibleVariantsLookup, _.identity);
                return variants;
            };
            //Enable the KVAs based on the reachable variants
            //Using the reverse lookkup for faster access
            KeyVariantAttributeItemsBuilder.prototype.EnableKVAState = function (reverseKvaLookup, reachableVariants, selectedKvas) {
                //Enable reachable states
                _.each(reachableVariants, function (variant, variantId) {
                    _.each(variant.Kvas, function (value, propertyName) {
                        var kva = reverseKvaLookup[propertyName] || [];
                        var val = kva[value] || {};
                        val.Disabled = false;
                    });
                });
                //If the current selection match nothing, disable it.
                var selectedVariant = _.find(reachableVariants, { Kvas: selectedKvas });
                if (!selectedVariant) {
                    _.each(selectedKvas, function (value, propertyName) {
                        var kva = reverseKvaLookup[propertyName] || [];
                        var val = kva[value] || {};
                        val.Disabled = true;
                    });
                }
            };
            return KeyVariantAttributeItemsBuilder;
        }());
        Composer.KeyVariantAttributeItemsBuilder = KeyVariantAttributeItemsBuilder;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Mvc/IControllerContext.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Mvc/ComposerClient.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Events/EventHub.ts' />
///<reference path='../../../RelatedProducts/Source/TypeScript/ProductIdentifierDto.ts' />
///<reference path='./IProductService.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var ProductService = (function () {
            function ProductService(eventHub, context) {
                if (!eventHub) {
                    throw new Error('Error: eventHub is required');
                }
                if (!context) {
                    throw new Error('Error: context is required');
                }
                if (!context.viewModel) {
                    throw new Error('Error: context.viewModel is required');
                }
                this.eventHub = eventHub;
                this.context = context;
            }
            ProductService.prototype.showQuickView = function () {
                $('#addToCartModal').modal('show');
            };
            ProductService.prototype.closeQuickView = function () {
                $('#addToCartModal').modal('hide');
            };
            ProductService.prototype.selectImage = function (clickedImageIndex, concern) {
                // find currently selected image and set selected to false
                var index = _.findIndex(this.context.viewModel.Images, { Selected: true });
                if (index > -1) {
                    this.context.viewModel.Images[index].Selected = false;
                }
                this.context.viewModel.Images[clickedImageIndex].Selected = true;
                this.context.viewModel.SelectedImage.ImageUrl = this.context.viewModel.Images[clickedImageIndex].ImageUrl;
                this.eventHub.publish(concern + 'ImagesChanged', { data: this.context.viewModel });
            };
            ProductService.prototype.calculatePrice = function (productId, concern) {
                var _this = this;
                var data = { products: [productId] };
                return Composer.ComposerClient.post('/api/product/calculatePrices', data)
                    .then(function (result) {
                    var details = _this.context.viewModel;
                    var mainResult = _.find(result.ProductPrices, { ProductId: productId });
                    //TODO extend all other products on the page (if any)
                    //Extend the product details
                    _.extend(details, mainResult);
                    if (result && result.Currency) {
                        details.Currency = result.Currency;
                    }
                    //Extend the variants
                    var allVariants = _this.context.viewModel.allVariants;
                    _.each(mainResult.VariantPrices, function (variantPrice) {
                        var variant = _.find(allVariants, { Id: variantPrice.VariantId });
                        _.extend(variant, variantPrice);
                        if (variant !== undefined && variant.Id === details.displayedVariantId) {
                            _.extend(details, variant);
                        }
                    });
                    _this.eventHub.publish(concern + 'PricesChanged', { data: details });
                    _this.eventHub.publish(concern + 'PriceCalculated', { data: details });
                });
            };
            /*
             * Return the ViewModel of the Selected Variant.
             * If no variants are available,
             *    it returns the ViewModel of the Product
             * If no variant is selected (aka the KVA selection binds to an unavailable variant)
             *    it returns a None Buyable ViewModel
             */
            ProductService.prototype.getSelectedVariantViewModel = function () {
                var selectedVariantId = this.context.viewModel.selectedVariantId;
                var displayedVariantId = this.context.viewModel.displayedVariantId;
                if (!displayedVariantId) {
                    //This is mostlikely a product
                    return this.context.viewModel;
                }
                else if (selectedVariantId === displayedVariantId) {
                    //This is mostlikely a variant
                    return this.getVariant(selectedVariantId);
                }
                return {
                    'IsAvailableToSell': false
                };
            };
            // TODO (SAM) : getVariant and updateSelectedKvasWith shouldn't be in this file.
            //              They're more suited to a Controller or a helper class.
            //Get the Variant for the given id
            //<param name="variantId">The variant id to find</param>
            //<returns>KeyVariantAttributeItem ViewModel ready for render</returns>
            ProductService.prototype.getVariant = function (variantId) {
                var allVariants = this.context.viewModel.allVariants;
                var variant = _.find(allVariants, { Id: variantId });
                return variant;
            };
            ProductService.prototype.updateSelectedKvasWith = function (selectionsToAdd, concern) {
                var allVariants = this.context.viewModel.allVariants;
                var initialSelectedKvas = this.context.viewModel.selectedKvas || {};
                var initialSelectedVariantId = this.context.viewModel.selectedVariantId;
                var initialDisplayedVariantId = this.context.viewModel.displayedVariantId;
                //Update current selection
                var selectedKvas = _.merge(initialSelectedKvas, selectionsToAdd);
                //Find possible matches
                var variants = _.filter(allVariants, { Kvas: selectedKvas });
                if (variants && variants.length === 1) {
                    //Exactly one variant found, let's update the detail to display it.
                    var variant = variants[0];
                    this.context.viewModel.selectedKvas = _.clone(variant.Kvas);
                    this.context.viewModel.selectedVariantId = variant.Id;
                    this.context.viewModel.displayedVariantId = variant.Id;
                }
                else {
                    //More than one possibile variants, let's not assume any selected ones.
                    this.context.viewModel.selectedKvas = selectedKvas;
                    this.context.viewModel.selectedVariantId = null;
                }
                //Superseed the product details with the selection variant details
                _.extend(this.context.viewModel, this.getSelectedVariantViewModel());
                this.buildKeyVariantAttributeItems(concern);
                if (initialDisplayedVariantId !== this.context.viewModel.displayedVariantId) {
                    this.eventHub.publish(concern + 'DisplayedVariantIdChanged', {
                        data: {
                            initialDisplayedVariantId: initialDisplayedVariantId,
                            displayVariantId: this.context.viewModel.displayedVariantId,
                            selectedSku: this.context.viewModel.Sku
                        }
                    });
                }
                if (initialSelectedVariantId !== this.context.viewModel.selectedVariantId) {
                    this.eventHub.publish(concern + 'SelectedVariantIdChanged', {
                        data: {
                            initialSelectedVariantId: initialSelectedVariantId,
                            selectedVariantId: this.context.viewModel.selectedVariantId,
                            selectedSku: this.context.viewModel.Sku
                        }
                    });
                }
                this.eventHub.publish(concern + 'ImagesChanged', { data: this.context.viewModel });
                //I think this publish is unnecessary because it calculate the price after on a API server call
                this.eventHub.publish(concern + 'PricesChanged', { data: this.context.viewModel });
            };
            ProductService.prototype.getRelatedProducts = function (relatedProductIdentifiers) {
                return Composer.ComposerClient.post('/api/product/relatedProducts', relatedProductIdentifiers);
            };
            ProductService.prototype.loadQuickBuyProduct = function (productId, variantId, concern, source) {
                var _this = this;
                var data = {
                    ProductId: productId,
                    VariantId: variantId
                };
                return Composer.ComposerClient.post('/api/product/variantSelection', data)
                    .then(function (quickBuyProductViewModel) {
                    _this.eventHub.publish(concern + 'QuickBuyLoaded', { data: quickBuyProductViewModel, source: source });
                    return quickBuyProductViewModel;
                }).fail(function (reason) {
                    console.error('Failed loading the ProductQuickView', reason);
                    throw reason;
                });
            };
            ProductService.prototype.findInventoryItems = function (viewModel, concern) {
                var _this = this;
                var selectedSku = viewModel.Sku, skus;
                if (_.isEmpty(viewModel.allVariants)) {
                    skus = [viewModel.Sku];
                }
                else {
                    skus = _.pluck(viewModel.allVariants, 'Sku');
                }
                var data = { skus: skus };
                return Composer.ComposerClient.post('/api/inventory/findInventoryItems', data)
                    .then(function (skusAvailableToSell) {
                    var isAvailableToSell = _.include(skusAvailableToSell, selectedSku) && viewModel.IsAvailableToSell;
                    _this.eventHub.publish(concern + 'InventoryRetrieved', { data: isAvailableToSell });
                });
            };
            ProductService.prototype.productAvailableToSell = function (selectedSku, productAvailableToSell, productIsAvailableToSell) {
                return _.include(productAvailableToSell, selectedSku) && productIsAvailableToSell;
            };
            ProductService.prototype.buildKeyVariantAttributeItems = function (concern) {
                var selectedKvas = this.context.viewModel.selectedKvas;
                var builder = new Orckestra.Composer.KeyVariantAttributeItemsBuilder(this.context);
                var keyVariantAttributeItems = builder.BuildKeyVariantAttributeItemsFor(selectedKvas);
                this.eventHub.publish(concern + 'SelectedKvasChanged', { data: keyVariantAttributeItems });
            };
            ProductService.prototype.replaceHistory = function () {
                var variantId = this.context.viewModel.selectedVariantId;
                //Variant selection is not valid use last valid
                if (variantId === null) {
                    return;
                }
                var fullPathArray = window.location.pathname.split('/').filter(Boolean);
                var shortPathArray = fullPathArray.slice(0, 3);
                shortPathArray.push(variantId);
                var builtPath = window.location.protocol
                    + '//'
                    + window.location.host
                    + this.buildUrlPath(shortPathArray);
                history.replaceState({}, null, builtPath);
            };
            ProductService.prototype.buildUrlPath = function (pathArray) {
                var newPathname = '';
                for (var i = 0; i < pathArray.length; i++) {
                    newPathname += '/';
                    newPathname += pathArray[i];
                }
                return newPathname;
            };
            return ProductService;
        }());
        Composer.ProductService = ProductService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Mvc/ComposerClient.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Events/EventHub.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        /**
          * Module helper to format string value using the Overture convertion rules.
          */
        var ProductFormatter = (function () {
            function ProductFormatter() {
            }
            /**
             * convert a ProductProperty string value into the right strongly typed variable.
             *
             *     formatter.convertToStronglyTyped(actionContext.elementContext.val(), 'Decimal');
             *
             * @param strValue         The ProductProperty value to convert
             * @param propertyDataType the ProductProperty.DataType to induce the type
             */
            ProductFormatter.prototype.convertToStronglyTyped = function (strValue, propertyDataType) {
                var value;
                if (propertyDataType === 'Decimal') {
                    value = parseFloat(strValue);
                }
                else if (propertyDataType === 'Number') {
                    value = parseInt(strValue, 10);
                }
                else if (propertyDataType === 'Boolean') {
                    value = (strValue === 'true');
                }
                else if (propertyDataType === 'Text') {
                    value = strValue + '';
                }
                else if (propertyDataType === 'Lookup') {
                    value = strValue + '';
                }
                else {
                    value = strValue;
                }
                return value;
            };
            return ProductFormatter;
        }());
        Composer.ProductFormatter = ProductFormatter;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.Cart.UI/CartSummary/Source/Typescript/CartService.ts' />
///<reference path='../../../../Composer.Cart.UI/WishList/Source/Typescript/Services/WishListService.ts' />
///<reference path='../../../../Composer.Cart.UI/WishList/Source/TypeScript/WishListRepository.ts' />
///<reference path='../../../../Composer.MyAccount.UI/Common/Source/TypeScript/MembershipService.ts' />
///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Repositories/CartRepository.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Events/IEventInformation.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/UI/UIBusyHandle.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/ErrorHandling/ErrorHandler.ts' />
///<reference path='InventoryService.ts' />
///<reference path='ProductService.ts' />
///<reference path='ProductFormatter.ts' />
///<reference path='KeyVariantAttributeItemsBuilder.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var ProductController = (function (_super) {
            __extends(ProductController, _super);
            function ProductController() {
                _super.apply(this, arguments);
                this.inventoryService = new Composer.InventoryService();
                this.productService = new Composer.ProductService(this.eventHub, this.context);
                this.cartService = new Composer.CartService(new Composer.CartRepository(), this.eventHub);
                this._wishListService = new Composer.WishListService(new Composer.WishListRepository(), this.eventHub);
                this._membershipService = new Composer.MembershipService(new Composer.MembershipRepository());
            }
            ProductController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.registerSubscriptions();
            };
            ProductController.prototype.registerSubscriptions = function () {
                var _this = this;
                this.eventHub.subscribe(this.concern + 'SelectedVariantIdChanged', function (e) { return _this.onSelectedVariantIdChanged(e); });
                this.eventHub.subscribe(this.concern + 'SelectedKvasChanged', function (e) { return _this.onSelectedKvasChanged(e); });
                this.eventHub.subscribe(this.concern + 'ImagesChanged', function (e) { return _this.onImagesChanged(e); });
                this.eventHub.subscribe(this.concern + 'PricesChanged', function (e) { return _this.onPricesChanged(e); });
            };
            ProductController.prototype.onSelectedVariantIdChanged = function (e) {
                return;
            };
            ProductController.prototype.onSelectedKvasChanged = function (e) {
                return;
            };
            ProductController.prototype.onImagesChanged = function (e) {
                return;
            };
            ProductController.prototype.onPricesChanged = function (e) {
                return;
            };
            ProductController.prototype.renderData = function () {
                var quantity = this.getCurrentQuantity();
                var renderTasks = [];
                if (this.isProductWithVariants() && this.isSelectedVariantUnavailable()) {
                    renderTasks.push(this.renderUnavailableQuantity(quantity));
                    renderTasks.push(this.renderUnavailableAddToCart());
                }
                else {
                    renderTasks.push(this.renderAvailableQuantity(quantity));
                    renderTasks.push(this.renderAvailableAddToCart());
                }
                renderTasks.push(this.renderAddToWishList());
                return Q.all(renderTasks);
            };
            ProductController.prototype.isProductWithVariants = function () {
                return $.isArray(this.context.viewModel.allVariants);
            };
            ProductController.prototype.isSelectedVariantUnavailable = function () {
                return !this.context.viewModel.selectedVariantId;
            };
            ProductController.prototype.renderUnavailableQuantity = function (quantity) {
                var _this = this;
                return Q.fcall(function () { return _this.render('ProductQuantity', { Quantity: quantity, Disabled: true }); });
            };
            ProductController.prototype.renderAvailableQuantity = function (quantity) {
                var _this = this;
                return this.inventoryService
                    .isAvailableToSell(this.context.viewModel.Sku)
                    .then(function (result) { return _this.render('ProductQuantity', { Quantity: quantity, Disabled: !result }); });
            };
            ProductController.prototype.renderAddToWishList = function () {
                var _this = this;
                var vm = this.context.viewModel;
                this.render('AddToWishList', { Loaded: false });
                if (this.isProductWithVariants() && this.isSelectedVariantUnavailable()) {
                    return;
                }
                return this._wishListService.getLineItem(vm.productId, vm.selectedVariantId)
                    .then(function (result) {
                    if (result) {
                        _this.render('AddToWishList', { Loaded: true, IsInWishList: true, Id: result.Id });
                    }
                    else {
                        _this.render('AddToWishList', { Loaded: true, IsInWishList: false });
                    }
                });
            };
            ProductController.prototype.renderUnavailableAddToCart = function () {
                return;
            };
            ProductController.prototype.renderAvailableAddToCart = function () {
                return;
            };
            ProductController.prototype.decrementQuantity = function (actionContext) {
                var quantity = this.getCurrentQuantity();
                quantity.Value--;
                actionContext.event.preventDefault();
                this.renderAvailableQuantity(quantity).done();
            };
            ProductController.prototype.incrementQuantity = function (actionContext) {
                var quantity = this.getCurrentQuantity();
                quantity.Value++;
                actionContext.event.preventDefault();
                this.renderAvailableQuantity(quantity).done();
            };
            ProductController.prototype.changeQuantity = function (actionContext) {
                var quantity = this.getCurrentQuantity();
                var newValue = parseInt(actionContext.elementContext.val(), 10);
                if (isFinite(newValue)) {
                    quantity.Value = Math.max(Math.min(newValue, quantity.Max), quantity.Min); // constraint newvalue to max and min.
                }
                this.renderAvailableQuantity(quantity).done();
            };
            ProductController.prototype.addLineItemToWishList = function (actionContext) {
                var _this = this;
                this._membershipService.isAuthenticated().then(function (result) {
                    if (result.IsAuthenticated) {
                        var vm = _this.context.viewModel;
                        var busy = _this.asyncBusy({ elementContext: actionContext.elementContext });
                        var analyticData = {
                            DisplayName: vm.DisplayName,
                            ListPrice: vm.ListPrice
                        };
                        _this.eventHub.publish('wishListLineItemAdding', {
                            data: analyticData
                        });
                        _this._wishListService.addLineItem(vm.productId, vm.selectedVariantId).then(function (data) {
                            var lineItem = data.Items.filter(function (it) { return it.ProductId === vm.productId && it.VariantId === vm.selectedVariantId; })[0];
                            _this.render('AddToWishList', { Loaded: true, IsInWishList: true, Id: lineItem.Id });
                        }).fin(function () { return busy.done(); });
                    }
                    else {
                        _this.redirectToSignInBeforeAddToWishList();
                    }
                });
            };
            ProductController.prototype.removeLineItemToWishList = function (actionContext) {
                var _this = this;
                this._membershipService.isAuthenticated().then(function (result) {
                    if (result.IsAuthenticated) {
                        var id = actionContext.elementContext.data('id');
                        var busy = _this.asyncBusy({ elementContext: actionContext.elementContext });
                        _this._wishListService.removeLineItem(id).then(function (data) {
                            _this.render('AddToWishList', { Loaded: true, IsInWishList: false });
                        }).fin(function () { return busy.done(); });
                    }
                    else {
                        _this.redirectToSignInBeforeAddToWishList();
                    }
                });
            };
            ProductController.prototype.redirectToSignInBeforeAddToWishList = function () {
                var _this = this;
                this._wishListService.getSignInUrl().then(function (signInUrl) {
                    _this._wishListService.clearCache();
                    _this.context.window.location.href = signInUrl + '?ReturnUrl=' + _this.context.window.location.href;
                });
            };
            ProductController.prototype.addLineItem = function (actionContext) {
                var _this = this;
                var busy = this.asyncBusy({ elementContext: actionContext.elementContext });
                var quantity = this.getCurrentQuantity();
                var vm = this.context.viewModel;
                var variant = _.find(vm.allVariants, function (v) { return v.Id === vm.selectedVariantId; });
                var data = this.getProductDataForAnalytics(vm);
                data.Quantity = quantity.Value ? quantity.Value : 1;
                if (variant) {
                    var variantData = this.getVariantDataForAnalytics(variant);
                    _.extend(data, variantData);
                }
                this.eventHub.publish('lineItemAdding', {
                    data: data
                });
                this.addLineItemImpl(vm.productId, vm.ListPrice, vm.selectedVariantId, quantity)
                    .then(function (data) {
                    _this.onAddLineItemSuccess(data);
                    actionContext.elementContext.focus();
                    return data;
                }, function (reason) {
                    _this.onAddLineItemFailed(reason);
                    actionContext.elementContext.focus();
                    throw reason;
                })
                    .then(function (data) { return _this.completeAddLineItem(quantity); })
                    .fin(function () { return busy.done(); });
            };
            ProductController.prototype.onAddLineItemSuccess = function (data) {
                Composer.ErrorHandler.instance().removeErrors();
            };
            ProductController.prototype.onAddLineItemFailed = function (reason) {
                console.error('Error on adding line item', reason);
                Composer.ErrorHandler.instance().outputErrorFromCode('AddToCartFailed');
            };
            ProductController.prototype.getCurrentQuantity = function () {
                var element = $(this.context.container).find('[name="product-quantity"]');
                return {
                    Min: parseInt(element.data('quantityMin'), 10),
                    Max: parseInt(element.data('quantityMax'), 10),
                    Value: parseInt(element.data('quantity'), 10)
                };
            };
            ProductController.prototype.addLineItemImpl = function (productId, price, variantId, quantity) {
                return this.cartService.addLineItem(productId, price, variantId, quantity.Value);
            };
            ProductController.prototype.completeAddLineItem = function (quantityAdded) {
                return;
            };
            ProductController.prototype.selectImage = function (actionContext) {
                actionContext.event.preventDefault();
                var clickedImageIndex = actionContext.elementContext.data('index');
                this.productService.selectImage(clickedImageIndex, this.concern);
            };
            ProductController.prototype.selectKva = function (actionContext) {
                var selectionsToAdd = {};
                var propertyName = actionContext.elementContext.parents('[data-propertyname]').data('propertyname');
                var propertyDataType = actionContext.elementContext.parents('[data-propertydatatype]').data('propertydatatype');
                var formatter = new Orckestra.Composer.ProductFormatter();
                var value = formatter.convertToStronglyTyped(actionContext.elementContext.val(), propertyDataType);
                selectionsToAdd[propertyName] = value;
                this.productService.updateSelectedKvasWith(selectionsToAdd, this.concern);
            };
            ProductController.prototype.calculatePrice = function () {
                return this.productService.calculatePrice(this.context.viewModel.productId, this.concern);
            };
            ProductController.prototype.getProductDataForAnalytics = function (vm) {
                var productId = (vm.productId) ? vm.productId : vm.ProductId;
                var data = {
                    List: this.getListNameForAnalytics(),
                    ProductId: productId,
                    DisplayName: vm.DisplayName,
                    ListPrice: vm.ListPrice,
                    Brand: vm.Brand,
                    CategoryId: vm.CategoryId
                };
                return data;
            };
            ProductController.prototype.getListNameForAnalytics = function () {
                throw new Error('ListName not defined for this controller');
            };
            ProductController.prototype.getVariantDataForAnalytics = function (variant) {
                var variantName = this.buildVariantName(variant.Kvas);
                var data = {
                    Variant: variantName,
                    Name: variant.DisplayName ? variant.DisplayName : undefined,
                    ListPrice: variant.ListPrice
                };
                return data;
            };
            ProductController.prototype.buildVariantName = function (kvas) {
                var keys = Object.keys(kvas).sort();
                var nameParts = [];
                for (var i = 0; i < keys.length; i++) {
                    var key = keys[i];
                    var value = kvas[key];
                    nameParts.push(value);
                }
                return nameParts.join(' ');
            };
            return ProductController;
        }(Orckestra.Composer.Controller));
        Composer.ProductController = ProductController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../Product/Source/Typescript/ProductController.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var ProductDetailController = (function (_super) {
            __extends(ProductDetailController, _super);
            function ProductDetailController() {
                _super.apply(this, arguments);
                this._concern = 'productDetail';
            }
            ProductDetailController.prototype.initialize = function () {
                var _this = this;
                _super.prototype.initialize.call(this);
                this.productService.updateSelectedKvasWith(this.context.viewModel.selectedKvas, this._concern);
                var priceDisplayBusy = this.asyncBusy({
                    msDelay: 300,
                    loadingIndicatorSelector: '.loading-indicator-pricediscount'
                });
                var addToCartBusy = this.asyncBusy({
                    msDelay: 300,
                    loadingIndicatorSelector: '.loading-indicator-inventory'
                });
                Q.when(this.calculatePrice()).done(function () {
                    priceDisplayBusy.done();
                    _this.notifyAnalyticsOfProductDetailsImpression();
                });
                Q.when(this.renderData()).done(function () { return addToCartBusy.done(); });
            };
            ProductDetailController.prototype.getListNameForAnalytics = function () {
                return 'Detail';
            };
            ProductDetailController.prototype.notifyAnalyticsOfProductDetailsImpression = function () {
                var vm = this.context.viewModel;
                var variant = _.find(vm.allVariants, function (v) { return v.Id === vm.selectedVariantId; });
                var data = this.getProductDataForAnalytics(vm);
                if (variant) {
                    var variantData = this.getVariantDataForAnalytics(variant);
                    _.extend(data, variantData);
                }
                this.publishProductImpressionEvent(data);
            };
            ProductDetailController.prototype.publishProductImpressionEvent = function (data) {
                this.eventHub.publish('productDetailsRendered', {
                    data: data
                });
            };
            ProductDetailController.prototype.onSelectedVariantIdChanged = function (e) {
                this.renderData().done();
            };
            ProductDetailController.prototype.onSelectedKvasChanged = function (e) {
                this.render('KvaItems', { KeyVariantAttributeItems: e.data });
            };
            ProductDetailController.prototype.onImagesChanged = function (e) {
                if (this.isProductWithVariants() && this.isSelectedVariantUnavailable()) {
                    this.render('ProductImages', this.getUnavailableProductImages(e));
                }
                else {
                    this.render('ProductImages', e.data);
                }
            };
            ProductDetailController.prototype.getUnavailableProductImages = function (e) {
                var fallbackImageUrl = e.data.FallbackImageUrl;
                var image = {
                    ThumbnailUrl: fallbackImageUrl,
                    ImageUrl: fallbackImageUrl,
                    Selected: true
                };
                var vm = {
                    DisplayName: e.data.DisplayName,
                    Images: [image],
                    SelectedImage: {
                        ImageUrl: fallbackImageUrl
                    }
                };
                return vm;
            };
            ProductDetailController.prototype.onPricesChanged = function (e) {
                if (this.isProductWithVariants() && this.isSelectedVariantUnavailable()) {
                    this.render('PriceDiscount', null);
                }
                else {
                    this.render('PriceDiscount', e.data);
                }
            };
            ProductDetailController.prototype.renderUnavailableAddToCart = function () {
                var _this = this;
                return Q.fcall(function () { return _this.render('AddToCartProductDetail', { IsUnavailable: true }); });
            };
            ProductDetailController.prototype.renderAvailableAddToCart = function () {
                var _this = this;
                var sku = this.context.viewModel.Sku;
                return this.inventoryService.isAvailableToSell(sku)
                    .then(function (result) { return _this.render('AddToCartProductDetail', { IsAvailableToSell: result }); });
            };
            ProductDetailController.prototype.selectKva = function (actionContext) {
                _super.prototype.selectKva.call(this, actionContext);
                //IE8 check
                if (history) {
                    this.productService.replaceHistory();
                }
            };
            ProductDetailController.prototype.completeAddLineItem = function (quantityAdded) {
                var quantity = {
                    Min: quantityAdded.Min,
                    Max: quantityAdded.Max,
                    Value: quantityAdded.Min
                };
                return this.renderAvailableQuantity(quantity);
            };
            return ProductDetailController;
        }(Orckestra.Composer.ProductController));
        Composer.ProductDetailController = ProductDetailController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../Product/Source/Typescript/ProductController.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var ProductZoomController = (function (_super) {
            __extends(ProductZoomController, _super);
            function ProductZoomController() {
                _super.apply(this, arguments);
            }
            ProductZoomController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.initZoom();
            };
            ProductZoomController.prototype.openZoom = function (event) {
                var context$ = $(event.target), index = parseInt($('.js-thumbnail.active').attr('data-index'), 10);
                $('.js-zoom-thumbnail').eq(index).click();
                event.preventDefault();
                $('.modal-fullscreen').modal();
            };
            ProductZoomController.prototype.changeZoomedImage = function (event) {
                var context$ = $(event.target), largeImage = document.querySelector('.js-zoom-image'), selector = event.target.tagName, // Clicked HTML element
                $largeImage = $(largeImage);
                if (selector.toLocaleLowerCase() !== 'a') {
                    context$ = context$.parent();
                }
                $('.js-zoom-thumbnail').removeClass('active');
                context$.addClass('active');
                $largeImage.attr('src', context$.attr('data-image'));
            };
            ProductZoomController.prototype.errorZoomedImage = function (event) {
                var $element = $(event.target), fallbackImageUrl = $element.attr('data-fallback-image-url');
                $element.attr('src', fallbackImageUrl);
            };
            ProductZoomController.prototype.initZoom = function () {
                var _this = this;
                $(document).on('click', '.js-zoom', function (event) { return _this.openZoom(event); });
                $(document).on('click', '.js-zoom-thumbnail', function (event) { return _this.changeZoomedImage(event); });
                $('.js-zoom-image').on('error', function (event) { return _this.errorZoomedImage(event); });
                // Select first thumbnail
                $('.js-zoom-thumbnail').eq(0).click();
            };
            return ProductZoomController;
        }(Orckestra.Composer.ProductController));
        Composer.ProductZoomController = ProductZoomController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Mvc/ComposerClient.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Events/EventHub.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var ProductSpecificationsService = (function () {
            function ProductSpecificationsService() {
            }
            ProductSpecificationsService.prototype.getProductSpecifications = function (productId, variantId) {
                if (!productId) {
                    throw new Error('The product id is required');
                }
                if (!this.memoizeProductSpecifications) {
                    this.memoizeProductSpecifications =
                        _.memoize(this.getProductSpecificationsImpl, function (productId, variantId) { return variantId; });
                }
                return this.memoizeProductSpecifications(productId, variantId);
            };
            ProductSpecificationsService.prototype.getProductSpecificationsImpl = function (productId, variantId) {
                var data = { productId: productId, variantId: variantId };
                return Composer.ComposerClient.post('/api/product/specifications', data);
            };
            return ProductSpecificationsService;
        }());
        Composer.ProductSpecificationsService = ProductSpecificationsService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Events/IEventInformation.ts' />
///<reference path='ProductSpecificationsService.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var ProductSpecificationsController = (function (_super) {
            __extends(ProductSpecificationsController, _super);
            function ProductSpecificationsController() {
                _super.apply(this, arguments);
                this.service = new Composer.ProductSpecificationsService();
            }
            ProductSpecificationsController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.registerSubscriptions();
                this.renderData(this.context.viewModel.variantId);
            };
            ProductSpecificationsController.prototype.registerSubscriptions = function () {
                var _this = this;
                this.eventHub.subscribe('productDetailSelectedVariantIdChanged', function (e) { return _this.renderData(e.data.selectedVariantId); });
            };
            ProductSpecificationsController.prototype.renderData = function (variantId) {
                var _this = this;
                var handle = setTimeout(function () { return _this.render('Attributes', { IsLoading: true }); }, 300);
                this.getProductSpecifications(variantId)
                    .done(function (result) {
                    clearTimeout(handle);
                    _this.render('Attributes', result);
                    _this.eventHub.publish('productSpecificationsChanged', result);
                }, function (reason) { return _this.handleError(reason); });
            };
            ProductSpecificationsController.prototype.getProductSpecifications = function (variantId) {
                var productId = this.context.viewModel.productId;
                return this.service.getProductSpecifications(productId, variantId);
            };
            ProductSpecificationsController.prototype.handleError = function (reason) {
                console.error('The selected variant changed, ' +
                    'but we were unable to get the product specifications associated with that variant', reason);
            };
            return ProductSpecificationsController;
        }(Orckestra.Composer.Controller));
        Composer.ProductSpecificationsController = ProductSpecificationsController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));



///<reference path='./IFacet.ts' />

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
/// <reference path='./IFacet.ts' />
/// <reference path='./ISelectedFacet.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Generics/Collections/IHashtable.ts' />
/// <reference path='./ISearchCriteriaOptions.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var SearchCriteria = (function () {
            function SearchCriteria(eventHub, _window) {
                this.eventHub = eventHub;
                this._window = _window;
                this._facetRegistry = {};
                this.keywords = '';
                this.page = 1;
                this.sortBy = '';
                this.sortDirection = '';
                this.selectedFacets = {};
            }
            SearchCriteria.prototype.initialize = function (options) {
                this._facetRegistry = options.facetRegistry;
                this.correctedSearchTerm = options.correctedSearchTerm;
                this.loadFromQuerystring(this._window.location.search);
            };
            SearchCriteria.prototype.loadFromQuerystring = function (querystring) {
                this.loadNonFacetCriteria(querystring);
                this.loadFacetCriteria(querystring);
            };
            SearchCriteria.prototype.toQuerystring = function () {
                var queryBuilder = [], facetKey, facetIndex = 1, facetValue, selectedFacets = this.selectedFacets;
                if (!_.isEmpty(this.keywords) ||
                    !_.isEmpty(this.sortBy) ||
                    !_.isEmpty(this.sortDirection) ||
                    !_.isEmpty(this.page) && this.page > 1 ||
                    !_.isEmpty(this.selectedFacets)) {
                    queryBuilder.push('?');
                }
                if (!_.isEmpty(this.keywords) || !_.isEmpty(this.correctedSearchTerm)) {
                    queryBuilder.push('keywords=');
                    var keyword = _.isEmpty(this.correctedSearchTerm) ? this.keywords : this.correctedSearchTerm;
                    queryBuilder.push(this.encodeQuerystringValue(keyword));
                }
                if (!_.isEmpty(this.sortBy)) {
                    queryBuilder.push('&sortBy=');
                    queryBuilder.push(this.encodeQuerystringValue(this.sortBy));
                }
                if (!_.isEmpty(this.sortDirection)) {
                    queryBuilder.push('&sortDirection=');
                    queryBuilder.push(this.encodeQuerystringValue(this.sortDirection));
                }
                if (!_.isEmpty(this.page) && this.page > 1) {
                    queryBuilder.push('&page=');
                    queryBuilder.push(this.page.toString());
                }
                for (facetKey in selectedFacets) {
                    if (selectedFacets.hasOwnProperty(facetKey)) {
                        facetValue = selectedFacets[facetKey];
                        queryBuilder.push('&');
                        queryBuilder.push(SearchCriteria.facetFieldNameKeyPrefix);
                        queryBuilder.push(facetIndex.toString());
                        queryBuilder.push('=');
                        queryBuilder.push(this.encodeQuerystringValue(facetKey));
                        queryBuilder.push('&');
                        queryBuilder.push(SearchCriteria.facetValueKeyPrefix);
                        queryBuilder.push(facetIndex.toString());
                        queryBuilder.push('=');
                        queryBuilder.push(this.encodeQuerystringValue(_.isArray(facetValue) ? facetValue.join('|') : facetValue));
                        facetIndex++;
                    }
                }
                return queryBuilder.join('');
            };
            SearchCriteria.prototype.clearFacets = function () {
                this.resetPaging();
                this.selectedFacets = {};
            };
            SearchCriteria.prototype.addSingleFacet = function (facetKey, facetValue) {
                this.selectedFacets[facetKey] = facetValue;
            };
            SearchCriteria.prototype.updateMultiFacets = function (facets) {
                var _this = this;
                var facetKey, facetValues;
                this.resetPaging();
                this.clearSelectedMultiFacets();
                for (facetKey in facets) {
                    if (facets.hasOwnProperty(facetKey)) {
                        this.selectedFacets[facetKey] = [];
                        facetValues = (typeof facets[facetKey] === 'string' ?
                            [facets[facetKey]] : facets[facetKey]);
                        facetValues.forEach(function (value, index, array) {
                            _this.selectedFacets[facetKey].push(value);
                        });
                    }
                }
            };
            SearchCriteria.prototype.removeFacet = function (facetToRemove) {
                var facet;
                this.resetPaging();
                if (this.selectedFacets.hasOwnProperty(facetToRemove.facetFieldName)) {
                    facet = this.getSelectedFacetsArray(facetToRemove.facetFieldName);
                    if (facetToRemove.facetType.toLowerCase() === 'range') {
                        facet.selectedValues = undefined;
                    }
                    else {
                        // to string in case facetValue is a number
                        facet.selectedValues = _.without(facet.selectedValues, facetToRemove.facetValue.toString());
                    }
                    this.setSelectedFacet(facet);
                }
            };
            SearchCriteria.prototype.getSelectedFacetsArray = function (facetFieldName) {
                var isSelectedFacetArray;
                var selectedFacet = this.selectedFacets[facetFieldName];
                var selectedFacetArray;
                if (_.isArray(selectedFacet)) {
                    isSelectedFacetArray = true;
                    selectedFacetArray = selectedFacet;
                }
                else if (_.isString(selectedFacet)) {
                    isSelectedFacetArray = false;
                    selectedFacetArray = selectedFacet.split('|');
                }
                else {
                    throw new Error("The selected facet " + facetFieldName + " is not an array or a string");
                }
                return {
                    facetFieldName: facetFieldName,
                    selectedValues: selectedFacetArray,
                    isFacetArray: isSelectedFacetArray
                };
            };
            SearchCriteria.prototype.setSelectedFacet = function (selectedFacet) {
                var facetStr = '';
                if (_.isEmpty(selectedFacet.selectedValues)) {
                    delete this.selectedFacets[selectedFacet.facetFieldName];
                }
                else {
                    if (selectedFacet.isFacetArray) {
                        this.selectedFacets[selectedFacet.facetFieldName] = selectedFacet.selectedValues;
                    }
                    else {
                        _.each(selectedFacet.selectedValues, function (v) {
                            if (!_.isEmpty(facetStr)) {
                                facetStr = facetStr + '|';
                            }
                            facetStr = facetStr + v;
                        });
                        this.selectedFacets[selectedFacet.facetFieldName] = facetStr;
                    }
                }
            };
            SearchCriteria.prototype.clearSelectedMultiFacets = function () {
                var _this = this;
                var selectedFacets = this.selectedFacets, facetKey, facetKeysToDelete = [];
                for (facetKey in selectedFacets) {
                    if (selectedFacets.hasOwnProperty(facetKey) && this._facetRegistry[facetKey] === 'multiselect') {
                        facetKeysToDelete.push(facetKey);
                    }
                }
                facetKeysToDelete.forEach(function (facetKey) {
                    delete _this.selectedFacets[facetKey];
                });
            };
            SearchCriteria.prototype.resetPaging = function () {
                this.page = 1;
            };
            SearchCriteria.prototype.loadFacetCriteria = function (querystring) {
                var _this = this;
                // TODO: Don't need to loop over querystring again. Should
                // be processing this in the same loop as the non-facet criteria.
                var facetFieldName, facetValue, key, keys = {}, keyValues = {};
                if (querystring.length === 0) {
                    return;
                }
                querystring.substring(1).split('&').forEach(function (value, index, array) {
                    var keyValue = value.split('='), keyFound, valueFound;
                    if (keyValue.length === 2) {
                        keyFound = keyValue[0].toLowerCase();
                        valueFound = _this.decodeQuerystringValue(keyValue[1]);
                        if (keyFound.indexOf(SearchCriteria.facetFieldNameKeyPrefix) === 0) {
                            keys[keyFound.replace(SearchCriteria.facetFieldNameKeyPrefix, '')] = valueFound;
                        }
                        if (keyFound.indexOf(SearchCriteria.facetValueKeyPrefix) === 0) {
                            keyValues[keyFound.replace(SearchCriteria.facetValueKeyPrefix, '')] = valueFound;
                        }
                    }
                });
                for (key in keys) {
                    if (keys.hasOwnProperty(key)) {
                        facetFieldName = this.decodeQuerystringValue(keys[key]);
                        if (keyValues.hasOwnProperty(key)) {
                            facetValue = this.decodeQuerystringValue(keyValues[key]);
                            switch (this._facetRegistry[facetFieldName]) {
                                case 'multiselect':
                                    this.selectedFacets[facetFieldName] = facetValue.split('|');
                                    break;
                                default:
                                    this.selectedFacets[facetFieldName] = facetValue;
                                    break;
                            }
                        }
                    }
                }
            };
            SearchCriteria.prototype.loadNonFacetCriteria = function (querystring) {
                var _this = this;
                if (querystring.length === 0) {
                    return;
                }
                querystring.substring(1).split('&').forEach(function (value, index, array) {
                    var keyValue = value.split('='), keyFound, valueFound;
                    if (keyValue.length === 2) {
                        keyFound = keyValue[0].toUpperCase();
                        valueFound = _this.decodeQuerystringValue((keyValue[1] + ''));
                        switch (keyFound) {
                            case 'KEYWORDS':
                                _this.keywords = valueFound;
                                break;
                            case 'SORTBY':
                                _this.sortBy = valueFound;
                                break;
                            case 'SORTDIRECTION':
                                _this.sortDirection = valueFound;
                                break;
                            case 'PAGE':
                                _this.page = parseInt(valueFound, 10);
                                break;
                            default:
                                break;
                        }
                    }
                });
            };
            SearchCriteria.prototype.encodeQuerystringValue = function (valueToEncode) {
                return encodeURIComponent(valueToEncode).replace(/%20/g, '+');
            };
            SearchCriteria.prototype.decodeQuerystringValue = function (valueToDecode) {
                return decodeURIComponent(valueToDecode).replace(/\+/g, ' ');
            };
            SearchCriteria.facetFieldNameKeyPrefix = 'fn';
            SearchCriteria.facetValueKeyPrefix = 'fv';
            return SearchCriteria;
        }());
        Composer.SearchCriteria = SearchCriteria;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='../../../../../Composer.UI/Source/TypeScript/Events/IEventInformation.ts' />
/// <reference path='../../../../../Composer.UI/Source/TypeScript/Generics/Collections/IHashtable.ts' />
/// <reference path='../ISearchCriteriaOptions.ts' />



/// <reference path='../../../../../Composer.UI/Source/Typings/tsd.d.ts' />
/// <reference path='../../../../../Composer.UI/Source/TypeScript/Events/IEventHub.ts' />
/// <reference path='../../../../../Composer.UI/Source/TypeScript/Events/IEventInformation.ts' />
/// <reference path='../SearchCriteria.ts' />
/// <reference path='./ISearchService.ts' />
/// <reference path='../IFacet.ts' />
/// <reference path='../ISingleSelectCategory.ts' />
///
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        // TODO: Decouple window object from search service.
        var SearchService = (function () {
            function SearchService(_eventHub, _window) {
                this._eventHub = _eventHub;
                this._window = _window;
                this._baseSearchUrl = window.location.href.replace(window.location.search, '');
                this._baseUrl = this._baseSearchUrl.replace(window.location.pathname, '');
                this._facetRegistry = {};
                this._searchCriteria = new Composer.SearchCriteria(_eventHub, _window);
            }
            /**
             * Initializes the search service.
             *
             * param facetRegistry Facets available to the search service.
             */
            SearchService.prototype.initialize = function (options) {
                this.registerSubscriptions();
                this._searchCriteria.initialize(options);
            };
            SearchService.prototype.singleFacetsChanged = function (eventInformation) {
                var facetKey = eventInformation.data.facetKey, facetValue = eventInformation.data.facetValue;
                this._searchCriteria.addSingleFacet(facetKey, facetValue);
                this.search();
            };
            SearchService.prototype.sortingChanged = function (eventInformation) {
                var dataUrl = eventInformation.data.url;
                this._window.location.href = dataUrl;
            };
            SearchService.prototype.getSelectedFacets = function () {
                return this._searchCriteria.selectedFacets;
            };
            SearchService.prototype.multiFacetChanged = function (eventInformation) {
                this._searchCriteria.updateMultiFacets(eventInformation.data.filter);
                this.search();
            };
            SearchService.prototype.clearFacets = function (eventInformation) {
                var landingPageUrl = eventInformation.data.landingPageUrl;
                this._searchCriteria.clearFacets();
                if (landingPageUrl) {
                    this._baseSearchUrl = landingPageUrl;
                }
                this.search();
            };
            SearchService.prototype.removeFacet = function (eventInformation) {
                var facet = eventInformation.data;
                this._searchCriteria.removeFacet(facet);
                if (facet.facetLandingPageUrl && facet.facetType === 'SingleSelect') {
                    this._baseSearchUrl = facet.facetLandingPageUrl;
                }
                this.search();
            };
            SearchService.prototype.addSingleSelectCategory = function (eventInformation) {
                var singleSelectCategory = eventInformation.data;
                this._baseSearchUrl = singleSelectCategory.categoryUrl;
                this.search();
            };
            SearchService.prototype.registerSubscriptions = function () {
                this._eventHub.subscribe('sortingChanged', this.sortingChanged.bind(this));
                this._eventHub.subscribe('singleFacetsChanged', this.singleFacetsChanged.bind(this));
                this._eventHub.subscribe('multiFacetChanged', this.multiFacetChanged.bind(this));
                this._eventHub.subscribe('facetsCleared', this.clearFacets.bind(this));
                this._eventHub.subscribe('facetRemoved', this.removeFacet.bind(this));
                this._eventHub.subscribe('singleCategoryAdded', this.addSingleSelectCategory.bind(this));
            };
            SearchService.prototype.search = function () {
                this._window.location.href = this._baseSearchUrl + this._searchCriteria.toQuerystring();
            };
            return SearchService;
        }());
        Composer.SearchService = SearchService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='../../../../../Composer.UI/Source/Typings/tsd.d.ts' />
/// <reference path='../../../../../Composer.UI/Source/TypeScript/JqueryPlugins/ISerializeObjectJqueryPlugin.ts' />
/// <reference path='../../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
/// <reference path='../../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
/// <reference path='../../../../../Composer.UI/Source/TypeScript/Mvc/IControllerContext.ts' />
///<reference path='../../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
/// <reference path='../../../../../Composer.UI/Source/TypeScript/Events/IEventHub.ts' />
/// <reference path='../../../../../Composer.UI/Source/TypeScript/System/IDisposable.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var SliderService = (function () {
            function SliderService(context, eventHub) {
                this.context = context;
                this.eventHub = eventHub;
                this.context = context;
            }
            SliderService.prototype.initialize = function (selectedValues) {
                this.applyButtonContext = this.context.find(':submit');
                this.mapData(this.context.data());
                this.initializeSlider(selectedValues);
            };
            SliderService.prototype.dispose = function () {
                this.sliderInstance.destroy();
            };
            SliderService.prototype.mapData = function (containerData) {
                this.step = containerData.step || 1;
                this.maxLabel = containerData.maxLabel;
                this.maxValue = containerData.max;
                this.minValue = containerData.min;
                this.facetFieldName = containerData.facetfieldname;
            };
            SliderService.prototype.dirtied = function () {
                this.applyButtonContext.prop('disabled', false);
            };
            /**
             * Formatting for the formatted values of the slider. When getting.
             */
            SliderService.prototype.formatFrom = function (value) {
                if (this.maxLabel && value === this.maxLabel) {
                    value = this.maxValue;
                }
                return value;
            };
            /**
             * Formatting for the formatted values of the slider. When setting.
             */
            SliderService.prototype.formatTo = function (value) {
                value = parseInt(value, 10) || 0;
                if (this.maxLabel && value === this.maxValue) {
                    value = this.maxLabel;
                }
                return value;
            };
            SliderService.prototype.initializeSlider = function (facetData) {
                var _this = this;
                var sliderElement = this.context.find('.range').get(0);
                var defaultRange = [this.minValue, this.maxValue];
                var startRange = defaultRange;
                var selectedRange;
                var lowerRangeContext = this.context.find('.js-lowerValue');
                var upperRangeContext = this.context.find('.js-higherValue');
                // TODO handle array or not array
                if (facetData) {
                    selectedRange = facetData.split('|');
                    startRange = defaultRange.map(function (value, index) {
                        return selectedRange[index] ? selectedRange[index] : defaultRange[index];
                    });
                }
                this.sliderInstance = this.createSlider(startRange, sliderElement);
                this.sliderInstance.on('set', function (values, handle) {
                    _this.dirtied();
                });
                this.sliderInstance.on('update', function (values, handle) {
                    lowerRangeContext.val(values[0]);
                    upperRangeContext.val(values[1]);
                });
                lowerRangeContext.on('keyup', function (event) { return _this.dirtied(); });
                upperRangeContext.on('keyup', function (event) { return _this.dirtied(); });
                lowerRangeContext.on('blur', function (event) { return _this.sliderInstance.set([$(event.target).val(), null]); });
                upperRangeContext.on('blur', function (event) { return _this.sliderInstance.set([null, $(event.target).val()]); });
            };
            SliderService.prototype.createSlider = function (startRange, sliderElement) {
                var _this = this;
                noUiSlider.create(sliderElement, {
                    start: startRange,
                    connect: true,
                    margin: this.step,
                    step: this.step,
                    range: {
                        'min': this.minValue,
                        'max': this.maxValue
                    },
                    format: {
                        to: function (value) { return _this.formatTo(value); },
                        from: function (value) { return _this.formatFrom(value); }
                    }
                });
                return sliderElement.noUiSlider;
            };
            SliderService.prototype.getKey = function () {
                return this.facetFieldName;
            };
            SliderService.prototype.getValues = function () {
                var values = this.sliderInstance.get();
                if (values[1] === this.maxLabel) {
                    values[1] = undefined;
                }
                return values;
            };
            return SliderService;
        }());
        Composer.SliderService = SliderService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var UrlHelper = (function () {
            function UrlHelper() {
            }
            UrlHelper.resolvePageType = function () {
                if (window.location.href.indexOf('keywords') !== -1) {
                    return 'search';
                }
                else {
                    return 'browse';
                }
            };
            return UrlHelper;
        }());
        Composer.UrlHelper = UrlHelper;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/JqueryPlugins/ISerializeObjectJqueryPlugin.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerContext.ts' />
/// <reference path='./Services/SearchService.ts' />
/// <reference path='./Services/ISearchService.ts' />
/// <reference path='./Services/SliderService.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
/// <reference path='./UrlHelper.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var FacetSearchController = (function (_super) {
            __extends(FacetSearchController, _super);
            function FacetSearchController() {
                _super.apply(this, arguments);
                this._debounceTimeout = 500;
                this.sliderServicesInstances = {};
            }
            FacetSearchController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.initializeServices();
            };
            FacetSearchController.prototype.multiFacetChanged = function (actionContext) {
                var _this = this;
                if (!_.isEmpty(this._debounceHandle)) {
                    this._debounceHandle.cancel();
                }
                var anchorContext = actionContext.elementContext, facetFieldName = anchorContext.attr('name'), facetValue = anchorContext.attr('value');
                this._debounceHandle = _.debounce(function () {
                    _this.eventHub.publish('multiFacetChanged', {
                        data: {
                            facetKey: facetFieldName,
                            facetValue: facetValue,
                            pageType: Composer.UrlHelper.resolvePageType(),
                            filter: $('form[name="searchFacets"]', _this.context.container).serializeObject()
                        }
                    });
                }, 250);
                this._debounceHandle();
            };
            FacetSearchController.prototype.dispose = function () {
                var _this = this;
                _super.prototype.dispose.call(this);
                Object.keys(this.sliderServicesInstances).forEach(function (sliderServiceKey) { return _this.sliderServicesInstances[sliderServiceKey].dispose(); });
            };
            FacetSearchController.prototype.singleFacetChanged = function (actionContext) {
                var anchorContext = actionContext.elementContext, facetFieldName = anchorContext.data('facetfieldname'), facetValue = anchorContext.data('facetvalue'), facets = {};
                actionContext.event.preventDefault();
                actionContext.event.stopPropagation();
                this.eventHub.publish('singleFacetsChanged', {
                    data: {
                        facetKey: facetFieldName,
                        facetValue: facetValue,
                        pageType: Composer.UrlHelper.resolvePageType()
                    }
                });
            };
            FacetSearchController.prototype.toggleFacetList = function (actionContext) {
                actionContext.event.preventDefault();
                var buttonContext = actionContext.elementContext, label = buttonContext.html(), showMoreLabel = buttonContext.data('label-showmore'), showLessLabel = buttonContext.data('label-showless');
                buttonContext.html(label === showMoreLabel ? showLessLabel : showMoreLabel);
            };
            FacetSearchController.prototype.refineByRange = function (actionContext) {
                actionContext.event.preventDefault();
                var container = actionContext.elementContext.closest('[data-facetfieldname]');
                var sliderServiceInstance = this.sliderServicesInstances[container.data('facetfieldname')];
                var values = sliderServiceInstance.getValues();
                var key = sliderServiceInstance.getKey();
                this.eventHub.publish('singleFacetsChanged', {
                    data: {
                        facetKey: key,
                        facetValue: values.join('|')
                    }
                });
            };
            FacetSearchController.prototype.initializeServices = function () {
                var _this = this;
                var selectedFacets;
                var correctedSearchTerm = this.context.container.attr('data-corrected-search-term');
                this._searchService = new Composer.SearchService(this.eventHub, window);
                this._searchService.initialize({
                    facetRegistry: this.buildFacetRegistry(),
                    correctedSearchTerm: correctedSearchTerm
                });
                selectedFacets = this._searchService.getSelectedFacets();
                this.context.container.find('[data-facettype="Range"]').each(function (index, element) {
                    var facetFieldName = $(element).data('facetfieldname');
                    var serviceInstance = new Composer.SliderService($(element), _this.eventHub);
                    serviceInstance.initialize(selectedFacets[facetFieldName]);
                    _this.sliderServicesInstances[facetFieldName] = serviceInstance;
                });
            };
            FacetSearchController.prototype.buildFacetRegistry = function () {
                var facetRegistry = {};
                $('[data-facettype]', this.context.container)
                    .add($('#selectedFacets [data-facetfieldname]', this.context.container))
                    .each(function (index, item) {
                    var facetType, facetFieldName, facetGroup = $(item);
                    facetFieldName = facetGroup.data('facetfieldname');
                    facetType = facetGroup.data('facettype').toLowerCase();
                    facetRegistry[facetFieldName] = facetType;
                });
                return facetRegistry;
            };
            return FacetSearchController;
        }(Orckestra.Composer.Controller));
        Composer.FacetSearchController = FacetSearchController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/JqueryPlugins/ISerializeObjectJqueryPlugin.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerContext.ts' />
/// <reference path='./Services/SearchService.ts' />
/// <reference path='./Services/ISearchService.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var ProductSearchController = (function (_super) {
            __extends(ProductSearchController, _super);
            function ProductSearchController() {
                _super.apply(this, arguments);
                this._debounceTimeout = 500;
            }
            ProductSearchController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.initializeSearchService();
            };
            ProductSearchController.prototype.multiFacetChanged = function (actionContext) {
                var _this = this;
                if (!_.isEmpty(this._debounceHandle)) {
                    this._debounceHandle.cancel();
                }
                var anchorContext = actionContext.elementContext, facetFieldName = anchorContext.attr('name'), facetValue = anchorContext.attr('value');
                this._debounceHandle = _.debounce(function () {
                    _this.eventHub.publish('multiFacetChanged', {
                        data: {
                            facetKey: facetFieldName,
                            facetValue: facetValue,
                            pageType: 'browse',
                            filter: $('form[name="searchFacets"]', _this.context.container).serializeObject()
                        }
                    });
                }, 250);
                this._debounceHandle();
            };
            ProductSearchController.prototype.singleFacetChanged = function (actionContext) {
                var anchorContext = actionContext.elementContext, facetFieldName = anchorContext.data('facetfieldname'), facetValue = anchorContext.data('facetvalue'), facets = {};
                actionContext.event.preventDefault();
                actionContext.event.stopPropagation();
                this.eventHub.publish('singleFacetsChanged', {
                    data: {
                        facetKey: facetFieldName,
                        facetValue: facetValue,
                        pageType: 'browse'
                    }
                });
            };
            ProductSearchController.prototype.removeSelectedFacet = function (actionContext) {
                var removeFacetButton = actionContext.elementContext;
                actionContext.event.preventDefault();
                actionContext.event.stopPropagation();
                this.eventHub.publish('facetRemoved', {
                    data: {
                        facetFieldName: removeFacetButton.data('facetfieldname'),
                        facetValue: removeFacetButton.data('facetvalue'),
                        facetType: removeFacetButton.data('facettype')
                    }
                });
            };
            ProductSearchController.prototype.clearSelectedFacets = function (actionContext) {
                actionContext.event.preventDefault();
                actionContext.event.stopPropagation();
                this.eventHub.publish('facetsCleared', null);
            };
            ProductSearchController.prototype.initializeSearchService = function () {
                this._searchService = new Composer.SearchService(this.eventHub, window);
                this._searchService.initialize({
                    facetRegistry: this.buildFacetRegistry()
                });
            };
            ProductSearchController.prototype.buildFacetRegistry = function () {
                var facetRegistry = {};
                $('[data-facettype]', this.context.container)
                    .add($('#selectedFacets [data-facetfieldname]', this.context.container))
                    .each(function (index, item) {
                    var facetType, facetFieldName, facetGroup = $(item);
                    facetFieldName = facetGroup.data('facetfieldname');
                    facetType = facetGroup.data('facettype').toLowerCase();
                    facetRegistry[facetFieldName] = facetType;
                });
                return facetRegistry;
            };
            return ProductSearchController;
        }(Orckestra.Composer.Controller));
        Composer.ProductSearchController = ProductSearchController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='../../../../Composer.Product.UI/Product/Source/TypeScript/ProductController.ts' />
///<reference path='IQuickViewController.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var QuickViewController = (function (_super) {
            __extends(QuickViewController, _super);
            function QuickViewController() {
                _super.apply(this, arguments);
                this.concern = 'productSearch';
            }
            QuickViewController.prototype.initialize = function () {
                this.setConcernWithContext();
                _super.prototype.initialize.call(this);
            };
            QuickViewController.prototype.setConcernWithContext = function () {
                var contextualConcern = this.context.container.closest('[data-concern]').data('concern');
                if (contextualConcern) {
                    this.concern = contextualConcern;
                }
            };
            QuickViewController.prototype.registerSubscriptions = function () {
                var _this = this;
                _super.prototype.registerSubscriptions.call(this);
                this.eventHub.subscribe(this.concern + 'QuickBuyLoaded', function (e) { return _this.onQuickBuyLoaded(e); });
            };
            QuickViewController.prototype.onQuickBuyLoaded = function (e) {
                var _this = this;
                this.render('ProductQuickView', e.data);
                this.productService.showQuickView();
                this.context.viewModel = JSON.parse(e.data['JsonContext'] || '{}');
                this.context.viewModel.source = e.source;
                this.setVariantId(this.context.viewModel.displayedVariantId);
                var priceDisplayBusy = this.asyncBusy({
                    msDelay: 300,
                    loadingIndicatorSelector: '.loading-indicator-pricediscount'
                });
                var addToCartBusy = this.asyncBusy({
                    msDelay: 300,
                    loadingIndicatorSelector: '.loading-indicator-inventory'
                });
                var promise = Q.all([this.calculatePrice(), this.renderData()])
                    .then(function () {
                    Composer.ErrorHandler.instance().removeErrors();
                }, function (reason) { return _this.onLoadingFailed(reason); })
                    .fin(function () {
                    priceDisplayBusy.done();
                    addToCartBusy.done();
                });
            };
            QuickViewController.prototype.onLoadingFailed = function (reason) {
                console.error('Failed loading the Product Quick View');
                Composer.ErrorHandler.instance().outputErrorFromCode('QuickViewLoadFailed');
            };
            QuickViewController.prototype.setVariantId = function (variantId) {
                var variant = (this.productService.getVariant(variantId) || {});
                this.productService.updateSelectedKvasWith(variant.Kvas, this.concern);
            };
            QuickViewController.prototype.onSelectedVariantIdChanged = function (e) {
                var _this = this;
                this.renderData()
                    .then(function () { return _this.onSelectedVariantIdChangedSuccess(); }, function (reason) { return _this.onSelectedVariantIdChangedFailed(reason); })
                    .done();
            };
            QuickViewController.prototype.onSelectedVariantIdChangedSuccess = function () {
                Composer.ErrorHandler.instance().removeErrors();
            };
            QuickViewController.prototype.onSelectedVariantIdChangedFailed = function (reason) {
                console.error('Error while changing the selected variant.', reason);
                this.renderUnavailableAddToCart();
                this.renderUnavailableQuantity(this.getCurrentQuantity());
                Composer.ErrorHandler.instance().outputErrorFromCode('SelectedVariantChangeFailed');
            };
            QuickViewController.prototype.onSelectedKvasChanged = function (e) {
                this.render('ProductQuickViewKvaItems', { KeyVariantAttributeItems: e.data });
            };
            QuickViewController.prototype.onImagesChanged = function (e) {
                if (this.isProductWithVariants() && this.isSelectedVariantUnavailable()) {
                    this.render('MainImageContent', this.getUnavailableMainImageContent(e));
                }
                else {
                    this.render('MainImageContent', e.data);
                }
            };
            QuickViewController.prototype.getUnavailableMainImageContent = function (e) {
                return {
                    DisplayName: e.data.DisplayName,
                    SelectedImage: {
                        ImageUrl: e.data.FallbackImageUrl
                    }
                };
            };
            QuickViewController.prototype.onPricesChanged = function (e) {
                if (this.isProductWithVariants() && this.isSelectedVariantUnavailable()) {
                    this.render('PriceDiscount', null);
                }
                else {
                    this.render('PriceDiscount', e.data);
                }
            };
            QuickViewController.prototype.renderUnavailableAddToCart = function () {
                var _this = this;
                return Q.fcall(function () { return _this.render('AddToCartQuickView', { IsUnavailable: true }); });
            };
            QuickViewController.prototype.renderAvailableAddToCart = function () {
                var _this = this;
                return this.inventoryService
                    .isAvailableToSell(this.context.viewModel.Sku)
                    .then(function (result) { return _this.render('AddToCartQuickView', { IsAvailableToSell: result }); });
            };
            QuickViewController.prototype.completeAddLineItem = function (quantityAdded) {
                var _this = this;
                return Q.fcall(function () { return _this.productService.closeQuickView(); });
            };
            QuickViewController.prototype.getListNameForAnalytics = function () {
                return this.context.viewModel.source;
            };
            return QuickViewController;
        }(Orckestra.Composer.ProductController));
        Composer.QuickViewController = QuickViewController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/JqueryPlugins/ISerializeObjectJqueryPlugin.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/ErrorHandling/ErrorHandler.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerContext.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Repositories/CartRepository.ts' />
/// <reference path='../../../../Composer.Cart.UI/CartSummary/Source/TypeScript/CartService.ts' />
/// <reference path='../../../Product/Source/TypeScript/ProductService.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var SearchResultsController = (function (_super) {
            __extends(SearchResultsController, _super);
            function SearchResultsController() {
                _super.apply(this, arguments);
                this.cartService = new Composer.CartService(new Composer.CartRepository(), this.eventHub);
                this.productService = new Composer.ProductService(this.eventHub, this.context);
            }
            SearchResultsController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.currentPage = this.getCurrentPage();
                this.eventHub.publish('searchResultRendered', {
                    data: {
                        ProductSearchResults: this.context.viewModel.ProductSearchResults,
                        ListName: this.context.viewModel.ListName,
                        PageNumber: this.currentPage.DisplayName,
                        MaxItemsPerPage: this.context.viewModel.MaxItemsPerPage
                    } });
            };
            SearchResultsController.prototype.getCurrentPage = function () {
                return _.find(this.context.viewModel.ProductSearchResults.Pagination.Pages, { IsCurrentPage: true }) || {};
            };
            SearchResultsController.prototype.addToCart = function (actionContext) {
                var _this = this;
                var productContext = $(actionContext.elementContext).closest('[data-product-id]');
                var hasVariants = productContext.data('hasVariants');
                //Do not use .data since it may parse the id as a number.
                var productId = productContext.attr('data-product-id');
                var variantId = productContext.attr('data-product-variant-id');
                var product = _.find(this.context.viewModel.ProductSearchResults.SearchResults, function (product) {
                    if (_.isEmpty(variantId)) {
                        return product.ProductId === productId;
                    }
                    else {
                        return product.ProductId === productId && product.VariantId === variantId;
                    }
                });
                var price = product.Pricing.IsOnSale ? product.Pricing.Price : product.Pricing.ListPrice;
                var busy = this.asyncBusy({ elementContext: actionContext.elementContext, containerContext: productContext });
                if (hasVariants === 'True') {
                    this.productService.loadQuickBuyProduct(productId, variantId, 'productSearch', this.context.viewModel.ListName)
                        .then(function (data) {
                        Composer.ErrorHandler.instance().removeErrors();
                        return data;
                    }, function (reason) { return _this.onAddToCartFailed(reason); })
                        .fin(function () { return busy.done(); });
                }
                else {
                    var productData = this.getProductDataForAnalytics(productId, price);
                    this.eventHub.publish('lineItemAdding', { data: productData });
                    this.cartService.addLineItem(productId, '' + price)
                        .then(function (data) {
                        Composer.ErrorHandler.instance().removeErrors();
                        return data;
                    }, function (reason) { return _this.onAddToCartFailed(reason); })
                        .fin(function () { return busy.done(); });
                }
            };
            SearchResultsController.prototype.onAddToCartFailed = function (reason) {
                console.error('Error on adding item to cart', reason);
                Composer.ErrorHandler.instance().outputErrorFromCode('AddToCartFailed');
            };
            SearchResultsController.prototype.searchProductClick = function (actionContext) {
                var index = actionContext.elementContext.data('index');
                var productId = actionContext.elementContext.data('productid').toString();
                var product = _.find(this.context.viewModel.ProductSearchResults.SearchResults, { ProductId: productId });
                this.eventHub.publish('productClick', { data: {
                        Product: product,
                        ListName: this.context.viewModel.ListName,
                        Index: index,
                        PageNumber: this.currentPage.DisplayName,
                        MaxItemsPerPage: this.context.viewModel.MaxItemsPerPage
                    } });
            };
            SearchResultsController.prototype.pagerPageChanged = function (actionContext) {
                this.context.window.location.href = actionContext.elementContext.val();
            };
            SearchResultsController.prototype.getProductDataForAnalytics = function (productId, price) {
                var results = this.context.viewModel.ProductSearchResults.SearchResults;
                var vm = _.find(results, function (r) { return r.ProductId === productId; });
                if (!vm) {
                    throw new Error("Could not find a product with the ID '" + productId + "'.");
                }
                var data = {
                    List: this.context.viewModel.ListName,
                    ProductId: vm.ProductId,
                    DisplayName: vm.DisplayName,
                    ListPrice: price,
                    Brand: vm.Brand,
                    CategoryId: vm.CategoryId,
                    Quantity: 1
                };
                return data;
            };
            return SearchResultsController;
        }(Orckestra.Composer.Controller));
        Composer.SearchResultsController = SearchResultsController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerContext.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var SearchSummaryController = (function (_super) {
            __extends(SearchSummaryController, _super);
            function SearchSummaryController() {
                _super.apply(this, arguments);
            }
            SearchSummaryController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                var productSearchResults = this.context.viewModel.ProductSearchResults;
                if (productSearchResults.TotalCount === 0 && productSearchResults.Keywords) {
                    this.eventHub.publish('noResultsFound', {
                        data: {
                            Keyword: productSearchResults.Keywords,
                            ListName: this.context.viewModel.ListName,
                        } });
                }
                if (!_.isEmpty(productSearchResults.CorrectedSearchTerms)
                    && productSearchResults.Keywords
                    && productSearchResults.TotalCount !== 0) {
                    this.eventHub.publish('searchTermCorrected', {
                        data: {
                            ProductSearchResults: productSearchResults,
                            KeywordEntered: productSearchResults.Keywords,
                            KeywordCorrected: productSearchResults.CorrectedSearchTerms,
                            ListName: this.context.viewModel.ListName,
                        } });
                }
            };
            return SearchSummaryController;
        }(Orckestra.Composer.Controller));
        Composer.SearchSummaryController = SearchSummaryController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/JqueryPlugins/ISerializeObjectJqueryPlugin.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerContext.ts' />
/// <reference path='./Services/SearchService.ts' />
/// <reference path='./Services/ISearchService.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
/// <reference path='./UrlHelper.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var SelectedFacetSearchController = (function (_super) {
            __extends(SelectedFacetSearchController, _super);
            function SelectedFacetSearchController() {
                _super.apply(this, arguments);
            }
            SelectedFacetSearchController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
            };
            SelectedFacetSearchController.prototype.removeSelectedFacet = function (actionContext) {
                var removeFacetButton = actionContext.elementContext;
                actionContext.event.preventDefault();
                actionContext.event.stopPropagation();
                this.eventHub.publish('facetRemoved', {
                    data: {
                        facetFieldName: removeFacetButton.data('facetfieldname'),
                        facetValue: removeFacetButton.data('facetvalue'),
                        facetType: removeFacetButton.data('facettype'),
                        facetLandingPageUrl: removeFacetButton.data('facetlandingpageurl')
                    }
                });
            };
            SelectedFacetSearchController.prototype.clearSelectedFacets = function (actionContext) {
                var clearFacetsButton = actionContext.elementContext;
                actionContext.event.preventDefault();
                actionContext.event.stopPropagation();
                this.eventHub.publish('facetsCleared', {
                    data: { landingPageUrl: clearFacetsButton.data('landingpageurl') }
                });
            };
            SelectedFacetSearchController.prototype.addSingleSelectCategory = function (actionContext) {
                var singleSelectCategory = actionContext.elementContext, anchorContext = actionContext.elementContext, facetFieldName = anchorContext.data('facetfieldname'), facetValue = anchorContext.data('facetvalue');
                actionContext.event.preventDefault();
                actionContext.event.stopPropagation();
                this.eventHub.publish('singleCategoryAdded', {
                    data: {
                        categoryUrl: singleSelectCategory.data('categoryurl'),
                        facetKey: facetFieldName,
                        facetValue: facetValue,
                        pageType: Composer.UrlHelper.resolvePageType()
                    }
                });
            };
            return SelectedFacetSearchController;
        }(Orckestra.Composer.Controller));
        Composer.SelectedFacetSearchController = SelectedFacetSearchController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/JqueryPlugins/ISerializeObjectJqueryPlugin.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerContext.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
/// <reference path='./UrlHelper.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var SortBySearchController = (function (_super) {
            __extends(SortBySearchController, _super);
            function SortBySearchController() {
                _super.apply(this, arguments);
            }
            SortBySearchController.prototype.sortingChanged = function (actionContext) {
                var anchorContext = actionContext.elementContext, dataSortingType = anchorContext.data('sorting'), dataUrl = anchorContext.data('url'), resolvePageType = Composer.UrlHelper.resolvePageType();
                actionContext.event.preventDefault();
                actionContext.event.stopPropagation();
                this.eventHub.publish('sortingChanged', {
                    data: {
                        sortingType: dataSortingType,
                        pageType: resolvePageType,
                        url: dataUrl
                    }
                });
            };
            return SortBySearchController;
        }(Orckestra.Composer.Controller));
        Composer.SortBySearchController = SortBySearchController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));



/// <reference path='../../Typings/tsd.d.ts' />
/// <reference path='./IPlugin.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Events/EventHub.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var SlickCarouselPlugin = (function () {
            function SlickCarouselPlugin() {
            }
            SlickCarouselPlugin.prototype.initialize = function (window, document) {
                this.subscriptEvents();
                this.initSlick();
            };
            ;
            SlickCarouselPlugin.prototype.initSlick = function () {
                $.each($('.js-slick-carousel'), function (index, element) {
                    var slickInstance = $(element);
                    var slickOptions = {
                        arrows: true,
                        responsive: [{
                                dots: false,
                                breakpoint: 1024,
                                settings: {
                                    slidesToShow: 3,
                                    infinite: true
                                }
                            }]
                    };
                    if (!$(slickInstance).hasClass('slick-initialized')) {
                        if (slickInstance.data('slick').mobileCarousel) {
                            var nbSlideToShow = slickInstance.data('slick').mobileSlidesToShow;
                            nbSlideToShow = (nbSlideToShow) ? nbSlideToShow : 2;
                            var nbSlideToScroll = slickInstance.data('slick').mobileSlidesToScroll;
                            nbSlideToScroll = (nbSlideToScroll) ? nbSlideToScroll : 2;
                            slickOptions.responsive.push({
                                breakpoint: 768,
                                arrows: false,
                                settings: {
                                    slidesToShow: nbSlideToShow,
                                    slidesToScroll: nbSlideToScroll,
                                    dots: true,
                                    infinite: true
                                }
                            });
                        }
                        else {
                            slickOptions.responsive.push({
                                breakpoint: 768,
                                arrows: false,
                                settings: 'unslick' // destroys slick
                            });
                        }
                        slickInstance.slick(slickOptions);
                    }
                });
            };
            ;
            SlickCarouselPlugin.prototype.subscriptEvents = function () {
                var _this = this;
                var self = this;
                $(window).on('resize', function () {
                    if ($(window).width() > 768) {
                        _this.initSlick();
                    }
                });
                Composer.EventHub.instance().subscribe('iniCarousel', function (data) {
                    _this.initSlick();
                });
            };
            return SlickCarouselPlugin;
        }());
        Composer.SlickCarouselPlugin = SlickCarouselPlugin;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
/// <reference path='../../../../Composer.Product.UI/Product/Source/TypeScript/ProductController.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Plugins/SlickCarouselPlugin.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var RelatedProductController = (function (_super) {
            __extends(RelatedProductController, _super);
            function RelatedProductController() {
                _super.apply(this, arguments);
                this.concern = 'relatedProduct';
                this.source = 'Related Products';
            }
            RelatedProductController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.getRelatedProducts();
            };
            RelatedProductController.prototype.getRelatedProducts = function () {
                var _this = this;
                var vm = this.context.viewModel;
                var identifiers = vm.ProductIdentifiers;
                this.productService.getRelatedProducts(identifiers)
                    .then(function (data) {
                    _this.products = data.Products;
                    //Need to map parent items to child item since handlebar doesnt seem to support
                    //partial parameters or path properly while it suppose to. Maybe an update of handlebar could solve the issue
                    //(3.01 right now).
                    vm.Products = _.each(data.Products, function (lineItem) {
                        lineItem.DisplayAddToCart = vm.DisplayAddToCart;
                        lineItem.DisplayPrices = vm.DisplayPrices;
                    });
                    _this.render('RelatedProducts', vm);
                    _this.eventHub.publish('iniCarousel', vm);
                    return vm;
                })
                    .then(function (vm) {
                    if (vm && vm.Products && vm.Products.length > 0) {
                        _this.eventHub.publish('relatedProductsLoaded', {
                            data: {
                                ListName: _this.getPageSource(),
                                Products: vm.Products
                            }
                        });
                    }
                })
                    .then(function (vm) { return _this.onGetRelatedProductsSuccess(vm); }, function (reason) { return _this.onGetRelatedProductsFailed(reason); });
            };
            RelatedProductController.prototype.onGetRelatedProductsSuccess = function (vm) {
                //Hook for other projects
            };
            RelatedProductController.prototype.onGetRelatedProductsFailed = function (reason) {
                console.error('Failed loading the related products', reason);
            };
            RelatedProductController.prototype.getPageSource = function () {
                return 'Related Products';
            };
            RelatedProductController.prototype.getListNameForAnalytics = function () {
                return 'Related Products';
            };
            RelatedProductController.prototype.onLoadingFailed = function (reason) {
                console.error('Failed loading the Related Product View');
                Composer.ErrorHandler.instance().outputErrorFromCode('RelatedProductLoadFailed');
            };
            RelatedProductController.prototype.addToCart = function (actionContext) {
                var productContext = $(actionContext.elementContext).closest('[data-product-id]');
                var hasVariants = productContext.data('hasVariants');
                var productId = productContext.attr('data-product-id');
                var variantId = productContext.attr('data-product-variant-id');
                var price = productContext.data('price');
                var busy = this.asyncBusy({ elementContext: actionContext.elementContext, containerContext: productContext });
                var promise;
                if (hasVariants) {
                    promise = this.addVariantProductToCart(productId, variantId, price);
                }
                else {
                    promise = this.addNonVariantProductToCart(productId, price);
                }
                promise.fin(function () { return busy.done(); });
            };
            /**
             * Occurs when adding a product to the cart that happens to have variants.
             */
            RelatedProductController.prototype.addVariantProductToCart = function (productId, variantId, price) {
                var _this = this;
                var promise = this.productService.loadQuickBuyProduct(productId, variantId, this.concern, this.source);
                promise.fail(function (reason) { return _this.onLoadingFailed(reason); });
                return promise;
            };
            /**
             * Occurs when adding a product to the cart that has no variant.
             */
            RelatedProductController.prototype.addNonVariantProductToCart = function (productId, price) {
                var _this = this;
                var vm = this.getProductViewModel(productId);
                if (vm) {
                    var quantity = this.getCurrentQuantity();
                    var data = this.getProductDataForAnalytics(vm);
                    data.Quantity = quantity.Value ? quantity.Value : 1;
                    this.eventHub.publish('lineItemAdding', {
                        data: data
                    });
                }
                var promise = this.cartService.addLineItem(productId, price)
                    .then(function (vm) { return _this.onAddLineItemSuccess(vm); }, function (reason) { return _this.onAddLineItemFailed(reason); });
                return promise;
            };
            RelatedProductController.prototype.getProductViewModel = function (productId) {
                var productVM = _.find(this.products, function (p) {
                    return p.ProductId === productId;
                });
                if (!productVM) {
                    console.warn("Could not find the product with ID of " + productId + " within related products.\n                    This will cause the product to not be reported to Analytics.");
                }
                return productVM;
            };
            RelatedProductController.prototype.getCurrentQuantity = function () {
                return {
                    Min: 1,
                    Max: 1,
                    Value: 1
                };
            };
            RelatedProductController.prototype.relatedProductsClick = function (actionContext) {
                var index = actionContext.elementContext.data('index');
                var productId = actionContext.elementContext.data('productid').toString();
                var product = _.find(this.products, { ProductId: productId });
                this.eventHub.publish('productClick', { data: {
                        Product: product,
                        ListName: 'Related Products',
                        Index: index
                    } });
            };
            return RelatedProductController;
        }(Orckestra.Composer.ProductController));
        Composer.RelatedProductController = RelatedProductController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../../Composer.UI/Source/Typings/tsd.d.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var GeoLocationService = (function () {
            function GeoLocationService() {
                this._browserGeolocation = navigator.geolocation;
                this._geocoder = new google.maps.Geocoder();
            }
            GeoLocationService.prototype.geolocate = function () {
                var _this = this;
                if (this._browserGeolocation) {
                    return this.getCurrentLocation()
                        .catch(function (reason) {
                        console.log(reason);
                        return _this._currenctLocation;
                    });
                }
                return null;
            };
            GeoLocationService.prototype.getCurrentLocation = function () {
                var _this = this;
                var deferred = Q.defer();
                this._browserGeolocation.getCurrentPosition(function (pos) {
                    _this._currenctLocation = new google.maps.LatLng(pos.coords.latitude, pos.coords.longitude);
                    deferred.resolve(_this._currenctLocation);
                }, function () { deferred.reject('problems to get current location'); });
                return deferred.promise;
            };
            GeoLocationService.prototype.getAddtressByLocation = function (location) {
                var deferred = Q.defer();
                this._geocoder.geocode({ location: location }, function (results, status) {
                    if (status === google.maps.GeocoderStatus.OK) {
                        deferred.resolve(results[0].formatted_address);
                    }
                    else {
                        deferred.resolve('');
                    }
                });
                return deferred.promise;
            };
            GeoLocationService.prototype.getLocationByAddress = function (address) {
                var deferred = Q.defer();
                this._geocoder.geocode({ address: address }, function (results, status) {
                    if (status === google.maps.GeocoderStatus.OK) {
                        var location = results[0].geometry.location;
                        deferred.resolve(location);
                    }
                    else {
                        deferred.resolve(null);
                        console.log('Location not resolved by Google ' + address);
                    }
                });
                return deferred.promise;
            };
            /// By default render with default value for ViewModel.GoogleDirectionsLink (direction with Empty Start Point), 
            /// and when User Accept his Current Location, just in async task update HREF attributes and attach current location coordinates.
            /// We do not update the ViewModel before rendering, as we need to wait for User Input
            GeoLocationService.prototype.updateDirectionLinksWithLatLngSourceAddress = function (container, sourceLocation) {
                var _this = this;
                if (!sourceLocation) {
                    return;
                }
                var ctaDirs = container.find('.ctaGoogleDir');
                ctaDirs.each(function (ind, ctaDir) {
                    var href = $(ctaDir).attr('href');
                    if (href.indexOf('saddr') === -1) {
                        $(ctaDir).attr('href', _this.getDirectionLatLngSourceAddress(href, sourceLocation));
                    }
                });
            };
            GeoLocationService.prototype.getDirectionLatLngSourceAddress = function (baseUrl, sourceLocation) {
                return baseUrl + "&saddr=" + sourceLocation.lat() + "," + sourceLocation.lng();
            };
            return GeoLocationService;
        }());
        Composer.GeoLocationService = GeoLocationService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Mvc/ComposerClient.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
///<reference path='../../../StoreLocator/Source/TypeScript/Services/GeoLocationService.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var StoresDirectoryController = (function (_super) {
            __extends(StoresDirectoryController, _super);
            function StoresDirectoryController() {
                _super.apply(this, arguments);
                this._geoService = new Composer.GeoLocationService();
            }
            StoresDirectoryController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.initializeSearchBox();
                this.setGoogleDirectionLinks();
            };
            StoresDirectoryController.prototype.initializeSearchBox = function () {
                var input = this.context.container.find('#storeDirectorySearchInput')[0];
                this._searchBox = new google.maps.places.SearchBox(input);
            };
            // Action on Click on locator icon in search box
            StoresDirectoryController.prototype.currentLocationAction = function (actionContext) {
                actionContext.event.preventDefault();
                this.context.container.find('form').submit();
            };
            StoresDirectoryController.prototype.setGoogleDirectionLinks = function () {
                var _this = this;
                return this._geoService.geolocate().then(function (location) {
                    _this._geoService.updateDirectionLinksWithLatLngSourceAddress(_this.context.container, location);
                });
            };
            return StoresDirectoryController;
        }(Composer.Controller));
        Composer.StoresDirectoryController = StoresDirectoryController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../../Composer.UI/Source/Typings/tsd.d.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var GetStoresInventoryParam = (function () {
            function GetStoresInventoryParam() {
            }
            return GetStoresInventoryParam;
        }());
        Composer.GetStoresInventoryParam = GetStoresInventoryParam;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='./GetStoresInventoryParam.ts' />

///<reference path='../../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../../Composer.UI/Source/Typescript/Mvc/IControllerContext.ts' />
///<reference path='../../../../../Composer.UI/Source/Typescript/Mvc/ComposerClient.ts' />
///<reference path='../../../../../Composer.UI/Source/Typescript/Events/EventHub.ts' />
///<reference path='./IStoreInventoryService.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var StoreInventoryService = (function () {
            function StoreInventoryService() {
            }
            StoreInventoryService.prototype.getStoresInventory = function (param) {
                return Composer.ComposerClient.post('/api/storeinventory/storesinventory', param);
            };
            StoreInventoryService.prototype.getDefaultAddress = function () {
                return Composer.ComposerClient.get('/api/customer/getdefaultaddress');
            };
            StoreInventoryService.prototype.getSkuSelection = function (productId) {
                var data = {
                    ProductId: productId
                };
                return Composer.ComposerClient.post('/api/product/variantSelection', data);
            };
            return StoreInventoryService;
        }());
        Composer.StoreInventoryService = StoreInventoryService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
///<reference path='./Services/StoreInventoryService.ts' />
///<reference path='../../../StoreLocator/Source/TypeScript/Services/GeoLocationService.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Cache/CacheProvider.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var StoreInventoryController = (function (_super) {
            __extends(StoreInventoryController, _super);
            function StoreInventoryController() {
                _super.apply(this, arguments);
                this._concern = 'StoreInventory_';
                this._service = new Composer.StoreInventoryService();
                this._geoService = new Composer.GeoLocationService();
                this._searchPointAddressCacheKey = 'StoreLocatorSearchAddress';
                this.cache = Composer.CacheProvider.instance().defaultCache;
                this._getCurrentLocation = Q.defer();
            }
            StoreInventoryController.prototype.getCurrentLocation = function () {
                return this._getCurrentLocation.promise;
            };
            StoreInventoryController.prototype.initialize = function () {
                var _this = this;
                var getDefaultsTasks = [];
                var getDefaultAddressTask;
                _super.prototype.initialize.call(this);
                this.registerSubscriptions();
                this.initSearchBox();
                this.getDataFromContextViewModel();
                if (!this._selectedSku && this._productId) {
                    getDefaultsTasks.push(this._service.getSkuSelection(this._productId).then(function (result) {
                        _this._selectedSku = result.Sku;
                    }));
                }
                getDefaultsTasks.push(this.getDefaultAddress());
                Q.all(getDefaultsTasks).then(function () {
                    _this.getStoresInventory();
                }).fail(function (reason) { return console.log(_this._concern + reason); });
                this._geoService.geolocate().then(function (location) {
                    _this._getCurrentLocation.resolve(location);
                }, function (reason) { return _this._getCurrentLocation.resolve(null); });
            };
            StoreInventoryController.prototype.registerSubscriptions = function () {
                var _this = this;
                this.eventHub.subscribe('productDetailSelectedVariantIdChanged', function (e) { return _this.onSelectedVariantIdChanged(e); });
                this.eventHub.subscribe('inventorySearchPointChanged', function (e) { return _this.searchPointChanged(e); });
                this.context.window.addEventListener('hashchange', function () { return _this.onHashChanged(); });
            };
            StoreInventoryController.prototype.getDataFromContextViewModel = function () {
                this._selectedSku = this.context.viewModel.selectedSku;
                this._isAuthenticated = this.context.viewModel.isAuthenticated;
                this._pageSize = this.context.viewModel.pageSize;
                this._productId = this.context.viewModel.productId;
            };
            StoreInventoryController.prototype.initSearchBox = function () {
                var _this = this;
                this._searchBoxJQ = this.context.container.find('input[name="storeInventorySearchInput"]');
                this._searchBox = new google.maps.places.SearchBox(this._searchBoxJQ[0]);
                this._searchBox.addListener('places_changed', function () {
                    var places = _this._searchBox.getPlaces();
                    if (places && places.length && places[0].geometry) {
                        _this.eventHub.publish('inventorySearchPointChanged', { data: places[0].geometry.location });
                    }
                });
            };
            StoreInventoryController.prototype.searchPointChanged = function (e) {
                this._searchPoint = e.data;
                this.cache.set(this._searchPointAddressCacheKey, this._searchBoxJQ.val());
                this.getStoresInventory();
            };
            StoreInventoryController.prototype.onSelectedVariantIdChanged = function (e) {
                this._selectedSku = e.data.selectedSku;
                this.getStoresInventory();
            };
            StoreInventoryController.prototype.onHashChanged = function () {
                var _this = this;
                if (location.hash === '#storeinventory' && !this._searchPoint) {
                    this.getCurrentLocation()
                        .then(function (currentLocation) {
                        if (currentLocation) {
                            _this._searchPoint = currentLocation;
                            _this.getStoresInventory();
                            _this._geoService.getAddtressByLocation(currentLocation).then(function (result) {
                                _this.cache.set(_this._searchPointAddressCacheKey, result);
                                _this._searchBoxJQ.val(result);
                            });
                        }
                    });
                }
            };
            StoreInventoryController.prototype.getStoresInventory = function () {
                var _this = this;
                var debounceHandle;
                if (this._selectedSku) {
                    debounceHandle = _.debounce(function () { return _this.render('StoreInventoryList', { IsLoading: true }); }, 300);
                    return this._service.getStoresInventory(this.getStoresInventoryParam())
                        .then(function (result) {
                        debounceHandle.cancel();
                        _this.render('StoreInventoryList', result);
                        _this.setGoogleDirectionLinks();
                    })
                        .fail(function (reason) { return console.log(reason); });
                }
            };
            StoreInventoryController.prototype.nextPage = function (actionContext) {
                var _this = this;
                actionContext.event.preventDefault();
                var page = actionContext.elementContext.data('page');
                var busy = this.asyncBusy({ elementContext: actionContext.elementContext });
                this._service.getStoresInventory(this.getStoresInventoryParam(page))
                    .then(function (result) {
                    var target = actionContext.elementContext[0].parentElement;
                    var targetHtml = _this.getRenderedTemplateContents('StoreInventoryList', result);
                    busy.done();
                    $(target).replaceWith(targetHtml).stop().fadeIn();
                    _this.setGoogleDirectionLinks();
                })
                    .fail(function (reason) { return console.log(reason); });
            };
            StoreInventoryController.prototype.setGoogleDirectionLinks = function () {
                var _this = this;
                return this.getCurrentLocation().then(function (location) {
                    _this._geoService.updateDirectionLinksWithLatLngSourceAddress(_this.context.container, location);
                });
            };
            StoreInventoryController.prototype.getStoresInventoryParam = function (page) {
                if (page === void 0) { page = 1; }
                var param = new Composer.GetStoresInventoryParam();
                param.Sku = this._selectedSku;
                param.SearchPoint = this._searchPoint;
                param.Page = page;
                param.Pagesize = this._pageSize;
                return param;
            };
            StoreInventoryController.prototype.getDefaultAddress = function () {
                var _this = this;
                // try get address from local storage
                return this.cache.get(this._searchPointAddressCacheKey)
                    .then(function (cachedAddr) {
                    _this._searchBoxJQ.val(cachedAddr);
                    return _this._geoService.getLocationByAddress(cachedAddr);
                }, function (reason) {
                    // try get customer default delivery address
                    if (_this._isAuthenticated) {
                        return _this._service.getDefaultAddress()
                            .then(function (defaultAddr) {
                            var formattedAddress = defaultAddr.City + ", " + defaultAddr.RegionCode + " " + defaultAddr.PostalCode + ", " + defaultAddr.CountryCode;
                            _this._searchBoxJQ.val(formattedAddress);
                            return _this._geoService.getLocationByAddress(formattedAddress);
                        });
                    }
                })
                    .then(function (locationByAddress) {
                    _this._searchPoint = locationByAddress;
                });
            };
            return StoreInventoryController;
        }(Composer.Controller));
        Composer.StoreInventoryController = StoreInventoryController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));



///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/Typings/googlemaps/google.maps.d.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var Marker = (function () {
            function Marker(marker) {
                this._value = marker;
            }
            Object.defineProperty(Marker.prototype, "key", {
                get: function () {
                    return this._key;
                },
                set: function (key) {
                    this._key = key;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Marker.prototype, "value", {
                get: function () {
                    return this._value;
                },
                set: function (marker) {
                    this._value = marker;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Marker.prototype, "storeNumber", {
                get: function () {
                    return this._storeNumber;
                },
                set: function (value) {
                    this._storeNumber = value;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Marker.prototype, "isCluster", {
                get: function () {
                    return this._isCluster;
                },
                set: function (value) {
                    this._isCluster = value;
                },
                enumerable: true,
                configurable: true
            });
            Marker.prototype.setMap = function (map) {
                this._value.setMap(map);
            };
            Marker.prototype.setPosition = function (position) {
                this._value.setPosition(position);
            };
            return Marker;
        }());
        Composer.Marker = Marker;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='./Marker.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var MarkerPool = (function () {
            function MarkerPool(map, onMarkerCreate) {
                this.markers = [];
                this.indexedMarkersByKey = {};
                this._map = map;
                this._onMarkerCreate = onMarkerCreate;
            }
            MarkerPool.prototype.getMarkers = function () {
                return this.markers;
            };
            MarkerPool.prototype.get = function (isCluster) {
                if (isCluster === void 0) { isCluster = false; }
                var marker = isCluster ? this.createClusterMarker() : this.createMarker();
                marker.isCluster = isCluster;
                this._onMarkerCreate(marker);
                this.markers.push(marker);
                return marker;
            };
            MarkerPool.prototype.getExisting = function (key) {
                return this.indexedMarkersByKey[key];
            };
            MarkerPool.prototype.index = function (marker) {
                this.indexedMarkersByKey[marker.key] = marker;
            };
            MarkerPool.prototype.hasClusters = function () {
                for (var i = 0; i < this.markers.length; i++) {
                    if (this.markers[i] && this.markers[i].isCluster) {
                        return true;
                    }
                }
                return false;
            };
            MarkerPool.prototype.createMarker = function () {
                var marker = new MarkerWithLabel({
                    map: this._map,
                    labelInBackground: false,
                    labelClass: 'store-marker',
                    icon: '/UI.Package/Images/map/marker.png',
                    labelAnchor: new google.maps.Point(12, 42),
                    labelVisible: false
                });
                return new Composer.Marker(marker);
            };
            MarkerPool.prototype.createClusterMarker = function () {
                var marker = new MarkerWithLabel({
                    map: this._map,
                    labelInBackground: false,
                    labelClass: 'store-cluster-marker',
                    icon: '/UI.Package/Images/map/cluster.png',
                    labelAnchor: new google.maps.Point(12, 30),
                    labelVisible: false
                });
                return new Composer.Marker(marker);
            };
            MarkerPool.prototype.releaseAll = function () {
                for (var i = 0; i < this.markers.length; i++) {
                    if (this.markers[i]) {
                        this.markers[i].setMap(null);
                    }
                }
                delete this.markers;
                this.markers = [];
                this.indexedMarkersByKey = {};
            };
            MarkerPool.prototype.releaseByIndex = function (index) {
                var marker = this.indexedMarkersByKey[index];
                if (marker) {
                    delete this.indexedMarkersByKey[index];
                    marker.setMap(null);
                    delete this.markers[this.markers.indexOf(marker)];
                }
            };
            MarkerPool.prototype.releaseClusters = function () {
                var _this = this;
                this.markers.forEach(function (mr) {
                    if (mr.isCluster) {
                        _this.releaseByIndex(mr.key);
                    }
                });
            };
            MarkerPool.prototype.releaseMarkersByIds = function (iscluster, id) {
                var _this = this;
                if (!iscluster) {
                    this.markers.forEach(function (mr) {
                        if (mr && mr.isCluster && mr.storeNumber.indexOf(id) >= 0) {
                            _this.releaseByIndex(mr.key);
                            return;
                        }
                    });
                }
                else {
                    this.markers.forEach(function (mr) {
                        if (mr && !mr.isCluster && id.indexOf(mr.storeNumber) >= 0) {
                            _this.releaseByIndex(mr.key);
                            return;
                        }
                    });
                }
            };
            return MarkerPool;
        }());
        Composer.MarkerPool = MarkerPool;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Generics/Collections/IHashtable.ts' />
///<reference path='IMapOptions.ts' />
///<reference path='./MarkerPool.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var MapService = (function () {
            function MapService(eventHub) {
                this._mapInitialized = Q.defer();
                this._mapIdle = Q.defer();
                this._mapDragEnded = Q.defer();
                this.eventHub = eventHub;
            }
            MapService.prototype.initialize = function (mapOptions) {
                var _this = this;
                this._map = new google.maps.Map(mapOptions.mapCanvas, mapOptions.options);
                this._informationWindow = new google.maps.InfoWindow({ maxWidth: mapOptions.infoWindowMaxWidth });
                this._markerPool = new Composer.MarkerPool(this._map, function (marker) { _this.onNewMarkerCreated(marker); });
                this.setProjectionOverlay();
                google.maps.event.addListener(this._map, 'click', function () { return _this._informationWindow.close(); });
                google.maps.event.addListener(this._map, 'zoom_changed', function () { return _this._markerPool.releaseClusters(); });
                google.maps.event.addListener(this._map, 'bounds_changed', function () {
                    _this.mapDragEnded()
                        .then(function () {
                        _this.eventHub.publish('mapBoundsUpdated', { data: _this._map.getBounds() });
                    });
                });
                google.maps.event.addListener(this._map, 'idle', function () {
                    _this._mapIdle.resolve(_this);
                });
                google.maps.event.addListener(this._map, 'dragstart', function () {
                    _this._mapDragEnded = Q.defer();
                });
                google.maps.event.addListener(this._map, 'dragend', function () {
                    _this._mapDragEnded.resolve(_this);
                });
                this._mapInitialized.resolve(this);
                this._mapDragEnded.resolve(this);
            };
            MapService.prototype.setProjectionOverlay = function () {
                this._projectionOverlay = new google.maps.OverlayView();
                this._projectionOverlay.draw = function name() {
                    //
                };
                this._projectionOverlay.setMap(this._map);
            };
            MapService.prototype.getMap = function () {
                return this._map;
            };
            MapService.prototype.getInformationWindow = function () {
                return this._informationWindow;
            };
            MapService.prototype.getBounds = function (markerPadding) {
                var bounds = this._map.getBounds();
                if (markerPadding) {
                    var tr = new google.maps.LatLng(bounds.getNorthEast().lat(), bounds.getNorthEast().lng());
                    var bl = new google.maps.LatLng(bounds.getSouthWest().lat(), bounds.getSouthWest().lng());
                    var projection = this._projectionOverlay.getProjection();
                    if (projection) {
                        var trPix = projection.fromLatLngToDivPixel(tr);
                        var blPix = projection.fromLatLngToDivPixel(bl);
                        blPix.y = blPix.y + markerPadding;
                        trPix.y = trPix.y + markerPadding;
                        var sw = projection.fromDivPixelToLatLng(blPix);
                        var ne = projection.fromDivPixelToLatLng(trPix);
                        return new google.maps.LatLngBounds(sw, ne);
                    }
                }
                return bounds;
            };
            MapService.prototype.getZoom = function () {
                return this._map.getZoom();
            };
            MapService.prototype.onNewMarkerCreated = function (marker) {
                var _this = this;
                if (!marker) {
                    return;
                }
                if (marker.isCluster) {
                    google.maps.event.addListener(marker.value, 'click', function () {
                        _this.eventHub.publish('clusterClick', { data: marker });
                    });
                }
                else {
                    google.maps.event.addListener(marker.value, 'click', function () {
                        _this.eventHub.publish('markerClick', { data: marker });
                    });
                }
            };
            MapService.prototype.mapInitialized = function () {
                return this._mapInitialized.promise;
            };
            MapService.prototype.mapIdle = function () {
                return this._mapIdle.promise;
            };
            MapService.prototype.mapDragEnded = function () {
                return this._mapDragEnded.promise;
            };
            MapService.prototype.centerMap = function (storeBounds) {
                var _this = this;
                if (storeBounds != null) {
                    this.mapIdle().then(function () {
                        var southWest = new google.maps.LatLng(storeBounds.SouthWest.Lat, storeBounds.SouthWest.Lng);
                        var northEast = new google.maps.LatLng(storeBounds.NorthEast.Lat, storeBounds.NorthEast.Lng);
                        var bounds = new google.maps.LatLngBounds(southWest, northEast);
                        _this._map.fitBounds(bounds);
                        _this._mapIdle = Q.defer();
                    });
                }
            };
            MapService.prototype.openInformationWindow = function (content, anchor) {
                this._informationWindow.setContent(content);
                this._informationWindow.open(this._map, anchor);
            };
            MapService.prototype.setLocationInMap = function (point, zoomLevel) {
                var _this = this;
                if (zoomLevel === void 0) { zoomLevel = 11; }
                this.mapIdle().then(function () {
                    _this._map.setCenter(point);
                    _this._map.setZoom(zoomLevel);
                    _this._mapIdle = Q.defer();
                });
            };
            MapService.prototype.extendBounds = function (point1, point2) {
                var _this = this;
                this.mapIdle().then(function () {
                    var bounds = new google.maps.LatLngBounds();
                    bounds.extend(point1);
                    bounds.extend(point2);
                    _this._map.fitBounds(bounds);
                    _this._map.setCenter(bounds.getCenter());
                    _this._mapIdle = Q.defer();
                });
            };
            MapService.prototype.createMarkerOnMap = function (location, title) {
                return new google.maps.Marker({
                    position: location,
                    map: this._map,
                    title: title,
                    icon: 'https://maps.google.com/mapfiles/marker_orange.png'
                });
            };
            MapService.prototype.setMarkers = function (markerInfos, isSearch) {
                if (isSearch === void 0) { isSearch = false; }
                var curZoom = this.getZoom();
                var action = this._prevZoom === curZoom ? 'PAN' : this._prevZoom < curZoom ? 'ZOOM_IN' : 'ZOOM_OUT';
                if (!this._markerPool.hasClusters() && action === 'ZOOM_IN') {
                    this._markerPool.releaseAll();
                }
                if (isSearch) {
                    this._markerPool.releaseAll();
                }
                this._prevZoom = curZoom;
                this.transformResult(markerInfos, this._markerPool, action)
                    .then(function (newMarkers) {
                    newMarkers.forEach(function (m) {
                        m.value.labelVisible = true;
                    });
                });
            };
            MapService.prototype.transformResult = function (result, markerPool, action) {
                var deferred = Q.defer();
                var markers = [];
                function buildMarker(m) {
                    var key = m.Center.Lat + '-' + m.Center.Lng;
                    var marker = null;
                    var isCluster = m.ItemsCount > 1;
                    markerPool.releaseMarkersByIds(isCluster, m.StoreNumber);
                    marker = markerPool.getExisting(key);
                    if (!marker) {
                        marker = markerPool.get(isCluster);
                        var position = new google.maps.LatLng(m.Center.Lat, m.Center.Lng);
                        marker.value.setPosition(position);
                        marker.value.labelContent = (!isCluster ? m.SearchIndex : m.ItemsCount);
                        marker.key = key;
                        marker.storeNumber = m.StoreNumber;
                        marker.isCluster = isCluster;
                        markerPool.index(marker);
                        markers.push(marker);
                    }
                    marker.value.labelContent = (!isCluster ? m.SearchIndex : m.ItemsCount); //update search index;
                }
                for (var i = 0; i < result.length; i++) {
                    var ma = result[i];
                    buildMarker(ma);
                }
                deferred.resolve(markers);
                return deferred.promise;
            };
            return MapService;
        }());
        Composer.MapService = MapService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='./Services/GeoLocationService.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var StoreDetailsController = (function (_super) {
            __extends(StoreDetailsController, _super);
            function StoreDetailsController() {
                _super.apply(this, arguments);
                this._geoService = new Composer.GeoLocationService();
            }
            StoreDetailsController.prototype.initialize = function () {
                var _this = this;
                _super.prototype.initialize.call(this);
                var center = new google.maps.LatLng(this.context.viewModel.latitude, this.context.viewModel.longitude);
                var mapOptions = {
                    center: center,
                    zoom: this.context.viewModel.zoom ? this.context.viewModel.zoom : 14,
                    mapTypeId: google.maps.MapTypeId.ROADMAP,
                    panControl: false,
                    keyboardShortcuts: false,
                    scaleControl: false,
                    scrollwheel: false,
                    zoomControl: false,
                    draggable: false,
                    streetViewControl: false,
                    overviewMapControl: false,
                    overviewMapControlOptions: { opened: false },
                    disableDefaultUI: true
                };
                this._map = new google.maps.Map(this.context.container.find("#map")[0], mapOptions);
                this._marker = new google.maps.Marker({
                    position: center,
                    map: this._map,
                    icon: '/UI.Package/Images/map/marker-default.png'
                });
                this.context.window.addEventListener('resize', function () { return _this._map.setCenter(_this._marker.getPosition()); });
                this.setGoogleDirectionLink();
            };
            StoreDetailsController.prototype.setGoogleDirectionLink = function () {
                var _this = this;
                this._geoService.geolocate().then(function (location) {
                    _this._geoService.updateDirectionLinksWithLatLngSourceAddress(_this.context.container, location);
                });
            };
            return StoreDetailsController;
        }(Composer.Controller));
        Composer.StoreDetailsController = StoreDetailsController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../../Composer.UI/Source/Typings/tsd.d.ts' />

var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var StoreLocatorEndPointUrls = (function () {
            function StoreLocatorEndPointUrls() {
            }
            StoreLocatorEndPointUrls.GetStoresEndPointUrl = '/api/storelocator/stores';
            StoreLocatorEndPointUrls.GetStoreEndPointUrl = '/api/storelocator/store';
            StoreLocatorEndPointUrls.GetMapConfigurationEndPointUrl = '/api/storelocator/mapconfiguration';
            StoreLocatorEndPointUrls.GetMarkersEndPointUrl = '/api/storelocator/markers';
            return StoreLocatorEndPointUrls;
        }());
        Composer.StoreLocatorEndPointUrls = StoreLocatorEndPointUrls;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../../Composer.UI/Source/Typescript/Mvc/IControllerContext.ts' />
///<reference path='../../../../../Composer.UI/Source/Typescript/Mvc/ComposerClient.ts' />
///<reference path='../../../../../Composer.UI/Source/Typescript/Events/EventHub.ts' />
///<reference path='./IStoreLocatorService.ts' />
///<reference path='./StoreLocatorEndPointUrls.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var StoreLocatorService = (function () {
            function StoreLocatorService() {
            }
            StoreLocatorService.prototype.getStore = function (storeNumber) {
                if (!storeNumber) {
                    throw new Error('The Store Number is required');
                }
                if (!this.memoizeStore) {
                    this.memoizeStore =
                        _.memoize(this.getStoreImpl, function (storeNumber) { return storeNumber; });
                }
                return this.memoizeStore(storeNumber);
            };
            StoreLocatorService.prototype.getStoreImpl = function (storeNumber) {
                var data = { StoreNumber: storeNumber };
                return Composer.ComposerClient.post(Composer.StoreLocatorEndPointUrls.GetStoreEndPointUrl, data);
            };
            StoreLocatorService.prototype.getStores = function (southWest, northEast, searchPoint, page, pageSize) {
                var data = {
                    page: page,
                    pageSize: pageSize,
                    mapBounds: {
                        southWest: southWest,
                        northEast: northEast
                    },
                    searchPoint: searchPoint
                };
                return Composer.ComposerClient.post(Composer.StoreLocatorEndPointUrls.GetStoresEndPointUrl, data);
            };
            StoreLocatorService.prototype.getMapConfiguration = function () {
                return Composer.ComposerClient.get(Composer.StoreLocatorEndPointUrls.GetMapConfigurationEndPointUrl);
            };
            StoreLocatorService.prototype.getMarkers = function (southWest, northEast, zoomLevel, searchPoint, isSearch, pageSize) {
                var data = {
                    zoomLevel: zoomLevel,
                    mapBounds: {
                        southWest: southWest,
                        northEast: northEast
                    },
                    searchPoint: searchPoint,
                    isSearch: isSearch,
                    pageSize: pageSize
                };
                return Composer.ComposerClient.post(Composer.StoreLocatorEndPointUrls.GetMarkersEndPointUrl, data);
            };
            return StoreLocatorService;
        }());
        Composer.StoreLocatorService = StoreLocatorService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var StoreLocatorHistoryState = (function () {
            function StoreLocatorHistoryState() {
            }
            return StoreLocatorHistoryState;
        }());
        Composer.StoreLocatorHistoryState = StoreLocatorHistoryState;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
///<reference path='./Services/StoreLocatorService.ts' />
///<reference path='./MapService.ts' />
///<reference path='./Services/GeoLocationService.ts' />
///<reference path='./IStoreLocatorInitializationOptions.ts' />
///<reference path='./IMapOptions.ts' />
///<reference path='./StoreLocatorHistoryState.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Cache/CacheProvider.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var StoreLocatorController = (function (_super) {
            __extends(StoreLocatorController, _super);
            function StoreLocatorController() {
                _super.apply(this, arguments);
                this._storeLocatorService = new Composer.StoreLocatorService();
                this._geoService = new Composer.GeoLocationService();
                this._mapService = new Composer.MapService(this.eventHub);
                this._isRestoreListPaging = false;
                this._searchPointAddressCacheKey = 'StoreLocatorSearchAddress';
                this.cache = Composer.CacheProvider.instance().defaultCache;
                this._isSearch = false;
                this._getCurrentLocation = Q.defer();
            }
            StoreLocatorController.prototype.getCurrentLocation = function () {
                return this._getCurrentLocation.promise;
            };
            StoreLocatorController.prototype.initialize = function (options) {
                var _this = this;
                if (options === void 0) { options = {
                    mapId: 'map',
                    coordinates: { Lat: -33.8688, Lng: 151.2195 },
                    showNearestStoreInfo: true
                }; }
                _super.prototype.initialize.call(this);
                this.registerSubscriptions();
                this.initSearchBox();
                this._storeLocatorOptions = options;
                // get current location
                this._geoService.geolocate().then(function (location) {
                    _this._getCurrentLocation.resolve(location);
                }, function (reason) { return _this._getCurrentLocation.resolve(null); });
                // first check if address is posted from other page.
                var postedAddress = this._searchBoxJQ.val();
                if (!postedAddress) {
                    // then check history state
                    this.parseHistoryState();
                    // then if any entered address saved in local storage
                    this.cache.get(this._searchPointAddressCacheKey)
                        .then(function (cachedAddr) {
                        postedAddress = cachedAddr;
                        _this._searchBoxJQ.val(cachedAddr);
                    });
                }
                this._storeLocatorService.getMapConfiguration()
                    .then(function (configuration) {
                    var mapOptions = _this.getMapOptions();
                    if (configuration.ZoomLevel) {
                        _this._storeLocatorOptions.zoomLevel = configuration.ZoomLevel;
                    }
                    if (configuration.MarkerPadding) {
                        _this._storeLocatorOptions.markerPadding = configuration.MarkerPadding;
                    }
                    _this._mapService.initialize(mapOptions);
                    if (!_this._historyState) {
                        _this._mapService.centerMap(configuration.Bounds);
                    }
                    _this.searchBoxSetBounds(configuration.Bounds);
                    return _this._mapService.mapInitialized();
                })
                    .then(function (mapservice) {
                    if (_this._historyState) {
                        _this.restoreMapFromHistoryState();
                        return null;
                    }
                    if (postedAddress) {
                        return _this._geoService.getLocationByAddress(postedAddress);
                    }
                    else {
                        return _this.getCurrentLocation();
                    }
                })
                    .then(function (currentLocation) {
                    if (currentLocation) {
                        _this.eventHub.publish('searchPointChanged', { data: currentLocation });
                    }
                })
                    .fail(function (reason) { return _this.handlePromiseFail('StoreLocator Initialize', reason); });
            };
            StoreLocatorController.prototype.registerSubscriptions = function () {
                var _this = this;
                this.eventHub.subscribe('mapBoundsUpdated', function (e) { return _this.onMapBoundsUpdated(e.data, _this._isSearch); });
                this.eventHub.subscribe('searchPointChanged', function (e) { return _this.setSearchLocationInMap(e.data); });
                this.eventHub.subscribe('markerClick', function (e) { return _this.onMarkerClick(e.data); });
                this.eventHub.subscribe('clusterClick', function (e) { return _this.onClusterClick(e.data); });
            };
            StoreLocatorController.prototype.initSearchBox = function () {
                this._searchBoxJQ = this.context.container.find('input[name="storeLocatorSearchInput"]');
                this._searchBox = new google.maps.places.SearchBox(this._searchBoxJQ[0]);
                this.searchBoxOnPlacesChanged();
                this.searchBoxOnEnterPressed();
            };
            StoreLocatorController.prototype.searchBoxOnPlacesChanged = function () {
                var _this = this;
                this._searchBox.addListener('places_changed', function () {
                    clearTimeout(_this._enterPressedTimer);
                    var places = _this._searchBox.getPlaces();
                    if (places && places.length && places[0].geometry) {
                        _this.eventHub.publish('searchPointChanged', { data: places[0].geometry.location });
                    }
                });
            };
            StoreLocatorController.prototype.searchBoxOnEnterPressed = function () {
                var _this = this;
                this._searchBoxJQ.on('keypress', function (e) {
                    var key = e.which || e.keyCode;
                    if (key === 13) {
                        _this._enterPressedTimer = setTimeout(function () {
                            if (_this._searchPoint) {
                                _this.setSearchLocationInMap(_this._searchPoint);
                            }
                        }, 750);
                    }
                });
            };
            StoreLocatorController.prototype.getMapOptions = function () {
                var mapCenter = new google.maps.LatLng(this._storeLocatorOptions.coordinates.Lat, this._storeLocatorOptions.coordinates.Lng);
                var mapOptions = {
                    mapCanvas: this.context.container.find("#" + this._storeLocatorOptions.mapId)[0],
                    infoWindowMaxWidth: 450,
                    options: {
                        center: this._historyState ? this._historyState.point : mapCenter,
                        zoom: this._historyState ? this._historyState.zoom : 1,
                        mapTypeId: google.maps.MapTypeId.ROADMAP,
                        panControl: false,
                        keyboardShortcuts: true,
                        scaleControl: false,
                        scrollwheel: false,
                        zoomControl: true,
                        streetViewControl: false,
                        overviewMapControl: true,
                        overviewMapControlOptions: { opened: false }
                    }
                };
                return mapOptions;
            };
            StoreLocatorController.prototype.searchBoxSetBounds = function (bounds) {
                var southWest = new google.maps.LatLng(bounds.SouthWest.Lat, bounds.SouthWest.Lng);
                var northEast = new google.maps.LatLng(bounds.NorthEast.Lat, bounds.NorthEast.Lng);
                bounds = new google.maps.LatLngBounds(southWest, northEast);
                this._searchBox.setBounds(bounds);
            };
            StoreLocatorController.prototype.onMapBoundsUpdated = function (data, isSearch) {
                var _this = this;
                clearTimeout(this._timer);
                this._timer = setTimeout(function () {
                    _this.updateMarkers(data, isSearch);
                }, 750);
            };
            StoreLocatorController.prototype.onMarkerClick = function (marker) {
                var _this = this;
                if (marker != null && marker.storeNumber) {
                    this._storeLocatorService.getStore(marker.storeNumber)
                        .then(function (store) {
                        _this.getCurrentLocation().then(function (location) {
                            if (location) {
                                store.GoogleDirectionsLink = _this._geoService.getDirectionLatLngSourceAddress(store.GoogleDirectionsLink, location);
                            }
                            var content = _this.getRenderedTemplateContents('StoreMapMarkerInfo', store);
                            _this._mapService.openInformationWindow(content, marker.value);
                        });
                    })
                        .fail(function (reason) { return _this.handlePromiseFail('StoreLocator OnMarkerClick', reason); });
                }
            };
            StoreLocatorController.prototype.onClusterClick = function (marker) {
                this._mapService.getInformationWindow().close();
                this._mapService.getMap().panTo(marker.value.getPosition());
                marker.value.setMap(null);
                this._mapService.getMap().setZoom(this._mapService.getMap().getZoom() + 1);
            };
            StoreLocatorController.prototype.updateMarkers = function (data, isSearch) {
                var _this = this;
                if (isSearch === void 0) { isSearch = false; }
                var mapBounds = this._mapService.getBounds(this._storeLocatorOptions.markerPadding);
                var zoomLevel = this._mapService.getZoom();
                var searchPoint = this._searchPoint;
                var pageSize = this._isRestoreListPaging ? this._historyState.page * this.context.viewModel.pageSize : this.context.viewModel.pageSize;
                this._storeLocatorService.getMarkers(mapBounds.getSouthWest(), mapBounds.getNorthEast(), zoomLevel, searchPoint, isSearch, pageSize)
                    .then(function (result) {
                    if (result.Lat && result.Lng) {
                        _this._mapService.extendBounds(searchPoint, new google.maps.LatLng(result.Lat, result.Lng));
                    }
                    else {
                        _this._mapService.setMarkers(result.Markers, isSearch);
                        if (_this._isRestoreListPaging && result.NextPage) {
                            result.NextPage.Page = _this._historyState.page + 1;
                        }
                        _this.renderStoresList(result, null);
                        if (_this._isRestoreListPaging && _this._historyState.pos) {
                            $('html, body').animate({
                                scrollTop: _this._historyState.pos
                            }, 500);
                            _this.historyPushState(null, null, null, null, 0);
                        }
                        _this._isRestoreListPaging = false;
                        if (_this._storeLocatorOptions.showNearestStoreInfo && result.Stores) {
                            var firstStore = result.Stores[0];
                            if (firstStore && firstStore.SearchIndex === 1) {
                                _this.setNearestStoreInfo(firstStore.DestinationToSearchPoint);
                            }
                        }
                    }
                    _this.historyPushState(1, searchPoint, zoomLevel, _this._mapService.getBounds().getCenter());
                    _this._isSearch = false;
                })
                    .fail(function (reason) { return _this.handlePromiseFail('StoreLocator UpdateMarkers getMarkers', reason); });
            };
            StoreLocatorController.prototype.setSearchLocationInMap = function (point, zoomLevel) {
                if (zoomLevel === void 0) { zoomLevel = this._storeLocatorOptions.zoomLevel; }
                this._searchPoint = point;
                this.createSearchPoitMarker();
                this._isSearch = true;
                this.cache.set(this._searchPointAddressCacheKey, this._searchBoxJQ.val());
                this._mapService.setLocationInMap(point, zoomLevel);
            };
            StoreLocatorController.prototype.createSearchPoitMarker = function () {
                var title = this._searchBoxJQ.val();
                if (this._searchPointMarker == null) {
                    this._searchPointMarker = this._mapService.createMarkerOnMap(this._searchPoint, title);
                }
                else {
                    this._searchPointMarker.setPosition(this._searchPoint);
                    this._searchPointMarker.setTitle(title);
                }
            };
            // Action on Click on locator icon in search box
            StoreLocatorController.prototype.currentLocationAction = function (actionContext) {
                var _this = this;
                actionContext.event.preventDefault();
                this._geoService.geolocate()
                    .then(function (currentLocation) {
                    _this.eventHub.publish('searchPointChanged', { data: currentLocation });
                    return _this._geoService.getAddtressByLocation(currentLocation);
                })
                    .then(function (address) {
                    _this._searchBoxJQ.val(address);
                    _this._searchPointMarker.setTitle(address);
                })
                    .fail(function (reason) { return _this.handlePromiseFail('StoreLocator CurrentLocationAction', reason); });
            };
            // Next Page Action
            StoreLocatorController.prototype.nextPage = function (actionContext) {
                var page = actionContext.elementContext.data('page');
                this.getStoresForPage(page, this.context.viewModel.pageSize, actionContext.elementContext);
                actionContext.event.preventDefault();
            };
            // Remember element position in history
            StoreLocatorController.prototype.rememberPosition = function (actionContext) {
                var position = $(document).scrollTop();
                this.historyPushState(null, null, null, null, position);
            };
            StoreLocatorController.prototype.setNearestStoreInfo = function (info) {
                var nearestInfoPanel = $('#store-locator-nearest');
                if (!$('#nearestInfo').length) {
                    nearestInfoPanel.html(nearestInfoPanel.html().replace('{0}', '<strong id=\'nearestInfo\'></strong>'));
                }
                $('#nearestInfo').html(info);
                nearestInfoPanel.removeClass('hide');
            };
            StoreLocatorController.prototype.getStoresForPage = function (page, pageSize, element) {
                var _this = this;
                var mapBounds = this._mapService.getBounds(this._storeLocatorOptions.markerPadding);
                var searchPoint = this._searchPoint;
                var busy = this.asyncBusy({ elementContext: element });
                this._storeLocatorService.getStores(mapBounds.getSouthWest(), mapBounds.getNorthEast(), searchPoint, page, pageSize)
                    .then(function (stores) {
                    busy.done();
                    _this.renderStoresList(stores, element[0].parentElement);
                });
                this.historyPushState(page);
            };
            StoreLocatorController.prototype.renderStoresList = function (stores, target) {
                var listHtml = this.getRenderedTemplateContents('StoresList', stores);
                if (target == null) {
                    var $list = $('#storesList').html('').stop().fadeOut();
                    $list.html(listHtml).stop().fadeIn();
                }
                else {
                    var position = $(target).offset().top + $(document).scrollTop();
                    $(target).replaceWith(listHtml).stop().fadeIn();
                    $('html, body').animate({
                        scrollTop: position
                    }, 500);
                }
                this.setGoogleDirectionLinks();
            };
            StoreLocatorController.prototype.setGoogleDirectionLinks = function () {
                var _this = this;
                return this.getCurrentLocation().then(function (location) {
                    _this._geoService.updateDirectionLinksWithLatLngSourceAddress(_this.context.container, location);
                });
            };
            StoreLocatorController.prototype.historyPushState = function (page, point, zoom, center, elementPos) {
                if (!this._historyState) {
                    this._historyState = new Composer.StoreLocatorHistoryState();
                }
                if (page) {
                    this._historyState.page = page;
                }
                if (point) {
                    this._historyState.point = point;
                }
                if (zoom) {
                    this._historyState.zoom = zoom;
                }
                if (center) {
                    this._historyState.center = center;
                }
                if (elementPos >= 0) {
                    this._historyState.pos = elementPos;
                }
                if (this._historyState.point) {
                    var obj = {
                        'p_lat': this._historyState.point.lat(),
                        'p_lng': this._historyState.point.lng(),
                        'page': this._historyState.page,
                        'zoom': this._historyState.zoom,
                        'c_lat': this._historyState.center.lat(),
                        'c_lng': this._historyState.center.lng(),
                        'pos': this._historyState.pos
                    };
                    if (history.state) {
                        history.replaceState(obj, null, null);
                    }
                    else {
                        history.pushState(obj, null, null);
                    }
                }
            };
            StoreLocatorController.prototype.parseHistoryState = function () {
                if (history.state) {
                    this._historyState = new Composer.StoreLocatorHistoryState();
                    if (history.state.p_lat && history.state.p_lng) {
                        this._historyState.point = new google.maps.LatLng(history.state.p_lat, history.state.p_lng);
                    }
                    if (history.state.c_lat && history.state.c_lng) {
                        this._historyState.center = new google.maps.LatLng(history.state.c_lat, history.state.c_lng);
                    }
                    this._historyState.zoom = history.state.zoom;
                    this._historyState.page = history.state.page;
                    this._historyState.pos = history.state.pos;
                }
            };
            StoreLocatorController.prototype.restoreMapFromHistoryState = function () {
                console.log('Restore data from history state');
                this._searchPoint = this._historyState.point;
                this.createSearchPoitMarker();
                if (this._historyState.center) {
                    this._mapService.getMap().setCenter(this._historyState.center);
                }
                if (this._historyState.page > 1) {
                    this._isRestoreListPaging = true;
                }
            };
            StoreLocatorController.prototype.handlePromiseFail = function (title, reason) {
                console.log(title + ': ' + reason);
            };
            return StoreLocatorController;
        }(Composer.Controller));
        Composer.StoreLocatorController = StoreLocatorController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../Typings/tsd.d.ts' />
Handlebars.registerHelper('escape', function (options) {
    var innerContent = options.fn(this);
    var escapedContent = _.escape(innerContent);
    return new Handlebars.SafeString(escapedContent);
});

///<reference path='../../../Typings/tsd.d.ts' />
Handlebars.registerHelper('if_eq', function (left, right, options) {
    if (left === right) {
        return options.fn(this);
    }
    else {
        return options.inverse(this);
    }
});

///<reference path='../../../Typings/tsd.d.ts' />
Handlebars.registerHelper('if_exists', function (value, options) {
    if (typeof value !== 'undefined') {
        return options.fn(this);
    }
    else {
        return options.inverse(this);
    }
});

///<reference path='../../../Typings/tsd.d.ts' />
Handlebars.registerHelper('if_gt', function (left, right, options) {
    if (left > right) {
        return options.fn(this);
    }
    else {
        return options.inverse(this);
    }
});

///<reference path='../../../Typings/tsd.d.ts' />
Handlebars.registerHelper('if_gte', function (left, right, options) {
    if (left >= right) {
        return options.fn(this);
    }
    else {
        return options.inverse(this);
    }
});

///<reference path='../../../Typings/tsd.d.ts' />
Handlebars.registerHelper('if_lt', function (left, right, options) {
    if (left < right) {
        return options.fn(this);
    }
    else {
        return options.inverse(this);
    }
});

///<reference path='../../../Typings/tsd.d.ts' />
Handlebars.registerHelper('if_lte', function (left, right, options) {
    if (left <= right) {
        return options.fn(this);
    }
    else {
        return options.inverse(this);
    }
});

///<reference path='../../../Typings/tsd.d.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../Typings/tsd.d.ts' />
///<reference path='./IHandlebarsLocalization.ts' />
Handlebars.registerHelper('if_localized', function (categoryName, keyName, options) {
    if (Handlebars.localizationProvider.handleBarsHelper_isLocalized(categoryName, keyName)) {
        return options.fn(this);
    }
    else {
        return options.inverse(this);
    }
});

///<reference path='../../../Typings/tsd.d.ts' />
Handlebars.registerHelper('if_neq', function (left, right, options) {
    if (left !== right) {
        return options.fn(this);
    }
    else {
        return options.inverse(this);
    }
});

///<reference path='../../../Typings/tsd.d.ts' />
///<reference path='./IHandlebarsLocalization.ts' />
Handlebars.registerHelper('localizeFormat', function (categoryName, keyName) {
    var args = [];
    if (arguments.length > 2) {
        args = Array.prototype.slice.call(arguments, 2);
    }
    var value = Handlebars.localizationProvider
        .handleBarsHelper_localizeFormat(categoryName, keyName, args);
    return new Handlebars.SafeString(value);
});

///<reference path='../../../Typings/tsd.d.ts' />
///<reference path='./IHandlebarsLocalization.ts' />
Handlebars.registerHelper('localize', function (categoryName, keyName) {
    var value = Handlebars.localizationProvider.handleBarsHelper_localize(categoryName, keyName);
    return new Handlebars.SafeString(value);
});

//TODO: Custom errors and not being able to inherit from Error
// module Orckestra.Composer {
//     export class ControllerAlreadyRegisteredException implements Error {
//         public name = 'ControllerAlreadyRegisteredException';
//         constructor(public message: string = 'The controller has already been registered.') {
//         }
//     }
// }

//TODO: Custom errors and not being able to inherit from Error
// module Orckestra.Composer {
//     export class MissingControllerDispatcherNameException implements Error {
//         public name = 'MissingControllerDispatcherNameException';
//         constructor(public message: string = 'A name is required to create a controller dispatcher.') {
//         }
//     }
// }

///<reference path='../Generics/Collections/IHashTable.ts' />
///<reference path='./IController.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var ControllerRegistry = (function () {
            function ControllerRegistry() {
                if (ControllerRegistry._instance === void 0) {
                    ControllerRegistry._instance = this;
                }
                return ControllerRegistry._instance;
            }
            ControllerRegistry.prototype.isRegistered = function (controllerName) {
                return ControllerRegistry._registry.hasOwnProperty(controllerName);
            };
            ControllerRegistry.prototype.retrieveController = function (controllerName) {
                if (!this.isRegistered(controllerName)) {
                    throw new Error('Unable to unregister the controller ' + controllerName + ' because it does not exist in the registry');
                }
                return ControllerRegistry._registry[controllerName];
            };
            ControllerRegistry.prototype.register = function (controllerName, controller) {
                if (this.isRegistered(controllerName)) {
                    throw new Error('The controller ' + controllerName + ' is already registered.');
                }
                ControllerRegistry._registry[controllerName] = controller;
            };
            ControllerRegistry.prototype.unregister = function (controllerName) {
                var unregisteredController; // IController;
                if (!this.isRegistered(controllerName)) {
                    throw new Error('Unable to unregister the controller ' + controllerName + ' because it does not exist in the registry');
                }
                delete ControllerRegistry._registry[controllerName];
                return unregisteredController;
            };
            ControllerRegistry._registry = {}; //IHashTable<IController> = {};
            return ControllerRegistry;
        }());
        Composer.ControllerRegistry = ControllerRegistry;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../Typings/tsd.d.ts' />
///<reference path='./IControllerContext.ts' />
///<reference path='../Events/IEventHub.ts' />
///<reference path='../IComposerContext.ts' />
///<reference path='../IComposerConfiguration.ts' />

/// <reference path="../../typings/tsd.d.ts" />
/// <reference path="./IController.ts" />
/// <reference path="./ControllerRegistry.ts" />
/// <reference path="./ICreateControllerOptions.ts" />
/// <reference path="../Cache/ICache.ts" />
/// <reference path="../Events/IEventHub.ts" />
/// <reference path="../IComposerContext.ts" />
/// <reference path="../IComposerConfiguration.ts" />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        /**
        * Factory for creating controllers.
        */
        var ControllerFactory = (function () {
            function ControllerFactory() {
            }
            /**
            * Creates and returns an instance of a controller.
            */
            ControllerFactory.createController = function (options) {
                var controllerConstructor = ControllerFactory._controllerRegistry.retrieveController(options.controllerName);
                return new controllerConstructor(options.context, options.eventHub, options.composerContext, options.composerConfiguration);
            };
            ControllerFactory._controllerRegistry = new Orckestra.Composer.ControllerRegistry();
            return ControllerFactory;
        }());
        Composer.ControllerFactory = ControllerFactory;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));



///<reference path='../Typings/tsd.d.ts' />
///<reference path='./IComposerContext.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var ComposerContext = (function () {
            function ComposerContext() {
                this.language = (function () {
                    return document.getElementsByTagName('html')[0].getAttribute('lang');
                })();
            }
            return ComposerContext;
        }());
        Composer.ComposerContext = ComposerContext;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../Typings/tsd.d.ts' />
///<reference path='./Mvc/ControllerRegistry.ts' />
///<reference path='./Mvc/ControllerFactory.ts' />
///<reference path='./Templating/IComposerTemplates.ts' />
///<reference path='./Templating/IComposerTemplates.ts' />
///<reference path='./Mvc/Localization/LocalizationProvider.ts' />
///<reference path='./Mvc/Localization/ILocalizationProvider.ts' />
///<reference path='./Validation/IParsleyValidator.ts' />
///<reference path='./ComposerContext.ts' />
///<reference path='./IComposerConfiguration.ts' />
///<reference path='./Mvc/IControllerConfiguration.ts' />
///<reference path='./Plugins/IPlugin.ts' />
///<reference path='../Typescript/Events/EventHub.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        function loadPlugins(plugins, window, document) {
            if (!_.isEmpty(plugins)) {
                plugins.forEach(function (rawPluginName) {
                    var pluginName = rawPluginName + "Plugin", plugin;
                    if (Orckestra.Composer.hasOwnProperty(pluginName) && _.isFunction(Orckestra.Composer[pluginName])) {
                        plugin = Object.create(Orckestra.Composer[pluginName]).prototype;
                        plugin.initialize(window, document);
                    }
                });
            }
        }
        function loadControllers(controllerRegistry, controllers) {
            if (!_.isEmpty(controllers)) {
                controllers.forEach(function (controllerConfiguration) {
                    controllerRegistry.register(controllerConfiguration.name, controllerConfiguration.controller);
                });
            }
        }
        function raiseLanguageSwitchEventIfNeeded(cacheProvider, eventHub) {
            var cacheKey = 'languageSwitchEvent';
            return cacheProvider.defaultCache.get(cacheKey).then(function (value) {
                eventHub.publish('languageSwitched', null);
                cacheProvider.defaultCache.clear(cacheKey);
            });
        }
        Composer.bootstrap = function (window, document, composerConfiguration) {
            var controllerRegistry = new Orckestra.Composer.ControllerRegistry(), controller, eventHub = Orckestra.Composer.EventHub.instance(), cacheProvider = Composer.CacheProvider.instance(), localizationProvider = Orckestra.Composer.LocalizationProvider.instance(), composerContext = new Composer.ComposerContext();
            // TODO: Need a better solution that <any>.
            Handlebars.partials = Orckestra.Composer.Templates;
            Handlebars.localizationProvider = localizationProvider;
            localizationProvider.initialize(composerContext).fail(function () {
                console.log('Failed to initialize the localization provider');
            }).then(function () {
                var blades = $('[data-oc-controller]'), controllers = [];
                loadPlugins(composerConfiguration.plugins, window, document);
                loadControllers(controllerRegistry, composerConfiguration.controllers);
                // Need a better query selector as this one is shit
                blades.each(function (index, item) {
                    var bladeName = item.getAttribute('data-oc-controller'), context;
                    if (controllerRegistry.isRegistered(bladeName)) {
                        context = {
                            container: $(item),
                            dataItemId: item.getAttribute('data-item-id'),
                            templateName: bladeName,
                            viewModel: JSON.parse(item.getAttribute('data-context') || '{}'),
                            window: window
                        };
                        controller = Orckestra.Composer.ControllerFactory.createController({
                            controllerName: bladeName,
                            context: context,
                            eventHub: eventHub,
                            composerContext: composerContext,
                            composerConfiguration: composerConfiguration
                        });
                        controller.initialize();
                        controllers.push(controller);
                    }
                });
                eventHub.publish('allControllersInitialized', null);
                raiseLanguageSwitchEventIfNeeded(cacheProvider, eventHub);
                /**
                 * This part of the code is mostly created to clean up dom events
                 * it was created to workaround a bug with IE8 that had memory leaks
                 * when a circular reference was made with a dom element (ie event + update of the dom element)
                 * see : http://com.hemiola.com/2009/11/23/memory-leaks-in-ie8/
                 * and : http://stackoverflow.com/questions/3083196/in-internet-explorer-why-does-memory-leak-stay-even-when-navigating-away-from
                 */
                $(window).on('beforeunload', function () {
                    controllers.forEach(function (controller) { return controller.dispose(); });
                });
            }).done();
        };
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../Typings/tsd.d.ts' />

///<reference path='../../Typings/tsd.d.ts' />
///<reference path='../Mvc/Controller.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var SearchBoxController = (function (_super) {
            __extends(SearchBoxController, _super);
            function SearchBoxController() {
                _super.apply(this, arguments);
            }
            SearchBoxController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.registerFormsForValidation(this.context.container.find('form'));
            };
            return SearchBoxController;
        }(Composer.Controller));
        Composer.SearchBoxController = SearchBoxController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../Typings/tsd.d.ts' />
///<reference path='../Mvc/Controller.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var PageNotFoundAnalyticsController = (function (_super) {
            __extends(PageNotFoundAnalyticsController, _super);
            function PageNotFoundAnalyticsController() {
                _super.apply(this, arguments);
            }
            PageNotFoundAnalyticsController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                var pageUrl = decodeURIComponent(Composer.urlHelper.getURLParameter(window.location.href, 'errorpath'));
                if (!pageUrl || pageUrl === 'null') {
                    pageUrl = window.location.href;
                }
                this.eventHub.publish('pageNotFound', { data: { PageUrl: pageUrl, ReferrerUrl: document.referrer } });
            };
            return PageNotFoundAnalyticsController;
        }(Composer.Controller));
        Composer.PageNotFoundAnalyticsController = PageNotFoundAnalyticsController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../Typings/tsd.d.ts' />
///<reference path='../Mvc/Controller.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var LanguageSwitchController = (function (_super) {
            __extends(LanguageSwitchController, _super);
            function LanguageSwitchController() {
                _super.apply(this, arguments);
                this.languageSwitchEvent = 'languageSwitchEvent';
            }
            LanguageSwitchController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.cacheProvider = Composer.CacheProvider.instance();
            };
            LanguageSwitchController.prototype.onLanguageSwitch = function () {
                this.cacheProvider.defaultCache.set(this.languageSwitchEvent, true);
            };
            return LanguageSwitchController;
        }(Composer.Controller));
        Composer.LanguageSwitchController = LanguageSwitchController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='../../Typings/tsd.d.ts' />
/// <reference path='../Mvc/Controller.ts' />
/// <reference path='./IErrorCollection.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var ErrorController = (function (_super) {
            __extends(ErrorController, _super);
            function ErrorController() {
                _super.apply(this, arguments);
            }
            ErrorController.prototype.initialize = function () {
                this.subscribeToEvents();
            };
            ErrorController.prototype.subscribeToEvents = function () {
                var _this = this;
                this.eventHub.subscribe('GeneralErrorOccured', function (eventInfo) { return _this.handleGeneralError(eventInfo.data, eventInfo.source); });
            };
            ErrorController.prototype.handleGeneralError = function (errors, source) {
                var errorCodes = _.map(errors.Errors, 'ErrorCode').sort();
                var lastErrorCodes = this.lastErrorCodes ? this.lastErrorCodes : [];
                var isMatch = _.isEqual(errorCodes, lastErrorCodes);
                if (!isMatch) {
                    this.lastErrorCodes = errorCodes;
                    this.render('FormErrorMessages', errors);
                }
                //TODO: Force a scroll?
            };
            return ErrorController;
        }(Composer.Controller));
        Composer.ErrorController = ErrorController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../Typings/tsd.d.ts' />
///<reference path='./Bootstrap.ts' />
///<reference path='./JQueryPlugins/IPopOverJqueryPlugin.ts' />
///<reference path='./IComposerConfiguration.ts' />
///<reference path='./Controller/SearchBoxController.ts' />
///<reference path='./Controller/PageNotFoundAnalyticsController.ts' />
///<reference path='./Controller/LanguageSwitchController.ts' />
///<reference path='../../../Composer.Product.UI/ProductSearch/Source/TypeScript/SortBySearchController.ts' />
///<reference path='../../../Composer.Product.UI/ProductSearch/Source/TypeScript/FacetSearchController.ts' />
///<reference path='../../../Composer.Product.UI/ProductSearch/Source/TypeScript/SearchResultsController.ts' />
///<reference path='../../../Composer.Product.UI/ProductSearch/Source/TypeScript/SearchSummaryController.ts' />
///<reference path='../../../Composer.Product.UI/ProductSearch/Source/TypeScript/QuickViewController.ts' />
///<reference path='../../../Composer.Product.UI/ProductSearch/Source/TypeScript/SelectedFacetSearchController.ts' />
///<reference path='../../../Composer.Cart.UI/AddToCartNotification/Source/TypeScript/AddToCartNotificationController.ts' />
///<reference path='../../../Composer.Cart.UI/CartSummary/Source/TypeScript/FullCartController.ts' />
///<reference path='../../../Composer.Cart.UI/MiniCart/Source/TypeScript/MiniCartController.ts' />
///<reference path='../../../Composer.Cart.UI/MiniCart/Source/TypeScript/MiniCartSummaryController.ts' />
///<reference path='../../../Composer.Cart.UI/Coupons/Source/Typescript/CouponController.ts' />
///<reference path='../../../Composer.Product.UI/ProductDetail/Source/TypeScript/ProductDetailController.ts' />
///<reference path='../../../Composer.Product.UI/RelatedProducts/Source/TypeScript/RelatedProductsController.ts' />
///<reference path='../../../Composer.Product.UI/ProductSpecification/Source/TypeScript/ProductSpecificationsController.ts' />
///<reference path='../../../Composer.Cart.UI/OrderSummary/Source/TypeScript/OrderSummaryController.ts' />
///<reference path='../../../Composer.Cart.UI/CheckoutGuestCustomerInfo/Source/TypeScript/GuestCustomerInfoCheckoutController.ts' />
///<reference path='../../../Composer.Cart.UI/CheckoutShippingAddress/Source/TypeScript/ShippingAddressCheckoutController.ts' />
///<reference path='../../../Composer.Cart.UI/CheckoutShippingMethod/Source/TypeScript/ShippingMethodCheckoutController.ts' />
///<reference path='../../../Composer.Cart.UI/CheckoutBillingAddress/Source/TypeScript/BillingAddressCheckoutController.ts' />
///<reference path='../../../Composer.Cart.UI/CheckoutBillingAddressRegistered/Source/TypeScript/BillingAddressRegisteredCheckoutController.ts' />
///<reference path='../../../Composer.Cart.UI/CheckoutOrderConfirmation/Source/TypeScript/CheckoutOrderConfirmationController.ts' />
///<reference path='../../../Composer.Cart.UI/CheckoutComplete/Source/TypeScript/CheckoutCompleteController.ts' />
///<reference path='../../../Composer.MyAccount.UI/AddressList/Source/TypeScript/AddressListController.ts' />
///<reference path='../../../Composer.MyAccount.UI/ChangePassword/Source/TypeScript/ChangePasswordController.ts' />
///<reference path='../../../Composer.MyAccount.UI/CreateAccount/Source/TypeScript/CreateAccountController.ts' />
///<reference path='../../../Composer.MyAccount.UI/EditAddress/Source/TypeScript/EditAddressController.ts' />
///<reference path='../../../Composer.MyAccount.UI/ForgotPassword/Source/TypeScript/ForgotPasswordController.ts' />
///<reference path='../../../Composer.MyAccount.UI/AccountHeader/Source/TypeScript/AccountHeaderController.ts' />
///<reference path='../../../Composer.MyAccount.UI/UpdateAccount/Source/TypeScript/UpdateAccountController.ts' />
///<reference path='../../../Composer.MyAccount.UI/NewPassword/Source/TypeScript/NewPasswordController.ts' />
///<reference path='../../../Composer.MyAccount.UI/ReturningCustomer/Source/TypeScript/ReturningCustomerController.ts' />
///<reference path='../../../Composer.MyAccount.UI/WishList/Source/TypeScript/MyWishListController.ts' />
///<reference path='../../../Composer.MyAccount.UI/WishListShared/Source/TypeScript/SharedWishListController.ts' />
///<reference path='../../../Composer.MyAccount.UI/WishList/Source/TypeScript/WishListInHeaderController.ts' />
///<reference path='../../../Composer.Cart.UI/CheckoutShippingAddressRegistered/Source/TypeScript/ShippingAddressRegisteredController.ts' />
///<reference path='../../../Composer.Cart.UI/CheckoutOrderSummary/Source/TypeScript/CheckoutOrderSummaryController.ts' />
///<reference path='../../../Composer.Cart.UI/CheckoutOrderSummary/Source/TypeScript/CompleteCheckoutOrderSummaryController.ts' />
///<reference path='../../../Composer.Cart.UI/CheckoutPayment/Source/TypeScript/CheckoutPaymentController.ts' />
///<reference path='../../../Composer.Cart.UI/CheckoutCommon/Source/TypeScript/CheckoutNavigationController.ts' />
///<reference path='../../../Composer.MyAccount.UI/SignInHeader/Source/TypeScript/SignInHeaderController.ts' />
///<reference path='../../../Composer.MyAccount.UI/MyAccount/Source/TypeScript/MyAccountController.ts' />
///<reference path='../../../Composer.Cart.UI/OrderHistory/Source/TypeScript/CurrentOrdersController.ts' />
///<reference path='../../../Composer.Cart.UI/OrderHistory/Source/TypeScript/PastOrdersController.ts' />
///<reference path='../../../Composer.Cart.UI/OrderDetails/Source/TypeScript/OrderDetailsController.ts' />
///<reference path='../../../Composer.Cart.UI/FindMyOrder/Source/TypeScript/FindMyOrderController.ts' />
///<reference path='./ErrorHandling/ErrorController.ts' />
///<reference path='../../../Composer.Store.UI/StoreLocator/Source/TypeScript/StoreLocatorController.ts' />
///<reference path='../../../Composer.Store.UI/StoreLocator/Source/TypeScript/StoreDetailsController.ts' />
///<reference path='../../../Composer.Store.UI/StoreDirectory/Source/TypeScript/StoresDirectoryController.ts' />
///<reference path='../../../Composer.Store.UI/StoreInventory/Source/TypeScript/StoreInventoryController.ts' />
(function () {
    'use strict';
    // This file is currently used for the composer team so that we can deploy and hook into
    // our client-side code, but the starter site that ships, will ship with an App.ts
    // that will look like this.
    $(document).ready(function () {
        var composerConfiguration = {
            plugins: [
                'AntiIFrameClickJacking',
                'ComposerValidationLocalization',
                'HelpBubbles',
                'StickyAffix',
                'SlickCarousel',
                'FocusElement',
                'GoogleAnalytics'
            ],
            controllers: [
                { name: 'General.ErrorController', controller: Orckestra.Composer.ErrorController },
                { name: 'General.SearchBox', controller: Orckestra.Composer.SearchBoxController },
                { name: 'General.LanguageSwitch', controller: Orckestra.Composer.LanguageSwitchController },
                { name: 'Cart.FullCart', controller: Orckestra.Composer.FullCartController },
                { name: 'Cart.OrderSummary', controller: Orckestra.Composer.OrderSummaryController },
                { name: 'Cart.MiniCart', controller: Orckestra.Composer.MiniCartController },
                { name: 'Cart.MiniCartSummary', controller: Orckestra.Composer.MiniCartSummaryController },
                { name: 'Cart.Coupons', controller: Orckestra.Composer.CouponController },
                { name: 'Cart.AddToCartNotification', controller: Orckestra.Composer.AddToCartNotificationController },
                { name: 'Product.SortBySearch', controller: Orckestra.Composer.SortBySearchController },
                { name: 'Product.FacetSearch', controller: Orckestra.Composer.FacetSearchController },
                { name: 'Product.ProductDetail', controller: Orckestra.Composer.ProductDetailController },
                { name: 'Product.RelatedProducts', controller: Orckestra.Composer.RelatedProductController },
                { name: 'Product.SearchResults', controller: Orckestra.Composer.SearchResultsController },
                { name: 'Product.SearchSummary', controller: Orckestra.Composer.SearchSummaryController },
                { name: 'Product.QuickView', controller: Orckestra.Composer.QuickViewController },
                { name: 'Product.SelectedSearchFacets', controller: Orckestra.Composer.SelectedFacetSearchController },
                { name: 'Product.ProductSpecifications', controller: Orckestra.Composer.ProductSpecificationsController },
                { name: 'Product.ProductZoom', controller: Orckestra.Composer.ProductZoomController },
                { name: 'Checkout.GuestCustomerInfo', controller: Orckestra.Composer.GuestCustomerInfoCheckoutController },
                { name: 'Checkout.ShippingAddress', controller: Orckestra.Composer.ShippingAddressCheckoutController },
                { name: 'Checkout.ShippingAddressRegistered', controller: Orckestra.Composer.ShippingAddressRegisteredController },
                { name: 'Checkout.ShippingMethod', controller: Orckestra.Composer.ShippingMethodCheckoutController },
                { name: 'Checkout.OrderSummary', controller: Orckestra.Composer.CheckoutOrderSummaryController },
                { name: 'Checkout.CompleteOrderSummary', controller: Orckestra.Composer.CompleteCheckoutOrderSummaryController },
                { name: 'Checkout.CheckoutComplete', controller: Orckestra.Composer.CheckoutCompleteController },
                { name: 'Checkout.CheckoutOrderConfirmation', controller: Orckestra.Composer.CheckoutOrderConfirmationController },
                { name: 'Checkout.BillingAddress', controller: Orckestra.Composer.BillingAddressCheckoutController },
                { name: 'Checkout.BillingAddressRegistered', controller: Orckestra.Composer.BillingAddressRegisteredCheckoutController },
                { name: 'Checkout.Payment', controller: Orckestra.Composer.CheckoutPaymentController },
                { name: 'Checkout.Navigation', controller: Orckestra.Composer.CheckoutNavigationController },
                { name: 'MyAccount.AddressList', controller: Orckestra.Composer.AddressListController },
                { name: 'MyAccount.ChangePassword', controller: Orckestra.Composer.ChangePasswordController },
                { name: 'MyAccount.CreateAccount', controller: Orckestra.Composer.CreateAccountController },
                { name: 'MyAccount.EditAddress', controller: Orckestra.Composer.EditAddressController },
                { name: 'MyAccount.ForgotPassword', controller: Orckestra.Composer.ForgotPasswordController },
                { name: 'MyAccount.AccountHeader', controller: Orckestra.Composer.AccountHeaderController },
                { name: 'MyAccount.UpdateAccount', controller: Orckestra.Composer.UpdateAccountController },
                { name: 'MyAccount.NewPassword', controller: Orckestra.Composer.NewPasswordController },
                { name: 'MyAccount.ReturningCustomer', controller: Orckestra.Composer.ReturningCustomerController },
                { name: 'MyAccount.SignInHeader', controller: Orckestra.Composer.SignInHeaderController },
                { name: 'MyAccount.MyAccountMenu', controller: Orckestra.Composer.MyAccountController },
                { name: 'MyAccount.MyWishList', controller: Orckestra.Composer.MyWishListController },
                { name: 'MyAccount.SharedWishList', controller: Orckestra.Composer.SharedWishListController },
                { name: 'MyAccount.WishListInHeader', controller: Orckestra.Composer.WishListInHeaderController },
                { name: 'Orders.CurrentOrders', controller: Orckestra.Composer.CurrentOrdersController },
                { name: 'Orders.PastOrders', controller: Orckestra.Composer.PastOrdersController },
                { name: 'Orders.OrderDetails', controller: Orckestra.Composer.OrderDetailsController },
                { name: 'Orders.FindMyOrder', controller: Orckestra.Composer.FindMyOrderController },
                { name: 'Store.Locator', controller: Orckestra.Composer.StoreLocatorController },
                { name: 'Store.Details', controller: Orckestra.Composer.StoreDetailsController },
                { name: 'Store.Directory', controller: Orckestra.Composer.StoresDirectoryController },
                { name: 'Store.Inventory', controller: Orckestra.Composer.StoreInventoryController },
                { name: 'PageNotFound.Analytics', controller: Orckestra.Composer.PageNotFoundAnalyticsController }
            ]
        };
        Orckestra.Composer.bootstrap(window, document, composerConfiguration);
    });
})();

///<reference path='./IControllerActionContext.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='./IPlugin.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var AntiIFrameClickJackingPlugin = (function () {
            function AntiIFrameClickJackingPlugin() {
            }
            AntiIFrameClickJackingPlugin.prototype.initialize = function (window, document) {
                if (this.getOrigin(window.self) !== this.getOrigin(window.top)) {
                    console.warn('This site cannot be hosted in an iFrame. Redirecting.');
                    window.top.location.href = window.self.location.href;
                }
            };
            AntiIFrameClickJackingPlugin.prototype.getOrigin = function (window) {
                var origin;
                if (!window.location['origin']) {
                    window.location['origin'] = window.location.protocol + '//' + window.location.host;
                }
                origin = window.location['origin'];
                return origin;
            };
            return AntiIFrameClickJackingPlugin;
        }());
        Composer.AntiIFrameClickJackingPlugin = AntiIFrameClickJackingPlugin;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../Typings/tsd.d.ts' />
/// <reference path='../Validation/IParsleyValidator.ts' />
/// <reference path='../ComposerContext.ts' />
/// <reference path='./IPlugin.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var ComposerValidationLocalizationPlugin = (function () {
            function ComposerValidationLocalizationPlugin() {
            }
            ComposerValidationLocalizationPlugin.prototype.initialize = function (window, document) {
                var locale, parlseyConfig = window.ParsleyConfig, parsleyLocaleMessages = JSON.parse(Orckestra.Composer.Templates['GlobalValidation']()), composerContext = new Composer.ComposerContext();
                locale = composerContext.language;
                if (_.isEmpty(locale)) {
                    throw new Error('The locale has not been set');
                }
                window.ParsleyConfig = window.ParsleyConfig || {};
                window.ParsleyConfig.i18n = window.ParsleyConfig.i18n || {};
                window.ParsleyConfig.i18n[locale] =
                    jQuery.extend(window.ParsleyConfig.i18n[locale] || {}, parsleyLocaleMessages);
                // If file is loaded after Parsley main file, auto-load locale
                if (window.ParsleyValidator !== void 0) {
                    window.ParsleyValidator.addCatalog(locale, window.ParsleyConfig.i18n[locale], true);
                    window.ParsleyValidator.setLocale(locale);
                }
                this.defineValidators(window.ParsleyValidator);
            };
            ComposerValidationLocalizationPlugin.prototype.defineValidators = function (parsleyValidator) {
                var regex = /^(?!(.|\n)*<[a-z!\/?])(?!(.|\n)*&#)(.|\n)*$/i;
                parsleyValidator.addValidator('antixss', function (value, requirement) {
                    var isReq;
                    if (_.isString(requirement)) {
                        isReq = requirement.toLowerCase() === 'true';
                    }
                    else {
                        isReq = !!requirement;
                    }
                    var isValid = !isReq || regex.test(value);
                    return isValid;
                });
                //en: 'This field contains invalid characters.',
                //fr: 'Ce champ contient des caractres invalides.'
            };
            return ComposerValidationLocalizationPlugin;
        }());
        Composer.ComposerValidationLocalizationPlugin = ComposerValidationLocalizationPlugin;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='./IPlugin.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var FocusElementPlugin = (function () {
            function FocusElementPlugin() {
            }
            FocusElementPlugin.prototype.initialize = function (window, document) {
                /**
                 * On click, scroll to field and focus in it.
                 */
                $('body', document).on('click', '[data-focus-element]', function (e) {
                    var target = $(this).data('focus-element');
                    $('body, html').scrollTop($(target).offset().top - 20);
                    $(target).focus();
                    e.preventDefault();
                });
            };
            return FocusElementPlugin;
        }());
        Composer.FocusElementPlugin = FocusElementPlugin;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='./IPlugin.ts' />
/// <reference path='../JQueryPlugins/IPopOverJqueryPlugin.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var HelpBubblesPlugin = (function () {
            function HelpBubblesPlugin() {
            }
            HelpBubblesPlugin.prototype.initialize = function (window, document) {
                /**
                 * Will calculate if there is enough space for the popover on the right
                 * else will put it in the bottom.
                 */
                function popoverPlacement(popover, triggeringElement) {
                    var triggeringElementWidth = $(triggeringElement).outerWidth();
                    var placement = 'bottom';
                    // we will consider that if the trrigering element can't be doubled
                    // we won't have enough space to display the popover on the right
                    if ((window.innerWidth - triggeringElementWidth) > triggeringElementWidth) {
                        placement = 'right';
                    }
                    return placement;
                }
                //  As discussed with Sam, this is in the app.ts for now. Because we don't have a strategy
                //  yet for generic presentation/plugins javascript.
                //  Pop over initialization.
                $('body').popover({
                    html: true,
                    placement: popoverPlacement,
                    selector: '[data-toggle=popover]',
                    trigger: 'focus',
                    content: function () {
                        return $('#popover-content').html();
                    }
                });
                /**
                 * Needs the select block of a same group to have data-parent defined
                 * OR that they be in the same form.
                 */
                $('body').on('change', '.select-block', function () {
                    var input = $(this).find('.input');
                    var type = input.attr('type');
                    var name = input.attr('name');
                    // if checkbox check current state of prop
                    if (type === 'checkbox') {
                        if (input.prop('checked')) {
                            $(this).addClass('active');
                        }
                        else {
                            $(this).removeClass('active');
                        }
                    }
                    if (type === 'radio') {
                        var parentSelector = $(this).data('parent');
                        var parentElement;
                        if (parentSelector) {
                            parentElement = input.closest(parentSelector);
                        }
                        else {
                            // if no parent specified, default to form and fallback to body
                            parentElement = input.closest('form');
                            if (parentElement.length === 0) {
                                parentElement = $('body');
                            }
                        }
                        parentElement
                            .find('.select-block:has(:radio[name="' + name + '"])')
                            .removeClass('active');
                        $(this).addClass('active');
                    }
                });
            };
            return HelpBubblesPlugin;
        }());
        Composer.HelpBubblesPlugin = HelpBubblesPlugin;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='../../Typings/tsd.d.ts' />
/// <reference path='./IPlugin.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var StickyAffixPlugin = (function () {
            function StickyAffixPlugin() {
            }
            StickyAffixPlugin.prototype.initialize = function (window, document) {
                $('[data-sticky-top]').each(function () {
                    var stickyOffset = $(this).data('sticky-top-offset');
                    stickyOffset = stickyOffset ? stickyOffset : 0;
                    $(this).affix({
                        offset: {
                            top: function (element) {
                                return $(element).parent().offset().top - stickyOffset;
                            }
                        }
                    });
                });
            };
            return StickyAffixPlugin;
        }());
        Composer.StickyAffixPlugin = StickyAffixPlugin;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0V2ZW50cy9JU3Vic2NyaXB0aW9uLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvRXZlbnRzL0lMaXN0ZW5lci50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0V2ZW50cy9JTGlzdGVuZXJRdWV1ZS50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0V2ZW50cy9JRXZlbnRJbmZvcm1hdGlvbi50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0dlbmVyaWNzL0NvbGxlY3Rpb25zL0lIYXNoVGFibGUudHMiLCJDb21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9FdmVudHMvSUV2ZW50SHViLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvRXZlbnRzL0V2ZW50SHViLnRzIiwiQ29tcG9zZXIuQW5hbHl0aWNzLlVJL0FuYWx5dGljcy9Tb3VyY2UvVHlwZXNjcmlwdC9JQW5hbHl0aWNzUHJvZHVjdC50cyIsIkNvbXBvc2VyLkFuYWx5dGljcy5VSS9BbmFseXRpY3MvU291cmNlL1R5cGVzY3JpcHQvSUFuYWx5dGljc1NlYXJjaFJlc3VsdHMudHMiLCJDb21wb3Nlci5BbmFseXRpY3MuVUkvQW5hbHl0aWNzL1NvdXJjZS9UeXBlc2NyaXB0L0lBbmFseXRpY3NQbHVnaW4udHMiLCJDb21wb3Nlci5BbmFseXRpY3MuVUkvQW5hbHl0aWNzL1NvdXJjZS9UeXBlc2NyaXB0L0lBbmFseXRpY3NDb3Vwb24udHMiLCJDb21wb3Nlci5BbmFseXRpY3MuVUkvQW5hbHl0aWNzL1NvdXJjZS9UeXBlc2NyaXB0L0lBbmFseXRpY3NPcmRlci50cyIsIkNvbXBvc2VyLkFuYWx5dGljcy5VSS9BbmFseXRpY3MvU291cmNlL1R5cGVzY3JpcHQvSUFuYWx5dGljc1RyYW5zYWN0aW9uLnRzIiwiQ29tcG9zZXIuQW5hbHl0aWNzLlVJL0FuYWx5dGljcy9Tb3VyY2UvVHlwZXNjcmlwdC9JQW5hbHl0aWNzU2VhcmNoRmlsdGVycy50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L1BsdWdpbnMvSVBsdWdpbi50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L1N5c3RlbS9JRGlzcG9zYWJsZS50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L012Yy9JQ29udHJvbGxlci50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L012Yy9JQ29udHJvbGxlckNvbnRleHQudHMiLCJDb21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9NdmMvSVJlZ2lzdGVyQWN0aW9uT3B0aW9ucy50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L012Yy9JQ29udHJvbGxlckFjdGlvbkNvbnRleHQudHMiLCJDb21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9UZW1wbGF0aW5nL0lDb21wb3NlclRlbXBsYXRlcy50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0pRdWVyeVBsdWdpbnMvSVBhcnNsZXlKcXVlcnlQbHVnaW4udHMiLCJDb21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9WYWxpZGF0aW9uL0lQYXJzbGV5LnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvVUkvVUlCdXN5UGFyYW0udHMiLCJDb21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9VSS9VSUJ1c3lIYW5kbGUudHMiLCJDb21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9JQ29tcG9zZXJDb250ZXh0LnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvTXZjL0lDb250cm9sbGVyQ29uZmlndXJhdGlvbi50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0lDb21wb3NlckNvbmZpZ3VyYXRpb24udHMiLCJDb21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9NdmMvQ29udHJvbGxlci50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0pRdWVyeVBsdWdpbnMvSVNlcmlhbGl6ZU9iamVjdEpxdWVyeVBsdWdpbi50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L012Yy9Mb2NhbGl6YXRpb24vSUxvY2FsaXphdGlvblByb3ZpZGVyLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvTXZjL0xvY2FsaXphdGlvbi9Mb2NhbGl6YXRpb25Qcm92aWRlci50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L012Yy9Db21wb3NlckNsaWVudC50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L1JlcG9zaXRvcmllcy9JTWVtYmVyc2hpcFJlcG9zaXRvcnkudHMiLCJDb21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9SZXBvc2l0b3JpZXMvTWVtYmVyc2hpcFJlcG9zaXRvcnkudHMiLCJDb21wb3Nlci5NeUFjY291bnQuVUkvQ29tbW9uL1NvdXJjZS9UeXBlc2NyaXB0L0lNZW1iZXJzaGlwU2VydmljZS50cyIsIkNvbXBvc2VyLk15QWNjb3VudC5VSS9Db21tb24vU291cmNlL1R5cGVzY3JpcHQvTWVtYmVyc2hpcFNlcnZpY2UudHMiLCJDb21wb3Nlci5NeUFjY291bnQuVUkvQ29tbW9uL1NvdXJjZS9UeXBlc2NyaXB0L015QWNjb3VudEV2ZW50cy50cyIsIkNvbXBvc2VyLkFuYWx5dGljcy5VSS9BbmFseXRpY3MvU291cmNlL1R5cGVzY3JpcHQvQW5hbHl0aWNzUGx1Z2luLnRzIiwiQ29tcG9zZXIuQW5hbHl0aWNzLlVJL0FuYWx5dGljcy9Tb3VyY2UvVHlwZXNjcmlwdC9Hb29nbGVBbmFseXRpY3NNYW5hZ2VyLmpzIiwiQ29tcG9zZXIuQW5hbHl0aWNzLlVJL0FuYWx5dGljcy9Tb3VyY2UvVHlwZXNjcmlwdC9Hb29nbGVBbmFseXRpY3NQbHVnaW4udHMiLCJDb21wb3Nlci5DYXJ0LlVJL0FkZFRvQ2FydE5vdGlmaWNhdGlvbi9Tb3VyY2UvVHlwZXNjcmlwdC9BZGRUb0NhcnROb3RpZmljYXRpb25Db250cm9sbGVyLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvQ2FjaGUvSUNhY2hlUG9saWN5LnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvQ2FjaGUvSUNhY2hlLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvQ2FjaGUvSUNhY2hlUHJvdmlkZXIudHMiLCJDb21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9TdG9yYWdlL0lTdG9yYWdlLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvU3RvcmFnZS9JU3RvcmFnZUl0ZW0udHMiLCJDb21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9DYWNoZS9DYWNoZUVycm9yLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvQ2FjaGUvSUNhY2hlSXRlbS50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0NhY2hlL1N0b3JhZ2VCYXNlZENhY2hlLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvU3RvcmFnZS9CYWNraW5nU3RvcmFnZS50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L1N0b3JhZ2UvU3RvcmFnZVR5cGUudHMiLCJDb21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9TdG9yYWdlL1N0b3JhZ2VQb2x5RmlsbC50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L1N0b3JhZ2UvU3RvcmFnZUZhY3RvcnkudHMiLCJDb21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9DYWNoZS9DYWNoZVByb3ZpZGVyLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvUmVwb3NpdG9yaWVzL0lDYXJ0UmVwb3NpdG9yeS50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L1JlcG9zaXRvcmllcy9DYXJ0UmVwb3NpdG9yeS50cyIsIkNvbXBvc2VyLkNhcnQuVUkvQ2FydFN1bW1hcnkvU291cmNlL1R5cGVzY3JpcHQvSUNhcnRTZXJ2aWNlLnRzIiwiQ29tcG9zZXIuQ2FydC5VSS9DYXJ0U3VtbWFyeS9Tb3VyY2UvVHlwZXNjcmlwdC9DYXJ0U2VydmljZS50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0Vycm9ySGFuZGxpbmcvSUVycm9yLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvRXJyb3JIYW5kbGluZy9JRXJyb3JDb2xsZWN0aW9uLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvRXJyb3JIYW5kbGluZy9JRXJyb3JIYW5kbGVyLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvRXJyb3JIYW5kbGluZy9FcnJvckhhbmRsZXIudHMiLCJDb21wb3Nlci5DYXJ0LlVJL0NhcnRTdW1tYXJ5L1NvdXJjZS9UeXBlc2NyaXB0L0Z1bGxDYXJ0Q29udHJvbGxlci50cyIsIkNvbXBvc2VyLkNhcnQuVUkvQ2hlY2tvdXRTaGlwcGluZ01ldGhvZC9Tb3VyY2UvVHlwZXNjcmlwdC9TaGlwcGluZ01ldGhvZFNlcnZpY2UudHMiLCJDb21wb3Nlci5DYXJ0LlVJL0NoZWNrb3V0Q29tbW9uL1NvdXJjZS9UeXBlc2NyaXB0L0lCYXNlQ2hlY2tvdXRDb250cm9sbGVyLnRzIiwiQ29tcG9zZXIuQ2FydC5VSS9DaGVja291dENvbW1vbi9Tb3VyY2UvVHlwZXNjcmlwdC9JUmVnaW9uU2VydmljZS50cyIsIkNvbXBvc2VyLkNhcnQuVUkvQ2hlY2tvdXRDb21tb24vU291cmNlL1R5cGVzY3JpcHQvUmVnaW9uU2VydmljZS50cyIsIkNvbXBvc2VyLkNhcnQuVUkvQ2hlY2tvdXRDb21tb24vU291cmNlL1R5cGVzY3JpcHQvSUNoZWNrb3V0U2VydmljZS50cyIsIkNvbXBvc2VyLkNhcnQuVUkvQ2hlY2tvdXRDb21tb24vU291cmNlL1R5cGVzY3JpcHQvSUNoZWNrb3V0Q29udGV4dC50cyIsIkNvbXBvc2VyLkNhcnQuVUkvQ2hlY2tvdXRDb21tb24vU291cmNlL1R5cGVzY3JpcHQvSVJlZ2lzdGVyT3B0aW9ucy50cyIsIkNvbXBvc2VyLkNhcnQuVUkvQ2hlY2tvdXRDb21tb24vU291cmNlL1R5cGVzY3JpcHQvQ2hlY2tvdXRTZXJ2aWNlLnRzIiwiQ29tcG9zZXIuQ2FydC5VSS9DaGVja291dENvbW1vbi9Tb3VyY2UvVHlwZXNjcmlwdC9CYXNlQ2hlY2tvdXRDb250cm9sbGVyLnRzIiwiQ29tcG9zZXIuQ2FydC5VSS9DaGVja291dEJpbGxpbmdBZGRyZXNzL1NvdXJjZS9UeXBlc2NyaXB0L0JpbGxpbmdBZGRyZXNzQ2hlY2tvdXRDb250cm9sbGVyLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvUmVwb3NpdG9yaWVzL0lDdXN0b21lclJlcG9zaXRvcnkudHMiLCJDb21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9SZXBvc2l0b3JpZXMvQ3VzdG9tZXJSZXBvc2l0b3J5LnRzIiwiQ29tcG9zZXIuTXlBY2NvdW50LlVJL0NvbW1vbi9Tb3VyY2UvVHlwZXNjcmlwdC9JQ3VzdG9tZXJTZXJ2aWNlLnRzIiwiQ29tcG9zZXIuTXlBY2NvdW50LlVJL0NvbW1vbi9Tb3VyY2UvVHlwZXNjcmlwdC9DdXN0b21lclNlcnZpY2UudHMiLCJDb21wb3Nlci5NeUFjY291bnQuVUkvQ29tbW9uL1NvdXJjZS9UeXBlc2NyaXB0L015QWNjb3VudFN0YXR1cy50cyIsIkNvbXBvc2VyLkNhcnQuVUkvQ2hlY2tvdXRDb21tb24vU291cmNlL1R5cGVzY3JpcHQvQWRkcmVzc0R0by5qcyIsIkNvbXBvc2VyLkNhcnQuVUkvQ2hlY2tvdXRCaWxsaW5nQWRkcmVzc1JlZ2lzdGVyZWQvU291cmNlL1R5cGVzY3JpcHQvQmlsbGluZ0FkZHJlc3NSZWdpc3RlcmVkQ2hlY2tvdXRTZXJ2aWNlLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvVUkvVUlNb2RhbC50cyIsIkNvbXBvc2VyLkNhcnQuVUkvQ2hlY2tvdXRCaWxsaW5nQWRkcmVzc1JlZ2lzdGVyZWQvU291cmNlL1R5cGVzY3JpcHQvQmlsbGluZ0FkZHJlc3NSZWdpc3RlcmVkQ2hlY2tvdXRDb250cm9sbGVyLnRzIiwiQ29tcG9zZXIuQ2FydC5VSS9DaGVja291dENvbW1vbi9Tb3VyY2UvVHlwZXNjcmlwdC9DaGVja291dE5hdmlnYXRpb25Db250cm9sbGVyLnRzIiwiQ29tcG9zZXIuQ2FydC5VSS9DaGVja291dENvbW1vbi9Tb3VyY2UvVHlwZXNjcmlwdC9JQ2hlY2tvdXRHZXRDYXJ0UHJvbWlzZUZhaWx1cmVIYW5kbGVyLnRzIiwiQ29tcG9zZXIuQ2FydC5VSS9DaGVja291dENvbW1vbi9Tb3VyY2UvVHlwZXNjcmlwdC9JQ2hlY2tvdXRHZXRDYXJ0UHJvbWlzZVBhcmFtLnRzIiwiQ29tcG9zZXIuQ2FydC5VSS9DaGVja291dENvbW1vbi9Tb3VyY2UvVHlwZXNjcmlwdC9JR2V0UGF5bWVudE1ldGhvZHNPcHRpb25zLnRzIiwiQ29tcG9zZXIuQ2FydC5VSS9DaGVja291dENvbW1vbi9Tb3VyY2UvVHlwZXNjcmlwdC9JVXBkYXRlUGF5bWVudE9wdGlvbnMudHMiLCJDb21wb3Nlci5DYXJ0LlVJL0NoZWNrb3V0Q29tbW9uL1NvdXJjZS9UeXBlc2NyaXB0L1BheW1lbnRQcm92aWRlci50cyIsIkNvbXBvc2VyLkNhcnQuVUkvQ2hlY2tvdXRDb21wbGV0ZS9Tb3VyY2UvVHlwZXNjcmlwdC9DaGVja291dENvbXBsZXRlQ29udHJvbGxlci50cyIsIkNvbXBvc2VyLkNhcnQuVUkvQ2hlY2tvdXRHdWVzdEN1c3RvbWVySW5mby9Tb3VyY2UvVHlwZXNjcmlwdC9HdWVzdEN1c3RvbWVySW5mb0NoZWNrb3V0Q29udHJvbGxlci50cyIsIkNvbXBvc2VyLkNhcnQuVUkvQ2hlY2tvdXRPcmRlckNvbmZpcm1hdGlvbi9Tb3VyY2UvVHlwZXNjcmlwdC9DaGVja291dE9yZGVyQ29uZmlybWF0aW9uQ29udHJvbGxlci50cyIsIkNvbXBvc2VyLkNhcnQuVUkvQ2hlY2tvdXRPcmRlclN1bW1hcnkvU291cmNlL1R5cGVzY3JpcHQvQ2hlY2tvdXRPcmRlclN1bW1hcnlDb250cm9sbGVyLnRzIiwiQ29tcG9zZXIuQ2FydC5VSS9DaGVja291dE9yZGVyU3VtbWFyeS9Tb3VyY2UvVHlwZXNjcmlwdC9Db21wbGV0ZUNoZWNrb3V0T3JkZXJTdW1tYXJ5Q29udHJvbGxlci50cyIsIkNvbXBvc2VyLkNhcnQuVUkvQ2hlY2tvdXRQYXltZW50L1NvdXJjZS9UeXBlc2NyaXB0L1NlcnZpY2VzL0lQYXltZW50U2VydmljZS50cyIsIkNvbXBvc2VyLkNhcnQuVUkvQ2hlY2tvdXRQYXltZW50L1NvdXJjZS9UeXBlc2NyaXB0L1ZpZXdNb2RlbHMvSUFjdGl2ZVBheW1lbnRWaWV3TW9kZWwudHMiLCJDb21wb3Nlci5DYXJ0LlVJL0NoZWNrb3V0UGF5bWVudC9Tb3VyY2UvVHlwZXNjcmlwdC9Qcm92aWRlcnMvQmFzZUNoZWNrb3V0UGF5bWVudFByb3ZpZGVyLnRzIiwiQ29tcG9zZXIuQ2FydC5VSS9DaGVja291dFBheW1lbnQvU291cmNlL1R5cGVzY3JpcHQvVmlld01vZGVscy9JUGF5bWVudE1ldGhvZFZpZXdNb2RlbC50cyIsIkNvbXBvc2VyLkNhcnQuVUkvQ2hlY2tvdXRQYXltZW50L1NvdXJjZS9UeXBlc2NyaXB0L1JlcG9zaXRvcmllcy9JUGF5bWVudFJlcG9zaXRvcnkudHMiLCJDb21wb3Nlci5DYXJ0LlVJL0NoZWNrb3V0UGF5bWVudC9Tb3VyY2UvVHlwZXNjcmlwdC9TZXJ2aWNlcy9QYXltZW50U2VydmljZS50cyIsIkNvbXBvc2VyLkNhcnQuVUkvQ2hlY2tvdXRQYXltZW50L1NvdXJjZS9UeXBlc2NyaXB0L1ZpZXdNb2RlbHMvSVBheW1lbnRWaWV3TW9kZWwudHMiLCJDb21wb3Nlci5DYXJ0LlVJL0NoZWNrb3V0UGF5bWVudC9Tb3VyY2UvVHlwZXNjcmlwdC9WaWV3TW9kZWxzL0lQYXltZW50UHJvZmlsZUxpc3RJdGVtVmlld01vZGVsLnRzIiwiQ29tcG9zZXIuQ2FydC5VSS9DaGVja291dFBheW1lbnQvU291cmNlL1R5cGVzY3JpcHQvVmlld01vZGVscy9JUGF5bWVudFByb2ZpbGVMaXN0Vmlld01vZGVsLnRzIiwiQ29tcG9zZXIuQ2FydC5VSS9DaGVja291dFBheW1lbnQvU291cmNlL1R5cGVzY3JpcHQvUmVwb3NpdG9yaWVzL1BheW1lbnRSZXBvc2l0b3J5LnRzIiwiQ29tcG9zZXIuQ2FydC5VSS9DaGVja291dFBheW1lbnQvU291cmNlL1R5cGVzY3JpcHQvUHJvdmlkZXJzL0NoZWNrb3V0UGF5bWVudFByb3ZpZGVyRmFjdG9yeS50cyIsIkNvbXBvc2VyLkNhcnQuVUkvQ2hlY2tvdXRQYXltZW50L1NvdXJjZS9UeXBlc2NyaXB0L0NoZWNrb3V0UGF5bWVudENvbnRyb2xsZXIudHMiLCJDb21wb3Nlci5DYXJ0LlVJL0NoZWNrb3V0U2hpcHBpbmdBZGRyZXNzL1NvdXJjZS9UeXBlc2NyaXB0L1NoaXBwaW5nQWRkcmVzc0NoZWNrb3V0U2VydmljZS50cyIsIkNvbXBvc2VyLkNhcnQuVUkvQ2hlY2tvdXRTaGlwcGluZ0FkZHJlc3MvU291cmNlL1R5cGVzY3JpcHQvU2hpcHBpbmdBZGRyZXNzQ2hlY2tvdXRDb250cm9sbGVyLnRzIiwiQ29tcG9zZXIuQ2FydC5VSS9DaGVja291dFNoaXBwaW5nQWRkcmVzc1JlZ2lzdGVyZWQvU291cmNlL1R5cGVzY3JpcHQvU2hpcHBpbmdBZGRyZXNzUmVnaXN0ZXJlZFNlcnZpY2UudHMiLCJDb21wb3Nlci5DYXJ0LlVJL0NoZWNrb3V0U2hpcHBpbmdBZGRyZXNzUmVnaXN0ZXJlZC9Tb3VyY2UvVHlwZXNjcmlwdC9TaGlwcGluZ0FkZHJlc3NSZWdpc3RlcmVkQ29udHJvbGxlci50cyIsIkNvbXBvc2VyLkNhcnQuVUkvQ2hlY2tvdXRTaGlwcGluZ01ldGhvZC9Tb3VyY2UvVHlwZXNjcmlwdC9TaGlwcGluZ01ldGhvZENoZWNrb3V0Q29udHJvbGxlci50cyIsIkNvbXBvc2VyLkNhcnQuVUkvQ291cG9ucy9Tb3VyY2UvVHlwZXNjcmlwdC9Db3Vwb25TZXJ2aWNlLnRzIiwiQ29tcG9zZXIuQ2FydC5VSS9Db3Vwb25zL1NvdXJjZS9UeXBlc2NyaXB0L0NvdXBvbkNvbnRyb2xsZXIudHMiLCJDb21wb3Nlci5DYXJ0LlVJL0ZpbmRNeU9yZGVyL1NvdXJjZS9UeXBlc2NyaXB0L0lHZXRPcmRlckRldGFpbHNVcmxSZXF1ZXN0LnRzIiwiQ29tcG9zZXIuQ2FydC5VSS9GaW5kTXlPcmRlci9Tb3VyY2UvVHlwZXNjcmlwdC9JR3Vlc3RPcmRlckRldGFpbHNWaWV3TW9kZWwudHMiLCJDb21wb3Nlci5DYXJ0LlVJL0ZpbmRNeU9yZGVyL1NvdXJjZS9UeXBlc2NyaXB0L0lGaW5kT3JkZXJTZXJ2aWNlLnRzIiwiQ29tcG9zZXIuQ2FydC5VSS9GaW5kTXlPcmRlci9Tb3VyY2UvVHlwZXNjcmlwdC9GaW5kT3JkZXJTZXJ2aWNlLnRzIiwiQ29tcG9zZXIuQ2FydC5VSS9GaW5kTXlPcmRlci9Tb3VyY2UvVHlwZXNjcmlwdC9JRmluZE15T3JkZXJWaWV3TW9kZWwudHMiLCJDb21wb3Nlci5DYXJ0LlVJL0ZpbmRNeU9yZGVyL1NvdXJjZS9UeXBlc2NyaXB0L0ZpbmRNeU9yZGVyQ29udHJvbGxlci50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0V2ZW50cy9JU2NoZWR1bGVkQ2FsbGJhY2sudHMiLCJDb21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9FdmVudHMvRXZlbnRTY2hlZHVsZXIudHMiLCJDb21wb3Nlci5DYXJ0LlVJL01pbmlDYXJ0L1NvdXJjZS9UeXBlc2NyaXB0L01pbmlDYXJ0Q29udHJvbGxlci50cyIsIkNvbXBvc2VyLkNhcnQuVUkvTWluaUNhcnQvU291cmNlL1R5cGVzY3JpcHQvTWluaUNhcnRTdW1tYXJ5Q29udHJvbGxlci50cyIsIkNvbXBvc2VyLkNhcnQuVUkvTW9uZXJpc1BheW1lbnRQcm92aWRlci9Tb3VyY2UvVHlwZXNjcmlwdC9JQ3JlYXRlVmF1bHRUb2tlbk9wdGlvbnMudHMiLCJDb21wb3Nlci5DYXJ0LlVJL01vbmVyaXNQYXltZW50UHJvdmlkZXIvU291cmNlL1R5cGVzY3JpcHQvSU1vbmVyaXNBZGRWYXVsdFByb2ZpbGVWaWV3TW9kZWwudHMiLCJDb21wb3Nlci5DYXJ0LlVJL01vbmVyaXNQYXltZW50UHJvdmlkZXIvU291cmNlL1R5cGVzY3JpcHQvSU1vbmVyaXNSZXNwb25zZURhdGEudHMiLCJDb21wb3Nlci5DYXJ0LlVJL01vbmVyaXNQYXltZW50UHJvdmlkZXIvU291cmNlL1R5cGVzY3JpcHQvSVNldERlZmF1bHRDdXN0b21lclBheW1lbnRNZXRob2RWaWV3TW9kZWwudHMiLCJDb21wb3Nlci5DYXJ0LlVJL01vbmVyaXNQYXltZW50UHJvdmlkZXIvU291cmNlL1R5cGVzY3JpcHQvTW9uZXJpc1BheW1lbnRTZXJ2aWNlLnRzIiwiQ29tcG9zZXIuQ2FydC5VSS9Nb25lcmlzUGF5bWVudFByb3ZpZGVyL1NvdXJjZS9UeXBlc2NyaXB0L1Byb3ZpZGVycy9CYXNlU3BlY2lhbGl6ZWRNb25lcmlzQ2FuYWRhUGF5bWVudFByb3ZpZGVyLnRzIiwiQ29tcG9zZXIuQ2FydC5VSS9Nb25lcmlzUGF5bWVudFByb3ZpZGVyL1NvdXJjZS9UeXBlc2NyaXB0L1Byb3ZpZGVycy9DcmVkaXRDYXJkTW9uZXJpc0NhbmFkYVBheW1lbnRQcm92aWRlci50cyIsIkNvbXBvc2VyLkNhcnQuVUkvTW9uZXJpc1BheW1lbnRQcm92aWRlci9Tb3VyY2UvVHlwZXNjcmlwdC9Qcm92aWRlcnMvU2F2ZWRDcmVkaXRDYXJkTW9uZXJpc0NhbmFkYVBheW1lbnRQcm92aWRlci50cyIsIkNvbXBvc2VyLkNhcnQuVUkvTW9uZXJpc1BheW1lbnRQcm92aWRlci9Tb3VyY2UvVHlwZXNjcmlwdC9Nb25lcmlzQ2FuYWRhUGF5bWVudFByb3ZpZGVyLnRzIiwiQ29tcG9zZXIuQ2FydC5VSS9PblNpdGVQYXltZW50UHJvdmlkZXIvU291cmNlL1R5cGVzY3JpcHQvT25TaXRlUE9TUGF5bWVudFByb3ZpZGVyLnRzIiwiQ29tcG9zZXIuQ2FydC5VSS9PcmRlckRldGFpbHMvU291cmNlL1R5cGVzY3JpcHQvT3JkZXJEZXRhaWxzQ29udHJvbGxlci50cyIsIkNvbXBvc2VyLkNhcnQuVUkvT3JkZXJIaXN0b3J5L1NvdXJjZS9UeXBlc2NyaXB0L1BhcmFtZXRlcnMvSUdldE9yZGVyUGFyYW1ldGVycy50cyIsIkNvbXBvc2VyLkNhcnQuVUkvT3JkZXJIaXN0b3J5L1NvdXJjZS9UeXBlc2NyaXB0L1NlcnZpY2VzL09yZGVyU2VydmljZS50cyIsIkNvbXBvc2VyLkNhcnQuVUkvT3JkZXJIaXN0b3J5L1NvdXJjZS9UeXBlc2NyaXB0L0N1cnJlbnRPcmRlcnNDb250cm9sbGVyLnRzIiwiQ29tcG9zZXIuQ2FydC5VSS9PcmRlckhpc3RvcnkvU291cmNlL1R5cGVzY3JpcHQvUGFzdE9yZGVyc0NvbnRyb2xsZXIudHMiLCJDb21wb3Nlci5DYXJ0LlVJL09yZGVyU3VtbWFyeS9Tb3VyY2UvVHlwZXNjcmlwdC9PcmRlclN1bW1hcnlTZXJ2aWNlLnRzIiwiQ29tcG9zZXIuQ2FydC5VSS9PcmRlclN1bW1hcnkvU291cmNlL1R5cGVzY3JpcHQvT3JkZXJTdW1tYXJ5Q29udHJvbGxlci50cyIsIkNvbXBvc2VyLkNhcnQuVUkvV2lzaExpc3QvU291cmNlL1R5cGVzY3JpcHQvSVdpc2hMaXN0UmVwb3NpdG9yeS50cyIsIkNvbXBvc2VyLkNhcnQuVUkvV2lzaExpc3QvU291cmNlL1R5cGVzY3JpcHQvV2lzaExpc3RSZXBvc2l0b3J5LnRzIiwiQ29tcG9zZXIuTXlBY2NvdW50LlVJL0FjY291bnRIZWFkZXIvU291cmNlL1R5cGVzY3JpcHQvQWNjb3VudEhlYWRlckNvbnRyb2xsZXIudHMiLCJDb21wb3Nlci5NeUFjY291bnQuVUkvTXlBY2NvdW50L1NvdXJjZS9UeXBlc2NyaXB0L015QWNjb3VudENvbnRyb2xsZXIudHMiLCJDb21wb3Nlci5NeUFjY291bnQuVUkvQWRkcmVzc0xpc3QvU291cmNlL1R5cGVzY3JpcHQvQWRkcmVzc0xpc3RDb250cm9sbGVyLnRzIiwiQ29tcG9zZXIuTXlBY2NvdW50LlVJL0NoYW5nZVBhc3N3b3JkL1NvdXJjZS9UeXBlc2NyaXB0L0NoYW5nZVBhc3N3b3JkQ29udHJvbGxlci50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L1V0aWxzL1VybEhlbHBlci50cyIsIkNvbXBvc2VyLk15QWNjb3VudC5VSS9DcmVhdGVBY2NvdW50L1NvdXJjZS9UeXBlc2NyaXB0L0NyZWF0ZUFjY291bnRDb250cm9sbGVyLnRzIiwiQ29tcG9zZXIuTXlBY2NvdW50LlVJL0VkaXRBZGRyZXNzL1NvdXJjZS9UeXBlc2NyaXB0L0VkaXRBZGRyZXNzQ29udHJvbGxlci50cyIsIkNvbXBvc2VyLk15QWNjb3VudC5VSS9Gb3Jnb3RQYXNzd29yZC9Tb3VyY2UvVHlwZXNjcmlwdC9Gb3Jnb3RQYXNzd29yZENvbnRyb2xsZXIudHMiLCJDb21wb3Nlci5NeUFjY291bnQuVUkvTmV3UGFzc3dvcmQvU291cmNlL1R5cGVzY3JpcHQvTmV3UGFzc3dvcmRDb250cm9sbGVyLnRzIiwiQ29tcG9zZXIuTXlBY2NvdW50LlVJL1JldHVybmluZ0N1c3RvbWVyL1NvdXJjZS9UeXBlc2NyaXB0L1JldHVybmluZ0N1c3RvbWVyQ29udHJvbGxlci50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L1JlcG9zaXRvcmllcy9JU2lnbkluSGVhZGVyUmVwb3NpdG9yeS50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L1JlcG9zaXRvcmllcy9TaWduSW5IZWFkZXJSZXBvc2l0b3J5LnRzIiwiQ29tcG9zZXIuTXlBY2NvdW50LlVJL1NpZ25JbkhlYWRlci9Tb3VyY2UvVHlwZXNjcmlwdC9TaWduSW5IZWFkZXJTZXJ2aWNlLnRzIiwiQ29tcG9zZXIuTXlBY2NvdW50LlVJL1NpZ25JbkhlYWRlci9Tb3VyY2UvVHlwZXNjcmlwdC9TaWduSW5IZWFkZXJDb250cm9sbGVyLnRzIiwiQ29tcG9zZXIuTXlBY2NvdW50LlVJL1VwZGF0ZUFjY291bnQvU291cmNlL1R5cGVzY3JpcHQvVXBkYXRlQWNjb3VudENvbnRyb2xsZXIudHMiLCJDb21wb3Nlci5DYXJ0LlVJL1dpc2hMaXN0L1NvdXJjZS9UeXBlc2NyaXB0L1NlcnZpY2VzL0lXaXNoTGlzdFNlcnZpY2UudHMiLCJDb21wb3Nlci5DYXJ0LlVJL1dpc2hMaXN0L1NvdXJjZS9UeXBlc2NyaXB0L1NlcnZpY2VzL1dpc2hMaXN0U2VydmljZS50cyIsIkNvbXBvc2VyLk15QWNjb3VudC5VSS9XaXNoTGlzdC9Tb3VyY2UvVHlwZXNjcmlwdC9XaXNoTGlzdENvbnRyb2xsZXIudHMiLCJDb21wb3Nlci5NeUFjY291bnQuVUkvV2lzaExpc3QvU291cmNlL1R5cGVzY3JpcHQvTXlXaXNoTGlzdENvbnRyb2xsZXIudHMiLCJDb21wb3Nlci5NeUFjY291bnQuVUkvV2lzaExpc3QvU291cmNlL1R5cGVzY3JpcHQvV2lzaExpc3RJbkhlYWRlckNvbnRyb2xsZXIudHMiLCJDb21wb3Nlci5NeUFjY291bnQuVUkvV2lzaExpc3RTaGFyZWQvU291cmNlL1R5cGVzY3JpcHQvU2hhcmVkV2lzaExpc3RDb250cm9sbGVyLnRzIiwiQ29tcG9zZXIuUHJvZHVjdC5VSS9SZWxhdGVkUHJvZHVjdHMvU291cmNlL1R5cGVzY3JpcHQvUHJvZHVjdElkZW50aWZpZXJEdG8udHMiLCJDb21wb3Nlci5Qcm9kdWN0LlVJL1Byb2R1Y3QvU291cmNlL1R5cGVzY3JpcHQvSUludmVudG9yeVNlcnZpY2UudHMiLCJDb21wb3Nlci5Qcm9kdWN0LlVJL1Byb2R1Y3QvU291cmNlL1R5cGVzY3JpcHQvSW52ZW50b3J5U2VydmljZS50cyIsIkNvbXBvc2VyLlByb2R1Y3QuVUkvUHJvZHVjdC9Tb3VyY2UvVHlwZXNjcmlwdC9JUHJvZHVjdFNlcnZpY2UudHMiLCJDb21wb3Nlci5Qcm9kdWN0LlVJL1Byb2R1Y3QvU291cmNlL1R5cGVzY3JpcHQvS2V5VmFyaWFudEF0dHJpYnV0ZUl0ZW1zQnVpbGRlci50cyIsIkNvbXBvc2VyLlByb2R1Y3QuVUkvUHJvZHVjdC9Tb3VyY2UvVHlwZXNjcmlwdC9Qcm9kdWN0U2VydmljZS50cyIsIkNvbXBvc2VyLlByb2R1Y3QuVUkvUHJvZHVjdC9Tb3VyY2UvVHlwZXNjcmlwdC9Qcm9kdWN0Rm9ybWF0dGVyLnRzIiwiQ29tcG9zZXIuUHJvZHVjdC5VSS9Qcm9kdWN0L1NvdXJjZS9UeXBlc2NyaXB0L1Byb2R1Y3RDb250cm9sbGVyLnRzIiwiQ29tcG9zZXIuUHJvZHVjdC5VSS9Qcm9kdWN0RGV0YWlsL1NvdXJjZS9UeXBlc2NyaXB0L1Byb2R1Y3REZXRhaWxDb250cm9sbGVyLnRzIiwiQ29tcG9zZXIuUHJvZHVjdC5VSS9Qcm9kdWN0RGV0YWlsL1NvdXJjZS9UeXBlc2NyaXB0L1Byb2R1Y3Rab29tQ29udHJvbGxlci50cyIsIkNvbXBvc2VyLlByb2R1Y3QuVUkvUHJvZHVjdFNwZWNpZmljYXRpb24vU291cmNlL1R5cGVzY3JpcHQvUHJvZHVjdFNwZWNpZmljYXRpb25zU2VydmljZS50cyIsIkNvbXBvc2VyLlByb2R1Y3QuVUkvUHJvZHVjdFNwZWNpZmljYXRpb24vU291cmNlL1R5cGVzY3JpcHQvUHJvZHVjdFNwZWNpZmljYXRpb25zQ29udHJvbGxlci50cyIsIkNvbXBvc2VyLlByb2R1Y3QuVUkvUHJvZHVjdFNlYXJjaC9Tb3VyY2UvVHlwZXNjcmlwdC9JRmFjZXQudHMiLCJDb21wb3Nlci5Qcm9kdWN0LlVJL1Byb2R1Y3RTZWFyY2gvU291cmNlL1R5cGVzY3JpcHQvSVNlbGVjdGVkRmFjZXQudHMiLCJDb21wb3Nlci5Qcm9kdWN0LlVJL1Byb2R1Y3RTZWFyY2gvU291cmNlL1R5cGVzY3JpcHQvSVNlYXJjaENyaXRlcmlhT3B0aW9ucy50cyIsIkNvbXBvc2VyLlByb2R1Y3QuVUkvUHJvZHVjdFNlYXJjaC9Tb3VyY2UvVHlwZXNjcmlwdC9TZWFyY2hDcml0ZXJpYS50cyIsIkNvbXBvc2VyLlByb2R1Y3QuVUkvUHJvZHVjdFNlYXJjaC9Tb3VyY2UvVHlwZXNjcmlwdC9TZXJ2aWNlcy9JU2VhcmNoU2VydmljZS50cyIsIkNvbXBvc2VyLlByb2R1Y3QuVUkvUHJvZHVjdFNlYXJjaC9Tb3VyY2UvVHlwZXNjcmlwdC9JU2luZ2xlU2VsZWN0Q2F0ZWdvcnkudHMiLCJDb21wb3Nlci5Qcm9kdWN0LlVJL1Byb2R1Y3RTZWFyY2gvU291cmNlL1R5cGVzY3JpcHQvU2VydmljZXMvU2VhcmNoU2VydmljZS50cyIsIkNvbXBvc2VyLlByb2R1Y3QuVUkvUHJvZHVjdFNlYXJjaC9Tb3VyY2UvVHlwZXNjcmlwdC9TZXJ2aWNlcy9TbGlkZXJTZXJ2aWNlLnRzIiwiQ29tcG9zZXIuUHJvZHVjdC5VSS9Qcm9kdWN0U2VhcmNoL1NvdXJjZS9UeXBlc2NyaXB0L1VybEhlbHBlci50cyIsIkNvbXBvc2VyLlByb2R1Y3QuVUkvUHJvZHVjdFNlYXJjaC9Tb3VyY2UvVHlwZXNjcmlwdC9GYWNldFNlYXJjaENvbnRyb2xsZXIudHMiLCJDb21wb3Nlci5Qcm9kdWN0LlVJL1Byb2R1Y3RTZWFyY2gvU291cmNlL1R5cGVzY3JpcHQvSVF1aWNrVmlld0NvbnRyb2xsZXIudHMiLCJDb21wb3Nlci5Qcm9kdWN0LlVJL1Byb2R1Y3RTZWFyY2gvU291cmNlL1R5cGVzY3JpcHQvUHJvZHVjdFNlYXJjaENvbnRyb2xsZXIudHMiLCJDb21wb3Nlci5Qcm9kdWN0LlVJL1Byb2R1Y3RTZWFyY2gvU291cmNlL1R5cGVzY3JpcHQvUXVpY2tWaWV3Q29udHJvbGxlci50cyIsIkNvbXBvc2VyLlByb2R1Y3QuVUkvUHJvZHVjdFNlYXJjaC9Tb3VyY2UvVHlwZXNjcmlwdC9TZWFyY2hSZXN1bHRzQ29udHJvbGxlci50cyIsIkNvbXBvc2VyLlByb2R1Y3QuVUkvUHJvZHVjdFNlYXJjaC9Tb3VyY2UvVHlwZXNjcmlwdC9TZWFyY2hTdW1tYXJ5Q29udHJvbGxlci50cyIsIkNvbXBvc2VyLlByb2R1Y3QuVUkvUHJvZHVjdFNlYXJjaC9Tb3VyY2UvVHlwZXNjcmlwdC9TZWxlY3RlZEZhY2V0U2VhcmNoQ29udHJvbGxlci50cyIsIkNvbXBvc2VyLlByb2R1Y3QuVUkvUHJvZHVjdFNlYXJjaC9Tb3VyY2UvVHlwZXNjcmlwdC9Tb3J0QnlTZWFyY2hDb250cm9sbGVyLnRzIiwiQ29tcG9zZXIuUHJvZHVjdC5VSS9SZWxhdGVkUHJvZHVjdHMvU291cmNlL1R5cGVzY3JpcHQvUmVsYXRlZFByb2R1Y3RDYXJvdXNlbC5qcyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L1BsdWdpbnMvU2xpY2tDYXJvdXNlbFBsdWdpbi50cyIsIkNvbXBvc2VyLlByb2R1Y3QuVUkvUmVsYXRlZFByb2R1Y3RzL1NvdXJjZS9UeXBlc2NyaXB0L1JlbGF0ZWRQcm9kdWN0c0NvbnRyb2xsZXIudHMiLCJDb21wb3Nlci5TdG9yZS5VSS9TdG9yZUxvY2F0b3IvU291cmNlL1R5cGVzY3JpcHQvU2VydmljZXMvR2VvTG9jYXRpb25TZXJ2aWNlLnRzIiwiQ29tcG9zZXIuU3RvcmUuVUkvU3RvcmVEaXJlY3RvcnkvU291cmNlL1R5cGVzY3JpcHQvU3RvcmVzRGlyZWN0b3J5Q29udHJvbGxlci50cyIsIkNvbXBvc2VyLlN0b3JlLlVJL1N0b3JlSW52ZW50b3J5L1NvdXJjZS9UeXBlc2NyaXB0L1NlcnZpY2VzL0dldFN0b3Jlc0ludmVudG9yeVBhcmFtLnRzIiwiQ29tcG9zZXIuU3RvcmUuVUkvU3RvcmVJbnZlbnRvcnkvU291cmNlL1R5cGVzY3JpcHQvU2VydmljZXMvSVN0b3JlSW52ZW50b3J5U2VydmljZS50cyIsIkNvbXBvc2VyLlN0b3JlLlVJL1N0b3JlSW52ZW50b3J5L1NvdXJjZS9UeXBlc2NyaXB0L1NlcnZpY2VzL1N0b3JlSW52ZW50b3J5U2VydmljZS50cyIsIkNvbXBvc2VyLlN0b3JlLlVJL1N0b3JlSW52ZW50b3J5L1NvdXJjZS9UeXBlc2NyaXB0L1N0b3JlSW52ZW50b3J5Q29udHJvbGxlci50cyIsIkNvbXBvc2VyLlN0b3JlLlVJL1N0b3JlTG9jYXRvci9Tb3VyY2UvVHlwZXNjcmlwdC9JTWFwT3B0aW9ucy50cyIsIkNvbXBvc2VyLlN0b3JlLlVJL1N0b3JlTG9jYXRvci9Tb3VyY2UvVHlwZXNjcmlwdC9JU3RvcmVMb2NhdG9ySW5pdGlhbGl6YXRpb25PcHRpb25zLnRzIiwiQ29tcG9zZXIuU3RvcmUuVUkvU3RvcmVMb2NhdG9yL1NvdXJjZS9UeXBlc2NyaXB0L01hcmtlci50cyIsIkNvbXBvc2VyLlN0b3JlLlVJL1N0b3JlTG9jYXRvci9Tb3VyY2UvVHlwZXNjcmlwdC9NYXJrZXJQb29sLnRzIiwiQ29tcG9zZXIuU3RvcmUuVUkvU3RvcmVMb2NhdG9yL1NvdXJjZS9UeXBlc2NyaXB0L01hcFNlcnZpY2UudHMiLCJDb21wb3Nlci5TdG9yZS5VSS9TdG9yZUxvY2F0b3IvU291cmNlL1R5cGVzY3JpcHQvU3RvcmVEZXRhaWxzQ29udHJvbGxlci50cyIsIkNvbXBvc2VyLlN0b3JlLlVJL1N0b3JlTG9jYXRvci9Tb3VyY2UvVHlwZXNjcmlwdC9TZXJ2aWNlcy9JU3RvcmVMb2NhdG9yU2VydmljZS50cyIsIkNvbXBvc2VyLlN0b3JlLlVJL1N0b3JlTG9jYXRvci9Tb3VyY2UvVHlwZXNjcmlwdC9TZXJ2aWNlcy9TdG9yZUxvY2F0b3JFbmRQb2ludFVybHMudHMiLCJDb21wb3Nlci5TdG9yZS5VSS9TdG9yZUxvY2F0b3IvU291cmNlL1R5cGVzY3JpcHQvU2VydmljZXMvU3RvcmVMb2NhdG9yU2VydmljZS50cyIsIkNvbXBvc2VyLlN0b3JlLlVJL1N0b3JlTG9jYXRvci9Tb3VyY2UvVHlwZXNjcmlwdC9TdG9yZUxvY2F0b3JIaXN0b3J5U3RhdGUudHMiLCJDb21wb3Nlci5TdG9yZS5VSS9TdG9yZUxvY2F0b3IvU291cmNlL1R5cGVzY3JpcHQvU3RvcmVMb2NhdG9yQ29udHJvbGxlci50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0hhbmRsZWJhcnMvSGVscGVycy9Fc2NhcGVIZWxwZXIudHMiLCJDb21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9IYW5kbGViYXJzL0hlbHBlcnMvSWZFcXVhbHNIZWxwZXIudHMiLCJDb21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9IYW5kbGViYXJzL0hlbHBlcnMvSWZFeGlzdHNIZWxwZXIudHMiLCJDb21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9IYW5kbGViYXJzL0hlbHBlcnMvSWZHcmVhdGVyVGhhbkhlbHBlci50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0hhbmRsZWJhcnMvSGVscGVycy9JZkdyZWF0ZXJUaGFuT3JFcXVhbEhlbHBlci50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0hhbmRsZWJhcnMvSGVscGVycy9JZkxlc3NUaGFuSGVscGVyLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvSGFuZGxlYmFycy9IZWxwZXJzL0lmTGVzc1RoYW5PckVxdWFsSGVscGVyLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvSGFuZGxlYmFycy9IZWxwZXJzL0lIYW5kbGViYXJzTG9jYWxpemF0aW9uLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvSGFuZGxlYmFycy9IZWxwZXJzL0lmTG9jYWxpemVkSGVscGVyLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvSGFuZGxlYmFycy9IZWxwZXJzL0lmTm90RXF1YWxzSGVscGVyLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvSGFuZGxlYmFycy9IZWxwZXJzL0xvY2FsaXplRm9ybWF0SGVscGVyLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvSGFuZGxlYmFycy9IZWxwZXJzL0xvY2FsaXplSGVscGVyLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvTXZjL0V4Y2VwdGlvbnMvQ29udHJvbGxlckFscmVhZHlSZWdpc3RlcmVkRXhjZXB0aW9uLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvTXZjL0V4Y2VwdGlvbnMvTWlzc2luZ0NvbnRyb2xsZXJEaXNwYXRjaGVyTmFtZUV4Y2VwdGlvbi50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L012Yy9Db250cm9sbGVyUmVnaXN0cnkudHMiLCJDb21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9NdmMvSUNyZWF0ZUNvbnRyb2xsZXJPcHRpb25zLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvTXZjL0NvbnRyb2xsZXJGYWN0b3J5LnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvVmFsaWRhdGlvbi9JUGFyc2xleVZhbGlkYXRvci5qcyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0NvbXBvc2VyQ29udGV4dC50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0Jvb3RzdHJhcC50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0pRdWVyeVBsdWdpbnMvSVBvcE92ZXJKcXVlcnlQbHVnaW4udHMiLCJDb21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9Db250cm9sbGVyL1NlYXJjaEJveENvbnRyb2xsZXIudHMiLCJDb21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9Db250cm9sbGVyL1BhZ2VOb3RGb3VuZEFuYWx5dGljc0NvbnRyb2xsZXIudHMiLCJDb21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9Db250cm9sbGVyL0xhbmd1YWdlU3dpdGNoQ29udHJvbGxlci50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0Vycm9ySGFuZGxpbmcvRXJyb3JDb250cm9sbGVyLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvQXBwLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvTXZjL0lDb250cm9sbGVyQWN0aW9uU2lnbmF0dXJlLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvUGx1Z2lucy9BbnRpSUZyYW1lQ2xpY2tKYWNraW5nUGx1Z2luLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvUGx1Z2lucy9Db21wb3NlclZhbGlkYXRpb25QbHVnaW4udHMiLCJDb21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9QbHVnaW5zL0ZvY3VzRWxlbWVudFBsdWdpbi50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L1BsdWdpbnMvSGVscEJ1YmJsZXNQbHVnaW4udHMiLCJDb21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9QbHVnaW5zL1N0aWNreUFmZml4UGx1Z2luLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQVVDOztBQ0FBOztBQ1ZELHVDQUF1QztBQU10QztBQ1VBOztBQ1RBOztBQ1BELDJDQUEyQztBQUMzQyx1Q0FBdUM7QUFDdkMsNENBQTRDO0FBQzVDLCtDQUErQztBQUMvQyw4REFBOEQ7QUF1QjdEO0FDM0JELDJDQUEyQztBQUMzQyx1Q0FBdUM7QUFDdkMsNENBQTRDO0FBQzVDLCtDQUErQztBQUMvQyx1Q0FBdUM7QUFDdkMsOERBQThEO0FBRTlELElBQU8sU0FBUyxDQStEZjtBQS9ERCxXQUFPLFNBQVM7SUFBQyxJQUFBLFFBQVEsQ0ErRHhCO0lBL0RnQixXQUFBLFFBQVEsRUFBQyxDQUFDO1FBQ3ZCOztVQUVFO1FBQ0Y7WUFRSTtnQkFQUSxZQUFPLEdBQXFFLEVBQUUsQ0FBQztnQkFRbkYsRUFBRSxDQUFDLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7b0JBQ3JCLE1BQU0sSUFBSSxLQUFLLENBQUMsc0VBQXNFLENBQUMsQ0FBQztnQkFDNUYsQ0FBQztnQkFFRCxRQUFRLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQztZQUM5QixDQUFDO1lBVmEsaUJBQVEsR0FBdEI7Z0JBQ0ksTUFBTSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUM7WUFDOUIsQ0FBQztZQVVEOzs7OztjQUtFO1lBQ0YsNEJBQVMsR0FBVCxVQUFVLFNBQWlCLEVBQUUsUUFBbUI7Z0JBQWhELGlCQWdCQztnQkFmRyxJQUFJLEtBQWEsQ0FBQztnQkFFbEIsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQzFDLElBQUksQ0FBQyxPQUFPLENBQUMs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O2dCQUNQLENBQUMsQ0FBQyxDQUFDO1lBQ1AsQ0FBQztZQUNMLHdCQUFDO1FBQUQsQ0FmQSxBQWVDLElBQUE7UUFmWSwwQkFBaUIsb0JBZTdCLENBQUE7SUFDTCxDQUFDLEVBakJnQixRQUFRLEdBQVIsa0JBQVEsS0FBUixrQkFBUSxRQWlCeEI7QUFBRCxDQUFDLEVBakJNLFNBQVMsS0FBVCxTQUFTLFFBaUJmIiwiZmlsZSI6Im9yY2tlc3RyYS5jb21wb3Nlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKiBBIGhvb2sgdGhhdCBhbGxvd3MgYSBsaXN0ZW5lciB0byB1bnN1YnNjcmliZSBmcm9tIGFuIGV2ZW50LlxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElTdWJzY3JpcHRpb24ge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJlbW92ZXMgYSBsaXN0ZW5lciBmcm9tIGFuIGV2ZW50LlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHJlbW92ZSgpOiB2b2lkO1xyXG4gICAgfVxyXG59XHJcbiIsIm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKiBBIGxpc3RlbmVyIHRoYXQgY2FuIHN1YnNjcmliZSB0byBhbiBldmVudC5cclxuICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElMaXN0ZW5lciB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU2lnbmF0dXJlIGZvciBhIGxpc3RlbmVyIHRoYXQgaXMgc3Vic2NyaWJlZCB0byBhbiBldmVudC5cclxuICAgICAgICAqL1xyXG4gICAgICAgIChldmVudEluZm9ybWF0aW9uOiBJRXZlbnRJbmZvcm1hdGlvbik6IHZvaWQ7XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi9JTGlzdGVuZXIudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSUxpc3RlbmVyUXVldWUge1xyXG4gICAgICAgIHF1ZXVlOiBJTGlzdGVuZXJbXTtcclxuICAgIH1cclxufVxyXG4iLCJtb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIC8qKlxyXG4gICAgICogSW5mb3JtYXRpb24gdGhhdCBhbiBldmVudCBwdWJsaXNoZXMgdG8gaXRzIHN1YnNjcmliZXJzLlxyXG4gICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSUV2ZW50SW5mb3JtYXRpb24ge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBkYXRhIHRoYXQgYW4gZXZlbnQgaXMgcHVibGlzaGluZyB0byBpdHMgc3Vic2NyaWJlcnMuXHJcbiAgICAgICAgKi9cclxuICAgICAgICBkYXRhOiBhbnk7IC8vIG5vIGNob2ljZSBidXQgdXNpbmcuIEV2ZW50cyB0aGF0IHB1Ymxpc2ggbWF5IGNvbnRhaW4gZGlmZmVyZW50IGRhdGEgdG8gcHJvdmlkZSB0byB0aGVpciBzdWJzY3JpYmVyc1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTb3VyY2UgZnJvbSB3aGljaCB0aGUgZGF0YSBvcmlnaW5hdGVzLiAoT3B0aW9uYWwpXHJcbiAgICAgICAgICogQHR5cGUge3N0cmluZ31cclxuICAgICAgICAgKi9cclxuICAgICAgICBzb3VyY2U/OiBzdHJpbmc7XHJcbiAgICB9XHJcbn1cclxuIiwibW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAvKlxyXG4gICAgKiBBIGdlbmVyaWMgaGFzaHRhYmxlXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSUhhc2hUYWJsZTxUPiB7XHJcbiAgICAgICAgW2tleTogc3RyaW5nXTogVDtcclxuICAgIH1cclxufVxyXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPScuL0lTdWJzY3JpcHRpb24udHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4vSUxpc3RlbmVyLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuL0lMaXN0ZW5lclF1ZXVlLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuL0lFdmVudEluZm9ybWF0aW9uLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuLi9HZW5lcmljcy9Db2xsZWN0aW9ucy9JSGFzaFRhYmxlLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAvKipcclxuICAgICAqIEFuIGV2ZW50IGh1YiBmb3Igc3Vic2NyaWJpbmcgdG8gYW5kIHB1Ymxpc2hpbmcgZXZlbnRzLlxyXG4gICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSUV2ZW50SHViIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTdWJzY3JpYmUgdG8gYW4gZXZlbnQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZXZlbnROYW1lIFRoZSBuYW1lIG9mIHRoZSBldmVudCB0byBzdWJzY3JpYmUgdG8uXHJcbiAgICAgICAgICogQHBhcmFtIGxpc3RlbmVyIFRoZSBsaXN0ZW5lciBzdWJzY3JpYmluZyB0byB0aGUgZXZlbnQuXHJcbiAgICAgICAgKi9cclxuICAgICAgICBzdWJzY3JpYmUoZXZlbnROYW1lOiBzdHJpbmcsIGxpc3RlbmVyOiBJTGlzdGVuZXIpOiBJU3Vic2NyaXB0aW9uO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBQdWJsaXNoZXMgYW4gZXZlbnQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZXZlbnROYW1lIFRoZSBuYW1lIG9mIHRoZSBldmVudCB0byBzdWJzY3JpYmUgdG8uXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50SW5mb3JtYXRpb24gVGhlIGluZm9ybWF0aW9uIHRvIHByb3ZpZGUgYWxsIHN1YnNjcmliZXJzIHdoZW4gdGhlIGV2ZW50IGlzIHB1Ymxpc2hlZC5cclxuICAgICAgICAqL1xyXG4gICAgICAgIHB1Ymxpc2goZXZlbnROYW1lOiBzdHJpbmcsIGV2ZW50SW5mb3JtYXRpb246IElFdmVudEluZm9ybWF0aW9uKTogdm9pZDtcclxuICAgIH1cclxufVxyXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPScuL0lTdWJzY3JpcHRpb24udHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4vSUxpc3RlbmVyLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuL0lMaXN0ZW5lclF1ZXVlLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuL0lFdmVudEluZm9ybWF0aW9uLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuL0lFdmVudEh1Yi50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vR2VuZXJpY3MvQ29sbGVjdGlvbnMvSUhhc2hUYWJsZS50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKiBBbiBldmVudCBodWIgZm9yIHN1YnNjcmliaW5nIHRvIGFuZCBwdWJsaXNoaW5nIGV2ZW50cy5cclxuICAgICovXHJcbiAgICBleHBvcnQgY2xhc3MgRXZlbnRIdWIgaW1wbGVtZW50cyBPcmNrZXN0cmEuQ29tcG9zZXIuSUV2ZW50SHViIHtcclxuICAgICAgICBwcml2YXRlIF9ldmVudHM6IE9yY2tlc3RyYS5Db21wb3Nlci5JSGFzaFRhYmxlPE9yY2tlc3RyYS5Db21wb3Nlci5JTGlzdGVuZXJRdWV1ZT4gPSB7fTtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBfaW5zdGFuY2U6IE9yY2tlc3RyYS5Db21wb3Nlci5JRXZlbnRIdWIgPSBuZXcgRXZlbnRIdWIoKTtcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnN0YW5jZSgpOiBPcmNrZXN0cmEuQ29tcG9zZXIuSUV2ZW50SHViIHtcclxuICAgICAgICAgICAgcmV0dXJuIEV2ZW50SHViLl9pbnN0YW5jZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgICAgICBpZiAoRXZlbnRIdWIuX2luc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Vycm9yOiBJbnN0YW50aWF0aW9uIGZhaWxlZDogVXNlIEV2ZW50SHViLmluc3RhbmNlKCkgaW5zdGVhZCBvZiBuZXcuJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIEV2ZW50SHViLl9pbnN0YW5jZSA9IHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTdWJzY3JpYmUgdG8gYW4gZXZlbnQuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZXZlbnROYW1lIFRoZSBuYW1lIG9mIHRoZSBldmVudCB0byBzdWJzY3JpYmUgdG8uXHJcbiAgICAgICAgICogQHBhcmFtIGxpc3RlbmVyIFRoZSBsaXN0ZW5lciBzdWJzY3JpYmluZyB0byB0aGUgZXZlbnQuXHJcbiAgICAgICAgKi9cclxuICAgICAgICBzdWJzY3JpYmUoZXZlbnROYW1lOiBzdHJpbmcsIGxpc3RlbmVyOiBJTGlzdGVuZXIpOiBJU3Vic2NyaXB0aW9uIHtcclxuICAgICAgICAgICAgdmFyIGluZGV4OiBudW1iZXI7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuX2V2ZW50cy5oYXNPd25Qcm9wZXJ0eShldmVudE5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9ldmVudHNbZXZlbnROYW1lXSA9IHsgcXVldWU6IFtdIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGluZGV4ID0gdGhpcy5fZXZlbnRzW2V2ZW50TmFtZV0ucXVldWUucHVzaChsaXN0ZW5lcikgLSAxO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuICgodG9waWMsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZTogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5fZXZlbnRzW2V2ZW50TmFtZV0ucXVldWVbaW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0pKGV2ZW50TmFtZSwgaW5kZXgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUHVibGlzaGVzIGFuIGV2ZW50LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50TmFtZSBUaGUgbmFtZSBvZiB0aGUgZXZlbnQgdG8gc3Vic2NyaWJlIHRvLlxyXG4gICAgICAgICAqIEBwYXJhbSBldmVudEluZm9ybWF0aW9uIFRoZSBpbmZvcm1hdGlvbiB0byBwcm92aWRlIGFsbCBzdWJzY3JpYmVycyB3aGVuIHRoZSBldmVudCBpcyBwdWJsaXNoZWQuXHJcbiAgICAgICAgKi9cclxuICAgICAgICBwdWJsaXNoKGV2ZW50TmFtZTogc3RyaW5nLCBldmVudEluZm9ybWF0aW9uOiBJRXZlbnRJbmZvcm1hdGlvbik6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuX2V2ZW50cy5oYXNPd25Qcm9wZXJ0eShldmVudE5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2V2ZW50c1tldmVudE5hbWVdLnF1ZXVlLmZvckVhY2goZnVuY3Rpb24gKGxpc3RlbmVyOiBJTGlzdGVuZXIpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAobGlzdGVuZXIgIT09IHZvaWQgMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpc3RlbmVyKGV2ZW50SW5mb3JtYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwibW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElBbmFseXRpY3NQcm9kdWN0IHtcclxuICAgICAgICBpZD86IHN0cmluZztcclxuICAgICAgICBuYW1lPzogc3RyaW5nO1xyXG4gICAgICAgIHByaWNlPzogbnVtYmVyO1xyXG4gICAgICAgIGJyYW5kPzogc3RyaW5nO1xyXG4gICAgICAgIGNhdGVnb3J5Pzogc3RyaW5nO1xyXG4gICAgICAgIHZhcmlhbnQ/OiBzdHJpbmc7XHJcbiAgICAgICAgcXVhbnRpdHk/OiBudW1iZXI7XHJcbiAgICAgICAgcG9zaXRpb24/OiBudW1iZXI7XHJcbiAgICAgICAgbGlzdD86IHN0cmluZztcclxuICAgIH1cclxufSIsIm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJQW5hbHl0aWNzU2VhcmNoUmVzdWx0cyB7XHJcbiAgICAgICAgUHJvZHVjdFNlYXJjaFJlc3VsdHM/OiBhbnk7XHJcbiAgICAgICAga2V5d29yZEVudGVyZWQ/OiBzdHJpbmc7XHJcbiAgICAgICAga2V5d29yZENvcnJlY3RlZD86IHN0cmluZztcclxuICAgIH1cclxufSIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9JQW5hbHl0aWNzUHJvZHVjdC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL0lBbmFseXRpY3NTZWFyY2hSZXN1bHRzLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElBbmFseXRpY3NQbHVnaW4ge1xyXG4gICAgICAgIHByb2R1Y3RJbXByZXNzaW9ucyhwcm9kdWN0czogSUFuYWx5dGljc1Byb2R1Y3RbXSk6IHZvaWQ7XHJcbiAgICAgICAgcHJvZHVjdENsaWNrKHByb2R1Y3Q6IElBbmFseXRpY3NQcm9kdWN0LCBsaXN0TmFtZTogc3RyaW5nKTogdm9pZDtcclxuICAgICAgICBwcm9kdWN0RGV0YWlsSW1wcmVzc2lvbnMocHJvZHVjdHM6IElBbmFseXRpY3NQcm9kdWN0W10sIGxpc3ROYW1lOiBzdHJpbmcpOiB2b2lkO1xyXG4gICAgICAgIGFkZFRvQ2FydChwcm9kdWN0OiBJQW5hbHl0aWNzUHJvZHVjdCwgbGlzdE5hbWU6IHN0cmluZyk6IHZvaWQ7XHJcbiAgICAgICAgcmVtb3ZlRnJvbUNhcnQocHJvZHVjdDogSUFuYWx5dGljc1Byb2R1Y3QsIGxpc3ROYW1lOiBzdHJpbmcpOiB2b2lkO1xyXG4gICAgICAgIGNoZWNrb3V0KHN0ZXA6IG51bWJlciwgdHJhbnNhY3Rpb246IElBbmFseXRpY3NUcmFuc2FjdGlvbiwgcHJvZHVjdHM6IElBbmFseXRpY3NQcm9kdWN0W10pOiB2b2lkO1xyXG4gICAgICAgIGNoZWNrb3V0T3B0aW9uKHN0ZXA6IG51bWJlcik6IHZvaWQ7XHJcbiAgICAgICAgc2VhcmNoS2V5d29yZENvcnJlY3Rpb24oc2VhcmNoUmVzdWx0czogSUFuYWx5dGljc1NlYXJjaFJlc3VsdHMpOiB2b2lkO1xyXG4gICAgICAgIG5vUmVzdWx0c0ZvdW5kKGtleXdvcmROb3RGb3VuZDogc3RyaW5nKTogdm9pZDtcclxuICAgICAgICBjb3Vwb25zVXNlZChvcmRlcjogSUFuYWx5dGljc0NvdXBvbik6IHZvaWQ7XHJcbiAgICAgICAgcHVyY2hhc2Uob3JkZXI6IElBbmFseXRpY3NPcmRlciwgdHJhbnNhY3Rpb246IElBbmFseXRpY3NUcmFuc2FjdGlvbiwgcHJvZHVjdHM6IElBbmFseXRpY3NQcm9kdWN0W10pOiB2b2lkO1xyXG4gICAgICAgIHNlbmRFdmVudChldmVudE5hbWU6IHN0cmluZywgY2F0ZWdvcnk6IHN0cmluZywgYWN0aW9uOiBzdHJpbmcsIGxhYmVsPzogc3RyaW5nLCB2YWx1ZT86IG51bWJlcik6IHZvaWQ7XHJcbiAgICAgICAgdXNlckxvZ2dlZEluKHR5cGU6IHN0cmluZywgc291cmNlOiBzdHJpbmcpOiB2b2lkO1xyXG4gICAgICAgIHVzZXJDcmVhdGVkKCk6IHZvaWQ7XHJcbiAgICAgICAgcmVjb3ZlclBhc3N3b3JkKCk6IHZvaWQ7XHJcbiAgICB9XHJcbn0iLCJtb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSUFuYWx5dGljc0NvdXBvbiB7XHJcbiAgICAgICAgY29kZT86IHN0cmluZztcclxuICAgICAgICBkaXNjb3VudEFtb3VudD86IHN0cmluZztcclxuICAgICAgICBjdXJyZW5jeUNvZGU/OiBzdHJpbmc7XHJcbiAgICAgICAgcHJvbW90aW9uTmFtZT86IHN0cmluZztcclxuICAgIH1cclxufSIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9JQW5hbHl0aWNzQ291cG9uLnRzJyAvPlxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSUFuYWx5dGljc09yZGVyIHtcclxuICAgICAgICBpZD86IHN0cmluZztcclxuICAgICAgICBhZmZpbGlhdGlvbj86IHN0cmluZztcclxuICAgICAgICByZXZlbnVlPzogc3RyaW5nO1xyXG4gICAgICAgIHRheD86IHN0cmluZztcclxuICAgICAgICBzaGlwcGluZz86IHN0cmluZztcclxuICAgICAgICBjdXJyZW5jeUNvZGU/OiBzdHJpbmc7XHJcbiAgICAgICAgY291cG9uPzogc3RyaW5nO1xyXG4gICAgfVxyXG59IiwibW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElBbmFseXRpY3NUcmFuc2FjdGlvbiB7XHJcbiAgICAgICAgc2hpcHBpbmdUeXBlPzogc3RyaW5nO1xyXG4gICAgICAgIGNoZWNrb3V0T3JpZ2luPzogc3RyaW5nO1xyXG4gICAgfVxyXG59IiwibW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElBbmFseXRpY3NTZWFyY2hGaWx0ZXJzIHtcclxuICAgICAgICBmYWNldEtleT86IHN0cmluZztcclxuICAgICAgICBmYWNldFZhbHVlPzogc3RyaW5nO1xyXG4gICAgICAgIHBhZ2VUeXBlPzogc3RyaW5nO1xyXG4gICAgfVxyXG59IiwibW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElQbHVnaW4ge1xyXG4gICAgICAgIGluaXRpYWxpemUod2luZG93OiBXaW5kb3csIGRvY3VtZW50OiBIVE1MRG9jdW1lbnQpOiB2b2lkO1xyXG4gICAgfVxyXG59XHJcbiIsIm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKiBQcm92aWRlcyBhIG1lY2hhbmlzbSBmb3IgcmVsZWFzaW5nIGFueSByZXNvdXJjZXMuXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSURpc3Bvc2FibGUge1xyXG4gICAgICAgIGRpc3Bvc2UoKTogdm9pZDtcclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vU3lzdGVtL0lEaXNwb3NhYmxlLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElDb250cm9sbGVyIGV4dGVuZHMgSURpc3Bvc2FibGUge1xyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICogSW5pdGlhbGl6ZXMgYSB2aWV3IGNvbnRyb2xsZXIuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgaW5pdGlhbGl6ZSgpOiB2b2lkO1xyXG5cclxuICAgICAgICAvKlxyXG4gICAgICAgICAqIERpc3Bvc2VzIGFueSByZXNvdXJjZXMgdXNlZCBieSBhIHZpZXcgY29udHJvbGxlci5cclxuICAgICAgICAgKi9cclxuICAgICAgICBkaXNwb3NlKCk6IHZvaWQ7XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElDb250cm9sbGVyQ29udGV4dCB7XHJcbiAgICAgICAgdGVtcGxhdGVOYW1lOiBzdHJpbmc7XHJcbiAgICAgICAgZGF0YUl0ZW1JZDogc3RyaW5nO1xyXG4gICAgICAgIGNvbnRhaW5lcjogSlF1ZXJ5O1xyXG4gICAgICAgIHZpZXdNb2RlbDogYW55O1xyXG4gICAgICAgIHdpbmRvdzogV2luZG93O1xyXG4gICAgfVxyXG59XHJcblxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSVJlZ2lzdGVyQWN0aW9uT3B0aW9ucyB7XHJcbiAgICAgICAgYWN0aW9uTmFtZTogc3RyaW5nO1xyXG4gICAgICAgIGFjdGlvbkRlbGVnYXRlOiBGdW5jdGlvbjtcclxuICAgICAgICBvdmVyd3JpdGU/OiBib29sZWFuO1xyXG4gICAgfVxyXG59XHJcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi90eXBpbmdzL3RzZC5kLnRzXCIgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIC8qKlxyXG4gICAgKiBBbGwgdGhlIGNvbnRleHR1YWwgaW5mb3JtYXRpb24gcmVxdWlyZWQgZm9yIGFuIGFjdGlvbiB0byBleGVjdXRlLlxyXG4gICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0IHtcclxuICAgICAgICAvKipcclxuICAgICAgICAqIEEgRE9NIGVsZW1lbnQgcmVxdWVzdGluZyB0aGUgYWN0aW9uIHRvIGV4ZWN1dGUuXHJcbiAgICAgICAgKi9cclxuICAgICAgICBlbGVtZW50Q29udGV4dDogSlF1ZXJ5O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAqIEEgRE9NIGV2ZW50IHRoYXQgdHJpZ2dlcnMgdGhlIGFjdGlvbiB0byBleGVjdXRlLlxyXG4gICAgICAgICovXHJcbiAgICAgICAgZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0O1xyXG4gICAgfVxyXG59XHJcblxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uL0dlbmVyaWNzL0NvbGxlY3Rpb25zL0lIYXNoVGFibGUudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIC8qXHJcbiAgICAqIFRoaXMgaXMgdGhlIGNvbGxlY3Rpb24gb2YgY29tcGlsZWQgSGFuZGxlYmFycyB0ZW1wbGF0ZXMuIFRoZSB0ZW1wbGF0ZXMgYXJlXHJcbiAgICAqIGdlbmVyYXRlZCBieSB0aGUgYnVpbGQgcHJvY2Vzcy4gVGhpcyBpcyBoZXJlIG9ubHkgdG8gYXBwZWFzZSBUeXBlU2NyaXB0LlxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElDb21wb3NlclRlbXBsYXRlcyB7XHJcbiAgICAgICAgVGVtcGxhdGVzOiBJSGFzaFRhYmxlPEZ1bmN0aW9uPjtcclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSVBhcnNsZXlKcXVlcnlQbHVnaW4gZXh0ZW5kcyBKUXVlcnkge1xyXG4gICAgICAgIHBhcnNsZXkob3B0aW9ucz86IGFueSk7XHJcbiAgICB9XHJcbn1cclxuIiwibW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElQYXJzbGV5IHtcclxuICAgICAgICBpc1ZhbGlkKGdyb3VwPzogYW55LCBmb3JjZT86IGJvb2xlYW4pOiBib29sZWFuO1xyXG4gICAgICAgIHZhbGlkYXRlKGdyb3VwPzogYW55LCBmb3JjZT86IGJvb2xlYW4pOiBib29sZWFuO1xyXG4gICAgICAgIGRlc3Ryb3koKTogdm9pZDtcclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgVUlCdXN5UGFyYW0ge1xyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICogQ3VzdG9tIFVJIGJ1c3kgZnVuY3Rpb24gKG9wdGlvbmFsKS4gVGhpcyBvdmVyaWRlcyB0aGUgb3V0IG9mIHRoZSBib3ggVUkgYnVzeSBlZmZlY3QuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY2FsbGJhY2s/OiBGdW5jdGlvbjtcclxuXHJcbiAgICAgICAgLypcclxuICAgICAgICAgKiBFbGVtZW50IHJlc3BvbnNpYmxlIGZvciB0aGUgYnVzeSBzdGF0ZSAob3B0aW9uYWwpXHJcbiAgICAgICAgICogVXN1YWxseSB0aGUgYnV0dG9uIGNsaWNrZWRcclxuICAgICAgICAgKi9cclxuICAgICAgICBlbGVtZW50Q29udGV4dD86IEpRdWVyeTtcclxuXHJcbiAgICAgICAgLypcclxuICAgICAgICAgKiBUaGUgcm9vdCBjb250YWluZXIgdG8gZGlzYWJsZSAob3B0aW9uYWwpXHJcbiAgICAgICAgICogVXN1YWxseSB0aGUgYmxhZGUgY29udGFpbmluZyB0aGUgYnV0dG9uXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY29udGFpbmVyQ29udGV4dD86IEpRdWVyeTtcclxuXHJcbiAgICAgICAgLypcclxuICAgICAgICAgKiBkb20gc2VsZWN0b3IgdG8gZmluZCB0aGUgbG9hZGluZyBpbmRpY2F0b3IgcmVsYXRpdmUgdG8gdGhlZWxlbWVudENvbnRleHRcclxuICAgICAgICAgKi9cclxuICAgICAgICBsb2FkaW5nSW5kaWNhdG9yU2VsZWN0b3I/OiBzdHJpbmc7XHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICogZGVsYXkgaW4gbWlsbGlzZWNvbmQgYmVmb3JlIGRpc3BsYXlpbmcgdGhlIGxvYWRpbmcgaW5kaWNhdG9yXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgbXNEZWxheT86IG51bWJlcjtcclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgVUlCdXN5SGFuZGxlIHtcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGxvYWRpbmdJbmRpY2F0b3JDb250ZXh0OiBKUXVlcnk7XHJcbiAgICAgICAgcHJvdGVjdGVkIGNvbnRhaW5lckNvbnRleHQ6IEpRdWVyeTtcclxuICAgICAgICBwcm90ZWN0ZWQgdGltZW91dEhhbmRsZTtcclxuXHJcbiAgICAgICAgLypcclxuICAgICAgICAgKiBTdGFydCB0aGUgYnVzeSBzdGF0ZSwgdG8gYmUgY2FsbGVkIGJlZm9yZSB0aGUgYXN5bmMgY2FsbFxyXG4gICAgICAgICAqIEBwYXJhbSBsb2FkaW5nSW5kaWNhdG9yQ29udGV4dCBKUXVlcnkgZWxlbWVudCBvZiB3aGF0IHRoZSBoYW5kbGVyIHdpbGwgcmVtb3ZlL2FkZCBjbGFzcyBcImhpZGRlblwiLlxyXG4gICAgICAgICAqIEBwYXJhbSBjb250YWluZXJDb250ZXh0IEpRdWVyeSBlbGVtZW50IGNvbnRhaW5pbmcgaW5wdXRzIHRoYXQgd2lsbCBiZSBkaXNhYmxlZCB3aGlsZSBidXN5LlxyXG4gICAgICAgICAqIEBwYXJhbSBtc0RlbGF5IE51bWJlciBvZiBtcyBiZWZvcmUgYWN0aXZhdGluZyBhc3luYy4gSWYgZG9uZSBpcyBjYWxsZWQgYmVmb3JlIHRoZSBlbmRcclxuICAgICAgICAgKiAgICAgICAgb2YgdGhlIGRlbGF5LCB0aGUgbG9hZGluZ0luZGljYXRvckNvbnRleHQgd2lsbCBub3QgYmUgc2hvd24uXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGNvbnN0cnVjdG9yKGxvYWRpbmdJbmRpY2F0b3JDb250ZXh0OiBKUXVlcnksIGNvbnRhaW5lckNvbnRleHQ6IEpRdWVyeSwgbXNEZWxheTogbnVtYmVyKSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250ZXh0ID0gbG9hZGluZ0luZGljYXRvckNvbnRleHQ7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyQ29udGV4dCA9IGNvbnRhaW5lckNvbnRleHQ7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnN0YXJ0QnVzeShtc0RlbGF5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICogRW5kcyB0aGUgYnVzeSBzdGF0ZSwgdG8gYmUgY2FsbGVkIGluIHRoZSB0aGVuIG9mIHRoZSBhc3luYyBjYWxsXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGRvbmUoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZW5kQnVzeSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzdGFydEJ1c3kobXNEZWxheTogbnVtYmVyKSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnRpbWVvdXRIYW5kbGUgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lckNvbnRleHQuZmluZCgnOmlucHV0OmVuYWJsZWQnKS5hZGRDbGFzcygnYXN5bmMtYnVzeScpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250ZXh0LnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcclxuXHJcbiAgICAgICAgICAgIH0sIG1zRGVsYXkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBlbmRCdXN5KCkge1xyXG5cclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZW91dEhhbmRsZSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmxvYWRpbmdJbmRpY2F0b3JDb250ZXh0LmFkZENsYXNzKCdoaWRkZW4nKTtcclxuICAgICAgICAgICAgdGhpcy5jb250YWluZXJDb250ZXh0LmZpbmQoJzppbnB1dC5hc3luYy1idXN5JykucmVtb3ZlQ2xhc3MoJ2FzeW5jLWJ1c3knKS5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElDb21wb3NlckNvbnRleHQge1xyXG5cclxuICAgICAgICBsYW5ndWFnZTogc3RyaW5nO1xyXG4gICAgfVxyXG59XHJcbiIsIm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJQ29udHJvbGxlckNvbmZpZ3VyYXRpb24ge1xyXG4gICAgICAgIG5hbWU6IHN0cmluZztcclxuICAgICAgICBjb250cm9sbGVyOiBhbnk7XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi9NdmMvSUNvbnRyb2xsZXJDb25maWd1cmF0aW9uLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElDb21wb3NlckNvbmZpZ3VyYXRpb24ge1xyXG4gICAgICAgIHBsdWdpbnM/OiBzdHJpbmdbXTtcclxuICAgICAgICBwYXltZW50UHJvdmlkZXI/OiB7XHJcbiAgICAgICAgICAgIG5hbWU6IHN0cmluZztcclxuICAgICAgICAgICAgb3JpZ2luOiBzdHJpbmc7XHJcbiAgICAgICAgICAgIHByb2ZpbGVJZDogc3RyaW5nO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgY29udHJvbGxlcnM6IElDb250cm9sbGVyQ29uZmlndXJhdGlvbltdO1xyXG4gICAgfTtcclxufVxyXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vdHlwaW5ncy90c2QuZC50c1wiIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uL0dlbmVyaWNzL0NvbGxlY3Rpb25zL0lIYXNoVGFibGUudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uL0V2ZW50cy9JRXZlbnRIdWIudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4vSUNvbnRyb2xsZXIudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4vSUNvbnRyb2xsZXJDb250ZXh0LnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuL0lSZWdpc3RlckFjdGlvbk9wdGlvbnMudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4vSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uL1RlbXBsYXRpbmcvSUNvbXBvc2VyVGVtcGxhdGVzLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uL1RlbXBsYXRpbmcvSUNvbXBvc2VyVGVtcGxhdGVzLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuLi9KUXVlcnlQbHVnaW5zL0lQYXJzbGV5SnF1ZXJ5UGx1Z2luLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuLi9WYWxpZGF0aW9uL0lQYXJzbGV5LnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuLi9VSS9VSUJ1c3lQYXJhbS50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vVUkvVUlCdXN5SGFuZGxlLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuLi9JQ29tcG9zZXJDb250ZXh0LnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuLi9JQ29tcG9zZXJDb25maWd1cmF0aW9uLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgLyoqXHJcbiAgICAqIFByb3ZpZGVzIG1ldGhvZHMgdGhhdCByZXNwb25kIHRvIGNsaWVudC1zaWRlIHJlcXVlc3RzLlxyXG4gICAgKi9cclxuICAgIGV4cG9ydCBjbGFzcyBDb250cm9sbGVyIGltcGxlbWVudHMgSUNvbnRyb2xsZXIge1xyXG4gICAgICAgIHByaXZhdGUgX2NvbXBvc2VyRXZlbnRQb3N0Zml4ID0gJy5jb21wb3Nlcic7XHJcbiAgICAgICAgcHJpdmF0ZSBfZGVmYXVsdEV2ZW50c1RvTW9uaXRvcjogc3RyaW5nW10gPVxyXG4gICAgICAgIFsnY2xpY2snLCAnbW91c2VvdmVyJywgJ21vdXNlb3V0JywgJ2NvbnRleHRtZW51JywgJ3N1Ym1pdCcsICdmb2N1cycsICdibHVyJywgJ2NoYW5nZSddOyAvLyAnZGJsY2xpY2snXHJcbiAgICAgICAgcHJpdmF0ZSBfdW5yZWdpc3Rlcjoge1xyXG4gICAgICAgICAgICAoKTogdm9pZDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBDbGFzc2VzIHRoYXQgZXh0ZW5kIENvbnRyb2xsZXIgc2hvdWxkIHJlYWxseSBsYXNlciBmb2N1cyBhbmQgY2hvb3NlIHdoaWNoIGV2ZW50cyB0byBNb25pdG9yLlxyXG4gICAgICAgIC8vIFRoZSBkZWZhdWx0IGV2ZW50cyBhcmUgaGVyZSBmb3IgbWFnaWMgbW9kZS5cclxuICAgICAgICBwcm90ZWN0ZWQgZXZlbnRzVG9Nb25pdG9yOiBzdHJpbmdbXTtcclxuXHJcbiAgICAgICAgY29uc3RydWN0b3IocHJvdGVjdGVkIGNvbnRleHQ6IElDb250cm9sbGVyQ29udGV4dCxcclxuICAgICAgICAgICAgcHJvdGVjdGVkIGV2ZW50SHViOiBJRXZlbnRIdWIsXHJcbiAgICAgICAgICAgIHByb3RlY3RlZCBjb21wb3NlckNvbnRleHQ6IElDb21wb3NlckNvbnRleHQsXHJcbiAgICAgICAgICAgIHByb3RlY3RlZCBjb21wb3NlckNvbmZpZ3VyYXRpb246IElDb21wb3NlckNvbmZpZ3VyYXRpb25cclxuICAgICAgICApIHtcclxuXHJcbiAgICAgICAgICAgIGlmIChfLmlzRW1wdHkoY29udGV4dCkpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignY29udGV4dCBpcyByZXF1aXJlZCcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoXy5pc0VtcHR5KGV2ZW50SHViKSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdldmVudEh1YiBpcyByZXF1aXJlZCcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoXy5pc0VtcHR5KGNvbXBvc2VyQ29udGV4dCkpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignY29tcG9zZXJDb250ZXh0IGlzIHJlcXVpcmVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgcmVnaXN0ZXJBY3Rpb24oY2xhc3NUb1JlZ2lzdGVyQWN0aW9uT246IGFueSwgcmVnaXN0ZXJBY3Rpb25PcHRpb25zOiBJUmVnaXN0ZXJBY3Rpb25PcHRpb25zKSB7XHJcbiAgICAgICAgICAgIHZhciBjbGFzc1Byb3RvdHlwZSA9IGNsYXNzVG9SZWdpc3RlckFjdGlvbk9uLnByb3RvdHlwZTtcclxuXHJcbiAgICAgICAgICAgIGlmICghQ29udHJvbGxlci5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihjbGFzc1Byb3RvdHlwZSkpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAnVGhlIGNsYXNzIHlvdSBhcmUgdHJ5aW5nIHRvIHJlZ2lzdGVyIHRoZSBhY3Rpb24gb24gaXMgbm90IGEgY29udHJvbGxlci4nXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoXy5pc0Z1bmN0aW9uKHJlZ2lzdGVyQWN0aW9uT3B0aW9ucy5hY3Rpb25EZWxlZ2F0ZSkpIHtcclxuICAgICAgICAgICAgICAgIGlmICghY2xhc3NQcm90b3R5cGUuaGFzT3duUHJvcGVydHkocmVnaXN0ZXJBY3Rpb25PcHRpb25zLmFjdGlvbk5hbWUpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgcmVnaXN0ZXJBY3Rpb25PcHRpb25zLm92ZXJ3cml0ZSAmJlxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzUHJvdG90eXBlLmhhc093blByb3BlcnR5KHJlZ2lzdGVyQWN0aW9uT3B0aW9ucy5hY3Rpb25OYW1lKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgIF8uaXNGdW5jdGlvbihjbGFzc1Byb3RvdHlwZVtyZWdpc3RlckFjdGlvbk9wdGlvbnMuYWN0aW9uTmFtZV0pKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzUHJvdG90eXBlW3JlZ2lzdGVyQWN0aW9uT3B0aW9ucy5hY3Rpb25OYW1lXSA9IHJlZ2lzdGVyQWN0aW9uT3B0aW9ucy5hY3Rpb25EZWxlZ2F0ZTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBZb3UgY2Fubm90IG92ZXJ3cml0ZSB0aGUgYWN0aW9uIG5hbWVkIFwiJHtyZWdpc3RlckFjdGlvbk9wdGlvbnMuYWN0aW9uTmFtZX1cIiBcXFxyXG53aXRob3V0IHNwZWNpZnlpbmcgb3ZlcndyaXRlID0gdHJ1ZSBpbiB0aGUgcmVnaXN0ZXJBY3Rpb25PcHRpb25zLmApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmFibGUgdG8gcmVnaXN0ZXIgYWN0aW9uICR7cmVnaXN0ZXJBY3Rpb25PcHRpb25zLmFjdGlvbk5hbWV9LiBUaGUgYWN0aW9uIGRlbGVnYXRlIGlzIG5vdCBhIGZ1bmN0aW9uLmApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgaW5pdGlhbGl6ZSgpIHtcclxuICAgICAgICAgICAgaWYgKF8uaXNFbXB0eSh0aGlzLmV2ZW50c1RvTW9uaXRvcikpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRzVG9Nb25pdG9yID0gdGhpcy5fZGVmYXVsdEV2ZW50c1RvTW9uaXRvcjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5yZWdpc3RlckRvbUV2ZW50cygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGRpc3Bvc2UoKSB7XHJcbiAgICAgICAgICAgIHRoaXMudW5yZWdpc3RlckRvbUV2ZW50cygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGFzeW5jQnVzeShvcHRpb25zOiBVSUJ1c3lQYXJhbSA9IHt9KTogVUlCdXN5SGFuZGxlIHtcclxuICAgICAgICAgICAgb3B0aW9ucyA9IF8ubWVyZ2UoPFVJQnVzeVBhcmFtPntcclxuICAgICAgICAgICAgICAgIGVsZW1lbnRDb250ZXh0OiB0aGlzLmNvbnRleHQuY29udGFpbmVyLFxyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyQ29udGV4dDogdGhpcy5jb250ZXh0LmNvbnRhaW5lcixcclxuICAgICAgICAgICAgICAgIGxvYWRpbmdJbmRpY2F0b3JTZWxlY3RvcjogJy5sb2FkaW5nLWluZGljYXRvcicsXHJcbiAgICAgICAgICAgICAgICBtc0RlbGF5OiAwXHJcbiAgICAgICAgICAgIH0sIG9wdGlvbnMpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGxvYWRpbmdJbmRpY2F0b3JDb250ZXh0ID0gb3B0aW9ucy5lbGVtZW50Q29udGV4dC5maW5kKG9wdGlvbnMubG9hZGluZ0luZGljYXRvclNlbGVjdG9yKTtcclxuICAgICAgICAgICAgdmFyIGhhbmRsZSA9IG5ldyBVSUJ1c3lIYW5kbGUobG9hZGluZ0luZGljYXRvckNvbnRleHQsIG9wdGlvbnMuY29udGFpbmVyQ29udGV4dCwgb3B0aW9ucy5tc0RlbGF5KTtcclxuICAgICAgICAgICAgcmV0dXJuIGhhbmRsZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICogUHJldmVudHMgYSBmb3JtIGZyb20gc3VibWl0dGluZy5cclxuICAgICAgICAgKiBAcGFyYW0gY29udGV4dCBBIGNvbnRyb2xsZXIgYWN0aW9uIGNvbnRleHQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHByZXZlbnRGb3JtU3VibWl0KGNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCkge1xyXG4gICAgICAgICAgICBjb250ZXh0LmV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgcmVuZGVyKHRlbXBsYXRlSWQ6IHN0cmluZywgdmlld01vZGVsOiBhbnksIHBhcmVudFNlbGVjdG9yPzogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLmNvbnRleHQuY29udGFpbmVyO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFfLmlzRW1wdHkocGFyZW50U2VsZWN0b3IpKSB7XHJcbiAgICAgICAgICAgICAgICBjb250YWluZXIgPSB0aGlzLmNvbnRleHQuY29udGFpbmVyLmZpbmQocGFyZW50U2VsZWN0b3IpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZWxlbWVudHMgPSBjb250YWluZXIuZmluZChgW2RhdGEtdGVtcGxhdGVpZD1cIiR7dGVtcGxhdGVJZH1cIl1gKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChfLmlzRW1wdHkoZWxlbWVudHMpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYENvdWxkIG5vdCBmaW5kIHRoZSB0ZW1wbGF0ZSAnJHt0ZW1wbGF0ZUlkfScgaW5zaWRlIGl0cyBjb250YWluZXIuYCwgY29udGFpbmVyKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZWxlbWVudHMuZWFjaCgoaW5kZXg6IE51bWJlciwgaXRlbTogSFRNTEVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIHZhciByZW5kZXJlZFRlbXBsYXRlID0gdGhpcy5nZXRSZW5kZXJlZFRlbXBsYXRlQ29udGVudHModGVtcGxhdGVJZCwgdmlld01vZGVsKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocmVuZGVyZWRUZW1wbGF0ZSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0ub3V0ZXJIVE1MID0gcmVuZGVyZWRUZW1wbGF0ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgZ2V0UmVuZGVyZWRUZW1wbGF0ZUNvbnRlbnRzKHRlbXBsYXRlSWQ6IHN0cmluZywgdmlld01vZGVsOiBhbnkpOiBzdHJpbmcge1xyXG4gICAgICAgICAgICB2YXIgdGVtcGxhdGUgPSAoPGFueT5PcmNrZXN0cmEuQ29tcG9zZXIpLlRlbXBsYXRlc1t0ZW1wbGF0ZUlkXTtcclxuXHJcbiAgICAgICAgICAgIGlmICghXy5pc0Z1bmN0aW9uKHRlbXBsYXRlKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgVGVtcGxhdGUgJyR7dGVtcGxhdGVJZH0nIG5vdCBmb3VuZCBpbiBjb21waWxlZCB0ZW1wbGF0ZXMuYCk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0ZW1wbGF0ZSh2aWV3TW9kZWwpO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgLy8gY2F0Y2ggaGFuZGxlYmFycyByZW5kZXJpbmcgZXJyb3JzIG1vc3RseVxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgJHtlcnJvci5uYW1lfTogJHtlcnJvci5tZXNzYWdlfSBpbiB0ZW1wbGF0ZSAnJHt0ZW1wbGF0ZUlkfScuYCwgdmlld01vZGVsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHJlZ2lzdGVyRm9ybXNGb3JWYWxpZGF0aW9uKGNvbnRleHQ6IEpRdWVyeSwgY3VzdG9tT3B0aW9uczogYW55ID0ge30pOiBPcmNrZXN0cmEuQ29tcG9zZXIuSVBhcnNsZXlbXSB7XHJcbiAgICAgICAgICAgIHZhciBmb3JtVmFsaWRhdG9yczogT3Jja2VzdHJhLkNvbXBvc2VyLklQYXJzbGV5W10gPSBbXTtcclxuXHJcbiAgICAgICAgICAgIHZhciBvcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgdHJpZ2dlcjogJ2ZvY3Vzb3V0IGNoYW5nZScsXHJcbiAgICAgICAgICAgICAgICBmb2N1czogJ2ZpcnN0JyxcclxuICAgICAgICAgICAgICAgIGVycm9yVGVtcGxhdGU6ICc8bGk+PC9saT4nLFxyXG4gICAgICAgICAgICAgICAgY2xhc3NIYW5kbGVyOiBmdW5jdGlvbihmaWVsZEluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGhhbmRsZVNlbGVjdG9yID0gZmllbGRJbnN0YW5jZS4kZWxlbWVudC5kYXRhKCdwYXJzbGV5Q2xhc3NIYW5kbGVyU2VsZWN0b3InKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcmV0dXJuaW5nIHVuZGVmaW5lZCB3aWxsIG1ha2UgcGFyc2xleSB1c2UgdGhlIGRlZmF1bHQgY2xhc3NIYW5kbGVyXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF8uaXNFbXB0eShoYW5kbGVTZWxlY3RvcikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNsYXNzSGFuZGxlciA9IGZpZWxkSW5zdGFuY2UuJGVsZW1lbnQuY2xvc2VzdChoYW5kbGVTZWxlY3Rvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNsYXNzSGFuZGxlcjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIF8uYXNzaWduKG9wdGlvbnMsIGN1c3RvbU9wdGlvbnMpO1xyXG5cclxuICAgICAgICAgICAgY29udGV4dC5lYWNoKChpbmRleCwgZWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgZm9ybVZhbGlkYXRvcnMucHVzaCgoPE9yY2tlc3RyYS5Db21wb3Nlci5JUGFyc2xleT4oPE9yY2tlc3RyYS5Db21wb3Nlci5JUGFyc2xleUpxdWVyeVBsdWdpbj4kKGVsZW1lbnQpKS5wYXJzbGV5KG9wdGlvbnMpKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKGN1c3RvbU9wdGlvbnMuc2VydmVyVmFsaWRhdGlvbkNvbnRhaW5lcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5oaWRlU2VydmVyVmFsaWRhdGlvbk1lc3NhZ2VPbkNsaWVudFZhbGlkYXRpb24oZm9ybVZhbGlkYXRvcnMsIGN1c3RvbU9wdGlvbnMuc2VydmVyVmFsaWRhdGlvbkNvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmb3JtVmFsaWRhdG9ycztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEhpZGUgYW55IG1lc3NhZ2VzIGZyb20gcHJldmlvdXMgc2VydmVyIHZhbGlkYXRpb25cclxuICAgICAgICAgKiB3aGVuIHRoZSBuZXcgZm9ybSBpcyB1c2VkIHRvIHByZXZlbnQgbWl4aW5nIHVwXHJcbiAgICAgICAgICogY2xpZW50IHNpZGUgdmFsaWRhdGlvbiBtZXNzYWdlIHdpdGggc2VydmVyIHNpZGVcclxuICAgICAgICAgKiBtZXNzYWdlcy5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBmb3JtVmFsaWRhdG9ycyBhbGwgdGhlIHBhcmxzZXkgZm9ybXMgdG8gbWFuYWdlXHJcbiAgICAgICAgICogQHBhcmFtIHNlcnZlclZhbGlkYXRpb25Db250YWluZXIgdGhlIGpRdWVyeSBzZWxlY3RvciB0byBmaW5kIG1lc3NhZ2VzIHRvIGVtcHR5XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBoaWRlU2VydmVyVmFsaWRhdGlvbk1lc3NhZ2VPbkNsaWVudFZhbGlkYXRpb24oZm9ybVZhbGlkYXRvcnM6IE9yY2tlc3RyYS5Db21wb3Nlci5JUGFyc2xleVtdLCBzZXJ2ZXJWYWxpZGF0aW9uQ29udGFpbmVyOiBhbnkpIHtcclxuICAgICAgICAgICAgXy5lYWNoKGZvcm1WYWxpZGF0b3JzLCBmdW5jdGlvbihwYXJzbGV5OiBhbnkpIHtcclxuICAgICAgICAgICAgICAgIHBhcnNsZXkuc3Vic2NyaWJlKCdwYXJzbGV5OmZpZWxkOnZhbGlkYXRlJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFyc2xleS4kZWxlbWVudC5maW5kKHNlcnZlclZhbGlkYXRpb25Db250YWluZXIpLmVtcHR5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXy5kZWZlcihmdW5jdGlvbigpIHsgcGFyc2xleS51bnN1YnNjcmliZSgncGFyc2xleTpmaWVsZDp2YWxpZGF0ZScpOyB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgcmVnaXN0ZXJEb21FdmVudHMoKSB7XHJcbiAgICAgICAgICAgIHZhciBwYXJzZUFjdGlvbiA9IHRoaXMucGFyc2VBY3Rpb24uYmluZCh0aGlzKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3VucmVnaXN0ZXIgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQuY29udGFpbmVyLm9mZih0aGlzLl9jb21wb3NlckV2ZW50UG9zdGZpeCwgcGFyc2VBY3Rpb24pO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudHNUb01vbml0b3IuZm9yRWFjaCgoaXRlbTogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQuY29udGFpbmVyLm9uKGAke2l0ZW19JHt0aGlzLl9jb21wb3NlckV2ZW50UG9zdGZpeH1gLCBwYXJzZUFjdGlvbik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSB1bnJlZ2lzdGVyRG9tRXZlbnRzKCkge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fdW5yZWdpc3RlciAhPT0gdm9pZCAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl91bnJlZ2lzdGVyKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgcGFyc2VBY3Rpb24oZTogSlF1ZXJ5RXZlbnRPYmplY3QpIHtcclxuICAgICAgICAgICAgdGhpcy5hcHBseUNvbnRyb2xsZXJBY3Rpb24oJChlLnRhcmdldCksIGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBhcHBseUNvbnRyb2xsZXJBY3Rpb24oY29udGV4dDogSlF1ZXJ5LCBlOiBKUXVlcnlFdmVudE9iamVjdCkge1xyXG4gICAgICAgICAgICB2YXIgY29udHJvbGxlckFjdGlvbnM6IHN0cmluZ1tdLFxyXG4gICAgICAgICAgICAgICAgZXZlbnRBdHRyaWJ1dGU6IHN0cmluZyA9IGBvYy0ke2UudHlwZX1gLFxyXG4gICAgICAgICAgICAgICAgcmF3QWN0aW9uczogc3RyaW5nID0gY29udGV4dC5kYXRhKGV2ZW50QXR0cmlidXRlKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChfLmlzRW1wdHkocmF3QWN0aW9ucykpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjb250ZXh0Lmxlbmd0aCA+IDAgJiYgY29udGV4dFswXSAhPT0gdGhpcy5jb250ZXh0LmNvbnRhaW5lclswXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlDb250cm9sbGVyQWN0aW9uKGNvbnRleHQucGFyZW50KCksIGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29udHJvbGxlckFjdGlvbnMgPSByYXdBY3Rpb25zLnJlcGxhY2UoL1xccysvZywgJycpLnNwbGl0KCcsJyk7XHJcbiAgICAgICAgICAgIHRoaXMuYXBwbHlDb250cm9sbGVyQWN0aW9ucyhjb250ZXh0LCBlLCBjb250cm9sbGVyQWN0aW9ucyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGFwcGx5Q29udHJvbGxlckFjdGlvbnMoY29udGV4dDogSlF1ZXJ5LCBlOiBKUXVlcnlFdmVudE9iamVjdCwgY29udHJvbGxlckFjdGlvbnM6IHN0cmluZ1tdKSB7XHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBY3Rpb25zLmZvckVhY2goKGNvbnRyb2xsZXJBY3Rpb24pID0+IHtcclxuICAgICAgICAgICAgICAgIHZhciBjb250cm9sbGVyQWN0aW9uQ29udGV4dDogT3Jja2VzdHJhLkNvbXBvc2VyLklDb250cm9sbGVyQWN0aW9uQ29udGV4dDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoXy5pc0Z1bmN0aW9uKHRoaXNbY29udHJvbGxlckFjdGlvbl0pKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXJBY3Rpb25Db250ZXh0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50Q29udGV4dDogY29udGV4dCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQ6IGVcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzW2NvbnRyb2xsZXJBY3Rpb25dLmFwcGx5KHRoaXMsIFtjb250cm9sbGVyQWN0aW9uQ29udGV4dF0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElTZXJpYWxpemVPYmplY3RKcXVlcnlQbHVnaW4gZXh0ZW5kcyBKUXVlcnkge1xyXG4gICAgICAgIHNlcmlhbGl6ZU9iamVjdCgpOiBhbnk7XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAvKipcclxuICAgICAqIExvY2FsaXphdGlvbiBQcm92aWRlciBmb3IgYWNjZXNzaW5nIGxvY2FsaXplZCBzdHJpbmdcclxuICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElMb2NhbGl6YXRpb25Qcm92aWRlciB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQm9vc3RyYXAgdGhlIGxvY2FsaXphdGlvbi5cclxuICAgICAgICAgKi9cclxuICAgICAgICBpbml0aWFsaXplKGNvbXBvc2VyQ29udGV4dDogSUNvbXBvc2VyQ29udGV4dCk6IFEuUHJvbWlzZTxhbnk+O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXQgYSAgbG9jYWxpemVkIHN0cmluZ1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGNhdGVnb3J5TmFtZSBUaGUgY2F0ZWdvcnkgdXNlZCB0byBidW5kbGUgdGhpcyBsb2NhbGl6YXRpb25cclxuICAgICAgICAgKiBAcGFyYW0ga2V5TmFtZSBUaGUgZXhhY3Qga2V5IHRvIGxvY2FsaXplXHJcbiAgICAgICAgICogQHJldHVybiB0aGUgbG9jYWxpemVkU3RyaW5nIG9yIG51bGwgaWYgbm9uZSBmb3VuZFxyXG4gICAgICAgICovXHJcbiAgICAgICAgZ2V0TG9jYWxpemVkU3RyaW5nKGNhdGVnb3J5TmFtZTogc3RyaW5nLCBrZXlOYW1lOiBzdHJpbmcpOiBzdHJpbmc7XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uL0NvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vQ29tcG9zZXJDbGllbnQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uL0V2ZW50cy9JRXZlbnRJbmZvcm1hdGlvbi50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPSdJTG9jYWxpemF0aW9uUHJvdmlkZXIudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIGV4cG9ydCBjbGFzcyBMb2NhbGl6YXRpb25Qcm92aWRlciBpbXBsZW1lbnRzIE9yY2tlc3RyYS5Db21wb3Nlci5JTG9jYWxpemF0aW9uUHJvdmlkZXIge1xyXG5cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBfaW5zdGFuY2U6IE9yY2tlc3RyYS5Db21wb3Nlci5JTG9jYWxpemF0aW9uUHJvdmlkZXIgPSBuZXcgTG9jYWxpemF0aW9uUHJvdmlkZXIoKTtcclxuICAgICAgICBwcml2YXRlIF9sb2NhbGl6YXRpb25UcmVlOiBhbnkgPSB7fTtcclxuICAgICAgICBwcml2YXRlIF9jb21wb3NlckNvbnRleHQ6IElDb21wb3NlckNvbnRleHQ7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW5zdGFuY2UoKTogT3Jja2VzdHJhLkNvbXBvc2VyLklMb2NhbGl6YXRpb25Qcm92aWRlciB7XHJcbiAgICAgICAgICAgIHJldHVybiBMb2NhbGl6YXRpb25Qcm92aWRlci5faW5zdGFuY2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICAgICAgaWYgKExvY2FsaXphdGlvblByb3ZpZGVyLl9pbnN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvcjogSW5zdGFudGlhdGlvbiBmYWlsZWQ6IFVzZSBMb2NhbGl6YXRpb25Qcm92aWRlci5pbnN0YW5jZSgpIGluc3RlYWQgb2YgbmV3LicpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBMb2NhbGl6YXRpb25Qcm92aWRlci5faW5zdGFuY2UgPSB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQm9vc3RyYXAgdGhlIGxvY2FsaXphdGlvbi5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIFRoaXMgY2FsbCBpcyByZXNwb25zaWJseSBmb3IgcmVmcmVzaGluZyBhbGwgbG9jYWxpemF0aW9uXHJcbiAgICAgICAgICogdG8gdGhlIGN1cnJlbnQgcGFnZSBjdWx0dXJlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGluaXRpYWxpemUoY29tcG9zZXJDb250ZXh0OiBJQ29tcG9zZXJDb250ZXh0KTogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fY29tcG9zZXJDb250ZXh0ID0gY29tcG9zZXJDb250ZXh0O1xyXG5cclxuICAgICAgICAgICAgdmFyIHByb3ZpZGVyID0gdGhpcztcclxuICAgICAgICAgICAgdmFyIGxhbmd1YWdlID0gdGhpcy5fY29tcG9zZXJDb250ZXh0Lmxhbmd1YWdlO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIENvbXBvc2VyQ2xpZW50LmdldCgnL2FwaS9sb2NhbGl6YXRpb24vJyArIGxhbmd1YWdlKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0cmVlID0gcmVzdWx0O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBwcm92aWRlci5fbG9jYWxpemF0aW9uVHJlZSA9IHRyZWU7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldCBhICBsb2NhbGl6ZWQgc3RyaW5nXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gY2F0ZWdvcnlOYW1lIFRoZSBjYXRlZ29yeSB1c2VkIHRvIGJ1bmRsZSB0aGlzIGxvY2FsaXphdGlvblxyXG4gICAgICAgICAqIEBwYXJhbSBrZXlOYW1lIFRoZSBleGFjdCBrZXkgdG8gbG9jYWxpemVcclxuICAgICAgICAgKiBAcmV0dXJuIHRoZSBsb2NhbGl6ZWRTdHJpbmcgb3IgbnVsbCBpZiBub25lIGZvdW5kXHJcbiAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgZ2V0TG9jYWxpemVkU3RyaW5nKGNhdGVnb3J5TmFtZTogc3RyaW5nLCBrZXlOYW1lOiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgY2F0ZWdvcnlOYW1lICAgPSAoY2F0ZWdvcnlOYW1lIHx8ICcnKS50b0xvd2VyQ2FzZSgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHRyZWUgICAgICAgPSAodGhpcy5fbG9jYWxpemF0aW9uVHJlZSB8fCB7fSk7XHJcbiAgICAgICAgICAgIHZhciBjYXRlZ29yaWVzID0gKHRyZWUuTG9jYWxpemVkQ2F0ZWdvcmllcyB8fCB7fSk7XHJcbiAgICAgICAgICAgIHZhciBjYXRlZ29yeSAgID0gKGNhdGVnb3JpZXNbY2F0ZWdvcnlOYW1lXSB8fCB7fSk7XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZXMgICAgID0gKGNhdGVnb3J5LkxvY2FsaXplZFZhbHVlcyB8fCB7fSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgdmFsdWUgPSB2YWx1ZXNba2V5TmFtZV07XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICogTm90ZTogbm90IHJlYWxseSBwcm90ZWN0ZWQsIHRoaXMgaXMgYSBUeXBlc2NyaXB0IHNjb3BlZCBtZXRob2RcclxuICAgICAgICAgKiBjYWxsZWQgZnJvbSB0aGUgamF2YXNjcmlwdCBzY29wZWQgaGFuZGxlYmFycyBoZWxwZXIuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJvdGVjdGVkIGhhbmRsZUJhcnNIZWxwZXJfbG9jYWxpemUoY2F0ZWdvcnlOYW1lOiBzdHJpbmcsIGtleU5hbWU6IHN0cmluZykge1xyXG4gICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLmdldExvY2FsaXplZFN0cmluZyhjYXRlZ29yeU5hbWUsIGtleU5hbWUpO1xyXG5cclxuICAgICAgICAgICAgaWYgKF8uaXNVbmRlZmluZWQodmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9ICdbJyArIGNhdGVnb3J5TmFtZSArICcuJyArIGtleU5hbWUgKyAnXSc7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICogTm90ZTogbm90IHJlYWxseSBwcm90ZWN0ZWQsIHRoaXMgaXMgYSBUeXBlc2NyaXB0IHNjb3BlZCBtZXRob2RcclxuICAgICAgICAgKiBjYWxsZWQgZnJvbSB0aGUgamF2YXNjcmlwdCBzY29wZWQgaGFuZGxlYmFycyBoZWxwZXIuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJvdGVjdGVkIGhhbmRsZUJhcnNIZWxwZXJfbG9jYWxpemVGb3JtYXQoY2F0ZWdvcnlOYW1lOiBzdHJpbmcsIGtleU5hbWU6IHN0cmluZywgb3B0aW9uczogYW55W10pIHtcclxuICAgICAgICAgICAgdmFyIHZhbHVlO1xyXG4gICAgICAgICAgICB2YXIgZm9ybWF0ID0gdGhpcy5nZXRMb2NhbGl6ZWRTdHJpbmcoY2F0ZWdvcnlOYW1lLCBrZXlOYW1lKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChfLmlzVW5kZWZpbmVkKGZvcm1hdCkpIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gJ1snICsgY2F0ZWdvcnlOYW1lICsgJy4nICsga2V5TmFtZSArICddJztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gdGhpcy5zdHJpbmdGb3JtYXQoZm9ybWF0LCBvcHRpb25zKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLypcclxuICAgICAgICAgKiBOb3RlOiBub3QgcmVhbGx5IHByb3RlY3RlZCwgdGhpcyBpcyBhIFR5cGVzY3JpcHQgc2NvcGVkIG1ldGhvZFxyXG4gICAgICAgICAqIGNhbGxlZCBmcm9tIHRoZSBqYXZhc2NyaXB0IHNjb3BlZCBoYW5kbGViYXJzIGhlbHBlci5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwcm90ZWN0ZWQgaGFuZGxlQmFyc0hlbHBlcl9pc0xvY2FsaXplZChjYXRlZ29yeU5hbWU6IHN0cmluZywga2V5TmFtZTogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IHRoaXMuZ2V0TG9jYWxpemVkU3RyaW5nKGNhdGVnb3J5TmFtZSwga2V5TmFtZSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoXy5pc0VtcHR5KHZhbHVlKSB8fCBfLmlzVW5kZWZpbmVkKHZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICogU3Vic3RpdHV0ZSB0byBTdHJpbmcuRm9ybWF0IGluIEMjXHJcbiAgICAgICAgICogVGhpcyBpcyBhIGxpbWl0ZWQgdmVyc2lvbiB0byBzdXBwb3J0IG51bWVyaWMgcGxhY2Vob2xkZXJzIHswfSB3aXRob3V0IGZvcm1hdHRpbmdcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIHN0cmluZ0Zvcm1hdChmb3JtYXQ6IHN0cmluZywgb3B0aW9uczogYW55W10pIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZvcm1hdC5yZXBsYWNlKC9cXHtcXHMqKFtefVxcc10rKVxccypcXH0vZywgKG0sIHAxLCBvZmZzZXQsIHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG9wdGlvbnNbcDFdICE9PSB2b2lkIDAgPyBvcHRpb25zW3AxXSA6IHAxO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vTG9jYWxpemF0aW9uL0lMb2NhbGl6YXRpb25Qcm92aWRlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL0xvY2FsaXphdGlvbi9Mb2NhbGl6YXRpb25Qcm92aWRlci50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGludGVyZmFjZSBFbmhhbmNlZEpRdWVyeUFqYXhTZXR0aW5ncyBleHRlbmRzIEpRdWVyeUFqYXhTZXR0aW5ncyB7XHJcbiAgICAgICAgbWV0aG9kOiBzdHJpbmc7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIENvbXBvc2VyQ2xpZW50IHtcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBnZXQodXJsOiBzdHJpbmcsIGRhdGE/OiBhbnkpIDogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VuZFJlcXVlc3QoJ0dFVCcsIHVybCwgZGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHBvc3QodXJsOiBzdHJpbmcsIGRhdGE6IGFueSkgOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZW5kUmVxdWVzdCgnUE9TVCcsIHVybCwgZGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHB1dCh1cmw6IHN0cmluZywgZGF0YTogYW55KSA6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbmRSZXF1ZXN0KCdQVVQnLCB1cmwsIGRhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyByZW1vdmUodXJsOiBzdHJpbmcsIGRhdGE6IGFueSkgOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZW5kUmVxdWVzdCgnREVMRVRFJywgdXJsLCBkYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIHNlbmRSZXF1ZXN0KG1ldGhvZDogc3RyaW5nLCB1cmw6IHN0cmluZywgZGF0YT86IGFueSkgOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICB2YXIgc2V0dGluZ3M6IEVuaGFuY2VkSlF1ZXJ5QWpheFNldHRpbmdzID0ge1xyXG4gICAgICAgICAgICAgICAgY29udGVudFR5cGU6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXHJcbiAgICAgICAgICAgICAgICBkYXRhOiBkYXRhID8gSlNPTi5zdHJpbmdpZnkoZGF0YSkgOiBudWxsLFxyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiBtZXRob2QsXHJcbiAgICAgICAgICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICAnQWNjZXB0LUxhbmd1YWdlJzogdGhpcy5nZXRQYWdlQ3VsdHVyZSgpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gUSgkLmFqYXgoc2V0dGluZ3MpKS5mYWlsKHJlYXNvbiA9PiB0aGlzLm9uUmVxdWVzdFJlamVjdGVkKHJlYXNvbikpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgZ2V0UGFnZUN1bHR1cmUoKTogc3RyaW5nIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBjdWx0dXJlOiBzdHJpbmcgPSAkKCdodG1sJykuYXR0cignbGFuZycpO1xyXG4gICAgICAgICAgICBpZiAoIWN1bHR1cmUpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gbGFuZyBhdHRyaWJ1dGUgd2FzIGZvdW5kIG9uIHRoZSA8aHRtbD4gZWxlbWVudC4gUGxlYXNlIG1ha2Ugc3VyZSBpdCBpcyBpbmNsdWRlZC4nKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGN1bHR1cmU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBvblJlcXVlc3RSZWplY3RlZChyZWFzb246IGFueSk6IHZvaWQge1xyXG5cclxuICAgICAgICAgICAgaWYgKHJlYXNvbi5yZWFkeVN0YXRlID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyB7IEVycm9yczogWyB7IExvY2FsaXplZEVycm9yTWVzc2FnZTogdGhpcy5nZXRBamF4RmFpbGVkRXJyb3JNZXNzYWdlKCkgfSBdIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChyZWFzb24ucmVhZHlTdGF0ZSA9PT0gNCAmJiByZWFzb24uc3RhdHVzID09PSAyMDUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdQYWdlIG11c3QgYmUgcmVsb2FkZWQuJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVkaXJlY3RVcmwgPSB0aGlzLmdldFJlbG9hZFVybCgpO1xyXG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSByZWRpcmVjdFVybDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHJlYXNvbi5yZWFkeVN0YXRlID09PSA0ICYmIHJlYXNvbi5zdGF0dXMgPT09IDQwMSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgeyBFcnJvcnM6IFsgeyBMb2NhbGl6ZWRFcnJvck1lc3NhZ2U6IHRoaXMuZ2V0VW5hdXRob3JpemVkRXJyb3JNZXNzYWdlKCkgfSBdIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChyZWFzb24ucmVhZHlTdGF0ZSA9PT0gNCAmJiByZWFzb24uc3RhdHVzID09PSA1MDAgJiYgcmVhc29uLnJlc3BvbnNlSlNPTiAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgeyBFcnJvcnM6IHJlYXNvbi5yZXNwb25zZUpTT04uRXJyb3JzIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRocm93IHJlYXNvbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGdldFJlbG9hZFVybCgpOiBzdHJpbmcge1xyXG4gICAgICAgICAgICB2YXIgcmF3UXVlcnlTdHJpbmc6IHN0cmluZyA9IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2g7XHJcblxyXG4gICAgICAgICAgICB2YXIgdmFsdWU6IHN0cmluZyA9ICdzZXNzaW9uPWV4cGlyZWQnO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuZG9lc1VybENvbnRhaW5RdWVyeVN0cmluZyhyYXdRdWVyeVN0cmluZywgdmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gd2luZG93LmxvY2F0aW9uLmhyZWY7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBzcGxpdHRlciA9ICcmJztcclxuICAgICAgICAgICAgaWYgKF8uaXNFbXB0eShyYXdRdWVyeVN0cmluZykpIHtcclxuICAgICAgICAgICAgICAgIHNwbGl0dGVyID0gJy8/JztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIHFzOiBzdHJpbmcgPSBgJHtyYXdRdWVyeVN0cmluZ30ke3NwbGl0dGVyfSR7dmFsdWV9YDtcclxuXHJcbiAgICAgICAgICAgIHZhciB1cmxzOiBzdHJpbmdbXSA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmLnNwbGl0KCc/JywgMik7XHJcbiAgICAgICAgICAgIHZhciB1cmw6IHN0cmluZyA9IGAke3VybHNbMF19JHtxc31gO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHVybDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGRvZXNVcmxDb250YWluUXVlcnlTdHJpbmcodXJsOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgdmFyIHJlZ2V4OiBSZWdFeHAgPSBuZXcgUmVnRXhwKCcoXFxcXD98XFxcXCYpJyArIHZhbHVlLCAnaScpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHJlZ2V4LnRlc3QodXJsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGdldEFqYXhGYWlsZWRFcnJvck1lc3NhZ2UoKTogc3RyaW5nIHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBMb2NhbGl6YXRpb25Qcm92aWRlci5pbnN0YW5jZSgpLmdldExvY2FsaXplZFN0cmluZygnR2VuZXJhbCcsICdMX0Vycm9yQWpheEZhaWxlZCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgZ2V0VW5hdXRob3JpemVkRXJyb3JNZXNzYWdlKCk6IHN0cmluZyB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gTG9jYWxpemF0aW9uUHJvdmlkZXIuaW5zdGFuY2UoKS5nZXRMb2NhbGl6ZWRTdHJpbmcoJ0dlbmVyYWwnLCAnTF9FcnJvclVuYXV0aG9yaXplZCcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcblxyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJTWVtYmVyc2hpcFJlcG9zaXRvcnkge1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAqIEF0dGVtcHQgdG8gTG9nIEluIHVzaW5nIENvbXBvc2VyIEFQSS5cclxuICAgICAgICAqIEBwYXJhbVxyXG4gICAgICAgICovXHJcbiAgICAgICAgbG9naW4oZm9ybURhdGE6IGFueSwgcmV0dXJuVXJsOiBzdHJpbmcpOiBRLlByb21pc2U8YW55PjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgKiBMb2dvdXQgdXNpbmcgQ29tcG9zZXIgQVBJLlxyXG4gICAgICAgICogQHBhcmFtXHJcbiAgICAgICAgKi9cclxuICAgICAgICBsb2dvdXQocmV0dXJuVXJsOiBzdHJpbmcsIHByZXNlcnZlQ3VzdG9tZXJJbmZvOiBib29sZWFuKTogUS5Qcm9taXNlPGFueT47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICogQXR0ZW1wdCB0byByZWdpc3RlciB1c2luZyBDb21wb3NlciBBUEkuXHJcbiAgICAgICAgKiBAcGFyYW1cclxuICAgICAgICAqL1xyXG4gICAgICAgIHJlZ2lzdGVyKGZvcm1EYXRhOiBhbnksIHJldHVyblVybDogc3RyaW5nKTogUS5Qcm9taXNlPGFueT47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICogQXR0ZW1wdCB0byB0cmlnZ2VyIHRoZSBmb3Jnb3QgcGFzc3dvcmQgZW1haWwgdXNpbmcgQ29tcG9zZXIgQVBJLlxyXG4gICAgICAgICogQHBhcmFtXHJcbiAgICAgICAgKi9cclxuICAgICAgICBmb3Jnb3RQYXNzd29yZChmb3JtRGF0YTogYW55KTogUS5Qcm9taXNlPGFueT47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICogQXR0ZW1wdCB0byByZXNldCBwYXNzd29yZCBmb3IgdGhlIEN1c3RvbWVyIGlkZW50aWZpZWQgYnkgdGhlIHRpY2tldCB1c2luZyBDb21wb3NlciBBUEkuXHJcbiAgICAgICAgKiBAcGFyYW1cclxuICAgICAgICAqL1xyXG4gICAgICAgIHJlc2V0UGFzc3dvcmQoZm9ybURhdGE6IGFueSwgdGlja2V0OiBzdHJpbmcsIHJldHVyblVybDogc3RyaW5nKTogUS5Qcm9taXNlPGFueT47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICogQXR0ZW1wdCB0byBjaGFuZ2UgdGhlIHBhc3N3b3JkIGZvciB0aGUgY29ubmVjdGVkIEN1c3RvbWVyIHVzaW5nIENvbXBvc2VyIEFQSS5cclxuICAgICAgICAqIEBwYXJhbVxyXG4gICAgICAgICovXHJcbiAgICAgICAgY2hhbmdlUGFzc3dvcmQoZm9ybURhdGE6IGFueSwgcmV0dXJuVXJsOiBzdHJpbmcpOiBRLlByb21pc2U8YW55PjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSWYgdGhlIGN1cnJlbnQgdXNlciBpcyBhdXRoZW50aWNhdGVkIG9yIG5vdFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGlzQXV0aGVudGljYXRlZCgpOiBRLlByb21pc2U8YW55PjtcclxuICAgIH1cclxufSIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvTXZjL0NvbXBvc2VyQ2xpZW50LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0V2ZW50cy9FdmVudEh1Yi50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPSdJTWVtYmVyc2hpcFJlcG9zaXRvcnkudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgTWVtYmVyc2hpcFJlcG9zaXRvcnkgaW1wbGVtZW50cyBJTWVtYmVyc2hpcFJlcG9zaXRvcnkge1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAqIEF0dGVtcHQgdG8gTG9nIEluIHVzaW5nIENvbXBvc2VyIEFQSS5cclxuICAgICAgICAqIEBwYXJhbVxyXG4gICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGxvZ2luKGZvcm1EYXRhOiBhbnksIHJldHVyblVybDogc3RyaW5nKTogUS5Qcm9taXNlPGFueT4ge1xyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IF8uZXh0ZW5kKHsgUmV0dXJuVXJsOiByZXR1cm5VcmwgfSwgZm9ybURhdGEpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIENvbXBvc2VyQ2xpZW50LnBvc3QoJy9hcGkvbWVtYmVyc2hpcC9sb2dpbicsIGRhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgKiBMb2dvdXQgdXNpbmcgQ29tcG9zZXIgQVBJLlxyXG4gICAgICAgICogQHBhcmFtXHJcbiAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgbG9nb3V0KHJldHVyblVybDogc3RyaW5nID0gJycsIHByZXNlcnZlQ3VzdG9tZXJJbmZvOiBib29sZWFuID0gZmFsc2UpOiBRLlByb21pc2U8YW55PiB7XHJcbiAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgUmV0dXJuVXJsOiByZXR1cm5VcmwsXHJcbiAgICAgICAgICAgICAgICBQcmVzZXJ2ZUN1c3RvbWVySW5mbzogcHJlc2VydmVDdXN0b21lckluZm9cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBDb21wb3NlckNsaWVudC5wb3N0KCcvYXBpL21lbWJlcnNoaXAvbG9nb3V0JywgZGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAqIEF0dGVtcHQgdG8gcmVnaXN0ZXIgdXNpbmcgQ29tcG9zZXIgQVBJLlxyXG4gICAgICAgICogQHBhcmFtXHJcbiAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgcmVnaXN0ZXIoZm9ybURhdGE6IGFueSwgcmV0dXJuVXJsOiBzdHJpbmcpOiBRLlByb21pc2U8YW55PiB7XHJcbiAgICAgICAgICAgIHZhciBkYXRhID0gXy5leHRlbmQoeyBSZXR1cm5Vcmw6IHJldHVyblVybCB9LCBmb3JtRGF0YSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gQ29tcG9zZXJDbGllbnQucG9zdCgnL2FwaS9tZW1iZXJzaGlwL3JlZ2lzdGVyJywgZGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAqIEF0dGVtcHQgdG8gdHJpZ2dlciB0aGUgZm9yZ290IHBhc3N3b3JkIGVtYWlsIHVzaW5nIENvbXBvc2VyIEFQSS5cclxuICAgICAgICAqIEBwYXJhbVxyXG4gICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGZvcmdvdFBhc3N3b3JkKGZvcm1EYXRhOiBhbnkpOiBRLlByb21pc2U8YW55PiB7XHJcbiAgICAgICAgICAgIHZhciBkYXRhID0gXy5leHRlbmQoe30sIGZvcm1EYXRhKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBDb21wb3NlckNsaWVudC5wb3N0KCcvYXBpL21lbWJlcnNoaXAvZm9yZ290cGFzc3dvcmQnLCBkYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICogQXR0ZW1wdCB0byByZXNldCBwYXNzd29yZCBmb3IgdGhlIEN1c3RvbWVyIGlkZW50aWZpZWQgYnkgdGhlIHRpY2tldCB1c2luZyBDb21wb3NlciBBUEkuXHJcbiAgICAgICAgKiBAcGFyYW1cclxuICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyByZXNldFBhc3N3b3JkKGZvcm1EYXRhOiBhbnksIHRpY2tldDogc3RyaW5nLCByZXR1cm5Vcmw6IHN0cmluZyk6IFEuUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSBfLmV4dGVuZCh7IFJldHVyblVybDogcmV0dXJuVXJsLCB0aWNrZXQ6IHRpY2tldCB9LCBmb3JtRGF0YSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gQ29tcG9zZXJDbGllbnQucG9zdCgnL2FwaS9tZW1iZXJzaGlwL3Jlc2V0cGFzc3dvcmQnLCBkYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICogQXR0ZW1wdCB0byBjaGFuZ2UgdGhlIHBhc3N3b3JkIGZvciB0aGUgY29ubmVjdGVkIEN1c3RvbWVyIHVzaW5nIENvbXBvc2VyIEFQSS5cclxuICAgICAgICAqIEBwYXJhbVxyXG4gICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGNoYW5nZVBhc3N3b3JkKGZvcm1EYXRhOiBhbnksIHJldHVyblVybDogc3RyaW5nKTogUS5Qcm9taXNlPGFueT4ge1xyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IF8uZXh0ZW5kKHsgUmV0dXJuVXJsOiByZXR1cm5VcmwgfSwgZm9ybURhdGEpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIENvbXBvc2VyQ2xpZW50LnBvc3QoJy9hcGkvbWVtYmVyc2hpcC9jaGFuZ2VwYXNzd29yZCcsIGRhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSWYgdGhlIGN1cnJlbnQgdXNlciBpcyBhdXRoZW50aWNhdGVkIG9yIG5vdFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgICBwdWJsaWMgaXNBdXRoZW50aWNhdGVkKCk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBDb21wb3NlckNsaWVudC5nZXQoJy9hcGkvbWVtYmVyc2hpcC9pc0F1dGhlbnRpY2F0ZWQnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJTWVtYmVyc2hpcFNlcnZpY2Uge1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAqIEF0dGVtcHQgdG8gTG9nIEluIHVzaW5nIENvbXBvc2VyIEFQSS5cclxuICAgICAgICAqIEBwYXJhbVxyXG4gICAgICAgICovXHJcbiAgICAgICAgbG9naW4oZm9ybURhdGE6IGFueSwgcmV0dXJuVXJsOiBzdHJpbmcpOiBRLlByb21pc2U8YW55PjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgKiBMb2dvdXQgdXNpbmcgQ29tcG9zZXIgQVBJLlxyXG4gICAgICAgICogQHBhcmFtXHJcbiAgICAgICAgKi9cclxuICAgICAgICBsb2dvdXQocmV0dXJuVXJsOiBzdHJpbmcsIHByZXNlcnZlQ3VzdG9tZXJJbmZvOiBib29sZWFuKTogUS5Qcm9taXNlPGFueT47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICogQXR0ZW1wdCB0byByZWdpc3RlciB1c2luZyBDb21wb3NlciBBUEkuXHJcbiAgICAgICAgKiBAcGFyYW1cclxuICAgICAgICAqL1xyXG4gICAgICAgIHJlZ2lzdGVyKGZvcm1EYXRhOiBhbnksIHJldHVyblVybDogc3RyaW5nKTogUS5Qcm9taXNlPGFueT47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICogQXR0ZW1wdCB0byB0cmlnZ2VyIHRoZSBmb3Jnb3QgcGFzc3dvcmQgZW1haWwgdXNpbmcgQ29tcG9zZXIgQVBJLlxyXG4gICAgICAgICogQHBhcmFtXHJcbiAgICAgICAgKi9cclxuICAgICAgICBmb3Jnb3RQYXNzd29yZChmb3JtRGF0YTogYW55KTogUS5Qcm9taXNlPGFueT47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICogQXR0ZW1wdCB0byByZXNldCBwYXNzd29yZCBmb3IgdGhlIEN1c3RvbWVyIGlkZW50aWZpZWQgYnkgdGhlIHRpY2tldCB1c2luZyBDb21wb3NlciBBUEkuXHJcbiAgICAgICAgKiBAcGFyYW1cclxuICAgICAgICAqL1xyXG4gICAgICAgIHJlc2V0UGFzc3dvcmQoZm9ybURhdGE6IGFueSwgdGlja2V0OiBzdHJpbmcsIHJldHVyblVybDogc3RyaW5nKTogUS5Qcm9taXNlPGFueT47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICogQXR0ZW1wdCB0byBjaGFuZ2UgdGhlIHBhc3N3b3JkIGZvciB0aGUgY29ubmVjdGVkIEN1c3RvbWVyIHVzaW5nIENvbXBvc2VyIEFQSS5cclxuICAgICAgICAqIEBwYXJhbVxyXG4gICAgICAgICovXHJcbiAgICAgICAgY2hhbmdlUGFzc3dvcmQoZm9ybURhdGE6IGFueSwgcmV0dXJuVXJsOiBzdHJpbmcpOiBRLlByb21pc2U8YW55PjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSWYgdGhlIGN1cnJlbnQgdXNlciBpcyBhdXRoZW50aWNhdGVkIG9yIG5vdFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGlzQXV0aGVudGljYXRlZCgpOiBRLlByb21pc2U8YW55PjtcclxuICAgIH1cclxufSIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvUmVwb3NpdG9yaWVzL01lbWJlcnNoaXBSZXBvc2l0b3J5LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9J0lNZW1iZXJzaGlwU2VydmljZS50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBNZW1iZXJzaGlwU2VydmljZSBpbXBsZW1lbnRzIElNZW1iZXJzaGlwU2VydmljZSB7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBtZW1vaXplSXNBdXRoZW50aWNhdGVkOiBGdW5jdGlvbjtcclxuICAgICAgICBwcm90ZWN0ZWQgbWVtYmVyc2hpcFJlcG9zaXRvcnk6IElNZW1iZXJzaGlwUmVwb3NpdG9yeTtcclxuXHJcbiAgICAgICAgY29uc3RydWN0b3IobWVtYmVyc2hpcFJlcG9zaXRvcnk6IElNZW1iZXJzaGlwUmVwb3NpdG9yeSkge1xyXG5cclxuICAgICAgICAgICAgaWYgKCFtZW1iZXJzaGlwUmVwb3NpdG9yeSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvcjogbWVtYmVyc2hpcFJlcG9zaXRvcnkgaXMgcmVxdWlyZWQnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5tZW1iZXJzaGlwUmVwb3NpdG9yeSA9IG1lbWJlcnNoaXBSZXBvc2l0b3J5O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgKiBBdHRlbXB0IHRvIExvZyBJbiB1c2luZyBDb21wb3NlciBBUEkuXHJcbiAgICAgICAgKiBAcGFyYW1cclxuICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBsb2dpbihmb3JtRGF0YTogYW55LCByZXR1cm5Vcmw6IHN0cmluZyk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1lbWJlcnNoaXBSZXBvc2l0b3J5LmxvZ2luKGZvcm1EYXRhLCByZXR1cm5VcmwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgKiBMb2dvdXQgdXNpbmcgQ29tcG9zZXIgQVBJLlxyXG4gICAgICAgICogQHBhcmFtXHJcbiAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgbG9nb3V0KHJldHVyblVybDogc3RyaW5nID0gJycsIHByZXNlcnZlQ3VzdG9tZXJJbmZvOiBib29sZWFuID0gZmFsc2UpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tZW1iZXJzaGlwUmVwb3NpdG9yeS5sb2dvdXQocmV0dXJuVXJsLCBwcmVzZXJ2ZUN1c3RvbWVySW5mbyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAqIEF0dGVtcHQgdG8gcmVnaXN0ZXIgdXNpbmcgQ29tcG9zZXIgQVBJLlxyXG4gICAgICAgICogQHBhcmFtXHJcbiAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgcmVnaXN0ZXIoZm9ybURhdGE6IGFueSwgcmV0dXJuVXJsOiBzdHJpbmcpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tZW1iZXJzaGlwUmVwb3NpdG9yeS5yZWdpc3Rlcihmb3JtRGF0YSwgcmV0dXJuVXJsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICogQXR0ZW1wdCB0byB0cmlnZ2VyIHRoZSBmb3Jnb3QgcGFzc3dvcmQgZW1haWwgdXNpbmcgQ29tcG9zZXIgQVBJLlxyXG4gICAgICAgICogQHBhcmFtXHJcbiAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgZm9yZ290UGFzc3dvcmQoZm9ybURhdGE6IGFueSk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1lbWJlcnNoaXBSZXBvc2l0b3J5LmZvcmdvdFBhc3N3b3JkKGZvcm1EYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICogQXR0ZW1wdCB0byByZXNldCBwYXNzd29yZCBmb3IgdGhlIEN1c3RvbWVyIGlkZW50aWZpZWQgYnkgdGhlIHRpY2tldCB1c2luZyBDb21wb3NlciBBUEkuXHJcbiAgICAgICAgKiBAcGFyYW1cclxuICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyByZXNldFBhc3N3b3JkKGZvcm1EYXRhOiBhbnksIHRpY2tldDogc3RyaW5nLCByZXR1cm5Vcmw6IHN0cmluZyk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1lbWJlcnNoaXBSZXBvc2l0b3J5LnJlc2V0UGFzc3dvcmQoZm9ybURhdGEsIHRpY2tldCwgcmV0dXJuVXJsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICogQXR0ZW1wdCB0byBjaGFuZ2UgdGhlIHBhc3N3b3JkIGZvciB0aGUgY29ubmVjdGVkIEN1c3RvbWVyIHVzaW5nIENvbXBvc2VyIEFQSS5cclxuICAgICAgICAqIEBwYXJhbVxyXG4gICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGNoYW5nZVBhc3N3b3JkKGZvcm1EYXRhOiBhbnksIHJldHVyblVybDogc3RyaW5nKTogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubWVtYmVyc2hpcFJlcG9zaXRvcnkuY2hhbmdlUGFzc3dvcmQoZm9ybURhdGEsIHJldHVyblVybCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBJZiB0aGUgY3VycmVudCB1c2VyIGlzIGF1dGhlbnRpY2F0ZWQgb3Igbm90XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgIHB1YmxpYyBpc0F1dGhlbnRpY2F0ZWQoKTogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgaWYgKF8uaXNVbmRlZmluZWQodGhpcy5tZW1vaXplSXNBdXRoZW50aWNhdGVkKSkge1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMubWVtb2l6ZUlzQXV0aGVudGljYXRlZCA9IF8ubWVtb2l6ZShhcmcgPT4gdGhpcy5pc0F1dGhlbnRpY2F0ZWRJbXBsKCkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tZW1vaXplSXNBdXRoZW50aWNhdGVkKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBJZiB0aGUgY3VycmVudCB1c2VyIGlzIGF1dGhlbnRpY2F0ZWQgb3Igbm90XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgIHByb3RlY3RlZCBpc0F1dGhlbnRpY2F0ZWRJbXBsKCk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1lbWJlcnNoaXBSZXBvc2l0b3J5LmlzQXV0aGVudGljYXRlZCgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9Db250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9JQ29udHJvbGxlckFjdGlvbkNvbnRleHQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvanF1ZXJ5UGx1Z2lucy9JU2VyaWFsaXplT2JqZWN0SnF1ZXJ5UGx1Z2luLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NvbW1vbi9Tb3VyY2UvVHlwZXNjcmlwdC9NZW1iZXJzaGlwU2VydmljZS50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG5cclxuICAgIGV4cG9ydCBlbnVtIE15QWNjb3VudEV2ZW50cyB7XHJcbiAgICAgICAgQWNjb3VudENyZWF0ZWQsXHJcbiAgICAgICAgQWNjb3VudFVwZGF0ZWQsXHJcbiAgICAgICAgQWRkcmVzc0NyZWF0ZWQsXHJcbiAgICAgICAgQWRkcmVzc1VwZGF0ZWQsXHJcbiAgICAgICAgQWRkcmVzc0RlbGV0ZWQsXHJcbiAgICAgICAgTG9nZ2VkSW4sXHJcbiAgICAgICAgTG9nZ2VkT3V0LFxyXG4gICAgICAgIFBhc3N3b3JkQ2hhbmdlZCxcclxuICAgICAgICBGb3Jnb3RQYXNzd29yZEluc3RydWN0aW9uU2VudFxyXG4gICAgfTtcclxufVxyXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUlcXFNvdXJjZVxcVHlwZXNjcmlwdFxcRXZlbnRzXFxFdmVudEh1Yi50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi9JQW5hbHl0aWNzUGx1Z2luLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuL0lBbmFseXRpY3NPcmRlci50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi9JQW5hbHl0aWNzVHJhbnNhY3Rpb24udHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4vSUFuYWx5dGljc1NlYXJjaEZpbHRlcnMudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L1BsdWdpbnMvSVBsdWdpbi50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuTXlBY2NvdW50LlVJL0NvbW1vbi9Tb3VyY2UvVHlwZXNjcmlwdC9NeUFjY291bnRFdmVudHMudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIGV4cG9ydCBjbGFzcyBBbmFseXRpY3NQbHVnaW4gaW1wbGVtZW50cyBJQW5hbHl0aWNzUGx1Z2luLCBJUGx1Z2luIHtcclxuICAgICAgICBwcm90ZWN0ZWQgY2FjaGVQcm92aWRlcjogSUNhY2hlUHJvdmlkZXI7XHJcbiAgICAgICAgcHJvdGVjdGVkIGV2ZW50SHViOiBJRXZlbnRIdWI7XHJcbiAgICAgICAgcHJvdGVjdGVkIHVzZVZhcmlhbnRJZFdoZW5Qb3NzaWJsZTogYm9vbGVhbjtcclxuXHJcbiAgICAgICAgcHVibGljIGluaXRpYWxpemUoKSB7XHJcbiAgICAgICAgICAgIHRoaXMudXNlVmFyaWFudElkV2hlblBvc3NpYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1YiA9IEV2ZW50SHViLmluc3RhbmNlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2FjaGVQcm92aWRlciA9IENhY2hlUHJvdmlkZXIuaW5zdGFuY2UoKTtcclxuICAgICAgICAgICAgdGhpcy5yZWdpc3RlclN1YnNjcmlwdGlvbnMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgc2V0Q2hlY2tvdXRPcmlnaW4oY2hlY2tvdXRPcmlnaW46IHN0cmluZykge1xyXG4gICAgICAgICAgICBDYWNoZVByb3ZpZGVyLmluc3RhbmNlKCkuc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgnYW5hbHl0aWNzLmNoZWNrb3V0T3JpZ2luJywgY2hlY2tvdXRPcmlnaW4pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBnZXRDaGVja291dE9yaWdpbigpOiBzdHJpbmcge1xyXG4gICAgICAgICAgICByZXR1cm4gQ2FjaGVQcm92aWRlci5pbnN0YW5jZSgpLnNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2FuYWx5dGljcy5jaGVja291dE9yaWdpbicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQmluZHMgYWxsIHRoZSBldmVudHMgZm9yIEFuYWx5dGljc1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyByZWdpc3RlclN1YnNjcmlwdGlvbnMoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIuc3Vic2NyaWJlKCdsaW5lSXRlbUFkZGluZycsIChldmVudEluZm86IElFdmVudEluZm9ybWF0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uTGluZUl0ZW1BZGRpbmcoZXZlbnRJbmZvKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnN1YnNjcmliZSgnbGluZUl0ZW1SZW1vdmluZycsIChldmVudEluZm86IElFdmVudEluZm9ybWF0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uTGluZUl0ZW1SZW1vdmluZyhldmVudEluZm8pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIuc3Vic2NyaWJlKCdwcm9kdWN0RGV0YWlsc1JlbmRlcmVkJywgKGV2ZW50SW5mbzogSUV2ZW50SW5mb3JtYXRpb24pID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25Qcm9kdWN0RGV0YWlsc1JlbmRlcmVkKGV2ZW50SW5mbyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5zdWJzY3JpYmUoJ2NoZWNrb3V0U3RlcFJlbmRlcmVkJywgKGV2ZW50SW5mbzogSUV2ZW50SW5mb3JtYXRpb24pID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25DaGVja291dFN0ZXBSZW5kZXJlZChldmVudEluZm8pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIuc3Vic2NyaWJlKCdjaGVja291dE5hdmlnYXRpb25SZW5kZXJlZCcsIChldmVudEluZm86IElFdmVudEluZm9ybWF0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uQ2hlY2tvdXROYXZpZ2F0aW9uUmVuZGVyZWQoZXZlbnRJbmZvKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnN1YnNjcmliZSgnQ2hlY2tvdXRDb25maXJtYXRpb24nLCAoZXZlbnRJbmZvOiBJRXZlbnRJbmZvcm1hdGlvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkNoZWNrb3V0Q29tcGxldGVkKGV2ZW50SW5mbyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5zdWJzY3JpYmUoJ3NlYXJjaFJlc3VsdFJlbmRlcmVkJywgKGV2ZW50SW5mbzogSUV2ZW50SW5mb3JtYXRpb24pID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25TZWFyY2hSZXN1bHRSZW5kZXJlZChldmVudEluZm8pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIuc3Vic2NyaWJlKCdyZWxhdGVkUHJvZHVjdHNMb2FkZWQnLCAoZXZlbnRJbmZvOiBJRXZlbnRJbmZvcm1hdGlvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vblJlbGF0ZWRQcm9kdWN0c0xvYWRlZChldmVudEluZm8pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIuc3Vic2NyaWJlKCdwcm9kdWN0Q2xpY2snLCAoZXZlbnRJbmZvOiBJRXZlbnRJbmZvcm1hdGlvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vblByb2R1Y3RDbGljayhldmVudEluZm8pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIuc3Vic2NyaWJlKCdwYWdlTm90Rm91bmQnLCAoZXZlbnRJbmZvOiBJRXZlbnRJbmZvcm1hdGlvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vblBhZ2VOb3RGb3VuZChldmVudEluZm8pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIuc3Vic2NyaWJlKCd3aXNoTGlzdExpbmVJdGVtQWRkaW5nJywgKGV2ZW50SW5mbzogSUV2ZW50SW5mb3JtYXRpb24pID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25XaXNoTGlzdExpbmVJdGVtQWRkaW5nKGV2ZW50SW5mbyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5zdWJzY3JpYmUoJ3dpc2hMaXN0TGluZUl0ZW1BZGRpbmdUb0NhcnQnLCAoZXZlbnRJbmZvOiBJRXZlbnRJbmZvcm1hdGlvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkxpbmVJdGVtQWRkaW5nKGV2ZW50SW5mbyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5zdWJzY3JpYmUoJ3dpc2hMaXN0Q29weWluZ1NoYXJlVXJsJywgKGV2ZW50SW5mbzogSUV2ZW50SW5mb3JtYXRpb24pID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25XaXNoTGlzdENvcGluZ1NoYXJlVXJsKGV2ZW50SW5mbyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5zdWJzY3JpYmUoTXlBY2NvdW50RXZlbnRzW015QWNjb3VudEV2ZW50cy5Mb2dnZWRJbl0sIChldmVudEluZm86IElFdmVudEluZm9ybWF0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uVXNlckxvZ2dlZEluKGV2ZW50SW5mbyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5zdWJzY3JpYmUoTXlBY2NvdW50RXZlbnRzW015QWNjb3VudEV2ZW50cy5BY2NvdW50Q3JlYXRlZF0sIChldmVudEluZm86IElFdmVudEluZm9ybWF0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uVXNlckNyZWF0ZWQoZXZlbnRJbmZvKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnN1YnNjcmliZShNeUFjY291bnRFdmVudHNbTXlBY2NvdW50RXZlbnRzLkZvcmdvdFBhc3N3b3JkSW5zdHJ1Y3Rpb25TZW50XSwgKGV2ZW50SW5mbzogSUV2ZW50SW5mb3JtYXRpb24pID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25SZWNvdmVyUGFzc3dvcmQoZXZlbnRJbmZvKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnN1YnNjcmliZSgnbm9SZXN1bHRzRm91bmQnLCAoZXZlbnRJbmZvOiBJRXZlbnRJbmZvcm1hdGlvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbk5vUmVzdWx0c0ZvdW5kKGV2ZW50SW5mbyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5zdWJzY3JpYmUoJ3NlYXJjaFRlcm1Db3JyZWN0ZWQnLCAoZXZlbnRJbmZvOiBJRXZlbnRJbmZvcm1hdGlvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vblNlYXJjaFRlcm1Db3JyZWN0ZWQoZXZlbnRJbmZvKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnN1YnNjcmliZSgnc2luZ2xlQ2F0ZWdvcnlBZGRlZCcsIChldmVudEluZm86IElFdmVudEluZm9ybWF0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uU2luZ2xlRmFjZXRDaGFuZ2VkKGV2ZW50SW5mbyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5zdWJzY3JpYmUoJ3NpbmdsZUZhY2V0c0NoYW5nZWQnLCAoZXZlbnRJbmZvOiBJRXZlbnRJbmZvcm1hdGlvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vblNpbmdsZUZhY2V0Q2hhbmdlZChldmVudEluZm8pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIuc3Vic2NyaWJlKCdtdWx0aUZhY2V0Q2hhbmdlZCcsIChldmVudEluZm86IElFdmVudEluZm9ybWF0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uTXVsdGlGYWNldENoYW5nZWQoZXZlbnRJbmZvKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnN1YnNjcmliZSgnc29ydGluZ0NoYW5nZWQnLCAoZXZlbnRJbmZvOiBJRXZlbnRJbmZvcm1hdGlvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vblNvcnRpbmdDaGFuZ2VkKGV2ZW50SW5mbyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogT2NjdXJzIHdoZW4gYSB1c2VyIGxvZyBpblxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByb3RlY3RlZCBvblVzZXJMb2dnZWRJbihldmVudEluZm86IElFdmVudEluZm9ybWF0aW9uKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICghZXZlbnRJbmZvKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhID0gZXZlbnRJbmZvLmRhdGE7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnVzZXJMb2dnZWRJbigncmVndWxhcicsIGRhdGEuUmV0dXJuVXJsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIE9jY3VycyB3aGVuIGEgdXNlciBjcmVhdGVzIGFuIGFjY291bnRcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcm90ZWN0ZWQgb25Vc2VyQ3JlYXRlZChldmVudEluZm86IElFdmVudEluZm9ybWF0aW9uKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICghZXZlbnRJbmZvKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMudXNlckNyZWF0ZWQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIE9jY3VycyB3aGVuIGEgdXNlciBsb2cgaW5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwcm90ZWN0ZWQgb25SZWNvdmVyUGFzc3dvcmQoZXZlbnRJbmZvOiBJRXZlbnRJbmZvcm1hdGlvbik6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAoIWV2ZW50SW5mbykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnJlY292ZXJQYXNzd29yZCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uU2luZ2xlRmFjZXRDaGFuZ2VkKGV2ZW50SW5mbzogSUV2ZW50SW5mb3JtYXRpb24pOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKCFldmVudEluZm8pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IGV2ZW50SW5mby5kYXRhO1xyXG4gICAgICAgICAgICBsZXQgZmFjZXRLZXkgPSBkYXRhLmZhY2V0S2V5O1xyXG4gICAgICAgICAgICBpZiAoXy5pc1N0cmluZyhkYXRhLmZhY2V0S2V5KSkge1xyXG4gICAgICAgICAgICAgICAgZmFjZXRLZXkgPSBkYXRhLmZhY2V0S2V5LnJlcGxhY2UoJ1tdJywgJycpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoZmFjZXRLZXkuaW5kZXhPZignY2F0ZWdvcnknKSAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICBmYWNldEtleSA9ICdjYXRlZ29yeSc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBsZXQgc2VhcmNoRmlsdGVyczogSUFuYWx5dGljc1NlYXJjaEZpbHRlcnMgPSB7XHJcbiAgICAgICAgICAgICAgICBmYWNldEtleTogZmFjZXRLZXksXHJcbiAgICAgICAgICAgICAgICBmYWNldFZhbHVlOiBkYXRhLmZhY2V0VmFsdWUsXHJcbiAgICAgICAgICAgICAgICBwYWdlVHlwZTogZGF0YS5wYWdlVHlwZVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zaW5nbGVGYWNldENoYW5nZWQoc2VhcmNoRmlsdGVycyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb25NdWx0aUZhY2V0Q2hhbmdlZChldmVudEluZm86IElFdmVudEluZm9ybWF0aW9uKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICghZXZlbnRJbmZvKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhID0gZXZlbnRJbmZvLmRhdGE7XHJcblxyXG4gICAgICAgICAgICBsZXQgZmFjZXRLZXkgPSBfLmlzU3RyaW5nKGRhdGEuZmFjZXRLZXkpID8gZGF0YS5mYWNldEtleS5yZXBsYWNlKCdbXScsICcnKS50b0xvd2VyQ2FzZSgpIDogZGF0YS5mYWNldEtleTtcclxuXHJcbiAgICAgICAgICAgIHZhciBzZWFyY2hGaWx0ZXJzOiBJQW5hbHl0aWNzU2VhcmNoRmlsdGVycyA9IHtcclxuICAgICAgICAgICAgICAgIGZhY2V0S2V5OiBmYWNldEtleSxcclxuICAgICAgICAgICAgICAgIGZhY2V0VmFsdWU6IGRhdGEuZmFjZXRWYWx1ZSxcclxuICAgICAgICAgICAgICAgIHBhZ2VUeXBlOiBkYXRhLnBhZ2VUeXBlXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB0aGlzLm11bHRpRmFjZXRDaGFuZ2VkKHNlYXJjaEZpbHRlcnMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uU29ydGluZ0NoYW5nZWQoZXZlbnRJbmZvOiBJRXZlbnRJbmZvcm1hdGlvbik6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAoIWV2ZW50SW5mbykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IGV2ZW50SW5mby5kYXRhO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zb3J0aW5nQ2hhbmdlZChkYXRhLnNvcnRpbmdUeXBlLCBkYXRhLnBhZ2VUeXBlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIE9jY3VycyB3aGVuIGEgNDA0IHBhZ2UgbG9hZHMuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uUGFnZU5vdEZvdW5kKGV2ZW50SW5mbzogSUV2ZW50SW5mb3JtYXRpb24pOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKCFldmVudEluZm8pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGRhdGEgPSBldmVudEluZm8uZGF0YTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2VuZEV2ZW50KCdldmVudCcsICc0MDQgRXJyb3JzJywgZGF0YS5QYWdlVXJsLCBkYXRhLlJlZmVycmVyVXJsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICogT2NjdXJzIHdoZW4gYSB1c2VyIGNsaWNrIG9uICdDb3B5IFNoYXJlIFVybCcgYnV0dG9uXHJcbiAgICAgICAgKi9cclxuICAgICAgICBwcm90ZWN0ZWQgb25XaXNoTGlzdENvcGluZ1NoYXJlVXJsKGV2ZW50SW5mbzogSUV2ZW50SW5mb3JtYXRpb24pOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKCFldmVudEluZm8pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IGV2ZW50SW5mby5kYXRhO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zaGFyZVdpc2hMaXN0KGRhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogT2NjdXJzIHdoZW4gYSBMaW5lIEl0ZW0gaXMgYmVpbmcgYWRkZWQgdG8gdGhlIFdpc2ggTGlzdC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwcm90ZWN0ZWQgb25XaXNoTGlzdExpbmVJdGVtQWRkaW5nKGV2ZW50SW5mbzogSUV2ZW50SW5mb3JtYXRpb24pOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKCFldmVudEluZm8pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGRhdGEgPSBldmVudEluZm8uZGF0YTtcclxuICAgICAgICAgICAgdmFyIGFuYWx5dGljc1Byb2R1Y3Q6IElBbmFseXRpY3NQcm9kdWN0ID0ge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogZGF0YS5EaXNwbGF5TmFtZSxcclxuICAgICAgICAgICAgICAgIHByaWNlOiB0aGlzLnRyaW1QcmljZShkYXRhLkxpc3RQcmljZSlcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuYWRkVG9XaXNoTGlzdChhbmFseXRpY3NQcm9kdWN0KTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBPY2N1cnMgd2hlbiBhIExpbmUgSXRlbSBpcyBiZWluZyBhZGRlZC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwcm90ZWN0ZWQgb25MaW5lSXRlbUFkZGluZyhldmVudEluZm86IElFdmVudEluZm9ybWF0aW9uKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICghZXZlbnRJbmZvKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhID0gZXZlbnRJbmZvLmRhdGE7XHJcbiAgICAgICAgICAgIHZhciBhbmFseXRpY3NQcm9kdWN0OiBJQW5hbHl0aWNzUHJvZHVjdCA9IHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IGRhdGEuRGlzcGxheU5hbWUsXHJcbiAgICAgICAgICAgICAgICBpZDogZGF0YS5Qcm9kdWN0SWQsXHJcbiAgICAgICAgICAgICAgICB2YXJpYW50OiBkYXRhLlZhcmlhbnQsXHJcbiAgICAgICAgICAgICAgICBwcmljZTogdGhpcy50cmltUHJpY2VBbmRVbmxvY2FsaXplKGRhdGEuTGlzdFByaWNlKSxcclxuICAgICAgICAgICAgICAgIHF1YW50aXR5OiBkYXRhLlF1YW50aXR5LFxyXG4gICAgICAgICAgICAgICAgY2F0ZWdvcnk6IGRhdGEuQ2F0ZWdvcnlJZCxcclxuICAgICAgICAgICAgICAgIGJyYW5kOiBkYXRhLkJyYW5kLFxyXG4gICAgICAgICAgICAgICAgbGlzdDogZGF0YS5MaXN0XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB0aGlzLmFkZFRvQ2FydChhbmFseXRpY3NQcm9kdWN0LCBkYXRhLkxpc3QpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogT2NjdXJzIHdoZW4gYSBMaW5lIGl0ZW0gaXMgYmVpbmcgcmVtb3ZlZC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwcm90ZWN0ZWQgb25MaW5lSXRlbVJlbW92aW5nKGV2ZW50SW5mbzogSUV2ZW50SW5mb3JtYXRpb24pOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKCFldmVudEluZm8pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGRhdGEgPSBldmVudEluZm8uZGF0YTtcclxuICAgICAgICAgICAgdmFyIGFuYWx5dGljc1Byb2R1Y3Q6IElBbmFseXRpY3NQcm9kdWN0ID0ge1xyXG4gICAgICAgICAgICAgICAgbmFtZTogZGF0YS5EaXNwbGF5TmFtZSxcclxuICAgICAgICAgICAgICAgIGlkOiBkYXRhLlByb2R1Y3RJZCxcclxuICAgICAgICAgICAgICAgIHZhcmlhbnQ6IGRhdGEuVmFyaWFudCxcclxuICAgICAgICAgICAgICAgIHByaWNlOiB0aGlzLnRyaW1QcmljZUFuZFVubG9jYWxpemUoZGF0YS5MaXN0UHJpY2UpLFxyXG4gICAgICAgICAgICAgICAgcXVhbnRpdHk6IGRhdGEuUXVhbnRpdHksXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeTogZGF0YS5DYXRlZ29yeUlkLFxyXG4gICAgICAgICAgICAgICAgYnJhbmQ6IGRhdGEuQnJhbmRcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlRnJvbUNhcnQoYW5hbHl0aWNzUHJvZHVjdCwgZGF0YS5MaXN0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIE9jY3VycyB3aGVuIGEgcHJvZHVjdCBEZXRhaWxzIGlzIHJlbmRlcmVkLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByb3RlY3RlZCBvblByb2R1Y3REZXRhaWxzUmVuZGVyZWQoZXZlbnRJbmZvOiBJRXZlbnRJbmZvcm1hdGlvbik6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAoIWV2ZW50SW5mbykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IGV2ZW50SW5mby5kYXRhO1xyXG4gICAgICAgICAgICB2YXIgYW5hbHl0aWNzUHJvZHVjdHM6IElBbmFseXRpY3NQcm9kdWN0W10gPSBbXTtcclxuXHJcbiAgICAgICAgICAgIGFuYWx5dGljc1Byb2R1Y3RzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgbmFtZTogZGF0YS5EaXNwbGF5TmFtZSxcclxuICAgICAgICAgICAgICAgIGlkOiBkYXRhLlByb2R1Y3RJZCxcclxuICAgICAgICAgICAgICAgIHByaWNlOiB0aGlzLnRyaW1QcmljZUFuZFVubG9jYWxpemUoZGF0YS5MaXN0UHJpY2UpLFxyXG4gICAgICAgICAgICAgICAgYnJhbmQ6IGRhdGEuQnJhbmQsXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeTogZGF0YS5DYXRlZ29yeUlkLFxyXG4gICAgICAgICAgICAgICAgdmFyaWFudDogZGF0YS5WYXJpYW50XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5wcm9kdWN0RGV0YWlsSW1wcmVzc2lvbnMoYW5hbHl0aWNzUHJvZHVjdHMsICdEZXRhaWwnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqICBPY2N1cnMgd2hlbiBhIENoZWNrb3V0IFN0ZXAgaXMgcmVuZGVyZWQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uQ2hlY2tvdXRTdGVwUmVuZGVyZWQoZXZlbnRJbmZvOiBJRXZlbnRJbmZvcm1hdGlvbik6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAoIWV2ZW50SW5mbykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IGV2ZW50SW5mby5kYXRhO1xyXG5cclxuICAgICAgICAgICAgdmFyIGFuYWx5dGljc1Byb2R1Y3RzOiBJQW5hbHl0aWNzUHJvZHVjdFtdID0gW107XHJcblxyXG4gICAgICAgICAgICBpZiAoZGF0YS5DYXJ0KSB7XHJcbiAgICAgICAgICAgICAgICBRLnJlc29sdmUoZGF0YS5DYXJ0KS50aGVuKGNhcnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIF8uZWFjaChjYXJ0LkxpbmVJdGVtRGV0YWlsVmlld01vZGVscywgKGxpbmVJdGVtRGV0YWlsVmlld01vZGVsOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFuYWx5dGljc1Byb2R1Y3Q6IElBbmFseXRpY3NQcm9kdWN0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogbGluZUl0ZW1EZXRhaWxWaWV3TW9kZWwuUHJvZHVjdFN1bW1hcnkuRGlzcGxheU5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZDogbGluZUl0ZW1EZXRhaWxWaWV3TW9kZWwuUHJvZHVjdElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJpY2U6IHRoaXMudHJpbVByaWNlQW5kVW5sb2NhbGl6ZShsaW5lSXRlbURldGFpbFZpZXdNb2RlbC5MaXN0UHJpY2UpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVhbnRpdHk6IGxpbmVJdGVtRGV0YWlsVmlld01vZGVsLlF1YW50aXR5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk6IGxpbmVJdGVtRGV0YWlsVmlld01vZGVsLlByb2R1Y3RTdW1tYXJ5LkNhdGVnb3J5SWQucmVwbGFjZSgvLS9nLCAnLycpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyaWFudDogdGhpcy5idWlsZFZhcmlhbnRGb3JMaW5lSXRlbShsaW5lSXRlbURldGFpbFZpZXdNb2RlbCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmFuZDogbGluZUl0ZW1EZXRhaWxWaWV3TW9kZWwuUHJvZHVjdFN1bW1hcnkuQnJhbmRcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnVzZVZhcmlhbnRJZFdoZW5Qb3NzaWJsZSAmJiBsaW5lSXRlbURldGFpbFZpZXdNb2RlbC5WYXJpYW50SWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFuYWx5dGljc1Byb2R1Y3QuaWQgPSBsaW5lSXRlbURldGFpbFZpZXdNb2RlbC5WYXJpYW50SWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuYWx5dGljc1Byb2R1Y3RzLnB1c2goYW5hbHl0aWNzUHJvZHVjdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGxldCBjaGVja291dE9yaWdpbiA9IEFuYWx5dGljc1BsdWdpbi5nZXRDaGVja291dE9yaWdpbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB0cmFuc2FjdGlvbjogSUFuYWx5dGljc1RyYW5zYWN0aW9uID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaGVja291dE9yaWdpbjogY2hlY2tvdXRPcmlnaW5cclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrb3V0KGRhdGEuU3RlcE51bWJlciwgdHJhbnNhY3Rpb24sIGFuYWx5dGljc1Byb2R1Y3RzKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBPY2N1cnMgd2hlbiBhIHRoZSBDaGVja291dCBOYXZpZ2F0aW9uIHN0cmlwIGlzIHJlbmRlcmVkLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByb3RlY3RlZCBvbkNoZWNrb3V0TmF2aWdhdGlvblJlbmRlcmVkKGV2ZW50SW5mbzogSUV2ZW50SW5mb3JtYXRpb24pOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKCFldmVudEluZm8pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGRhdGEgPSBldmVudEluZm8uZGF0YTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tvdXRPcHRpb24oZGF0YS5TdGVwTnVtYmVyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIE9jY3VycyB3aGVuIGEgdGhlIENoZWNrb3V0IGNvbXBsZXRlcywgY3JlYXRpbmcgYW4gb3JkZXIgb3V0IG9mIGEgQ2FydC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwcm90ZWN0ZWQgb25DaGVja291dENvbXBsZXRlZChldmVudEluZm86IElFdmVudEluZm9ybWF0aW9uKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICghZXZlbnRJbmZvKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhID0gZXZlbnRJbmZvLmRhdGE7XHJcblxyXG4gICAgICAgICAgICB2YXIgb3JkZXI6IElBbmFseXRpY3NPcmRlciA9IHtcclxuICAgICAgICAgICAgICAgIGlkOiBkYXRhLk9yZGVyTnVtYmVyLFxyXG4gICAgICAgICAgICAgICAgYWZmaWxpYXRpb246IGRhdGEuQWZmaWxpYXRpb24sXHJcbiAgICAgICAgICAgICAgICByZXZlbnVlOiBkYXRhLlJldmVudSxcclxuICAgICAgICAgICAgICAgIHRheDogZGF0YS5UYXgsXHJcbiAgICAgICAgICAgICAgICBzaGlwcGluZzogZGF0YS5TaGlwcGluZyxcclxuICAgICAgICAgICAgICAgIGNvdXBvbjogXy5pc0VtcHR5KGRhdGEuQ291cG9ucykgPyAnJyA6IGRhdGEuQ291cG9ucy5tYXAoYyA9PiBjLkNvdXBvbkNvZGUpLmpvaW4oJywgJyksXHJcbiAgICAgICAgICAgICAgICBjdXJyZW5jeUNvZGU6IGRhdGEuQmlsbGluZ0N1cnJlbmN5XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB2YXIgdHJhbnNhY3Rpb246IElBbmFseXRpY3NUcmFuc2FjdGlvbiA9IHRoaXMubWFwQW5hbHl0aWNUcmFuc2FjdGlvbkZyb21PcmRlcihkYXRhKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBwcm9kdWN0czogSUFuYWx5dGljc1Byb2R1Y3RbXSA9IHRoaXMubWFwQW5hbHl0aWNQcm9kdWN0c0Zyb21MaW5lSXRlbXMoZGF0YSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgY291cG9uczogSUFuYWx5dGljc0NvdXBvbltdID0gdGhpcy5tYXBBbmFseXRpY0NvdXBvbnNGcm9tT3JkZXIoZGF0YSk7XHJcblxyXG4gICAgICAgICAgICBfLmVhY2goY291cG9ucywgKGNvdXBvbjogSUFuYWx5dGljc0NvdXBvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb3Vwb25zVXNlZChjb3Vwb24pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucHVyY2hhc2Uob3JkZXIsIHRyYW5zYWN0aW9uLCBwcm9kdWN0cyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBPY2N1cnMgd2hlbiB0aGUgU2VhcmNoIHJlc3VsdHMgb24gYSBwYWdlIGFyZSByZW5kZXJlZC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwcm90ZWN0ZWQgb25TZWFyY2hSZXN1bHRSZW5kZXJlZChldmVudEluZm86IElFdmVudEluZm9ybWF0aW9uKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICghZXZlbnRJbmZvKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhID0gZXZlbnRJbmZvLmRhdGE7XHJcblxyXG4gICAgICAgICAgICBpZiAoZGF0YS5Qcm9kdWN0U2VhcmNoUmVzdWx0cy5TZWFyY2hSZXN1bHRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIHZhciBwcm9kdWN0czogSUFuYWx5dGljc1Byb2R1Y3RbXSA9IFtdO1xyXG5cclxuICAgICAgICAgICAgICAgIF8uZWFjaChkYXRhLlByb2R1Y3RTZWFyY2hSZXN1bHRzLlNlYXJjaFJlc3VsdHMsIChwcm9kdWN0OiBhbnksIGk6IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhbmFseXRpY3NQcm9kdWN0OiBJQW5hbHl0aWNzUHJvZHVjdCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IHByb2R1Y3QuUHJvZHVjdElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBwcm9kdWN0LkRpc3BsYXlOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmljZTogdGhpcy50cmltUHJpY2VBbmRVbmxvY2FsaXplKHByb2R1Y3QuUHJpY2luZy5Jc09uU2FsZSA/IHByb2R1Y3QuUHJpY2luZy5QcmljZSA6IHByb2R1Y3QuUHJpY2luZy5MaXN0UHJpY2UpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmFuZDogcHJvZHVjdC5CcmFuZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk6IHByb2R1Y3QuQ2F0ZWdvcnlJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGlzdDogZGF0YS5MaXN0TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IChpICsgMSkgKyAoZGF0YS5NYXhJdGVtc1BlclBhZ2UgKiAoZGF0YS5QYWdlTnVtYmVyIC0gMSkpXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvZHVjdHMucHVzaChhbmFseXRpY3NQcm9kdWN0KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMucHJvZHVjdEltcHJlc3Npb25zKHByb2R1Y3RzKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5zZW5kRXZlbnQoJ2V2ZW50JywgJ1NlYXJjaCBSZXN1bHRzJywgJ1JlbmRlcmVkJywgZGF0YS5Qcm9kdWN0U2VhcmNoUmVzdWx0cy5LZXl3b3JkcywgZGF0YS5Qcm9kdWN0U2VhcmNoUmVzdWx0cy5Ub3RhbENvdW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIE9jY3VycyB3aGVuIFJlbGF0ZWQgUHJvZHVjdHMgYXJlIGxvYWRlZC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwcm90ZWN0ZWQgb25SZWxhdGVkUHJvZHVjdHNMb2FkZWQoZXZlbnRJbmZvOiBJRXZlbnRJbmZvcm1hdGlvbik6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAoIWV2ZW50SW5mbykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IGV2ZW50SW5mby5kYXRhO1xyXG5cclxuICAgICAgICAgICAgdmFyIHByb2R1Y3RzOiBJQW5hbHl0aWNzUHJvZHVjdFtdID0gW107XHJcblxyXG4gICAgICAgICAgICBfLmVhY2goZGF0YS5Qcm9kdWN0cywgKHByb2R1Y3Q6IGFueSwgaTogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYW5hbHl0aWNzUHJvZHVjdDogSUFuYWx5dGljc1Byb2R1Y3QgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6IHByb2R1Y3QuUHJvZHVjdElkLFxyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IHByb2R1Y3QuRGlzcGxheU5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgcHJpY2U6IHRoaXMudHJpbVByaWNlQW5kVW5sb2NhbGl6ZShwcm9kdWN0LlByaWNlKSxcclxuICAgICAgICAgICAgICAgICAgICBicmFuZDogcHJvZHVjdC5CcmFuZCxcclxuICAgICAgICAgICAgICAgICAgICBsaXN0OiBkYXRhLkxpc3ROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBwcm9kdWN0LkNhdGVnb3J5SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGkgKyAxXHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIHByb2R1Y3RzLnB1c2goYW5hbHl0aWNzUHJvZHVjdCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5wcm9kdWN0SW1wcmVzc2lvbnMocHJvZHVjdHMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogT2NjdXJzIHdoZW4gdGhlIHVzZXIgY2xpY2tzIG9uIGEgcHJvZHVjdC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwcm90ZWN0ZWQgb25Qcm9kdWN0Q2xpY2soZXZlbnRJbmZvOiBJRXZlbnRJbmZvcm1hdGlvbik6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAoIWV2ZW50SW5mbykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IGV2ZW50SW5mby5kYXRhO1xyXG5cclxuICAgICAgICAgICAgdmFyIHBvc2l0aW9uOiBudW1iZXIgPSBkYXRhLkluZGV4ICsgMTtcclxuXHJcbiAgICAgICAgICAgIGlmIChkYXRhLk1heEl0ZW1zUGVyUGFnZSAmJiBkYXRhLlBhZ2VOdW1iZXIpIHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uID0gcG9zaXRpb24gKyAoZGF0YS5NYXhJdGVtc1BlclBhZ2UgKiAocGFyc2VJbnQoZGF0YS5QYWdlTnVtYmVyLCAxMCkgLSAxKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBwcm9kdWN0OiBJQW5hbHl0aWNzUHJvZHVjdCA9IHtcclxuICAgICAgICAgICAgICAgIGlkOiBkYXRhLlByb2R1Y3QuUHJvZHVjdElkLFxyXG4gICAgICAgICAgICAgICAgbmFtZTogZGF0YS5Qcm9kdWN0LkRpc3BsYXlOYW1lLFxyXG4gICAgICAgICAgICAgICAgcHJpY2U6IHRoaXMudHJpbVByaWNlQW5kVW5sb2NhbGl6ZShkYXRhLlByb2R1Y3QuUHJpY2UgfHwgZGF0YS5Qcm9kdWN0LlByaWNpbmcuUHJpY2UpLFxyXG4gICAgICAgICAgICAgICAgYnJhbmQ6IGRhdGEuUHJvZHVjdC5CcmFuZCxcclxuICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBkYXRhLlByb2R1Y3QuQ2F0ZWdvcnlJZCxcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBwb3NpdGlvblxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdmFyIHByb2R1Y3RzOiBJQW5hbHl0aWNzUHJvZHVjdFtdID0gW3Byb2R1Y3RdO1xyXG4gICAgICAgICAgICB0aGlzLnByb2R1Y3RDbGljayhwcm9kdWN0cywgZGF0YS5MaXN0TmFtZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBPY2N1cnMgd2hlbiBubyByZXN1bHRzIHdlcmUgZm91bmQgZm9yIGEgc2VhcmNoLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByb3RlY3RlZCBvbk5vUmVzdWx0c0ZvdW5kKGV2ZW50SW5mbzogSUV2ZW50SW5mb3JtYXRpb24pOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKCFldmVudEluZm8pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGRhdGEgPSBldmVudEluZm8uZGF0YTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMubm9SZXN1bHRzRm91bmQoZGF0YS5LZXl3b3JkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIE9jY3VycyB3aGVuIGEgc2VhcmNoIHRlcm0gaGFzIGJlZW4gYXV0byBjb3JyZWN0ZWQgZHVyaW5nIGEgc2VhcmNoLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByb3RlY3RlZCBvblNlYXJjaFRlcm1Db3JyZWN0ZWQoZXZlbnRJbmZvOiBJRXZlbnRJbmZvcm1hdGlvbik6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAoIWV2ZW50SW5mbykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBkYXRhID0gZXZlbnRJbmZvLmRhdGE7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBzZWFyY2hSZXN1bHRzOiBJQW5hbHl0aWNzU2VhcmNoUmVzdWx0cyA9IHtcclxuICAgICAgICAgICAgICAgIGtleXdvcmRDb3JyZWN0ZWQ6IGRhdGEuS2V5d29yZENvcnJlY3RlZCxcclxuICAgICAgICAgICAgICAgIGtleXdvcmRFbnRlcmVkOiBkYXRhLktleXdvcmRFbnRlcmVkXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNlYXJjaEtleXdvcmRDb3JyZWN0aW9uKHNlYXJjaFJlc3VsdHMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGJ1aWxkVmFyaWFudEZvckxpbmVJdGVtKGxpbmVJdGVtOiBhbnkpOiBzdHJpbmcge1xyXG4gICAgICAgICAgICBpZiAobGluZUl0ZW0uVmFyaWFudElkICYmIGxpbmVJdGVtLktleVZhcmlhbnRBdHRyaWJ1dGVzTGlzdCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYnVpbGRWYXJpYW50TmFtZShsaW5lSXRlbS5LZXlWYXJpYW50QXR0cmlidXRlc0xpc3QpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGJ1aWxkVmFyaWFudE5hbWUoa3ZhczogYW55W10pOiBzdHJpbmcge1xyXG4gICAgICAgICAgICB2YXIgbmFtZVBhcnRzOiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgaTogbnVtYmVyID0gMDsgaSA8IGt2YXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciB2YWx1ZTogYW55ID0ga3Zhc1tpXS5PcmlnaW5hbFZhbHVlO1xyXG5cclxuICAgICAgICAgICAgICAgIG5hbWVQYXJ0cy5wdXNoKHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5hbWVQYXJ0cy5qb2luKCcgJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgbWFwQW5hbHl0aWNQcm9kdWN0c0Zyb21MaW5lSXRlbXMoZGF0YTogYW55KTogSUFuYWx5dGljc1Byb2R1Y3RbXSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgcHJvZHVjdHM6IElBbmFseXRpY3NQcm9kdWN0W10gPSBbXTtcclxuXHJcbiAgICAgICAgICAgIHByb2R1Y3RzID0gXy5tYXAoZGF0YS5MaW5lSXRlbXMsIChsaW5lSXRlbTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYW5hbHl0aWNzUHJvZHVjdDogSUFuYWx5dGljc1Byb2R1Y3QgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWQ6IGxpbmVJdGVtLlByb2R1Y3RJZCxcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBsaW5lSXRlbS5OYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIHByaWNlOiBsaW5lSXRlbS5QcmljZSxcclxuICAgICAgICAgICAgICAgICAgICB2YXJpYW50OiB0aGlzLmJ1aWxkVmFyaWFudEZvckxpbmVJdGVtKGxpbmVJdGVtKSxcclxuICAgICAgICAgICAgICAgICAgICBxdWFudGl0eTogbGluZUl0ZW0uUXVhbnRpdHksXHJcbiAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnk6IGxpbmVJdGVtLkNhdGVnb3J5SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgYnJhbmQ6IGxpbmVJdGVtLkJyYW5kXHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnVzZVZhcmlhbnRJZFdoZW5Qb3NzaWJsZSAmJiBsaW5lSXRlbS5WYXJpYW50SWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBhbmFseXRpY3NQcm9kdWN0LmlkID0gbGluZUl0ZW0uVmFyaWFudElkO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBhbmFseXRpY3NQcm9kdWN0O1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBwcm9kdWN0cztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBtYXBBbmFseXRpY0NvdXBvbnNGcm9tT3JkZXIoZGF0YTogYW55KTogSUFuYWx5dGljc0NvdXBvbltdIHtcclxuICAgICAgICAgICAgdmFyIGNvdXBvbnM6IElBbmFseXRpY3NDb3Vwb25bXSA9IFtdO1xyXG4gICAgICAgICAgICB2YXIgYmlsbGluZ0N1cnJlbmN5ID0gZGF0YS5CaWxsaW5nQ3VycmVuY3k7XHJcbiAgICAgICAgICAgIGNvdXBvbnMgPSBfLm1hcChkYXRhLkNvdXBvbnMsIChjb3Vwb246IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFuYWx5dGljc0NvdXBvbjogSUFuYWx5dGljc0NvdXBvbiA9IHtcclxuICAgICAgICAgICAgICAgICAgICBjb2RlOiBjb3Vwb24uQ291cG9uQ29kZSxcclxuICAgICAgICAgICAgICAgICAgICBkaXNjb3VudEFtb3VudDogY291cG9uLkFtb3VudCxcclxuICAgICAgICAgICAgICAgICAgICBjdXJyZW5jeUNvZGU6IGJpbGxpbmdDdXJyZW5jeSxcclxuICAgICAgICAgICAgICAgICAgICBwcm9tb3Rpb25OYW1lOiBjb3Vwb24uUHJvbW90aW9uTmFtZVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHJldHVybiAgYW5hbHl0aWNzQ291cG9uO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjb3Vwb25zO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG1hcEFuYWx5dGljVHJhbnNhY3Rpb25Gcm9tT3JkZXIoZGF0YTogYW55KTogSUFuYWx5dGljc1RyYW5zYWN0aW9uIHtcclxuICAgICAgICAgICAgbGV0IGNoZWNrb3V0T3JpZ2luID0gQW5hbHl0aWNzUGx1Z2luLmdldENoZWNrb3V0T3JpZ2luKCk7XHJcbiAgICAgICAgICAgIGxldCBhbmFseXRpY3NUcmFuc2FjdGlvbjogSUFuYWx5dGljc1RyYW5zYWN0aW9uID0ge1xyXG4gICAgICAgICAgICAgICAgc2hpcHBpbmdUeXBlOiBkYXRhLlNoaXBwaW5nT3B0aW9ucyxcclxuICAgICAgICAgICAgICAgIGNoZWNrb3V0T3JpZ2luIDogY2hlY2tvdXRPcmlnaW5cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBhbmFseXRpY3NUcmFuc2FjdGlvbjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vQWJzdHJhY3QgbWV0aG9kc1xyXG4gICAgICAgIHB1YmxpYyB1c2VyTG9nZ2VkSW4odHlwZTogc3RyaW5nLCBzb3VyY2U6IHN0cmluZykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdOb3QgaW1wbGVtZW50ZWQgRXhjZXB0aW9uJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdXNlckNyZWF0ZWQoKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ05vdCBpbXBsZW1lbnRlZCBFeGNlcHRpb24nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyByZWNvdmVyUGFzc3dvcmQoKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ05vdCBpbXBsZW1lbnRlZCBFeGNlcHRpb24nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzaW5nbGVGYWNldENoYW5nZWQoc2VhcmNoRmlsdGVyczogSUFuYWx5dGljc1NlYXJjaEZpbHRlcnMpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignTm90IGltcGxlbWVudGVkIEV4Y2VwdGlvbicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG11bHRpRmFjZXRDaGFuZ2VkKHNlYXJjaEZpbHRlcnM6IElBbmFseXRpY3NTZWFyY2hGaWx0ZXJzKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ05vdCBpbXBsZW1lbnRlZCBFeGNlcHRpb24nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzb3J0aW5nQ2hhbmdlZChzb3J0aW5nVHlwZTogc3RyaW5nLCBwYWdlVHlwZTogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ05vdCBpbXBsZW1lbnRlZCBFeGNlcHRpb24nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBwcm9kdWN0SW1wcmVzc2lvbnMocHJvZHVjdHM6IElBbmFseXRpY3NQcm9kdWN0W10pIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignTm90IGltcGxlbWVudGVkIEV4Y2VwdGlvbicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHByb2R1Y3RDbGljayhwcm9kdWN0OiBJQW5hbHl0aWNzUHJvZHVjdCwgbGlzdE5hbWU6IHN0cmluZykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdOb3QgaW1wbGVtZW50ZWQgRXhjZXB0aW9uJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgcHJvZHVjdERldGFpbEltcHJlc3Npb25zKHByb2R1Y3RzOiBJQW5hbHl0aWNzUHJvZHVjdFtdLCBsaXN0TmFtZTogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ05vdCBpbXBsZW1lbnRlZCBFeGNlcHRpb24nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBhZGRUb0NhcnQocHJvZHVjdDogSUFuYWx5dGljc1Byb2R1Y3QsIGxpc3ROYW1lOiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignTm90IGltcGxlbWVudGVkIEV4Y2VwdGlvbicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGFkZFRvV2lzaExpc3QocHJvZHVjdDogSUFuYWx5dGljc1Byb2R1Y3QpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignTm90IGltcGxlbWVudGVkIEV4Y2VwdGlvbicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHJlbW92ZUZyb21DYXJ0KHByb2R1Y3Q6IElBbmFseXRpY3NQcm9kdWN0LCBsaXN0TmFtZTogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ05vdCBpbXBsZW1lbnRlZCBFeGNlcHRpb24nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBjaGVja291dChzdGVwOiBudW1iZXIsIHRyYW5zYWN0aW9uOiBJQW5hbHl0aWNzVHJhbnNhY3Rpb24sIHByb2R1Y3RzOiBJQW5hbHl0aWNzUHJvZHVjdFtdKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ05vdCBpbXBsZW1lbnRlZCBFeGNlcHRpb24nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBjaGVja291dE9wdGlvbihzdGVwOiBudW1iZXIpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignTm90IGltcGxlbWVudGVkIEV4Y2VwdGlvbicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHB1cmNoYXNlKG9yZGVyOiBJQW5hbHl0aWNzT3JkZXIsIHRyYW5zYWN0aW9uOiBJQW5hbHl0aWNzVHJhbnNhY3Rpb24sIHByb2R1Y3RzOiBJQW5hbHl0aWNzUHJvZHVjdFtdKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ05vdCBpbXBsZW1lbnRlZCBFeGNlcHRpb24nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBjb3Vwb25zVXNlZChvcmRlcjogSUFuYWx5dGljc0NvdXBvbikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdOb3QgaW1wbGVtZW50ZWQgRXhjZXB0aW9uJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc2hhcmVXaXNoTGlzdChkYXRhOiBhbnkpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignTm90IGltcGxlbWVudGVkIEV4Y2VwdGlvbicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHNlYXJjaEtleXdvcmRDb3JyZWN0aW9uKGRhdGE6IElBbmFseXRpY3NTZWFyY2hSZXN1bHRzKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ05vdCBpbXBsZW1lbnRlZCBFeGNlcHRpb24nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBub1Jlc3VsdHNGb3VuZChrZXl3b3JkTm90Rm91bmQ6IHN0cmluZykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdOb3QgaW1wbGVtZW50ZWQgRXhjZXB0aW9uJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTZW5kIGEgY3VzdG9tIGV2ZW50IHRvIHRoZSBhbmFseXRpY3MgcHJvdmlkZXJzIHdpdGggbXVsdGlwbGVzIGluZm9ybWF0aW9ucyBjb25jZXJuaW5nIHRoZSBldmVudFxyXG4gICAgICAgICAqIGh0dHBzOi8vc3VwcG9ydC5nb29nbGUuY29tL2FuYWx5dGljcy9hbnN3ZXIvMTAzMzA2OD9obD1lblxyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBldmVudE5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgY3VzdG9tIGV2ZW50IHRvIHNlbmQgKGUuZy4gcHJvZHVjdENsaWNrKVxyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjYXRlZ29yeSAtIFRoZSBuYW1lIHRoYXQgeW91IHN1cHBseSBhcyBhIHdheSB0byBncm91cCBvYmplY3RzIHRoYXQgeW91IHdhbnQgdG8gdHJhY2sgKGUuZy4gUHJvZHVjdClcclxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gYWN0aW9uIC0gVGhlIG5hbWUgdGhlIHR5cGUgb2YgZXZlbnQgb3IgaW50ZXJhY3Rpb24geW91IHdhbnQgdG8gdHJhY2sgZm9yIGEgcGFydGljdWxhciB3ZWIgb2JqZWN0IChlLmcuIENsaWNrKVxyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBsYWJlbCAtIFByb3ZpZGUgYWRkaXRpb25hbCBpbmZvcm1hdGlvbiBmb3IgZXZlbnRzIHRoYXQgeW91IHdhbnQgdG8gdHJhY2sgKGUuZy4gVXJsIG9mIHRoZSBjbGlja2VkIHByb2R1Y3QpXHJcbiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHZhbHVlIC0gVXNlIGl0IHRvIGFzc2lnbiBhIG51bWVyaWNhbCB2YWx1ZSB0byBhIHRyYWNrZWQgcGFnZSBvYmplY3QgKGUuZy4gUHJpY2Ugb2YgdGhlIHByb2R1Y3QpXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHNlbmRFdmVudChldmVudE5hbWU6IHN0cmluZywgY2F0ZWdvcnk6IHN0cmluZywgYWN0aW9uOiBzdHJpbmcsIGxhYmVsPzogc3RyaW5nLCB2YWx1ZT86IG51bWJlcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdOb3QgaW1wbGVtZW50ZWQgRXhjZXB0aW9uJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdHJpbVByaWNlKHByaWNlKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcHJpY2UgPT09ICdudW1iZXInKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJpY2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBwcmljZSA/IHBhcnNlRmxvYXQocHJpY2UubWF0Y2goL1tcXGRcXC5cXGRdKy9pKVswXSkgOiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHRyaW1QcmljZUFuZFVubG9jYWxpemUocHJpY2UpIHtcclxuICAgICAgICAgICAgaWYgKCFwcmljZSB8fCB0eXBlb2YgcHJpY2UgPT09ICdudW1iZXInKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJpY2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIHJlbW92ZSBhbnl0aGluZyB0aGF0IGlzIG5vdCBhIGRpZ2l0LCAnLicgb3IgJywnXHJcbiAgICAgICAgICAgIHByaWNlID0gcHJpY2UucmVwbGFjZSgvW14wLTksLl0vLCAnJyk7XHJcblxyXG4gICAgICAgICAgICAvLyBpZiBwcmljZSBjb250YWlucyBhICcuJyBpdHMgYW4gRW5nbGlzaCBwcmljZSBhbmQgeW91IGNhbiByZW1vdmUgYW55ICcsJ1xyXG4gICAgICAgICAgICBpZiAocHJpY2UuaW5kZXhPZignLicpICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgcHJpY2UgPSBwcmljZS5yZXBsYWNlKCcsJywgJycpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcHJpY2UgPSBwcmljZS5yZXBsYWNlKCcsJywgJy4nKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHByaWNlID8gcGFyc2VGbG9hdChwcmljZS5tYXRjaCgvW1xcZFxcLlxcZF0rL2kpWzBdKSA6IG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZm9ybWF0RGF0ZShkYXRlKSB7XHJcbiAgICAgICAgICAgIHZhciBkID0gbmV3IERhdGUoZGF0ZSksXHJcbiAgICAgICAgICAgICAgICBtb250aCA9ICcnICsgKGQuZ2V0TW9udGgoKSArIDEpLFxyXG4gICAgICAgICAgICAgICAgZGF5ID0gJycgKyBkLmdldERhdGUoKSxcclxuICAgICAgICAgICAgICAgIHllYXIgPSBkLmdldEZ1bGxZZWFyKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAobW9udGgubGVuZ3RoIDwgMikge1xyXG4gICAgICAgICAgICAgICAgbW9udGggPSAnMCcgKyBtb250aDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZGF5Lmxlbmd0aCA8IDIpIHtcclxuICAgICAgICAgICAgICAgIGRheSA9ICcwJyArIGRheTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFt5ZWFyLCBtb250aCwgZGF5XS5qb2luKCctJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsbnVsbCwiLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L012Yy9Db21wb3NlckNsaWVudC50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvRXZlbnRzL0V2ZW50SHViLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuL0FuYWx5dGljc1BsdWdpbi50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi9JQW5hbHl0aWNzUHJvZHVjdC50cycgLz5cclxuXHJcbmRlY2xhcmUgdmFyIGRhdGFMYXllcjogYW55O1xyXG5kZWNsYXJlIHZhciBnYTogYW55O1xyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIEdvb2dsZUFuYWx5dGljc1BsdWdpbiBleHRlbmRzIEFuYWx5dGljc1BsdWdpbiB7XHJcbiAgICAgICAgcHVibGljIGluaXRpYWxpemUoKSB7XHJcbiAgICAgICAgICAgIHN1cGVyLmluaXRpYWxpemUoKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghd2luZG93WydkYXRhTGF5ZXInXSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdUaGUgZGF0YUxheWVyIHZhcmlhYmxlIGRvZXMgbm90IGV4aXN0cy4gSGF2ZSB5b3UgaW5jbHVkZWQgdGhlIGd0bS5qcyBzY3JpcHQgPycpO1xyXG4gICAgICAgICAgICAgICAgd2luZG93WydkYXRhTGF5ZXInXSA9IFtdO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHVzZXJMb2dnZWRJbih0eXBlOiBzdHJpbmcsIHNvdXJjZTogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIGRhdGFMYXllci5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGV2ZW50OiAnYWNjb3VudExvZ2luJyxcclxuICAgICAgICAgICAgICAgIGxvZ2luVHlwZTogdHlwZSxcclxuICAgICAgICAgICAgICAgIGxvZ2luU291cmNlOiBzb3VyY2VcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdXNlckNyZWF0ZWQoKSB7XHJcbiAgICAgICAgICAgIGRhdGFMYXllci5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGV2ZW50OiAnYWNjb3VudENyZWF0ZWQnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHJlY292ZXJQYXNzd29yZCgpIHtcclxuICAgICAgICAgICAgZGF0YUxheWVyLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgZXZlbnQ6ICdwYXNzUmVjb3ZlcnknXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHNpbmdsZUZhY2V0Q2hhbmdlZChzZWFyY2hGaWx0ZXJzOiBJQW5hbHl0aWNzU2VhcmNoRmlsdGVycykge1xyXG4gICAgICAgICAgICBkYXRhTGF5ZXIucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBldmVudDogJ2ZpbHRlclJlZmluZW1lbnQnLFxyXG4gICAgICAgICAgICAgICAgZmlsdGVyTmFtZTogc2VhcmNoRmlsdGVycy5mYWNldEtleSxcclxuICAgICAgICAgICAgICAgIGZpbHRlclZhbHVlOiBzZWFyY2hGaWx0ZXJzLmZhY2V0VmFsdWUsXHJcbiAgICAgICAgICAgICAgICBzZWN0aW9uTmFtZTogc2VhcmNoRmlsdGVycy5wYWdlVHlwZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBtdWx0aUZhY2V0Q2hhbmdlZChzZWFyY2hGaWx0ZXJzOiBJQW5hbHl0aWNzU2VhcmNoRmlsdGVycykge1xyXG4gICAgICAgICAgICBkYXRhTGF5ZXIucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBldmVudDogJ2ZpbHRlclJlZmluZW1lbnQnLFxyXG4gICAgICAgICAgICAgICAgZmlsdGVyTmFtZTogc2VhcmNoRmlsdGVycy5mYWNldEtleSxcclxuICAgICAgICAgICAgICAgIGZpbHRlclZhbHVlOiBzZWFyY2hGaWx0ZXJzLmZhY2V0VmFsdWUsXHJcbiAgICAgICAgICAgICAgICBzZWN0aW9uTmFtZTogc2VhcmNoRmlsdGVycy5wYWdlVHlwZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzb3J0aW5nQ2hhbmdlZChzb3J0aW5nVHlwZTogc3RyaW5nLCBwYWdlVHlwZTogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIGRhdGFMYXllci5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGV2ZW50OiAnc29ydGluZ09wdGlvbicsXHJcbiAgICAgICAgICAgICAgICBzb3J0aW5nVHlwZTogc29ydGluZ1R5cGUsXHJcbiAgICAgICAgICAgICAgICBzZWN0aW9uTmFtZTogcGFnZVR5cGVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgcHJvZHVjdEltcHJlc3Npb25zKHByb2R1Y3RzOiBJQW5hbHl0aWNzUHJvZHVjdFtdKSB7XHJcbiAgICAgICAgICAgIGRhdGFMYXllci5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGV2ZW50OiAncHJvZHVjdEltcHJlc3Npb25zJyxcclxuICAgICAgICAgICAgICAgIGVjb21tZXJjZToge1xyXG4gICAgICAgICAgICAgICAgICAgIGltcHJlc3Npb25zOiBwcm9kdWN0c1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBwcm9kdWN0Q2xpY2socHJvZHVjdHM6IElBbmFseXRpY3NQcm9kdWN0W10sIGxpc3ROYW1lOiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgZGF0YUxheWVyLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgZXZlbnQ6ICdwcm9kdWN0Q2xpY2snLFxyXG4gICAgICAgICAgICAgICAgZWNvbW1lcmNlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xpY2s6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uRmllbGQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3Q6IGxpc3ROYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3RzOiBwcm9kdWN0c1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgcHJvZHVjdERldGFpbEltcHJlc3Npb25zKHByb2R1Y3RzOiBJQW5hbHl0aWNzUHJvZHVjdFtdLCBsaXN0TmFtZTogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIGRhdGFMYXllci5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGV2ZW50OiAncHJvZHVjdERldGFpbEltcHJlc3Npb25zJyxcclxuICAgICAgICAgICAgICAgIGVjb21tZXJjZToge1xyXG4gICAgICAgICAgICAgICAgICAgIGRldGFpbDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb25GaWVsZDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGlzdDogbGlzdE5hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgICAgLy8gJ2RldGFpbCcgYWN0aW9ucyBoYXZlIGFuIG9wdGlvbmFsIGxpc3QgcHJvcGVydHkuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3RzOiBwcm9kdWN0c1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYWRkVG9DYXJ0KHByb2R1Y3Q6IElBbmFseXRpY3NQcm9kdWN0LCBsaXN0TmFtZTogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIGRhdGFMYXllci5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGV2ZW50OiAnYWRkVG9DYXJ0JyxcclxuICAgICAgICAgICAgICAgIGVjb21tZXJjZToge1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb25GaWVsZDogeyBsaXN0OiBsaXN0TmFtZSB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0czogW3Byb2R1Y3RdXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBhZGRUb1dpc2hMaXN0KHByb2R1Y3Q6IElBbmFseXRpY3NQcm9kdWN0KSB7XHJcbiAgICAgICAgICAgIGRhdGFMYXllci5wdXNoKHtcclxuICAgICAgICAgICAgICAgICdldmVudCc6ICdhZGRUb1dpc2hMaXN0JyxcclxuICAgICAgICAgICAgICAgICdwcm9kdWN0TmFtZSc6IHByb2R1Y3QubmFtZSxcclxuICAgICAgICAgICAgICAgICdwcm9kdWN0UHJpY2UnOiBwcm9kdWN0LnByaWNlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGNvdXBvbnNVc2VkKGNvdXBvbjogSUFuYWx5dGljc0NvdXBvbikge1xyXG4gICAgICAgICAgICBkYXRhTGF5ZXIucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAnZXZlbnQnOiAnY2hlY2tvdXRDb21wbGV0ZScsXHJcbiAgICAgICAgICAgICAgICAnY291cG9uQ29kZSc6IGNvdXBvbi5jb2RlLFxyXG4gICAgICAgICAgICAgICAgJ2Rpc2NvdW50QW1vdW50JzogY291cG9uLmRpc2NvdW50QW1vdW50XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHNoYXJlV2lzaExpc3QoZGF0YTogYW55KSB7XHJcbiAgICAgICAgICAgIGRhdGFMYXllci5wdXNoKHtcclxuICAgICAgICAgICAgICAgICdldmVudCc6ICdzaGFyZU15V2lzaExpc3QnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHJlbW92ZUZyb21DYXJ0KHByb2R1Y3Q6IElBbmFseXRpY3NQcm9kdWN0LCBsaXN0TmFtZTogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIGRhdGFMYXllci5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGV2ZW50OiAncmVtb3ZlRnJvbUNhcnQnLFxyXG4gICAgICAgICAgICAgICAgZWNvbW1lcmNlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbkZpZWxkOiB7IGxpc3Q6IGxpc3ROYW1lIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3RzOiBbcHJvZHVjdF1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGNoZWNrb3V0KHN0ZXA6IG51bWJlciwgdHJhbnNhY3Rpb246IElBbmFseXRpY3NUcmFuc2FjdGlvbiwgcHJvZHVjdHM6IElBbmFseXRpY3NQcm9kdWN0W10pIHtcclxuICAgICAgICAgICAgZGF0YUxheWVyLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgZXZlbnQ6ICdjaGVja291dCcsXHJcbiAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbjogdHJhbnNhY3Rpb24sXHJcbiAgICAgICAgICAgICAgICBlY29tbWVyY2U6IHtcclxuICAgICAgICAgICAgICAgICAgICBjaGVja291dDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb25GaWVsZDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RlcDogdGhpcy5nZXRTdGVwTnVtYmVyKHN0ZXApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3RzOiBwcm9kdWN0c1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgY2hlY2tvdXRPcHRpb24oc3RlcDogbnVtYmVyKSB7XHJcbiAgICAgICAgICAgIGRhdGFMYXllci5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGV2ZW50OiAnY2hlY2tvdXRPcHRpb24nLFxyXG4gICAgICAgICAgICAgICAgZWNvbW1lcmNlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tvdXRfb3B0aW9uOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbkZpZWxkOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGVwOiB0aGlzLmdldFN0ZXBOdW1iZXIoc3RlcClcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgcHVyY2hhc2Uob3JkZXI6IElBbmFseXRpY3NPcmRlciwgdHJhbnNhY3Rpb246IElBbmFseXRpY3NUcmFuc2FjdGlvbiwgcHJvZHVjdHM6IElBbmFseXRpY3NQcm9kdWN0W10pIHtcclxuICAgICAgICAgICAgZGF0YUxheWVyLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgZXZlbnQ6ICdwdXJjaGFzZScsXHJcbiAgICAgICAgICAgICAgICB0cmFuc2FjdGlvbjogdHJhbnNhY3Rpb24sXHJcbiAgICAgICAgICAgICAgICBlY29tbWVyY2U6IHtcclxuICAgICAgICAgICAgICAgICAgICBwdXJjaGFzZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb25GaWVsZDogb3JkZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3RzOiBwcm9kdWN0c1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgbm9SZXN1bHRzRm91bmQoa2V5d29yZE5vdEZvdW5kOiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgZGF0YUxheWVyLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgJ2V2ZW50JzogJ25vUmVzdWx0cycsXHJcbiAgICAgICAgICAgICAgICAna2V5d29yZEVudGVyZWQnOiBrZXl3b3JkTm90Rm91bmRcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc2VhcmNoS2V5d29yZENvcnJlY3Rpb24oc2VhcmNoUmVzdWx0czogSUFuYWx5dGljc1NlYXJjaFJlc3VsdHMpIHtcclxuICAgICAgICAgICAgZGF0YUxheWVyLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgJ2V2ZW50JzogJ2tleXdvcmRDb3JyZWN0aW9uJyxcclxuICAgICAgICAgICAgICAgICdrZXl3b3JkQ29ycmVjdGVkJzogc2VhcmNoUmVzdWx0cy5rZXl3b3JkQ29ycmVjdGVkLFxyXG4gICAgICAgICAgICAgICAgJ2tleXdvcmRFbnRlcmVkJzogc2VhcmNoUmVzdWx0cy5rZXl3b3JkRW50ZXJlZFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzZW5kRXZlbnQoZXZlbnROYW1lOiBzdHJpbmcsIGNhdGVnb3J5OiBzdHJpbmcsIGFjdGlvbjogc3RyaW5nLCBsYWJlbD86IHN0cmluZywgdmFsdWU/OiBudW1iZXIpIHtcclxuICAgICAgICAgICAgZGF0YUxheWVyLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgZXZlbnQ6IGV2ZW50TmFtZSxcclxuICAgICAgICAgICAgICAgIGdhRXZlbnRDYXRlZ29yeTogY2F0ZWdvcnksXHJcbiAgICAgICAgICAgICAgICBnYUV2ZW50QWN0aW9uOiBhY3Rpb24sXHJcbiAgICAgICAgICAgICAgICBnYUV2ZW50TGFiZWw6IGxhYmVsLFxyXG4gICAgICAgICAgICAgICAgZ2FFdmVudFZhbHVlOiB2YWx1ZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgZ2V0U3RlcE51bWJlcihzdGVwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBzdGVwICsgMTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L0V2ZW50cy9FdmVudEh1Yi50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvQ29udHJvbGxlci50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgZXhwb3J0IGNsYXNzIEFkZFRvQ2FydE5vdGlmaWNhdGlvbkNvbnRyb2xsZXIgZXh0ZW5kcyBDb250cm9sbGVyIHtcclxuICAgICAgICBwdWJsaWMgaW5pdGlhbGl6ZSgpIHtcclxuICAgICAgICAgICAgc3VwZXIuaW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyU3Vic2NyaXB0aW9ucygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSByZWdpc3RlclN1YnNjcmlwdGlvbnMoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIuc3Vic2NyaWJlKCdsaW5lSXRlbUFkZGVkVG9DYXJ0JywgKGU6IElFdmVudEluZm9ybWF0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXlOb3RpZmljYXRpb24oZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGRpc3BsYXlOb3RpZmljYXRpb24oZTogSUV2ZW50SW5mb3JtYXRpb24pOiB2b2lkIHtcclxuICAgICAgICAgICAgbGV0IG5vdGlmaWNhdGlvbkNvbnRhaW5lciA9ICQodGhpcy5jb250ZXh0LmNvbnRhaW5lciksXHJcbiAgICAgICAgICAgICAgICBub3RpZmljYXRpb25UaW1lID0gbm90aWZpY2F0aW9uQ29udGFpbmVyLmRhdGEoJ25vdGlmaWNhdGlvblRpbWUnKSxcclxuICAgICAgICAgICAgICAgIGNhcnQgPSBlLmRhdGEuQ2FydDtcclxuXHJcbiAgICAgICAgICAgIGlmIChub3RpZmljYXRpb25UaW1lID4gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIoJ0FkZFRvQ2FydE5vdGlmaWNhdGlvbk1vZGFsJywgY2FydCk7XHJcblxyXG4gICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uQ29udGFpbmVyLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcclxuXHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlTm90aWZpY2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICB9LCBwYXJzZUludChub3RpZmljYXRpb25UaW1lLCAxMCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb25DbG9zZShlOiBJQ29udHJvbGxlckFjdGlvbkNvbnRleHQpOiB2b2lkIHtcclxuICAgICAgICAgICAgZS5ldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlTm90aWZpY2F0aW9uKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGNsb3NlTm90aWZpY2F0aW9uKCk6IHZvaWQge1xyXG4gICAgICAgICAgICAkKHRoaXMuY29udGV4dC5jb250YWluZXIpLmFkZENsYXNzKCdoaWRkZW4nKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlcHJlc2VudHMgYSBzZXQgb2YgZXZpY3Rpb24gYW5kIGV4cGlyYXRpb24gZGV0YWlscyBmb3IgYSBzcGVjaWZpYyBjYWNoZSBlbnRyeS5cclxuICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElDYWNoZVBvbGljeSB7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHNpbmNlIDE5NzAvMDEvMDEgY29ycmVzcG9uZGluZyB0byB0aGUgdGltZSB3aGVuIHRoZSBjYWNoZSBlbnRyeSBzaG91bGQgZXhwaXJlLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGFic29sdXRlRXhwaXJhdGlvbj86IG51bWJlcjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmVwcmVzZW50cyB0aGUgc2Vjb25kcyBzaW5jZSB0aGUgbGFzdCBjYWNoZSBhY2Nlc3MgYWZ0ZXIgd2hpY2ggdGhlIGNhY2hlIGVudHJ5IHNob3VsZCBleHBpcmUuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgc2xpZGluZ0V4cGlyYXRpb24/OiBudW1iZXI7XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4vSUNhY2hlUG9saWN5LnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXByZXNlbnRzIGFuIG9iamVjdCBjYWNoZSBhbmQgcHJvdmlkZXMgc2VydmljZXMgZm9yIGFjY2Vzc2luZyB0aGUgY2FjaGUuXHJcbiAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJQ2FjaGUge1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBJZiBhbiBlbnRyeSB3aXRoIHRoZSBnaXZlbiBrZXkgaXMgZm91bmQsIHRoZSBwcm9taXNlIHdpbGwgYmUgZnVsZmlsbGVkIHdpdGggdGhlIGNhY2hlZCB2YWx1ZS5cclxuICAgICAgICAgKiBJZiBhbiBlbnRyeSB3aXRoIHRoZSBnaXZlbiBrZXkgaXMgZm91bmQgYnV0IHRoZSB2YWx1ZSBpcyBudWxsLCB0aGUgcHJvbWlzZSB3aWxsIGJlIHJlamVjdGVkLlxyXG4gICAgICAgICAqIElmIGFuIGVudHJ5IHdpdGggdGhlIGdpdmVuIGtleSBpcyBub3QgZm91bmQsIHRoZSBwcm9taXNlIHdpbGwgYmUgcmVqZWN0ZWQuXHJcbiAgICAgICAgICogSWYgdGhlIGVudHJ5IGlzIGV4cGlyZWQsIHRoZSBwcm9taXNlIHdpbGwgYmUgcmVqZWN0ZWQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZ2V0PFQ+KGtleTogc3RyaW5nKTogUS5Qcm9taXNlPFQ+O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGlzIHdpbGwgaGFuZGxlIGFkZGluZyBhbmQgZWRpdGluZyBhIGNhY2hlIGVudHJ5LCB3aGljaCB3aWxsIG5ldmVyIGV4cGlyZS5cclxuICAgICAgICAgKiBPbiBzdWNjZXNzLCB0aGUgcHJvbWlzZSB3aWxsIGJlIGZ1bGZpbGxlZCB3aXRoIHRoZSBuZXdseSBjYWNoZWQgdmFsdWUuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgc2V0PFQ+KGtleTogc3RyaW5nLCB2YWx1ZTogVCk6IFEuUHJvbWlzZTxUPjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhpcyB3aWxsIGhhbmRsZSBhZGRpbmcgYW5kIGVkaXRpbmcgYW4gZW50cnkgaW4gdGhlIGNhY2hlLlxyXG4gICAgICAgICAqIFRoZSBlbnRyeSB3aWxsIGV4cGlyZSBhY2NvcmRpbmcgdG8gdGhlIGdpdmVuIHBvbGljeS5cclxuICAgICAgICAgKiBPbiBzdWNjZXNzLCB0aGUgcHJvbWlzZSB3aWxsIGJlIGZ1bGZpbGxlZCB3aXRoIHRoZSBuZXdseSBjYWNoZWQgdmFsdWUuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgc2V0PFQ+KGtleTogc3RyaW5nLCB2YWx1ZTogVCwgcG9saWN5OiBJQ2FjaGVQb2xpY3kpOiBRLlByb21pc2U8VD47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENsZWFyIHRoZSBjYWNoZSBmb3IgdGhlIHNwZWNpZmllZCBrZXlcclxuICAgICAgICAgKiBPbiBzdWNjZXNzLCB0aGUgcHJvbWlzZSB3aWxsIHJldHVybiB2b2lkXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY2xlYXIoa2V5OiBzdHJpbmcpOiBRLlByb21pc2U8dm9pZD47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENsZWFyIHRoZSBjYWNoZSBmb3IgdGhlIHNwZWNpZmllZCB0eXBlXHJcbiAgICAgICAgICogT24gc3VjY2VzcywgdGhlIHByb21pc2Ugd2lsbCByZXR1cm4gdm9pZFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGZ1bGxDbGVhcigpOiBRLlByb21pc2U8dm9pZD47XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElDYWNoZVByb3ZpZGVyIHtcclxuXHJcbiAgICAgICAgZGVmYXVsdENhY2hlOiBJQ2FjaGU7XHJcbiAgICAgICAgY3VzdG9tQ2FjaGU6IElDYWNoZTtcclxuXHJcbiAgICAgICAgbG9jYWxTdG9yYWdlOiBTdG9yYWdlO1xyXG4gICAgICAgIHNlc3Npb25TdG9yYWdlOiBTdG9yYWdlO1xyXG4gICAgfVxyXG59IiwiLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIERlZmluZXMgYSBzdG9yYWdlIGVuZ2luZSBBUEkgY2FwYWJsZSBvZiBwZXJmb3JtaW5nIGFsbCB0aGUgYmFzaWMgQ1JVRCBvcGVyYXRpb25zLlxyXG4gICAgICogVGhlIEFQSSBvcGVyYXRlcyBvbiBKYXZhc2NyaXB0IG9iamVjdHMsIGFuZCBhbGwgb2JqZWN0cyBhcmUgc3RvcmVkIGFjY29yZGluZyB0byB0aGVpciBkZWZpbmVkIHR5cGUuXHJcbiAgICAgKlxyXG4gICAgICogVGhpcyBBUEkgaGFzIGJlZW4gZGVzaWduZWQgaW4gc3VjaCBhIHdheSB0aGF0IHRoZSB1bmRlcmx5aW5nIHN0b3JhZ2UgZW5naW5lIGNvdWxkIGJlIGFueSBvZiB0aG9zZSBvZmZlcmVkIGJ5IHBvcHVsYXIgYnJvd3NlcnMsXHJcbiAgICAgKiBzdWNoIGFzIExvY2FsU3RvcmFnZSwgU2Vzc2lvblN0b3JhZ2UsIGFuZCBJbmRleGVkREJcclxuICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElTdG9yYWdlIHtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIGNsaWVudCBtdXN0IGNhbGwgdGhpcyB0byBpbml0aWFsaXplIHRoZSBzdG9yYWdlIGVuZ2luZSBiZWZvcmUgdXNpbmcgaXQuXHJcbiAgICAgICAgICogSWYgdGhlIHN0b3JhZ2UgZW5naW5lIGluaXRpYWxpemVzIHN1Y2Nlc3NmdWxseSwgdGhlIHByb21pc2Ugd2lsbCBiZSBmdWxmaWxsZWQuXHJcbiAgICAgICAgICogVGhlIHByb21pc2Ugd2lsbCBiZSByZWplY3RlZCBpZiB0aGUgc3RvcmFnZSBlbmdpbmUgY2Fubm90IGJlIHVzZWQuXHJcbiAgICAgICAgICogSXQgc2hvdWxkIGJlIHBvc3NpYmxlIHRvIGNhbGwgdGhpcyBtZXRob2QgbXVsdGlwbGUgdGltZXMsIGFuZCB0aGUgc2FtZSByZXN1bHQgd2lsbCBiZSByZXR1cm5lZCBlYWNoIHRpbWUuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgaW5pdCgpOiBRLlByb21pc2U8dm9pZD47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBjbGllbnQgbXVzdCBjYWxsIHRoaXMgdG8gaW5pdGlhbGl6ZSB0aGUgb2JqZWN0IHN0b3JlIGFzc29jaWF0ZWQgd2l0aCBhIHNwZWNpZmljIG9iamVjdCB0eXBlLlxyXG4gICAgICAgICAqIElmIHRoZSBzdG9yYWdlIGVuZ2luZSBzdXBwb3J0cyB0aGUgb2JqZWN0IHR5cGUsIHRoZSBwcm9taXNlIHdpbGwgYmUgZnVsZmlsbGVkLlxyXG4gICAgICAgICAqIFRoZSBwcm9taXNlIHdpbGwgYmUgcmVqZWN0ZWQgaWYgdGhlIG9iamVjdCB0eXBlIGNhbm5vdCBiZSBzdG9yZWQuXHJcbiAgICAgICAgICogSXQgc2hvdWxkIGJlIHBvc3NpYmxlIHRvIGNhbGwgdGhpcyBtZXRob2QgbXVsdGlwbGUgdGltZXMsIGFuZCB0aGUgc2FtZSByZXN1bHQgd2lsbCBiZSByZXR1cm5lZCBlYWNoIHRpbWUuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgaW5pdE9iamVjdFN0b3JlKHR5cGU6IHN0cmluZyk6IFEuUHJvbWlzZTx2b2lkPjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSWYgYW4gb2JqZWN0IHdpdGggYSBzcGVjaWZpYyBpZCBmb3IgYSBzcGVjaWZpYyB0eXBlIGlzIGZvdW5kLCB0aGUgcHJvbWlzZSB3aWxsIGJlIGZ1bGZpbGxlZCB3aXRoIHRoYXQgb2JqZWN0LlxyXG4gICAgICAgICAqIElmIG5vIG9iamVjdCBpcyBmb3VuZCwgdGhlIHByb21pc2Ugd2lsbCBiZSBmdWxmaWxsZWQgd2l0aCBhIG51bGwgb2JqZWN0LlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldDxUPih0eXBlOiBzdHJpbmcsIGlkOiBzdHJpbmcpOiBRLlByb21pc2U8VD47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoaXMgd2lsbCByZW1vdmUgYW4gb2JqZWN0IHdpdGggYSBzcGVjaWZpYyBpZCBmb3IgYSBzcGVjaWZpYyB0eXBlLlxyXG4gICAgICAgICAqIElmIG5vIG9iamVjdCBpcyBmb3VuZCwgdGhlIHByb21pc2Ugd2lsbCBiZSBmdWxmaWxsZWQuXHJcbiAgICAgICAgICogSWYgYW4gb2JqZWN0IGlzIGZvdW5kIGFuZCByZW1vdmVkLCB0aGUgcHJvbWlzZSB3aWxsIGJlIGZ1bGZpbGxlZC5cclxuICAgICAgICAgKi9cclxuICAgICAgICByZW1vdmUodHlwZTogc3RyaW5nLCBpZDogc3RyaW5nKTogUS5Qcm9taXNlPHZvaWQ+O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGlzIHdpbGwgcmVtb3ZlIHRoZSBzcGVjaWZpYyB0eXBlXHJcbiAgICAgICAgICogSWYgbm8gdHlwZSBpcyBmb3VuZCwgdGhlIHByb21pc2Ugd2lsbCBiZSBmdWxmaWxsZWQuXHJcbiAgICAgICAgICogSWYgYSB0eXBlIGlzIGZvdW5kIGFuZCByZW1vdmVkLCB0aGUgcHJvbWlzZSB3aWxsIGJlIGZ1bGZpbGxlZC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBmdWxsUmVtb3ZlKHR5cGU6IHN0cmluZyk6IFEuUHJvbWlzZTx2b2lkPjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhpcyB3aWxsIGhhbmRsZSBhZGRpbmcgYW5kIHVwZGF0aW5nIG9iamVjdHMgb2YgYSBzcGVjaWZpYyB0eXBlLlxyXG4gICAgICAgICAqIE9uIHN1Y2Nlc3MsIHRoZSBwcm9taXNlIHdpbGwgYmUgZnVsZmlsbGVkLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHNldDxUPih0eXBlOiBzdHJpbmcsIGl0ZW06IElTdG9yYWdlSXRlbTxUPik6IFEuUHJvbWlzZTx2b2lkPjtcclxuICAgIH1cclxufVxyXG4iLCJtb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElTdG9yYWdlSXRlbTxUPiB7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSB1bmlxdWUgaWRlbnRpZmllciBvZiB0aGUgb2JqZWN0IHN0b3JlZCBvciB0byBiZSBzdG9yZWQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgaWQ6IHN0cmluZztcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIG9iamVjdCBzdG9yZWQgb3IgdG8gYmUgc3RvcmVkLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHZhbHVlOiBUO1xyXG4gICAgfVxyXG59XHJcbiIsIm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG5cclxuICAgIGV4cG9ydCBlbnVtIENhY2hlRXJyb3Ige1xyXG5cclxuICAgICAgICBOb3RGb3VuZCxcclxuICAgICAgICBFeHBpcmVkXHJcbiAgICB9XHJcbn1cclxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi9JQ2FjaGVQb2xpY3kudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElDYWNoZUl0ZW08VD4ge1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZXByZXNlbnRzIHRoZSB2YWx1ZSB0byBiZSBjYWNoZWQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdmFsdWU6IFQ7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJlcHJlc2VudHMgYSBzZXQgb2YgZXZpY3Rpb24gYW5kIGV4cGlyYXRpb24gZGV0YWlscyBmb3IgYSBzcGVjaWZpYyBjYWNoZSBlbnRyeS5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwb2xpY3k6IElDYWNoZVBvbGljeTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgc2luY2UgMTk3MC8wMS8wMSBjb3JyZXNwb25kaW5nIHRvIHRoZSB0aW1lIHRoZSBjYWNoZSBpdGVtIHdhcyBsYXN0IGFjY2Vzc2VkLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGxhc3RBY2Nlc3NlZDogbnVtYmVyO1xyXG4gICAgfVxyXG59XHJcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuLy4uL1N0b3JhZ2UvSVN0b3JhZ2UudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4vLi4vU3RvcmFnZS9JU3RvcmFnZUl0ZW0udHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4vQ2FjaGVFcnJvci50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi9JQ2FjaGUudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4vSUNhY2hlSXRlbS50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi9JQ2FjaGVQb2xpY3kudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuXHJcbiAgICB2YXIgTm9FeHBpcmF0aW9uUG9saWN5OiBJQ2FjaGVQb2xpY3kgPSB7IH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUaGlzIGNhY2hlIHVzZXMgYSBjbGllbnQtc2lkZSBzdG9yYWdlIGVuZ2luZSB0byBwcm92aWRlIG9iamVjdCBjYWNoaW5nXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBjbGFzcyBTdG9yYWdlQmFzZWRDYWNoZSBpbXBsZW1lbnRzIE9yY2tlc3RyYS5Db21wb3Nlci5JQ2FjaGUge1xyXG5cclxuICAgICAgICBwcml2YXRlIF9zdG9yYWdlSW5pdGlhbGl6aW5nOiBRLlByb21pc2U8dm9pZD47XHJcbiAgICAgICAgcHJpdmF0ZSBfc3RvcmFnZTogSVN0b3JhZ2U7XHJcbiAgICAgICAgcHJpdmF0ZSBfdHlwZTogc3RyaW5nO1xyXG5cclxuICAgICAgICBjb25zdHJ1Y3RvcihzdG9yYWdlOiBJU3RvcmFnZSwgdHlwZTogc3RyaW5nKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXN0b3JhZ2UpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIHN0b3JhZ2UgaXMgcmVxdWlyZWQnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCF0eXBlKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSB0eXBlIGlzIHJlcXVpcmVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3R5cGUgPSB0eXBlO1xyXG4gICAgICAgICAgICB0aGlzLl9zdG9yYWdlID0gc3RvcmFnZTtcclxuICAgICAgICAgICAgdGhpcy5fc3RvcmFnZUluaXRpYWxpemluZyA9XHJcbiAgICAgICAgICAgICAgICBzdG9yYWdlLmluaXQoKS50aGVuKCgpID0+IHN0b3JhZ2UuaW5pdE9iamVjdFN0b3JlKHRoaXMuX3R5cGUpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBnZXQ8VD4oa2V5OiBzdHJpbmcpOiBRLlByb21pc2U8VD4ge1xyXG5cclxuICAgICAgICAgICAgaWYgKCFrZXkpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIGtleSBpcyByZXF1aXJlZCcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc3RvcmFnZUluaXRpYWxpemluZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHRoaXMuX3N0b3JhZ2UuZ2V0PElDYWNoZUl0ZW08VD4+KHRoaXMuX3R5cGUsIGtleSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oY2FjaGVJdGVtID0+IHRoaXMudmFsaWRhdGUoa2V5LCBjYWNoZUl0ZW0pLnRoZW4oKCkgPT4gY2FjaGVJdGVtLnZhbHVlKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHZhbGlkYXRlPFQ+KGtleTogc3RyaW5nLCBpdGVtOiBJQ2FjaGVJdGVtPFQ+KTogUS5Qcm9taXNlPHZvaWQ+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBRLlByb21pc2U8dm9pZD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChfLmlzTnVsbChpdGVtKSB8fCBfLmlzTnVsbChpdGVtLnZhbHVlKSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZWplY3QoQ2FjaGVFcnJvci5Ob3RGb3VuZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0aGlzLmlzRXhwaXJlZChpdGVtKSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zdG9yYWdlSW5pdGlhbGl6aW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHRoaXMuX3N0b3JhZ2UucmVtb3ZlKHRoaXMuX3R5cGUsIGtleSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5kb25lKCgpID0+IHJlamVjdChDYWNoZUVycm9yLkV4cGlyZWQpLCByZWFzb24gPT4gcmVqZWN0KHJlYXNvbikpO1xyXG5cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGl0ZW0ubGFzdEFjY2Vzc2VkID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzdG9yYWdlSXRlbTogSVN0b3JhZ2VJdGVtPElDYWNoZUl0ZW08VD4+ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDoga2V5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogaXRlbVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3N0b3JhZ2VJbml0aWFsaXppbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gdGhpcy5fc3RvcmFnZS5zZXQodGhpcy5fdHlwZSwgc3RvcmFnZUl0ZW0pKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZG9uZSgoKSA9PiByZXNvbHZlKHZvaWQgMCksIHJlYXNvbiA9PiByZWplY3QocmVhc29uKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBpc0V4cGlyZWQ8VD4oaXRlbTogSUNhY2hlSXRlbTxUPik6IGJvb2xlYW4ge1xyXG5cclxuICAgICAgICAgICAgdmFyIGV4cGlyYXRpb25UaW1lOiBudW1iZXIsIG5vdzogbnVtYmVyID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoaXRlbS5wb2xpY3kgJiYgaXRlbS5wb2xpY3kuYWJzb2x1dGVFeHBpcmF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBleHBpcmF0aW9uVGltZSA9IGl0ZW0ucG9saWN5LmFic29sdXRlRXhwaXJhdGlvbjtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChpdGVtLnBvbGljeSAmJiBpdGVtLnBvbGljeS5zbGlkaW5nRXhwaXJhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgZXhwaXJhdGlvblRpbWUgPSBpdGVtLmxhc3RBY2Nlc3NlZCArIChpdGVtLnBvbGljeS5zbGlkaW5nRXhwaXJhdGlvbiAqIDEwMDApO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZXhwaXJhdGlvblRpbWUgPCBub3c7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc2V0PFQ+KGtleTogc3RyaW5nLCB2YWx1ZTogVCwgcG9saWN5PzogSUNhY2hlUG9saWN5LCB0eXBlPzogc3RyaW5nKTogUS5Qcm9taXNlPFQ+IHtcclxuXHJcbiAgICAgICAgICAgIGlmICgha2V5KSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBrZXkgaXMgcmVxdWlyZWQnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIHR5cGVJdGVtID0gIXR5cGUgPyB0aGlzLl90eXBlIDogdHlwZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBjYWNoZUl0ZW06IElDYWNoZUl0ZW08VD4gPSB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogdmFsdWUsXHJcbiAgICAgICAgICAgICAgICBwb2xpY3k6ICFwb2xpY3kgPyBOb0V4cGlyYXRpb25Qb2xpY3kgOiBwb2xpY3ksXHJcbiAgICAgICAgICAgICAgICBsYXN0QWNjZXNzZWQ6IG5ldyBEYXRlKCkuZ2V0VGltZSgpXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB2YXIgc3RvcmFnZUl0ZW06IElTdG9yYWdlSXRlbTxJQ2FjaGVJdGVtPFQ+PiA9IHtcclxuICAgICAgICAgICAgICAgIGlkOiBrZXksXHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogY2FjaGVJdGVtXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc3RvcmFnZUluaXRpYWxpemluZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHRoaXMuX3N0b3JhZ2Uuc2V0KHR5cGVJdGVtLCBzdG9yYWdlSXRlbSkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gdmFsdWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGNsZWFyKGtleTogc3RyaW5nKTogUS5Qcm9taXNlPHZvaWQ+IHtcclxuXHJcbiAgICAgICAgICAgIGlmICgha2V5KSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBrZXkgaXMgcmVxdWlyZWQnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N0b3JhZ2VJbml0aWFsaXppbmdcclxuICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHRoaXMuX3N0b3JhZ2UucmVtb3ZlKHRoaXMuX3R5cGUsIGtleSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGZ1bGxDbGVhcigpOiBRLlByb21pc2U8dm9pZD4ge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N0b3JhZ2VJbml0aWFsaXppbmdcclxuICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHRoaXMuX3N0b3JhZ2UuZnVsbFJlbW92ZSh0aGlzLl90eXBlKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuL0lTdG9yYWdlLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuL0lTdG9yYWdlSXRlbS50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBCYWNraW5nU3RvcmFnZSBpbXBsZW1lbnRzIE9yY2tlc3RyYS5Db21wb3Nlci5JU3RvcmFnZSB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgX2lzSW5pdGlhbGl6ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgICAgICBwcml2YXRlIF9pbml0aWFsaXplZE9iamVjdFN0b3JlcyA9IHt9O1xyXG5cclxuICAgICAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIF9zdG9yYWdlOiBTdG9yYWdlKSB7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgaW5pdCgpOiBRLlByb21pc2U8dm9pZD4ge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFEuZmNhbGwoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5faXNJbml0aWFsaXplZCA9IHRydWU7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGluaXRPYmplY3RTdG9yZSh0eXBlOiBzdHJpbmcpOiBRLlByb21pc2U8dm9pZD4ge1xyXG5cclxuICAgICAgICAgICAgaWYgKCF0eXBlKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSB0eXBlIGlzIHJlcXVpcmVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBRLmZjYWxsKCgpID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2lzSW5pdGlhbGl6ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBsb2NhbCBzdG9yYWdlIGhhcyBub3QgYmVlbiBpbml0aWFsaXplZCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuaW5pdE9iamVjdFN0b3JlSW1wbCh0eXBlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGluaXRPYmplY3RTdG9yZUltcGwodHlwZTogc3RyaW5nKTogdm9pZCB7XHJcblxyXG4gICAgICAgICAgICB2YXIgb2JqZWN0U3RvcmU6IGFueSA9IHRoaXMuZ2V0T2JqZWN0U3RvcmUodHlwZSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIW9iamVjdFN0b3JlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgb2JqZWN0U3RvcmUgPSB7fTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0T2JqZWN0U3RvcmUodHlwZSwgb2JqZWN0U3RvcmUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9pbml0aWFsaXplZE9iamVjdFN0b3Jlc1t0eXBlXSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZ2V0PFQ+KHR5cGU6IHN0cmluZywgaWQ6IHN0cmluZyk6IFEuUHJvbWlzZTxUPiB7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXR5cGUpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIHR5cGUgaXMgcmVxdWlyZWQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIWlkKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBpZCBpcyByZXF1aXJlZCcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gUS5mY2FsbDxUPigoKSA9PiB7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9pc0luaXRpYWxpemVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgbG9jYWwgc3RvcmFnZSBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5faW5pdGlhbGl6ZWRPYmplY3RTdG9yZXNbdHlwZV0pIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBvYmplY3Qgc3RvcmUgJyArIHR5cGUgKyAnIGhhcyBub3QgYmVlbiBpbml0aWFsaXplZCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEltcGw8VD4odHlwZSwgaWQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgZ2V0SW1wbDxUPih0eXBlOiBzdHJpbmcsIGlkOiBzdHJpbmcpOiBUIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBvYmplY3RTdG9yZTogYW55ID0gdGhpcy5nZXRPYmplY3RTdG9yZSh0eXBlKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChvYmplY3RTdG9yZS5oYXNPd25Qcm9wZXJ0eShpZCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBvYmplY3RTdG9yZVtpZF07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHJlbW92ZSh0eXBlOiBzdHJpbmcsIGlkOiBzdHJpbmcpOiBRLlByb21pc2U8dm9pZD4ge1xyXG5cclxuICAgICAgICAgICAgaWYgKCF0eXBlKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSB0eXBlIGlzIHJlcXVpcmVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCFpZCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgaWQgaXMgcmVxdWlyZWQnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFEuZmNhbGw8dm9pZD4oKCkgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5faXNJbml0aWFsaXplZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIGxvY2FsIHN0b3JhZ2UgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2luaXRpYWxpemVkT2JqZWN0U3RvcmVzW3R5cGVdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgb2JqZWN0IHN0b3JlICcgKyB0eXBlICsgJyBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbW92ZUltcGwodHlwZSwgaWQpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBmdWxsUmVtb3ZlKHR5cGU6IHN0cmluZyk6IFEuUHJvbWlzZTx2b2lkPiB7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXR5cGUpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIHR5cGUgaXMgcmVxdWlyZWQnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFEuZmNhbGw8dm9pZD4oKCkgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5faXNJbml0aWFsaXplZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIGxvY2FsIHN0b3JhZ2UgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2luaXRpYWxpemVkT2JqZWN0U3RvcmVzW3R5cGVdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgb2JqZWN0IHN0b3JlICcgKyB0eXBlICsgJyBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmZ1bGxSZW1vdmVJbXBsKHR5cGUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgcmVtb3ZlSW1wbCh0eXBlOiBzdHJpbmcsIGlkOiBzdHJpbmcpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBvYmplY3RTdG9yZTogYW55ID0gdGhpcy5nZXRPYmplY3RTdG9yZSh0eXBlKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChvYmplY3RTdG9yZS5oYXNPd25Qcm9wZXJ0eShpZCkpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBkZWxldGUgb2JqZWN0U3RvcmVbaWRdO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRPYmplY3RTdG9yZSh0eXBlLCBvYmplY3RTdG9yZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgZnVsbFJlbW92ZUltcGwodHlwZTogc3RyaW5nKTogdm9pZCB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNldE9iamVjdFN0b3JlKHR5cGUsIG51bGwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHNldDxUPih0eXBlOiBzdHJpbmcsIGl0ZW06IElTdG9yYWdlSXRlbTxUPik6IFEuUHJvbWlzZTx2b2lkPiB7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXR5cGUpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIHR5cGUgaXMgcmVxdWlyZWQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIWl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIGl0ZW0gaXMgcmVxdWlyZWQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIWl0ZW0uaWQpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIGl0ZW0gaWQgaXMgcmVxdWlyZWQnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFEuZmNhbGw8dm9pZD4oKCkgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5faXNJbml0aWFsaXplZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIGxvY2FsIHN0b3JhZ2UgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2luaXRpYWxpemVkT2JqZWN0U3RvcmVzW3R5cGVdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgb2JqZWN0IHN0b3JlICcgKyB0eXBlICsgJyBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldEltcGw8VD4odHlwZSwgaXRlbSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzZXRJbXBsPFQ+KHR5cGU6IHN0cmluZywgaXRlbTogSVN0b3JhZ2VJdGVtPFQ+KTogdm9pZCB7XHJcblxyXG4gICAgICAgICAgICB2YXIgb2JqZWN0U3RvcmU6IGFueSA9IHRoaXMuZ2V0T2JqZWN0U3RvcmUodHlwZSk7XHJcbiAgICAgICAgICAgIG9iamVjdFN0b3JlW2l0ZW0uaWRdID0gaXRlbS52YWx1ZTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2V0T2JqZWN0U3RvcmUodHlwZSwgb2JqZWN0U3RvcmUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXRPYmplY3RTdG9yZSh0eXBlOiBzdHJpbmcpOiBhbnkge1xyXG5cclxuICAgICAgICAgICAgdmFyIG9iamVjdFN0b3JlU3RyaW5nOiBzdHJpbmcgPSB0aGlzLl9zdG9yYWdlLmdldEl0ZW0odHlwZSk7XHJcbiAgICAgICAgICAgIHZhciBvYmplY3RTdG9yZTogYW55ID0gSlNPTi5wYXJzZShvYmplY3RTdG9yZVN0cmluZyk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gb2JqZWN0U3RvcmU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHNldE9iamVjdFN0b3JlKHR5cGU6IHN0cmluZywgb2JqZWN0U3RvcmU6IGFueSkge1xyXG5cclxuICAgICAgICAgICAgdmFyIG9iamVjdFN0b3JlU3RyaW5nOiBzdHJpbmcgPSBKU09OLnN0cmluZ2lmeShvYmplY3RTdG9yZSk7XHJcbiAgICAgICAgICAgIHRoaXMuX3N0b3JhZ2Uuc2V0SXRlbSh0eXBlLCBvYmplY3RTdG9yZVN0cmluZyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgZXhwb3J0IGVudW0gU3RvcmFnZVR5cGUge1xyXG4gICAgICAgIGxvY2FsU3RvcmFnZSxcclxuICAgICAgICBzZXNzaW9uU3RvcmFnZVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuL1N0b3JhZ2VUeXBlLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICB2YXIgbG9jYWxTdG9yYWdlUG9seUZpbGw6IGFueTtcclxuICAgIHZhciBzZXNzaW9uU3RvcmFnZVBvbHlGaWxsOiBhbnk7XHJcbiAgICBleHBvcnQgY2xhc3MgU3RvcmFnZVBvbHlmaWxsIHtcclxuXHJcbiAgICAgICAgc3RhdGljIGNyZWF0ZSh3aW5kb3dIYW5kbGU6IFdpbmRvdywgc3RvcmFnZVR5cGUgOiBTdG9yYWdlVHlwZSk6IFN0b3JhZ2Uge1xyXG4gICAgICAgICAgICB2YXIgbGFzdFN0b3JhZ2U6IGFueSxcclxuICAgICAgICAgICAgICAgIGxhc3RTdG9yYWdlS2V5OiBzdHJpbmcsXHJcbiAgICAgICAgICAgICAgICBzdG9yYWdlUG9seUZpbGw6IGFueTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoc3RvcmFnZVR5cGUgPT09IHZvaWQgMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdTdG9yYWdlUG9seWZpbGxFeGNlcHRpb24nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYEEgc3RvcmFnZSB0eXBlIG11c3QgYmUgc3BlY2lmaWVkIGluIHRoZSBzdG9yYWdlIHBvbHlmaWxsIGNyZWF0ZSBtZXRob2QuYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgc3dpdGNoIChzdG9yYWdlVHlwZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBTdG9yYWdlVHlwZS5sb2NhbFN0b3JhZ2U6XHJcbiAgICAgICAgICAgICAgICAgICAgc3RvcmFnZVBvbHlGaWxsID0gbG9jYWxTdG9yYWdlUG9seUZpbGw7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFN0b3JhZ2VUeXBlLnNlc3Npb25TdG9yYWdlOlxyXG4gICAgICAgICAgICAgICAgICAgIHN0b3JhZ2VQb2x5RmlsbCA9IHNlc3Npb25TdG9yYWdlUG9seUZpbGw7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChzdG9yYWdlUG9seUZpbGwgIT09IHZvaWQgMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0b3JhZ2VQb2x5RmlsbDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gcGVyc2lzdChzdG9yYWdlOiBhbnkpIHtcclxuICAgICAgICAgICAgICAgIHdpbmRvd0hhbmRsZS5uYW1lID0gSlNPTi5zdHJpbmdpZnkoc3RvcmFnZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdldFN0b3JhZ2VLZXkoa2V5OiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBrZXkuY29uY2F0KHN0b3JhZ2VUeXBlLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRTdG9yYWdlQXBpKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICBjbGVhcjogZnVuY3Rpb24oKTogdm9pZCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrZXk6IHN0cmluZztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE9iamVjdC5rZXlzKHN0b3JhZ2VQb2x5RmlsbCkuZm9yRWFjaCgoa2V5OiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdG9yYWdlUG9seUZpbGwuaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBzdG9yYWdlUG9seUZpbGxba2V5XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJzaXN0KHN0b3JhZ2VQb2x5RmlsbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZ2V0SXRlbTogZnVuY3Rpb24oa2V5OiBzdHJpbmcpOiBhbnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXkgPSBnZXRTdG9yYWdlS2V5KGtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdG9yYWdlUG9seUZpbGxba2V5XSB8fCBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGtleTogZnVuY3Rpb24oaW5kZXg6IG51bWJlcik6IHN0cmluZyB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrZXlzOiBzdHJpbmdbXSA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXlzID0gT2JqZWN0LmtleXMoc3RvcmFnZVBvbHlGaWxsKS5maWx0ZXIoKHZhbHVlOiBzdHJpbmcsIGluZGV4VG9NYXRjaDogbnVtYmVyKSA9PiBpbmRleFRvTWF0Y2ggPT09IGluZGV4KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBrZXlzLmxlbmd0aCA+IDAgPyBrZXlzWzBdIDogbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZW1vdmVJdGVtOiBmdW5jdGlvbihrZXk6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXkgPSBnZXRTdG9yYWdlS2V5KGtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChrZXkgaW4gc3RvcmFnZVBvbHlGaWxsICYmIHN0b3JhZ2VQb2x5RmlsbC5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgc3RvcmFnZVBvbHlGaWxsW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZXJzaXN0KHN0b3JhZ2VQb2x5RmlsbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgICAgICBzZXRJdGVtKGtleTogc3RyaW5nLCBkYXRhOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAga2V5ID0gZ2V0U3RvcmFnZUtleShrZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdG9yYWdlUG9seUZpbGxba2V5XSA9IGRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcnNpc3Qoc3RvcmFnZVBvbHlGaWxsKTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgICAgICBkaXNwb3NlOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGVyc2lzdChzdG9yYWdlUG9seUZpbGwpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHN0b3JhZ2VQb2x5RmlsbCA9IE9iamVjdC5jcmVhdGUoZ2V0U3RvcmFnZUFwaSgpKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh3aW5kb3dIYW5kbGUubmFtZSAhPT0gJycpIHtcclxuICAgICAgICAgICAgICAgIGxhc3RTdG9yYWdlID0gSlNPTi5wYXJzZSh3aW5kb3dIYW5kbGUubmFtZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChsYXN0U3RvcmFnZUtleSBpbiBsYXN0U3RvcmFnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsYXN0U3RvcmFnZS5oYXNPd25Qcm9wZXJ0eShsYXN0U3RvcmFnZUtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmFnZVBvbHlGaWxsW2xhc3RTdG9yYWdlS2V5XSA9IGxhc3RTdG9yYWdlW2xhc3RTdG9yYWdlS2V5XTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHN3aXRjaCAoc3RvcmFnZVR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgU3RvcmFnZVR5cGUubG9jYWxTdG9yYWdlOlxyXG4gICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZVBvbHlGaWxsID0gc3RvcmFnZVBvbHlGaWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBsb2NhbFN0b3JhZ2VQb2x5RmlsbDtcclxuICAgICAgICAgICAgICAgIGNhc2UgU3RvcmFnZVR5cGUuc2Vzc2lvblN0b3JhZ2U6XHJcbiAgICAgICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2VQb2x5RmlsbCA9IHN0b3JhZ2VQb2x5RmlsbDtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gc2Vzc2lvblN0b3JhZ2VQb2x5RmlsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cclxuXHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9TdG9yYWdlUG9seWZpbGwudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9TdG9yYWdlVHlwZS50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG5cclxuICAgIC8vV2UgbmVlZCB0byBkZWZlciB0aGUgZXZhbHVhdGlvbiBvZiB0aGUgc3RvcmFnZSBzaW5jZSBvbiBnb29nbGUgY2hyb21lIC8gaW5jb2duaXRvIG1vZGUsXHJcbiAgICAvL2l0IHJhaXNlIGEgc2VjdXJpdHkgZXJyb3IgZXhjZXB0aW9uIC8gYWNjZXNzIGRlbmllZFxyXG4gICAgZnVuY3Rpb24gZ2V0U3RvcmFnZShzdG9yYWdlQ2FsbGJhY2sgOiAoKSA9PiBTdG9yYWdlLCBzdG9yYWdlVHlwZSA6IFN0b3JhZ2VUeXBlLCB3aW5kb3cgOiBXaW5kb3cpOiBTdG9yYWdlIHtcclxuICAgICAgICB2YXIgZHVtbXlEYXRhOiBzdHJpbmcgPSAnX19jb21wb3Nlcl9fZGF0YV9fYmlkb25fXyc7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdmFyIHN0b3JhZ2VUb1VzZSA9IHN0b3JhZ2VDYWxsYmFjaygpO1xyXG4gICAgICAgICAgICBpZiAoc3RvcmFnZVRvVXNlICE9PSB2b2lkIDApIHtcclxuICAgICAgICAgICAgICAgIC8vSGFjayB0byBzdXBwb3J0IHNhZmFyaSBicm93c2VyIC8gYW5vbnltb3VzIG1vZGUgc2luY2UgaXQgc3VwcG9ydCBsb2NhbCBzdG9yYWdlIGJ1dCB3aXRoIGEgbWF4IHNpemUgb2YgMGtiLFxyXG4gICAgICAgICAgICAgICAgLy90aHVzIHdlIHRyeSB0byBpbnNlcnQgZHVtbXkgZGF0YSB0byBjaGVjayBpZiBpdCBicmVhayBvciBub3QuXHJcbiAgICAgICAgICAgICAgICBzdG9yYWdlVG9Vc2Uuc2V0SXRlbShkdW1teURhdGEsIGR1bW15RGF0YSk7XHJcbiAgICAgICAgICAgICAgICBzdG9yYWdlVG9Vc2UucmVtb3ZlSXRlbShkdW1teURhdGEpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0b3JhZ2VUb1VzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1N0b3JhZ2UgaXMgbm90IHN1cHBvcnRlZCBvciBpcyBkaXNhYmxlZC4gd2luZG93Lm5hbWUgd2lsbCBiZSB1c2VkIGluc3RlYWQuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gU3RvcmFnZVBvbHlmaWxsLmNyZWF0ZSh3aW5kb3csIHN0b3JhZ2VUeXBlKTtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgdmFyIFN0b3JhZ2VGYWN0b3J5ID0ge1xyXG4gICAgICAgIGNyZWF0ZTogZnVuY3Rpb24gKHN0b3JhZ2VUeXBlOiBTdG9yYWdlVHlwZSwgd2luZG93OiBXaW5kb3cpOiBTdG9yYWdlIHtcclxuXHJcbiAgICAgICAgICAgIHN3aXRjaCAoc3RvcmFnZVR5cGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFN0b3JhZ2VUeXBlLmxvY2FsU3RvcmFnZTpcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdldFN0b3JhZ2UoKCkgPT4gd2luZG93LmxvY2FsU3RvcmFnZSwgc3RvcmFnZVR5cGUsIHdpbmRvdyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgU3RvcmFnZVR5cGUuc2Vzc2lvblN0b3JhZ2U6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBnZXRTdG9yYWdlKCgpID0+IHdpbmRvdy5zZXNzaW9uU3RvcmFnZSwgc3RvcmFnZVR5cGUsIHdpbmRvdyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdTdG9yYWdlVHlwZUV4Y2VwdGlvbicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiBgVGhlIHN0b3JhZ2UgdHlwZSBcIiR7c3RvcmFnZVR5cGV9XCIgaXMgY3VycmVudGx5IG5vdCBzdXBwb3J0ZWQuYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cclxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9JQ2FjaGUudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9JQ2FjaGVQcm92aWRlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL1N0b3JhZ2VCYXNlZENhY2hlLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uL1N0b3JhZ2UvSVN0b3JhZ2UudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vU3RvcmFnZS9CYWNraW5nU3RvcmFnZS50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vU3RvcmFnZS9TdG9yYWdlRmFjdG9yeS50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vU3RvcmFnZS9TdG9yYWdlVHlwZS50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBDYWNoZVByb3ZpZGVyIGltcGxlbWVudHMgSUNhY2hlUHJvdmlkZXIge1xyXG5cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBkZWZhdWx0Q2FjaGVLZXkgOiBzdHJpbmcgPSAnb2MtY2FjaGUnO1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGN1c3RvbUNhY2hlS2V5IDogc3RyaW5nID0gJ2NvbXBvc2VyLXNpZ25JbkhlYWRlckNhY2hlJztcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBfaW5zdGFuY2U6IE9yY2tlc3RyYS5Db21wb3Nlci5JQ2FjaGVQcm92aWRlciA9IG5ldyBDYWNoZVByb3ZpZGVyKCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyB3aW5kb3c6IFdpbmRvdyA9IHdpbmRvdztcclxuICAgICAgICBwdWJsaWMgZGVmYXVsdENhY2hlOiBJQ2FjaGU7XHJcbiAgICAgICAgcHVibGljIGN1c3RvbUNhY2hlOiBJQ2FjaGU7XHJcbiAgICAgICAgcHVibGljIGxvY2FsU3RvcmFnZTogU3RvcmFnZTtcclxuICAgICAgICBwdWJsaWMgc2Vzc2lvblN0b3JhZ2U6IFN0b3JhZ2U7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW5zdGFuY2UoKTogT3Jja2VzdHJhLkNvbXBvc2VyLklDYWNoZVByb3ZpZGVyIHtcclxuICAgICAgICAgICAgcmV0dXJuIENhY2hlUHJvdmlkZXIuX2luc3RhbmNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgICAgIGlmIChDYWNoZVByb3ZpZGVyLl9pbnN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvcjogSW5zdGFudGlhdGlvbiBmYWlsZWQ6IFVzZSBDYWNoZVByb3ZpZGVyLmluc3RhbmNlKCkgaW5zdGVhZCBvZiBuZXcuJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuZGVmYXVsdENhY2hlID0gdGhpcy5nZXREZWZhdWx0Q2FjaGUoKTtcclxuICAgICAgICAgICAgdGhpcy5jdXN0b21DYWNoZSA9IHRoaXMuZ2V0Q3VzdG9tQ2FjaGUoKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMubG9jYWxTdG9yYWdlID0gdGhpcy5nZXRMb2NhbFN0b3JhZ2UoKTtcclxuICAgICAgICAgICAgdGhpcy5zZXNzaW9uU3RvcmFnZSA9IHRoaXMuZ2V0U2Vzc2lvblN0b3JhZ2UoKTtcclxuXHJcbiAgICAgICAgICAgIENhY2hlUHJvdmlkZXIuX2luc3RhbmNlID0gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBnZXRDYWNoZShjYWNoZUtleTogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIHZhciBiYWNraW5nU3RvcmFnZSA9IHRoaXMuZ2V0TG9jYWxTdG9yYWdlKCk7XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgU3RvcmFnZUJhc2VkQ2FjaGUobmV3IEJhY2tpbmdTdG9yYWdlKGJhY2tpbmdTdG9yYWdlKSwgY2FjaGVLZXkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGdldERlZmF1bHRDYWNoZSgpOiBJQ2FjaGUge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDYWNoZShDYWNoZVByb3ZpZGVyLmRlZmF1bHRDYWNoZUtleSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZ2V0Q3VzdG9tQ2FjaGUoKTogSUNhY2hlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q2FjaGUoQ2FjaGVQcm92aWRlci5jdXN0b21DYWNoZUtleSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGdldExvY2FsU3RvcmFnZSgpOiBTdG9yYWdlIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN0b3JhZ2VGYWN0b3J5LmNyZWF0ZShTdG9yYWdlVHlwZS5sb2NhbFN0b3JhZ2UsIHdpbmRvdyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGdldFNlc3Npb25TdG9yYWdlKCk6IFN0b3JhZ2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gU3RvcmFnZUZhY3RvcnkuY3JlYXRlKFN0b3JhZ2VUeXBlLnNlc3Npb25TdG9yYWdlLCB3aW5kb3cpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXBhcmF0ZXMgdGhlIGxvZ2ljIHRoYXQgcmV0cmlldmVzIHRoZSBkYXRhIGFuZCBtYXBzIGl0IHRvIHRoZSBlbnRpdHkgbW9kZWwgZnJvbSB0aGUgYXBwbGljYXRpb24gc2VydmljZXMgdGhhdCBhY3RzIG9uIHRoZSBtb2RlbC5cclxuICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElDYXJ0UmVwb3NpdG9yeSB7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldCB0aGUgY2FydCBvZiB0aGUgY3VycmVudCBjdXN0b21lci5cclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXRDYXJ0KCk6IFEuUHJvbWlzZTxhbnk+O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBZGQgYSBsaW5lIGl0ZW0gdG8gdGhlIGNhcnQgb2YgdGhlIGN1cnJlbnQgY3VzdG9tZXIuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgYWRkTGluZUl0ZW0ocHJvZHVjdElkOiBzdHJpbmcsIHZhcmlhbnRJZDogc3RyaW5nLCBxdWFudGl0eTogbnVtYmVyLFxyXG4gICAgICAgICAgICByZWN1cnJpbmdPcmRlckZyZXF1ZW5jeU5hbWU/OiBzdHJpbmcsXHJcbiAgICAgICAgICAgIHJlY3VycmluZ09yZGVyUHJvZ3JhbU5hbWU/OiBzdHJpbmcpOiBRLlByb21pc2U8YW55PjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVXBkYXRlIHRoZSBxdWFudGl0eSBvZiBhIGxpbmUgaXRlbSBpbiB0aGUgY2FydCBvZiB0aGUgY3VycmVudCBjdXN0b21lci5cclxuICAgICAgICAgKi9cclxuICAgICAgICB1cGRhdGVMaW5lSXRlbShsaW5lSXRlbUlkOiBzdHJpbmcsIHF1YW50aXR5OiBudW1iZXIsXHJcbiAgICAgICAgICAgIHJlY3VycmluZ09yZGVyRnJlcXVlbmN5TmFtZT86IHN0cmluZyxcclxuICAgICAgICAgICAgcmVjdXJyaW5nT3JkZXJQcm9ncmFtTmFtZT86IHN0cmluZyk6IFEuUHJvbWlzZTxhbnk+O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEZWxldGUgYSBsaW5lIGl0ZW0gZnJvbSB0aGUgY2FydCBvZiB0aGUgY3VycmVudCBjdXN0b21lci5cclxuICAgICAgICAgKi9cclxuICAgICAgICBkZWxldGVMaW5lSXRlbShsaW5lSXRlbUlkOiBzdHJpbmcpOiBRLlByb21pc2U8YW55PjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVXBkYXRlIHRoZSBwb3N0YWwgY29kZSBvZiB0aGUgYmlsbGluZyBtZXRob2QgaW4gY2FydCBvZiB0aGUgY3VycmVudCBjdXN0b21lci5cclxuICAgICAgICAgKi9cclxuICAgICAgICB1cGRhdGVCaWxsaW5nTWV0aG9kUG9zdGFsQ29kZShwb3N0YWxDb2RlOiBzdHJpbmcpOiBRLlByb21pc2U8YW55PjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVXBkYXRlIHRoZSBwb3N0YWwgY29kZSBvZiB0aGUgc2hpcHBpbmcgbWV0aG9kIGluIGNhcnQgb2YgdGhlIGN1cnJlbnQgY3VzdG9tZXIuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdXBkYXRlU2hpcHBpbmdNZXRob2RQb3N0YWxDb2RlKHBvc3RhbENvZGU6IHN0cmluZyk6IFEuUHJvbWlzZTxhbnk+O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTZXQgdGhlIGNoZWFwZXN0IHNoaXBwaW5nIG1ldGhvZCBpbiBjYXJ0IG9mIHRoZSBjdXJyZW50IGN1c3RvbWVyLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHNldENoZWFwZXN0U2hpcHBpbmdNZXRob2QoKTogUS5Qcm9taXNlPGFueT47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFkZCBhIGNvdXBvbiB0byB0aGUgY2FydCBvZiB0aGUgY3VycmVudCBjdXN0b21lci5cclxuICAgICAgICAgKi9cclxuICAgICAgICBhZGRDb3Vwb24oY291cG9uQ29kZTogc3RyaW5nKTogUS5Qcm9taXNlPGFueT47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJlbW92ZSBhIGNvdXBvbiBmcm9tIHRoZSBjYXJ0IG9mIHRoZSBjdXJyZW50IGN1c3RvbWVyLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHJlbW92ZUNvdXBvbihjb3Vwb25Db2RlOiBzdHJpbmcpOiBRLlByb21pc2U8YW55PjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2xlYW5zIHRoZSBjYXJ0IG9mIGludmFsaWQgbGluZSBpdGVtcy5cclxuICAgICAgICAgKi9cclxuICAgICAgICBjbGVhbigpOiBRLlByb21pc2U8YW55PjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVXBkYXRlIHRoZSBjYXJ0IG9mIHRoZSBjdXJyZW50IGN1c3RvbWVyLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHVwZGF0ZUNhcnQocGFyYW06IGFueSk6IFEuUHJvbWlzZTxJVXBkYXRlQ2FydFJlc3VsdD47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENvbXBsZXRlIHRoZSBjaGVja291dCwgdGhlcmVieSBjbGVhcmluZyBldmVyeSBpdGVtIGluIHRoZSBjYXJ0IG9mIHRoZSBjdXJyZW50IGN1c3RvbWVyLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNvbXBsZXRlQ2hlY2tvdXQoY3VycmVudFN0ZXA6IG51bWJlcik6IFEuUHJvbWlzZTxJQ29tcGxldGVDaGVja291dFJlc3VsdD47XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJVXBkYXRlQ2FydFJlc3VsdCB7XHJcblxyXG4gICAgICAgIEhhc0Vycm9yczogYm9vbGVhbjtcclxuXHJcbiAgICAgICAgTmV4dFN0ZXBVcmw6IHN0cmluZztcclxuXHJcbiAgICAgICAgQ2FydDogYW55O1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSUNvbXBsZXRlQ2hlY2tvdXRSZXN1bHQge1xyXG5cclxuICAgICAgICBPcmRlck51bWJlcjogc3RyaW5nO1xyXG5cclxuICAgICAgICBDdXN0b21lckVtYWlsOiBzdHJpbmc7XHJcblxyXG4gICAgICAgIE5leHRTdGVwVXJsOiBzdHJpbmc7XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4vLi4vTXZjL0NvbXBvc2VyQ2xpZW50LnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuL0lDYXJ0UmVwb3NpdG9yeS50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBDYXJ0UmVwb3NpdG9yeSBpbXBsZW1lbnRzIElDYXJ0UmVwb3NpdG9yeSB7XHJcblxyXG4gICAgICAgIHB1YmxpYyBnZXRDYXJ0KCk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBDb21wb3NlckNsaWVudC5nZXQoJy9hcGkvY2FydC9nZXRjYXJ0Jyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYWRkTGluZUl0ZW0ocHJvZHVjdElkOiBzdHJpbmcsIHZhcmlhbnRJZDogc3RyaW5nLCBxdWFudGl0eTogbnVtYmVyLFxyXG4gICAgICAgICAgICByZWN1cnJpbmdPcmRlckZyZXF1ZW5jeU5hbWU/OiBzdHJpbmcsXHJcbiAgICAgICAgICAgIHJlY3VycmluZ09yZGVyUHJvZ3JhbU5hbWU/OiBzdHJpbmcpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXByb2R1Y3RJZCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgcHJvZHVjdCBpZCBpcyByZXF1aXJlZCcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAocXVhbnRpdHkgPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgcXVhbnRpdHkgbXVzdCBiZSBncmVhdGVyIHRoYW4gemVybycpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIFByb2R1Y3RJZDogcHJvZHVjdElkLFxyXG4gICAgICAgICAgICAgICAgVmFyaWFudElkOiB2YXJpYW50SWQsXHJcbiAgICAgICAgICAgICAgICBRdWFudGl0eTogcXVhbnRpdHksXHJcbiAgICAgICAgICAgICAgICBSZWN1cnJpbmdPcmRlckZyZXF1ZW5jeU5hbWU6IHJlY3VycmluZ09yZGVyRnJlcXVlbmN5TmFtZSxcclxuICAgICAgICAgICAgICAgIFJlY3VycmluZ09yZGVyUHJvZ3JhbU5hbWU6IHJlY3VycmluZ09yZGVyUHJvZ3JhbU5hbWVcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBDb21wb3NlckNsaWVudC5wb3N0KCcvYXBpL2NhcnQvbGluZWl0ZW0nLCBkYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB1cGRhdGVMaW5lSXRlbShsaW5lSXRlbUlkOiBzdHJpbmcsIHF1YW50aXR5OiBudW1iZXIsXHJcbiAgICAgICAgICAgIHJlY3VycmluZ09yZGVyRnJlcXVlbmN5TmFtZT86IHN0cmluZyxcclxuICAgICAgICAgICAgcmVjdXJyaW5nT3JkZXJQcm9ncmFtTmFtZT86IHN0cmluZyk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIGlmICghbGluZUl0ZW1JZCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgbGluZSBpdGVtIGlkIGlzIHJlcXVpcmVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChxdWFudGl0eSA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBxdWFudGl0eSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiB6ZXJvJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgTGluZUl0ZW1JZDogbGluZUl0ZW1JZCxcclxuICAgICAgICAgICAgICAgIFF1YW50aXR5OiBxdWFudGl0eSxcclxuICAgICAgICAgICAgICAgIFJlY3VycmluZ09yZGVyRnJlcXVlbmN5TmFtZTogcmVjdXJyaW5nT3JkZXJGcmVxdWVuY3lOYW1lLFxyXG4gICAgICAgICAgICAgICAgUmVjdXJyaW5nT3JkZXJQcm9ncmFtTmFtZTogcmVjdXJyaW5nT3JkZXJQcm9ncmFtTmFtZVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIENvbXBvc2VyQ2xpZW50LnB1dCgnL2FwaS9jYXJ0L2xpbmVpdGVtJywgZGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZGVsZXRlTGluZUl0ZW0obGluZUl0ZW1JZDogc3RyaW5nKTogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgaWYgKCFsaW5lSXRlbUlkKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBsaW5lIGl0ZW0gaWQgaXMgcmVxdWlyZWQnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBMaW5lSXRlbUlkOiBsaW5lSXRlbUlkXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gQ29tcG9zZXJDbGllbnQucmVtb3ZlKCcvYXBpL2NhcnQvbGluZWl0ZW0nLCBkYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB1cGRhdGVCaWxsaW5nTWV0aG9kUG9zdGFsQ29kZShwb3N0YWxDb2RlOiBzdHJpbmcpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXBvc3RhbENvZGUpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIHBvc3RhbCBjb2RlIGlzIHJlcXVpcmVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgUG9zdGFsQ29kZTogcG9zdGFsQ29kZVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIENvbXBvc2VyQ2xpZW50LnBvc3QoJy9hcGkvY2FydC9iaWxsaW5nYWRkcmVzcycsIGRhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHVwZGF0ZVNoaXBwaW5nTWV0aG9kUG9zdGFsQ29kZShwb3N0YWxDb2RlOiBzdHJpbmcpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXBvc3RhbENvZGUpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIHBvc3RhbCBjb2RlIGlzIHJlcXVpcmVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgUG9zdGFsQ29kZTogcG9zdGFsQ29kZVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIENvbXBvc2VyQ2xpZW50LnBvc3QoJy9hcGkvY2FydC9zaGlwcGluZ2FkZHJlc3MnLCBkYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzZXRDaGVhcGVzdFNoaXBwaW5nTWV0aG9kKCk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgVXNlQ2hlYXBlc3Q6IHRydWVcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBDb21wb3NlckNsaWVudC5wb3N0KCcvYXBpL2NhcnQvc2hpcHBpbmdtZXRob2QnLCBkYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBhZGRDb3Vwb24oY291cG9uQ29kZTogc3RyaW5nKTogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgaWYgKCFjb3Vwb25Db2RlKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBjb3Vwb24gY29kZSBpcyByZXF1aXJlZCcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIENvdXBvbkNvZGU6IGNvdXBvbkNvZGVcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBDb21wb3NlckNsaWVudC5wb3N0KCcvYXBpL2NhcnQvY291cG9uJywgZGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgcmVtb3ZlQ291cG9uKGNvdXBvbkNvZGU6IHN0cmluZyk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIGlmICghY291cG9uQ29kZSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgY291cG9uIGNvZGUgaXMgcmVxdWlyZWQnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBDb3Vwb25Db2RlOiBjb3Vwb25Db2RlXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gQ29tcG9zZXJDbGllbnQucmVtb3ZlKCcvYXBpL2NhcnQvY291cG9uJywgZGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgY2xlYW4oKTogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7IH07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gQ29tcG9zZXJDbGllbnQucmVtb3ZlKCcvYXBpL2NhcnQvY2xlYW4nLCBkYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB1cGRhdGVDYXJ0KHBhcmFtOiBhbnkpOiBRLlByb21pc2U8SVVwZGF0ZUNhcnRSZXN1bHQ+IHtcclxuXHJcbiAgICAgICAgICAgIGlmICghcGFyYW0pIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIHBhcmFtIGlzIHJlcXVpcmVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBDb21wb3NlckNsaWVudC5wb3N0KCcvYXBpL2NhcnQvdXBkYXRlQ2FydCcsIHBhcmFtKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBjb21wbGV0ZUNoZWNrb3V0KGN1cnJlbnRTdGVwOiBudW1iZXIpOiBRLlByb21pc2U8SUNvbXBsZXRlQ2hlY2tvdXRSZXN1bHQ+IHtcclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgQ3VycmVudFN0ZXA6IGN1cnJlbnRTdGVwXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gQ29tcG9zZXJDbGllbnQucG9zdCgnL2FwaS9jYXJ0L2NvbXBsZXRlY2hlY2tvdXQnLCBkYXRhKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNlcGFyYXRlcyB0aGUgbG9naWMgdGhhdCByZXRyaWV2ZXMgdGhlIGRhdGEgYW5kIG1hcHMgaXQgdG8gdGhlIGVudGl0eSBtb2RlbCBmcm9tIHRoZSBhcHBsaWNhdGlvbiBzZXJ2aWNlcyB0aGF0IGFjdHMgb24gdGhlIG1vZGVsLlxyXG4gICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSUNhcnRTZXJ2aWNlIHtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0IHRoZSBjYXJ0IG9mIHRoZSBjdXJyZW50IGN1c3RvbWVyLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldENhcnQoKTogUS5Qcm9taXNlPGFueT47XHJcblxyXG4gICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXQgdGhlIGNhcnQgb2YgdGhlIGN1cnJlbnQgY3VzdG9tZXIuXHJcbiAgICAgICAgICogVGhpcyBmb3JjZXMgdGhlIHJlcG9zaXRvcnkgdG8gZ2V0IGEgZnJlc2ggY2FydCBmcm9tIENvbXBvc2VyLFxyXG4gICAgICAgICAqIGJlY2F1c2UgdGhlIGNhcnQgd2lsbCBjb250YWluIGRpZmZlcmVudCBwcm9wZXJ0eSB2YWx1ZXMgZm9yIGVhY2ggY2hlY2tvdXQgc3RlcC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXRGcmVzaENhcnQoKTogUS5Qcm9taXNlPGFueT47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFkZCBhIGxpbmUgaXRlbSB0byB0aGUgY2FydCBvZiB0aGUgY3VycmVudCBjdXN0b21lci5cclxuICAgICAgICAgKi9cclxuICAgICAgICBhZGRMaW5lSXRlbShwcm9kdWN0SWQ6IHN0cmluZywgcHJpY2U6IHN0cmluZywgdmFyaWFudElkOiBzdHJpbmcsIHF1YW50aXR5OiBudW1iZXIsXHJcbiAgICAgICAgICAgIHJlY3VycmluZ09yZGVyRnJlcXVlbmN5TmFtZT86IHN0cmluZyxcclxuICAgICAgICAgICAgcmVjdXJyaW5nT3JkZXJQcm9ncmFtTmFtZT86IHN0cmluZyk6IFEuUHJvbWlzZTxhbnk+O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBVcGRhdGUgdGhlIHF1YW50aXR5IG9mIGEgbGluZSBpdGVtIGluIHRoZSBjYXJ0IG9mIHRoZSBjdXJyZW50IGN1c3RvbWVyLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHVwZGF0ZUxpbmVJdGVtKGxpbmVJdGVtSWQ6IHN0cmluZywgcXVhbnRpdHk6IG51bWJlciwgcHJvZHVjdElkOiBzdHJpbmcsXHJcbiAgICAgICAgICAgIHJlY3VycmluZ09yZGVyRnJlcXVlbmN5TmFtZT86IHN0cmluZyxcclxuICAgICAgICAgICAgcmVjdXJyaW5nT3JkZXJQcm9ncmFtTmFtZT86IHN0cmluZyk6IFEuUHJvbWlzZTxhbnk+O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEZWxldGUgYSBsaW5lIGl0ZW0gZnJvbSB0aGUgY2FydCBvZiB0aGUgY3VycmVudCBjdXN0b21lci5cclxuICAgICAgICAgKi9cclxuICAgICAgICBkZWxldGVMaW5lSXRlbShsaW5lSXRlbUlkOiBzdHJpbmcsIHByb2R1Y3RJZDogc3RyaW5nKTogUS5Qcm9taXNlPGFueT47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFVwZGF0ZSB0aGUgcG9zdGFsIGNvZGUgb2YgdGhlIGJpbGxpbmcgbWV0aG9kIGluIGNhcnQgb2YgdGhlIGN1cnJlbnQgY3VzdG9tZXIuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdXBkYXRlQmlsbGluZ01ldGhvZFBvc3RhbENvZGUocG9zdGFsQ29kZTogc3RyaW5nKTogUS5Qcm9taXNlPHZvaWQ+O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBVcGRhdGUgdGhlIHBvc3RhbCBjb2RlIG9mIHRoZSBzaGlwcGluZyBtZXRob2QgaW4gY2FydCBvZiB0aGUgY3VycmVudCBjdXN0b21lci5cclxuICAgICAgICAgKi9cclxuICAgICAgICB1cGRhdGVTaGlwcGluZ01ldGhvZFBvc3RhbENvZGUocG9zdGFsQ29kZTogc3RyaW5nKTogUS5Qcm9taXNlPHZvaWQ+O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTZXQgdGhlIGNoZWFwZXN0IHNoaXBwaW5nIG1ldGhvZCBpbiBjYXJ0IG9mIHRoZSBjdXJyZW50IGN1c3RvbWVyLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHNldENoZWFwZXN0U2hpcHBpbmdNZXRob2QoKTogUS5Qcm9taXNlPHZvaWQ+O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBZGQgYSBjb3Vwb24gdG8gdGhlIGNhcnQgb2YgdGhlIGN1cnJlbnQgY3VzdG9tZXIuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgYWRkQ291cG9uKGNvdXBvbkNvZGU6IHN0cmluZyk6IFEuUHJvbWlzZTx2b2lkPjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmVtb3ZlIGEgY291cG9uIGZyb20gdGhlIGNhcnQgb2YgdGhlIGN1cnJlbnQgY3VzdG9tZXIuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcmVtb3ZlQ291cG9uKGNvdXBvbkNvZGU6IHN0cmluZyk6IFEuUHJvbWlzZTx2b2lkPjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2xlYW5zIHRoZSBjYXJ0IG9mIGludmFsaWQgbGluZSBpdGVtcy5cclxuICAgICAgICAgKi9cclxuICAgICAgICBjbGVhbigpOiBRLlByb21pc2U8dm9pZD47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFVwZGF0ZSB0aGUgY2FydCBvZiB0aGUgY3VycmVudCBjdXN0b21lci5cclxuICAgICAgICAgKi9cclxuICAgICAgICB1cGRhdGVDYXJ0KHBhcmFtOiBhbnkpOiBRLlByb21pc2U8SVVwZGF0ZUNhcnRSZXN1bHQ+O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDb21wbGV0ZSB0aGUgY2hlY2tvdXQsIHRoZXJlYnkgY2xlYXJpbmcgZXZlcnkgaXRlbSBpbiB0aGUgY2FydCBvZiB0aGUgY3VycmVudCBjdXN0b21lci5cclxuICAgICAgICAgKi9cclxuICAgICAgICBjb21wbGV0ZUNoZWNrb3V0KGN1cnJlbnRTdGVwOiBudW1iZXIpOiBRLlByb21pc2U8SUNvbXBsZXRlQ2hlY2tvdXRSZXN1bHQ+O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDbGVhciB0aGUgQ2FydCBjYWNoZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGludmFsaWRhdGVDYWNoZSgpOiBRLlByb21pc2U8dm9pZD47XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9DYWNoZS9DYWNoZVByb3ZpZGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L0NhY2hlL0NhY2hlRXJyb3IudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvUmVwb3NpdG9yaWVzL0NhcnRSZXBvc2l0b3J5LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0V2ZW50cy9FdmVudEh1Yi50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL0lDYXJ0U2VydmljZS50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBDYXJ0U2VydmljZSBpbXBsZW1lbnRzIElDYXJ0U2VydmljZSB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIEdldHRpbmdGcmVzaENhcnQ6IFEuUHJvbWlzZTxhbnk+O1xyXG5cclxuICAgICAgICBwcml2YXRlIGNhY2hlS2V5OiBzdHJpbmcgPSAnQ2FydFZpZXdNb2RlbCc7XHJcbiAgICAgICAgcHJpdmF0ZSBjYWNoZVBvbGljeTogSUNhY2hlUG9saWN5ID0geyBzbGlkaW5nRXhwaXJhdGlvbjogMzAwIH07IC8vIDVtaW5cclxuICAgICAgICBwcml2YXRlIGNhY2hlUHJvdmlkZXI6IElDYWNoZVByb3ZpZGVyO1xyXG4gICAgICAgIHByaXZhdGUgY2FydFJlcG9zaXRvcnk6IElDYXJ0UmVwb3NpdG9yeTtcclxuICAgICAgICBwcml2YXRlIGV2ZW50SHViOiBJRXZlbnRIdWI7XHJcblxyXG4gICAgICAgIGNvbnN0cnVjdG9yKGNhcnRSZXBvc2l0b3J5OiBJQ2FydFJlcG9zaXRvcnksIGV2ZW50SHViOiBJRXZlbnRIdWIpIHtcclxuXHJcbiAgICAgICAgICAgIGlmICghY2FydFJlcG9zaXRvcnkpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3I6IGNhcnRSZXBvc2l0b3J5IGlzIHJlcXVpcmVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCFldmVudEh1Yikge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvcjogZXZlbnRIdWIgaXMgcmVxdWlyZWQnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5jYWNoZVByb3ZpZGVyID0gQ2FjaGVQcm92aWRlci5pbnN0YW5jZSgpO1xyXG4gICAgICAgICAgICB0aGlzLmNhcnRSZXBvc2l0b3J5ID0gY2FydFJlcG9zaXRvcnk7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIgPSBldmVudEh1YjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBnZXRDYXJ0KCk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldENhY2hlQ2FydCgpXHJcbiAgICAgICAgICAgICAgICAuZmFpbChyZWFzb24gPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jYW5IYW5kbGUocmVhc29uKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRGcmVzaENhcnQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0FuIGVycm9yIG9jY3VyZWQgd2hpbGUgZ2V0dGluZyB0aGUgY2FydCBmcm9tIGNhY2hlLicsIHJlYXNvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgcmVhc29uO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGNhbkhhbmRsZShyZWFzb246IGFueSk6IGJvb2xlYW4ge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHJlYXNvbiA9PT0gQ2FjaGVFcnJvci5FeHBpcmVkIHx8IHJlYXNvbiA9PT0gQ2FjaGVFcnJvci5Ob3RGb3VuZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBnZXRGcmVzaENhcnQoKTogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgaWYgKCFDYXJ0U2VydmljZS5HZXR0aW5nRnJlc2hDYXJ0KSB7XHJcbiAgICAgICAgICAgICAgICBDYXJ0U2VydmljZS5HZXR0aW5nRnJlc2hDYXJ0ID0gdGhpcy5jYXJ0UmVwb3NpdG9yeS5nZXRDYXJ0KClcclxuICAgICAgICAgICAgICAgICAgICAudGhlbihjYXJ0ID0+IHRoaXMuc2V0Q2FydFRvQ2FjaGUoY2FydCkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyB0byBhdm9pZCBnZXR0aW5nIGEgZnJlc2ggY2FydCBtdWx0aXBsZSB0aW1lcyB3aXRoaW4gYSBwYWdlIHNlc3Npb25cclxuICAgICAgICAgICAgcmV0dXJuIENhcnRTZXJ2aWNlLkdldHRpbmdGcmVzaENhcnRcclxuICAgICAgICAgICAgICAgIC5mYWlsKChyZWFzb24pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdBbiBlcnJvciBvY2N1cmVkIHdoaWxlIGdldHRpbmcgYSBmcmVzaCBjYXJ0LicsIHJlYXNvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgcmVhc29uO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYWRkTGluZUl0ZW0ocHJvZHVjdElkOiBzdHJpbmcsIHByaWNlOiBzdHJpbmcsIHZhcmlhbnRJZD86IHN0cmluZyxcclxuICAgICAgICAgICAgIHF1YW50aXR5OiBudW1iZXIgPSAxLFxyXG4gICAgICAgICAgICAgcmVjdXJyaW5nT3JkZXJGcmVxdWVuY3lOYW1lPzogc3RyaW5nLFxyXG4gICAgICAgICAgICAgcmVjdXJyaW5nT3JkZXJQcm9ncmFtTmFtZT86IHN0cmluZyk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgUHJvZHVjdElkOiBwcm9kdWN0SWQsXHJcbiAgICAgICAgICAgICAgICBWYXJpYW50SWQ6IHZhcmlhbnRJZCxcclxuICAgICAgICAgICAgICAgIFF1YW50aXR5OiBxdWFudGl0eSxcclxuICAgICAgICAgICAgICAgIFByaWNlOiBwcmljZVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKCdjYXJ0VXBkYXRpbmcnLCB7IGRhdGE6IGRhdGEgfSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jYXJ0UmVwb3NpdG9yeS5hZGRMaW5lSXRlbShwcm9kdWN0SWQsIHZhcmlhbnRJZCwgcXVhbnRpdHksIHJlY3VycmluZ09yZGVyRnJlcXVlbmN5TmFtZSwgcmVjdXJyaW5nT3JkZXJQcm9ncmFtTmFtZSlcclxuICAgICAgICAgICAgICAgIC50aGVuKGNhcnQgPT4gdGhpcy5zZXRDYXJ0VG9DYWNoZShjYXJ0KSlcclxuICAgICAgICAgICAgICAgIC50aGVuKGNhcnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBhZGRlZFRvQ2FydERhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIENhcnQ6IGNhcnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFByb2R1Y3RJZDogcHJvZHVjdElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBWYXJpYW50SWQ6IHZhcmlhbnRJZFxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaCgnY2FydFVwZGF0ZWQnLCB7IGRhdGE6IGNhcnQgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKCdsaW5lSXRlbUFkZGVkVG9DYXJ0JywgeyBkYXRhOiBhZGRlZFRvQ2FydERhdGEgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB1cGRhdGVMaW5lSXRlbShsaW5lSXRlbUlkOiBzdHJpbmcsIHF1YW50aXR5OiBudW1iZXIsIHByb2R1Y3RJZDogc3RyaW5nLFxyXG4gICAgICAgICAgICByZWN1cnJpbmdPcmRlckZyZXF1ZW5jeU5hbWU/OiBzdHJpbmcsXHJcbiAgICAgICAgICAgIHJlY3VycmluZ09yZGVyUHJvZ3JhbU5hbWU/OiBzdHJpbmcpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIExpbmVJdGVtSWQ6IGxpbmVJdGVtSWQsXHJcbiAgICAgICAgICAgICAgICBRdWFudGl0eTogcXVhbnRpdHksXHJcbiAgICAgICAgICAgICAgICBQcm9kdWN0SWQ6IHByb2R1Y3RJZFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKCdjYXJ0VXBkYXRpbmcnLCB7IGRhdGE6IGRhdGEgfSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jYXJ0UmVwb3NpdG9yeS51cGRhdGVMaW5lSXRlbShsaW5lSXRlbUlkLCBxdWFudGl0eSwgcmVjdXJyaW5nT3JkZXJGcmVxdWVuY3lOYW1lLCByZWN1cnJpbmdPcmRlclByb2dyYW1OYW1lKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oY2FydCA9PiB0aGlzLnNldENhcnRUb0NhY2hlKGNhcnQpKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oY2FydCA9PiB0aGlzLmV2ZW50SHViLnB1Ymxpc2goJ2NhcnRVcGRhdGVkJywgeyBkYXRhOiBjYXJ0IH0pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBkZWxldGVMaW5lSXRlbShsaW5lSXRlbUlkOiBzdHJpbmcsIHByb2R1Y3RJZDogc3RyaW5nKTogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBMaW5lSXRlbUlkOiBsaW5lSXRlbUlkLFxyXG4gICAgICAgICAgICAgICAgUHJvZHVjdElkOiBwcm9kdWN0SWRcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaCgnY2FydFVwZGF0aW5nJywgeyBkYXRhOiBkYXRhIH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FydFJlcG9zaXRvcnkuZGVsZXRlTGluZUl0ZW0obGluZUl0ZW1JZClcclxuICAgICAgICAgICAgICAgIC50aGVuKGNhcnQgPT4gdGhpcy5zZXRDYXJ0VG9DYWNoZShjYXJ0KSlcclxuICAgICAgICAgICAgICAgIC50aGVuKGNhcnQgPT4gdGhpcy5ldmVudEh1Yi5wdWJsaXNoKCdjYXJ0VXBkYXRlZCcsIHsgZGF0YTogY2FydCB9KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdXBkYXRlQmlsbGluZ01ldGhvZFBvc3RhbENvZGUocG9zdGFsQ29kZTogc3RyaW5nKTogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FydFJlcG9zaXRvcnkudXBkYXRlQmlsbGluZ01ldGhvZFBvc3RhbENvZGUocG9zdGFsQ29kZSlcclxuICAgICAgICAgICAgICAgIC50aGVuKGNhcnQgPT4gdGhpcy5zZXRDYXJ0VG9DYWNoZShjYXJ0KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdXBkYXRlU2hpcHBpbmdNZXRob2RQb3N0YWxDb2RlKHBvc3RhbENvZGU6IHN0cmluZyk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNhcnRSZXBvc2l0b3J5LnVwZGF0ZVNoaXBwaW5nTWV0aG9kUG9zdGFsQ29kZShwb3N0YWxDb2RlKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oY2FydCA9PiB0aGlzLnNldENhcnRUb0NhY2hlKGNhcnQpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzZXRDaGVhcGVzdFNoaXBwaW5nTWV0aG9kKCk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNhcnRSZXBvc2l0b3J5LnNldENoZWFwZXN0U2hpcHBpbmdNZXRob2QoKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oY2FydCA9PiB0aGlzLnNldENhcnRUb0NhY2hlKGNhcnQpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBhZGRDb3Vwb24oY291cG9uQ29kZTogc3RyaW5nKTogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FydFJlcG9zaXRvcnkuYWRkQ291cG9uKGNvdXBvbkNvZGUpXHJcbiAgICAgICAgICAgICAgICAudGhlbihjYXJ0ID0+IHRoaXMuc2V0Q2FydFRvQ2FjaGUoY2FydCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHJlbW92ZUNvdXBvbihjb3Vwb25Db2RlOiBzdHJpbmcpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jYXJ0UmVwb3NpdG9yeS5yZW1vdmVDb3Vwb24oY291cG9uQ29kZSlcclxuICAgICAgICAgICAgICAgIC50aGVuKGNhcnQgPT4gdGhpcy5zZXRDYXJ0VG9DYWNoZShjYXJ0KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgY2xlYW4oKTogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FydFJlcG9zaXRvcnkuY2xlYW4oKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oY2FydCA9PiB0aGlzLnNldENhcnRUb0NhY2hlKGNhcnQpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB1cGRhdGVDYXJ0KHBhcmFtOiBhbnkpOiBRLlByb21pc2U8SVVwZGF0ZUNhcnRSZXN1bHQ+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNhcnRSZXBvc2l0b3J5LnVwZGF0ZUNhcnQocGFyYW0pXHJcbiAgICAgICAgICAgICAgICAgLnRoZW4oKHJlc3VsdDogSVVwZGF0ZUNhcnRSZXN1bHQpID0+IHRoaXMuc2V0Q2FydFRvQ2FjaGUocmVzdWx0LkNhcnQpLnRoZW4oKCkgPT4gcmVzdWx0KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgY29tcGxldGVDaGVja291dChjdXJyZW50U3RlcDogbnVtYmVyKTogUS5Qcm9taXNlPElDb21wbGV0ZUNoZWNrb3V0UmVzdWx0PiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jYXJ0UmVwb3NpdG9yeS5jb21wbGV0ZUNoZWNrb3V0KGN1cnJlbnRTdGVwKVxyXG4gICAgICAgICAgICAgICAgIC50aGVuKChyZXN1bHQ6IElDb21wbGV0ZUNoZWNrb3V0UmVzdWx0KSA9PiB0aGlzLnNldENhcnRUb0NhY2hlKG51bGwpLnRoZW4oKCkgPT4gcmVzdWx0KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgaW52YWxpZGF0ZUNhY2hlKCk6IFEuUHJvbWlzZTx2b2lkPiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jYWNoZVByb3ZpZGVyLmRlZmF1bHRDYWNoZS5jbGVhcih0aGlzLmNhY2hlS2V5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBnZXRDYWNoZUNhcnQoKTogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGVQcm92aWRlci5kZWZhdWx0Q2FjaGUuZ2V0PGFueT4odGhpcy5jYWNoZUtleSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgc2V0Q2FydFRvQ2FjaGUoY2FydDogYW55KTogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGVQcm92aWRlci5kZWZhdWx0Q2FjaGUuc2V0KHRoaXMuY2FjaGVLZXksIGNhcnQsIHRoaXMuY2FjaGVQb2xpY3kpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJRXJyb3Ige1xyXG4gICAgICAgIEVycm9yQ29kZTogc3RyaW5nO1xyXG4gICAgICAgIExvY2FsaXplZEVycm9yTWVzc2FnZTogc3RyaW5nO1xyXG4gICAgfVxyXG59IiwiLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi9JRXJyb3IudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSUVycm9yQ29sbGVjdGlvbiB7XHJcbiAgICAgICAgRXJyb3JzOiBJRXJyb3JbXTtcclxuICAgIH1cclxufSIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4vSUVycm9yLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElFcnJvckhhbmRsZXIge1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBXaWxsIG91dHB1dCB0aGUgZXJyb3IgdG8gdGhlIHVzZXIuXHJcbiAgICAgICAgICogQHBhcmFtIHtJRXJyb3J9IGVycm9yIEVycm9yIHRvIGRpc3BsYXkuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb3V0cHV0RXJyb3IoZXJyb3I6IElFcnJvcik6IHZvaWQ7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFdpbGwgbG9jYWxpemUgYW4gZXJyb3IgYmFzZWQgb24gaXRzIGNvZGUgYW5kIHdpbGwgZGlzcGxheSBpdFxyXG4gICAgICAgICAqIHRvIHRoZSB1c2VyLlxyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBlcnJvckNvZGUgRXJyb3IgY29kZSB0byBsb2NhbGl6ZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICBvdXRwdXRFcnJvckZyb21Db2RlKGVycm9yQ29kZTogc3RyaW5nKTogdm9pZDtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmVtb3ZlcyBhbGwgZXJyb3JzIGZyb20gdGhlIGN1cnJlbnQgcGFnZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICByZW1vdmVFcnJvcnMoKTogdm9pZDtcclxuICAgIH1cclxufVxyXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuL0lFcnJvckNvbGxlY3Rpb24udHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4vSUVycm9yLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuL0lFcnJvckhhbmRsZXIudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uL012Yy9Mb2NhbGl6YXRpb24vTG9jYWxpemF0aW9uUHJvdmlkZXIudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uL0V2ZW50cy9FdmVudEh1Yi50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgZXhwb3J0IGNsYXNzIEVycm9ySGFuZGxlciBpbXBsZW1lbnRzIElFcnJvckhhbmRsZXIge1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGluc3RhbmNlKCk6IElFcnJvckhhbmRsZXIge1xyXG4gICAgICAgICAgICB2YXIgaW5zdGFuY2U6IElFcnJvckhhbmRsZXIgPSBuZXcgRXJyb3JIYW5kbGVyKCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgbWVtb2l6ZSA9ICgpID0+IGluc3RhbmNlO1xyXG4gICAgICAgICAgICBFcnJvckhhbmRsZXIuaW5zdGFuY2UgPSBtZW1vaXplO1xyXG4gICAgICAgICAgICByZXR1cm4gbWVtb2l6ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogV2lsbCBvdXRwdXQgdGhlIGVycm9yIHRvIHRoZSB1c2VyLlxyXG4gICAgICAgICAqIEBwYXJhbSB7SUVycm9yfSBlcnJvciBFcnJvciB0byBkaXNwbGF5LlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBvdXRwdXRFcnJvcihlcnJvcjogSUVycm9yKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMucHVibGlzaEdlbmVyaWNFcnJvckV2ZW50KGVycm9yKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFdpbGwgbG9jYWxpemUgYW4gZXJyb3IgYmFzZWQgb24gaXRzIGNvZGUgYW5kIHdpbGwgZGlzcGxheSBpdFxyXG4gICAgICAgICAqIHRvIHRoZSB1c2VyLlxyXG4gICAgICAgICAqIEBwYXJhbSB7c3RyaW5nfSBlcnJvckNvZGUgRXJyb3IgY29kZSB0byBsb2NhbGl6ZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgb3V0cHV0RXJyb3JGcm9tQ29kZShlcnJvckNvZGU6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgICAgICB2YXIgZXJyb3IgPSB0aGlzLmNyZWF0ZUVycm9yRnJvbUNvZGUoZXJyb3JDb2RlKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucHVibGlzaEdlbmVyaWNFcnJvckV2ZW50KGVycm9yKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBjcmVhdGVFcnJvckZyb21Db2RlKGVycm9yQ29kZTogc3RyaW5nKTogSUVycm9yIHtcclxuICAgICAgICAgICAgdmFyIGxvY2FsaXphdGlvbjogc3RyaW5nID0gTG9jYWxpemF0aW9uUHJvdmlkZXIuaW5zdGFuY2UoKS5nZXRMb2NhbGl6ZWRTdHJpbmcoJ0Vycm9ycycsIGBMXyR7ZXJyb3JDb2RlfWApO1xyXG5cclxuICAgICAgICAgICAgdmFyIGVycm9yOiBJRXJyb3IgPSB7XHJcbiAgICAgICAgICAgICAgICBFcnJvckNvZGU6IGVycm9yQ29kZSxcclxuICAgICAgICAgICAgICAgIExvY2FsaXplZEVycm9yTWVzc2FnZTogbG9jYWxpemF0aW9uXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZXJyb3I7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZW1vdmVzIGFsbCBlcnJvcnMgZnJvbSB0aGUgY3VycmVudCBwYWdlLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyByZW1vdmVFcnJvcnMoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMucHVibGlzaEdlbmVyaWNFcnJvckV2ZW50KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgcHVibGlzaEdlbmVyaWNFcnJvckV2ZW50KGVycm9yPzogSUVycm9yKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHZhciBlcnJvckNvbGwgPSB0aGlzLmNyZWF0ZUVycm9yQ29sbGVjdGlvbihlcnJvcik7XHJcblxyXG4gICAgICAgICAgICBFdmVudEh1Yi5pbnN0YW5jZSgpLnB1Ymxpc2goJ0dlbmVyYWxFcnJvck9jY3VyZWQnLCB7XHJcbiAgICAgICAgICAgICAgICBkYXRhOiBlcnJvckNvbGxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgY3JlYXRlRXJyb3JDb2xsZWN0aW9uKGVycm9yPzogSUVycm9yKTogSUVycm9yQ29sbGVjdGlvbiB7XHJcbiAgICAgICAgICAgIHZhciBlcnJvckNvbGxlY3Rpb24gPSB7XHJcbiAgICAgICAgICAgICAgICBFcnJvcnM6IFtdXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGVycm9yQ29sbGVjdGlvbi5FcnJvcnMucHVzaChlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBlcnJvckNvbGxlY3Rpb247XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvQ29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L1JlcG9zaXRvcmllcy9DYXJ0UmVwb3NpdG9yeS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9FcnJvckhhbmRsaW5nL0Vycm9ySGFuZGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPSdDYXJ0U2VydmljZS50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBGdWxsQ2FydENvbnRyb2xsZXIgZXh0ZW5kcyBPcmNrZXN0cmEuQ29tcG9zZXIuQ29udHJvbGxlciB7XHJcbiAgICAgICAgcHJvdGVjdGVkIHNvdXJjZTogc3RyaW5nID0gJ0NoZWNrb3V0JztcclxuICAgICAgICBwcml2YXRlIGRlYm91bmNlVXBkYXRlTGluZUl0ZW06IChhcmdzOiBhbnkpID0+IHZvaWQ7XHJcblxyXG4gICAgICAgIHByaXZhdGUgbG9hZGVkOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICAgICAgcHJpdmF0ZSBjYXJ0U2VydmljZTogQ2FydFNlcnZpY2UgPSBuZXcgQ2FydFNlcnZpY2UobmV3IENhcnRSZXBvc2l0b3J5KCksIHRoaXMuZXZlbnRIdWIpO1xyXG5cclxuICAgICAgICBwdWJsaWMgaW5pdGlhbGl6ZSgpIHtcclxuXHJcbiAgICAgICAgICAgIHN1cGVyLmluaXRpYWxpemUoKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJTdWJzY3JpcHRpb25zKCk7XHJcbiAgICAgICAgICAgIHRoaXMubG9hZENhcnQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgcmVnaXN0ZXJTdWJzY3JpcHRpb25zKCkge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5zdWJzY3JpYmUoJ2NhcnRVcGRhdGVkJywgZSA9PiB0aGlzLm9uQ2FydFVwZGF0ZWQoZS5kYXRhKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb25DYXJ0VXBkYXRlZChjYXJ0OiBhbnkpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXIoJ0NhcnRDb250ZW50JywgY2FydCk7XHJcbiAgICAgICAgICAgIEVycm9ySGFuZGxlci5pbnN0YW5jZSgpLnJlbW92ZUVycm9ycygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBsb2FkQ2FydCgpIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY2FydFNlcnZpY2UuZ2V0RnJlc2hDYXJ0KClcclxuICAgICAgICAgICAgICAgIC50aGVuKGNhcnQgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5sb2FkZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhcnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgZTogSUV2ZW50SW5mb3JtYXRpb24gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIENhcnQ6IGNhcnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdGVwTnVtYmVyOiB0aGlzLmNvbnRleHQudmlld01vZGVsLkN1cnJlbnRTdGVwXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goJ2NoZWNrb3V0U3RlcFJlbmRlcmVkJywgZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhcnQ7XHJcblxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5kb25lKGNhcnQgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goJ2NhcnRVcGRhdGVkJywgeyBkYXRhOiBjYXJ0IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubG9hZGVkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICB9LCByZWFzb24gPT4gdGhpcy5sb2FkQ2FydEZhaWxlZChyZWFzb24pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBsb2FkQ2FydEZhaWxlZChyZWFzb246IGFueSk6IHZvaWQge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB3aGlsZSBsb2FkaW5nIHRoZSBjYXJ0LicsIHJlYXNvbik7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGV4dC5jb250YWluZXIuZmluZCgnLmpzLWxvYWRpbmcnKS5oaWRlKCk7XHJcblxyXG4gICAgICAgICAgICBFcnJvckhhbmRsZXIuaW5zdGFuY2UoKS5vdXRwdXRFcnJvckZyb21Db2RlKCdMb2FkQ2FydEZhaWxlZCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHVwZGF0ZUxpbmVJdGVtKGFjdGlvbkNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuZGVib3VuY2VVcGRhdGVMaW5lSXRlbSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZWJvdW5jZVVwZGF0ZUxpbmVJdGVtID1cclxuICAgICAgICAgICAgICAgICAgICBfLmRlYm91bmNlKChhcmdzKSA9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV4ZWN1dGVMaW5lSXRlbVVwZGF0ZShhcmdzKSwgMzAwKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGNvbnRleHQ6IEpRdWVyeSA9IGFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHQ7XHJcbiAgICAgICAgICAgIGNvbnRleHQuY2xvc2VzdCgnLmNhcnQtcm93JykuYWRkQ2xhc3MoJ2lzLWxvYWRpbmcnKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBsaW5lSXRlbUlkOiBzdHJpbmcgPSA8YW55PmNvbnRleHQuZGF0YSgnbGluZWl0ZW1pZCcpO1xyXG4gICAgICAgICAgICB2YXIgcHJvZHVjdElkOiBzdHJpbmcgPSBjb250ZXh0LmF0dHIoJ2RhdGEtcHJvZHVjdGlkJyk7XHJcbiAgICAgICAgICAgIHZhciBhY3Rpb246IHN0cmluZyA9IDxhbnk+Y29udGV4dC5kYXRhKCdhY3Rpb24nKTtcclxuICAgICAgICAgICAgdmFyIHF1YW50aXR5OiBudW1iZXIgPSBwYXJzZUludCg8YW55PmNvbnRleHQuZGF0YSgncXVhbnRpdHknKSwgMTApO1xyXG4gICAgICAgICAgICB2YXIgdG1wUXVhbnRpdHk6IG51bWJlciA9IGNvbnRleHQuZGF0YSgndG1wLXF0ZScpID8gcGFyc2VJbnQoPGFueT5jb250ZXh0LmRhdGEoJ3RtcC1xdGUnKSwgMTApIDogbnVsbDtcclxuICAgICAgICAgICAgdmFyIHVwZGF0ZWRRdWFudGl0eTogbnVtYmVyID0gdGhpcy51cGRhdGVRdWFudGl0eShhY3Rpb24sIHRtcFF1YW50aXR5ID8gdG1wUXVhbnRpdHkgOiBxdWFudGl0eSk7XHJcbiAgICAgICAgICAgIHZhciByZWN1cnJpbmdPcmRlckZyZXF1ZW5jeU5hbWU6IHN0cmluZyA9IDxhbnk+Y29udGV4dC5kYXRhKCdyZWN1cnJpbmdvcmRlcmZyZXF1ZW5jeW5hbWUnKTtcclxuICAgICAgICAgICAgdmFyIHJlY3VycmluZ09yZGVyUHJvZ3JhbU5hbWU6IHN0cmluZyA9IDxhbnk+Y29udGV4dC5kYXRhKCdyZWN1cnJpbmdvcmRlcnByb2dyYW1uYW1lJyk7XHJcblxyXG4gICAgICAgICAgICBjb250ZXh0LmRhdGEoJ3RtcC1xdGUnLCB1cGRhdGVkUXVhbnRpdHkpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGFyZ3M6IGFueSA9IHtcclxuICAgICAgICAgICAgICAgIGNvbnRleHQ6IGNvbnRleHQsXHJcbiAgICAgICAgICAgICAgICBsaW5lSXRlbUlkOiBsaW5lSXRlbUlkLFxyXG4gICAgICAgICAgICAgICAgb3JpZ2luYWxRdWFudGl0eTogcXVhbnRpdHksXHJcbiAgICAgICAgICAgICAgICB1cGRhdGVkUXVhbnRpdHk6IHVwZGF0ZWRRdWFudGl0eSxcclxuICAgICAgICAgICAgICAgIHByb2R1Y3RJZDogcHJvZHVjdElkLFxyXG4gICAgICAgICAgICAgICAgcmVjdXJyaW5nT3JkZXJGcmVxdWVuY3lOYW1lOiByZWN1cnJpbmdPcmRlckZyZXF1ZW5jeU5hbWUsXHJcbiAgICAgICAgICAgICAgICByZWN1cnJpbmdPcmRlclByb2dyYW1OYW1lOiByZWN1cnJpbmdPcmRlclByb2dyYW1OYW1lXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBpZiAocXVhbnRpdHkgIT09IHVwZGF0ZWRRdWFudGl0eSkge1xyXG4gICAgICAgICAgICAgICAgLy91c2Ugb25seSBkZWJvdWNlZCBmdW5jdGlvbiB3aGVuIGluY3JlbWVudGluZy9kZWNyZW1lbnRpbmcgcXVhbnRpdHlcclxuICAgICAgICAgICAgICAgIHRoaXMuZGVib3VuY2VVcGRhdGVMaW5lSXRlbShhcmdzKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXhlY3V0ZUxpbmVJdGVtVXBkYXRlKGFyZ3MpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgZXhlY3V0ZUxpbmVJdGVtVXBkYXRlKGFyZ3M6IGFueSk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLmNhcnRTZXJ2aWNlLmdldENhcnQoKS50aGVuKChjYXJ0OiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBsaW5lSXRlbSA9IF8uZmluZChjYXJ0LkxpbmVJdGVtRGV0YWlsVmlld01vZGVscywgKGxpOiBhbnkpID0+IGxpLklkID09PSBhcmdzLmxpbmVJdGVtSWQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzVXBkYXRlUmVxdWlyZWQoYXJncywgbGluZUl0ZW0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGRlbHRhID0gYXJncy51cGRhdGVkUXVhbnRpdHkgLSBsaW5lSXRlbS5RdWFudGl0eTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgcG9zaXRpdmVEZWx0YTogbnVtYmVyID0gZGVsdGEgPCAwID8gZGVsdGEgKiAtMSA6IGRlbHRhO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBkYXRhID0gdGhpcy5nZXRMaW5lSXRlbURhdGFGb3JBbmFseXRpY3MobGluZUl0ZW0sIHBvc2l0aXZlRGVsdGEpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGVsdGEgIT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGV2ZW50TmFtZSA9IChkZWx0YSA+IDApID8gJ2xpbmVJdGVtQWRkaW5nJyA6ICdsaW5lSXRlbVJlbW92aW5nJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKGV2ZW50TmFtZSwgeyBkYXRhOiBkYXRhIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYXJncy5jb250ZXh0LnJlbW92ZURhdGEoJ3RtcC1xdGUnKTtcclxuICAgICAgICAgICAgICAgICAgICBhcmdzLmNvbnRleHQuZGF0YSgncXVhbnRpdHknLCBhcmdzLnVwZGF0ZWRRdWFudGl0eSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNhcnRTZXJ2aWNlLnVwZGF0ZUxpbmVJdGVtKGFyZ3MubGluZUl0ZW1JZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJncy51cGRhdGVkUXVhbnRpdHksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MucHJvZHVjdElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzLnJlY3VycmluZ09yZGVyRnJlcXVlbmN5TmFtZSA9PT0gJycgPyBudWxsIDogYXJncy5yZWN1cnJpbmdPcmRlckZyZXF1ZW5jeU5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MucmVjdXJyaW5nT3JkZXJQcm9ncmFtTmFtZSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKCdDYXJ0Q29udGVudCcsIGNhcnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjYXJ0O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KS5mYWlsKChyZWFzb246IGFueSkgPT4gdGhpcy5saW5lSXRlbVVwZGF0ZUZhaWxlZChhcmdzLmNvbnRleHQsIHJlYXNvbikpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGlzVXBkYXRlUmVxdWlyZWQodXBkYXRlTGluZUl0ZW1BcmdzLCBsaW5lSXRlbSk6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBpZiAoIWxpbmVJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBzaG91bGRVcGRhdGVRdWFudGl0eSA9IHVwZGF0ZUxpbmVJdGVtQXJncy51cGRhdGVkUXVhbnRpdHkgLSBsaW5lSXRlbS5RdWFudGl0eSAhPT0gMDtcclxuICAgICAgICAgICAgdmFyIHNob3VsZFVwZGF0ZVJlY3VycmluZ0ZyZXF1ZW5jeSA9IHVwZGF0ZUxpbmVJdGVtQXJncy5yZWN1cnJpbmdPcmRlckZyZXF1ZW5jeU5hbWUgIT09IGxpbmVJdGVtLlJlY3VycmluZ09yZGVyRnJlcXVlbmN5TmFtZTtcclxuICAgICAgICAgICAgdmFyIHNob3VsZFVwZGF0ZVJlY3VycmluZ1Byb2dyYW0gPSB1cGRhdGVMaW5lSXRlbUFyZ3MucmVjdXJyaW5nT3JkZXJQcm9ncmFtTmFtZSAhPT0gbGluZUl0ZW0uUmVjdXJyaW5nT3JkZXJQcm9ncmFtTmFtZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzaG91bGRVcGRhdGVRdWFudGl0eSB8fCBzaG91bGRVcGRhdGVSZWN1cnJpbmdGcmVxdWVuY3kgfHwgc2hvdWxkVXBkYXRlUmVjdXJyaW5nUHJvZ3JhbTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBsaW5lSXRlbVVwZGF0ZUZhaWxlZChjb250ZXh0OiBKUXVlcnksIHJlYXNvbjogYW55KSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHdoaWxlIHVwZGF0aW5nIGxpbmUgaXRlbSBxdWFudGl0eS4nLCByZWFzb24pO1xyXG4gICAgICAgICAgICBjb250ZXh0LmNsb3Nlc3QoJy5jYXJ0LXJvdycpLnJlbW92ZUNsYXNzKCdpcy1sb2FkaW5nJyk7XHJcblxyXG4gICAgICAgICAgICBFcnJvckhhbmRsZXIuaW5zdGFuY2UoKS5vdXRwdXRFcnJvckZyb21Db2RlKCdMaW5lSXRlbVVwZGF0ZUZhaWxlZCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGdldExpbmVJdGVtRGF0YUZvckFuYWx5dGljcyhsaW5lSXRlbTogYW55LCBxdWFudGl0eTogbnVtYmVyKSA6IGFueSB7XHJcbiAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgTGlzdDogdGhpcy5zb3VyY2UsXHJcbiAgICAgICAgICAgICAgICBEaXNwbGF5TmFtZTogbGluZUl0ZW0uUHJvZHVjdFN1bW1hcnkuRGlzcGxheU5hbWUsXHJcbiAgICAgICAgICAgICAgICBQcm9kdWN0SWQ6IGxpbmVJdGVtLlByb2R1Y3RJZCxcclxuICAgICAgICAgICAgICAgIExpc3RQcmljZTogbGluZUl0ZW0uTGlzdFByaWNlLFxyXG4gICAgICAgICAgICAgICAgQnJhbmQ6IGxpbmVJdGVtLlByb2R1Y3RTdW1tYXJ5LkJyYW5kLFxyXG4gICAgICAgICAgICAgICAgQ2F0ZWdvcnlJZDogbGluZUl0ZW0uUHJvZHVjdFN1bW1hcnkuQ2F0ZWdvcnlJZCxcclxuICAgICAgICAgICAgICAgIFZhcmlhbnQ6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgICAgIFF1YW50aXR5OiBxdWFudGl0eVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgaWYgKGxpbmVJdGVtLlZhcmlhbnRJZCAmJiBsaW5lSXRlbS5LZXlWYXJpYW50QXR0cmlidXRlc0xpc3QpIHtcclxuICAgICAgICAgICAgICAgIGRhdGEuVmFyaWFudCA9IHRoaXMuYnVpbGRWYXJpYW50TmFtZShsaW5lSXRlbS5LZXlWYXJpYW50QXR0cmlidXRlc0xpc3QpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHVwZGF0ZVF1YW50aXR5KGFjdGlvbjogc3RyaW5nLCBxdWFudGl0eTogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgICAgICAgICAgaWYgKCFhY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBxdWFudGl0eTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgc3dpdGNoIChhY3Rpb24udG9VcHBlckNhc2UoKSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnSU5DUkVNRU5UJzpcclxuICAgICAgICAgICAgICAgICAgICBxdWFudGl0eSsrO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIGNhc2UgJ0RFQ1JFTUVOVCc6XHJcbiAgICAgICAgICAgICAgICAgICAgcXVhbnRpdHktLTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocXVhbnRpdHkgPCAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1YW50aXR5ID0gMTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBxdWFudGl0eTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBkZWxldGVMaW5lSXRlbShhY3Rpb25Db250ZXh0OiBJQ29udHJvbGxlckFjdGlvbkNvbnRleHQpIHtcclxuICAgICAgICAgICAgdmFyIGNvbnRleHQ6IEpRdWVyeSA9IGFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHQ7XHJcbiAgICAgICAgICAgIHZhciBsaW5lSXRlbUlkOiBzdHJpbmcgPSA8YW55PmNvbnRleHQuZGF0YSgnbGluZWl0ZW1pZCcpO1xyXG4gICAgICAgICAgICB2YXIgcHJvZHVjdElkOiBzdHJpbmcgPSBjb250ZXh0LmF0dHIoJ2RhdGEtcHJvZHVjdGlkJyk7XHJcblxyXG4gICAgICAgICAgICBjb250ZXh0LmNsb3Nlc3QoJy5jYXJ0LXJvdycpLmFkZENsYXNzKCdpcy1sb2FkaW5nJyk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNhcnRTZXJ2aWNlLmdldENhcnQoKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKGNhcnQ6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBsaW5lSXRlbSA9IF8uZmluZChjYXJ0LkxpbmVJdGVtRGV0YWlsVmlld01vZGVscywgKGxpOiBhbnkpID0+IGxpLklkID09PSBsaW5lSXRlbUlkKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRhdGEgPSB0aGlzLmdldExpbmVJdGVtRGF0YUZvckFuYWx5dGljcyhsaW5lSXRlbSwgbGluZUl0ZW0uUXVhbnRpdHkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goJ2xpbmVJdGVtUmVtb3ZpbmcnLCB7IGRhdGE6IGRhdGEgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNhcnRTZXJ2aWNlLmRlbGV0ZUxpbmVJdGVtKGxpbmVJdGVtSWQsIHByb2R1Y3RJZCk7XHJcbiAgICAgICAgICAgICAgICB9KS5mYWlsKChyZWFzb246IGFueSkgPT4gdGhpcy5vbkxpbmVJdGVtRGVsZXRlRmFpbGVkKGNvbnRleHQsIHJlYXNvbikpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uTGluZUl0ZW1EZWxldGVGYWlsZWQoY29udGV4dDogSlF1ZXJ5LCByZWFzb246IGFueSk6IHZvaWQge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB3aGlsZSBkZWxldGluZyBsaW5lIGl0ZW0uJywgcmVhc29uKTtcclxuICAgICAgICAgICAgY29udGV4dC5jbG9zZXN0KCcuY2FydC1yb3cnKS5yZW1vdmVDbGFzcygnaXMtbG9hZGluZycpO1xyXG5cclxuICAgICAgICAgICAgRXJyb3JIYW5kbGVyLmluc3RhbmNlKCkub3V0cHV0RXJyb3JGcm9tQ29kZSgnTGluZUl0ZW1EZWxldGVGYWlsZWQnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBidWlsZFZhcmlhbnROYW1lKGt2YXM6IGFueVtdKTogc3RyaW5nIHtcclxuICAgICAgICAgICAgdmFyIG5hbWVQYXJ0czogc3RyaW5nW10gPSBbXTtcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGk6IG51bWJlciA9IDA7IGkgPCBrdmFzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWU6IGFueSA9IGt2YXNbaV0uT3JpZ2luYWxWYWx1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBuYW1lUGFydHMucHVzaCh2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuYW1lUGFydHMuam9pbignICcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L012Yy9Db21wb3NlckNsaWVudC50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBTaGlwcGluZ01ldGhvZFNlcnZpY2Uge1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAqIFJldHVybiBhIFByb21pc2Ugd2hpY2ggcmV0dXJucyB0aGUgU2hpcHBpbmdNZXRob2RzIGF2YWlsYWJsZSBmb3IgdGhlIGNhcnQuXHJcbiAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgZ2V0U2hpcHBpbmdNZXRob2RzKCk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBDb21wb3NlckNsaWVudC5nZXQoJy9hcGkvY2FydC9zaGlwcGluZ21ldGhvZHMnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvQ29udHJvbGxlci50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJQmFzZUNoZWNrb3V0Q29udHJvbGxlciBleHRlbmRzIElDb250cm9sbGVyIHtcclxuXHJcbiAgICAgICAgdmlld01vZGVsTmFtZTogc3RyaW5nO1xyXG5cclxuICAgICAgICB1bnJlZ2lzdGVyQ29udHJvbGxlcigpO1xyXG5cclxuICAgICAgICByZW5kZXJEYXRhKGNoZWNrb3V0Q29udGV4dDogSUNoZWNrb3V0Q29udGV4dCk6IFEuUHJvbWlzZTx2b2lkPjtcclxuXHJcbiAgICAgICAgZ2V0VmFsaWRhdGlvblByb21pc2UoKTogUS5Qcm9taXNlPGJvb2xlYW4+O1xyXG5cclxuICAgICAgICBnZXRVcGRhdGVNb2RlbFByb21pc2UoKTogUS5Qcm9taXNlPGFueT47XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSVJlZ2lvblNlcnZpY2Uge1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZXR1cm4gYSBQcm9taXNlIHdoaWNoIHJldHVybnMgYW4gYXJyYXkgb2YgcmVnaW9uLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldFJlZ2lvbnMoKTogUS5Qcm9taXNlPGFueT47XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9NdmMvQ29tcG9zZXJDbGllbnQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9JUmVnaW9uU2VydmljZS50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFJlZ2lvblNlcnZpY2UgaW1wbGVtZW50cyBJUmVnaW9uU2VydmljZSB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgX21lbW9pemVHZXRSZWdpb25zOiBGdW5jdGlvbjtcclxuXHJcbiAgICAgICAgcHVibGljIGdldFJlZ2lvbnMoKTogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgIGlmIChfLmlzVW5kZWZpbmVkKHRoaXMuX21lbW9pemVHZXRSZWdpb25zKSkge1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuX21lbW9pemVHZXRSZWdpb25zID0gXy5tZW1vaXplKGFyZyA9PiB0aGlzLmdldFJlZ2lvbnNJbXBsKCkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbWVtb2l6ZUdldFJlZ2lvbnMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICBwcml2YXRlIGdldFJlZ2lvbnNJbXBsKCk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBDb21wb3NlckNsaWVudC5nZXQoJy9hcGkvYWRkcmVzcy9yZWdpb25zJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElDaGVja291dFNlcnZpY2Uge1xyXG5cclxuICAgICAgICByZWdpc3RlckNvbnRyb2xsZXIoY29udHJvbGxlcjogSUNvbnRyb2xsZXIpO1xyXG5cclxuICAgICAgICB1bnJlZ2lzdGVyQ29udHJvbGxlcihjb250cm9sbGVyTmFtZTogc3RyaW5nKTtcclxuXHJcbiAgICAgICAgZ2V0Q2FydCgpOiBRLlByb21pc2U8YW55PjtcclxuXHJcbiAgICAgICAgdXBkYXRlQ2FydCgpOiBRLlByb21pc2U8SVVwZGF0ZUNhcnRSZXN1bHQ+O1xyXG5cclxuICAgICAgICBjb21wbGV0ZUNoZWNrb3V0KCk6IFEuUHJvbWlzZTxJQ29tcGxldGVDaGVja291dFJlc3VsdD47XHJcblxyXG4gICAgICAgIHVwZGF0ZVBvc3RhbENvZGUocG9zdGFsQ29kZTogc3RyaW5nKTogUS5Qcm9taXNlPHZvaWQ+O1xyXG5cclxuICAgICAgICBpbnZhbGlkYXRlQ2FjaGUoKTogUS5Qcm9taXNlPHZvaWQ+O1xyXG5cclxuICAgICAgICBzZXRPcmRlckNvbmZpcm1hdGlvblRvQ2FjaGUob3JkZXJDb25maXJtYXRpb252aWV3TW9kZWwgOiBhbnkpIDogdm9pZDtcclxuXHJcbiAgICAgICAgZ2V0T3JkZXJDb25maXJtYXRpb25Gcm9tQ2FjaGUoKTogUS5Qcm9taXNlPGFueT47XHJcblxyXG4gICAgICAgIGNsZWFyT3JkZXJDb25maXJtYXRpb25Gcm9tQ2FjaGUoKTogdm9pZDtcclxuXHJcbiAgICAgICAgc2V0T3JkZXJUb0NhY2hlKG9yZGVyQ29uZmlybWF0aW9udmlld01vZGVsIDogYW55KSA6IHZvaWQ7XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJQ2hlY2tvdXRDb250ZXh0IHtcclxuICAgICAgICBhdXRoZW50aWNhdGlvblZpZXdNb2RlbDogSUF1dGhlbnRpY2F0aW9uVmlld01vZGVsO1xyXG4gICAgICAgIGNhcnRWaWV3TW9kZWw6IGFueTtcclxuICAgICAgICByZWdpb25zVmlld01vZGVsOiBhbnk7XHJcbiAgICAgICAgc2hpcHBpbmdNZXRob2RzVmlld01vZGVsOiBhbnk7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJQXV0aGVudGljYXRpb25WaWV3TW9kZWwge1xyXG4gICAgICAgIElzQXV0aGVudGljYXRlZDogYm9vbGVhbjtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElDYXJ0Vmlld01vZGVsIHtcclxuICAgICAgICBJc0F1dGhlbnRpY2F0ZWQ6IGJvb2xlYW47XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG5cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSVZhbGlkYXRpb25DYWxsYmFjayB7XHJcbiAgICAgICAgKCk6IFEuUHJvbWlzZTxib29sZWFuPjtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElVcGRhdGVDYWxsYmFjayB7XHJcbiAgICAgICAgKCk6IFEuUHJvbWlzZTxhbnk+O1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSVJlZ2lzdGVyT3B0aW9ucyB7XHJcbiAgICAgICAgdmFsaWRhdGlvbkNhbGxiYWNrOiBGdW5jdGlvbjtcclxuICAgICAgICB1cGRhdGVDYWxsYmFjazogRnVuY3Rpb247XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJUmVnaXN0ZXJDb250cm9sT3B0aW9ucyBleHRlbmRzIElSZWdpc3Rlck9wdGlvbnMge1xyXG4gICAgICAgIGlzUmVhZHk6IGJvb2xlYW47XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5NeUFjY291bnQuVUkvQ29tbW9uL1NvdXJjZS9UeXBlc2NyaXB0L01lbWJlcnNoaXBTZXJ2aWNlLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0Vycm9ySGFuZGxpbmcvRXJyb3JIYW5kbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L1JlcG9zaXRvcmllcy9DYXJ0UmVwb3NpdG9yeS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9DaGVja291dFNoaXBwaW5nTWV0aG9kL3NvdXJjZS9UeXBlc2NyaXB0L1NoaXBwaW5nTWV0aG9kU2VydmljZS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9DYXJ0U3VtbWFyeS9Tb3VyY2UvVHlwZXNjcmlwdC9DYXJ0U2VydmljZS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL0lCYXNlQ2hlY2tvdXRDb250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vUmVnaW9uU2VydmljZS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL0lDaGVja291dFNlcnZpY2UudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9JQ2hlY2tvdXRDb250ZXh0LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vSVJlZ2lzdGVyT3B0aW9ucy50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBDaGVja291dFNlcnZpY2UgaW1wbGVtZW50cyBJQ2hlY2tvdXRTZXJ2aWNlIHtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IElDaGVja291dFNlcnZpY2U7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgY2hlY2tvdXRTdGVwOiBudW1iZXI7XHJcblxyXG4gICAgICAgIHByaXZhdGUgb3JkZXJDb25maXJtYXRpb25DYWNoZUtleSA9ICdvcmRlckNvbmZpcm1hdGlvbkNhY2hlS2V5JztcclxuICAgICAgICBwcml2YXRlIG9yZGVyQ2FjaGVLZXkgPSAnb3JkZXJDYWNoZUtleSc7XHJcblxyXG4gICAgICAgIHByaXZhdGUgd2luZG93OiBXaW5kb3c7XHJcbiAgICAgICAgcHJpdmF0ZSBldmVudEh1YjogSUV2ZW50SHViO1xyXG4gICAgICAgIHByaXZhdGUgcmVnaXN0ZXJlZENvbnRyb2xsZXJzOiBhbnkgPSB7fTtcclxuICAgICAgICBwcml2YXRlIGFsbENvbnRyb2xsZXJzUmVhZHk6IFEuRGVmZXJyZWQ8Ym9vbGVhbj47XHJcbiAgICAgICAgcHJpdmF0ZSBjYWNoZVByb3ZpZGVyOiBJQ2FjaGVQcm92aWRlcjtcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGNhcnRTZXJ2aWNlOiBJQ2FydFNlcnZpY2U7XHJcbiAgICAgICAgcHJvdGVjdGVkIG1lbWJlcnNoaXBTZXJ2aWNlOiBJTWVtYmVyc2hpcFNlcnZpY2U7XHJcbiAgICAgICAgcHJvdGVjdGVkIHJlZ2lvblNlcnZpY2U6IElSZWdpb25TZXJ2aWNlO1xyXG4gICAgICAgIHByb3RlY3RlZCBzaGlwcGluZ01ldGhvZFNlcnZpY2U6IFNoaXBwaW5nTWV0aG9kU2VydmljZTtcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBnZXRJbnN0YW5jZSgpOiBJQ2hlY2tvdXRTZXJ2aWNlIHtcclxuXHJcbiAgICAgICAgICAgIGlmICghQ2hlY2tvdXRTZXJ2aWNlLmluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICBDaGVja291dFNlcnZpY2UuaW5zdGFuY2UgPSBuZXcgQ2hlY2tvdXRTZXJ2aWNlKCk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gQ2hlY2tvdXRTZXJ2aWNlLmluc3RhbmNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGNvbnN0cnVjdG9yKCkge1xyXG5cclxuICAgICAgICAgICAgaWYgKENoZWNrb3V0U2VydmljZS5pbnN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnN0YW50aWF0aW9uIGZhaWxlZDogVXNlIENoZWNrb3V0U2VydmljZS5pbnN0YW5jZSgpIGluc3RlYWQgb2YgbmV3LicpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViID0gRXZlbnRIdWIuaW5zdGFuY2UoKTtcclxuICAgICAgICAgICAgdGhpcy53aW5kb3cgPSB3aW5kb3c7XHJcbiAgICAgICAgICAgIHRoaXMuYWxsQ29udHJvbGxlcnNSZWFkeSA9IFEuZGVmZXI8Ym9vbGVhbj4oKTtcclxuICAgICAgICAgICAgdGhpcy5jYWNoZVByb3ZpZGVyID0gQ2FjaGVQcm92aWRlci5pbnN0YW5jZSgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jYXJ0U2VydmljZSA9IG5ldyBDYXJ0U2VydmljZShuZXcgQ2FydFJlcG9zaXRvcnkoKSwgdGhpcy5ldmVudEh1Yik7XHJcbiAgICAgICAgICAgIHRoaXMubWVtYmVyc2hpcFNlcnZpY2UgPSBuZXcgTWVtYmVyc2hpcFNlcnZpY2UobmV3IE1lbWJlcnNoaXBSZXBvc2l0b3J5KCkpO1xyXG4gICAgICAgICAgICB0aGlzLnJlZ2lvblNlcnZpY2UgPSBuZXcgUmVnaW9uU2VydmljZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnNoaXBwaW5nTWV0aG9kU2VydmljZSA9IG5ldyBTaGlwcGluZ01ldGhvZFNlcnZpY2UoKTtcclxuICAgICAgICAgICAgdGhpcy5yZWdpc3RlckFsbENvbnRyb2xsZXJzSW5pdGlhbGl6ZWQoKTtcclxuXHJcbiAgICAgICAgICAgIENoZWNrb3V0U2VydmljZS5pbnN0YW5jZSA9IHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgcmVnaXN0ZXJBbGxDb250cm9sbGVyc0luaXRpYWxpemVkKCk6IHZvaWQge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5zdWJzY3JpYmUoJ2FsbENvbnRyb2xsZXJzSW5pdGlhbGl6ZWQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmluaXRpYWxpemUoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGluaXRpYWxpemUoKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgYXV0aGVudGljYXRlZFByb21pc2UgPSB0aGlzLm1lbWJlcnNoaXBTZXJ2aWNlLmlzQXV0aGVudGljYXRlZCgpO1xyXG4gICAgICAgICAgICB2YXIgZ2V0Q2FydFByb21pc2UgPSB0aGlzLmdldENhcnQoKTtcclxuICAgICAgICAgICAgdmFyIHJlZ2lvbnNQcm9taXNlOiBRLlByb21pc2U8YW55PiA9IHRoaXMucmVnaW9uU2VydmljZS5nZXRSZWdpb25zKCk7XHJcbiAgICAgICAgICAgIHZhciBzaGlwcGluZ01ldGhvZHNQcm9taXNlOiBRLlByb21pc2U8YW55PiA9IHRoaXMuc2hpcHBpbmdNZXRob2RTZXJ2aWNlLmdldFNoaXBwaW5nTWV0aG9kcygpO1xyXG5cclxuICAgICAgICAgICAgUS5hbGwoW2F1dGhlbnRpY2F0ZWRQcm9taXNlLCBnZXRDYXJ0UHJvbWlzZSwgcmVnaW9uc1Byb21pc2UsIHNoaXBwaW5nTWV0aG9kc1Byb21pc2VdKVxyXG4gICAgICAgICAgICAgICAgLnNwcmVhZCgoYXV0aFZtLCBjYXJ0Vm0sIHJlZ2lvbnNWbSwgc2hpcHBpbmdNZXRob2RzVm0pID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdHM6IElDaGVja291dENvbnRleHQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1dGhlbnRpY2F0aW9uVmlld01vZGVsOiBhdXRoVm0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhcnRWaWV3TW9kZWw6IGNhcnRWbSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVnaW9uc1ZpZXdNb2RlbDogcmVnaW9uc1ZtLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzaGlwcGluZ01ldGhvZHNWaWV3TW9kZWw6IHNoaXBwaW5nTWV0aG9kc1ZtXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyQ29udHJvbGxlcnMocmVzdWx0cyk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWxsQ29udHJvbGxlcnNSZWFkeS5yZXNvbHZlKHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5mYWlsKChyZWFzb246IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHdoaWxlIGluaXRpYWxpemluZyBDaGVja291dFNlcnZpY2UuJywgcmVhc29uKTtcclxuICAgICAgICAgICAgICAgICAgICBFcnJvckhhbmRsZXIuaW5zdGFuY2UoKS5vdXRwdXRFcnJvckZyb21Db2RlKCdDaGVja291dFJlbmRlckZhaWxlZCcpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgcmVnaXN0ZXJDb250cm9sbGVyKGNvbnRyb2xsZXI6IElCYXNlQ2hlY2tvdXRDb250cm9sbGVyKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5hbGxDb250cm9sbGVyc1JlYWR5LnByb21pc2UuaXNQZW5kaW5nKCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWxsQ29udHJvbGxlcnNSZWFkeS5yZXNvbHZlKGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5hbGxDb250cm9sbGVyc1JlYWR5LnByb21pc2VcclxuICAgICAgICAgICAgICAgIC50aGVuKGFsbENvbnRyb2xsZXJzUmVhZHkgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoYWxsQ29udHJvbGxlcnNSZWFkeSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RvbyBsYXRlIHRvIHJlZ2lzdGVyIGFsbCBjb250cm9sbGVycyBhcmUgcmVhZHkuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRyb2xsZXJOYW1lID0gY29udHJvbGxlci52aWV3TW9kZWxOYW1lO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZ2lzdGVyZWRDb250cm9sbGVyc1tjb250cm9sbGVyTmFtZV0gPSBjb250cm9sbGVyO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdW5yZWdpc3RlckNvbnRyb2xsZXIoY29udHJvbGxlck5hbWU6IHN0cmluZykge1xyXG5cclxuICAgICAgICAgICAgZGVsZXRlIHRoaXMucmVnaXN0ZXJlZENvbnRyb2xsZXJzW2NvbnRyb2xsZXJOYW1lXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyByZW5kZXJDb250cm9sbGVycyhjaGVja291dENvbnRleHQ6IElDaGVja291dENvbnRleHQpOiBRLlByb21pc2U8dm9pZFtdPiB7XHJcblxyXG4gICAgICAgICAgICB2YXIgY29udHJvbGxlckluc3RhbmNlOiBJQmFzZUNoZWNrb3V0Q29udHJvbGxlcixcclxuICAgICAgICAgICAgICAgIHJlbmRlckRhdGFQcm9taXNlczogUS5Qcm9taXNlPHZvaWQ+W10gPSBbXTtcclxuXHJcbiAgICAgICAgICAgICBmb3IgKHZhciBjb250cm9sbGVyTmFtZSBpbiB0aGlzLnJlZ2lzdGVyZWRDb250cm9sbGVycykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucmVnaXN0ZXJlZENvbnRyb2xsZXJzLmhhc093blByb3BlcnR5KGNvbnRyb2xsZXJOYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXJJbnN0YW5jZSA9IDxJQmFzZUNoZWNrb3V0Q29udHJvbGxlcj50aGlzLnJlZ2lzdGVyZWRDb250cm9sbGVyc1tjb250cm9sbGVyTmFtZV07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJlbmRlckRhdGFQcm9taXNlcy5wdXNoKGNvbnRyb2xsZXJJbnN0YW5jZS5yZW5kZXJEYXRhKGNoZWNrb3V0Q29udGV4dCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gUS5hbGwocmVuZGVyRGF0YVByb21pc2VzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB1cGRhdGVQb3N0YWxDb2RlKHBvc3RhbENvZGU6IHN0cmluZyk6IFEuUHJvbWlzZTx2b2lkPiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jYXJ0U2VydmljZS51cGRhdGVCaWxsaW5nTWV0aG9kUG9zdGFsQ29kZShwb3N0YWxDb2RlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnZhbGlkYXRlQ2FjaGUoKTogUS5Qcm9taXNlPHZvaWQ+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNhcnRTZXJ2aWNlLmludmFsaWRhdGVDYWNoZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGdldENhcnQoKTogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgaWYgKCFfLmlzTnVtYmVyKENoZWNrb3V0U2VydmljZS5jaGVja291dFN0ZXApKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NoZWNrb3V0U2VydmljZS5jaGVja291dFN0ZXAgaGFzIG5vdCBiZWVuIHNldCBvciBpcyBub3QgYSBudW1iZXIuJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmludmFsaWRhdGVDYWNoZSgpXHJcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB0aGlzLmNhcnRTZXJ2aWNlLmdldENhcnQoKSlcclxuICAgICAgICAgICAgICAgIC50aGVuKGNhcnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmhhbmRsZUNoZWNrb3V0U2VjdXJpdHkoY2FydCwgQ2hlY2tvdXRTZXJ2aWNlLmNoZWNrb3V0U3RlcCk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmZhaWwocmVhc29uID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZUVycm9yKHJlYXNvbik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB1cGRhdGVDYXJ0KCk6IFEuUHJvbWlzZTxJVXBkYXRlQ2FydFJlc3VsdD4ge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5hbGxDb250cm9sbGVyc1JlYWR5LnByb21pc2VcclxuICAgICAgICAgICAgLnRoZW4oYWxsQ29udHJvbGxlcnNSZWFkeSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWFsbENvbnRyb2xsZXJzUmVhZHkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0FsbCByZWdpc3RlcmVkIGNvbnRyb2xsZXJzIGFyZSBub3QgcmVhZHkuJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFfLmlzTnVtYmVyKENoZWNrb3V0U2VydmljZS5jaGVja291dFN0ZXApKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NoZWNrb3V0U2VydmljZS5jaGVja291dFN0ZXAgaGFzIG5vdCBiZWVuIHNldCBvciBpcyBub3QgYSBudW1iZXIuJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBlbXB0eVZtID0ge1xyXG4gICAgICAgICAgICAgICAgQ3VycmVudFN0ZXA6IENoZWNrb3V0U2VydmljZS5jaGVja291dFN0ZXAsXHJcbiAgICAgICAgICAgICAgICBVcGRhdGVkQ2FydDoge31cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmJ1aWxkQ2FydFVwZGF0ZVZpZXdNb2RlbChlbXB0eVZtKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4odm0gPT4gdGhpcy5jYXJ0U2VydmljZS51cGRhdGVDYXJ0KHZtKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgY29tcGxldGVDaGVja291dCgpOiBRLlByb21pc2U8SUNvbXBsZXRlQ2hlY2tvdXRSZXN1bHQ+IHtcclxuXHJcbiAgICAgICAgICAgIGlmICghXy5pc051bWJlcihDaGVja291dFNlcnZpY2UuY2hlY2tvdXRTdGVwKSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDaGVja291dFNlcnZpY2UuY2hlY2tvdXRTdGVwIGhhcyBub3QgYmVlbiBzZXQgb3IgaXMgbm90IGEgbnVtYmVyLicpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZW1wdHlWbSA9IHtcclxuICAgICAgICAgICAgICAgIEN1cnJlbnRTdGVwOiBDaGVja291dFNlcnZpY2UuY2hlY2tvdXRTdGVwLFxyXG4gICAgICAgICAgICAgICAgVXBkYXRlZENhcnQ6IHt9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5idWlsZENhcnRVcGRhdGVWaWV3TW9kZWwoZW1wdHlWbSlcclxuICAgICAgICAgICAgICAgIC50aGVuKHZtID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF8uaXNFbXB0eSh2bS5VcGRhdGVkQ2FydCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ05vIG1vZGlmaWNhdGlvbiByZXF1aXJlZCB0byB0aGUgY2FydC4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHZtO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FydFNlcnZpY2UudXBkYXRlQ2FydCh2bSk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLnRoZW4ocmVzdWx0ID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAmJiByZXN1bHQuSGFzRXJyb3JzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3Igd2hpbGUgdXBkYXRpbmcgdGhlIGNhcnQuIENvbXBsZXRlIENoZWNrb3V0IHdpbGwgbm90IGNvbXBsZXRlLicpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1B1Ymxpc2hpbmcgdGhlIGNhcnQhJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNhcnRTZXJ2aWNlLmNvbXBsZXRlQ2hlY2tvdXQoQ2hlY2tvdXRTZXJ2aWNlLmNoZWNrb3V0U3RlcCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgYnVpbGRDYXJ0VXBkYXRlVmlld01vZGVsKHZtOiBhbnkpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICB2YXIgdmFsaWRhdGlvblByb21pc2U6IFEuUHJvbWlzZTxhbnk+O1xyXG4gICAgICAgICAgICB2YXIgdmlld01vZGVsVXBkYXRlUHJvbWlzZTogUS5Qcm9taXNlPGFueT47XHJcblxyXG4gICAgICAgICAgICB2YWxpZGF0aW9uUHJvbWlzZSA9IFEodm0pLnRoZW4odm0gPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q2FydFZhbGlkYXRpb24odm0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHZpZXdNb2RlbFVwZGF0ZVByb21pc2UgPSB2YWxpZGF0aW9uUHJvbWlzZS50aGVuKHZtID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldENhcnRVcGRhdGVWaWV3TW9kZWwodm0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB2aWV3TW9kZWxVcGRhdGVQcm9taXNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXRDYXJ0VmFsaWRhdGlvbih2bSA6IGFueSk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIHZhciB2YWxpZGF0aW9uUHJvbWlzZSA9IHRoaXMuY29sbGVjdFZhbGlkYXRpb25Qcm9taXNlcygpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHByb21pc2UgPSB2YWxpZGF0aW9uUHJvbWlzZS50aGVuKChyZXN1bHRzIDogQXJyYXk8Ym9vbGVhbj4pID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdBZ2dyZWdyYXRpbmcgYWxsIHZhbGlkYXRpb24gcmVzdWx0cycpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGhhc0ZhaWxlZFZhbGlkYXRpb24gPSBfLmFueShyZXN1bHRzLCByID0+ICFyKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaGFzRmFpbGVkVmFsaWRhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlcmUgd2VyZSB2YWxpZGF0aW9uIGVycm9ycy4nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdm07XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGdldENhcnRVcGRhdGVWaWV3TW9kZWwodm06IGFueSk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIHZhciB1cGRhdGVNb2RlbFByb21pc2UgPSB0aGlzLmNvbGxlY3RVcGRhdGVNb2RlbFByb21pc2VzKCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgcHJvbWlzZSA9IHVwZGF0ZU1vZGVsUHJvbWlzZS50aGVuKCh1cGRhdGVzOiBBcnJheTxhbnk+KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnQWdncmVnYXRpbmcgYWxsIFZpZXdNb2RlbCB1cGRhdGVzLicpO1xyXG5cclxuICAgICAgICAgICAgICAgIF8uZWFjaCh1cGRhdGVzLCB1cGRhdGUgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodXBkYXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgdmFyIGtleXMgPSBfLmtleXModXBkYXRlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXy5lYWNoKGtleXMsIGtleSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2bS5VcGRhdGVkQ2FydFtrZXldID0gdXBkYXRlW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiB2bTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgY29sbGVjdFZhbGlkYXRpb25Qcm9taXNlcygpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICB2YXIgcHJvbWlzZXM6IFEuUHJvbWlzZTxhbnk+W10gPSBbXTtcclxuICAgICAgICAgICAgdmFyIGNvbnRyb2xsZXJJbnN0YW5jZTogSUJhc2VDaGVja291dENvbnRyb2xsZXI7XHJcbiAgICAgICAgICAgIHZhciBjb250cm9sbGVyT3B0aW9uczogSVJlZ2lzdGVyQ29udHJvbE9wdGlvbnM7XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBjb250cm9sbGVyTmFtZSBpbiB0aGlzLnJlZ2lzdGVyZWRDb250cm9sbGVycykge1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlZ2lzdGVyZWRDb250cm9sbGVycy5oYXNPd25Qcm9wZXJ0eShjb250cm9sbGVyTmFtZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVySW5zdGFuY2UgPSA8SUJhc2VDaGVja291dENvbnRyb2xsZXI+dGhpcy5yZWdpc3RlcmVkQ29udHJvbGxlcnNbY29udHJvbGxlck5hbWVdO1xyXG4gICAgICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2goY29udHJvbGxlckluc3RhbmNlLmdldFZhbGlkYXRpb25Qcm9taXNlKCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gUS5hbGwocHJvbWlzZXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBjb2xsZWN0VXBkYXRlTW9kZWxQcm9taXNlcygpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICB2YXIgcHJvbWlzZXM6IFEuUHJvbWlzZTxhbnk+W10gPSBbXTtcclxuICAgICAgICAgICAgdmFyIGNvbnRyb2xsZXJJbnN0YW5jZTogSUJhc2VDaGVja291dENvbnRyb2xsZXI7XHJcbiAgICAgICAgICAgIHZhciBjb250cm9sbGVyT3B0aW9uczogSVJlZ2lzdGVyQ29udHJvbE9wdGlvbnM7XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBjb250cm9sbGVyTmFtZSBpbiB0aGlzLnJlZ2lzdGVyZWRDb250cm9sbGVycykge1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlZ2lzdGVyZWRDb250cm9sbGVycy5oYXNPd25Qcm9wZXJ0eShjb250cm9sbGVyTmFtZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVySW5zdGFuY2UgPSA8SUJhc2VDaGVja291dENvbnRyb2xsZXI+dGhpcy5yZWdpc3RlcmVkQ29udHJvbGxlcnNbY29udHJvbGxlck5hbWVdO1xyXG4gICAgICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2goY29udHJvbGxlckluc3RhbmNlLmdldFVwZGF0ZU1vZGVsUHJvbWlzZSgpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFEuYWxsKHByb21pc2VzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgaGFuZGxlQ2hlY2tvdXRTZWN1cml0eShjYXJ0OiBhbnksIHRhcmdldGVkU3RlcDogbnVtYmVyKTogYW55IHtcclxuXHJcbiAgICAgICAgICAgIHZhciBsYXN0U3RlcDogbnVtYmVyID0gY2FydC5PcmRlclN1bW1hcnkuQ2hlY2tvdXRSZWRpcmVjdEFjdGlvbi5MYXN0Q2hlY2tvdXRTdGVwO1xyXG4gICAgICAgICAgICB2YXIgcmVkaXJlY3RVcmw6IHN0cmluZyA9IGNhcnQuT3JkZXJTdW1tYXJ5LkNoZWNrb3V0UmVkaXJlY3RBY3Rpb24uUmVkaXJlY3RVcmw7XHJcblxyXG4gICAgICAgICAgICBpZiAodGFyZ2V0ZWRTdGVwID4gbGFzdFN0ZXApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMud2luZG93LmxvY2F0aW9uLmhyZWYgPSByZWRpcmVjdFVybDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGNhcnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGhhbmRsZUVycm9yKHJlYXNvbjogYW55KTogdm9pZCB7XHJcblxyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdVbmFibGUgdG8gcmV0cmlldmUgdGhlIGNhcnQgZm9yIHRoZSBjaGVja291dCcsIHJlYXNvbik7XHJcblxyXG4gICAgICAgICAgICB0aHJvdyByZWFzb247XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc2V0T3JkZXJDb25maXJtYXRpb25Ub0NhY2hlKG9yZGVyQ29uZmlybWF0aW9udmlld01vZGVsIDogYW55KSA6IHZvaWQge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jYWNoZVByb3ZpZGVyLmRlZmF1bHRDYWNoZS5zZXQodGhpcy5vcmRlckNvbmZpcm1hdGlvbkNhY2hlS2V5LCBvcmRlckNvbmZpcm1hdGlvbnZpZXdNb2RlbCkuZG9uZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGdldE9yZGVyQ29uZmlybWF0aW9uRnJvbUNhY2hlKCk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNhY2hlUHJvdmlkZXIuZGVmYXVsdENhY2hlLmdldDxhbnk+KHRoaXMub3JkZXJDb25maXJtYXRpb25DYWNoZUtleSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgY2xlYXJPcmRlckNvbmZpcm1hdGlvbkZyb21DYWNoZSgpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgICAgICB0aGlzLmNhY2hlUHJvdmlkZXIuZGVmYXVsdENhY2hlLmNsZWFyKHRoaXMub3JkZXJDb25maXJtYXRpb25DYWNoZUtleSkuZG9uZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHNldE9yZGVyVG9DYWNoZShvcmRlckNvbmZpcm1hdGlvbnZpZXdNb2RlbCA6IGFueSkgOiB2b2lkIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY2FjaGVQcm92aWRlci5kZWZhdWx0Q2FjaGUuc2V0KHRoaXMub3JkZXJDYWNoZUtleSwgb3JkZXJDb25maXJtYXRpb252aWV3TW9kZWwpLmRvbmUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9KUXVlcnlQbHVnaW5zL0lTZXJpYWxpemVPYmplY3RKcXVlcnlQbHVnaW4udHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvRXJyb3JIYW5kbGluZy9FcnJvckhhbmRsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nQ2hlY2tvdXRTZXJ2aWNlLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIEJhc2VDaGVja291dENvbnRyb2xsZXIgZXh0ZW5kcyBPcmNrZXN0cmEuQ29tcG9zZXIuQ29udHJvbGxlciBpbXBsZW1lbnRzIE9yY2tlc3RyYS5Db21wb3Nlci5JQmFzZUNoZWNrb3V0Q29udHJvbGxlciB7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBkZWJvdW5jZUhhbmRsZTtcclxuICAgICAgICBwcm90ZWN0ZWQgZGVib3VuY2VUaW1lb3V0OiBudW1iZXIgPSAzMDA7XHJcbiAgICAgICAgcHJvdGVjdGVkIGZvcm1JbnN0YW5jZXM6IElQYXJzbGV5W107XHJcbiAgICAgICAgcHJvdGVjdGVkIGNoZWNrb3V0U2VydmljZTogSUNoZWNrb3V0U2VydmljZTtcclxuXHJcbiAgICAgICAgcHVibGljIHZpZXdNb2RlbE5hbWU6IHN0cmluZztcclxuXHJcbiAgICAgICAgcHVibGljIGluaXRpYWxpemUoKSB7XHJcblxyXG4gICAgICAgICAgICBzdXBlci5pbml0aWFsaXplKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNoZWNrb3V0U2VydmljZSA9IENoZWNrb3V0U2VydmljZS5nZXRJbnN0YW5jZSgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5yZWdpc3RlckNvbnRyb2xsZXIoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCByZWdpc3RlckNvbnRyb2xsZXIoKSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNoZWNrb3V0U2VydmljZS5yZWdpc3RlckNvbnRyb2xsZXIodGhpcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdW5yZWdpc3RlckNvbnRyb2xsZXIoKSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNoZWNrb3V0U2VydmljZS51bnJlZ2lzdGVyQ29udHJvbGxlcih0aGlzLnZpZXdNb2RlbE5hbWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHJlbmRlckRhdGEoY2hlY2tvdXRDb250ZXh0OiBJQ2hlY2tvdXRDb250ZXh0KTogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNZXRob2Qgbm90IGltcGxlbWVudGVkJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZ2V0VmFsaWRhdGlvblByb21pc2UoKTogUS5Qcm9taXNlPGJvb2xlYW4+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBRLmZjYWxsKCgpID0+IHRoaXMuaXNWYWxpZEZvclVwZGF0ZSgpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBnZXRVcGRhdGVNb2RlbFByb21pc2UoKTogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFEuZmNhbGwoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdmFyIHZtID0ge307XHJcbiAgICAgICAgICAgICAgICB2bVt0aGlzLnZpZXdNb2RlbE5hbWVdID0gdGhpcy5nZXRWaWV3TW9kZWxVcGRhdGVkKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZtO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCByZWdpc3RlclN1YnNjcmlwdGlvbnMoKTogdm9pZCB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnN1YnNjcmliZShgJHt0aGlzLnZpZXdNb2RlbE5hbWV9UmVuZGVyZWRgLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZvcm1JbnN0YW5jZXMgPSB0aGlzLnJlZ2lzdGVyRm9ybXNGb3JWYWxpZGF0aW9uKCQoJ2Zvcm0nLCB0aGlzLmNvbnRleHQuY29udGFpbmVyKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGdldFZpZXdNb2RlbFVwZGF0ZWQoKTogc3RyaW5nIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBmb3JtQ29udGV4dCA9ICQoJ2Zvcm0nLCB0aGlzLmNvbnRleHQuY29udGFpbmVyKSxcclxuICAgICAgICAgICAgICAgIHZpZXdNb2RlbCA9ICg8SVNlcmlhbGl6ZU9iamVjdEpxdWVyeVBsdWdpbj5mb3JtQ29udGV4dCkuc2VyaWFsaXplT2JqZWN0KCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodmlld01vZGVsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBpc1ZhbGlkRm9yVXBkYXRlKCk6IGJvb2xlYW4ge1xyXG5cclxuICAgICAgICAgICAgdmFyIGlzVmFsaWRGb3JVcGRhdGUgPSBfLmFsbCh0aGlzLmZvcm1JbnN0YW5jZXMsIGZvcm1JbnN0YW5jZSA9PiBmb3JtSW5zdGFuY2UudmFsaWRhdGUodW5kZWZpbmVkLCB0cnVlKSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gaXNWYWxpZEZvclVwZGF0ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvblJlbmRlckRhdGFGYWlsZWQocmVhc29uOiBhbnkpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlTG9hZGluZygpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgcmVuZGVyaW5nIHRoZSBjb250cm9sIGluIGNoYXJnZSBvZiAnJHt0aGlzLnZpZXdNb2RlbE5hbWV9Jy5gLCByZWFzb24pO1xyXG4gICAgICAgICAgICBFcnJvckhhbmRsZXIuaW5zdGFuY2UoKS5vdXRwdXRFcnJvckZyb21Db2RlKCdDaGVja291dFJlbmRlckZhaWxlZCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHJlbW92ZUxvYWRpbmcoKTogdm9pZCB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNvbnRleHQuY29udGFpbmVyLmZpbmQoJy5qcy1sb2FkaW5nJykuaGlkZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NoZWNrb3V0Q29tbW9uL3NvdXJjZS9UeXBlc2NyaXB0L0Jhc2VDaGVja291dENvbnRyb2xsZXIudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgQmlsbGluZ0FkZHJlc3NDaGVja291dENvbnRyb2xsZXIgZXh0ZW5kcyBPcmNrZXN0cmEuQ29tcG9zZXIuQmFzZUNoZWNrb3V0Q29udHJvbGxlciB7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKCkge1xyXG5cclxuICAgICAgICAgICAgdGhpcy52aWV3TW9kZWxOYW1lID0gJ0JpbGxpbmdBZGRyZXNzJztcclxuXHJcbiAgICAgICAgICAgIHN1cGVyLmluaXRpYWxpemUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICBwdWJsaWMgY2hhbmdlVXNlU2hpcHBpbmdBZGRyZXNzKCkge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zZXRCaWxsaW5nQWRkcmVzc0Zvcm1WaXNpYmlsaXR5KCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0QmlsbGluZ0FkZHJlc3NGb3JtVmFsaWRhdGlvbigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHJlbmRlckRhdGEoY2hlY2tvdXRDb250ZXh0OiBJQ2hlY2tvdXRDb250ZXh0KTogUS5Qcm9taXNlPHZvaWQ+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBRLmZjYWxsKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChjaGVja291dENvbnRleHQuYXV0aGVudGljYXRpb25WaWV3TW9kZWwuSXNBdXRoZW50aWNhdGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJBdXRoZW50aWNhdGVkKGNoZWNrb3V0Q29udGV4dCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyVW5hdXRoZW50aWNhdGVkKGNoZWNrb3V0Q29udGV4dCk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCByZW5kZXJBdXRoZW50aWNhdGVkKGNoZWNrb3V0Q29udGV4dDogSUNoZWNrb3V0Q29udGV4dCkge1xyXG5cclxuICAgICAgICAgICAgdGhpcy51bnJlZ2lzdGVyQ29udHJvbGxlcigpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcih0aGlzLnZpZXdNb2RlbE5hbWUsIGNoZWNrb3V0Q29udGV4dC5hdXRoZW50aWNhdGlvblZpZXdNb2RlbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgcmVuZGVyVW5hdXRoZW50aWNhdGVkKGNoZWNrb3V0Q29udGV4dDogSUNoZWNrb3V0Q29udGV4dCkge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5yZWdpc3RlclN1YnNjcmlwdGlvbnMoKTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXIodGhpcy52aWV3TW9kZWxOYW1lLCBjaGVja291dENvbnRleHQuY2FydFZpZXdNb2RlbCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKCdBZGRyZXNzUmVnaW9uUGlja2VyJywge1xyXG4gICAgICAgICAgICAgICAgUmVnaW9uczogY2hlY2tvdXRDb250ZXh0LnJlZ2lvbnNWaWV3TW9kZWwsXHJcbiAgICAgICAgICAgICAgICBTZWxlY3RlZFJlZ2lvbiA6IHRoaXMuZ2V0UmVnaW9uQ29kZShjaGVja291dENvbnRleHQuY2FydFZpZXdNb2RlbClcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaChgJHt0aGlzLnZpZXdNb2RlbE5hbWV9UmVuZGVyZWRgLCBjaGVja291dENvbnRleHQuY2FydFZpZXdNb2RlbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgcmVnaXN0ZXJTdWJzY3JpcHRpb25zKCkge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5zdWJzY3JpYmUoYCR7dGhpcy52aWV3TW9kZWxOYW1lfVJlbmRlcmVkYCwgKCkgPT4gdGhpcy5vblJlbmRlcmVkKCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHJlbmRlckRhdGFGYWlsZWQocmVhc29uOiBhbnkpOiB2b2lkIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHJlbmRlciBCaWxsaW5nIEFkZHJlc3MgY29udHJvbCcsIHJlYXNvbik7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGV4dC5jb250YWluZXIuZmluZCgnLmpzLWxvYWRpbmcnKS5oaWRlKCk7XHJcblxyXG4gICAgICAgICAgICAvL1RPRE86IEVycm9yIGhhbmRsaW5nXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGdldFJlZ2lvbkNvZGUoY2FydDogYW55KTogc3RyaW5nIHtcclxuXHJcbiAgICAgICAgICAgIGlmIChjYXJ0LlBheW1lbnQgPT09IHVuZGVmaW5lZCB8fFxyXG4gICAgICAgICAgICAgICAgY2FydC5QYXltZW50LkJpbGxpbmdBZGRyZXNzID09PSB1bmRlZmluZWQgfHxcclxuICAgICAgICAgICAgICAgIGNhcnQuUGF5bWVudC5CaWxsaW5nQWRkcmVzcy5SZWdpb25Db2RlID09PSB1bmRlZmluZWQgfHxcclxuICAgICAgICAgICAgICAgIGNhcnQuUGF5bWVudC5CaWxsaW5nQWRkcmVzcy5Vc2VTaGlwcGluZ0FkZHJlc3MpIHtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjYXJ0LlBheW1lbnQuQmlsbGluZ0FkZHJlc3MuUmVnaW9uQ29kZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgb25SZW5kZXJlZCgpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciB1c2VTaGlwcGluZ0FkZHJlc3M6IEJvb2xlYW4gPSB0aGlzLnVzZVNoaXBwaW5nQWRkcmVzcygpO1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnN1YnNjcmliZSgncG9zdGFsQ29kZUNoYW5nZWQnLCBlID0+IHRoaXMub25Qb3N0YWxDb2RlQ2hhbmdlZCh1c2VTaGlwcGluZ0FkZHJlc3MsIGUuZGF0YSkpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5mb3JtSW5zdGFuY2VzID0gdGhpcy5yZWdpc3RlckZvcm1zRm9yVmFsaWRhdGlvbih0aGlzLmdldFZpc2libGVGb3JtcygpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgdXNlU2hpcHBpbmdBZGRyZXNzKCkgOiBCb29sZWFuIHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiAkKHRoaXMuY29udGV4dC5jb250YWluZXIpLmZpbmQoJ2lucHV0W25hbWU9VXNlU2hpcHBpbmdBZGRyZXNzXTpjaGVja2VkJykudmFsKCkgPT09ICd0cnVlJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgb25Qb3N0YWxDb2RlQ2hhbmdlZCh1c2VTaGlwcGluZ0FkZHJlc3M6IEJvb2xlYW4sIGNhcnQ6IGFueSkge1xyXG5cclxuICAgICAgICAgICAgaWYgKCF1c2VTaGlwcGluZ0FkZHJlc3MpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIHBvc3RhbENvZGU6IHN0cmluZyA9IGNhcnQuU2hpcHBpbmdBZGRyZXNzLlBvc3RhbENvZGU7XHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tvdXRTZXJ2aWNlLnVwZGF0ZVBvc3RhbENvZGUocG9zdGFsQ29kZSkuZG9uZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXRWaXNpYmxlRm9ybXMoKTogSlF1ZXJ5IHtcclxuICAgICAgICAgICAgdmFyIHZpc2libGVGb3JtcyA9ICQoJ2Zvcm0nLCB0aGlzLmNvbnRleHQuY29udGFpbmVyKS5ub3QoJ2Zvcm06aGFzKC5oaWRlKScpO1xyXG4gICAgICAgICAgICByZXR1cm4gdmlzaWJsZUZvcm1zO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzZXRCaWxsaW5nQWRkcmVzc0Zvcm1WaXNpYmlsaXR5KCkge1xyXG5cclxuICAgICAgICAgICAgdmFyIHVzZVNoaXBwaW5nQWRkcmVzczogQm9vbGVhbiA9IHRoaXMudXNlU2hpcHBpbmdBZGRyZXNzKCk7XHJcbiAgICAgICAgICAgIGlmICh1c2VTaGlwcGluZ0FkZHJlc3MpIHtcclxuICAgICAgICAgICAgICAgICQoJyNCaWxsaW5nQWRkcmVzc0NvbnRlbnQnKS5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJCgnI0JpbGxpbmdBZGRyZXNzQ29udGVudCcpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc2V0QmlsbGluZ0FkZHJlc3NGb3JtVmFsaWRhdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciB1c2VTaGlwcGluZ0FkZHJlc3M6IEJvb2xlYW4gPSB0aGlzLnVzZVNoaXBwaW5nQWRkcmVzcygpO1xyXG4gICAgICAgICAgICB2YXIgaXNWYWxpZGF0aW9uRW5hYmxlZDogQm9vbGVhbiA9IHRoaXMuaXNCaWxsaW5nQWRkcmVzc0Zvcm1WYWxpZGF0aW9uRW5hYmxlZCgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHVzZVNoaXBwaW5nQWRkcmVzcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzVmFsaWRhdGlvbkVuYWJsZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc2FibGVCaWxsaW5nQWRkcmVzc0Zvcm1WYWxpZGF0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWlzVmFsaWRhdGlvbkVuYWJsZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVuYWJsZUJpbGxpbmdBZGRyZXNzRm9ybVZhbGlkYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBpc0JpbGxpbmdBZGRyZXNzRm9ybVZhbGlkYXRpb25FbmFibGVkKCkgOiBCb29sZWFuIHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBfLnNvbWUodGhpcy5mb3JtSW5zdGFuY2VzLCAoZm9ybUluc3RhbmNlIDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pc0JpbGxpbmdBZGRyZXNzRm9ybUluc3RhbmNlKGZvcm1JbnN0YW5jZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBkaXNhYmxlQmlsbGluZ0FkZHJlc3NGb3JtVmFsaWRhdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBmb3JtSW5zdGFuY2UgPSBfLmZpbmQodGhpcy5mb3JtSW5zdGFuY2VzLCAoZm9ybUluc3RhbmNlIDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pc0JpbGxpbmdBZGRyZXNzRm9ybUluc3RhbmNlKGZvcm1JbnN0YW5jZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgZm9ybUluc3RhbmNlLmRlc3Ryb3koKTtcclxuXHJcbiAgICAgICAgICAgIF8ucmVtb3ZlKHRoaXMuZm9ybUluc3RhbmNlcywgKGZvcm1JbnN0YW5jZSA6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXNCaWxsaW5nQWRkcmVzc0Zvcm1JbnN0YW5jZShmb3JtSW5zdGFuY2UpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgaXNCaWxsaW5nQWRkcmVzc0Zvcm1JbnN0YW5jZShmb3JtSW5zdGFuY2UgOiBhbnkpIDogYm9vbGVhbiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZm9ybUluc3RhbmNlLiRlbGVtZW50LmlzKCdmb3JtI0JpbGxpbmdBZGRyZXNzJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGVuYWJsZUJpbGxpbmdBZGRyZXNzRm9ybVZhbGlkYXRpb24oKSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmZvcm1JbnN0YW5jZXMgPSB0aGlzLmZvcm1JbnN0YW5jZXMuY29uY2F0KHRoaXMucmVnaXN0ZXJGb3Jtc0ZvclZhbGlkYXRpb24oJCgnZm9ybSNCaWxsaW5nQWRkcmVzcycpKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElDdXN0b21lclJlcG9zaXRvcnkge1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAqIEF0dGVtcHQgdG8gcmVnaXN0ZXIgdXNpbmcgQ29tcG9zZXIgQVBJLlxyXG4gICAgICAgICogQHBhcmFtXHJcbiAgICAgICAgKi9cclxuICAgICAgICB1cGRhdGVBY2NvdW50KGZvcm1EYXRhOiBhbnksIHJldHVyblVybDogc3RyaW5nKTogUS5Qcm9taXNlPGFueT47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldCB0aGUgY3VzdG9tZXIgYWRkcmVzc2VzLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldEFkZHJlc3NlcygpOiBRLlByb21pc2U8YW55PjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgKiBDcmVhdGUgYSBuZXcgY3VzdG9tZXIgYWRkcmVzc1xyXG4gICAgICAgICogQHBhcmFtXHJcbiAgICAgICAgKi9cclxuICAgICAgICBjcmVhdGVBZGRyZXNzKGZvcm1EYXRhOiBhbnksIHJldHVyblVybDogc3RyaW5nKTogUS5Qcm9taXNlPGFueT47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICogVXBkYXRlIGEgY3VzdG9tZXIgYWRkcmVzc1xyXG4gICAgICAgICogQHBhcmFtXHJcbiAgICAgICAgKi9cclxuICAgICAgICB1cGRhdGVBZGRyZXNzKGZvcm1EYXRhOiBhbnksIGFkZHJlc3NJZDogc3RyaW5nLCByZXR1cm5Vcmw6IHN0cmluZyk6IFEuUHJvbWlzZTxhbnk+O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAqIERlbGV0ZSBhIGN1c3RvbWVyIGFkZHJlc3NcclxuICAgICAgICAqIEBwYXJhbVxyXG4gICAgICAgICovXHJcbiAgICAgICAgZGVsZXRlQWRkcmVzcyhhZGRyZXNzSWQ6IEpRdWVyeSwgcmV0dXJuVXJsOiBzdHJpbmcpOiBRLlByb21pc2U8YW55PjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgKiBTZXQgZGVmYXVsdCBhZGRyZXNzIGZvciBhIGN1c3RvbWVyXHJcbiAgICAgICAgKiBAcGFyYW1cclxuICAgICAgICAqL1xyXG4gICAgICAgIHNldERlZmF1bHRBZGRyZXNzKGFkZHJlc3NJZDogc3RyaW5nLCByZXR1cm5Vcmw6IHN0cmluZyk6IFEuUHJvbWlzZTxhbnk+O1xyXG4gICAgfVxyXG59IiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9NdmMvQ29tcG9zZXJDbGllbnQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9JQ3VzdG9tZXJSZXBvc2l0b3J5LnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIEN1c3RvbWVyUmVwb3NpdG9yeSAgaW1wbGVtZW50cyBJQ3VzdG9tZXJSZXBvc2l0b3J5IHtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgKiBBdHRlbXB0IHRvIHJlZ2lzdGVyIHVzaW5nIENvbXBvc2VyIEFQSS5cclxuICAgICAgICAqIEBwYXJhbVxyXG4gICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHVwZGF0ZUFjY291bnQoZm9ybURhdGE6IGFueSwgcmV0dXJuVXJsOiBzdHJpbmcpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IF8uZXh0ZW5kKHsgUmV0dXJuVXJsOiByZXR1cm5VcmwgfSwgZm9ybURhdGEpO1xyXG4gICAgICAgICAgICByZXR1cm4gQ29tcG9zZXJDbGllbnQucG9zdCgnL2FwaS9jdXN0b21lci91cGRhdGUnLCBkYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXQgdGhlIGN1c3RvbWVyIGFkZHJlc3Nlcy5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgZ2V0QWRkcmVzc2VzKCk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgICAgcmV0dXJuIENvbXBvc2VyQ2xpZW50LmdldCgnL2FwaS9jdXN0b21lci9hZGRyZXNzZXMnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICogQ3JlYXRlIGEgbmV3IGN1c3RvbWVyIGFkZHJlc3NcclxuICAgICAgICAqIEBwYXJhbVxyXG4gICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGNyZWF0ZUFkZHJlc3MoZm9ybURhdGE6IGFueSwgcmV0dXJuVXJsOiBzdHJpbmcpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IF8uZXh0ZW5kKHsgUmV0dXJuVXJsOiByZXR1cm5VcmwgfSwgZm9ybURhdGEpO1xyXG4gICAgICAgICAgICByZXR1cm4gQ29tcG9zZXJDbGllbnQucG9zdCgnL2FwaS9jdXN0b21lci9hZGRyZXNzZXMnLCBkYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICogVXBkYXRlIGEgY3VzdG9tZXIgYWRkcmVzc1xyXG4gICAgICAgICogQHBhcmFtXHJcbiAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgdXBkYXRlQWRkcmVzcyhmb3JtRGF0YTogYW55LCBhZGRyZXNzSWQ6IHN0cmluZywgcmV0dXJuVXJsOiBzdHJpbmcpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IF8uZXh0ZW5kKHsgUmV0dXJuVXJsOiByZXR1cm5VcmwgfSwgZm9ybURhdGEpO1xyXG4gICAgICAgICAgICByZXR1cm4gQ29tcG9zZXJDbGllbnQucG9zdCgnL2FwaS9jdXN0b21lci9hZGRyZXNzZXMvJyArIGFkZHJlc3NJZCwgZGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAqIERlbGV0ZSBhIGN1c3RvbWVyIGFkZHJlc3NcclxuICAgICAgICAqIEBwYXJhbVxyXG4gICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGRlbGV0ZUFkZHJlc3MoYWRkcmVzc0lkOiBKUXVlcnksIHJldHVyblVybDogc3RyaW5nKTogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7IFJldHVyblVybDogcmV0dXJuVXJsIH07XHJcbiAgICAgICAgICAgIHJldHVybiBDb21wb3NlckNsaWVudC5yZW1vdmUoJy9hcGkvY3VzdG9tZXIvYWRkcmVzc2VzLycgKyBhZGRyZXNzSWQsIGRhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgKiBTZXQgZGVmYXVsdCBhZGRyZXNzIGZvciBhIGN1c3RvbWVyXHJcbiAgICAgICAgKiBAcGFyYW1cclxuICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzZXREZWZhdWx0QWRkcmVzcyhhZGRyZXNzSWQ6IHN0cmluZywgcmV0dXJuVXJsOiBzdHJpbmcpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHsgUmV0dXJuVXJsOiByZXR1cm5VcmwgfTtcclxuICAgICAgICAgICAgcmV0dXJuIENvbXBvc2VyQ2xpZW50LnBvc3QoJy9hcGkvY3VzdG9tZXIvc2V0ZGVmYXVsdGFkZHJlc3MvJyArIGFkZHJlc3NJZCwgZGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSUN1c3RvbWVyU2VydmljZSB7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICogQXR0ZW1wdCB0byByZWdpc3RlciB1c2luZyBDb21wb3NlciBBUEkuXHJcbiAgICAgICAgKiBAcGFyYW1cclxuICAgICAgICAqL1xyXG4gICAgICAgIHVwZGF0ZUFjY291bnQoZm9ybURhdGE6IGFueSwgcmV0dXJuVXJsOiBzdHJpbmcpOiBRLlByb21pc2U8YW55PjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0IHRoZSBjdXN0b21lciBhZGRyZXNzZXMuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZ2V0QWRkcmVzc2VzKCk6IFEuUHJvbWlzZTxhbnk+O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAqIENyZWF0ZSBhIG5ldyBjdXN0b21lciBhZGRyZXNzXHJcbiAgICAgICAgKiBAcGFyYW1cclxuICAgICAgICAqL1xyXG4gICAgICAgIGNyZWF0ZUFkZHJlc3MoZm9ybURhdGE6IGFueSwgcmV0dXJuVXJsOiBzdHJpbmcpOiBRLlByb21pc2U8YW55PjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgKiBVcGRhdGUgYSBjdXN0b21lciBhZGRyZXNzXHJcbiAgICAgICAgKiBAcGFyYW1cclxuICAgICAgICAqL1xyXG4gICAgICAgIHVwZGF0ZUFkZHJlc3MoZm9ybURhdGE6IGFueSwgYWRkcmVzc0lkOiBzdHJpbmcsIHJldHVyblVybDogc3RyaW5nKTogUS5Qcm9taXNlPGFueT47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICogRGVsZXRlIGEgY3VzdG9tZXIgYWRkcmVzc1xyXG4gICAgICAgICogQHBhcmFtXHJcbiAgICAgICAgKi9cclxuICAgICAgICBkZWxldGVBZGRyZXNzKGFkZHJlc3NJZDogSlF1ZXJ5LCByZXR1cm5Vcmw6IHN0cmluZyk6IFEuUHJvbWlzZTxhbnk+O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAqIFNldCBkZWZhdWx0IGFkZHJlc3MgZm9yIGEgY3VzdG9tZXJcclxuICAgICAgICAqIEBwYXJhbVxyXG4gICAgICAgICovXHJcbiAgICAgICAgc2V0RGVmYXVsdEFkZHJlc3MoYWRkcmVzc0lkOiBzdHJpbmcsIHJldHVyblVybDogc3RyaW5nKTogUS5Qcm9taXNlPGFueT47XHJcbiAgICB9XHJcbn0iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L1JlcG9zaXRvcmllcy9DdXN0b21lclJlcG9zaXRvcnkudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nSUN1c3RvbWVyU2VydmljZS50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBDdXN0b21lclNlcnZpY2UgIGltcGxlbWVudHMgSUN1c3RvbWVyU2VydmljZSB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgbWVtb2l6ZUdldEFkcmVzc2VzOiBGdW5jdGlvbjtcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGN1c3RvbWVyUmVwb3NpdG9yeTogSUN1c3RvbWVyUmVwb3NpdG9yeTtcclxuXHJcbiAgICAgICAgcHVibGljIGNvbnN0cnVjdG9yKGN1c3RvbWVyUmVwb3NpdG9yeTogSUN1c3RvbWVyUmVwb3NpdG9yeSkge1xyXG5cclxuICAgICAgICAgICAgaWYgKCFjdXN0b21lclJlcG9zaXRvcnkpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3I6IGN1c3RvbWVyUmVwb3NpdG9yeSBpcyByZXF1aXJlZCcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmN1c3RvbWVyUmVwb3NpdG9yeSA9IGN1c3RvbWVyUmVwb3NpdG9yeTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICogQXR0ZW1wdCB0byByZWdpc3RlciB1c2luZyBDb21wb3NlciBBUEkuXHJcbiAgICAgICAgKiBAcGFyYW1cclxuICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyB1cGRhdGVBY2NvdW50KGZvcm1EYXRhOiBhbnksIHJldHVyblVybDogc3RyaW5nKTogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VzdG9tZXJSZXBvc2l0b3J5LnVwZGF0ZUFjY291bnQoZm9ybURhdGEsIHJldHVyblVybCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0IHRoZSBjdXN0b21lciBhZGRyZXNzZXMuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGdldEFkZHJlc3NlcygpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICAgaWYgKF8uaXNVbmRlZmluZWQodGhpcy5tZW1vaXplR2V0QWRyZXNzZXMpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1lbW9pemVHZXRBZHJlc3NlcyA9IF8ubWVtb2l6ZShhcmcgPT4gdGhpcy5nZXRBZGRyZXNzZXNJbXBsKCkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tZW1vaXplR2V0QWRyZXNzZXMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgZ2V0QWRkcmVzc2VzSW1wbCgpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VzdG9tZXJSZXBvc2l0b3J5LmdldEFkZHJlc3NlcygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgKiBDcmVhdGUgYSBuZXcgY3VzdG9tZXIgYWRkcmVzc1xyXG4gICAgICAgICogQHBhcmFtXHJcbiAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgY3JlYXRlQWRkcmVzcyhmb3JtRGF0YTogYW55LCByZXR1cm5Vcmw6IHN0cmluZyk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmN1c3RvbWVyUmVwb3NpdG9yeS5jcmVhdGVBZGRyZXNzKGZvcm1EYXRhLCByZXR1cm5VcmwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgKiBVcGRhdGUgYSBjdXN0b21lciBhZGRyZXNzXHJcbiAgICAgICAgKiBAcGFyYW1cclxuICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyB1cGRhdGVBZGRyZXNzKGZvcm1EYXRhOiBhbnksIGFkZHJlc3NJZDogc3RyaW5nLCByZXR1cm5Vcmw6IHN0cmluZyk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmN1c3RvbWVyUmVwb3NpdG9yeS51cGRhdGVBZGRyZXNzKGZvcm1EYXRhLCBhZGRyZXNzSWQsIHJldHVyblVybCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAqIERlbGV0ZSBhIGN1c3RvbWVyIGFkZHJlc3NcclxuICAgICAgICAqIEBwYXJhbVxyXG4gICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGRlbGV0ZUFkZHJlc3MoYWRkcmVzc0lkOiBKUXVlcnksIHJldHVyblVybDogc3RyaW5nKTogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VzdG9tZXJSZXBvc2l0b3J5LmRlbGV0ZUFkZHJlc3MoYWRkcmVzc0lkLCByZXR1cm5VcmwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgKiBTZXQgZGVmYXVsdCBhZGRyZXNzIGZvciBhIGN1c3RvbWVyXHJcbiAgICAgICAgKiBAcGFyYW1cclxuICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzZXREZWZhdWx0QWRkcmVzcyhhZGRyZXNzSWQ6IHN0cmluZywgcmV0dXJuVXJsOiBzdHJpbmcpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jdXN0b21lclJlcG9zaXRvcnkuc2V0RGVmYXVsdEFkZHJlc3MoYWRkcmVzc0lkLCByZXR1cm5VcmwpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9Db250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9JQ29udHJvbGxlckFjdGlvbkNvbnRleHQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvanF1ZXJ5UGx1Z2lucy9JU2VyaWFsaXplT2JqZWN0SnF1ZXJ5UGx1Z2luLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NvbW1vbi9Tb3VyY2UvVHlwZXNjcmlwdC9NZW1iZXJzaGlwU2VydmljZS50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG5cclxuICAgIGV4cG9ydCBlbnVtIE15QWNjb3VudFN0YXR1cyB7XHJcbiAgICAgICAgU3VjY2VzcyxcclxuICAgICAgICBJbnZhbGlkVGlja2V0LFxyXG4gICAgICAgIER1cGxpY2F0ZUVtYWlsLFxyXG4gICAgICAgIER1cGxpY2F0ZVVzZXJOYW1lLFxyXG4gICAgICAgIEludmFsaWRRdWVzdGlvbixcclxuICAgICAgICBJbnZhbGlkUGFzc3dvcmQsXHJcbiAgICAgICAgSW52YWxpZFBhc3N3b3JkQW5zd2VyLFxyXG4gICAgICAgIEludmFsaWRFbWFpbCxcclxuICAgICAgICBGYWlsZWQsXHJcbiAgICAgICAgVXNlclJlamVjdGVkLFxyXG4gICAgICAgIFJlcXVpcmVzQXBwcm92YWwsXHJcbiAgICAgICAgQWpheEZhaWxlZFxyXG4gICAgfTtcclxufVxyXG4iLG51bGwsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvTXZjL0NvbXBvc2VyQ2xpZW50LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLk15QWNjb3VudC5VSS9Db21tb24vU291cmNlL1R5cGVzY3JpcHQvQ3VzdG9tZXJTZXJ2aWNlLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NoZWNrb3V0Q29tbW9uL1NvdXJjZS9UeXBlc2NyaXB0L0FkZHJlc3NEdG8udHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgQmlsbGluZ0FkZHJlc3NSZWdpc3RlcmVkQ2hlY2tvdXRTZXJ2aWNlIHtcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGN1c3RvbWVyU2VydmljZTogSUN1c3RvbWVyU2VydmljZTtcclxuXHJcbiAgICAgICAgcHVibGljIGNvbnN0cnVjdG9yKGN1c3RvbWVyU2VydmljZTogSUN1c3RvbWVyU2VydmljZSkge1xyXG4gICAgICAgICAgICB0aGlzLmN1c3RvbWVyU2VydmljZSA9IGN1c3RvbWVyU2VydmljZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXQgdGhlIGN1c3RvbWVyIGFkZHJlc3Nlcy4gVGhlIHNlbGVjdGVkIGJpbGxpbmcgYWRkcmVzcyBpcyB0YWtlbiBmcm9tIHRoZSBjYXJ0IGJ5IGRlZmF1bHQuXHJcbiAgICAgICAgICogSWYgbm8gYWRkcmVzcyBoYXMgYmVlbiBzZXQgaW4gdGhlIGNhcnQsIHRoZSBzZWxlY3RlZCBiaWxsaW5nIGFkZHJlc3MgY29ycmVzcG9uZHMgdG8gdGhlIHByZWZlcnJlZCBhZGRyZXNzLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBnZXRCaWxsaW5nQWRkcmVzc2VzKGNhcnQ6IGFueSk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIGlmICghY2FydCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgY2FydCBpcyByZXF1aXJlZCcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jdXN0b21lclNlcnZpY2UuZ2V0QWRkcmVzc2VzKClcclxuICAgICAgICAgICAgICAgIC50aGVuKGFkZHJlc3NlcyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWRkcmVzc2VzLkFkZHJlc3Nlc0xvYWRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYWRkcmVzc2VzLlNlbGVjdGVkQmlsbGluZ0FkZHJlc3NJZCA9IHRoaXMuZ2V0U2VsZWN0ZWRCaWxsaW5nQWRkcmVzc0lkKGNhcnQsIGFkZHJlc3Nlcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhZGRyZXNzZXM7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBnZXRTZWxlY3RlZEJpbGxpbmdBZGRyZXNzSWQoY2FydDogYW55LCBhZGRyZXNzTGlzdDogYW55KSA6IHN0cmluZyB7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5pc0JpbGxpbmdBZGRyZXNzRnJvbUNhcnRWYWxpZChjYXJ0LCBhZGRyZXNzTGlzdCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjYXJ0LlBheW1lbnQuQmlsbGluZ0FkZHJlc3MuQWRkcmVzc0Jvb2tJZDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UHJlZmVycmVkQmlsbGluZ0FkZHJlc3NJZChhZGRyZXNzTGlzdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGlzQmlsbGluZ0FkZHJlc3NGcm9tQ2FydFZhbGlkKGNhcnQ6IGFueSwgYWRkcmVzc0xpc3Q6IGFueSkgOiBib29sZWFuIHtcclxuXHJcbiAgICAgICAgICAgIGlmIChjYXJ0LlBheW1lbnQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoY2FydC5QYXltZW50LkJpbGxpbmdBZGRyZXNzID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIF8uYW55KGFkZHJlc3NMaXN0LkFkZHJlc3NlcywgKGFkZHJlc3M6IEFkZHJlc3NEdG8pID0+IGFkZHJlc3MuSWQgPT09IGNhcnQuUGF5bWVudC5CaWxsaW5nQWRkcmVzcy5BZGRyZXNzQm9va0lkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgZ2V0UHJlZmVycmVkQmlsbGluZ0FkZHJlc3NJZChhZGRyZXNzTGlzdDogYW55KSA6IHN0cmluZyB7XHJcblxyXG4gICAgICAgICAgICB2YXIgcHJlZmVycmVkQmlsbGluZ0FkZHJlc3MgPSBfLmZpbmQoYWRkcmVzc0xpc3QuQWRkcmVzc2VzLCAoYWRkcmVzczogQWRkcmVzc0R0bykgPT4gYWRkcmVzcy5Jc1ByZWZlcnJlZEJpbGxpbmcpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHByZWZlcnJlZEJpbGxpbmdBZGRyZXNzID09PSB1bmRlZmluZWQgPyB1bmRlZmluZWQgOiBwcmVmZXJyZWRCaWxsaW5nQWRkcmVzcy5JZDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIFVJTW9kYWwge1xyXG5cclxuICAgICAgICBwcml2YXRlIG1vZGFsQ29udGV4dDogSlF1ZXJ5O1xyXG4gICAgICAgIHByaXZhdGUgY29uZmlybURlZmVycmVkOiBRLkRlZmVycmVkPGFueT47XHJcbiAgICAgICAgcHJpdmF0ZSBjb25maXJtQWN0aW9uOiBhbnk7XHJcbiAgICAgICAgcHJpdmF0ZSB3aW5kb3c6IFdpbmRvdztcclxuICAgICAgICBwcml2YXRlIHNlbmRlcjogYW55O1xyXG4gICAgICAgIHByaXZhdGUgbW9kYWxDb250ZXh0U2VsZWN0b3I6IHN0cmluZztcclxuXHJcbiAgICAgICAgcHVibGljIGNvbnN0cnVjdG9yKHdpbmRvdzogV2luZG93LCBtb2RhbENvbnRleHRTZWxlY3Rvcjogc3RyaW5nLCBjb25maXJtQWN0aW9uLCBzZW5kZXIpIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY29uZmlybUFjdGlvbiA9IGNvbmZpcm1BY3Rpb247XHJcbiAgICAgICAgICAgIHRoaXMubW9kYWxDb250ZXh0U2VsZWN0b3IgPSBtb2RhbENvbnRleHRTZWxlY3RvcjtcclxuICAgICAgICAgICAgdGhpcy53aW5kb3cgPSB3aW5kb3c7XHJcbiAgICAgICAgICAgIHRoaXMuc2VuZGVyID0gc2VuZGVyO1xyXG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyRG9tRXZlbnRzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHJlZ2lzdGVyRG9tRXZlbnRzKCkgOiB2b2lkIHtcclxuICAgICAgICAgICAgJCh0aGlzLndpbmRvdy5kb2N1bWVudCkub24oJ2NsaWNrJywgJy5tb2RhbC0tY29uZmlybScsICB0aGlzLmNvbmZpcm1Nb2RhbC5iaW5kKHRoaXMpKTtcclxuICAgICAgICAgICAgJCh0aGlzLndpbmRvdy5kb2N1bWVudCkub24oJ2NsaWNrJywgJy5tb2RhbC0tY2FuY2VsJywgdGhpcy5jYW5jZWxNb2RhbC5iaW5kKHRoaXMpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgdW5yZWdpc3RlckRvbUV2ZW50cygpIDogdm9pZCB7XHJcbiAgICAgICAgICAgICQodGhpcy53aW5kb3cuZG9jdW1lbnQpLm9mZignY2xpY2snLCAnLm1vZGFsLS1jb25maXJtJywgdGhpcy5jb25maXJtTW9kYWwpO1xyXG4gICAgICAgICAgICAkKHRoaXMud2luZG93LmRvY3VtZW50KS5vZmYoJ2NsaWNrJywgJy5tb2RhbC0tY2FuY2VsJywgdGhpcy5jYW5jZWxNb2RhbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3Blbk1vZGFsID0gKGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCkgPT4ge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5tb2RhbENvbnRleHQgPSAkKHRoaXMubW9kYWxDb250ZXh0U2VsZWN0b3IpO1xyXG4gICAgICAgICAgICB0aGlzLmNvbmZpcm1EZWZlcnJlZCA9IFEuZGVmZXIoKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMubW9kYWxDb250ZXh0Lm9uKCdzaG93bi5icy5tb2RhbCcsIChldmVudDogSlF1ZXJ5RXZlbnRPYmplY3QpID0+IHtcclxuICAgICAgICAgICAgICAgICQoJ1tkYXRhLWRpc21pc3NdJywgZXZlbnQudGFyZ2V0KS5mb2N1cygpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMubW9kYWxDb250ZXh0Lm9uKCdoaWRlLmJzLm1vZGFsJywgKGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgJChldmVudC50YXJnZXQpLm9mZignc2hvd24uYnMubW9kYWwgaGlkZS5icy5tb2RhbCcpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpcm1EZWZlcnJlZC5wcm9taXNlLmlzUGVuZGluZygpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jb25maXJtRGVmZXJyZWQucmVzb2x2ZShmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLm1vZGFsQ29udGV4dC5tb2RhbCgnc2hvdycpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jb25maXJtRGVmZXJyZWQucHJvbWlzZVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2RhbENvbnRleHQubW9kYWwoJ2hpZGUnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbmZpcm1BY3Rpb24uY2FsbCh0aGlzLnNlbmRlciwgZXZlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuZG9uZShudWxsLCAoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBwdWJsaWMgY29uZmlybU1vZGFsKCkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbmZpcm1EZWZlcnJlZC5yZXNvbHZlKHRydWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGNhbmNlbE1vZGFsKCkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbmZpcm1EZWZlcnJlZC5yZXNvbHZlKGZhbHNlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLnVucmVnaXN0ZXJEb21FdmVudHMoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5NeUFjY291bnQuVUkvQ29tbW9uL1NvdXJjZS9UeXBlc2NyaXB0L0N1c3RvbWVyU2VydmljZS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5NeUFjY291bnQuVUkvQ29tbW9uL1NvdXJjZS9UeXBlc2NyaXB0L015QWNjb3VudEV2ZW50cy50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5NeUFjY291bnQuVUkvQ29tbW9uL1NvdXJjZS9UeXBlc2NyaXB0L015QWNjb3VudFN0YXR1cy50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9DaGVja291dENvbW1vbi9zb3VyY2UvVHlwZXNjcmlwdC9CYXNlQ2hlY2tvdXRDb250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vQmlsbGluZ0FkZHJlc3NSZWdpc3RlcmVkQ2hlY2tvdXRTZXJ2aWNlLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L1VJL1VJTW9kYWwudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgQmlsbGluZ0FkZHJlc3NSZWdpc3RlcmVkQ2hlY2tvdXRDb250cm9sbGVyIGV4dGVuZHMgT3Jja2VzdHJhLkNvbXBvc2VyLkJhc2VDaGVja291dENvbnRyb2xsZXIge1xyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgZGVib3VuY2VDaGFuZ2VCaWxsaW5nTWV0aG9kOiBGdW5jdGlvbiA9IF8uZGVib3VuY2UodGhpcy5jaGFuZ2VCaWxsaW5nQWRkcmVzc0ltcGwsIDUwMCwgeyAnbGVhZGluZyc6IHRydWUgfSk7XHJcbiAgICAgICAgcHJvdGVjdGVkIG1vZGFsRWxlbWVudFNlbGVjdG9yOiBzdHJpbmcgPSAnI2NvbmZpcm1hdGlvbk1vZGFsJztcclxuICAgICAgICBwcml2YXRlIHVpTW9kYWw6IFVJTW9kYWw7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBjdXN0b21lclNlcnZpY2U6IElDdXN0b21lclNlcnZpY2UgPSBuZXcgQ3VzdG9tZXJTZXJ2aWNlKG5ldyBDdXN0b21lclJlcG9zaXRvcnkoKSk7XHJcbiAgICAgICAgcHJvdGVjdGVkIGJpbGxpbmdBZGRyZXNzUmVnaXN0ZXJlZENoZWNrb3V0U2VydmljZTogQmlsbGluZ0FkZHJlc3NSZWdpc3RlcmVkQ2hlY2tvdXRTZXJ2aWNlID1cclxuICAgICAgICAgICAgbmV3IEJpbGxpbmdBZGRyZXNzUmVnaXN0ZXJlZENoZWNrb3V0U2VydmljZSh0aGlzLmN1c3RvbWVyU2VydmljZSk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKCkge1xyXG4gICAgICAgICAgICBzdXBlci5pbml0aWFsaXplKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnZpZXdNb2RlbE5hbWUgPSAnQmlsbGluZ0FkZHJlc3NSZWdpc3RlcmVkJztcclxuXHJcbiAgICAgICAgICAgIHRoaXMudWlNb2RhbCA9IG5ldyBVSU1vZGFsKHdpbmRvdywgdGhpcy5tb2RhbEVsZW1lbnRTZWxlY3RvciwgdGhpcy5kZWxldGVBZGRyZXNzLCB0aGlzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCByZWdpc3RlclN1YnNjcmlwdGlvbnMoKSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnN1YnNjcmliZShgJHt0aGlzLnZpZXdNb2RlbE5hbWV9UmVuZGVyZWRgLCBlID0+IHRoaXMub25SZW5kZXJlZChlKSk7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIuc3Vic2NyaWJlKE15QWNjb3VudEV2ZW50c1tNeUFjY291bnRFdmVudHMuQWRkcmVzc0RlbGV0ZWRdLCBlID0+IHRoaXMub25BZGRyZXNzRGVsZXRlZChlKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgcmVuZGVyRGF0YShjaGVja291dENvbnRleHQ6IElDaGVja291dENvbnRleHQpOiBRLlByb21pc2U8dm9pZD4ge1xyXG5cclxuICAgICAgICAgICAgaWYgKGNoZWNrb3V0Q29udGV4dC5hdXRoZW50aWNhdGlvblZpZXdNb2RlbC5Jc0F1dGhlbnRpY2F0ZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbmRlckF1dGhlbnRpY2F0ZWQoY2hlY2tvdXRDb250ZXh0KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyVW5hdXRoZW50aWNhdGVkKGNoZWNrb3V0Q29udGV4dCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCByZW5kZXJVbmF1dGhlbnRpY2F0ZWQoY2hlY2tvdXRDb250ZXh0OiBJQ2hlY2tvdXRDb250ZXh0KSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnVucmVnaXN0ZXJDb250cm9sbGVyKCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKHRoaXMudmlld01vZGVsTmFtZSwgY2hlY2tvdXRDb250ZXh0LmF1dGhlbnRpY2F0aW9uVmlld01vZGVsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCByZW5kZXJBdXRoZW50aWNhdGVkKGNoZWNrb3V0Q29udGV4dDogSUNoZWNrb3V0Q29udGV4dCkgOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJTdWJzY3JpcHRpb25zKCk7XHJcbiAgICAgICAgdGhpcy5yZW5kZXIodGhpcy52aWV3TW9kZWxOYW1lLCB7SXNBdXRoZW50aWNhdGVkOiB0cnVlfSk7XHJcblxyXG4gICAgICAgIHJldHVybiB0aGlzLmJpbGxpbmdBZGRyZXNzUmVnaXN0ZXJlZENoZWNrb3V0U2VydmljZS5nZXRCaWxsaW5nQWRkcmVzc2VzKGNoZWNrb3V0Q29udGV4dC5jYXJ0Vmlld01vZGVsKVxyXG4gICAgICAgICAgICAudGhlbigoYmlsbGluZ0FkcmVzc2VzVm0pID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKHRoaXMudmlld01vZGVsTmFtZSwgY2hlY2tvdXRDb250ZXh0LmNhcnRWaWV3TW9kZWwpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIoJ0JpbGxpbmdSZWdpc3RlcmVkQWRkcmVzc2VzJywgYmlsbGluZ0FkcmVzc2VzVm0pO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuZmFpbChyZWFzb24gPT4gdGhpcy5oYW5kbGVFcnJvcihyZWFzb24pKVxyXG4gICAgICAgICAgICAuZmluKCgpID0+IHRoaXMuZXZlbnRIdWIucHVibGlzaChgJHt0aGlzLnZpZXdNb2RlbE5hbWV9UmVuZGVyZWRgLCBjaGVja291dENvbnRleHQuY2FydFZpZXdNb2RlbCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uUmVuZGVyZWQoZTogSUV2ZW50SW5mb3JtYXRpb24pIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZm9ybUluc3RhbmNlcyA9IHRoaXMucmVnaXN0ZXJGb3Jtc0ZvclZhbGlkYXRpb24oJCgnI1JlZ2lzdGVyZWRCaWxsaW5nQWRkcmVzcycsIHRoaXMuY29udGV4dC5jb250YWluZXIpKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZEJpbGxpbmdBZGRyZXNzSWQ6IHN0cmluZyA9ICQodGhpcy5jb250ZXh0LmNvbnRhaW5lcikuZmluZCgnaW5wdXRbbmFtZT1CaWxsaW5nQWRkcmVzc0lkXTpjaGVja2VkJykudmFsKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXNlbGVjdGVkQmlsbGluZ0FkZHJlc3NJZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNoZWNrb3V0U2VydmljZS5nZXRDYXJ0KClcclxuICAgICAgICAgICAgICAgIC50aGVuKGNhcnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZEJpbGxpbmdBZGRyZXNzSWQgIT09IGNhcnQuUGF5bWVudC5CaWxsaW5nQWRkcmVzcy5BZGRyZXNzQm9va0lkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVib3VuY2VDaGFuZ2VCaWxsaW5nTWV0aG9kKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5mYWlsKHJlYXNvbiA9PiB0aGlzLmhhbmRsZUVycm9yKHJlYXNvbikpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHNldFNlbGVjdGVkQmlsbGluZ0FkZHJlc3MoKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRCaWxsaW5nQWRkcmVzc0lkOiBzdHJpbmcgPSAkKHRoaXMuY29udGV4dC5jb250YWluZXIpLmZpbmQoJ2lucHV0W25hbWU9QmlsbGluZ0FkZHJlc3NJZF06Y2hlY2tlZCcpLnZhbCgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFzZWxlY3RlZEJpbGxpbmdBZGRyZXNzSWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5jaGVja291dFNlcnZpY2UuZ2V0Q2FydCgpXHJcbiAgICAgICAgICAgICAgICAuZG9uZShjYXJ0ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWRCaWxsaW5nQWRkcmVzc0lkICE9PSBjYXJ0LlBheW1lbnQuQmlsbGluZ0FkZHJlc3MuQWRkcmVzc0Jvb2tJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlYm91bmNlQ2hhbmdlQmlsbGluZ01ldGhvZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGNoYW5nZUJpbGxpbmdBZGRyZXNzKGFjdGlvbkNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCkge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5kZWJvdW5jZUNoYW5nZUJpbGxpbmdNZXRob2QoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBjaGFuZ2VCaWxsaW5nQWRkcmVzc0ltcGwoKSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNoZWNrb3V0U2VydmljZS51cGRhdGVDYXJ0KClcclxuICAgICAgICAgICAgICAgIC5kb25lKHJlc3VsdCA9PiB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuSGFzRXJyb3JzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIHVwZGF0ZWQgY2FydCBjb250YWlucyBlcnJvcnMnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSwgcmVhc29uID0+IHRoaXMuaGFuZGxlRXJyb3IocmVhc29uKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZXF1aXJlcyB0aGUgZWxlbWVudCBpbiBhY3Rpb24gY29udGV4dCB0byBoYXZlIGEgZGF0YS1hZGRyZXNzLWlkLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByb3RlY3RlZCBkZWxldGVBZGRyZXNzKGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCk6IFEuUHJvbWlzZTx2b2lkPiB7XHJcblxyXG4gICAgICAgICAgICBsZXQgZWxlbWVudCA9ICQoZXZlbnQudGFyZ2V0KTtcclxuICAgICAgICAgICAgdmFyICRhZGRyZXNzTGlzdEl0ZW0gPSBlbGVtZW50LmNsb3Nlc3QoJ1tkYXRhLWFkZHJlc3MtaWRdJyk7XHJcbiAgICAgICAgICAgIHZhciBhZGRyZXNzSWQgPSAkYWRkcmVzc0xpc3RJdGVtLmRhdGEoJ2FkZHJlc3MtaWQnKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBidXN5ID0gdGhpcy5hc3luY0J1c3koe2VsZW1lbnRDb250ZXh0OiBlbGVtZW50LCBjb250YWluZXJDb250ZXh0OiAkYWRkcmVzc0xpc3RJdGVtIH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VzdG9tZXJTZXJ2aWNlLmRlbGV0ZUFkZHJlc3MoYWRkcmVzc0lkLCAnJylcclxuICAgICAgICAgICAgICAgIC50aGVuKHJlc3VsdCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKE15QWNjb3VudEV2ZW50c1tNeUFjY291bnRFdmVudHMuQWRkcmVzc0RlbGV0ZWRdLCB7IGRhdGE6IGFkZHJlc3NJZCB9KTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuZmFpbCgoKSA9PiB0aGlzLnJlbmRlckZhaWxlZEZvcm0oTXlBY2NvdW50U3RhdHVzW015QWNjb3VudFN0YXR1cy5BamF4RmFpbGVkXSkpXHJcbiAgICAgICAgICAgICAgICAuZmluKCgpID0+IGJ1c3kuZG9uZSgpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICBwdWJsaWMgZGVsZXRlQWRkcmVzc0NvbmZpcm0oYWN0aW9uQ29udGV4dDogSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0KSB7XHJcbiAgICAgICAgICAgICB0aGlzLnVpTW9kYWwub3Blbk1vZGFsKGFjdGlvbkNvbnRleHQuZXZlbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBvbkFkZHJlc3NEZWxldGVkKGU6IElFdmVudEluZm9ybWF0aW9uKSB7XHJcbiAgICAgICAgICAgIHZhciBhZGRyZXNzSWQgPSBlLmRhdGE7XHJcbiAgICAgICAgICAgIHZhciAkYWRkcmVzc0xpc3RJdGVtID0gJCh0aGlzLmNvbnRleHQuY29udGFpbmVyKS5maW5kKCdbZGF0YS1hZGRyZXNzLWlkPScgKyBhZGRyZXNzSWQgKyAnXScpO1xyXG5cclxuICAgICAgICAgICAgJGFkZHJlc3NMaXN0SXRlbS5yZW1vdmUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgdXNlU2hpcHBpbmdBZGRyZXNzKCkgOiBCb29sZWFuIHtcclxuICAgICAgICAgICAgdmFyIHVzZVNoaXBwaW5nQWRkcmVzcyA9ICQodGhpcy5jb250ZXh0LmNvbnRhaW5lcikuZmluZCgnaW5wdXRbbmFtZT1Vc2VTaGlwcGluZ0FkZHJlc3NdOmNoZWNrZWQnKS52YWwoKSA9PT0gJ3RydWUnO1xyXG4gICAgICAgICAgICByZXR1cm4gdXNlU2hpcHBpbmdBZGRyZXNzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXRWaXNpYmxlRm9ybXMoKTogSlF1ZXJ5IHtcclxuICAgICAgICAgICAgdmFyIHZpc2libGVGb3JtcyA9ICQoJ2Zvcm0nLCB0aGlzLmNvbnRleHQuY29udGFpbmVyKS5ub3QoJ2Zvcm06aGFzKC5oaWRlKScpO1xyXG4gICAgICAgICAgICByZXR1cm4gdmlzaWJsZUZvcm1zO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGNoYW5nZVVzZVNoaXBwaW5nQWRkcmVzcygpIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2V0QmlsbGluZ0FkZHJlc3NGb3JtVmlzaWJpbGl0eSgpO1xyXG4gICAgICAgICAgICB0aGlzLnNldEJpbGxpbmdBZGRyZXNzRm9ybVZhbGlkYXRpb24oKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRTZWxlY3RlZEJpbGxpbmdBZGRyZXNzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHNldEJpbGxpbmdBZGRyZXNzRm9ybVZpc2liaWxpdHkoKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgdXNlU2hpcHBpbmdBZGRyZXNzOiBCb29sZWFuID0gdGhpcy51c2VTaGlwcGluZ0FkZHJlc3MoKTtcclxuICAgICAgICAgICAgaWYgKHVzZVNoaXBwaW5nQWRkcmVzcykge1xyXG4gICAgICAgICAgICAgICAgJCgnI0JpbGxpbmdBZGRyZXNzQ29udGVudCcpLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkKCcjQmlsbGluZ0FkZHJlc3NDb250ZW50JykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzZXRCaWxsaW5nQWRkcmVzc0Zvcm1WYWxpZGF0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgdmFyIHVzZVNoaXBwaW5nQWRkcmVzczogQm9vbGVhbiA9IHRoaXMudXNlU2hpcHBpbmdBZGRyZXNzKCk7XHJcbiAgICAgICAgICAgIHZhciBpc1ZhbGlkYXRpb25FbmFibGVkOiBCb29sZWFuID0gdGhpcy5pc0JpbGxpbmdBZGRyZXNzRm9ybVZhbGlkYXRpb25FbmFibGVkKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAodXNlU2hpcHBpbmdBZGRyZXNzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNWYWxpZGF0aW9uRW5hYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzYWJsZUJpbGxpbmdBZGRyZXNzRm9ybVZhbGlkYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICghaXNWYWxpZGF0aW9uRW5hYmxlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW5hYmxlQmlsbGluZ0FkZHJlc3NGb3JtVmFsaWRhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGlzQmlsbGluZ0FkZHJlc3NGb3JtVmFsaWRhdGlvbkVuYWJsZWQoKSA6IEJvb2xlYW4ge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIF8uc29tZSh0aGlzLmZvcm1JbnN0YW5jZXMsIChmb3JtSW5zdGFuY2UgOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmlzQmlsbGluZ0FkZHJlc3NGb3JtSW5zdGFuY2UoZm9ybUluc3RhbmNlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGRpc2FibGVCaWxsaW5nQWRkcmVzc0Zvcm1WYWxpZGF0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgdmFyIGZvcm1JbnN0YW5jZSA9IF8uZmluZCh0aGlzLmZvcm1JbnN0YW5jZXMsIChmb3JtSW5zdGFuY2UgOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmlzQmlsbGluZ0FkZHJlc3NGb3JtSW5zdGFuY2UoZm9ybUluc3RhbmNlKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBmb3JtSW5zdGFuY2UuZGVzdHJveSgpO1xyXG5cclxuICAgICAgICAgICAgXy5yZW1vdmUodGhpcy5mb3JtSW5zdGFuY2VzLCAoZm9ybUluc3RhbmNlIDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pc0JpbGxpbmdBZGRyZXNzRm9ybUluc3RhbmNlKGZvcm1JbnN0YW5jZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBpc0JpbGxpbmdBZGRyZXNzRm9ybUluc3RhbmNlKGZvcm1JbnN0YW5jZSA6IGFueSkgOiBib29sZWFuIHtcclxuICAgICAgICAgICAgdmFyIGlzQmlsbGluZ0FkZHJlc3NGb3JtSW5zdGFuY2UgPSBmb3JtSW5zdGFuY2UuJGVsZW1lbnQuaXMoJ2Zvcm0jQmlsbGluZ0FkZHJlc3NSZWdpc3RlcmVkJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBpc0JpbGxpbmdBZGRyZXNzRm9ybUluc3RhbmNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBlbmFibGVCaWxsaW5nQWRkcmVzc0Zvcm1WYWxpZGF0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5mb3JtSW5zdGFuY2VzID0gdGhpcy5mb3JtSW5zdGFuY2VzLmNvbmNhdCh0aGlzLnJlZ2lzdGVyRm9ybXNGb3JWYWxpZGF0aW9uKCQoJ2Zvcm0jQmlsbGluZ0FkZHJlc3NSZWdpc3RlcmVkJykpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgcmVuZGVyRmFpbGVkRm9ybShzdGF0dXM6IHN0cmluZykge1xyXG4gICAgICAgICAgICAvL1RPRE9cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBoYW5kbGVFcnJvcihyZWFzb24gOiBhbnkpIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaCgnY2FydFVwZGF0aW5nRmFpbGVkJywgbnVsbCk7XHJcblxyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdUaGUgdXNlciBjaGFuZ2VkIHRoZSBiaWxsaW5nIGFkZHJlc3MsIGJ1dCBhbiBlcnJvciBvY2N1cmVkIHdoZW4gdXBkYXRpbmcgdGhlIHByZWZlcnJlZCBiaWxsaW5nIGFkZHJlc3MnLCByZWFzb24pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NoZWNrb3V0Q29tbW9uL3NvdXJjZS9UeXBlc2NyaXB0L0Jhc2VDaGVja291dENvbnRyb2xsZXIudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgQ2hlY2tvdXROYXZpZ2F0aW9uQ29udHJvbGxlciBleHRlbmRzIE9yY2tlc3RyYS5Db21wb3Nlci5Db250cm9sbGVyIHtcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGN1cnJlbnRTdGVwOiBhbnkgPSBudWxsO1xyXG4gICAgICAgIHByb3RlY3RlZCB2aWV3TW9kZWxOYW1lOiBzdHJpbmc7XHJcbiAgICAgICAgcHJvdGVjdGVkIGNoZWNrb3V0U2VydmljZTogSUNoZWNrb3V0U2VydmljZTtcclxuXHJcbiAgICAgICAgcHVibGljIGluaXRpYWxpemUoKSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnZpZXdNb2RlbE5hbWUgPSAnY2hlY2tvdXROYXZpZ2F0aW9uJztcclxuXHJcbiAgICAgICAgICAgIHN1cGVyLmluaXRpYWxpemUoKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tvdXRTZXJ2aWNlID0gQ2hlY2tvdXRTZXJ2aWNlLmdldEluc3RhbmNlKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRTdGVwID0gXy5maW5kV2hlcmUodGhpcy5jb250ZXh0LnZpZXdNb2RlbC5TdGVwcywgeyBJc0FjdGl2ZTogdHJ1ZSB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyRGF0YSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHJlbmRlckRhdGEoKTogUS5Qcm9taXNlPHZvaWQ+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBRLmZjYWxsKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaCgnY2hlY2tvdXRTdGVwUmVuZGVyZWQnLFxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RlcE51bWJlcjogdGhpcy5jdXJyZW50U3RlcC5TdGVwTnVtYmVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgQ2FydDogdGhpcy5jaGVja291dFNlcnZpY2UuZ2V0Q2FydCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2lnbmF0dXJlIGZvciBlcnJvciBoYW5kbGVyIG9mIHRoZSBjaGVja291dCBnZXQgY2FydCBwcm9taXNlLlxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElDaGVja291dEdldENhcnRQcm9taXNlRmFpbHVyZUhhbmRsZXIge1xyXG4gICAgICAgIChlcnJvcjogYW55KTogdm9pZDtcclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4vSUNoZWNrb3V0R2V0Q2FydFByb21pc2VGYWlsdXJlSGFuZGxlci50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHRhcmdldGVkU3RlcCBUaGUgY3VycmVudCBjaGVja291dCBzdGVwLlxyXG4gICAgICogQHBhcmFtIHtJQ2hlY2tvdXRHZXRDYXJ0UHJvbWlzZUZhaWx1cmVIYW5kbGVyfSBmYWlsdXJlSGFuZGxlciBIYW5kbGVzIGZhaWx1cmUgb2YgdGhlIEFKQVggcmVxdWVzdC4gVGhpcyBoYW5kbGVyIHdpbGwgb25seVxyXG4gICAgICogQHBhcmFtIHtib29sZWFufSBmb3JjZUdldCBJZiB0cnVlLCBmb3JjZXMgdGhlIGdldCBvZiBhIG5ldyBwcm9taXNlIGluc3RlYWQgb2YgdGhlIGNhY2hlZCBvbmUuXHJcbiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgYmUgY2FsbGVkIGlmIHRoaXMgaXMgdGhlIGZpcnN0IGNhbGwuXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSUNoZWNrb3V0R2V0Q2FydFByb21pc2VQYXJhbSB7XHJcbiAgICAgICAgdGFyZ2V0ZWRTdGVwOiBudW1iZXI7XHJcbiAgICAgICAgZm9yY2VHZXQ/OiBib29sZWFuO1xyXG4gICAgfVxyXG59XHJcbiIsIm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJR2V0UGF5bWVudE1ldGhvZHNPcHRpb25zIHtcclxuICAgICAgICBQcm92aWRlcnM6IHN0cmluZ1tdO1xyXG4gICAgfVxyXG59XHJcbiIsIm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSVVwZGF0ZVBheW1lbnRPcHRpb25zIHtcclxuICAgICAgICBQYXltZW50SWQ6IHN0cmluZztcclxuICAgICAgICBQYXltZW50UHJvdmlkZXJOYW1lOiBzdHJpbmc7XHJcbiAgICAgICAgUGF5bWVudE1ldGhvZElkOiBzdHJpbmc7XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9NdmMvQ29tcG9zZXJDbGllbnQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvRXZlbnRzL0lFdmVudEh1Yi50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9DaGVja291dENvbW1vbi9zb3VyY2UvVHlwZXNjcmlwdC9JVXBkYXRlUGF5bWVudE9wdGlvbnMudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9JR2V0UGF5bWVudE1ldGhvZHNPcHRpb25zJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIFBheW1lbnRQcm92aWRlciB7XHJcbiAgICAgICAgcHJvdGVjdGVkIHdpbmRvdzogV2luZG93O1xyXG4gICAgICAgIHByb3RlY3RlZCBldmVudEh1YjogSUV2ZW50SHViO1xyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgX2N1cnJlbnRQYXltZW50TWV0aG9kOiBJVXBkYXRlUGF5bWVudE9wdGlvbnM7XHJcblxyXG4gICAgICAgIHB1YmxpYyBnZXRDdXJyZW50UGF5bWVudE1ldGhvZCgpOiBJVXBkYXRlUGF5bWVudE9wdGlvbnMge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fY3VycmVudFBheW1lbnRNZXRob2Q7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdHJ1Y3Rvcih3aW5kb3c6IFdpbmRvdywgZXZlbnRIdWI6IElFdmVudEh1Yikge1xyXG4gICAgICAgICAgICB0aGlzLndpbmRvdyA9IHdpbmRvdztcclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1YiA9IGV2ZW50SHViO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgKiBSZXR1cm4gYSBQcm9taXNlIHdoaWNoIHJldHVybnMgYW4gYXJyYXkgb2YgUGF5bWVudCBNZXRob2RzLlxyXG4gICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGdldFBheW1lbnRNZXRob2RzKGdldFBheW1lbnRNZXRob2RPcHRpb25zOiBJR2V0UGF5bWVudE1ldGhvZHNPcHRpb25zKTogUS5Qcm9taXNlPGFueT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gQ29tcG9zZXJDbGllbnQucG9zdCgnL2FwaS9wYXltZW50L3BheW1lbnRtZXRob2RzJywgZ2V0UGF5bWVudE1ldGhvZE9wdGlvbnMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHVwZGF0ZVBheW1lbnRNZXRob2QocmVxdWVzdDogSVVwZGF0ZVBheW1lbnRPcHRpb25zKTogUS5Qcm9taXNlPGFueT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gQ29tcG9zZXJDbGllbnQucHV0KCcvYXBpL3BheW1lbnQvcGF5bWVudG1ldGhvZCcsIHJlcXVlc3QpXHJcbiAgICAgICAgICAgICAgICAudGhlbigocGF5bG9hZCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2N1cnJlbnRQYXltZW50TWV0aG9kID0gcmVxdWVzdDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHBheWxvYWQ7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5DYXJ0LlVJL0NoZWNrb3V0Q29tbW9uL1NvdXJjZS9UeXBlU2NyaXB0L0Jhc2VDaGVja291dENvbnRyb2xsZXIudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgQ2hlY2tvdXRDb21wbGV0ZUNvbnRyb2xsZXIgZXh0ZW5kcyBPcmNrZXN0cmEuQ29tcG9zZXIuQmFzZUNoZWNrb3V0Q29udHJvbGxlciB7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKCkge1xyXG5cclxuICAgICAgICAgICAgc3VwZXIuaW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnZpZXdNb2RlbE5hbWUgPSAnQ29tcGxldGVDaGVja291dCc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgcmVuZGVyRGF0YShjaGVja291dENvbnRleHQ6IElDaGVja291dENvbnRleHQpOiBRLlByb21pc2U8dm9pZD4ge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFEodGhpcy5yZW5kZXIoJ0NoZWNrb3V0Q29tcGxldGUnLCBjaGVja291dENvbnRleHQuY2FydFZpZXdNb2RlbCkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NoZWNrb3V0Q29tbW9uL3NvdXJjZS9UeXBlc2NyaXB0L0Jhc2VDaGVja291dENvbnRyb2xsZXIudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgR3Vlc3RDdXN0b21lckluZm9DaGVja291dENvbnRyb2xsZXIgZXh0ZW5kcyBPcmNrZXN0cmEuQ29tcG9zZXIuQmFzZUNoZWNrb3V0Q29udHJvbGxlciB7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKCkge1xyXG5cclxuICAgICAgICAgICAgdGhpcy52aWV3TW9kZWxOYW1lID0gJ0d1ZXN0Q3VzdG9tZXJJbmZvJztcclxuXHJcbiAgICAgICAgICAgIHN1cGVyLmluaXRpYWxpemUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyByZW5kZXJEYXRhKGNoZWNrb3V0Q29udGV4dDogSUNoZWNrb3V0Q29udGV4dCk6IFEuUHJvbWlzZTx2b2lkPiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gUS5mY2FsbCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2hlY2tvdXRDb250ZXh0LmF1dGhlbnRpY2F0aW9uVmlld01vZGVsLklzQXV0aGVudGljYXRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQXV0aGVudGljYXRlZChjaGVja291dENvbnRleHQpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclVuYXV0aGVudGljYXRlZChjaGVja291dENvbnRleHQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCByZW5kZXJBdXRoZW50aWNhdGVkKGNoZWNrb3V0Q29udGV4dDogSUNoZWNrb3V0Q29udGV4dCkge1xyXG5cclxuICAgICAgICAgICAgdGhpcy51bnJlZ2lzdGVyQ29udHJvbGxlcigpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcih0aGlzLnZpZXdNb2RlbE5hbWUsIGNoZWNrb3V0Q29udGV4dC5hdXRoZW50aWNhdGlvblZpZXdNb2RlbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgcmVuZGVyVW5hdXRoZW50aWNhdGVkKGNoZWNrb3V0Q29udGV4dDogSUNoZWNrb3V0Q29udGV4dCkge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5yZWdpc3RlclN1YnNjcmlwdGlvbnMoKTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXIodGhpcy52aWV3TW9kZWxOYW1lLCBjaGVja291dENvbnRleHQuY2FydFZpZXdNb2RlbCk7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaChgJHt0aGlzLnZpZXdNb2RlbE5hbWV9UmVuZGVyZWRgLCBudWxsKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9DaGVja291dENvbW1vbi9zb3VyY2UvVHlwZXNjcmlwdC9CYXNlQ2hlY2tvdXRDb250cm9sbGVyLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG5leHBvcnQgY2xhc3MgQ2hlY2tvdXRPcmRlckNvbmZpcm1hdGlvbkNvbnRyb2xsZXIgZXh0ZW5kcyBPcmNrZXN0cmEuQ29tcG9zZXIuQ29udHJvbGxlciB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgY2FjaGVQcm92aWRlcjogSUNhY2hlUHJvdmlkZXI7XHJcbiAgICAgICAgcHJpdmF0ZSBvcmRlckNvbmZpcm1hdGlvbkNhY2hlS2V5ID0gJ29yZGVyQ29uZmlybWF0aW9uQ2FjaGVLZXknO1xyXG4gICAgICAgIHByaXZhdGUgb3JkZXJDYWNoZUtleSA9ICdvcmRlckNhY2hlS2V5JztcclxuXHJcbiAgICAgICAgcHVibGljIGluaXRpYWxpemUoKSB7XHJcblxyXG4gICAgICAgICAgICBzdXBlci5pbml0aWFsaXplKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2FjaGVQcm92aWRlciA9IENhY2hlUHJvdmlkZXIuaW5zdGFuY2UoKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY2FjaGVQcm92aWRlci5kZWZhdWx0Q2FjaGUuZ2V0PGFueT4odGhpcy5vcmRlckNhY2hlS2V5KVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKHJlc3VsdDogSUNvbXBsZXRlQ2hlY2tvdXRSZXN1bHQpID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKCdDaGVja291dENvbmZpcm1hdGlvbicsIHsgZGF0YTogcmVzdWx0IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FjaGVQcm92aWRlci5kZWZhdWx0Q2FjaGUuY2xlYXIodGhpcy5vcmRlckNhY2hlS2V5KS5kb25lKCk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmZhaWwoKHJlYXNvbjogYW55KSA9PiB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1VuYWJsZSB0byByZXRyaWV2ZSBvcmRlciBudW1iZXIgZnJvbSBjYWNoZSwgYXR0ZW1wdCB0byByZWRpcmVjdC4nKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jYWNoZVByb3ZpZGVyLmRlZmF1bHRDYWNoZS5nZXQ8YW55Pih0aGlzLm9yZGVyQ29uZmlybWF0aW9uQ2FjaGVLZXkpXHJcbiAgICAgICAgICAgICAgICAudGhlbigocmVzdWx0OiBJQ29tcGxldGVDaGVja291dFJlc3VsdCkgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgb3JkZXJDb25maXJtYXRpb252aWV3TW9kZWwgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgT3JkZXJOdW1iZXI6IHJlc3VsdC5PcmRlck51bWJlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBDdXN0b21lckVtYWlsOiByZXN1bHQuQ3VzdG9tZXJFbWFpbFxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcmRlckNvbmZpcm1hdGlvbnZpZXdNb2RlbCAhPT0gdW5kZWZpbmVkKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcignQ2hlY2tvdXRPcmRlckNvbmZpcm1hdGlvbicsIG9yZGVyQ29uZmlybWF0aW9udmlld01vZGVsKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaCgnY2hlY2tvdXRTdGVwUmVuZGVyZWQnLCB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeyBTdGVwTnVtYmVyOiB0aGlzLmNvbnRleHQudmlld01vZGVsLkN1cnJlbnRTdGVwIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ09yZGVyIHdhcyBwbGFjZWQgYnV0IGl0IGlzIG5vdCBwb3NzaWJsZSB0byByZXRyaWV2ZSBvcmRlciBudW1iZXIgZnJvbSBjYWNoZS4nKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmZhaWwoKHJlYXNvbjogYW55KSA9PiB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1VuYWJsZSB0byByZXRyaWV2ZSBvcmRlciBudW1iZXIgZnJvbSBjYWNoZSwgYXR0ZW1wdCB0byByZWRpcmVjdC4nKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlZGlyZWN0VXJsOiBzdHJpbmcgPSB0aGlzLmNvbnRleHQudmlld01vZGVsLlJlZGlyZWN0VXJsO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVkaXJlY3RVcmwpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gcmVkaXJlY3RVcmw7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1JlZGlyZWN0IHVybCB3YXMgbm90IGRldGVjdGVkLicpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NoZWNrb3V0Q29tbW9uL3NvdXJjZS9UeXBlc2NyaXB0L0Jhc2VDaGVja291dENvbnRyb2xsZXIudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgQ2hlY2tvdXRPcmRlclN1bW1hcnlDb250cm9sbGVyIGV4dGVuZHMgT3Jja2VzdHJhLkNvbXBvc2VyLkJhc2VDaGVja291dENvbnRyb2xsZXIge1xyXG5cclxuICAgICAgICBwdWJsaWMgaW5pdGlhbGl6ZSgpIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMudmlld01vZGVsTmFtZSA9ICdDaGVja291dE9yZGVyU3VtbWFyeSc7XHJcblxyXG4gICAgICAgICAgICBzdXBlci5pbml0aWFsaXplKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyU3Vic2NyaXB0aW9ucygpO1xyXG5cclxuICAgICAgICAgICAgQ2hlY2tvdXRTZXJ2aWNlLmNoZWNrb3V0U3RlcCA9IHRoaXMuY29udGV4dC52aWV3TW9kZWwuQ3VycmVudFN0ZXA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgcmVnaXN0ZXJTdWJzY3JpcHRpb25zKCkge1xyXG5cclxuICAgICAgICAgICAgc3VwZXIucmVnaXN0ZXJTdWJzY3JpcHRpb25zKCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgaGFuZGxlOiBudW1iZXI7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnN1YnNjcmliZSgnY2FydFVwZGF0aW5nJywgKCkgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChoYW5kbGUpO1xyXG4gICAgICAgICAgICAgICAgaGFuZGxlID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLnJlbmRlckxvYWRpbmcoKSwgMzAwKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnN1YnNjcmliZSgnY2FydFVwZGF0aW5nRmFpbGVkJywgKCkgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChoYW5kbGUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZVJlbmRlcigpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIuc3Vic2NyaWJlKCdjYXJ0VXBkYXRlZCcsIGUgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChoYW5kbGUpO1xyXG4gICAgICAgICAgICAgICAgZS5kYXRhLkxvYWRDaGVja291dE9yZGVyU3VtbWFyeSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcih0aGlzLnZpZXdNb2RlbE5hbWUsIGUuZGF0YSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHJlbmRlckRhdGEoY2hlY2tvdXRDb250ZXh0OiBJQ2hlY2tvdXRDb250ZXh0KTogUS5Qcm9taXNlPHZvaWQ+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBRLmZjYWxsKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNoZWNrb3V0Q29udGV4dC5jYXJ0Vmlld01vZGVsLkxvYWRDaGVja291dE9yZGVyU3VtbWFyeSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcih0aGlzLnZpZXdNb2RlbE5hbWUsIGNoZWNrb3V0Q29udGV4dC5jYXJ0Vmlld01vZGVsKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHJlUmVuZGVyKCk6IHZvaWQge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJMb2FkaW5nKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNoZWNrb3V0U2VydmljZS5nZXRDYXJ0KClcclxuICAgICAgICAgICAgICAgIC50aGVuKGNhcnRWbSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FydFZtLkxvYWRDaGVja291dE9yZGVyU3VtbWFyeSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIodGhpcy52aWV3TW9kZWxOYW1lLCBjYXJ0Vm0pO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5mYWlsKChyZWFzb246IGFueSkgPT4gdGhpcy5vblJlbmRlckRhdGFGYWlsZWQocmVhc29uKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHJlbmRlckxvYWRpbmcoKTogdm9pZCB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXIodGhpcy52aWV3TW9kZWxOYW1lLCB7IExvYWRDaGVja291dE9yZGVyU3VtbWFyeTogdHJ1ZSwgR2V0dGluZ0NhcnQ6IHRydWUgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiAgVXBkYXRlIHRoZSBjYXJ0LlxyXG4gICAgICAgICAqICBJZiBlcnJvcnMgYXJlIHJldHVybmVkLCBpdCBzdGF5IGluIHRoZSBzYW1lIHBhZ2UuXHJcbiAgICAgICAgICogIElmIHRoZXJlIGlzIG5vIGVycm9ycyBpdCBtb3ZlcyB0byB0aGUgbmV4dCBzdGVwLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBuZXh0U3RlcChhY3Rpb25Db250ZXh0OiBJQ29udHJvbGxlckFjdGlvbkNvbnRleHQpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBidXN5OiBVSUJ1c3lIYW5kbGUgPSB0aGlzLmFzeW5jQnVzeSh7ZWxlbWVudENvbnRleHQ6IGFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHR9KTtcclxuXHJcbiAgICAgICAgICAgIEVycm9ySGFuZGxlci5pbnN0YW5jZSgpLnJlbW92ZUVycm9ycygpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jaGVja291dFNlcnZpY2UudXBkYXRlQ2FydCgpXHJcbiAgICAgICAgICAgICAgICAudGhlbihyZXN1bHQgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0Lkhhc0Vycm9ycyA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSByZXN1bHQuTmV4dFN0ZXBVcmw7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igd2hpbGUgdXBkYXRpbmcgdGhlIGNhcnQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnVzeS5kb25lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5mYWlsKHJlYXNvbiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igb24gY2hlY2tvdXQgc3VibWl0LicsIHJlYXNvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgRXJyb3JIYW5kbGVyLmluc3RhbmNlKCkub3V0cHV0RXJyb3JGcm9tQ29kZSgnQ2hlY2tvdXROZXh0U3RlcEZhaWxlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1c3kuZG9uZSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ2hlY2tvdXRDb21tb24vc291cmNlL1R5cGVzY3JpcHQvQmFzZUNoZWNrb3V0Q29udHJvbGxlci50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBDb21wbGV0ZUNoZWNrb3V0T3JkZXJTdW1tYXJ5Q29udHJvbGxlciBleHRlbmRzIE9yY2tlc3RyYS5Db21wb3Nlci5CYXNlQ2hlY2tvdXRDb250cm9sbGVyIHtcclxuXHJcbiAgICAgICAgcHVibGljIGluaXRpYWxpemUoKSB7XHJcbiAgICAgICAgICAgIHN1cGVyLmluaXRpYWxpemUoKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMudmlld01vZGVsTmFtZSA9ICdDb21wbGV0ZUNoZWNrb3V0T3JkZXJTdW1tYXJ5JztcclxuXHJcbiAgICAgICAgICAgIENoZWNrb3V0U2VydmljZS5jaGVja291dFN0ZXAgPSB0aGlzLmNvbnRleHQudmlld01vZGVsLkN1cnJlbnRTdGVwO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5yZWdpc3RlclN1YnNjcmlwdGlvbnMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyByZW5kZXJEYXRhKGNoZWNrb3V0Q29udGV4dDogSUNoZWNrb3V0Q29udGV4dCk6IFEuUHJvbWlzZTx2b2lkPiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gUSh0aGlzLnJlbmRlcih0aGlzLnZpZXdNb2RlbE5hbWUsIGNoZWNrb3V0Q29udGV4dC5jYXJ0Vmlld01vZGVsKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAqICBjb21wbGV0ZSBDaGVja291dFxyXG4gICAgICAgICogIElmIGVycm9ycyBhcmUgcmV0dXJuZWQsIGl0IHN0YXlzIGluIHRoZSBzYW1lIHBhZ2UuXHJcbiAgICAgICAgKiAgSWYgdGhlcmUgaXMgbm8gZXJyb3JzIGl0IG1vdmVzIHRvIHRoZSBuZXh0IHN0ZXAuXHJcbiAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgbmV4dFN0ZXAoYWN0aW9uQ29udGV4dDogSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0KSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgYnVzeTogVUlCdXN5SGFuZGxlID0gdGhpcy5hc3luY0J1c3koKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tvdXRTZXJ2aWNlLmNvbXBsZXRlQ2hlY2tvdXQoKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKHJlc3VsdDogSUNvbXBsZXRlQ2hlY2tvdXRSZXN1bHQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoXy5pc0VtcHR5KHJlc3VsdC5PcmRlck51bWJlcikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ1dlIGNvdWxkIG5vdCBjb21wbGV0ZSB0aGUgb3JkZXIgYmVjYXVzZSB0aGUgb3JkZXIgbnVtYmVyIGlzIGVtcHR5JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHJlc3VsdFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKCdjaGVja291dENvbXBsZXRlZCcsIHsgZGF0YTogcmVzdWx0IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tvdXRTZXJ2aWNlLnNldE9yZGVyVG9DYWNoZShyZXN1bHQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC50aGVuKChyZXN1bHQ6IElDb21wbGV0ZUNoZWNrb3V0UmVzdWx0KSA9PiB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBvcmRlckNvbmZpcm1hdGlvbnZpZXdNb2RlbCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgT3JkZXJOdW1iZXI6IHJlc3VsdC5PcmRlck51bWJlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgQ3VzdG9tZXJFbWFpbDogcmVzdWx0LkN1c3RvbWVyRW1haWxcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tvdXRTZXJ2aWNlLnNldE9yZGVyQ29uZmlybWF0aW9uVG9DYWNoZShvcmRlckNvbmZpcm1hdGlvbnZpZXdNb2RlbCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuTmV4dFN0ZXBVcmwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSByZXN1bHQuTmV4dFN0ZXBVcmw7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5mYWlsKHJlYXNvbiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgY29tcGxldGluZyB0aGUgY2hlY2tvdXQuJywgcmVhc29uKTtcclxuICAgICAgICAgICAgICAgICAgICBFcnJvckhhbmRsZXIuaW5zdGFuY2UoKS5vdXRwdXRFcnJvckZyb21Db2RlKCdDb21wbGV0ZUNoZWNrb3V0RmFpbGVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnVzeS5kb25lKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCByZWdpc3RlclN1YnNjcmlwdGlvbnMoKSB7XHJcblxyXG4gICAgICAgICAgICBzdXBlci5yZWdpc3RlclN1YnNjcmlwdGlvbnMoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBoYW5kbGU6IG51bWJlcjtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIuc3Vic2NyaWJlKCdjYXJ0VXBkYXRpbmcnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoaGFuZGxlKTtcclxuICAgICAgICAgICAgICAgIGhhbmRsZSA9IHNldFRpbWVvdXQoKCkgPT4gdGhpcy5yZW5kZXJMb2FkaW5nKCksIDMwMCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5zdWJzY3JpYmUoJ2NhcnRVcGRhdGluZ0ZhaWxlZCcsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChoYW5kbGUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZVJlbmRlcigpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIuc3Vic2NyaWJlKCdjYXJ0VXBkYXRlZCcsIGUgPT4ge1xyXG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGhhbmRsZSk7XHJcbiAgICAgICAgICAgICAgICBlLmRhdGEuR2V0dGluZ0NhcnQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKHRoaXMudmlld01vZGVsTmFtZSwgZS5kYXRhKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHJlbmRlckxvYWRpbmcoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxvYWRpbmdWaWV3TW9kZWwgPSB7IEdldHRpbmdDYXJ0OiB0cnVlIH07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXIodGhpcy52aWV3TW9kZWxOYW1lLCBsb2FkaW5nVmlld01vZGVsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgcmVSZW5kZXIoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyTG9hZGluZygpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jaGVja291dFNlcnZpY2VcclxuICAgICAgICAgICAgICAgIC5nZXRDYXJ0KClcclxuICAgICAgICAgICAgICAgIC50aGVuKGNhcnRWbSA9PiB0aGlzLnJlbmRlcih0aGlzLnZpZXdNb2RlbE5hbWUsIGNhcnRWbSkpXHJcbiAgICAgICAgICAgICAgICAuZmFpbCgocmVhc29uOiBhbnkpID0+IHRoaXMub25SZW5kZXJEYXRhRmFpbGVkKHJlYXNvbikpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElQYXltZW50U2VydmljZSB7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJldHVybiBhIGxpc3Qgb2Ygc2F2ZWQgcGF5bWVudCBtZXRob2RzIGZvciBhIHNwZWNpZmllZCBhcnJheSBvZiBwYXltZW50IHByb3ZpZGVyIG5hbWVzXHJcbiAgICAgICAgICogQHBhcmFtICB7cHJvdmlkZXJzOiBBcnJheTxzdHJpbmc+fSAgICAgICBBcnJheSBvZiBwcm92aWRlciBuYW1lcy5cclxuICAgICAgICAgKiBAcmV0dXJuIHtBcnJheTxJUGF5bWVudE1ldGhvZFZpZXdNb2RlbD59IEluc3RhbmNlIG9mIHRoZSBwcm92aWRlci5cclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXRQYXltZW50TWV0aG9kcyhwcm92aWRlcnM6IEFycmF5PHN0cmluZz4pIDogUS5Qcm9taXNlPElQYXltZW50Vmlld01vZGVsPjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmV0dXJuIHRoZSBhY3RpdmUgcGF5bWVudCBmb3IgdGhlIGFjdGl2ZSBjYXJ0XHJcbiAgICAgICAgICogQHJldHVybiB7SUFjdGl2ZVBheW1lbnRWaWV3TW9kZWx9IEFjdGl2ZSBwYXltZW50IGZvciB0aGUgYWN0aXZlIGNhcnQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZ2V0QWN0aXZlUGF5bWVudCgpIDogUS5Qcm9taXNlPElBY3RpdmVQYXltZW50Vmlld01vZGVsPjtcclxuXHJcbiAgICAgICAgcmVtb3ZlUGF5bWVudE1ldGhvZChwYXltZW50TWV0aG9kSWQ6IHN0cmluZywgcGF5bWVudFByb3ZpZGVyTmFtZTogc3RyaW5nKTogUS5Qcm9taXNlPHZvaWQ+O1xyXG5cclxuICAgICAgICBzZXRQYXltZW50TWV0aG9kKHJlcXVlc3QgOiBhbnkpIDogUS5Qcm9taXNlPElQYXltZW50Vmlld01vZGVsPjtcclxuICAgIH1cclxufVxyXG4iLCJtb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSUFjdGl2ZVBheW1lbnRWaWV3TW9kZWwge1xyXG4gICAgICAgIElkOiBzdHJpbmc7XHJcbiAgICAgICAgUGF5bWVudE1ldGhvZFR5cGU6IHN0cmluZztcclxuICAgICAgICBTaG91bGRDYXB0dXJlUGF5bWVudDogYm9vbGVhbjtcclxuICAgICAgICBDYXB0dXJlUGF5bWVudFVybDogc3RyaW5nO1xyXG4gICAgICAgIFBheW1lbnRTdGF0dXM6IHN0cmluZztcclxuICAgICAgICBQcm92aWRlclR5cGU6IHN0cmluZztcclxuICAgICAgICBQcm92aWRlck5hbWU6IHN0cmluZztcclxuICAgICAgICBDYW5TYXZlUGF5bWVudE1ldGhvZDogYm9vbGVhbjtcclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L1N5c3RlbS9JRGlzcG9zYWJsZS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi9WaWV3TW9kZWxzL0lBY3RpdmVQYXltZW50Vmlld01vZGVsLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIEJhc2VDaGVja291dFBheW1lbnRQcm92aWRlciBpbXBsZW1lbnRzIE9yY2tlc3RyYS5Db21wb3Nlci5JRGlzcG9zYWJsZSB7XHJcbiAgICAgICAgcHJvdGVjdGVkIF9wcm92aWRlclR5cGU6IHN0cmluZztcclxuICAgICAgICBwcm90ZWN0ZWQgX3Byb3ZpZGVyTmFtZTogc3RyaW5nO1xyXG4gICAgICAgIHByb3RlY3RlZCBfZXZlbnRIdWI6IElFdmVudEh1YjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhpcyBwcm9wZXJ0eSBpcyBpbmplY3RlZCBmb3IgdW5pdCB0ZXN0IHB1cnBvc2VzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBfd2luZG93OiBXaW5kb3c7XHJcblxyXG4gICAgICAgIGNvbnN0cnVjdG9yKHdpbmRvdzogV2luZG93LCBldmVudEh1YjogSUV2ZW50SHViLCBwcm92aWRlclR5cGU6IHN0cmluZywgcHJvdmlkZXJOYW1lOiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy5fcHJvdmlkZXJUeXBlID0gcHJvdmlkZXJUeXBlO1xyXG4gICAgICAgICAgICB0aGlzLl9wcm92aWRlck5hbWUgPSBwcm92aWRlck5hbWU7XHJcbiAgICAgICAgICAgIHRoaXMuX3dpbmRvdyA9IHdpbmRvdztcclxuICAgICAgICAgICAgdGhpcy5fZXZlbnRIdWIgPSBldmVudEh1YjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIE9idGFpbnMgdGhlIHVuZGVybHlpbmcgdHlwZSBvZiB0aGUgUGF5bWVudCBQcm92aWRlci5cclxuICAgICAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IFR5cGUgb2YgdGhlIFBheW1lbnQgUHJvdmlkZXIuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGdldCBwcm92aWRlclR5cGUoKTogc3RyaW5nIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Byb3ZpZGVyVHlwZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIE9idGFpbnMgdGhlIG5hbWUgb2YgdGhlIFBheW1lbnQgUHJvdmlkZXIuXHJcbiAgICAgICAgICogQHJldHVybiB7c3RyaW5nfSBOYW1lIG9mIHRoZSBQYXltZW50IHByb3ZpZGVyLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBnZXQgcHJvdmlkZXJOYW1lKCk6IHN0cmluZyB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9wcm92aWRlck5hbWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgZ2V0IHdpbmRvdygpOiBXaW5kb3cge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fd2luZG93O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogTWV0aG9kIGNhbGxlZCB0byBnZXQgYSBwcm9taXNlIGZvciBwYXltZW50IHZhbGlkYXRpb24uXHJcbiAgICAgICAgICogUmV0dXJucyBhIHByb21pc2Ugb2YgYm9vbGVhbi4gVGhlIHJldHVybiBib29sZWFuIG5lZWRzIHRvIGJlIGZhbHNlIGZvciB2YWxpZGF0aW9uIGVycm9yLFxyXG4gICAgICAgICAqIG9yIHRydWUgaWYgdmFsaWQuXHJcbiAgICAgICAgICogQHJldHVybiB7US5Qcm9taXNlPGJvb2xlYW4+fSBQcm9taXNlIHRoYXQgd2lsbCBiZSBleGVjdXRlZCB3aGVuIHdlIHZhbGlkYXRlIHRoZSBwYXltZW50IGNvbnRyb2wuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHZhbGlkYXRlUGF5bWVudChhY3RpdmVQYXltZW50Vk06IElBY3RpdmVQYXltZW50Vmlld01vZGVsKTogUS5Qcm9taXNlPGJvb2xlYW4+IHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGlzIFBheW1lbnQgUHJvdmlkZXIgZG9lcyBub3QgaW1wbGVtZW50IHRoZSBcInZhbGlkYXRlUGF5bWVudFwiIG1ldGhvZC4nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIE1ldGhvZCBjYWxsZWQgdG8gZ2V0IGEgcHJvbWlzZSB3aGVuIHBheW1lbnQgd2lsbCBzdWJtaXQuXHJcbiAgICAgICAgICogQHJldHVybiB7US5Qcm9taXNlPGFueT59IFByb21pc2UgdGhhdCB3aWxsIGJlIGV4ZWN1dGVkIHdoZW4gdG8gY2FydCBpcyBhYm91dCB0aGUgYmUgdXBkYXRlZC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3VibWl0UGF5bWVudChhY3RpdmVQYXltZW50Vk06IElBY3RpdmVQYXltZW50Vmlld01vZGVsKTogUS5Qcm9taXNlPGFueT4ge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoaXMgUGF5bWVudCBQcm92aWRlciBkb2VzIG5vdCBpbXBsZW1lbnQgdGhlIFwic3VibWl0UGF5bWVudFwiIG1ldGhvZC4nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldHMgdGhlIGNvbnRhaW5lciBmb3IgdGhlIFBheW1lbnQgUHJvdmlkZXIuXHJcbiAgICAgICAgICogQHJldHVybiB7SlF1ZXJ5fSBqUXVlcnkgb2JqZWN0LlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByb3RlY3RlZCBnZXRGb3JtKCk6IEpRdWVyeSB7XHJcbiAgICAgICAgICAgIHZhciBmb3JtID0gJCgnI1BheW1lbnRGb3JtJyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWZvcm0gfHwgXy5pc0VtcHR5KGZvcm0pKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvdWxkIG5vdCBmaW5kIHRoZSBlbGVtZW50IFBheW1lbnRGb3JtIG9uIHRoaXMgcGFnZS4nKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZvcm07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcclxuICAgICAgICAgICAgLy9Ob3RoaW5nIHRvIGRvIGhlcmUuXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSVBheW1lbnRNZXRob2RWaWV3TW9kZWwge1xyXG4gICAgICAgIElkOiBzdHJpbmc7XHJcbiAgICAgICAgUGF5bWVudFByb3ZpZGVyTmFtZTogc3RyaW5nO1xyXG4gICAgICAgIERpc3BsYXlOYW1lOiBzdHJpbmc7XHJcbiAgICAgICAgSXNTZWxlY3RlZDogYm9vbGVhbjtcclxuICAgICAgICBKc29uQ29udGV4dDogYW55O1xyXG4gICAgICAgIFBheW1lbnRUeXBlOiBzdHJpbmc7XHJcbiAgICAgICAgRGVmYXVsdDogYm9vbGVhbjtcclxuICAgICAgICBJc1ZhbGlkOiBib29sZWFuO1xyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vVmlld01vZGVscy9JUGF5bWVudE1ldGhvZFZpZXdNb2RlbC50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJUGF5bWVudFJlcG9zaXRvcnkge1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZXR1cm4gYSBsaXN0IG9mIHNhdmVkIHBheW1lbnQgbWV0aG9kcyBmb3IgYSBzcGVjaWZpZWQgYXJyYXkgb2YgcGF5bWVudCBwcm92aWRlciBuYW1lc1xyXG4gICAgICAgICAqIEBwYXJhbSAge3Byb3ZpZGVyczogQXJyYXk8c3RyaW5nPn0gICAgICAgQXJyYXkgb2YgcHJvdmlkZXIgbmFtZXMuXHJcbiAgICAgICAgICogQHJldHVybiB7QXJyYXk8SVBheW1lbnRNZXRob2RWaWV3TW9kZWw+fSBJbnN0YW5jZSBvZiB0aGUgcHJvdmlkZXIuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZ2V0UGF5bWVudE1ldGhvZHMocHJvdmlkZXJzOiBBcnJheTxzdHJpbmc+KSA6IFEuUHJvbWlzZTxJUGF5bWVudFZpZXdNb2RlbD47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJldHVybiB0aGUgYWN0aXZlIHBheW1lbnQgZm9yIHRoZSBhY3RpdmUgY2FydFxyXG4gICAgICAgICAqIEByZXR1cm4ge0lBY3RpdmVQYXltZW50Vmlld01vZGVsfSBBY3RpdmUgcGF5bWVudCBmb3IgdGhlIGFjdGl2ZSBjYXJ0LlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldEFjdGl2ZVBheW1lbnQoKSA6IFEuUHJvbWlzZTxJQWN0aXZlUGF5bWVudFZpZXdNb2RlbD47XHJcblxyXG4gICAgICAgIHJlbW92ZVBheW1lbnRNZXRob2QocGF5bWVudE1ldGhvZElkOiBzdHJpbmcsIHBheW1lbnRQcm92aWRlck5hbWU6IHN0cmluZyk6IFEuUHJvbWlzZTx2b2lkPjtcclxuXHJcbiAgICAgICAgc2V0UGF5bWVudE1ldGhvZChyZXF1ZXN0IDogYW55KSA6IFEuUHJvbWlzZTxJUGF5bWVudFZpZXdNb2RlbD47XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9NdmMvQ29tcG9zZXJDbGllbnQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvRXZlbnRzL0V2ZW50SHViLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uL1Byb3ZpZGVycy9CYXNlQ2hlY2tvdXRQYXltZW50UHJvdmlkZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vUmVwb3NpdG9yaWVzL0lQYXltZW50UmVwb3NpdG9yeS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL0lQYXltZW50U2VydmljZS50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBQYXltZW50U2VydmljZSBpbXBsZW1lbnRzIElQYXltZW50U2VydmljZSB7XHJcbiAgICAgICAgcHJpdmF0ZSBldmVudEh1YjogSUV2ZW50SHViO1xyXG4gICAgICAgIHByaXZhdGUgcGF5bWVudFJlcG9zaXRvcnk6IElQYXltZW50UmVwb3NpdG9yeTtcclxuXHJcbiAgICAgICAgY29uc3RydWN0b3IoZXZlbnRIdWIgOiBJRXZlbnRIdWIsIHBheW1lbnRSZXBvc2l0b3J5OiBJUGF5bWVudFJlcG9zaXRvcnkpIHtcclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1YiA9IGV2ZW50SHViO1xyXG4gICAgICAgICAgICB0aGlzLnBheW1lbnRSZXBvc2l0b3J5ID0gcGF5bWVudFJlcG9zaXRvcnk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZXR1cm4gYSBsaXN0IG9mIGFjY2VwdGFibGUgcGF5bWVudCBwcm92aWRlcnMgZGV0YWlscyB3aXRoIGxhYmVsc1xyXG4gICAgICAgICAqIEBwYXJhbSAge3Byb3ZpZGVyczogQXJyYXk8c3RyaW5nPn0gICAgICBBcnJheSBvZiBwcm92aWRlciBuYW1lcy5cclxuICAgICAgICAgKiBAcmV0dXJuIHtBcnJheTxJUGF5bWVudE1ldGhvZFZpZXdNb2RlbH0gTGlzdCBvZiBwYXltZW50IHByb3ZpZGVyIGRldGFpbHNcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgZ2V0UGF5bWVudE1ldGhvZHMocHJvdmlkZXJzOiBBcnJheTxzdHJpbmc+KSA6IFEuUHJvbWlzZTxJUGF5bWVudFZpZXdNb2RlbD4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXltZW50UmVwb3NpdG9yeS5nZXRQYXltZW50TWV0aG9kcyhwcm92aWRlcnMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmV0dXJuIHRoZSBhY3RpdmUgcGF5bWVudCBmb3IgdGhlIGFjdGl2ZSBjYXJ0XHJcbiAgICAgICAgICogQHJldHVybiB7SUFjdGl2ZVBheW1lbnRWaWV3TW9kZWx9IEFjdGl2ZSBwYXltZW50IGZvciB0aGUgYWN0aXZlIGNhcnQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGdldEFjdGl2ZVBheW1lbnQoKSA6IFEuUHJvbWlzZTxJQWN0aXZlUGF5bWVudFZpZXdNb2RlbD4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXltZW50UmVwb3NpdG9yeS5nZXRBY3RpdmVQYXltZW50KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgcmVtb3ZlUGF5bWVudE1ldGhvZChwYXltZW50TWV0aG9kSWQ6IHN0cmluZywgcGF5bWVudFByb3ZpZGVyTmFtZTogc3RyaW5nKTogUS5Qcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGF5bWVudFJlcG9zaXRvcnkucmVtb3ZlUGF5bWVudE1ldGhvZChwYXltZW50TWV0aG9kSWQsIHBheW1lbnRQcm92aWRlck5hbWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHNldFBheW1lbnRNZXRob2QocmVxdWVzdCA6IGFueSkgOiBRLlByb21pc2U8SVBheW1lbnRWaWV3TW9kZWw+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGF5bWVudFJlcG9zaXRvcnkuc2V0UGF5bWVudE1ldGhvZChyZXF1ZXN0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuL0lQYXltZW50TWV0aG9kVmlld01vZGVsLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vSUFjdGl2ZVBheW1lbnRWaWV3TW9kZWwudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElQYXltZW50Vmlld01vZGVsIHtcclxuICAgICAgICBQYXltZW50SWQ6IHN0cmluZztcclxuICAgICAgICBQYXltZW50TWV0aG9kczogQXJyYXk8SVBheW1lbnRNZXRob2RWaWV3TW9kZWw+O1xyXG4gICAgICAgIFVwb25SZWNlcHRpb25QYXltZW50TWV0aG9kVmlld01vZGVsczogQXJyYXk8SVBheW1lbnRNZXRob2RWaWV3TW9kZWw+O1xyXG4gICAgICAgIE9ubGluZVBheW1lbnRNZXRob2RWaWV3TW9kZWxzOiBBcnJheTxJUGF5bWVudE1ldGhvZFZpZXdNb2RlbD47XHJcbiAgICAgICAgQ3JlZGl0Q2FyZFBheW1lbnRNZXRob2Q6IElQYXltZW50TWV0aG9kVmlld01vZGVsO1xyXG4gICAgICAgIFNhdmVkQ3JlZGl0Q2FyZHM6IEFycmF5PElQYXltZW50TWV0aG9kVmlld01vZGVsPjtcclxuICAgICAgICBJc1NhdmVkQ3JlZGl0Q2FyZFNlbGVjdGVkOiBib29sZWFuO1xyXG4gICAgICAgIElzTG9hZGluZzogYm9vbGVhbjtcclxuICAgICAgICBJc1Byb3ZpZGVyTG9hZGluZzogYm9vbGVhbjtcclxuICAgICAgICBBY3RpdmVQYXltZW50Vmlld01vZGVsOiBJQWN0aXZlUGF5bWVudFZpZXdNb2RlbDtcclxuICAgIH1cclxufVxyXG4iLCJtb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSVBheW1lbnRQcm9maWxlTGlzdEl0ZW1WaWV3TW9kZWwge1xyXG4gICAgICAgIFNjb3BlSWQ6IHN0cmluZztcclxuXHJcbiAgICAgICAgUHJvdmlkZXJOYW1lOiBzdHJpbmc7XHJcblxyXG4gICAgICAgIFBheW1lbnRQcm9maWxlSWQ6IHN0cmluZztcclxuXHJcbiAgICAgICAgRXh0ZXJuYWxJZHM6IHN0cmluZztcclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9J0lQYXltZW50UHJvZmlsZUxpc3RJdGVtVmlld01vZGVsLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElQYXltZW50UHJvZmlsZUxpc3RWaWV3TW9kZWwge1xyXG4gICAgICAgIFBheW1lbnRQcm9maWxlczogQXJyYXk8SVBheW1lbnRQcm9maWxlTGlzdEl0ZW1WaWV3TW9kZWw+O1xyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvTXZjL0NvbXBvc2VyQ2xpZW50LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9XCJJUGF5bWVudFJlcG9zaXRvcnkudHNcIiAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9XCIuLi9WaWV3TW9kZWxzL0lQYXltZW50Vmlld01vZGVsLnRzXCIgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPVwiLi4vVmlld01vZGVscy9JQWN0aXZlUGF5bWVudFZpZXdNb2RlbC50c1wiIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD1cIi4uL1ZpZXdNb2RlbHMvSVBheW1lbnRQcm9maWxlTGlzdFZpZXdNb2RlbC50c1wiIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIGV4cG9ydCBjbGFzcyBQYXltZW50UmVwb3NpdG9yeSBpbXBsZW1lbnRzIElQYXltZW50UmVwb3NpdG9yeSB7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJldHVybiBhIGxpc3Qgb2Ygc2F2ZWQgcGF5bWVudCBtZXRob2RzIGZvciBhIHNwZWNpZmllZCBhcnJheSBvZiBwYXltZW50IHByb3ZpZGVyIG5hbWVzXHJcbiAgICAgICAgICogQHBhcmFtICB7cHJvdmlkZXJzOiBBcnJheTxzdHJpbmc+fSAgICAgICBBcnJheSBvZiBwcm92aWRlciBuYW1lcy5cclxuICAgICAgICAgKiBAcmV0dXJuIHtBcnJheTxJUGF5bWVudE1ldGhvZFZpZXdNb2RlbD59IEluc3RhbmNlIG9mIHRoZSBwcm92aWRlci5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgZ2V0UGF5bWVudE1ldGhvZHMocHJvdmlkZXJzOiBBcnJheTxzdHJpbmc+KTogUS5Qcm9taXNlPElQYXltZW50Vmlld01vZGVsPiB7XHJcbiAgICAgICAgICAgIHJldHVybiA8US5Qcm9taXNlPElQYXltZW50Vmlld01vZGVsPj5cclxuICAgICAgICAgICAgICAgIENvbXBvc2VyQ2xpZW50LnBvc3QoJy9hcGkvcGF5bWVudC9wYXltZW50bWV0aG9kcycsIHsgUHJvdmlkZXJzIDogcHJvdmlkZXJzfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZXR1cm4gdGhlIGFjdGl2ZSBwYXltZW50IGZvciB0aGUgYWN0aXZlIGNhcnRcclxuICAgICAgICAgKiBAcmV0dXJuIHtJQWN0aXZlUGF5bWVudFZpZXdNb2RlbH0gQWN0aXZlIHBheW1lbnQgZm9yIHRoZSBhY3RpdmUgY2FydC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgZ2V0QWN0aXZlUGF5bWVudCgpIDogUS5Qcm9taXNlPElBY3RpdmVQYXltZW50Vmlld01vZGVsPiB7XHJcbiAgICAgICAgICAgIHJldHVybiA8US5Qcm9taXNlPElBY3RpdmVQYXltZW50Vmlld01vZGVsPj5cclxuICAgICAgICAgICAgICAgIENvbXBvc2VyQ2xpZW50LmdldCgnL2FwaS9wYXltZW50L2FjdGl2ZXBheW1lbnQnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyByZW1vdmVQYXltZW50TWV0aG9kKHBheW1lbnRNZXRob2RJZDogc3RyaW5nLCBwYXltZW50UHJvdmlkZXJOYW1lOiBzdHJpbmcpOiBRLlByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgICAgICByZXR1cm4gPFEuUHJvbWlzZTx2b2lkPj5cclxuICAgICAgICAgICAgICAgIENvbXBvc2VyQ2xpZW50LnJlbW92ZSgnL2FwaS9wYXltZW50L3JlbW92ZW1ldGhvZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGF5bWVudE1ldGhvZElkOiBwYXltZW50TWV0aG9kSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGF5bWVudFByb3ZpZGVyTmFtZTogcGF5bWVudFByb3ZpZGVyTmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc2V0UGF5bWVudE1ldGhvZChyZXF1ZXN0IDogYW55KSA6IFEuUHJvbWlzZTxJUGF5bWVudFZpZXdNb2RlbD4ge1xyXG4gICAgICAgICAgICByZXR1cm4gPFEuUHJvbWlzZTxJUGF5bWVudFZpZXdNb2RlbD4+XHJcbiAgICAgICAgICAgICAgICBDb21wb3NlckNsaWVudC5wdXQoJy9hcGkvcGF5bWVudC9wYXltZW50TWV0aG9kJywgcmVxdWVzdCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9FdmVudHMvSUV2ZW50SHViLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuL0Jhc2VDaGVja291dFBheW1lbnRQcm92aWRlci50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBDaGVja291dFBheW1lbnRQcm92aWRlckZhY3Rvcnkge1xyXG4gICAgICAgIHByaXZhdGUgX2V2ZW50SHViOiBJRXZlbnRIdWI7XHJcbiAgICAgICAgcHJpdmF0ZSBfd2luZG93OiBXaW5kb3c7XHJcblxyXG4gICAgICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcih3aW5kb3c6IFdpbmRvdywgZXZlbnRIdWI6IElFdmVudEh1Yikge1xyXG4gICAgICAgICAgICB0aGlzLl9ldmVudEh1YiA9IGV2ZW50SHViO1xyXG4gICAgICAgICAgICB0aGlzLl93aW5kb3cgPSB3aW5kb3c7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEZXRlcm1pbmVzIGlmIHRoZSBDaGVja291dCBQYXltZW50IFByb3ZpZGVyIGV4aXN0cyBvciBub3QuXHJcbiAgICAgICAgICogQHBhcmFtICB7c3RyaW5nfSAgcHJvdmlkZXJUeXBlIFR5cGUgb2YgdGhlIHByb3ZpZGVyLlxyXG4gICAgICAgICAqIEByZXR1cm4ge2Jvb2xlYW59ICAgICAgICAgICAgICBUcnVlIGlmIHRoZSBwcm92aWRlciBleGlzdHMgaW4gdGhlIE9yY2tlc3RyYS5Db21wb3NlciBuYW1lc3BhY2UuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGhhc1Byb3ZpZGVyKHByb3ZpZGVyVHlwZTogc3RyaW5nKSA6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICBpZiAoT3Jja2VzdHJhLkNvbXBvc2VyW3Byb3ZpZGVyVHlwZV0pIHtcclxuICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0cyBhbiBpbnN0YW5jZSBvZiBhIENoZWNrb3V0IFBheW1lbnQgcHJvdmlkZXIuIElmIHRoZSBwcm92aWRlciBkb2VzIG5vdCBleGlzdHMsIHRocm93cyBhblxyXG4gICAgICAgICAqIGVycm9yLlxyXG4gICAgICAgICAqIEBwYXJhbSAge3N0cmluZ30gICAgICAgICAgICAgICAgICAgcHJvdmlkZXJUeXBlICAgICAgICAgICAgICAgICAgVHlwZSBvZiB0aGUgcHJvdmlkZXIuXHJcbiAgICAgICAgICogQHBhcmFtICB7c3RyaW5nfSAgICAgICAgICAgICAgICAgICBwcm92aWRlck5hbWUgICAgICAgICAgICAgICAgICBOYW1lIG9mIHRoZSBwcm92aWRlci5cclxuICAgICAgICAgKiBAcmV0dXJuIHtJQ2hlY2tvdXRQYXltZW50UHJvdmlkZXJ9ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEluc3RhbmNlIG9mIHRoZSBwcm92aWRlci5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgZ2V0SW5zdGFuY2UocHJvdmlkZXJUeXBlOiBzdHJpbmcsIHByb3ZpZGVyTmFtZTogc3RyaW5nKVxyXG4gICAgICAgICAgICA6IEJhc2VDaGVja291dFBheW1lbnRQcm92aWRlciB7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5oYXNQcm92aWRlcihwcm92aWRlclR5cGUpKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgQ2xhenogPSBPcmNrZXN0cmEuQ29tcG9zZXJbcHJvdmlkZXJUeXBlXTtcclxuICAgICAgICAgICAgICAgIHZhciBpbnN0YW5jZSA9IG5ldyBDbGF6eih0aGlzLl93aW5kb3csIHByb3ZpZGVyTmFtZSwgdGhpcy5fZXZlbnRIdWIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGluc3RhbmNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuYWJsZSB0byBmaW5kIGEgY2xhc3MgbmFtZWQgXCInICsgcHJvdmlkZXJUeXBlICsgJ1wiLicpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9J1NlcnZpY2VzL0lQYXltZW50U2VydmljZS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPSdTZXJ2aWNlcy9QYXltZW50U2VydmljZS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPSdSZXBvc2l0b3JpZXMvUGF5bWVudFJlcG9zaXRvcnkudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nUHJvdmlkZXJzL0Jhc2VDaGVja291dFBheW1lbnRQcm92aWRlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPSdQcm92aWRlcnMvQ2hlY2tvdXRQYXltZW50UHJvdmlkZXJGYWN0b3J5LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9J1ZpZXdNb2RlbHMvSVBheW1lbnRWaWV3TW9kZWwudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nVmlld01vZGVscy9JQWN0aXZlUGF5bWVudFZpZXdNb2RlbC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvQ29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9FcnJvckhhbmRsaW5nL0Vycm9ySGFuZGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5DYXJ0LlVJL0NoZWNrb3V0Q29tbW9uL1NvdXJjZS9UeXBlU2NyaXB0L0NoZWNrb3V0U2VydmljZS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5DYXJ0LlVJL0NoZWNrb3V0Q29tbW9uL1NvdXJjZS9UeXBlU2NyaXB0L0Jhc2VDaGVja291dENvbnRyb2xsZXIudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgQ2hlY2tvdXRQYXltZW50Q29udHJvbGxlciBleHRlbmRzIE9yY2tlc3RyYS5Db21wb3Nlci5CYXNlQ2hlY2tvdXRDb250cm9sbGVyIHtcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHBheW1lbnRQcm92aWRlcnM6IEFycmF5PEJhc2VDaGVja291dFBheW1lbnRQcm92aWRlcj47XHJcbiAgICAgICAgcHJvdGVjdGVkIGFjdGl2ZVBheW1lbnRQcm92aWRlcjogQmFzZUNoZWNrb3V0UGF5bWVudFByb3ZpZGVyO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiB0aGlzIHByZXZlbnRzIGNoYW5naW5nIHBheW1lbnQgbWV0aG9kIG1vcmUgdGhhbiBvbmNlIHBlciBjbGlja1xyXG4gICAgICAgICAqIHRoaXMgaGFwcGVucyB3aGVuIFwibmV3IGNyZWRpdCBjYXJkXCIgaXMgc2VsZWN0ZWQgc2luY2Ugd2UgbmVlZCB0b1xyXG4gICAgICAgICAqIGxpc3RlbiBmb3IgYm90aCBjbGljayBhbmQgY2hhbmdlIGV2ZW50cyB0byBoYW5kbGUgYm90aCB3aGVuIHdlXHJcbiAgICAgICAgICogY2hhbmdlIHRvIG5ldyBjcmVkaXQgY2FyZCBvciB3aGVuIG5ldyBDQyBpcyBhbHJlYWR5IHNlbGVjdGVkIGFuZFxyXG4gICAgICAgICAqIHdlIHdhbnQgdG8gY29tZSBiYWNrIHRvIHRoZSBuZXcgQ0Mgc2NyZWVuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJvdGVjdGVkIGRlYm91bmNlQ2hhbmdlUGF5bWVudE1ldGhvZCA9IF8uZGVib3VuY2UodGhpcy5leGVjdXRlQ2hhbmdlUGF5bWVudE1ldGhvZCwgMzAwKTtcclxuXHJcbiAgICAgICAgLyogUHVibGljIHRvIGVuYWJsZSBtb2NraW5nIGZvciBVVCAqL1xyXG4gICAgICAgIHB1YmxpYyBwYXltZW50U2VydmljZTogSVBheW1lbnRTZXJ2aWNlO1xyXG4gICAgICAgIHByb3RlY3RlZCB2aWV3TW9kZWw6IElQYXltZW50Vmlld01vZGVsO1xyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgX3dpbmRvdzogV2luZG93O1xyXG4gICAgICAgIHByb3RlY3RlZCBfYnVzeUhhbmRsZXI6IFVJQnVzeUhhbmRsZTtcclxuXHJcbiAgICAgICAgcHVibGljIGluaXRpYWxpemUoKSB7XHJcbiAgICAgICAgICAgIHN1cGVyLmluaXRpYWxpemUoKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3dpbmRvdyA9IHdpbmRvdztcclxuICAgICAgICAgICAgdGhpcy52aWV3TW9kZWxOYW1lID0gJ0NoZWNrb3V0UGF5bWVudCc7XHJcbiAgICAgICAgICAgIHRoaXMucGF5bWVudFNlcnZpY2UgPSBuZXcgUGF5bWVudFNlcnZpY2UodGhpcy5ldmVudEh1YiwgbmV3IFBheW1lbnRSZXBvc2l0b3J5KCkpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5wYXltZW50UHJvdmlkZXJzID0gdGhpcy5nZXRQYXltZW50UHJvdmlkZXJzKCk7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIuc3Vic2NyaWJlKCdwYXltZW50TWV0aG9kc1VwZGF0ZWQnLCBfID0+IHRoaXMucmVuZGVyRGF0YSgpKTtcclxuICAgICAgICAgICAgdGhpcy5yZWdpc3RlclN1YnNjcmlwdGlvbnMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzZWxlY3RDcmVkaXRDYXJkUGF5bWVudE1ldGhvZCgpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMudmlld01vZGVsLkNyZWRpdENhcmRQYXltZW50TWV0aG9kKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBJZiBhIHNhdmVkIGNyZWRpdCBjYXJkIGlzIGF2YWlsYWJsZSBzZWxlY3QgdGhlIGZpcnN0IG9uZVxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMudmlld01vZGVsLlNhdmVkQ3JlZGl0Q2FyZHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGF5V2l0aFNhdmVkQ3JlZGl0Q2FyZCgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBheVdpdGhDcmVkaXRDYXJkKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vVE9ETyBpcyBpdCB1c2VkID9cclxuICAgICAgICBwdWJsaWMgcGF5V2l0aFNhdmVkQ3JlZGl0Q2FyZCgpIHtcclxuICAgICAgICAgICAgbGV0IHByb3ZpZGVyID0gXy5maXJzdCh0aGlzLnZpZXdNb2RlbC5TYXZlZENyZWRpdENhcmRzKTtcclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VQYXltZW50TWV0aG9kSW50ZXJuYWwocHJvdmlkZXIuSWQsIHByb3ZpZGVyLlBheW1lbnRQcm92aWRlck5hbWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy9UT0RPIGlzIGl0IHVzZWQgP1xyXG4gICAgICAgIHB1YmxpYyBwYXlXaXRoQ3JlZGl0Q2FyZCgpIHtcclxuICAgICAgICAgICAgbGV0IHByb3ZpZGVyID0gdGhpcy52aWV3TW9kZWwuQ3JlZGl0Q2FyZFBheW1lbnRNZXRob2Q7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlUGF5bWVudE1ldGhvZEludGVybmFsKHByb3ZpZGVyLklkLCBwcm92aWRlci5QYXltZW50UHJvdmlkZXJOYW1lKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBjaGFuZ2VQYXltZW50TWV0aG9kSW50ZXJuYWwoYWN0aXZlTWV0aG9kSWQ6IHN0cmluZywgcGF5bWVudFByb3ZpZGVyTmFtZTogc3RyaW5nLCBwYXltZW50VHlwZT86IHN0cmluZykge1xyXG4gICAgICAgICAgICB0aGlzLnZpZXdNb2RlbC5Jc1Byb3ZpZGVyTG9hZGluZyA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuX2J1c3lIYW5kbGVyID0gc3VwZXIuYXN5bmNCdXN5KHsgZWxlbWVudENvbnRleHQ6ICQoZG9jdW1lbnQpLCBjb250YWluZXJDb250ZXh0OiAkKGRvY3VtZW50KSB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZGVib3VuY2VDaGFuZ2VQYXltZW50TWV0aG9kKHsgYWN0aXZlTWV0aG9kSWQsIHBheW1lbnRQcm92aWRlck5hbWUsIHBheW1lbnRUeXBlIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGNoYW5nZVBheW1lbnRNZXRob2QoYWN0aW9uQ29udGV4dCA6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCkge1xyXG4gICAgICAgICAgICB2YXIgYWN0aXZlTWV0aG9kSWQgOiBzdHJpbmcgPSBhY3Rpb25Db250ZXh0LmVsZW1lbnRDb250ZXh0LmRhdGEoJ3BheW1lbnQtaWQnKTtcclxuICAgICAgICAgICAgdmFyIHBheW1lbnRQcm92aWRlck5hbWU6IHN0cmluZyA9IGFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHQuZGF0YSgncGF5bWVudC1wcm92aWRlcicpO1xyXG4gICAgICAgICAgICB2YXIgcGF5bWVudFR5cGU6IHN0cmluZyA9IGFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHQuZGF0YSgncGF5bWVudC10eXBlJyk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNoYW5nZVBheW1lbnRNZXRob2RJbnRlcm5hbChhY3RpdmVNZXRob2RJZCwgcGF5bWVudFByb3ZpZGVyTmFtZSwgcGF5bWVudFR5cGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGV4ZWN1dGVDaGFuZ2VQYXltZW50TWV0aG9kKGFyZ3M6IHsgYWN0aXZlTWV0aG9kSWQ6IHN0cmluZywgcGF5bWVudFByb3ZpZGVyTmFtZTogc3RyaW5nLCBwYXltZW50VHlwZTogc3RyaW5nIH0pIHtcclxuICAgICAgICAgICAgbGV0IHsgYWN0aXZlTWV0aG9kSWQsIHBheW1lbnRQcm92aWRlck5hbWUsIHBheW1lbnRUeXBlIH0gPSBhcmdzO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zZXRQYXltZW50TWV0aG9kKHRoaXMudmlld01vZGVsLlBheW1lbnRJZCwgYWN0aXZlTWV0aG9kSWQsIHBheW1lbnRQcm92aWRlck5hbWUsIHBheW1lbnRUeXBlKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oXyA9PiB0aGlzLmNoZWNrb3V0U2VydmljZS5nZXRDYXJ0KCkpXHJcbiAgICAgICAgICAgICAgICAudGhlbihjYXJ0ID0+IHRoaXMuZXZlbnRIdWIucHVibGlzaCgnY2FydFVwZGF0ZWQnLCB7IGRhdGE6IGNhcnQgfSkpXHJcbiAgICAgICAgICAgICAgICAuZmluKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZXdNb2RlbC5Jc1Byb3ZpZGVyTG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVsZWFzZUJ1c3lIYW5kbGVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJWaWV3KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtSW5zdGFuY2VzID0gdGhpcy5yZWdpc3RlckZvcm1zRm9yVmFsaWRhdGlvbih0aGlzLmNvbnRleHQuY29udGFpbmVyLmZpbmQoJ2Zvcm0nKSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyByZW5kZXJEYXRhKCk6IFEuUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBheW1lbnRTZXJ2aWNlXHJcbiAgICAgICAgICAgICAgICAuZ2V0UGF5bWVudE1ldGhvZHMoXy5tYXAodGhpcy5wYXltZW50UHJvdmlkZXJzLCBwID0+IHAucHJvdmlkZXJOYW1lKSlcclxuICAgICAgICAgICAgICAgIC50aGVuKCh2bTogSVBheW1lbnRWaWV3TW9kZWwpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXZtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gdmlld01vZGVsIHJlY2VpdmVkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoXy5pc0VtcHR5KHZtLlBheW1lbnRNZXRob2RzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHBheW1lbnQgbWV0aG9kIHdhcyBmb3VuZC4nKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmlld01vZGVsID0gdm07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnZpZXdNb2RlbC5BY3RpdmVQYXltZW50Vmlld01vZGVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlUGF5bWVudFByb3ZpZGVyID0gdGhpcy5maW5kUGF5bWVudFByb3ZpZGVyQnlUeXBlKHZtLkFjdGl2ZVBheW1lbnRWaWV3TW9kZWwuUHJvdmlkZXJUeXBlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnZpZXdNb2RlbDtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgZGVmYXVsdFBheW1lbnRNZXRob2QgPSB0aGlzLmZpbmREZWZhdWx0UGF5bWVudE1ldGhvZCh2bS5QYXltZW50TWV0aG9kcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBvbmx5IHNldCB0aGUgcGF5bWVudCBtZXRob2QgaWYgd2UgZm91bmQgYW4gYXBwcm9wcmlhdGUgZGVmYXVsdCBwYXltZW50IG1ldGhvZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoISFkZWZhdWx0UGF5bWVudE1ldGhvZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSWYgd2UgZG9uJ3QgYWxyZWFkeSBoYXZlIGFuIGFjdGl2ZSBwYXltZW50IHNlbGVjdGVkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSBmb3VuZCBhIGRlZmF1bHRQYXltZW50TWV0aG9kIChlaXRoZXIgdGhlIGRlZmF1bHQgb3IgdGhlIG9ubHkgb25lKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlcmUgaXMgYWx3YXlzIGdvaW5nIHRvIGJlIGF0IGxlYXN0IG9uZSAoZGVmYXVsdCBwcm92aWRlciArIHNhdmVkIHBheW1lbnQgbWV0aG9kcylcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNldFBheW1lbnRNZXRob2Qodm0uUGF5bWVudElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFBheW1lbnRNZXRob2QuSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0UGF5bWVudE1ldGhvZC5QYXltZW50UHJvdmlkZXJOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFBheW1lbnRNZXRob2QuUGF5bWVudFR5cGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC50aGVuKCh2bTogSVBheW1lbnRWaWV3TW9kZWwpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclZpZXcoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5mb3JtSW5zdGFuY2VzID0gdGhpcy5yZWdpc3RlckZvcm1zRm9yVmFsaWRhdGlvbih0aGlzLmNvbnRleHQuY29udGFpbmVyLmZpbmQoJ2Zvcm0nKSk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmZhaWwoKHJlYXNvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25Jbml0aWFsaXplUGF5bWVudE1ldGhvZEZhaWxlZChyZWFzb24pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZ2V0VmFsaWRhdGlvblByb21pc2UoKSA6IFEuUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5hY3RpdmVQYXltZW50UHJvdmlkZXIgfHwgIXRoaXMudmlld01vZGVsLkFjdGl2ZVBheW1lbnRWaWV3TW9kZWwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBRKGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzVmFsaWRGb3JVcGRhdGUoKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFEoZmFsc2UpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hY3RpdmVQYXltZW50UHJvdmlkZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAudmFsaWRhdGVQYXltZW50KHRoaXMudmlld01vZGVsLkFjdGl2ZVBheW1lbnRWaWV3TW9kZWwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGdldFVwZGF0ZU1vZGVsUHJvbWlzZSgpOiBRLlByb21pc2U8YW55PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBRLmZjYWxsKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdDb21taXR0aW5nIHBheW1lbnQgaW5mb3JtYXRpb24uJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWN0aXZlUGF5bWVudFByb3ZpZGVyLnN1Ym1pdFBheW1lbnQodGhpcy52aWV3TW9kZWwuQWN0aXZlUGF5bWVudFZpZXdNb2RlbCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGRpc3Bvc2UoKSB7XHJcbiAgICAgICAgICAgIHN1cGVyLmRpc3Bvc2UoKTtcclxuICAgICAgICAgICAgXy5lYWNoKHRoaXMucGF5bWVudFByb3ZpZGVycywgcCA9PiBwLmRpc3Bvc2UoKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgZmluZERlZmF1bHRQYXltZW50TWV0aG9kKHBheW1lbnRNZXRob2RzOiBBcnJheTxJUGF5bWVudE1ldGhvZFZpZXdNb2RlbD4pOiBJUGF5bWVudE1ldGhvZFZpZXdNb2RlbCB7XHJcbiAgICAgICAgICAgIGxldCBkZWZhdWx0UGF5bWVudE1ldGhvZCA9IF8uZmluZChwYXltZW50TWV0aG9kcywgKHBheW1lbnRNZXRob2QpID0+IHBheW1lbnRNZXRob2QuRGVmYXVsdCAmJiBwYXltZW50TWV0aG9kLklzVmFsaWQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCEhZGVmYXVsdFBheW1lbnRNZXRob2QpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkZWZhdWx0UGF5bWVudE1ldGhvZDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBfLmZpbmQocGF5bWVudE1ldGhvZHMsIChwYXltZW50TWV0aG9kKSA9PiBwYXltZW50TWV0aG9kLklzVmFsaWQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvL3JldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uSW5pdGlhbGl6ZVBheW1lbnRNZXRob2RGYWlsZWQocmVhc29uOiBhbnkpIHtcclxuICAgICAgICAgICAgc3VwZXIucmVtb3ZlTG9hZGluZygpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB3aGlsZSByZXRyaWV2aW5nIHBheW1lbnQgbWV0aG9kcycsIHJlYXNvbik7XHJcblxyXG4gICAgICAgICAgICBFcnJvckhhbmRsZXIuaW5zdGFuY2UoKS5vdXRwdXRFcnJvckZyb21Db2RlKCdDaGVja291dFJlbmRlckZhaWxlZCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHJlbmRlclZpZXcoKTogdm9pZCB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcih0aGlzLnZpZXdNb2RlbE5hbWUsIHRoaXMudmlld01vZGVsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBzZXRQYXltZW50TWV0aG9kKFxyXG4gICAgICAgICAgICBwYXltZW50SWQ6IHN0cmluZyxcclxuICAgICAgICAgICAgYWN0aXZlTWV0aG9kSWQ6IHN0cmluZyxcclxuICAgICAgICAgICAgcGF5bWVudFByb3ZpZGVyTmFtZTogc3RyaW5nLFxyXG4gICAgICAgICAgICBwYXltZW50VHlwZTogc3RyaW5nKTogUS5Qcm9taXNlPGFueT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXltZW50U2VydmljZS5zZXRQYXltZW50TWV0aG9kKHtcclxuICAgICAgICAgICAgICAgIFBheW1lbnRJZDogcGF5bWVudElkLFxyXG4gICAgICAgICAgICAgICAgUGF5bWVudFByb3ZpZGVyTmFtZTogcGF5bWVudFByb3ZpZGVyTmFtZSxcclxuICAgICAgICAgICAgICAgIFBheW1lbnRNZXRob2RJZDogYWN0aXZlTWV0aG9kSWQsXHJcbiAgICAgICAgICAgICAgICBQYXltZW50VHlwZTogcGF5bWVudFR5cGUsXHJcbiAgICAgICAgICAgICAgICBQcm92aWRlcnM6IF8ubWFwKHRoaXMucGF5bWVudFByb3ZpZGVycywgcCA9PiBwLnByb3ZpZGVyTmFtZSlcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLnRoZW4oKHBheW1lbnRWaWV3TW9kZWw6IElQYXltZW50Vmlld01vZGVsKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZVBheW1lbnRQcm92aWRlciA9IHRoaXMuZmluZFBheW1lbnRQcm92aWRlckJ5VHlwZShwYXltZW50Vmlld01vZGVsLkFjdGl2ZVBheW1lbnRWaWV3TW9kZWwuUHJvdmlkZXJUeXBlKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnZpZXdNb2RlbCA9IHBheW1lbnRWaWV3TW9kZWw7XHJcblxyXG4gICAgICAgICAgICAgICAgRXJyb3JIYW5kbGVyLmluc3RhbmNlKCkucmVtb3ZlRXJyb3JzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBheW1lbnRWaWV3TW9kZWw7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5mYWlsKHJlYXNvbiA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uQ2hhbmdlUGF5bWVudE1ldGhvZEZhaWxlZChyZWFzb24pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvbkNoYW5nZVBheW1lbnRNZXRob2RGYWlsZWQocmVhc29uOiBhbnkpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMudmlld01vZGVsKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZpZXdNb2RlbC5BY3RpdmVQYXltZW50Vmlld01vZGVsID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHRoaXMudmlld01vZGVsLklzTG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB3aGlsZSBjaGFuZ2luZyB0aGUgcGF5bWVudCBtZXRob2QuJywgcmVhc29uKTtcclxuICAgICAgICAgICAgRXJyb3JIYW5kbGVyLmluc3RhbmNlKCkub3V0cHV0RXJyb3JGcm9tQ29kZSgnUGF5bWVudE1ldGhvZENoYW5nZUZhaWxlZCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGZpbmRQYXltZW50UHJvdmlkZXJCeVR5cGUocHJvdmlkZXJUeXBlOiBzdHJpbmcpIDogQmFzZUNoZWNrb3V0UGF5bWVudFByb3ZpZGVyIHtcclxuICAgICAgICAgICAgdmFyIHByb3ZpZGVyIDogQmFzZUNoZWNrb3V0UGF5bWVudFByb3ZpZGVyID0gXy5maW5kKHRoaXMucGF5bWVudFByb3ZpZGVycywgcHJvdmlkZXIgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHByb3ZpZGVyLnByb3ZpZGVyVHlwZSA9PT0gcHJvdmlkZXJUeXBlO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmICghcHJvdmlkZXIpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIHJlc292ZSBhbnkgcGF5bWVudCBwcm92aWRlciBuYW1lZCBcIicgKyBwcm92aWRlclR5cGUgKyAnXCInKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHByb3ZpZGVyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGdldFBheW1lbnRQcm92aWRlcnMoKSA6IEFycmF5PEJhc2VDaGVja291dFBheW1lbnRQcm92aWRlcj4ge1xyXG4gICAgICAgICAgICBpZiAoXy5pc0VtcHR5KHRoaXMuY29udGV4dC52aWV3TW9kZWwuUGF5bWVudFByb3ZpZGVycykpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ05vIHBheW1lbnQgcHJvdmlkZXIgd2FzIGZvdW5kIGluIHRoZSBDb250ZXh0LicpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZmFjdG9yeSA9IG5ldyBDaGVja291dFBheW1lbnRQcm92aWRlckZhY3RvcnkodGhpcy5fd2luZG93LCB0aGlzLmV2ZW50SHViKTtcclxuICAgICAgICAgICAgdmFyIHByb3ZpZGVycyA6IEFycmF5PEJhc2VDaGVja291dFBheW1lbnRQcm92aWRlcj4gPSBbXTtcclxuXHJcbiAgICAgICAgICAgIF8uZWFjaCh0aGlzLmNvbnRleHQudmlld01vZGVsLlBheW1lbnRQcm92aWRlcnMsICh2bTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcHJvdmlkZXIgPSBmYWN0b3J5LmdldEluc3RhbmNlKHZtLlByb3ZpZGVyVHlwZSwgdm0uUHJvdmlkZXJOYW1lKTtcclxuICAgICAgICAgICAgICAgIHByb3ZpZGVycy5wdXNoKHByb3ZpZGVyKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcHJvdmlkZXJzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHJlbGVhc2VCdXN5SGFuZGxlcigpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2J1c3lIYW5kbGVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9idXN5SGFuZGxlci5kb25lKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9idXN5SGFuZGxlciA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9FdmVudHMvSUV2ZW50SHViLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLkNhcnQuVUkvQ2FydFN1bW1hcnkvU291cmNlL1R5cGVzY3JpcHQvQ2FydFNlcnZpY2UudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgU2hpcHBpbmdBZGRyZXNzQ2hlY2tvdXRTZXJ2aWNlIHtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBjYXJ0U2VydmljZTogSUNhcnRTZXJ2aWNlO1xyXG4gICAgICAgIHByaXZhdGUgZXZlbnRIdWI6IElFdmVudEh1YjtcclxuXHJcbiAgICAgICAgY29uc3RydWN0b3IoY2FydFNlcnZpY2U6IElDYXJ0U2VydmljZSwgZXZlbnRIdWI6IElFdmVudEh1Yikge1xyXG5cclxuICAgICAgICAgICAgaWYgKCFjYXJ0U2VydmljZSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvcjogY2FydFNlcnZpY2UgaXMgcmVxdWlyZWQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIWV2ZW50SHViKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Vycm9yOiBldmVudEh1YiBpcyByZXF1aXJlZCcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNhcnRTZXJ2aWNlID0gY2FydFNlcnZpY2U7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIgPSBldmVudEh1YjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzZXRDaGVhcGVzdFNoaXBwaW5nTWV0aG9kVXNpbmcocG9zdGFsQ29kZTogc3RyaW5nKTogUS5Qcm9taXNlPHZvaWQ+IHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaCgnY2FydFVwZGF0aW5nJywgbnVsbCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jYXJ0U2VydmljZS51cGRhdGVTaGlwcGluZ01ldGhvZFBvc3RhbENvZGUocG9zdGFsQ29kZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB0aGlzLmNhcnRTZXJ2aWNlLnNldENoZWFwZXN0U2hpcHBpbmdNZXRob2QoKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB0aGlzLmNhcnRTZXJ2aWNlLmdldENhcnQoKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAudGhlbihjYXJ0ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKCdjYXJ0VXBkYXRlZCcsIHsgZGF0YTogY2FydCB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKCdwb3N0YWxDb2RlQ2hhbmdlZCcsIHsgZGF0YTogY2FydCB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5mYWlsKHJlYXNvbiA9PiB0aGlzLmhhbmRsZUVycm9yKHJlYXNvbikpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBoYW5kbGVFcnJvcihyZWFzb24gOiBhbnkpIHtcclxuXHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1RoZSB1c2VyIGNoYW5nZWQgdGhlIHBvc3RhbCBjb2RlLCAnICtcclxuICAgICAgICAgICAgICAgICdidXQgd2Ugd2VyZSB1bmFibGUgdG8gdXBkYXRlIHRoZSBjYXJ0IGR5bmFtaWNhbGx5IGFuZCBlc3RpbWF0ZSBzaGlwcGluZyBmZWVzJywgcmVhc29uKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaCgnY2FydFVwZGF0aW5nRmFpbGVkJywgbnVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ2hlY2tvdXRDb21tb24vc291cmNlL1R5cGVzY3JpcHQvQmFzZUNoZWNrb3V0Q29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9DYXJ0U3VtbWFyeS9Tb3VyY2UvVHlwZXNjcmlwdC9DYXJ0U2VydmljZS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPSdTaGlwcGluZ0FkZHJlc3NDaGVja291dFNlcnZpY2UudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIGV4cG9ydCBjbGFzcyBTaGlwcGluZ0FkZHJlc3NDaGVja291dENvbnRyb2xsZXIgZXh0ZW5kcyBPcmNrZXN0cmEuQ29tcG9zZXIuQmFzZUNoZWNrb3V0Q29udHJvbGxlciB7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBzaGlwcGluZ0FkZHJlc3NDaGVja291dFNlcnZpY2U6IFNoaXBwaW5nQWRkcmVzc0NoZWNrb3V0U2VydmljZSA9XHJcbiAgICAgICAgICAgIG5ldyBTaGlwcGluZ0FkZHJlc3NDaGVja291dFNlcnZpY2UobmV3IENhcnRTZXJ2aWNlKG5ldyBDYXJ0UmVwb3NpdG9yeSgpLCB0aGlzLmV2ZW50SHViKSwgdGhpcy5ldmVudEh1Yik7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKCkge1xyXG5cclxuICAgICAgICAgICAgdGhpcy52aWV3TW9kZWxOYW1lID0gJ1NoaXBwaW5nQWRkcmVzcyc7XHJcblxyXG4gICAgICAgICAgICBzdXBlci5pbml0aWFsaXplKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgcmVuZGVyRGF0YShjaGVja291dENvbnRleHQ6IElDaGVja291dENvbnRleHQpOiBRLlByb21pc2U8dm9pZD4ge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFEuZmNhbGwoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNoZWNrb3V0Q29udGV4dC5hdXRoZW50aWNhdGlvblZpZXdNb2RlbC5Jc0F1dGhlbnRpY2F0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVucmVnaXN0ZXJDb250cm9sbGVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIodGhpcy52aWV3TW9kZWxOYW1lLCBjaGVja291dENvbnRleHQuYXV0aGVudGljYXRpb25WaWV3TW9kZWwpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZ2lzdGVyU3Vic2NyaXB0aW9ucygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKHRoaXMudmlld01vZGVsTmFtZSwgY2hlY2tvdXRDb250ZXh0LmNhcnRWaWV3TW9kZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKCdBZGRyZXNzUmVnaW9uUGlja2VyJywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWdpb25zOiBjaGVja291dENvbnRleHQucmVnaW9uc1ZpZXdNb2RlbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgU2VsZWN0ZWRSZWdpb24gOiB0aGlzLmdldFJlZ2lvbkNvZGUoY2hlY2tvdXRDb250ZXh0LmNhcnRWaWV3TW9kZWwpXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaChgJHt0aGlzLnZpZXdNb2RlbE5hbWV9UmVuZGVyZWRgLCBjaGVja291dENvbnRleHQuY2FydFZpZXdNb2RlbCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXRSZWdpb25Db2RlKGNhcnQ6IGFueSk6IHN0cmluZyB7XHJcblxyXG4gICAgICAgICAgICBpZiAoY2FydC5TaGlwcGluZ0FkZHJlc3MgPT09IHVuZGVmaW5lZCB8fCBjYXJ0LlNoaXBwaW5nQWRkcmVzcy5SZWdpb25Db2RlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGNhcnQuU2hpcHBpbmdBZGRyZXNzLlJlZ2lvbkNvZGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgY2hhbmdlUG9zdGFsQ29kZShhY3Rpb25Db250ZXh0OiBJQ29udHJvbGxlckFjdGlvbkNvbnRleHQpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBjb250ZXh0OiBKUXVlcnkgPSBhY3Rpb25Db250ZXh0LmVsZW1lbnRDb250ZXh0O1xyXG4gICAgICAgICAgICBjb250ZXh0LnZhbChjb250ZXh0LnZhbCgpLnRvVXBwZXJDYXNlKCkpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzVmFsaWRGb3JVcGRhdGUoKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgcG9zdGFsQ29kZTogc3RyaW5nID0gY29udGV4dC52YWwoKTtcclxuICAgICAgICAgICAgdGhpcy5zaGlwcGluZ0FkZHJlc3NDaGVja291dFNlcnZpY2Uuc2V0Q2hlYXBlc3RTaGlwcGluZ01ldGhvZFVzaW5nKHBvc3RhbENvZGUpLmRvbmUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9NdmMvQ29tcG9zZXJDbGllbnQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuTXlBY2NvdW50LlVJL0NvbW1vbi9Tb3VyY2UvVHlwZXNjcmlwdC9DdXN0b21lclNlcnZpY2UudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ2hlY2tvdXRDb21tb24vU291cmNlL1R5cGVzY3JpcHQvQWRkcmVzc0R0by50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgZXhwb3J0IGNsYXNzIFNoaXBwaW5nQWRkcmVzc1JlZ2lzdGVyZWRTZXJ2aWNlIHtcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGN1c3RvbWVyU2VydmljZTogSUN1c3RvbWVyU2VydmljZTtcclxuXHJcbiAgICAgICAgcHVibGljIGNvbnN0cnVjdG9yKGN1c3RvbWVyU2VydmljZTogSUN1c3RvbWVyU2VydmljZSkge1xyXG4gICAgICAgICAgICB0aGlzLmN1c3RvbWVyU2VydmljZSA9IGN1c3RvbWVyU2VydmljZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0IHRoZSBjdXN0b21lciBhZGRyZXNzZXMuIFRoZSBzZWxlY3RlZCBzaGlwcGluZyBhZGRyZXNzIGlzIHRha2VuIGZyb20gdGhlIGNhcnQgYnkgZGVmYXVsdC5cclxuICAgICAgICAgKiBJZiBubyBhZGRyZXNzIGhhcyBiZWVuIHNldCBpbiB0aGUgY2FydCwgdGhlIHNlbGVjdGVkIHNoaXBwaW5nIGFkZHJlc3MgY29ycmVzcG9uZHMgdG8gdGhlIHByZWZlcnJlZCBhZGRyZXNzLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBnZXRTaGlwcGluZ0FkZHJlc3NlcyhjYXJ0OiBhbnkpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWNhcnQpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIGNhcnQgaXMgcmVxdWlyZWQnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VzdG9tZXJTZXJ2aWNlLmdldEFkZHJlc3NlcygpXHJcbiAgICAgICAgICAgICAgICAudGhlbihhZGRyZXNzZXMgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZHJlc3Nlcy5BZGRyZXNzZXNMb2FkZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZHJlc3Nlcy5TZWxlY3RlZFNoaXBwaW5nQWRkcmVzc0lkID0gdGhpcy5nZXRTZWxlY3RlZFNoaXBwaW5nQWRkcmVzc0lkKGNhcnQsIGFkZHJlc3Nlcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBhZGRyZXNzZXM7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBnZXRTZWxlY3RlZFNoaXBwaW5nQWRkcmVzc0lkKGNhcnQ6IGFueSwgYWRkcmVzc0xpc3Q6IGFueSkgOiBzdHJpbmcge1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNTaGlwcGluZ0FkZHJlc3NGcm9tQ2FydFZhbGlkKGNhcnQsIGFkZHJlc3NMaXN0KSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNhcnQuU2hpcHBpbmdBZGRyZXNzLkFkZHJlc3NCb29rSWQ7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFByZWZlcnJlZFNoaXBwaW5nQWRkcmVzc0lkKGFkZHJlc3NMaXN0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgaXNTaGlwcGluZ0FkZHJlc3NGcm9tQ2FydFZhbGlkKGNhcnQ6IGFueSwgYWRkcmVzc0xpc3Q6IGFueSkgOiBib29sZWFuIHtcclxuXHJcbiAgICAgICAgICAgIGlmIChjYXJ0LlNoaXBwaW5nQWRkcmVzcyA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBfLmFueShhZGRyZXNzTGlzdC5BZGRyZXNzZXMsIChhZGRyZXNzOiBBZGRyZXNzRHRvKSA9PiBhZGRyZXNzLklkID09PSBjYXJ0LlNoaXBwaW5nQWRkcmVzcy5BZGRyZXNzQm9va0lkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgZ2V0UHJlZmVycmVkU2hpcHBpbmdBZGRyZXNzSWQoYWRkcmVzc0xpc3Q6IGFueSkgOiBzdHJpbmcge1xyXG5cclxuICAgICAgICAgICAgdmFyIHByZWZlcnJlZFNoaXBwaW5nQWRkcmVzcyA9IF8uZmluZChhZGRyZXNzTGlzdC5BZGRyZXNzZXMsIChhZGRyZXNzOiBBZGRyZXNzRHRvKSA9PiBhZGRyZXNzLklzUHJlZmVycmVkU2hpcHBpbmcpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHByZWZlcnJlZFNoaXBwaW5nQWRkcmVzcyA9PT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkIDogcHJlZmVycmVkU2hpcHBpbmdBZGRyZXNzLklkO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L1JlcG9zaXRvcmllcy9DdXN0b21lclJlcG9zaXRvcnkudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuTXlBY2NvdW50LlVJL0NvbW1vbi9Tb3VyY2UvVHlwZXNjcmlwdC9DdXN0b21lclNlcnZpY2UudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuTXlBY2NvdW50LlVJL0NvbW1vbi9Tb3VyY2UvVHlwZXNjcmlwdC9NeUFjY291bnRFdmVudHMudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuTXlBY2NvdW50LlVJL0NvbW1vbi9Tb3VyY2UvVHlwZXNjcmlwdC9NeUFjY291bnRTdGF0dXMudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ2hlY2tvdXRDb21tb24vc291cmNlL1R5cGVzY3JpcHQvQmFzZUNoZWNrb3V0Q29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPSdTaGlwcGluZ0FkZHJlc3NSZWdpc3RlcmVkU2VydmljZS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9VSS9VSU1vZGFsLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIFNoaXBwaW5nQWRkcmVzc1JlZ2lzdGVyZWRDb250cm9sbGVyIGV4dGVuZHMgT3Jja2VzdHJhLkNvbXBvc2VyLkJhc2VDaGVja291dENvbnRyb2xsZXIge1xyXG5cclxuICAgICAgICBwcml2YXRlIHVpTW9kYWw6IFVJTW9kYWw7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBkZWJvdW5jZUNoYW5nZVNoaXBwaW5nTWV0aG9kOiBGdW5jdGlvbiA9IF8uZGVib3VuY2UodGhpcy5jaGFuZ2VTaGlwcGluZ0FkZHJlc3NJbXBsLCA1MDAsIHsgJ2xlYWRpbmcnOiB0cnVlIH0pO1xyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgZGVsZXRlTW9kYWxFbGVtZW50U2VsZWN0b3I6IHN0cmluZztcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGN1c3RvbWVyU2VydmljZTogSUN1c3RvbWVyU2VydmljZSA9IG5ldyBDdXN0b21lclNlcnZpY2UobmV3IEN1c3RvbWVyUmVwb3NpdG9yeSgpKTtcclxuICAgICAgICBwcm90ZWN0ZWQgc2hpcHBpbmdBZGRyZXNzUmVnaXN0ZXJlZFNlcnZpY2U6IFNoaXBwaW5nQWRkcmVzc1JlZ2lzdGVyZWRTZXJ2aWNlID1cclxuICAgICAgICAgICAgbmV3IFNoaXBwaW5nQWRkcmVzc1JlZ2lzdGVyZWRTZXJ2aWNlKHRoaXMuY3VzdG9tZXJTZXJ2aWNlKTtcclxuXHJcbiAgICAgICAgcHVibGljIGluaXRpYWxpemUoKSB7XHJcbiAgICAgICAgICAgIHN1cGVyLmluaXRpYWxpemUoKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMudmlld01vZGVsTmFtZSA9ICdTaGlwcGluZ0FkZHJlc3NSZWdpc3RlcmVkJztcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZGVsZXRlTW9kYWxFbGVtZW50U2VsZWN0b3IgPSAnI2NvbmZpcm1hdGlvbk1vZGFsJztcclxuXHJcbiAgICAgICAgICAgIHRoaXMudWlNb2RhbCA9IG5ldyBVSU1vZGFsKHdpbmRvdywgdGhpcy5kZWxldGVNb2RhbEVsZW1lbnRTZWxlY3RvciwgdGhpcy5kZWxldGVBZGRyZXNzLCB0aGlzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCByZWdpc3RlclN1YnNjcmlwdGlvbnMoKSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnN1YnNjcmliZShgJHt0aGlzLnZpZXdNb2RlbE5hbWV9UmVuZGVyZWRgLCBlID0+IHRoaXMub25SZW5kZXJlZChlKSk7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIuc3Vic2NyaWJlKE15QWNjb3VudEV2ZW50c1tNeUFjY291bnRFdmVudHMuQWRkcmVzc0RlbGV0ZWRdLCBlID0+IHRoaXMub25BZGRyZXNzRGVsZXRlZChlKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgcmVuZGVyRGF0YShjaGVja291dENvbnRleHQ6IElDaGVja291dENvbnRleHQpOiBRLlByb21pc2U8dm9pZD4ge1xyXG5cclxuICAgICAgICAgICAgaWYgKGNoZWNrb3V0Q29udGV4dC5hdXRoZW50aWNhdGlvblZpZXdNb2RlbC5Jc0F1dGhlbnRpY2F0ZWQpIHtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlZ2lzdGVyU3Vic2NyaXB0aW9ucygpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIodGhpcy52aWV3TW9kZWxOYW1lLCB7SXNBdXRoZW50aWNhdGVkOiB0cnVlLCBHZXR0aW5nQ2FydDogdHJ1ZX0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNoaXBwaW5nQWRkcmVzc1JlZ2lzdGVyZWRTZXJ2aWNlLmdldFNoaXBwaW5nQWRkcmVzc2VzKGNoZWNrb3V0Q29udGV4dC5jYXJ0Vmlld01vZGVsKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKChzaGlwcGluZ0FkcmVzc2VzVm0pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIodGhpcy52aWV3TW9kZWxOYW1lLCBjaGVja291dENvbnRleHQuY2FydFZpZXdNb2RlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKCdSZWdpc3RlcmVkQWRkcmVzc2VzJywgc2hpcHBpbmdBZHJlc3Nlc1ZtKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC5mYWlsKHJlYXNvbiA9PiB0aGlzLmhhbmRsZUVycm9yKHJlYXNvbikpXHJcbiAgICAgICAgICAgICAgICAgICAgLmZpbigoKSA9PiB0aGlzLmV2ZW50SHViLnB1Ymxpc2goYCR7dGhpcy52aWV3TW9kZWxOYW1lfVJlbmRlcmVkYCwgY2hlY2tvdXRDb250ZXh0LmNhcnRWaWV3TW9kZWwpKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudW5yZWdpc3RlckNvbnRyb2xsZXIoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKHRoaXMudmlld01vZGVsTmFtZSwgY2hlY2tvdXRDb250ZXh0LmF1dGhlbnRpY2F0aW9uVmlld01vZGVsKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBvblJlbmRlcmVkKGU6IElFdmVudEluZm9ybWF0aW9uKSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmZvcm1JbnN0YW5jZXMgPSB0aGlzLnJlZ2lzdGVyRm9ybXNGb3JWYWxpZGF0aW9uKCQoJyNSZWdpc3RlcmVkU2hpcHBpbmdBZGRyZXNzJywgdGhpcy5jb250ZXh0LmNvbnRhaW5lcikpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHNlbGVjdGVkU2hpcHBpbmdBZGRyZXNzSWQ6IHN0cmluZyA9ICQodGhpcy5jb250ZXh0LmNvbnRhaW5lcikuZmluZCgnaW5wdXRbbmFtZT1TaGlwcGluZ0FkZHJlc3NJZF06Y2hlY2tlZCcpLnZhbCgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFzZWxlY3RlZFNoaXBwaW5nQWRkcmVzc0lkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tvdXRTZXJ2aWNlLmdldENhcnQoKVxyXG4gICAgICAgICAgICAgICAgLmRvbmUoY2FydCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkU2hpcHBpbmdBZGRyZXNzSWQgIT09IGNhcnQuU2hpcHBpbmdBZGRyZXNzLkFkZHJlc3NCb29rSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWJvdW5jZUNoYW5nZVNoaXBwaW5nTWV0aG9kKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIG9uQWRkcmVzc0RlbGV0ZWQoZTogSUV2ZW50SW5mb3JtYXRpb24pIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBhZGRyZXNzSWQgPSBlLmRhdGE7XHJcbiAgICAgICAgICAgIHZhciAkYWRkcmVzc0xpc3RJdGVtID0gJCh0aGlzLmNvbnRleHQuY29udGFpbmVyKS5maW5kKCdbZGF0YS1hZGRyZXNzLWlkPScgKyBhZGRyZXNzSWQgKyAnXScpO1xyXG5cclxuICAgICAgICAgICAgJGFkZHJlc3NMaXN0SXRlbS5yZW1vdmUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBjaGFuZ2VTaGlwcGluZ0FkZHJlc3MoYWN0aW9uQ29udGV4dDogSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0KSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmRlYm91bmNlQ2hhbmdlU2hpcHBpbmdNZXRob2QoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgY2hhbmdlU2hpcHBpbmdBZGRyZXNzSW1wbCgpIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaCgnY2FydFVwZGF0aW5nJywgbnVsbCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNoZWNrb3V0U2VydmljZS51cGRhdGVDYXJ0KClcclxuICAgICAgICAgICAgICAgIC5kb25lKHJlc3VsdCA9PiB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuSGFzRXJyb3JzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIHVwZGF0ZWQgY2FydCBjb250YWlucyBlcnJvcnMnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaCgnY2FydFVwZGF0ZWQnLCB7IGRhdGE6IHJlc3VsdC5DYXJ0IH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIH0sIHJlYXNvbiA9PiB0aGlzLmhhbmRsZUVycm9yKHJlYXNvbikpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGRlbGV0ZUFkZHJlc3NDb25maXJtKGFjdGlvbkNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCkge1xyXG4gICAgICAgICAgICB0aGlzLnVpTW9kYWwub3Blbk1vZGFsKGFjdGlvbkNvbnRleHQuZXZlbnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBkZWxldGVBZGRyZXNzKGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCk6IFEuUHJvbWlzZTx2b2lkPiB7XHJcblxyXG4gICAgICAgICAgICBsZXQgZWxlbWVudCA9ICQoZXZlbnQudGFyZ2V0KTtcclxuICAgICAgICAgICAgdmFyICRhZGRyZXNzTGlzdEl0ZW0gPSBlbGVtZW50LmNsb3Nlc3QoJ1tkYXRhLWFkZHJlc3MtaWRdJyk7XHJcbiAgICAgICAgICAgIHZhciBhZGRyZXNzSWQgPSAkYWRkcmVzc0xpc3RJdGVtLmRhdGEoJ2FkZHJlc3MtaWQnKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBidXN5ID0gdGhpcy5hc3luY0J1c3koe2VsZW1lbnRDb250ZXh0OiBlbGVtZW50LCBjb250YWluZXJDb250ZXh0OiAkYWRkcmVzc0xpc3RJdGVtIH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VzdG9tZXJTZXJ2aWNlLmRlbGV0ZUFkZHJlc3MoYWRkcmVzc0lkLCAnJylcclxuICAgICAgICAgICAgICAgICAgICAgICAudGhlbihyZXN1bHQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goTXlBY2NvdW50RXZlbnRzW015QWNjb3VudEV2ZW50cy5BZGRyZXNzRGVsZXRlZF0sIHsgZGF0YTogYWRkcmVzc0lkIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmZhaWwoKCkgPT4gdGhpcy5yZW5kZXJGYWlsZWRGb3JtKE15QWNjb3VudFN0YXR1c1tNeUFjY291bnRTdGF0dXMuQWpheEZhaWxlZF0pKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5maW4oKCkgPT4gYnVzeS5kb25lKCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSByZW5kZXJGYWlsZWRGb3JtKHN0YXR1czogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIC8vVE9ET1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBoYW5kbGVFcnJvcihyZWFzb24gOiBhbnkpIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaCgnY2FydFVwZGF0aW5nRmFpbGVkJywgbnVsbCk7XHJcblxyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdUaGUgdXNlciBjaGFuZ2VkIHRoZSBzaGlwcGluZyBhZGRyZXNzLCBidXQgd2Ugd2VyZSB1bmFibGUgdG8gZXN0aW1hdGUgc2hpcHBpbmcgZHluYW1pY2FsbHknLCByZWFzb24pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NoZWNrb3V0Q29tbW9uL3NvdXJjZS9UeXBlc2NyaXB0L0Jhc2VDaGVja291dENvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nU2hpcHBpbmdNZXRob2RTZXJ2aWNlLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgY2xhc3MgU2hpcHBpbmdNZXRob2RDaGVja291dENvbnRyb2xsZXIgZXh0ZW5kcyBPcmNrZXN0cmEuQ29tcG9zZXIuQmFzZUNoZWNrb3V0Q29udHJvbGxlciB7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBkZWJvdW5jZU1ldGhvZFNlbGVjdGVkOiBGdW5jdGlvbiA9IF8uZGVib3VuY2UodGhpcy5tZXRob2RTZWxlY3RlZEltcGwsIDUwMCwgeyAnbGVhZGluZyc6IHRydWUgfSk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKCkge1xyXG5cclxuICAgICAgICAgICAgdGhpcy52aWV3TW9kZWxOYW1lID0gJ1NoaXBwaW5nTWV0aG9kJztcclxuXHJcbiAgICAgICAgICAgIHN1cGVyLmluaXRpYWxpemUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyByZW5kZXJEYXRhKGNoZWNrb3V0Q29udGV4dDogSUNoZWNrb3V0Q29udGV4dCk6IFEuUHJvbWlzZTx2b2lkPiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gUS5mY2FsbCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2VsZWN0ZWRTaGlwcGluZ01ldGhvZE5hbWU6IHN0cmluZyA9ICcnO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFfLmlzVW5kZWZpbmVkKGNoZWNrb3V0Q29udGV4dC5jYXJ0Vmlld01vZGVsLlNoaXBwaW5nTWV0aG9kKSkge1xyXG5cclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkU2hpcHBpbmdNZXRob2ROYW1lID0gY2hlY2tvdXRDb250ZXh0LmNhcnRWaWV3TW9kZWwuU2hpcHBpbmdNZXRob2QuTmFtZTtcclxuICAgICAgICAgICAgICAgIGNoZWNrb3V0Q29udGV4dC5zaGlwcGluZ01ldGhvZHNWaWV3TW9kZWwuU2hpcHBpbmdNZXRob2RzLmZvckVhY2goc2hpcHBpbmdNZXRob2QgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2hpcHBpbmdNZXRob2QuTmFtZSA9PT0gc2VsZWN0ZWRTaGlwcGluZ01ldGhvZE5hbWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tvdXRDb250ZXh0LnNoaXBwaW5nTWV0aG9kc1ZpZXdNb2RlbC5TZWxlY3RlZFNoaXBwaW5nUHJvdmlkZXJJZCA9IHNoaXBwaW5nTWV0aG9kLlNoaXBwaW5nUHJvdmlkZXJJZDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5yZW5kZXIodGhpcy52aWV3TW9kZWxOYW1lLCB7XHJcbiAgICAgICAgICAgICAgICBNZXRob2RzIDogY2hlY2tvdXRDb250ZXh0LnNoaXBwaW5nTWV0aG9kc1ZpZXdNb2RlbCxcclxuICAgICAgICAgICAgICAgIFNlbGVjdGVkTWV0aG9kIDogc2VsZWN0ZWRTaGlwcGluZ01ldGhvZE5hbWUsXHJcbiAgICAgICAgICAgICAgICBIYXNNZXRob2RzIDogIV8uaXNFbXB0eShjaGVja291dENvbnRleHQuc2hpcHBpbmdNZXRob2RzVmlld01vZGVsLlNoaXBwaW5nTWV0aG9kcylcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goYCR7dGhpcy52aWV3TW9kZWxOYW1lfVJlbmRlcmVkYCwgbnVsbCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG1ldGhvZFNlbGVjdGVkKGFjdGlvbkNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCkge1xyXG5cclxuICAgICAgICAgICAgRXJyb3JIYW5kbGVyLmluc3RhbmNlKCkucmVtb3ZlRXJyb3JzKCk7XHJcbiAgICAgICAgICAgIHRoaXMuZGVib3VuY2VNZXRob2RTZWxlY3RlZChhY3Rpb25Db250ZXh0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgbWV0aG9kU2VsZWN0ZWRJbXBsKGFjdGlvbkNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCkge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKCdjYXJ0VXBkYXRpbmcnLCBudWxsKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlU2hpcHBpbmdQcm92aWRlcklkKGFjdGlvbkNvbnRleHQpXHJcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB0aGlzLmNoZWNrb3V0U2VydmljZS51cGRhdGVDYXJ0KCkpXHJcbiAgICAgICAgICAgICAgICAudGhlbihyZXN1bHQgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0Lkhhc0Vycm9ycykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSB1cGRhdGVkIGNhcnQgY29udGFpbnMgZXJyb3JzJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goJ2NhcnRVcGRhdGVkJywgeyBkYXRhOiByZXN1bHQuQ2FydCB9KTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuZmFpbCgocmVhc29uKSA9PiB0aGlzLmhhbmRsZUVycm9yKHJlYXNvbikpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSB1cGRhdGVTaGlwcGluZ1Byb3ZpZGVySWQoYWN0aW9uQ29udGV4dDogSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0KTogUS5Qcm9taXNlPHZvaWQ+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBRLmZjYWxsKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHZhciBzaGlwcGluZ1Byb3ZpZGVySWQgPSBhY3Rpb25Db250ZXh0LmVsZW1lbnRDb250ZXh0LmRhdGEoJ3NoaXBwaW5nLXByb3ZpZGVyLWlkJyk7XHJcbiAgICAgICAgICAgICAgICAkKCcjU2hpcHBpbmdQcm92aWRlcklkJykudmFsKHNoaXBwaW5nUHJvdmlkZXJJZC50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgaGFuZGxlRXJyb3IocmVhc29uIDogYW55KSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goJ2NhcnRVcGRhdGluZ0ZhaWxlZCcsIG51bGwpO1xyXG5cclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignVGhlIHVzZXIgY2hhbmdlZCB0aGUgc2hpcHBpbmcgbWV0aG9kLCBidXQgd2Ugd2VyZSB1bmFibGUgdG8gdXBkYXRlIHRoZSBjYXJ0IGR5bmFtaWNhbGx5JywgcmVhc29uKTtcclxuXHJcbiAgICAgICAgICAgIEVycm9ySGFuZGxlci5pbnN0YW5jZSgpLm91dHB1dEVycm9yRnJvbUNvZGUoJ1NoaXBwaW5nTWV0aG9kVXBkYXRlRmFpbGVkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvRXZlbnRzL0V2ZW50SHViLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLkNhcnQuVUkvQ2FydFN1bW1hcnkvU291cmNlL1R5cGVzY3JpcHQvQ2FydFNlcnZpY2UudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgQ291cG9uU2VydmljZSB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgY2FydFNlcnZpY2U6IElDYXJ0U2VydmljZTtcclxuICAgICAgICBwcml2YXRlIGV2ZW50SHViOiBJRXZlbnRIdWI7XHJcblxyXG4gICAgICAgIGNvbnN0cnVjdG9yKGNhcnRTZXJ2aWNlOiBJQ2FydFNlcnZpY2UsIGV2ZW50SHViOiBJRXZlbnRIdWIpIHtcclxuXHJcbiAgICAgICAgICAgIGlmICghY2FydFNlcnZpY2UpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3I6IGNhcnRTZXJ2aWNlIGlzIHJlcXVpcmVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCFldmVudEh1Yikge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvcjogZXZlbnRIdWIgaXMgcmVxdWlyZWQnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5jYXJ0U2VydmljZSA9IGNhcnRTZXJ2aWNlO1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViID0gZXZlbnRIdWI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAqIEFkZHMgYSBjb3Vwb24gdXNpbmcgdGhlIENvbXBvc2VyIEFQSS5cclxuICAgICAgICAqIEBwYXJhbSBjb3Vwb25Db2RlIENvZGUgb2YgdGhlIENvdXBvbiB0byBhZGQgdGhyb3VnaCB0aGUgQVBJLlxyXG4gICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGFkZENvdXBvbihjb3Vwb25Db2RlOiBzdHJpbmcpOiBRLlByb21pc2U8dm9pZD4ge1xyXG5cclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBDb3Vwb25Db2RlOiBjb3Vwb25Db2RlXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goJ2NvdXBvblVwZGF0aW5nJywgeyBkYXRhOiBkYXRhIH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FydFNlcnZpY2UuYWRkQ291cG9uKGNvdXBvbkNvZGUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gdGhpcy5jYXJ0U2VydmljZS5nZXRDYXJ0KCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oY2FydCA9PiB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goJ2NhcnRVcGRhdGVkJywgeyBkYXRhOiBjYXJ0IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnB1Ymxpc2hDb3Vwb25VcGRhdGVkRXZlbnQoY2FydCwgdHJ1ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCByZWFzb24gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHdoaWxlIGFkZGluZyBjb3Vwb24nLCByZWFzb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucHVibGlzaENvdXBvblVwZGF0ZWRFdmVudCh1bmRlZmluZWQsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZW1vdmVzIGEgY291cG9uIHVzaW5nIHRoZSBDb21wb3NlciBBUElcclxuICAgICAgICAgKiBAcGFyYW0ge1N0cmluZ30gY291cG9uQ29kZSBDb2RlIG9mIHRoZSBjb3Vwb24gdG8gcmVtb3ZlLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyByZW1vdmVDb3Vwb24oY291cG9uQ29kZTogc3RyaW5nKTogUS5Qcm9taXNlPHZvaWQ+IHtcclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgQ291cG9uQ29kZTogY291cG9uQ29kZVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FydFNlcnZpY2UucmVtb3ZlQ291cG9uKGNvdXBvbkNvZGUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gdGhpcy5jYXJ0U2VydmljZS5nZXRDYXJ0KCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oY2FydCA9PiB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goJ2NhcnRVcGRhdGVkJywgeyBkYXRhOiBjYXJ0IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnB1Ymxpc2hDb3Vwb25VcGRhdGVkRXZlbnQoY2FydCwgdHJ1ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgIH0sIHJlYXNvbiA9PiB0aGlzLnB1Ymxpc2hDb3Vwb25VcGRhdGVkRXZlbnQodW5kZWZpbmVkLCBmYWxzZSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBwdWJsaXNoQ291cG9uVXBkYXRlZEV2ZW50KHJlc3VsdDogYW55LCBpc1N1Y2Nlc3M6IGJvb2xlYW4pIHtcclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKCdjb3Vwb25VcGRhdGVkJywgeyBkYXRhOiByZXN1bHQgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0NvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0lDb250cm9sbGVyQWN0aW9uQ29udGV4dC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9SZXBvc2l0b3JpZXMvQ2FydFJlcG9zaXRvcnkudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvSlF1ZXJ5UGx1Z2lucy9JU2VyaWFsaXplT2JqZWN0SnF1ZXJ5UGx1Z2luLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vQ291cG9uU2VydmljZS50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKiBDb250cm9sbGVyIGZvciB0aGUgQ291cG9ucyBzZWN0aW9uLlxyXG4gICAgICovXHJcbiAgICBleHBvcnQgY2xhc3MgQ291cG9uQ29udHJvbGxlciBleHRlbmRzIE9yY2tlc3RyYS5Db21wb3Nlci5Db250cm9sbGVyIHtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBjb3Vwb25TZXJ2aWNlOiBDb3Vwb25TZXJ2aWNlID0gbmV3IENvdXBvblNlcnZpY2UobmV3IENhcnRTZXJ2aWNlKG5ldyBDYXJ0UmVwb3NpdG9yeSgpLCB0aGlzLmV2ZW50SHViKSwgdGhpcy5ldmVudEh1Yik7XHJcbiAgICAgICAgcHJpdmF0ZSBpc0ZpcnN0TG9hZDogYm9vbGVhbiA9IHRydWU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKCkge1xyXG5cclxuICAgICAgICAgICAgc3VwZXIuaW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyU3Vic2NyaXB0aW9ucygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmVnaXN0ZXJzIGV2ZW50cyBvbiB0aGUgZXZlbnRIdWIuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSByZWdpc3RlclN1YnNjcmlwdGlvbnMoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIuc3Vic2NyaWJlKCdjYXJ0VXBkYXRlZCcsIChldmVudEluZm86IElFdmVudEluZm9ybWF0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY2FydCA9IGV2ZW50SW5mby5kYXRhO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKHRoaXMuaXNGaXJzdExvYWQgfHwgXy5pc0VtcHR5KGNhcnQpIHx8IGNhcnQuSXNDYXJ0RW1wdHkgPyAnQ291cG9uc1N1bW1hcnknIDogJ0NvdXBvbnMnLCBjYXJ0KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuaXNGaXJzdExvYWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnN1YnNjcmliZSgnY291cG9uVXBkYXRlZCcsIChlOiBJRXZlbnRJbmZvcm1hdGlvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkNvdXBvblVwZGF0ZWQoZS5kYXRhKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBFdmVudCB0cmlnZ2VyZWQgd2hlbiBhZGRpbmcgYSBjb3Vwb24uXHJcbiAgICAgICAgICogQHBhcmFtIHtJQ29udHJvbGxlckFjdGlvbkNvbnRleHR9IGFjdGlvbkNvbnRleHQgLSBFdmVudCBjb250ZXh0LlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBhcHBseUNvdXBvbihhY3Rpb25Db250ZXh0OiBJQ29udHJvbGxlckFjdGlvbkNvbnRleHQpIHtcclxuICAgICAgICAgICAgYWN0aW9uQ29udGV4dC5ldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGZvcm1EYXRhID0gKDxJU2VyaWFsaXplT2JqZWN0SnF1ZXJ5UGx1Z2luPmFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHQpLnNlcmlhbGl6ZU9iamVjdCgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKF8uaXNFbXB0eShmb3JtRGF0YS5jb3Vwb25Db2RlKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1RoZSBjb3Vwb24gY29kZSBtYXkgbm90IGJlIG51bGwnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGJ1c3kgPSB0aGlzLmFzeW5jQnVzeSh7ZWxlbWVudENvbnRleHQ6IGFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHQsIG1zRGVsYXk6IDMwMH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jb3Vwb25TZXJ2aWNlLmFkZENvdXBvbihmb3JtRGF0YS5jb3Vwb25Db2RlKVxyXG4gICAgICAgICAgICAgICAgLmRvbmUoKCkgPT4gYnVzeS5kb25lKCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRXZlbnQgdHJpZ2dlcmVkIHdoZW4gcmVtb3ZpbmcgYSBjb3Vwb24uXHJcbiAgICAgICAgICogQHBhcmFtIHtJQ29udHJvbGxlckFjdGlvbkNvbnRleHR9IGFjdGlvbkNvbnRleHQgLSBFdmVudCBjb250ZXh0LlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyByZW1vdmVDb3Vwb24oYWN0aW9uQ29udGV4dDogSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0KSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgY291cG9uQ29kZSA9IGFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHQuZGF0YSgnY291cG9uY29kZScpO1xyXG5cclxuICAgICAgICAgICAgaWYgKF8uaXNFbXB0eShjb3Vwb25Db2RlKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1RoZSBjb3Vwb24gY29kZSBtYXkgbm90IGJlIG51bGwnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGJ1c3kgPSB0aGlzLmFzeW5jQnVzeSh7ZWxlbWVudENvbnRleHQ6IGFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHR9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY291cG9uU2VydmljZS5yZW1vdmVDb3Vwb24oY291cG9uQ29kZS50b1N0cmluZygpKVxyXG4gICAgICAgICAgICAgICAgLmRvbmUoKCkgPT4gYnVzeS5kb25lKCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRXZlbnQgaGFuZGxlciBmb3IgY291cG9uIHVwZGF0ZWQuIEZpcmVzIGV2ZW4gaWYgcmVxdWVzdCBmYWlscy5cclxuICAgICAgICAgKiBAcGFyYW0ge2FueX0gdmlld01vZGVsIC0gVmlld01vZGVsIHJlY2VpdmVkIGJ5IHRoZSByZXF1ZXN0LiBNYXkgYmUgdW5kZWZpbmVkIGlmIHRoZSByZXF1ZXN0IGZhaWxlZC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIG9uQ291cG9uVXBkYXRlZCh2aWV3TW9kZWw6IGFueSkge1xyXG4gICAgICAgICAgICB2YXIgZm9ybUVsZW1lbnQgPSB0aGlzLmdldENvdXBvbkZvcm0oKTtcclxuICAgICAgICAgICAgdmFyIGhhc0Vycm9yTWVzc2FnZSA9ICghdmlld01vZGVsKSB8fCBfLnNvbWUodmlld01vZGVsLkNvdXBvbnMuTWVzc2FnZXMsIG0gPT4geyByZXR1cm4gKDxhbnk+bSkuTGV2ZWwgPT09ICdkYW5nZXInOyB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmICghaGFzRXJyb3JNZXNzYWdlKSB7XHJcbiAgICAgICAgICAgICAgICBmb3JtRWxlbWVudC50cmlnZ2VyKCdyZXNldCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXRzIHRoZSBjb3Vwb24gZm9ybSBoYW5kbGVkIGJ5IHRoaXMgQ29udHJvbGxlci5cclxuICAgICAgICAgKiBAcmV0dXJuIHtKUXVlcnl9IEpRdWVyeSBlbGVtZW50IG1hdGNoaW5nIHRoZSBmaXJzdCBmb3JtLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgZ2V0Q291cG9uRm9ybSgpIDogSlF1ZXJ5IHtcclxuICAgICAgICAgICAgdmFyIGZvcm1zID0gJCh0aGlzLmNvbnRleHQuY29udGFpbmVyKS5maW5kKCdmb3JtOmZpcnN0Jyk7XHJcbiAgICAgICAgICAgIHJldHVybiBmb3JtcztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJR2V0T3JkZXJEZXRhaWxzVXJsUmVxdWVzdCB7XHJcbiAgICAgICAgT3JkZXJOdW1iZXI6IHN0cmluZztcclxuICAgICAgICBFbWFpbDogc3RyaW5nO1xyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSUd1ZXN0T3JkZXJEZXRhaWxzVmlld01vZGVsIHtcclxuICAgICAgICBVcmw6IHN0cmluZztcclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vSUdldE9yZGVyRGV0YWlsc1VybFJlcXVlc3QudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9JR3Vlc3RPcmRlckRldGFpbHNWaWV3TW9kZWwudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSUZpbmRPcmRlclNlcnZpY2Uge1xyXG4gICAgICAgIGdldE9yZGVyRGV0YWlsc1VybChyZXE6IElHZXRPcmRlckRldGFpbHNVcmxSZXF1ZXN0KTogUS5Qcm9taXNlPElHdWVzdE9yZGVyRGV0YWlsc1ZpZXdNb2RlbD47XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9FdmVudHMvSUV2ZW50SHViLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9Db21wb3NlckNsaWVudC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL0lGaW5kT3JkZXJTZXJ2aWNlLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vSUdldE9yZGVyRGV0YWlsc1VybFJlcXVlc3QudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9JR3Vlc3RPcmRlckRldGFpbHNWaWV3TW9kZWwudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIGV4cG9ydCBjbGFzcyBGaW5kT3JkZXJTZXJ2aWNlIGltcGxlbWVudHMgSUZpbmRPcmRlclNlcnZpY2Uge1xyXG4gICAgICAgIHByaXZhdGUgZXZlbnRIdWI6IElFdmVudEh1YjtcclxuXHJcbiAgICAgICAgcHVibGljIGNvbnN0cnVjdG9yKGV2ZW50SHViOiBJRXZlbnRIdWIpIHtcclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1YiA9IGV2ZW50SHViO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGdldE9yZGVyRGV0YWlsc1VybChyZXE6IElHZXRPcmRlckRldGFpbHNVcmxSZXF1ZXN0KTogUS5Qcm9taXNlPElHdWVzdE9yZGVyRGV0YWlsc1ZpZXdNb2RlbD4ge1xyXG4gICAgICAgICAgICB2YXIgcHJvbWlzZSA9IENvbXBvc2VyQ2xpZW50LnBvc3QoJy9hcGkvb3JkZXIvdXJsJywgcmVxKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKHZtOiBJR3Vlc3RPcmRlckRldGFpbHNWaWV3TW9kZWwpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goJ29yZGVyRGV0YWlsc1VybFVwZGF0ZWQnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHZtXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2bTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSUZpbmRNeU9yZGVyVmlld01vZGVsIHtcclxuICAgICAgICBPcmRlck51bWJlcjogc3RyaW5nO1xyXG4gICAgICAgIEVtYWlsOiBzdHJpbmc7XHJcbiAgICAgICAgT3JkZXJOb3RGb3VuZDogYm9vbGVhbjtcclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9Db250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9JQ29udHJvbGxlckFjdGlvbkNvbnRleHQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvanF1ZXJ5UGx1Z2lucy9JU2VyaWFsaXplT2JqZWN0SnF1ZXJ5UGx1Z2luLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vSUZpbmRPcmRlclNlcnZpY2UudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9GaW5kT3JkZXJTZXJ2aWNlLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vSUdldE9yZGVyRGV0YWlsc1VybFJlcXVlc3QudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9JR3Vlc3RPcmRlckRldGFpbHNWaWV3TW9kZWwudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9JRmluZE15T3JkZXJWaWV3TW9kZWwudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgRmluZE15T3JkZXJDb250cm9sbGVyIGV4dGVuZHMgT3Jja2VzdHJhLkNvbXBvc2VyLkNvbnRyb2xsZXIge1xyXG4gICAgICAgIHByaXZhdGUgZmluZE9yZGVyU2VydmljZTogSUZpbmRPcmRlclNlcnZpY2U7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKCkge1xyXG5cclxuICAgICAgICAgICBzdXBlci5pbml0aWFsaXplKCk7XHJcblxyXG4gICAgICAgICAgIHRoaXMucmVnaXN0ZXJGb3Jtc0ZvclZhbGlkYXRpb24odGhpcy5jb250ZXh0LmNvbnRhaW5lci5maW5kKCdmb3JtJykpO1xyXG5cclxuICAgICAgICAgICB0aGlzLmZpbmRPcmRlclNlcnZpY2UgPSBuZXcgRmluZE9yZGVyU2VydmljZSh0aGlzLmV2ZW50SHViKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBnZXRXaW5kb3coKTogV2luZG93IHtcclxuICAgICAgICAgICAgcmV0dXJuIHdpbmRvdztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvbkZpbmRNeU9yZGVyKGFjdGlvbkNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCk6IHZvaWQge1xyXG4gICAgICAgICAgICBhY3Rpb25Db250ZXh0LmV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgYnVzeTogVUlCdXN5SGFuZGxlID0gdGhpcy5hc3luY0J1c3koKTtcclxuXHJcbiAgICAgICAgICAgIHZhciByZXF1ZXN0ID0gPElHZXRPcmRlckRldGFpbHNVcmxSZXF1ZXN0Pig8SVNlcmlhbGl6ZU9iamVjdEpxdWVyeVBsdWdpbj5hY3Rpb25Db250ZXh0LmVsZW1lbnRDb250ZXh0KS5zZXJpYWxpemVPYmplY3QoKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZmluZE9yZGVyQXN5bmMocmVxdWVzdClcclxuICAgICAgICAgICAgICAgIC50aGVuKCh2bTogSUd1ZXN0T3JkZXJEZXRhaWxzVmlld01vZGVsKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRXaW5kb3coKS5sb2NhdGlvbi5ocmVmID0gdm0uVXJsO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5mYWlsKHJlYXNvbiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnVzeS5kb25lKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZWFzb24uc3RhdHVzICYmIHJlYXNvbi5zdGF0dXMgPT09IDQwNCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZU9yZGVyTm90Rm91bmQocmVhc29uLCByZXF1ZXN0KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKHJlYXNvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGZpbmRPcmRlckFzeW5jKHJlcXVlc3Q6IElHZXRPcmRlckRldGFpbHNVcmxSZXF1ZXN0KTogUS5Qcm9taXNlPElHdWVzdE9yZGVyRGV0YWlsc1ZpZXdNb2RlbD4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5maW5kT3JkZXJTZXJ2aWNlLmdldE9yZGVyRGV0YWlsc1VybChyZXF1ZXN0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgaGFuZGxlT3JkZXJOb3RGb3VuZChyZWFzb246IGFueSwgcmVxdWVzdDogSUdldE9yZGVyRGV0YWlsc1VybFJlcXVlc3QpOiB2b2lkIHtcclxuICAgICAgICAgICAgdmFyIHZtOiBJRmluZE15T3JkZXJWaWV3TW9kZWwgPSB7XHJcbiAgICAgICAgICAgICAgICBFbWFpbDogcmVxdWVzdC5FbWFpbCxcclxuICAgICAgICAgICAgICAgIE9yZGVyTnVtYmVyOiByZXF1ZXN0Lk9yZGVyTnVtYmVyLFxyXG4gICAgICAgICAgICAgICAgT3JkZXJOb3RGb3VuZDogdHJ1ZVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdGhpcy5yZW5kZXIoJ0ZpbmRNeU9yZGVyJywgdm0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElTY2hlZHVsZWRDYWxsYmFjayB7XHJcblxyXG4gICAgICAgIChkYXRhOiBhbnkpOiBRLlByb21pc2U8YW55PjtcclxuICAgIH1cclxufSIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL0lTY2hlZHVsZWRDYWxsYmFjay50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL0V2ZW50SHViLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAvKipcclxuICAgICAqIENsYXNzIGluIGNoYXJnZSBvZiBzY2hlZHVsaW5nIG11bHRpcGxlIGNhbGxzIHRvIGFuIGV2ZW50LlxyXG4gICAgICogVGhpcyBjbGFzcyBpcyBhIG11bHRpdG9uLiBQbGVhc2UgdXNlIHRoZSBpbnN0YW5jZSgpIG1ldGhvZCB0byBnZXQgYW4gaW5zdGFuY2UuXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBjbGFzcyBFdmVudFNjaGVkdWxlciB7XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2VzOiBJSGFzaFRhYmxlPEV2ZW50U2NoZWR1bGVyPiA9IHt9O1xyXG5cclxuICAgICAgICBwcml2YXRlIGV2ZW50TmFtZTogc3RyaW5nO1xyXG4gICAgICAgIHByaXZhdGUgb25FdmVudENhbGxiYWNrczogSVNjaGVkdWxlZENhbGxiYWNrW107XHJcbiAgICAgICAgcHJpdmF0ZSBwb3N0RXZlbnRDYWxsYmFjazogSVNjaGVkdWxlZENhbGxiYWNrO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXQgYW4gaW5zdGFuY2Ugb2YgdGhlIEV2ZW50U2NoZWR1bGVyIGZvciBhIHNwZWNpZmljIGV2ZW50LlxyXG4gICAgICAgICAqIEBwYXJhbSBldmVudE5hbWUgVGhlIG5hbWUgb2YgdGhlIGV2ZW50IHRvIGxpc3RlbiB0by5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGluc3RhbmNlKGV2ZW50TmFtZTogc3RyaW5nKTogRXZlbnRTY2hlZHVsZXIge1xyXG4gICAgICAgICAgICB2YXIgaW5zdGFuY2U6IEV2ZW50U2NoZWR1bGVyID0gRXZlbnRTY2hlZHVsZXIuaW5zdGFuY2VzW2V2ZW50TmFtZV07XHJcblxyXG4gICAgICAgICAgICBpZiAoIWluc3RhbmNlKSB7XHJcbiAgICAgICAgICAgICAgICBpbnN0YW5jZSA9IG5ldyBFdmVudFNjaGVkdWxlcihldmVudE5hbWUpO1xyXG4gICAgICAgICAgICAgICAgRXZlbnRTY2hlZHVsZXIuaW5zdGFuY2VzW2V2ZW50TmFtZV0gPSBpbnN0YW5jZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGluc3RhbmNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ29uc3RydWN0b3IuIFNob3VsZCBiZSB1c2VkIGZvciB0ZXN0aW5nIHB1cnBvc2VzIGFuZCBpbnNpZGUgdGhlIG11bHRpdG9uIG9ubHkuXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50TmFtZSBUaGUgbmFtZSBvZiB0aGUgZXZlbnQgdG8gc3Vic2NyaWJlIHRvLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNvbnN0cnVjdG9yKGV2ZW50TmFtZTogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIHZhciBpbnN0YW5jZTogRXZlbnRTY2hlZHVsZXIgPSBFdmVudFNjaGVkdWxlci5pbnN0YW5jZXNbZXZlbnROYW1lXTtcclxuXHJcbiAgICAgICAgICAgIGlmIChpbnN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvcjogSW5zdGFudGlhdGlvbiBmYWlsZWQ6IFVzZSBFdmVudFNjaGVkdWxlci5pbnN0YW5jZShldmVudE5hbWU6IHN0cmluZykgaW5zdGVhZCBvZiBuZXcuJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnROYW1lID0gZXZlbnROYW1lO1xyXG4gICAgICAgICAgICB0aGlzLm9uRXZlbnRDYWxsYmFja3MgPSBbXTtcclxuXHJcbiAgICAgICAgICAgIEV2ZW50SHViLmluc3RhbmNlKCkuc3Vic2NyaWJlKHRoaXMuZXZlbnROYW1lLCAoZTogSUV2ZW50SW5mb3JtYXRpb24pID0+IHRoaXMudHJpZ2dlcihlLmRhdGEpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFN1YnNjcmliZXMgYSBjYWxsYmFjayB0byB0aGUgRXZlbnRTY2hlZHVsZXIuXHJcbiAgICAgICAgICogQHBhcmFtIGNhbGxiYWNrIEZ1bmN0aW9uIHRvIGNhbGwgd2hlbiB0aGUgZXZlbnQgYXJpc2VzLiBNdXN0IHJldHVybiBhIHByb21pc2UuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN1YnNjcmliZShjYWxsYmFjazogSVNjaGVkdWxlZENhbGxiYWNrKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMub25FdmVudENhbGxiYWNrcy5wdXNoKGNhbGxiYWNrKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFNldHMgdGhlIGNhbGxiYWNrIG1ldGhvZCB0aGF0IHdpbGwgYmUgaW52b2tlZCBhZnRlciBhbGwgdGhlIG90aGVycyBhcmUgZG9uZSBleGVjdXRpbmcuXHJcbiAgICAgICAgICogQHBhcmFtIHBvc3RFdmVudENhbGxiYWNrIEZ1bmN0aW9uIHRvIGNhbGwgd2hlbiBhbGwgb3RoZXIgY2FsbGJhY2tzIGhhdmUgYmVlbiBleGVjdXRlZC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc2V0UG9zdEV2ZW50Q2FsbGJhY2socG9zdEV2ZW50Q2FsbGJhY2s6IElTY2hlZHVsZWRDYWxsYmFjayk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLnBvc3RFdmVudENhbGxiYWNrID0gcG9zdEV2ZW50Q2FsbGJhY2s7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHRyaWdnZXIoZGF0YTogYW55KTogdm9pZCB7XHJcbiAgICAgICAgICAgIHZhciBwcm9taXNlOiBRLlByb21pc2U8YW55PiA9IHRoaXMudHJpZ2dlckNhbGxiYWNrcyhkYXRhKTtcclxuXHJcbiAgICAgICAgICAgIHByb21pc2VcclxuICAgICAgICAgICAgICAgIC50aGVuKChkYXRhOiBhbnkpID0+IHRoaXMudHJpZ2dlclBvc3RFdmVudChkYXRhKSlcclxuICAgICAgICAgICAgICAgIC5kb25lKCgpID0+IGNvbnNvbGUubG9nKGBFdmVudCAnJHt0aGlzLmV2ZW50TmFtZX0nIGZ1bGZpbGxlZCBieSB0aGUgRXZlbnQgU2NoZWR1bGUgc3VjY2Vzc2Z1bGx5LmApLFxyXG4gICAgICAgICAgICAgICAgICAgIChyZWFzb246IGFueSkgPT4gdGhpcy5vbkVycm9yKHJlYXNvbikpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSB0cmlnZ2VyQ2FsbGJhY2tzKGRhdGE6IGFueSk6IFEuUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICAgICAgdmFyIHByb21pc2U6IFEuUHJvbWlzZTxhbnk+O1xyXG5cclxuICAgICAgICAgICAgaWYgKF8uaXNFbXB0eSh0aGlzLm9uRXZlbnRDYWxsYmFja3MpKSB7XHJcbiAgICAgICAgICAgICAgICBwcm9taXNlID0gUShkYXRhKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgdmFyIHByb21pc2VzOiBRLlByb21pc2U8YW55PltdID0gXy5tYXAodGhpcy5vbkV2ZW50Q2FsbGJhY2tzLCAoY2FsbGJhY2s6IElTY2hlZHVsZWRDYWxsYmFjaykgPT4gY2FsbGJhY2soZGF0YSkpO1xyXG5cclxuICAgICAgICAgICAgICAgcHJvbWlzZSA9IFEuYWxsKHByb21pc2VzKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKHZhbHVlczogYW55W10pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgdHJpZ2dlclBvc3RFdmVudChkYXRhOiBhbnkpOiBRLlByb21pc2U8YW55PiB7XHJcbiAgICAgICAgICAgIHZhciBwcm9taXNlOiBRLlByb21pc2U8YW55PjtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBvc3RFdmVudENhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICBwcm9taXNlID0gdGhpcy5wb3N0RXZlbnRDYWxsYmFjayhkYXRhKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHByb21pc2UgPSBRKGRhdGEpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldHMgaW52b2tlZCB3aGVuIGFuIGVycm9yIG9jY3VycyB3aGlsZSBleGVjdXRpbmcgdGhlIHByb21pc2VzIGNoYWluLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByb3RlY3RlZCBvbkVycm9yKHJlYXNvbjogYW55KTogdm9pZCB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEFuIGVycm9yIG9jY3VyZWQgd2hpbGUgcHJvY2Vzc2luZyB0aGUgZXZlbnQgJyR7dGhpcy5ldmVudE5hbWV9JyB3aXRoIHRoZSBFdmVudFNjaGVkdWxlci5gLCByZWFzb24pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9Db250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L0V2ZW50cy9FdmVudFNjaGVkdWxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9SZXBvc2l0b3JpZXMvQ2FydFJlcG9zaXRvcnkudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvRXZlbnRzL0V2ZW50SHViLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L0V2ZW50cy9JRXZlbnRJbmZvcm1hdGlvbi50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9DYXJ0U3VtbWFyeS9Tb3VyY2UvVHlwZXNjcmlwdC9DYXJ0U2VydmljZS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5NeUFjY291bnQuVUkvQ29tbW9uL1NvdXJjZS9UeXBlc2NyaXB0L015QWNjb3VudEV2ZW50cy50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBNaW5pQ2FydENvbnRyb2xsZXIgZXh0ZW5kcyBPcmNrZXN0cmEuQ29tcG9zZXIuQ29udHJvbGxlciB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgY2FydFNlcnZpY2U6IENhcnRTZXJ2aWNlID0gbmV3IENhcnRTZXJ2aWNlKG5ldyBDYXJ0UmVwb3NpdG9yeSgpLCB0aGlzLmV2ZW50SHViKTtcclxuXHJcbiAgICAgICAgcHVibGljIGluaXRpYWxpemUoKSB7XHJcblxyXG4gICAgICAgICAgICBzdXBlci5pbml0aWFsaXplKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVNaW5pQ2FydFF1YW50aXR5KCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJTdWJzY3JpcHRpb25zKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGluaXRpYWxpemVNaW5pQ2FydFF1YW50aXR5KCk6IHZvaWQge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jYXJ0U2VydmljZS5nZXRDYXJ0KClcclxuICAgICAgICAgICAgICAgIC5kb25lKGNhcnQgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIV8uaXNFbXB0eShjYXJ0KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckNhcnQoY2FydCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgcmVnaXN0ZXJTdWJzY3JpcHRpb25zKCk6IHZvaWQge1xyXG5cclxuICAgICAgICAgICAgdmFyIGxvZ2dlZEluU2NoZWR1bGVyID0gRXZlbnRTY2hlZHVsZXIuaW5zdGFuY2UoTXlBY2NvdW50RXZlbnRzW015QWNjb3VudEV2ZW50cy5Mb2dnZWRJbl0pO1xyXG4gICAgICAgICAgICB2YXIgbG9nZ2VkT3V0U2NoZWR1bGVyID0gRXZlbnRTY2hlZHVsZXIuaW5zdGFuY2UoTXlBY2NvdW50RXZlbnRzW015QWNjb3VudEV2ZW50cy5Mb2dnZWRPdXRdKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIuc3Vic2NyaWJlKCdjYXJ0VXBkYXRlZCcsIChlOiBJRXZlbnRJbmZvcm1hdGlvbikgPT4gdGhpcy5vbkNhcnRVcGRhdGVkKGUpKTtcclxuXHJcbiAgICAgICAgICAgIGxvZ2dlZE91dFNjaGVkdWxlci5zdWJzY3JpYmUoKGU6IElFdmVudEluZm9ybWF0aW9uKSA9PiB0aGlzLm9uUmVmcmVzaFVzZXIoZSkpO1xyXG4gICAgICAgICAgICBsb2dnZWRJblNjaGVkdWxlci5zdWJzY3JpYmUoKGU6IElFdmVudEluZm9ybWF0aW9uKSA9PiB0aGlzLm9uUmVmcmVzaFVzZXIoZSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uQ2FydFVwZGF0ZWQoZTogSUV2ZW50SW5mb3JtYXRpb24pOiB2b2lkIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBjYXJ0ID0gZS5kYXRhO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlckNhcnQoY2FydCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb25SZWZyZXNoVXNlcihlOiBJRXZlbnRJbmZvcm1hdGlvbik6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNhcnRTZXJ2aWNlLmludmFsaWRhdGVDYWNoZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHJlbmRlckNhcnQoY2FydDogYW55KTogdm9pZCB7XHJcblxyXG4gICAgICAgICAgICB2YXIgdmlld01vZGVsOiBhbnkgPSAoXy5pc0VtcHR5KGNhcnQpIHx8IGNhcnQuVG90YWxRdWFudGl0eSA9PT0gMCkgPyB7fSA6IGNhcnQ7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKCdNaW5pY2FydFF1YW50aXR5Jywgdmlld01vZGVsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvbkVycm9yKHJlYXNvbjogYW55KTogdm9pZCB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEFuIGVycm9yIG9jY3VyZWQgd2hpbGUgcmVuZGVyaW5nIHRoZSBjYXJ0IHdpdGggdGhlIE1pbmlDYXJ0Q29udHJvbGxlci5gLCByZWFzb24pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9Db250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L0V2ZW50cy9FdmVudFNjaGVkdWxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9SZXBvc2l0b3JpZXMvQ2FydFJlcG9zaXRvcnkudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvRXZlbnRzL0V2ZW50SHViLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L0V2ZW50cy9JRXZlbnRJbmZvcm1hdGlvbi50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5BbmFseXRpY3MuVUkvQW5hbHl0aWNzL1NvdXJjZS9UeXBlc2NyaXB0L0dvb2dsZUFuYWx5dGljc1BsdWdpbi50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9DYXJ0U3VtbWFyeS9Tb3VyY2UvVHlwZXNjcmlwdC9DYXJ0U2VydmljZS50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBNaW5pQ2FydFN1bW1hcnlDb250cm9sbGVyIGV4dGVuZHMgT3Jja2VzdHJhLkNvbXBvc2VyLkNvbnRyb2xsZXIge1xyXG5cclxuICAgICAgICBwcml2YXRlIGNhcnRTZXJ2aWNlOiBDYXJ0U2VydmljZSA9IG5ldyBDYXJ0U2VydmljZShuZXcgQ2FydFJlcG9zaXRvcnkoKSwgdGhpcy5ldmVudEh1Yik7XHJcbiAgICAgICAgcHJpdmF0ZSBjYWNoZVByb3ZpZGVyOiBJQ2FjaGVQcm92aWRlciA9IENhY2hlUHJvdmlkZXIuaW5zdGFuY2UoKTtcclxuXHJcbiAgICAgICAgcHVibGljIGluaXRpYWxpemUoKSB7XHJcbiAgICAgICAgICAgIHN1cGVyLmluaXRpYWxpemUoKTtcclxuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplTWluaUNhcnRTdW1tYXJ5KCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJTdWJzY3JpcHRpb25zKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHJlZ2lzdGVyU3Vic2NyaXB0aW9ucygpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5zdWJzY3JpYmUoJ2NhcnRVcGRhdGVkJywgKGU6IElFdmVudEluZm9ybWF0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlck1pbmlDYXJ0KGUuZGF0YSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnN1YnNjcmliZSgnbGluZUl0ZW1BZGRlZFRvQ2FydCcsIChlOiBJRXZlbnRJbmZvcm1hdGlvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5TWluaUNhcnQoZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnN1YnNjcmliZSgnbGFuZ3VhZ2VTd2l0Y2hlZCcsIChlOiBJRXZlbnRJbmZvcm1hdGlvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbnZhbGlkYXRlQ2FydChlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGludmFsaWRhdGVDYXJ0KGU6IElFdmVudEluZm9ybWF0aW9uKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FydFNlcnZpY2UuaW52YWxpZGF0ZUNhY2hlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZU1pbmlDYXJ0U3VtbWFyeSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBkaXNwbGF5TWluaUNhcnQoZTogSUV2ZW50SW5mb3JtYXRpb24pOiB2b2lkIHtcclxuICAgICAgICAgICAgbGV0IG1pbmlDYXJ0Q29udGFpbmVyID0gJCh0aGlzLmNvbnRleHQuY29udGFpbmVyKTtcclxuICAgICAgICAgICAgbGV0IG5vdGlmaWNhdGlvblRpbWUgPSAgcGFyc2VJbnQobWluaUNhcnRDb250YWluZXIuZGF0YSgnbm90aWZpY2F0aW9uVGltZScpLCAxMCk7XHJcbiAgICAgICAgICAgIGxldCBzY3JvbGxUb0xpbmVJdGVtS2V5ID0gZS5kYXRhLlByb2R1Y3RJZCArICctJyArIChlLmRhdGEuVmFyaWFudElkIHx8ICcnKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChub3RpZmljYXRpb25UaW1lID4gMCkge1xyXG4gICAgICAgICAgICAgICAgbWluaUNhcnRDb250YWluZXIuYWRkQ2xhc3MoJ2Rpc3BsYXlNaW5pQ2FydCcpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIFNjcm9sbCB0byBhZGRlZCBpdGVtXHJcbiAgICAgICAgICAgICAgICAkKCcubWluaWNhcnQtc3VtbWFyeS1wcm9kdWN0cycsIG1pbmlDYXJ0Q29udGFpbmVyKS5zdG9wKCkuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG9wOiAkKCdbZGF0YS1saW5laXRlbS1pZD1cIicgKyBzY3JvbGxUb0xpbmVJdGVtS2V5ICsgJ1wiXScsIG1pbmlDYXJ0Q29udGFpbmVyKS5wb3NpdGlvbigpLnRvcFxyXG4gICAgICAgICAgICAgICAgfSwgMTAwMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgIG1pbmlDYXJ0Q29udGFpbmVyLnJlbW92ZUNsYXNzKCdkaXNwbGF5TWluaUNhcnQnKTtcclxuICAgICAgICAgICAgICAgIH0sIG5vdGlmaWNhdGlvblRpbWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIG9uQ2xvc2VNaW5pQ2FydChlOiBJRXZlbnRJbmZvcm1hdGlvbik6IHZvaWQge1xyXG4gICAgICAgICAgICBsZXQgbWluaUNhcnRDb250YWluZXIgPSAkKHRoaXMuY29udGV4dC5jb250YWluZXIpO1xyXG4gICAgICAgICAgICBtaW5pQ2FydENvbnRhaW5lci5hZGRDbGFzcygnaGlkZGVuJyk7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIG1pbmlDYXJ0Q29udGFpbmVyLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcclxuICAgICAgICAgICAgfSwgNTAwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvbkNoZWNrb3V0KGFjdGlvbkNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCk6IHZvaWQge1xyXG4gICAgICAgICAgICAvLyBTZXQgb3JpZ2luIG9mIGNoZWNrb3V0IHRoYXQgd2Ugd2lsbCBiZSB1c2VkIGluIEFuYWx5dGljc1BsdWdpblxyXG4gICAgICAgICAgICBBbmFseXRpY3NQbHVnaW4uc2V0Q2hlY2tvdXRPcmlnaW4oJ01pbmkgQ2FydCBDaGVja291dCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGluaXRpYWxpemVNaW5pQ2FydFN1bW1hcnkoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHZhciBidXN5ID0gdGhpcy5hc3luY0J1c3koe2NvbnRhaW5lckNvbnRleHQ6IHRoaXMuY29udGV4dC5jb250YWluZXIgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuY2FydFNlcnZpY2UuZ2V0Q2FydCgpLmRvbmUoY2FydCA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIV8uaXNFbXB0eShjYXJ0KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyTWluaUNhcnQoY2FydCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBidXN5LmRvbmUoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgcmVuZGVyTWluaUNhcnQoY2FydDogYW55KTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKCdNaW5pY2FydFN1bW1hcnknLCBjYXJ0KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwibW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJQ3JlYXRlVmF1bHRUb2tlbk9wdGlvbnMge1xyXG4gICAgICAgIENhcmRIb2xkZXJOYW1lOiBzdHJpbmc7XHJcbiAgICAgICAgVmF1bHRUb2tlbklkOiBzdHJpbmc7XHJcbiAgICAgICAgUGF5bWVudElkOiBzdHJpbmc7XHJcbiAgICAgICAgQ3JlYXRlUGF5bWVudFByb2ZpbGU6IGJvb2xlYW47XHJcbiAgICAgICAgUGF5bWVudFByb3ZpZGVyTmFtZTogc3RyaW5nO1xyXG4gICAgfVxyXG59XHJcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi8uLi9DaGVja291dFBheW1lbnQvc291cmNlL1R5cGVzY3JpcHQvVmlld01vZGVscy9JQWN0aXZlUGF5bWVudFZpZXdNb2RlbC50c1wiIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSU1vbmVyaXNBZGRWYXVsdFByb2ZpbGVWaWV3TW9kZWwge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIERldGVybWluZXMgaWYgdGhlIHJlcXVlc3Qgd2FzIHN1Y2Nlc3NmdWwuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgU3VjY2VzczogYm9vbGVhbjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ29kZSBvZiB0aGUgZXJyb3IuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgRXJyb3JDb2RlOiBzdHJpbmc7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIE1lc3NhZ2UgZ2l2ZW4gd2l0aCB0aGUgZXJyb3IuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgRXJyb3JNZXNzYWdlOiBzdHJpbmc7XHJcblxyXG4gICAgICAgIC8qKiBcclxuICAgICAgICAgKiBBY3RpdmUgUGF5bWVudCBWaWV3TW9kZWwuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgQWN0aXZlUGF5bWVudFZpZXdNb2RlbDogSUFjdGl2ZVBheW1lbnRWaWV3TW9kZWw7XHJcbiAgICB9XHJcbn1cclxuIiwibW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElNb25lcmlzUmVzcG9uc2VEYXRhIHtcclxuICAgICAgICByZXNwb25zZUNvZGU6IHN0cmluZ1tdO1xyXG4gICAgICAgIGRhdGFLZXk6IHN0cmluZztcclxuICAgICAgICBlcnJvck1lc3NhZ2U6IHN0cmluZztcclxuICAgIH1cclxufVxyXG4iLCIndXNlIHN0cmljdCc7XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSVNldERlZmF1bHRDdXN0b21lclBheW1lbnRNZXRob2RWaWV3TW9kZWwge1xyXG4gICAgICAgIFBheW1lbnRQcm92aWRlck5hbWU6IHN0cmluZztcclxuXHJcbiAgICAgICAgUGF5bWVudE1ldGhvZElkOiBzdHJpbmc7XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuL0lDcmVhdGVWYXVsdFRva2VuT3B0aW9ucy50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL0lTZXREZWZhdWx0Q3VzdG9tZXJQYXltZW50TWV0aG9kVmlld01vZGVsLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vSU1vbmVyaXNBZGRWYXVsdFByb2ZpbGVWaWV3TW9kZWwudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ2hlY2tvdXRQYXltZW50L3NvdXJjZS9UeXBlc2NyaXB0L1ZpZXdNb2RlbHMvSVBheW1lbnRNZXRob2RWaWV3TW9kZWwudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvTXZjL0NvbXBvc2VyQ2xpZW50LnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgY2xhc3MgTW9uZXJpc1BheW1lbnRTZXJ2aWNlIHtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQWRkcyBhIHRva2VuIGZyb20gTW9uZXJpcyB0byB0aGUgY3VycmVudCBwYXltZW50LlxyXG4gICAgICAgICAqIEBwYXJhbSAge0lDcmVhdGVWYXVsdFRva2VuT3B0aW9uc30gcmVxdWVzdCBSZXF1ZXN0IHRvIGFkZCB0aGUgVmF1bHQgVG9rZW4uXHJcbiAgICAgICAgICogQHJldHVybiB7US5Qcm9taXNlPGFueT59ICAgICAgICAgICAgICAgICAgIFByb21pc2Ugb2YgdGhlIEFKQVggcmVxdWVzdC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgYWRkQ3JlZGl0Q2FyZChyZXF1ZXN0OiBJQ3JlYXRlVmF1bHRUb2tlbk9wdGlvbnMpOiBRLlByb21pc2U8SU1vbmVyaXNBZGRWYXVsdFByb2ZpbGVWaWV3TW9kZWw+IHtcclxuICAgICAgICAgICAgcmV0dXJuIENvbXBvc2VyQ2xpZW50LnBvc3QoJy9hcGkvdmF1bHRwcm9maWxlL2FkZHByb2ZpbGUnLCByZXF1ZXN0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzZXREZWZhdWx0Q3VzdG9tZXJQYXltZW50TWV0aG9kKHJlcXVlc3Q6IElTZXREZWZhdWx0Q3VzdG9tZXJQYXltZW50TWV0aG9kVmlld01vZGVsKTogUS5Qcm9taXNlPElQYXltZW50TWV0aG9kVmlld01vZGVsPiB7XHJcbiAgICAgICAgICAgIHJldHVybiBDb21wb3NlckNsaWVudC5wdXQoJy9hcGkvY2FydC9zZXRkZWZhdWx0cGF5bWVudG1ldGhvZCcsIHJlcXVlc3QpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHJlbW92ZVBheW1lbnRNZXRob2QocGF5bWVudE1ldGhvZElkOiBzdHJpbmcsIHBheW1lbnRQcm92aWRlck5hbWU6IHN0cmluZyk6IFEuUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgICAgIHJldHVybiA8US5Qcm9taXNlPHZvaWQ+PlxyXG4gICAgICAgICAgICAgICAgQ29tcG9zZXJDbGllbnQucmVtb3ZlKCcvYXBpL3BheW1lbnQvcmVtb3ZlbWV0aG9kJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQYXltZW50TWV0aG9kSWQ6IHBheW1lbnRNZXRob2RJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQYXltZW50UHJvdmlkZXJOYW1lOiBwYXltZW50UHJvdmlkZXJOYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi9Nb25lcmlzUGF5bWVudFNlcnZpY2UudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vLi4vQ29tcG9zZXIuQ2FydC5VSS9DaGVja291dFBheW1lbnQvU291cmNlL1R5cGVzY3JpcHQvVmlld01vZGVscy9JQWN0aXZlUGF5bWVudFZpZXdNb2RlbC50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGV4cG9ydCB0eXBlIEJhc2VNb25lcmlzQ2FuYWRhUGF5bWVudFByb3ZpZGVyQ29sbGVjdGlvbiA9IHsgW3R5cGU6IHN0cmluZ10gOiBCYXNlU3BlY2lhbGl6ZWRNb25lcmlzQ2FuYWRhUGF5bWVudFByb3ZpZGVyIH07XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIEJhc2VTcGVjaWFsaXplZE1vbmVyaXNDYW5hZGFQYXltZW50UHJvdmlkZXIge1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBJbmplY3RlZCBwcm9wZXJ0eSBmb3Igc3BlY3NcclxuICAgICAgICAgKi9cclxuICAgICAgICBwcm90ZWN0ZWQgX3dpbmRvdzogV2luZG93O1xyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgX3BheW1lbnRTZXJ2aWNlOiBNb25lcmlzUGF5bWVudFNlcnZpY2U7XHJcbiAgICAgICAgcHJvdGVjdGVkIF9ldmVudEh1YjogSUV2ZW50SHViO1xyXG5cclxuICAgICAgICBjb25zdHJ1Y3Rvcih3aW5kb3c6IFdpbmRvdywgcGF5bWVudFNlcnZpY2U6IE1vbmVyaXNQYXltZW50U2VydmljZSwgZXZlbnRIdWI6IElFdmVudEh1Yikge1xyXG4gICAgICAgICAgICB0aGlzLl93aW5kb3cgPSB3aW5kb3c7XHJcbiAgICAgICAgICAgIHRoaXMuX3BheW1lbnRTZXJ2aWNlID0gcGF5bWVudFNlcnZpY2U7XHJcbiAgICAgICAgICAgIHRoaXMuX2V2ZW50SHViID0gZXZlbnRIdWI7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmVnaXN0ZXIgZXZlbnQgaGFuZGxlcnMgZm9yIGRvbSBldmVudHNcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgcmVnaXN0ZXJEb21FdmVudHMoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIC8vIGRvIG5vdGhpbmdcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFVucmVnaXN0ZXIgZXZlbnQgaGFuZGxlcnMgZm9yIGRvbSBldmVudHNcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgdW5yZWdpc3RlckRvbUV2ZW50cygpOiB2b2lkIHtcclxuICAgICAgICAgICAgLy8gZG8gbm90aGluZ1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogTWV0aG9kIGNhbGxlZCB0byBnZXQgYSBwcm9taXNlIGZvciBwYXltZW50IHZhbGlkYXRpb24uXHJcbiAgICAgICAgICogUmV0dXJucyBhIHByb21pc2Ugb2YgYm9vbGVhbi4gVGhlIHJldHVybiBib29sZWFuIG5lZWRzIHRvIGJlIGZhbHNlIGZvciB2YWxpZGF0aW9uIGVycm9yLFxyXG4gICAgICAgICAqIG9yIHRydWUgaWYgdmFsaWQuXHJcbiAgICAgICAgICogQHBhcmFtICAge0lBY3RpdmVQYXltZW50Vmlld01vZGVsfSAgIFRoZSBjdXJyZW50IGFjdGl2ZSBwYXltZW50IHZpZXcgbW9kZWxcclxuICAgICAgICAgKiBAcmV0dXJuICB7US5Qcm9taXNlPGJvb2xlYW4+fSAgICAgICAgUHJvbWlzZSB0aGF0IHdpbGwgYmUgZXhlY3V0ZWQgd2hlbiB3ZSB2YWxpZGF0ZSB0aGUgcGF5bWVudCBjb250cm9sLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyB2YWxpZGF0ZVBheW1lbnQoYWN0aXZlUGF5bWVudFZNOiBJQWN0aXZlUGF5bWVudFZpZXdNb2RlbCk6IFEuUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICAgICAgICAgIHJldHVybiBRKHRydWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQWRkIHRoZSB0ZW1wb3JhcnkgdG9rZW4gdG8gdGhlIHZhdWx0IHByb2ZpbGUgb2YgdGhlIHVzZXJcclxuICAgICAgICAgKiBAcGFyYW0gICB7SUFjdGl2ZVBheW1lbnRWaWV3TW9kZWx9ICAgVGhlIGN1cnJlbnQgYWN0aXZlIHBheW1lbnQgdmlldyBtb2RlbFxyXG4gICAgICAgICAqIEByZXR1cm4gIHtRLlByb21pc2U8YW55Pn0gICAgICAgICAgICBUaGUgb2JqZWN0IGlzIHRoZSB1cGRhdGVkIHByb3BlcnRpZXMgb2YgdGhlIGNhcnQgdXNlZCBpbiBDaGVja291dFNlcnZpY2UudXBkYXRlQ2FydCgpXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGFkZFZhdWx0UHJvZmlsZVRva2VuKGFjdGl2ZVBheW1lbnRWTSA6IElBY3RpdmVQYXltZW50Vmlld01vZGVsKTogUS5Qcm9taXNlPGFueT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gUSh7fSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nQmFzZVNwZWNpYWxpemVkTW9uZXJpc0NhbmFkYVBheW1lbnRQcm92aWRlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi9Nb25lcmlzUGF5bWVudFNlcnZpY2UudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vSU1vbmVyaXNSZXNwb25zZURhdGEudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvSlF1ZXJ5UGx1Z2lucy9JU2VyaWFsaXplT2JqZWN0SnF1ZXJ5UGx1Z2luLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0Vycm9ySGFuZGxpbmcvRXJyb3JIYW5kbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uLy4uL0NvbXBvc2VyLkNhcnQuVUkvQ2hlY2tvdXRQYXltZW50L1NvdXJjZS9UeXBlc2NyaXB0L1ZpZXdNb2RlbHMvSUFjdGl2ZVBheW1lbnRWaWV3TW9kZWwudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgQ3JlZGl0Q2FyZE1vbmVyaXNDYW5hZGFQYXltZW50UHJvdmlkZXIgZXh0ZW5kcyBCYXNlU3BlY2lhbGl6ZWRNb25lcmlzQ2FuYWRhUGF5bWVudFByb3ZpZGVyIHtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBfdmFsaWRhdGlvbkRlZmVyOiBRLkRlZmVycmVkPGFueT47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoaXMgcHJvcGVydHkgaGFzIHRvIGJlIHB1YmxpYyBmb3IgdGhlIHNwZWNzIHRvIHdvcmtcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgX21vbmVyaXNSZXNwb25zZURhdGE6IElNb25lcmlzUmVzcG9uc2VEYXRhO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGlzIHByb3BlcnR5IGlzIG9ubHkgdGhlcmUgdG8gaW5qZWN0IHRlc3QgZGF0YSBieSB0aGUgc3BlY3NcclxuICAgICAgICAgKiBpdCBoYXMgdG8gYmUgcHVibGljXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIF9mb3JtRGF0YTogYW55O1xyXG5cclxuICAgICAgICBjb25zdHJ1Y3Rvcih3aW5kb3c6IFdpbmRvdywgcGF5bWVudFNlcnZpY2U6IE1vbmVyaXNQYXltZW50U2VydmljZSwgZXZlbnRIdWI6IElFdmVudEh1Yikge1xyXG4gICAgICAgICAgICBzdXBlcih3aW5kb3csIHBheW1lbnRTZXJ2aWNlLCBldmVudEh1Yik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZWdpc3RlciBldmVudCBoYW5kbGVycyBmb3IgZG9tIGV2ZW50c1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyByZWdpc3RlckRvbUV2ZW50cygpOiB2b2lkIHtcclxuICAgICAgICAgICAgJCh0aGlzLl93aW5kb3cpLm9uKCdtZXNzYWdlLmNvbXBvc2VyJywgdGhpcy5oYW5kbGVNZXNzYWdlUmVzcG9uc2UuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBVbnJlZ2lzdGVyIGV2ZW50IGhhbmRsZXJzIGZvciBkb20gZXZlbnRzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHVucmVnaXN0ZXJEb21FdmVudHMoKTogdm9pZCB7XHJcbiAgICAgICAgICAgICQodGhpcy5fd2luZG93KS5vZmYoJ21lc3NhZ2UuY29tcG9zZXInLCB0aGlzLmhhbmRsZU1lc3NhZ2VSZXNwb25zZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBNZXRob2QgY2FsbGVkIHRvIGdldCBhIHByb21pc2UgZm9yIHBheW1lbnQgdmFsaWRhdGlvbi5cclxuICAgICAgICAgKiBSZXR1cm5zIGEgcHJvbWlzZSBvZiBib29sZWFuLiBUaGUgcmV0dXJuIGJvb2xlYW4gbmVlZHMgdG8gYmUgZmFsc2UgZm9yIHZhbGlkYXRpb24gZXJyb3IsXHJcbiAgICAgICAgICogb3IgdHJ1ZSBpZiB2YWxpZC5cclxuICAgICAgICAgKiBAcGFyYW0gICB7SUFjdGl2ZVBheW1lbnRWaWV3TW9kZWx9ICAgVGhlIGN1cnJlbnQgYWN0aXZlIHBheW1lbnQgdmlldyBtb2RlbFxyXG4gICAgICAgICAqIEByZXR1cm4gIHtRLlByb21pc2U8Ym9vbGVhbj59ICAgICAgICBQcm9taXNlIHRoYXQgd2lsbCBiZSBleGVjdXRlZCB3aGVuIHdlIHZhbGlkYXRlIHRoZSBwYXltZW50IGNvbnRyb2wuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHZhbGlkYXRlUGF5bWVudChhY3RpdmVQYXltZW50Vk06IElBY3RpdmVQYXltZW50Vmlld01vZGVsKTogUS5Qcm9taXNlPGJvb2xlYW4+IHtcclxuICAgICAgICAgICAgcmV0dXJuIFFcclxuICAgICAgICAgICAgICAgIC5mY2FsbCgoKSA9PiB0aGlzLmNvbGxlY3RBbmRWYWxpZGF0ZUZvcm1EYXRhKCkpXHJcbiAgICAgICAgICAgICAgICAudGhlbihfID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhpZGVBbGxNb25lcmlzRXJyb3JzKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3ZhbGlkYXRpb25EZWZlciA9IFEuZGVmZXIoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl92YWxpZGF0aW9uRGVmZXIucHJvbWlzZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbigobW9uZXJpc1JlczogSU1vbmVyaXNSZXNwb25zZURhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3ZhbGlkYXRpb25EZWZlciA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtb25lcmlzUmVzLmRhdGFLZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01vbmVyaXMgZGlkIG5vdCByZXR1cm4gYSBkYXRhS2V5LicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX21vbmVyaXNSZXNwb25zZURhdGEgPSBtb25lcmlzUmVzO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX21vbmVyaXNSZXNwb25zZURhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fdmFsaWRhdGlvbkRlZmVyLnJlc29sdmUodGhpcy5fbW9uZXJpc1Jlc3BvbnNlRGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRNb25lcmlzSUZyYW1lKCkuY29udGVudFdpbmRvdy5wb3N0TWVzc2FnZSgnJywgYWN0aXZlUGF5bWVudFZNLkNhcHR1cmVQYXltZW50VXJsKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl92YWxpZGF0aW9uRGVmZXIucHJvbWlzZTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSB2YWxpZGF0ZU1vbmVyaXNJRnJhbWUodm06IElBY3RpdmVQYXltZW50Vmlld01vZGVsKTogUS5Qcm9taXNlPGJvb2xlYW4+IHtcclxuICAgICAgICAgICAgdmFyIG1vbmVyaXNGcmFtZTogSFRNTElGcmFtZUVsZW1lbnQgPSB0aGlzLmdldE1vbmVyaXNJRnJhbWUoKTtcclxuICAgICAgICAgICAgdmFyIG1vbmVyaXNDb250ZW50V2luZG93OiBXaW5kb3cgPSBtb25lcmlzRnJhbWUuY29udGVudFdpbmRvdztcclxuICAgICAgICAgICAgdmFyIHByb21pc2U6IFEuUHJvbWlzZTxib29sZWFuPjtcclxuICAgICAgICAgICAgdGhpcy5oaWRlQWxsTW9uZXJpc0Vycm9ycygpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fdmFsaWRhdGlvbkRlZmVyID0gUS5kZWZlcigpO1xyXG4gICAgICAgICAgICBwcm9taXNlID0gdGhpcy5fdmFsaWRhdGlvbkRlZmVyLnByb21pc2VcclxuICAgICAgICAgICAgICAgIC50aGVuKChtb25lcmlzUmVzOiBJTW9uZXJpc1Jlc3BvbnNlRGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3ZhbGlkYXRpb25EZWZlciA9IG51bGw7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghbW9uZXJpc1Jlcy5kYXRhS2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTW9uZXJpcyBkaWQgbm90IHJldHVybiBhIGRhdGFLZXkuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9tb25lcmlzUmVzcG9uc2VEYXRhID0gbW9uZXJpc1JlcztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9tb25lcmlzUmVzcG9uc2VEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl92YWxpZGF0aW9uRGVmZXIucmVzb2x2ZSh0aGlzLl9tb25lcmlzUmVzcG9uc2VEYXRhKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG1vbmVyaXNDb250ZW50V2luZG93LnBvc3RNZXNzYWdlKCcnLCB2bS5DYXB0dXJlUGF5bWVudFVybCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl92YWxpZGF0aW9uRGVmZXIucHJvbWlzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFkZCB0aGUgdGVtcG9yYXJ5IHRva2VuIHRvIHRoZSB2YXVsdCBwcm9maWxlIG9mIHRoZSB1c2VyXHJcbiAgICAgICAgICogQHBhcmFtICAge0lBY3RpdmVQYXltZW50Vmlld01vZGVsfSAgIFRoZSBjdXJyZW50IGFjdGl2ZSBwYXltZW50IHZpZXcgbW9kZWxcclxuICAgICAgICAgKiBAcmV0dXJuICB7US5Qcm9taXNlPGFueT59ICAgICAgICAgICAgVGhlIG9iamVjdCBpcyB0aGUgdXBkYXRlZCBwcm9wZXJ0aWVzIG9mIHRoZSBjYXJ0IHVzZWQgaW4gQ2hlY2tvdXRTZXJ2aWNlLnVwZGF0ZUNhcnQoKVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBhZGRWYXVsdFByb2ZpbGVUb2tlbihhY3RpdmVQYXltZW50Vk0gOiBJQWN0aXZlUGF5bWVudFZpZXdNb2RlbCk6IFEuUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICAgICAgaWYgKCFhY3RpdmVQYXltZW50Vk0uU2hvdWxkQ2FwdHVyZVBheW1lbnQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBRKHt9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IGZvcm1EYXRhID0gdGhpcy5jb2xsZWN0QW5kVmFsaWRhdGVGb3JtRGF0YSgpO1xyXG5cclxuICAgICAgICAgICAgbGV0IHJlcXVlc3Q6IElDcmVhdGVWYXVsdFRva2VuT3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgIENhcmRIb2xkZXJOYW1lOiBmb3JtRGF0YS5jYXJkaG9sZGVyLFxyXG4gICAgICAgICAgICAgICAgQ3JlYXRlUGF5bWVudFByb2ZpbGU6IGZvcm1EYXRhLmNyZWF0ZVBheW1lbnRQcm9maWxlLFxyXG4gICAgICAgICAgICAgICAgVmF1bHRUb2tlbklkOiB0aGlzLl9tb25lcmlzUmVzcG9uc2VEYXRhLmRhdGFLZXksXHJcbiAgICAgICAgICAgICAgICBQYXltZW50SWQ6IGFjdGl2ZVBheW1lbnRWTS5JZCxcclxuICAgICAgICAgICAgICAgIFBheW1lbnRQcm92aWRlck5hbWU6IGFjdGl2ZVBheW1lbnRWTS5Qcm92aWRlck5hbWVcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdBZGRpbmcgTW9uZXJpcyBwYXltZW50IGluZm9ybWF0aW9uLicpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3BheW1lbnRTZXJ2aWNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmFkZENyZWRpdENhcmQocmVxdWVzdClcclxuICAgICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzdWx0OiBJTW9uZXJpc0FkZFZhdWx0UHJvZmlsZVZpZXdNb2RlbCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFyZXN1bHQuU3VjY2Vzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX21vbmVyaXNSZXNwb25zZURhdGEgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgTW9uZXJpczogQ291bGQgbm90IGFkZCB0aGUgY3JlZGl0IGNhcmQgdG8gdGhlIHBheW1lbnQ6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICgke3Jlc3VsdC5FcnJvckNvZGV9KSAke3Jlc3VsdC5FcnJvck1lc3NhZ2V9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZlUGF5bWVudFZNLlNob3VsZENhcHR1cmVQYXltZW50ID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHt9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBoYW5kbGVNZXNzYWdlUmVzcG9uc2UoZTogSlF1ZXJ5RXZlbnRPYmplY3QpIHtcclxuICAgICAgICAgICAgbGV0IG1vbmVyaXNFdmVudCA9IDxNZXNzYWdlRXZlbnQ+IGUub3JpZ2luYWxFdmVudDtcclxuICAgICAgICAgICAgbGV0IG1zZ0RhdGEgPSBtb25lcmlzRXZlbnQuZGF0YTtcclxuICAgICAgICAgICAgbGV0IHJlc3BvbnNlRGF0YTogSU1vbmVyaXNSZXNwb25zZURhdGEgPSBKU09OLnBhcnNlKG1vbmVyaXNFdmVudC5kYXRhKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChyZXNwb25zZURhdGEuZXJyb3JNZXNzYWdlICYmICFfLmlzRW1wdHkocmVzcG9uc2VEYXRhLmVycm9yTWVzc2FnZSkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlTW9uZXJpc0Vycm9yKG1vbmVyaXNFdmVudCwgcmVzcG9uc2VEYXRhKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaGFuZGxlTW9uZXJpc1N1Y2Nlc3MocmVzcG9uc2VEYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBoYW5kbGVNb25lcmlzU3VjY2VzcyhyZXNwb25zZURhdGE6IElNb25lcmlzUmVzcG9uc2VEYXRhKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5fdmFsaWRhdGlvbkRlZmVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlY2VpdmVkIE1vbmVyaXMgc3VjY2VzcyByZXNwb25zZSwgYnV0IG5vIHZhbGlkYXRpb24gZGVmZXIgd2FzIGZvdW5kLicpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLl92YWxpZGF0aW9uRGVmZXIucmVzb2x2ZShyZXNwb25zZURhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBoYW5kbGVNb25lcmlzRXJyb3IobW9uZXJpc0V2ZW50OiBNZXNzYWdlRXZlbnQsIHJlc3BvbnNlRGF0YTogSU1vbmVyaXNSZXNwb25zZURhdGEpOiB2b2lkIHtcclxuICAgICAgICAgICAgdmFyIGVycm9yTXNnOiBzdHJpbmcgPSBgJHttb25lcmlzRXZlbnQub3JpZ2lufSBTRU5UICgke3Jlc3BvbnNlRGF0YS5yZXNwb25zZUNvZGV9KSAke3Jlc3BvbnNlRGF0YS5kYXRhS2V5fVxyXG4gICAgICAgICAgICAtICR7cmVzcG9uc2VEYXRhLmVycm9yTWVzc2FnZX1gO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zaG93TW9uZXJpc0Vycm9ycyhyZXNwb25zZURhdGEucmVzcG9uc2VDb2RlKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl92YWxpZGF0aW9uRGVmZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3ZhbGlkYXRpb25EZWZlci5yZWplY3QobmV3IEVycm9yKGVycm9yTXNnKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yTXNnLCByZXNwb25zZURhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHNob3dNb25lcmlzRXJyb3JzKGVycm9yQ29kZXM6IHN0cmluZ1tdKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHZhciBzaG91bGRTaG93R2VuZXJhbDogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgXy5lYWNoKGVycm9yQ29kZXMsIChjb2RlOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgICAgIHZhciBlcnJvck5vZGUgPSAkKGAjbW9uZXJpc0Vycm9yJHtjb2RlfWApO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChfLmlzRW1wdHkoZXJyb3JOb2RlKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNob3VsZFNob3dHZW5lcmFsID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBlcnJvck5vZGUucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoc2hvdWxkU2hvd0dlbmVyYWwpIHtcclxuICAgICAgICAgICAgICAgICQoJyNtb25lcmlzRXJyb3JHZW5lcmFsJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBjb2xsZWN0QW5kVmFsaWRhdGVGb3JtRGF0YSgpOiBhbnkge1xyXG4gICAgICAgICAgICBsZXQgZm9ybSA9IDxJU2VyaWFsaXplT2JqZWN0SnF1ZXJ5UGx1Z2luPiB0aGlzLmdldEZvcm0oKTtcclxuICAgICAgICAgICAgbGV0IGZvcm1EYXRhID0gdGhpcy5fZm9ybURhdGEgfHwgZm9ybS5zZXJpYWxpemVPYmplY3QoKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghZm9ybURhdGEuY2FyZGhvbGRlcikge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgZm9ybSBkb2VzIG5vdCBjb250YWluIGEgZmllbGQgbmFtZWQgXCJjYXJkaG9sZGVyXCIuIFRoaXMgaXMgcmVxdWlyZWQuJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmb3JtRGF0YTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgZ2V0TW9uZXJpc0lGcmFtZSgpIDogSFRNTElGcmFtZUVsZW1lbnQge1xyXG4gICAgICAgICAgICBsZXQgZnJhbWVzOiBKUXVlcnkgPSAkKCcjbW9uZXJpc0ZyYW1lJyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoXy5pc0VtcHR5KGZyYW1lcykpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IGZpbmQgbW9uZXJpc0ZyYW1lIERPTSBlbGVtZW50Jyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiA8SFRNTElGcmFtZUVsZW1lbnQ+ZnJhbWVzWzBdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBoaWRlQWxsTW9uZXJpc0Vycm9ycygpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5nZXRGb3JtKClcclxuICAgICAgICAgICAgICAgIC5maW5kKCcucGFyc2xleS1lcnJvcnMtbGlzdD4ucGFyc2xleS1yZXF1aXJlZCcpXHJcbiAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuXHJcbiAgICAgICAgICAgICQoJyNtb25lcmlzRXJyb3JHZW5lcmFsJykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldHMgdGhlIGNvbnRhaW5lciBmb3IgdGhlIFBheW1lbnQgUHJvdmlkZXIuXHJcbiAgICAgICAgICogQHJldHVybiB7SlF1ZXJ5fSBqUXVlcnkgb2JqZWN0LlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgZ2V0Rm9ybSgpOiBKUXVlcnkge1xyXG4gICAgICAgICAgICB2YXIgZm9ybSA9ICQoJyNQYXltZW50Rm9ybScpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFmb3JtIHx8IF8uaXNFbXB0eShmb3JtKSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb3VsZCBub3QgZmluZCB0aGUgZWxlbWVudCBQYXltZW50Rm9ybSBvbiB0aGlzIHBhZ2UuJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmb3JtO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9J0Jhc2VTcGVjaWFsaXplZE1vbmVyaXNDYW5hZGFQYXltZW50UHJvdmlkZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vTW9uZXJpc1BheW1lbnRTZXJ2aWNlLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0Vycm9ySGFuZGxpbmcvRXJyb3JIYW5kbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L1VJL1VJTW9kYWwudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vLi4vQ29tcG9zZXIuQ2FydC5VSS9DaGVja291dFBheW1lbnQvU291cmNlL1R5cGVzY3JpcHQvVmlld01vZGVscy9JQWN0aXZlUGF5bWVudFZpZXdNb2RlbC50cycgLz5cclxuXHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgU2F2ZWRDcmVkaXRDYXJkTW9uZXJpc0NhbmFkYVBheW1lbnRQcm92aWRlciBleHRlbmRzIEJhc2VTcGVjaWFsaXplZE1vbmVyaXNDYW5hZGFQYXltZW50UHJvdmlkZXIge1xyXG5cclxuICAgICAgICBwcml2YXRlIF9kZWxldGVNb2RhbEVsZW1lbnRTZWxlY3Rvcjogc3RyaW5nID0gJyNjb25maXJtYXRpb25Nb2RhbCc7XHJcbiAgICAgICAgcHJpdmF0ZSBfYnVzeUhhbmRsZXI6IFVJQnVzeUhhbmRsZTtcclxuICAgICAgICBwcml2YXRlIF91aU1vZGFsOiBVSU1vZGFsO1xyXG5cclxuICAgICAgICBjb25zdHJ1Y3Rvcih3aW5kb3c6IFdpbmRvdywgcGF5bWVudFNlcnZpY2U6IE1vbmVyaXNQYXltZW50U2VydmljZSwgZXZlbnRIdWI6IElFdmVudEh1Yikge1xyXG4gICAgICAgICAgICBzdXBlcih3aW5kb3csIHBheW1lbnRTZXJ2aWNlLCBldmVudEh1Yik7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl91aU1vZGFsID0gbmV3IFVJTW9kYWwod2luZG93LCB0aGlzLl9kZWxldGVNb2RhbEVsZW1lbnRTZWxlY3RvciwgdGhpcy5kZWxldGVDYXJ0LCB0aGlzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJlZ2lzdGVyIGV2ZW50IGhhbmRsZXJzIGZvciBkb20gZXZlbnRzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHJlZ2lzdGVyRG9tRXZlbnRzKCk6IHZvaWQge1xyXG4gICAgICAgICAgICAkKHRoaXMuX3dpbmRvdy5kb2N1bWVudCkub24oJ2NsaWNrJywgJy5tb25lcmlzLS1kZWxldGVjYXJkJywgdGhpcy5fdWlNb2RhbC5vcGVuTW9kYWwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVW5yZWdpc3RlciBldmVudCBoYW5kbGVycyBmb3IgZG9tIGV2ZW50c1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyB1bnJlZ2lzdGVyRG9tRXZlbnRzKCk6IHZvaWQge1xyXG4gICAgICAgICAgICAkKHRoaXMuX3dpbmRvdy5kb2N1bWVudCkub2ZmKCdjbGljaycsICcubW9uZXJpcy0tZGVsZXRlY2FyZCcsIHRoaXMuX3VpTW9kYWwub3Blbk1vZGFsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIE1ldGhvZCBjYWxsZWQgdG8gZ2V0IGEgcHJvbWlzZSBmb3IgcGF5bWVudCB2YWxpZGF0aW9uLlxyXG4gICAgICAgICAqIFJldHVybnMgYSBwcm9taXNlIG9mIGJvb2xlYW4uIFRoZSByZXR1cm4gYm9vbGVhbiBuZWVkcyB0byBiZSBmYWxzZSBmb3IgdmFsaWRhdGlvbiBlcnJvcixcclxuICAgICAgICAgKiBvciB0cnVlIGlmIHZhbGlkLlxyXG4gICAgICAgICAqIEBwYXJhbSAgIHtJQWN0aXZlUGF5bWVudFZpZXdNb2RlbH0gICBUaGUgY3VycmVudCBhY3RpdmUgcGF5bWVudCB2aWV3IG1vZGVsXHJcbiAgICAgICAgICogQHJldHVybiAge1EuUHJvbWlzZTxib29sZWFuPn0gICAgICAgIFByb21pc2UgdGhhdCB3aWxsIGJlIGV4ZWN1dGVkIHdoZW4gd2UgdmFsaWRhdGUgdGhlIHBheW1lbnQgY29udHJvbC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgdmFsaWRhdGVQYXltZW50KGFjdGl2ZVBheW1lbnRWTTogSUFjdGl2ZVBheW1lbnRWaWV3TW9kZWwpOiBRLlByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgICAgICAgICAvLyBDb25zaWRlcmluZyB0aGUgY3JlZGl0IGNhcmQgd2FzIGFscmVhZHkgYWRkZWQgd2UgZG8gbm90IG5lZWQgdG8gcnVuIGFkZGl0aW9uYWwgdmFsaWRhdGlvbnNcclxuICAgICAgICAgICAgcmV0dXJuIFEodHJ1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBZGQgdGhlIHRlbXBvcmFyeSB0b2tlbiB0byB0aGUgdmF1bHQgcHJvZmlsZSBvZiB0aGUgdXNlclxyXG4gICAgICAgICAqIEBwYXJhbSAgIHtJQWN0aXZlUGF5bWVudFZpZXdNb2RlbH0gICBUaGUgY3VycmVudCBhY3RpdmUgcGF5bWVudCB2aWV3IG1vZGVsXHJcbiAgICAgICAgICogQHJldHVybiAge1EuUHJvbWlzZTxhbnk+fSAgICAgICAgICAgIFRoZSBvYmplY3QgaXMgdGhlIHVwZGF0ZWQgcHJvcGVydGllcyBvZiB0aGUgY2FydCB1c2VkIGluIENoZWNrb3V0U2VydmljZS51cGRhdGVDYXJ0KClcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgYWRkVmF1bHRQcm9maWxlVG9rZW4oYWN0aXZlUGF5bWVudFZNIDogSUFjdGl2ZVBheW1lbnRWaWV3TW9kZWwpOiBRLlByb21pc2U8YW55PiB7XHJcbiAgICAgICAgICAgIC8vIG5vIG5lZWQgdG8gYWRkIHRoZSBwYXltZW50IG1ldGhvZCB0byB0aGUgdmF1bHRcclxuICAgICAgICAgICAgcmV0dXJuIFEoe30pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGRlbGV0ZUNhcnQoZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0KSA6IFEuUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgICAgIGxldCBlbGVtZW50ID0gJChldmVudC50YXJnZXQpO1xyXG4gICAgICAgICAgICBsZXQgcGF5bWVudE1ldGhvZElkOiBzdHJpbmcgPSBlbGVtZW50LmRhdGEoJ3BheW1lbnQtaWQnKTtcclxuICAgICAgICAgICAgbGV0IHBheW1lbnRQcm92aWRlck5hbWU6IHN0cmluZyA9IGVsZW1lbnQuZGF0YSgncGF5bWVudC1wcm92aWRlcicpO1xyXG5cclxuICAgICAgICAgICAgLy9UT0RPIDogVG8gcmVwbGFjZSB3aXRoIGFzeW5jIGJ1c3kgZnJvbSBjb250cm9sbGVyIHdoZW4gY2hhbmdlIGluaGVyaXRhbmNlIHdpdGggY29udHJvbGxlci5cclxuICAgICAgICAgICAgdGhpcy5fYnVzeUhhbmRsZXIgPSBuZXcgVUlCdXN5SGFuZGxlKCQoZG9jdW1lbnQpLCAkKGRvY3VtZW50KSwgMCk7XHJcblxyXG5cclxuICAgICAgICAgICAgLy8gVE9ETzogcHVibGlzaCB2YWxpZCBldmVudFxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcGF5bWVudFNlcnZpY2VcclxuICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlUGF5bWVudE1ldGhvZChwYXltZW50TWV0aG9kSWQsIHBheW1lbnRQcm92aWRlck5hbWUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gdGhpcy5fZXZlbnRIdWIucHVibGlzaCgncGF5bWVudE1ldGhvZHNVcGRhdGVkJywgbnVsbCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmZhaWwocmVhc29uID0+IEVycm9ySGFuZGxlci5pbnN0YW5jZSgpLm91dHB1dEVycm9yKHJlYXNvbikpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLmZpbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVsZWFzZUJ1c3lIYW5kbGVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgcmVsZWFzZUJ1c3lIYW5kbGVyKCk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fYnVzeUhhbmRsZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2J1c3lIYW5kbGVyLmRvbmUoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2J1c3lIYW5kbGVyID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4vSUNyZWF0ZVZhdWx0VG9rZW5PcHRpb25zLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vSU1vbmVyaXNSZXNwb25zZURhdGEudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9Nb25lcmlzUGF5bWVudFNlcnZpY2UudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9Qcm92aWRlcnMvQmFzZVNwZWNpYWxpemVkTW9uZXJpc0NhbmFkYVBheW1lbnRQcm92aWRlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL1Byb3ZpZGVycy9DcmVkaXRDYXJkTW9uZXJpc0NhbmFkYVBheW1lbnRQcm92aWRlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL1Byb3ZpZGVycy9TYXZlZENyZWRpdENhcmRNb25lcmlzQ2FuYWRhUGF5bWVudFByb3ZpZGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NoZWNrb3V0UGF5bWVudC9Tb3VyY2UvVHlwZXNjcmlwdC9Qcm92aWRlcnMvQmFzZUNoZWNrb3V0UGF5bWVudFByb3ZpZGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L0V2ZW50cy9JRXZlbnRIdWIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvSlF1ZXJ5UGx1Z2lucy9JU2VyaWFsaXplT2JqZWN0SnF1ZXJ5UGx1Z2luLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIE1vbmVyaXNDYW5hZGFQYXltZW50UHJvdmlkZXIgZXh0ZW5kcyBCYXNlQ2hlY2tvdXRQYXltZW50UHJvdmlkZXIge1xyXG4gICAgICAgIHByaXZhdGUgX3ZhbGlkYXRpb25EZWZlcjogUS5EZWZlcnJlZDxhbnk+O1xyXG4gICAgICAgIHByaXZhdGUgX21vbmVyaXNQYXltZW50U2VydmljZTogTW9uZXJpc1BheW1lbnRTZXJ2aWNlO1xyXG4gICAgICAgIHByaXZhdGUgX3Byb3ZpZGVyczogQmFzZU1vbmVyaXNDYW5hZGFQYXltZW50UHJvdmlkZXJDb2xsZWN0aW9uO1xyXG5cclxuICAgICAgICBjb25zdHJ1Y3Rvcih3aW5kb3c6IFdpbmRvdywgcHJvdmlkZXJOYW1lOiBzdHJpbmcsIGV2ZW50SHViOiBJRXZlbnRIdWIpIHtcclxuICAgICAgICAgICAgc3VwZXIod2luZG93LCBldmVudEh1YiwgJ01vbmVyaXNDYW5hZGFQYXltZW50UHJvdmlkZXInLCBwcm92aWRlck5hbWUpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fbW9uZXJpc1BheW1lbnRTZXJ2aWNlID0gbmV3IE1vbmVyaXNQYXltZW50U2VydmljZSgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5yZWdpc3RlclNwZWNpYWxpemVkUHJvdmlkZXJzKCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJEb21FdmVudHMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGdldCBwcm92aWRlcnMoKTogQmFzZU1vbmVyaXNDYW5hZGFQYXltZW50UHJvdmlkZXJDb2xsZWN0aW9uIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Byb3ZpZGVycztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIE1ldGhvZCBjYWxsZWQgdG8gZ2V0IGEgcHJvbWlzZSBmb3IgcGF5bWVudCB2YWxpZGF0aW9uLlxyXG4gICAgICAgICAqIFJldHVybnMgYSBwcm9taXNlIG9mIGJvb2xlYW4uIFRoZSByZXR1cm4gYm9vbGVhbiBuZWVkcyB0byBiZSBmYWxzZSBmb3IgdmFsaWRhdGlvbiBlcnJvcixcclxuICAgICAgICAgKiBvciB0cnVlIGlmIHZhbGlkLlxyXG4gICAgICAgICAqIEByZXR1cm4ge1EuUHJvbWlzZTxib29sZWFuPn0gUHJvbWlzZSB0aGF0IHdpbGwgYmUgZXhlY3V0ZWQgd2hlbiB3ZSB2YWxpZGF0ZSB0aGUgcGF5bWVudCBjb250cm9sLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyB2YWxpZGF0ZVBheW1lbnQoYWN0aXZlUGF5bWVudFZNOiBJQWN0aXZlUGF5bWVudFZpZXdNb2RlbCk6IFEuUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFByb3ZpZGVyKGFjdGl2ZVBheW1lbnRWTS5QYXltZW50TWV0aG9kVHlwZSkudmFsaWRhdGVQYXltZW50KGFjdGl2ZVBheW1lbnRWTSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3VibWl0UGF5bWVudChhY3RpdmVQYXltZW50Vk0gOiBJQWN0aXZlUGF5bWVudFZpZXdNb2RlbCk6IFEuUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UHJvdmlkZXIoYWN0aXZlUGF5bWVudFZNLlBheW1lbnRNZXRob2RUeXBlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hZGRWYXVsdFByb2ZpbGVUb2tlbihhY3RpdmVQYXltZW50Vk0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMudW5yZWdpc3RlckRvbUV2ZW50cygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHNldERlZmF1bHRDdXN0b21lclBheW1lbnRNZXRob2QoYWN0aXZlUGF5bWVudFZNOiBJQWN0aXZlUGF5bWVudFZpZXdNb2RlbCk6IFEuUHJvbWlzZTxJUGF5bWVudE1ldGhvZFZpZXdNb2RlbD4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbW9uZXJpc1BheW1lbnRTZXJ2aWNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLnNldERlZmF1bHRDdXN0b21lclBheW1lbnRNZXRob2Qoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBQYXltZW50TWV0aG9kSWQ6IGFjdGl2ZVBheW1lbnRWTS5JZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgUGF5bWVudFByb3ZpZGVyTmFtZTogYWN0aXZlUGF5bWVudFZNLlByb3ZpZGVyTmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHJlZ2lzdGVyU3BlY2lhbGl6ZWRQcm92aWRlcnMoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Byb3ZpZGVycyA9IHtcclxuICAgICAgICAgICAgICAgICdTYXZlZENyZWRpdENhcmQnOiBuZXcgU2F2ZWRDcmVkaXRDYXJkTW9uZXJpc0NhbmFkYVBheW1lbnRQcm92aWRlcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53aW5kb3csXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX21vbmVyaXNQYXltZW50U2VydmljZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fZXZlbnRIdWIpLFxyXG5cclxuICAgICAgICAgICAgICAgICdDcmVkaXRDYXJkJzogbmV3IENyZWRpdENhcmRNb25lcmlzQ2FuYWRhUGF5bWVudFByb3ZpZGVyKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLndpbmRvdyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbW9uZXJpc1BheW1lbnRTZXJ2aWNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9ldmVudEh1YilcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCByZWdpc3RlckRvbUV2ZW50cygpOiB2b2lkIHtcclxuICAgICAgICAgICAgXy5mb3JFYWNoKHRoaXMucHJvdmlkZXJzLCBwID0+IHAucmVnaXN0ZXJEb21FdmVudHMoKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgdW5yZWdpc3RlckRvbUV2ZW50cygpOiB2b2lkIHtcclxuICAgICAgICAgICAgXy5mb3JFYWNoKHRoaXMucHJvdmlkZXJzLCBwID0+IHAudW5yZWdpc3RlckRvbUV2ZW50cygpKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgZ2V0UHJvdmlkZXIocHJvdmlkZXJOYW1lOiBzdHJpbmcpOiBCYXNlU3BlY2lhbGl6ZWRNb25lcmlzQ2FuYWRhUGF5bWVudFByb3ZpZGVyIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLnByb3ZpZGVyc1twcm92aWRlck5hbWVdKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Byb3ZpZGVyIG5vdCBmb3VuZCcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm92aWRlcnNbcHJvdmlkZXJOYW1lXTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9FdmVudHMvSUV2ZW50SHViLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NoZWNrb3V0UGF5bWVudC9Tb3VyY2UvVHlwZXNjcmlwdC9WaWV3TW9kZWxzL0lBY3RpdmVQYXltZW50Vmlld01vZGVsLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NoZWNrb3V0UGF5bWVudC9zb3VyY2UvVHlwZXNjcmlwdC9Qcm92aWRlcnMvQmFzZUNoZWNrb3V0UGF5bWVudFByb3ZpZGVyLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIE9uU2l0ZVBPU1BheW1lbnRQcm92aWRlciBleHRlbmRzIEJhc2VDaGVja291dFBheW1lbnRQcm92aWRlciB7XHJcblxyXG4gICAgICAgIGNvbnN0cnVjdG9yKHdpbmRvdzogV2luZG93LCBwcm92aWRlck5hbWU6IHN0cmluZywgZXZlbnRIdWI6IElFdmVudEh1Yikge1xyXG4gICAgICAgICAgICBzdXBlcih3aW5kb3csIGV2ZW50SHViLCAnT25TaXRlUE9TUGF5bWVudFByb3ZpZGVyJywgcHJvdmlkZXJOYW1lKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIE1ldGhvZCBjYWxsZWQgdG8gZ2V0IGEgcHJvbWlzZSBmb3IgcGF5bWVudCB2YWxpZGF0aW9uLlxyXG4gICAgICAgICAqIFJldHVybnMgYSBwcm9taXNlIG9mIGJvb2xlYW4uIFRoZSByZXR1cm4gYm9vbGVhbiBuZWVkcyB0byBiZSBmYWxzZSBmb3IgdmFsaWRhdGlvbiBlcnJvcixcclxuICAgICAgICAgKiBvciB0cnVlIGlmIHZhbGlkLlxyXG4gICAgICAgICAqIEByZXR1cm4ge1EuUHJvbWlzZTxib29sZWFuPn0gUHJvbWlzZSB0aGF0IHdpbGwgYmUgZXhlY3V0ZWQgd2hlbiB3ZSB2YWxpZGF0ZSB0aGUgcGF5bWVudCBjb250cm9sLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyB2YWxpZGF0ZVBheW1lbnQoYWN0aXZlVk06IElBY3RpdmVQYXltZW50Vmlld01vZGVsKTogUS5Qcm9taXNlPGJvb2xlYW4+IHtcclxuICAgICAgICAgICAgcmV0dXJuIFEodHJ1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBNZXRob2QgY2FsbGVkIHRvIGdldCBhIHByb21pc2Ugd2hlbiBwYXltZW50IHdpbGwgc3VibWl0LlxyXG4gICAgICAgICAqIEByZXR1cm4ge1EuUHJvbWlzZTxhbnk+fSBQcm9taXNlIHRoYXQgd2lsbCBiZSBleGVjdXRlZCB3aGVuIHRvIGNhcnQgaXMgYWJvdXQgdGhlIGJlIHVwZGF0ZWQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN1Ym1pdFBheW1lbnQoYWN0aXZlVk06IElBY3RpdmVQYXltZW50Vmlld01vZGVsKTogUS5Qcm9taXNlPGFueT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gUSh7fSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9KcXVlcnlQbHVnaW5zL0lTZXJpYWxpemVPYmplY3RKcXVlcnlQbHVnaW4udHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9Db250cm9sbGVyLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvSUNvbnRyb2xsZXJDb250ZXh0LnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0LnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIE9yZGVyRGV0YWlsc0NvbnRyb2xsZXIgZXh0ZW5kcyBDb250cm9sbGVyIHtcclxuXHJcbiAgICAgICAgcHVibGljIGluaXRpYWxpemUoKSB7XHJcbiAgICAgICAgICAgIHN1cGVyLmluaXRpYWxpemUoKTtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJR2V0T3JkZXJQYXJhbWV0ZXJzIHtcclxuICAgICAgICBwYWdlOiBudW1iZXI7XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9NdmMvQ29tcG9zZXJDbGllbnQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vUGFyYW1ldGVycy9JR2V0T3JkZXJQYXJhbWV0ZXJzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIE9yZGVyU2VydmljZSB7XHJcbiAgICAgICAgcHVibGljIGdldFBhc3RPcmRlcnMob3B0aW9uczogSUdldE9yZGVyUGFyYW1ldGVycyA9IHsgcGFnZTogMSB9KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBDb21wb3NlckNsaWVudC5wb3N0KCcvYXBpL29yZGVyL3Bhc3Qtb3JkZXJzJywgb3B0aW9ucyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZ2V0Q3VycmVudE9yZGVycyhvcHRpb25zOiBJR2V0T3JkZXJQYXJhbWV0ZXJzID0geyBwYWdlOiAxIH0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIENvbXBvc2VyQ2xpZW50LnBvc3QoJy9hcGkvb3JkZXIvY3VycmVudC1vcmRlcnMnLCBvcHRpb25zKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L0pxdWVyeVBsdWdpbnMvSVNlcmlhbGl6ZU9iamVjdEpxdWVyeVBsdWdpbi50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0NvbnRyb2xsZXIudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9JQ29udHJvbGxlckNvbnRleHQudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9JQ29udHJvbGxlckFjdGlvbkNvbnRleHQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9TZXJ2aWNlcy9PcmRlclNlcnZpY2UnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgQ3VycmVudE9yZGVyc0NvbnRyb2xsZXIgZXh0ZW5kcyBDb250cm9sbGVyIHtcclxuICAgICAgICBwcm90ZWN0ZWQgb3JkZXJTZXJ2aWNlID0gbmV3IE9yZGVyU2VydmljZSgpO1xyXG5cclxuICAgICAgICBwdWJsaWMgaW5pdGlhbGl6ZSgpIHtcclxuICAgICAgICAgICAgc3VwZXIuaW5pdGlhbGl6ZSgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5nZXRDdXJyZW50T3JkZXJzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZ2V0T3JkZXJzKGNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCkge1xyXG4gICAgICAgICAgICB2YXIgcGFnZTogbnVtYmVyID0gY29udGV4dC5lbGVtZW50Q29udGV4dC5kYXRhKCdwYWdlJyk7XHJcblxyXG4gICAgICAgICAgICBjb250ZXh0LmV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmdldEN1cnJlbnRPcmRlcnMoe1xyXG4gICAgICAgICAgICAgICAgcGFnZTogcGFnZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgZ2V0Q3VycmVudE9yZGVycyhwYXJhbT86IElHZXRPcmRlclBhcmFtZXRlcnMpIHtcclxuICAgICAgICAgICAgdmFyIGJ1c3lIYW5kbGUgPSB0aGlzLmFzeW5jQnVzeSgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5vcmRlclNlcnZpY2UuZ2V0Q3VycmVudE9yZGVycyhwYXJhbSlcclxuICAgICAgICAgICAgICAgIC5kb25lKCh2aWV3TW9kZWwpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcignQ3VycmVudE9yZGVycycsIHZpZXdNb2RlbCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghXy5pc0VtcHR5KHZpZXdNb2RlbCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIoJ09yZGVySGlzdG9yeVBhZ2luYXRpb24nLCB2aWV3TW9kZWwuUGFnaW5hdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBidXN5SGFuZGxlLmRvbmUoKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgKHJlYXNvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKHJlYXNvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1c3lIYW5kbGUuZG9uZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvSnF1ZXJ5UGx1Z2lucy9JU2VyaWFsaXplT2JqZWN0SnF1ZXJ5UGx1Z2luLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvQ29udHJvbGxlci50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0lDb250cm9sbGVyQ29udGV4dC50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0lDb250cm9sbGVyQWN0aW9uQ29udGV4dC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL1NlcnZpY2VzL09yZGVyU2VydmljZScgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBQYXN0T3JkZXJzQ29udHJvbGxlciBleHRlbmRzIENvbnRyb2xsZXIge1xyXG4gICAgICAgIHByb3RlY3RlZCBvcmRlclNlcnZpY2UgPSBuZXcgT3JkZXJTZXJ2aWNlKCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKCkge1xyXG4gICAgICAgICAgICBzdXBlci5pbml0aWFsaXplKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmdldFBhc3RPcmRlcnMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBnZXRPcmRlcnMoY29udGV4dDogSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0KSB7XHJcbiAgICAgICAgICAgIHZhciBwYWdlOiBudW1iZXIgPSBjb250ZXh0LmVsZW1lbnRDb250ZXh0LmRhdGEoJ3BhZ2UnKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnRleHQuZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdGhpcy5nZXRQYXN0T3JkZXJzKHsgcGFnZTogcGFnZSB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgZ2V0UGFzdE9yZGVycyhwYXJhbT8gOiBJR2V0T3JkZXJQYXJhbWV0ZXJzKSB7XHJcbiAgICAgICAgICAgIHZhciBidXN5SGFuZGxlID0gdGhpcy5hc3luY0J1c3koKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMub3JkZXJTZXJ2aWNlLmdldFBhc3RPcmRlcnMocGFyYW0pXHJcbiAgICAgICAgICAgICAgICAuZG9uZSgodmlld01vZGVsKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIoJ1Bhc3RPcmRlcnMnLCB2aWV3TW9kZWwpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIV8uaXNFbXB0eSh2aWV3TW9kZWwpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKCdPcmRlckhpc3RvcnlQYWdpbmF0aW9uJywgdmlld01vZGVsLlBhZ2luYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYnVzeUhhbmRsZS5kb25lKCk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgKHJlYXNvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IocmVhc29uKTtcclxuICAgICAgICAgICAgICAgICAgICBidXN5SGFuZGxlLmRvbmUoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0V2ZW50cy9FdmVudEh1Yi50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5DYXJ0LlVJL0NhcnRTdW1tYXJ5L1NvdXJjZS9UeXBlc2NyaXB0L0NhcnRTZXJ2aWNlLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIE9yZGVyU3VtbWFyeVNlcnZpY2Uge1xyXG5cclxuICAgICAgICBwcml2YXRlIGNhcnRTZXJ2aWNlOiBJQ2FydFNlcnZpY2U7XHJcbiAgICAgICAgcHJpdmF0ZSBldmVudEh1YjogSUV2ZW50SHViO1xyXG5cclxuICAgICAgICBjb25zdHJ1Y3RvcihjYXJ0U2VydmljZTogSUNhcnRTZXJ2aWNlLCBldmVudEh1YjogSUV2ZW50SHViKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWNhcnRTZXJ2aWNlKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Vycm9yOiBjYXJ0U2VydmljZSBpcyByZXF1aXJlZCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghZXZlbnRIdWIpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3I6IGV2ZW50SHViIGlzIHJlcXVpcmVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuY2FydFNlcnZpY2UgPSBjYXJ0U2VydmljZTtcclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1YiA9IGV2ZW50SHViO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHNldENoZWFwZXN0U2hpcHBpbmdNZXRob2RVc2luZyhwb3N0YWxDb2RlOiBzdHJpbmcpOiBRLlByb21pc2U8dm9pZD4ge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKCdjYXJ0VXBkYXRpbmcnLCB7IGRhdGE6IHsgUG9zdGFsQ29kZTogcG9zdGFsQ29kZSB9IH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FydFNlcnZpY2UudXBkYXRlU2hpcHBpbmdNZXRob2RQb3N0YWxDb2RlKHBvc3RhbENvZGUpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gdGhpcy5jYXJ0U2VydmljZS5zZXRDaGVhcGVzdFNoaXBwaW5nTWV0aG9kKCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gdGhpcy5jYXJ0U2VydmljZS5nZXRDYXJ0KCkpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oY2FydCA9PiB0aGlzLmV2ZW50SHViLnB1Ymxpc2goJ2NhcnRVcGRhdGVkJywgeyBkYXRhOiBjYXJ0IH0pKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5mYWlsKChyZWFzb246IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB3aGlsZSB1cGRhdGluZyB0aGUgc2hpcHBpbmcgbWV0aG9kIHVzaW5nIHRoZSBwb3N0YWwgY29kZScsIHJlYXNvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHJlYXNvbjtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBjbGVhbkNhcnQoKTogUS5Qcm9taXNlPHZvaWQ+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNhcnRTZXJ2aWNlLmNsZWFuKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0NvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0lDb250cm9sbGVyQWN0aW9uQ29udGV4dC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9SZXBvc2l0b3JpZXMvQ2FydFJlcG9zaXRvcnkudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvSlF1ZXJ5UGx1Z2lucy9JU2VyaWFsaXplT2JqZWN0SnF1ZXJ5UGx1Z2luLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L0Vycm9ySGFuZGxpbmcvRXJyb3JIYW5kbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLkFuYWx5dGljcy5VSS9BbmFseXRpY3MvU291cmNlL1R5cGVzY3JpcHQvR29vZ2xlQW5hbHl0aWNzUGx1Z2luLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NhcnRTdW1tYXJ5L1NvdXJjZS9UeXBlc2NyaXB0L0NhcnRTZXJ2aWNlLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9J09yZGVyU3VtbWFyeVNlcnZpY2UudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgT3JkZXJTdW1tYXJ5Q29udHJvbGxlciBleHRlbmRzIE9yY2tlc3RyYS5Db21wb3Nlci5Db250cm9sbGVyIHtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBjYWNoZVByb3ZpZGVyOiBJQ2FjaGVQcm92aWRlciA9IENhY2hlUHJvdmlkZXIuaW5zdGFuY2UoKTtcclxuICAgICAgICBwcml2YXRlIGNhcnRTZXJ2aWNlOiBJQ2FydFNlcnZpY2UgPSBuZXcgQ2FydFNlcnZpY2UobmV3IENhcnRSZXBvc2l0b3J5KCksIHRoaXMuZXZlbnRIdWIpO1xyXG4gICAgICAgIHByaXZhdGUgb3JkZXJTdW1tYXJ5U2VydmljZTogT3JkZXJTdW1tYXJ5U2VydmljZSA9IG5ldyBPcmRlclN1bW1hcnlTZXJ2aWNlKHRoaXMuY2FydFNlcnZpY2UsIHRoaXMuZXZlbnRIdWIpO1xyXG4gICAgICAgIHByaXZhdGUgcG9zdGFsQ29kZU1vZGFsIDogYW55O1xyXG4gICAgICAgIHByaXZhdGUgcG9zdGFsQ29kZUlucHV0IDogYW55O1xyXG5cclxuICAgICAgICBwdWJsaWMgaW5pdGlhbGl6ZSgpIHtcclxuICAgICAgICAgICAgc3VwZXIuaW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyU3Vic2NyaXB0aW9ucygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSByZWdpc3RlclN1YnNjcmlwdGlvbnMoKSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnN1YnNjcmliZSgnY2FydFVwZGF0ZWQnLCBlID0+IHRoaXMucmVuZGVyKCdPcmRlclN1bW1hcnknLCBlLmRhdGEpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvcGVuTW9kYWwoYWN0aW9uQ29udGV4dDogSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0KSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnBvc3RhbENvZGVNb2RhbCA9ICQoJyNwb3N0YWxDb2RlTW9kYWwnKTtcclxuICAgICAgICAgICAgdGhpcy5wb3N0YWxDb2RlSW5wdXQgPSAkKCcjcG9zdGFsQ29kZScpO1xyXG4gICAgICAgICAgICB0aGlzLmNsZWFyRm9ybSgpO1xyXG5cclxuICAgICAgICAgICAgLy9EdWUgdG8gaG93IEhUTUw1IGRlZmluZXMgaXRzIHNlbWFudGljcywgdGhlIGF1dG9mb2N1cyBIVE1MIGF0dHJpYnV0ZSBoYXMgbm8gZWZmZWN0IGluIEJvb3RzdHJhcCBtb2RhbHNcclxuICAgICAgICAgICAgLy9odHRwOi8vZ2V0Ym9vdHN0cmFwLmNvbS9qYXZhc2NyaXB0LyNtb2RhbHNcclxuICAgICAgICAgICAgdGhpcy5wb3N0YWxDb2RlTW9kYWwub24oJ3Nob3duLmJzLm1vZGFsJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wb3N0YWxDb2RlSW5wdXQuZm9jdXMoKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnBvc3RhbENvZGVNb2RhbC5tb2RhbCgnc2hvdycpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBjbGVhckZvcm0oKSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnBvc3RhbENvZGVJbnB1dC52YWwoJycpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcignRXN0aW1hdGVTaGlwcGluZ1ZhbGlkYXRpb25Gb3JtJywgeyBQb3N0YWxDb2RlTWFsZm9ybWVkOiBmYWxzZSwgUG9zdGFsQ29kZUVtcHR5OiBmYWxzZSB9KTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBjbG9zZU1vZGFsKGFjdGlvbkNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCkge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5wb3N0YWxDb2RlTW9kYWwubW9kYWwoJ2hpZGUnKTtcclxuICAgICAgICAgICAgdGhpcy5wb3N0YWxDb2RlTW9kYWwub2ZmKCdzaG93bi5icy5tb2RhbCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGVzdGltYXRlU2hpcHBpbmcoYWN0aW9uQ29udGV4dDogSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0KSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgZm9ybUNvbnRleHQgPSBhY3Rpb25Db250ZXh0LmVsZW1lbnRDb250ZXh0LFxyXG4gICAgICAgICAgICAgICAgZm9ybVZhbHVlcyA9ICg8SVNlcmlhbGl6ZU9iamVjdEpxdWVyeVBsdWdpbj5mb3JtQ29udGV4dCkuc2VyaWFsaXplT2JqZWN0KCksXHJcbiAgICAgICAgICAgICAgICBwb3N0YWxDb2RlID0gZm9ybVZhbHVlcy5wb3N0YWxDb2RlLnRvVXBwZXJDYXNlKCksXHJcbiAgICAgICAgICAgICAgICBwb3N0YWxDb2RlUGF0dGVybiA9IGZvcm1Db250ZXh0LmRhdGEoJ3JlZ2V4JyksXHJcbiAgICAgICAgICAgICAgICBwb3N0YWxDb2RlUmVnZXhQYXR0ZXJuID0gbmV3IFJlZ0V4cChwb3N0YWxDb2RlUGF0dGVybi50b1N0cmluZygpKSxcclxuICAgICAgICAgICAgICAgIHJlc3VsdCA9IHBvc3RhbENvZGVSZWdleFBhdHRlcm4udGVzdChwb3N0YWxDb2RlKSxcclxuICAgICAgICAgICAgICAgIGJ1c3lIYW5kbGU6IFVJQnVzeUhhbmRsZTtcclxuXHJcbiAgICAgICAgICAgIGFjdGlvbkNvbnRleHQuZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghcmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAocG9zdGFsQ29kZSA9PT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXIoJ0VzdGltYXRlU2hpcHBpbmdWYWxpZGF0aW9uRm9ybScsIHsgUG9zdGFsQ29kZUVtcHR5OiB0cnVlIH0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXIoJ0VzdGltYXRlU2hpcHBpbmdWYWxpZGF0aW9uRm9ybScsIHsgUG9zdGFsQ29kZU1hbGZvcm1lZDogdHJ1ZSwgUG9zdGFsQ29kZTogZm9ybVZhbHVlcy5wb3N0YWxDb2RlIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBidXN5SGFuZGxlID0gdGhpcy5hc3luY0J1c3koKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMub3JkZXJTdW1tYXJ5U2VydmljZS5zZXRDaGVhcGVzdFNoaXBwaW5nTWV0aG9kVXNpbmcocG9zdGFsQ29kZSlcclxuICAgICAgICAgICAgICAgIC50aGVuKChkYXRhOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsb3NlTW9kYWwoYWN0aW9uQ29udGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICAgICAgICAgICAgICB9LCAocmVhc29uOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBFcnJvckhhbmRsZXIuaW5zdGFuY2UoKS5vdXRwdXRFcnJvckZyb21Db2RlKCdQb3N0YWxDb2RlVXBkYXRlRmFpbGVkJyk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmZpbigoKSA9PiBidXN5SGFuZGxlLmRvbmUoKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgcHJvY2VlZFRvQ2hlY2tvdXQoYWN0aW9uQ29udGV4dDogSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0KTogdm9pZCB7XHJcblxyXG4gICAgICAgICAgICB2YXIgbmV4dFN0ZXBVcmw6IHN0cmluZyA9IGFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHQuZGF0YSgnbmV4dHN0ZXB1cmwnKS50b1N0cmluZygpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFuZXh0U3RlcFVybCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgJ05vIG5leHQgc3RlcCBVcmwgd2FzIGRlZmluZWQuJztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgQW5hbHl0aWNzUGx1Z2luLnNldENoZWNrb3V0T3JpZ2luKCdDaGVja291dCcpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGJ1c3k6IFVJQnVzeUhhbmRsZSA9IHRoaXMuYXN5bmNCdXN5KCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLm9yZGVyU3VtbWFyeVNlcnZpY2UuY2xlYW5DYXJ0KCkuZG9uZSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IG5leHRTdGVwVXJsO1xyXG4gICAgICAgICAgICB9LCByZWFzb24gPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igd2hpbGUgcHJvY2VlZGluZyB0byBDaGVja291dCcsIHJlYXNvbik7XHJcbiAgICAgICAgICAgICAgICBFcnJvckhhbmRsZXIuaW5zdGFuY2UoKS5vdXRwdXRFcnJvckZyb21Db2RlKCdQcm9jZWVkVG9DaGVja291dEZhaWxlZCcpO1xyXG4gICAgICAgICAgICAgICAgYnVzeS5kb25lKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2VwYXJhdGVzIHRoZSBsb2dpYyB0aGF0IHJldHJpZXZlcyB0aGUgZGF0YSBhbmQgbWFwcyBpdCB0byB0aGUgZW50aXR5IG1vZGVsIGZyb20gdGhlIGFwcGxpY2F0aW9uIHNlcnZpY2VzIHRoYXQgYWN0cyBvbiB0aGUgbW9kZWwuXHJcbiAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJV2lzaExpc3RSZXBvc2l0b3J5IHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXQgdGhlIGxpZ2h0d2VpZ2h0IHdpc2hMaXN0IG9mIHRoZSBjdXJyZW50IGN1c3RvbWVyLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldFdpc2hMaXN0U3VtbWFyeSgpOiBRLlByb21pc2U8YW55PjtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXQgdGhlIHdpc2hMaXN0IG9mIHRoZSBjdXJyZW50IGN1c3RvbWVyLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldFdpc2hMaXN0KCk6IFEuUHJvbWlzZTxhbnk+O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFkZCBhIGxpbmUgaXRlbSB0byB0aGUgd2lzaExpc3Qgb2YgdGhlIGN1cnJlbnQgY3VzdG9tZXIuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgYWRkTGluZUl0ZW0ocHJvZHVjdElkOiBzdHJpbmcsIHZhcmlhbnRJZDogc3RyaW5nLCBxdWFudGl0eTogbnVtYmVyKTogUS5Qcm9taXNlPHZvaWQ+O1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIERlbGV0ZSBhIGxpbmUgaXRlbSBmcm9tIHRoZSB3aXNoTGlzdCBvZiB0aGUgY3VycmVudCBjdXN0b21lci5cclxuICAgICAgICAgKi9cclxuICAgICAgICBkZWxldGVMaW5lSXRlbShsaW5lSXRlbUlkOiBzdHJpbmcpOiBRLlByb21pc2U8dm9pZD47XHJcblxyXG4gICAgfVxyXG59XHJcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9DYWNoZS9DYWNoZUVycm9yLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9DYWNoZS9JQ2FjaGUudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0NhY2hlL0lDYWNoZVBvbGljeS50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvTXZjL0NvbXBvc2VyQ2xpZW50LnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuL0lXaXNoTGlzdFJlcG9zaXRvcnkudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgV2lzaExpc3RSZXBvc2l0b3J5IGltcGxlbWVudHMgT3Jja2VzdHJhLkNvbXBvc2VyLklXaXNoTGlzdFJlcG9zaXRvcnkge1xyXG5cclxuXHJcbiAgICAgICAgcHVibGljIGdldFdpc2hMaXN0KCk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBDb21wb3NlckNsaWVudC5nZXQoJy9hcGkvd2lzaGxpc3QvZ2V0d2lzaGxpc3QnKTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZ2V0V2lzaExpc3RTdW1tYXJ5KCk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgcmV0dXJuIENvbXBvc2VyQ2xpZW50LmdldCgnL2FwaS93aXNobGlzdC9nZXR3aXNobGlzdHN1bW1hcnknKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBhZGRMaW5lSXRlbShwcm9kdWN0SWQ6IHN0cmluZywgdmFyaWFudElkOiBzdHJpbmcsIHF1YW50aXR5OiBudW1iZXIpOiBRLlByb21pc2U8dm9pZD4ge1xyXG5cclxuICAgICAgICAgICAgaWYgKCFwcm9kdWN0SWQpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIHByb2R1Y3QgaWQgaXMgcmVxdWlyZWQnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHF1YW50aXR5IDw9IDApIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIHF1YW50aXR5IG11c3QgYmUgZ3JlYXRlciB0aGFuIHplcm8nKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBQcm9kdWN0SWQ6IHByb2R1Y3RJZCxcclxuICAgICAgICAgICAgICAgIFZhcmlhbnRJZDogdmFyaWFudElkLFxyXG4gICAgICAgICAgICAgICAgUXVhbnRpdHk6IHF1YW50aXR5XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gQ29tcG9zZXJDbGllbnQucG9zdCgnL2FwaS93aXNobGlzdC9saW5laXRlbScsIGRhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGRlbGV0ZUxpbmVJdGVtKGxpbmVJdGVtSWQ6IHN0cmluZyk6IFEuUHJvbWlzZTx2b2lkPiB7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWxpbmVJdGVtSWQpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIGxpbmUgaXRlbSBpZCBpcyByZXF1aXJlZCcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIExpbmVJdGVtSWQ6IGxpbmVJdGVtSWRcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBDb21wb3NlckNsaWVudC5yZW1vdmUoJy9hcGkvd2lzaGxpc3QvbGluZWl0ZW0nLCBkYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0NvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvRXZlbnRzL0V2ZW50U2NoZWR1bGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9JQ29udHJvbGxlckFjdGlvbkNvbnRleHQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvanF1ZXJ5UGx1Z2lucy9JU2VyaWFsaXplT2JqZWN0SnF1ZXJ5UGx1Z2luLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NvbW1vbi9Tb3VyY2UvVHlwZXNjcmlwdC9NeUFjY291bnRFdmVudHMudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ29tbW9uL1NvdXJjZS9UeXBlc2NyaXB0L01lbWJlcnNoaXBTZXJ2aWNlLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIEFjY291bnRIZWFkZXJDb250cm9sbGVyIGV4dGVuZHMgT3Jja2VzdHJhLkNvbXBvc2VyLkNvbnRyb2xsZXIge1xyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgbWVtYmVyc2hpcFNlcnZpY2U6IElNZW1iZXJzaGlwU2VydmljZSA9IG5ldyBNZW1iZXJzaGlwU2VydmljZShuZXcgTWVtYmVyc2hpcFJlcG9zaXRvcnkoKSk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKCkge1xyXG5cclxuICAgICAgICAgICAgc3VwZXIuaW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyU3Vic2NyaXB0aW9ucygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHJlZ2lzdGVyU3Vic2NyaXB0aW9ucygpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBzY2hlZHVsZXIgPSBFdmVudFNjaGVkdWxlci5pbnN0YW5jZShNeUFjY291bnRFdmVudHNbTXlBY2NvdW50RXZlbnRzLkxvZ2dlZE91dF0pO1xyXG4gICAgICAgICAgICBzY2hlZHVsZXIuc2V0UG9zdEV2ZW50Q2FsbGJhY2soKGRhdGE6IGFueSkgPT4gdGhpcy5vbkxvZ2dlZE91dChkYXRhKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIG9uTG9nZ2VkT3V0KGRhdGE6IGFueSk6IFEuUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICAgICAgdmFyIHByb21pc2U6IFEuUHJvbWlzZTxhbnk+ID0gUS5mY2FsbCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmV3TG9jYXRpb24gPSBkZWNvZGVVUklDb21wb25lbnQoZGF0YS5SZXR1cm5VcmwpIHx8IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xyXG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2UobmV3TG9jYXRpb24pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGZ1bGxMb2dvdXQoYWN0aW9uQ29udGV4dDogSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0KSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgcmV0dXJuVXJsUXVlcnlTdHJpbmc6IHN0cmluZyA9ICdSZXR1cm5Vcmw9JztcclxuICAgICAgICAgICAgdmFyIHJldHVyblVybDogc3RyaW5nID0gJyc7XHJcblxyXG4gICAgICAgICAgICBhY3Rpb25Db250ZXh0LmV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICBpZiAod2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZihyZXR1cm5VcmxRdWVyeVN0cmluZykgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuVXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWYuc3Vic3RyaW5nKHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluZGV4T2YocmV0dXJuVXJsUXVlcnlTdHJpbmcpXHJcbiAgICAgICAgICAgICAgICAgICAgKyByZXR1cm5VcmxRdWVyeVN0cmluZy5sZW5ndGgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgYnVzeSA9IHRoaXMuYXN5bmNCdXN5KHtlbGVtZW50Q29udGV4dDogYWN0aW9uQ29udGV4dC5lbGVtZW50Q29udGV4dH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5tZW1iZXJzaGlwU2VydmljZS5sb2dvdXQocmV0dXJuVXJsLCBmYWxzZSlcclxuICAgICAgICAgICAgICAgIC50aGVuKHJlc3VsdCA9PiB0aGlzLmV2ZW50SHViLnB1Ymxpc2goTXlBY2NvdW50RXZlbnRzW015QWNjb3VudEV2ZW50cy5Mb2dnZWRPdXRdLCB7IGRhdGE6IHJlc3VsdCB9KSlcclxuICAgICAgICAgICAgICAgIC5maW4oKCkgPT4gYnVzeS5kb25lKCkpXHJcbiAgICAgICAgICAgICAgICAuZG9uZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9Db250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L2pxdWVyeVBsdWdpbnMvSVNlcmlhbGl6ZU9iamVjdEpxdWVyeVBsdWdpbi50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBNeUFjY291bnRDb250cm9sbGVyIGV4dGVuZHMgT3Jja2VzdHJhLkNvbXBvc2VyLkNvbnRyb2xsZXIge1xyXG5cclxuICAgICAgICBwdWJsaWMgaW5pdGlhbGl6ZSgpIHtcclxuICAgICAgICAgICAgc3VwZXIuaW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGdldEZvcm1EYXRhKGFjdGlvbkNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCk6IGFueSB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gKDxJU2VyaWFsaXplT2JqZWN0SnF1ZXJ5UGx1Z2luPmFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHQpLnNlcmlhbGl6ZU9iamVjdCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHJlbmRlckZvcm1FcnJvck1lc3NhZ2VzKHJlYXNvbjogYW55KTogdm9pZCB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcignRm9ybUVycm9yTWVzc2FnZXMnLCByZWFzb24pO1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRleHQuY29udGFpbmVyLmZpbmQoJ2lucHV0W3R5cGU9XCJwYXNzd29yZFwiXScpLnZhbCgnJyk7XHJcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJGb3Jtc0ZvclZhbGlkYXRpb24odGhpcy5jb250ZXh0LmNvbnRhaW5lci5maW5kKCdmb3JtJyksIHtcclxuICAgICAgICAgICAgICAgIHNlcnZlclZhbGlkYXRpb25Db250YWluZXI6ICdbZGF0YS10ZW1wbGF0ZWlkPVwiRm9ybUVycm9yTWVzc2FnZXNcIl0nXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9Db250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9JQ29udHJvbGxlckFjdGlvbkNvbnRleHQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvanF1ZXJ5UGx1Z2lucy9JU2VyaWFsaXplT2JqZWN0SnF1ZXJ5UGx1Z2luLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NvbW1vbi9Tb3VyY2UvVHlwZXNjcmlwdC9DdXN0b21lclNlcnZpY2UudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ29tbW9uL1NvdXJjZS9UeXBlc2NyaXB0L015QWNjb3VudEV2ZW50cy50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21tb24vU291cmNlL1R5cGVzY3JpcHQvTXlBY2NvdW50U3RhdHVzLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL015QWNjb3VudC9Tb3VyY2UvVHlwZXNjcmlwdC9NeUFjY291bnRDb250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L1VJL1VJTW9kYWwudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuXHJcbiAgICAvL1RPRE8gcmVmYWN0b3IgbW9kYWwgOiBjcmVhdGUgYSBnZW5lcmljIG1vZGFsIHNlcnZpY2VcclxuICAgIGV4cG9ydCBjbGFzcyBBZGRyZXNzTGlzdENvbnRyb2xsZXIgZXh0ZW5kcyBPcmNrZXN0cmEuQ29tcG9zZXIuTXlBY2NvdW50Q29udHJvbGxlciB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgZGVsZXRlTW9kYWxFbGVtZW50U2VsZWN0b3I6IHN0cmluZz0gJyNjb25maXJtYXRpb25Nb2RhbCc7XHJcbiAgICAgICAgcHJpdmF0ZSB1aU1vZGFsOiBVSU1vZGFsO1xyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgY3VzdG9tZXJTZXJ2aWNlOiBJQ3VzdG9tZXJTZXJ2aWNlID0gbmV3IEN1c3RvbWVyU2VydmljZShuZXcgQ3VzdG9tZXJSZXBvc2l0b3J5KCkpO1xyXG5cclxuICAgICAgICBwdWJsaWMgaW5pdGlhbGl6ZSgpIHtcclxuXHJcbiAgICAgICAgICAgIHN1cGVyLmluaXRpYWxpemUoKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMudWlNb2RhbCA9IG5ldyBVSU1vZGFsKHdpbmRvdywgdGhpcy5kZWxldGVNb2RhbEVsZW1lbnRTZWxlY3RvciwgdGhpcy5kZWxldGVBZGRyZXNzLCB0aGlzKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJTdWJzY3JpcHRpb25zKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgcmVnaXN0ZXJTdWJzY3JpcHRpb25zKCkge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5zdWJzY3JpYmUoTXlBY2NvdW50RXZlbnRzW015QWNjb3VudEV2ZW50cy5BZGRyZXNzRGVsZXRlZF0sIGUgPT4gdGhpcy5vbkFkZHJlc3NEZWxldGVkKGUpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgb25BZGRyZXNzRGVsZXRlZChlOiBJRXZlbnRJbmZvcm1hdGlvbikge1xyXG5cclxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGUuZGF0YTtcclxuICAgICAgICAgICAgdmFyICRjb250YWluZXIgPSByZXN1bHQuJGNvbnRhaW5lcjtcclxuICAgICAgICAgICAgJGNvbnRhaW5lci5yZW1vdmUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICogUmVxdWlyZXMgdGhlIGVsZW1lbnQgaW4gYWN0aW9uIGNvbnRleHQgdG8gaGF2ZSBhIGRhdGEtYWRkcmVzcy1pZC5cclxuICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzZXREZWZhdWx0QWRkcmVzcyhhY3Rpb25Db250ZXh0OiBJQ29udHJvbGxlckFjdGlvbkNvbnRleHQpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgICAgIHZhciAkYWRkcmVzc0xpc3RJdGVtOiBKUXVlcnkgPSAkKGFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHQpLmNsb3Nlc3QoJ1tkYXRhLWFkZHJlc3MtaWRdJyk7XHJcbiAgICAgICAgICAgIHZhciBhZGRyZXNzSWQgPSAkYWRkcmVzc0xpc3RJdGVtLmRhdGEoJ2FkZHJlc3MtaWQnKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBidXN5ID0gdGhpcy5hc3luY0J1c3koeyBlbGVtZW50Q29udGV4dDogYWN0aW9uQ29udGV4dC5lbGVtZW50Q29udGV4dCwgY29udGFpbmVyQ29udGV4dDogJGFkZHJlc3NMaXN0SXRlbSB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY3VzdG9tZXJTZXJ2aWNlLnNldERlZmF1bHRBZGRyZXNzKGFkZHJlc3NJZC50b1N0cmluZygpLCAnJylcclxuICAgICAgICAgICAgICAgIC50aGVuKHJlc3VsdCA9PiBsb2NhdGlvbi5yZWxvYWQoKSwgcmVhc29uID0+IGNvbnNvbGUuZXJyb3IocmVhc29uKSlcclxuICAgICAgICAgICAgICAgIC5maW4oKCkgPT4gYnVzeS5kb25lKCkpXHJcbiAgICAgICAgICAgICAgICAuZG9uZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgKiBSZXF1aXJlcyB0aGUgZWxlbWVudCBpbiBhY3Rpb24gY29udGV4dCB0byBoYXZlIGEgZGF0YS1hZGRyZXNzLWlkLlxyXG4gICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGRlbGV0ZUFkZHJlc3MoZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0KTogdm9pZCB7XHJcbiAgICAgICAgICAgIGxldCBlbGVtZW50ID0gJChldmVudC50YXJnZXQpO1xyXG4gICAgICAgICAgICB2YXIgJGFkZHJlc3NMaXN0SXRlbTogSlF1ZXJ5ID0gZWxlbWVudC5jbG9zZXN0KCdbZGF0YS1hZGRyZXNzLWlkXScpO1xyXG4gICAgICAgICAgICB2YXIgYWRkcmVzc0lkID0gJGFkZHJlc3NMaXN0SXRlbS5kYXRhKCdhZGRyZXNzLWlkJyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgYnVzeSA9IHRoaXMuYXN5bmNCdXN5KHsgZWxlbWVudENvbnRleHQ6IGVsZW1lbnQsIGNvbnRhaW5lckNvbnRleHQ6ICRhZGRyZXNzTGlzdEl0ZW0gfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmN1c3RvbWVyU2VydmljZS5kZWxldGVBZGRyZXNzKGFkZHJlc3NJZCwgJycpXHJcbiAgICAgICAgICAgICAgICAudGhlbihyZXN1bHQgPT4gdGhpcy5vbkRlbGV0ZUFkZHJlc3NGdWxmaWxsZWQocmVzdWx0LCAkYWRkcmVzc0xpc3RJdGVtKSwgcmVhc29uID0+IGNvbnNvbGUuZXJyb3IocmVhc29uKSlcclxuICAgICAgICAgICAgICAgIC5maW4oKCkgPT4gYnVzeS5kb25lKCkpXHJcbiAgICAgICAgICAgICAgICAuZG9uZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBvbkRlbGV0ZUFkZHJlc3NGdWxmaWxsZWQocmVzdWx0OiBhbnksICRhZGRyZXNzTGlzdEl0ZW06IEpRdWVyeSk6IHZvaWQge1xyXG5cclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICByZXN1bHQ6IHJlc3VsdCxcclxuICAgICAgICAgICAgICAgICRjb250YWluZXI6ICRhZGRyZXNzTGlzdEl0ZW1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaChNeUFjY291bnRFdmVudHNbTXlBY2NvdW50RXZlbnRzLkFkZHJlc3NEZWxldGVkXSwgeyBkYXRhOiBkYXRhIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGRlbGV0ZUFkZHJlc3NDb25maXJtKGFjdGlvbkNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCkge1xyXG4gICAgICAgICAgICAgdGhpcy51aU1vZGFsLm9wZW5Nb2RhbChhY3Rpb25Db250ZXh0LmV2ZW50KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvQ29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NvbW1vbi9Tb3VyY2UvVHlwZXNjcmlwdC9NZW1iZXJzaGlwU2VydmljZS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21tb24vU291cmNlL1R5cGVzY3JpcHQvTXlBY2NvdW50RXZlbnRzLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL015QWNjb3VudC9Tb3VyY2UvVHlwZXNjcmlwdC9NeUFjY291bnRDb250cm9sbGVyLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIENoYW5nZVBhc3N3b3JkQ29udHJvbGxlciBleHRlbmRzIE9yY2tlc3RyYS5Db21wb3Nlci5NeUFjY291bnRDb250cm9sbGVyIHtcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG1lbWJlcnNoaXBTZXJ2aWNlOiBJTWVtYmVyc2hpcFNlcnZpY2UgPSBuZXcgTWVtYmVyc2hpcFNlcnZpY2UobmV3IE1lbWJlcnNoaXBSZXBvc2l0b3J5KCkpO1xyXG5cclxuICAgICAgICBwdWJsaWMgaW5pdGlhbGl6ZSgpIHtcclxuXHJcbiAgICAgICAgICAgIHN1cGVyLmluaXRpYWxpemUoKTtcclxuICAgICAgICAgICAgdGhpcy5yZWdpc3RlclN1YnNjcmlwdGlvbnMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCByZWdpc3RlclN1YnNjcmlwdGlvbnMoKSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyRm9ybXNGb3JWYWxpZGF0aW9uKHRoaXMuY29udGV4dC5jb250YWluZXIuZmluZCgnZm9ybScpKTtcclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5zdWJzY3JpYmUoTXlBY2NvdW50RXZlbnRzW015QWNjb3VudEV2ZW50cy5QYXNzd29yZENoYW5nZWRdLCBlID0+IHRoaXMub25QYXNzd29yZENoYW5nZWQoZSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBvblBhc3N3b3JkQ2hhbmdlZChlOiBJRXZlbnRJbmZvcm1hdGlvbik6IHZvaWQge1xyXG5cclxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGUuZGF0YTtcclxuXHJcbiAgICAgICAgICAgIGlmIChyZXN1bHQuUmV0dXJuVXJsKSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZShkZWNvZGVVUklDb21wb25lbnQocmVzdWx0LlJldHVyblVybCkpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKCdDaGFuZ2VQYXNzd29yZCcsIHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlZ2lzdGVyRm9ybXNGb3JWYWxpZGF0aW9uKHRoaXMuY29udGV4dC5jb250YWluZXIuZmluZCgnZm9ybScpLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VydmVyVmFsaWRhdGlvbkNvbnRhaW5lcjogJ1tkYXRhLXRlbXBsYXRlaWQ9XCJDaGFuZ2VQYXNzd29yZFN1Y2Nlc3NmdWxcIl0nXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRXZlbnQgdHJpZ2dlcmVkIHdoZW4gc3VibWl0dGluZyB0aGUgY2hhbmdlIHBhc3N3b3JkIGZvcm0uXHJcbiAgICAgICAgICogQHBhcmFtIHtJQ29udHJvbGxlckFjdGlvbkNvbnRleHR9IGFjdGlvbkNvbnRleHQgLSBFdmVudCBjb250ZXh0LlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBjaGFuZ2VQYXNzd29yZChhY3Rpb25Db250ZXh0OiBJQ29udHJvbGxlckFjdGlvbkNvbnRleHQpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgICAgIGFjdGlvbkNvbnRleHQuZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBmb3JtRGF0YTogYW55ID0gdGhpcy5nZXRGb3JtRGF0YShhY3Rpb25Db250ZXh0KTtcclxuICAgICAgICAgICAgdmFyIHJldHVyblVybFF1ZXJ5U3RyaW5nOiBzdHJpbmcgPSAnUmV0dXJuVXJsPSc7XHJcbiAgICAgICAgICAgIHZhciByZXR1cm5Vcmw6IHN0cmluZyA9ICcnO1xyXG5cclxuICAgICAgICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluZGV4T2YocmV0dXJuVXJsUXVlcnlTdHJpbmcpID4gLTEpIHtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm5VcmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZi5zdWJzdHJpbmcod2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZihyZXR1cm5VcmxRdWVyeVN0cmluZylcclxuICAgICAgICAgICAgICAgICAgICArIHJldHVyblVybFF1ZXJ5U3RyaW5nLmxlbmd0aCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBidXN5ID0gdGhpcy5hc3luY0J1c3koe2VsZW1lbnRDb250ZXh0OiBhY3Rpb25Db250ZXh0LmVsZW1lbnRDb250ZXh0fSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLm1lbWJlcnNoaXBTZXJ2aWNlLmNoYW5nZVBhc3N3b3JkKGZvcm1EYXRhLCByZXR1cm5VcmwpXHJcbiAgICAgICAgICAgICAgICAudGhlbihyZXN1bHQgPT4gdGhpcy5vbkNoYW5nZVBhc3N3b3JkRnVsZmlsbGVkKHJlc3VsdCksIHJlYXNvbiA9PiB0aGlzLnJlbmRlckZvcm1FcnJvck1lc3NhZ2VzKHJlYXNvbikpXHJcbiAgICAgICAgICAgICAgICAuZmluKCgpID0+IGJ1c3kuZG9uZSgpKVxyXG4gICAgICAgICAgICAgICAgLmRvbmUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgb25DaGFuZ2VQYXNzd29yZEZ1bGZpbGxlZChyZXN1bHQ6IGFueSk6IHZvaWQge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKE15QWNjb3VudEV2ZW50c1tNeUFjY291bnRFdmVudHMuUGFzc3dvcmRDaGFuZ2VkXSwgeyBkYXRhOiByZXN1bHQgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG5cclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBleHBvcnQgdmFyIHVybEhlbHBlciA9IHtcclxuICAgICAgIGdldFVSTFBhcmFtZXRlcjogZnVuY3Rpb24odXJsLCBuYW1lKSA6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudCgobmV3IFJlZ0V4cCgnWz98Jl0nICsgbmFtZVxyXG4gICAgICAgICAgICArICc9JyArICcoW14mO10rPykoJnwjfDt8JCknKS5leGVjKHVybCkgfHwgWywgJyddKVsxXS5yZXBsYWNlKC9cXCsvZywgJyUyMCcpKSB8fCBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvQ29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L1V0aWxzL1VybEhlbHBlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21tb24vU291cmNlL1R5cGVzY3JpcHQvTWVtYmVyc2hpcFNlcnZpY2UudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ29tbW9uL1NvdXJjZS9UeXBlc2NyaXB0L015QWNjb3VudEV2ZW50cy50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21tb24vU291cmNlL1R5cGVzY3JpcHQvTXlBY2NvdW50U3RhdHVzLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL015QWNjb3VudC9Tb3VyY2UvVHlwZXNjcmlwdC9NeUFjY291bnRDb250cm9sbGVyLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIENyZWF0ZUFjY291bnRDb250cm9sbGVyIGV4dGVuZHMgT3Jja2VzdHJhLkNvbXBvc2VyLk15QWNjb3VudENvbnRyb2xsZXIge1xyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgbWVtYmVyc2hpcFNlcnZpY2U6IElNZW1iZXJzaGlwU2VydmljZSA9IG5ldyBNZW1iZXJzaGlwU2VydmljZShuZXcgTWVtYmVyc2hpcFJlcG9zaXRvcnkoKSk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKCkge1xyXG5cclxuICAgICAgICAgICAgc3VwZXIuaW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyU3Vic2NyaXB0aW9ucygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHJlZ2lzdGVyU3Vic2NyaXB0aW9ucygpIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJGb3Jtc0ZvclZhbGlkYXRpb24odGhpcy5jb250ZXh0LmNvbnRhaW5lci5maW5kKCdmb3JtJykpO1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnN1YnNjcmliZShNeUFjY291bnRFdmVudHNbTXlBY2NvdW50RXZlbnRzLkFjY291bnRDcmVhdGVkXSwgZSA9PiB0aGlzLm9uQWNjb3VudENyZWF0ZWQoZSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBvbkFjY291bnRDcmVhdGVkKGU6IElFdmVudEluZm9ybWF0aW9uKTogdm9pZCB7XHJcblxyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gZS5kYXRhO1xyXG5cclxuICAgICAgICAgICAgaWYgKHJlc3VsdC5SZXR1cm5VcmwpIHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKGRlY29kZVVSSUNvbXBvbmVudChyZXN1bHQuUmV0dXJuVXJsKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcignQ3JlYXRlQWNjb3VudCcsIHJlc3VsdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBjcmVhdGVBY2NvdW50KGFjdGlvbkNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCkge1xyXG5cclxuICAgICAgICAgICAgYWN0aW9uQ29udGV4dC5ldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGZvcm1EYXRhOiBhbnkgPSB0aGlzLmdldEZvcm1EYXRhKGFjdGlvbkNvbnRleHQpO1xyXG4gICAgICAgICAgICB2YXIgcmV0dXJuVXJsUXVlcnlTdHJpbmc6IHN0cmluZyA9ICdSZXR1cm5Vcmw9JztcclxuICAgICAgICAgICAgdmFyIHJldHVyblVybDogc3RyaW5nID0gJyc7XHJcblxyXG4gICAgICAgICAgICBpZiAod2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZihyZXR1cm5VcmxRdWVyeVN0cmluZykgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuVXJsID0gdXJsSGVscGVyLmdldFVSTFBhcmFtZXRlcihsb2NhdGlvbi5zZWFyY2gsICdSZXR1cm5VcmwnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGJ1c3kgPSB0aGlzLmFzeW5jQnVzeSh7IGVsZW1lbnRDb250ZXh0OiBhY3Rpb25Db250ZXh0LmVsZW1lbnRDb250ZXh0IH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5tZW1iZXJzaGlwU2VydmljZS5yZWdpc3Rlcihmb3JtRGF0YSwgcmV0dXJuVXJsKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4ocmVzdWx0ID0+IHRoaXMub25SZWdpc3RlckZ1bGZpbGxlZChyZXN1bHQpLCByZWFzb24gPT4gdGhpcy5yZW5kZXJGb3JtRXJyb3JNZXNzYWdlcyhyZWFzb24pKVxyXG4gICAgICAgICAgICAgICAgLmZpbigoKSA9PiBidXN5LmRvbmUoKSlcclxuICAgICAgICAgICAgICAgIC5kb25lKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIG9uUmVnaXN0ZXJGdWxmaWxsZWQocmVzdWx0OiBhbnkpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaChNeUFjY291bnRFdmVudHNbTXlBY2NvdW50RXZlbnRzLkFjY291bnRDcmVhdGVkXSwgeyBkYXRhOiByZXN1bHQgfSk7XHJcbiAgICAgICAgICAgIGlmIChyZXN1bHQuU3RhdHVzID09PSBNeUFjY291bnRTdGF0dXNbTXlBY2NvdW50U3RhdHVzLlN1Y2Nlc3NdKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goTXlBY2NvdW50RXZlbnRzW015QWNjb3VudEV2ZW50cy5Mb2dnZWRJbl0sIHsgZGF0YTogcmVzdWx0IH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0NvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0lDb250cm9sbGVyQWN0aW9uQ29udGV4dC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9qcXVlcnlQbHVnaW5zL0lTZXJpYWxpemVPYmplY3RKcXVlcnlQbHVnaW4udHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvVXRpbHMvVXJsSGVscGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L0pRdWVyeVBsdWdpbnMvSVBhcnNsZXlKcXVlcnlQbHVnaW4udHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvVmFsaWRhdGlvbi9JUGFyc2xleS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21tb24vU291cmNlL1R5cGVzY3JpcHQvQ3VzdG9tZXJTZXJ2aWNlLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NvbW1vbi9Tb3VyY2UvVHlwZXNjcmlwdC9NeUFjY291bnRFdmVudHMudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vTXlBY2NvdW50L1NvdXJjZS9UeXBlc2NyaXB0L015QWNjb3VudENvbnRyb2xsZXIudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgRWRpdEFkZHJlc3NDb250cm9sbGVyIGV4dGVuZHMgT3Jja2VzdHJhLkNvbXBvc2VyLk15QWNjb3VudENvbnRyb2xsZXIge1xyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgX2Zvcm1JbnN0YW5jZXM6IElQYXJzbGV5W107XHJcbiAgICAgICAgcHJvdGVjdGVkIGN1c3RvbWVyU2VydmljZTogSUN1c3RvbWVyU2VydmljZSA9IG5ldyBDdXN0b21lclNlcnZpY2UobmV3IEN1c3RvbWVyUmVwb3NpdG9yeSgpKTtcclxuXHJcbiAgICAgICAgcHVibGljIGluaXRpYWxpemUoKSB7XHJcblxyXG4gICAgICAgICAgICBzdXBlci5pbml0aWFsaXplKCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJTdWJzY3JpcHRpb25zKCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgYnVzeSA9IHRoaXMuYXN5bmNCdXN5KHsgbXNEZWxheTogMzAwLCBsb2FkaW5nSW5kaWNhdG9yU2VsZWN0b3I6ICcubG9hZGluZy1pbmRpY2F0b3ItcmVnaW9ucycgfSk7XHJcblxyXG4gICAgICAgICAgICBDb21wb3NlckNsaWVudC5nZXQoJy9hcGkvYWRkcmVzcy9yZWdpb25zJylcclxuICAgICAgICAgICAgICAgIC50aGVuKHJlZ2lvbnMgPT4gdGhpcy5yZWJ1aWxkUmVnaW9uU2VsZWN0b3IocmVnaW9ucykpXHJcbiAgICAgICAgICAgICAgICAuZG9uZSgoKSA9PiBidXN5LmRvbmUoKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgcmVnaXN0ZXJTdWJzY3JpcHRpb25zKCkge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5yZWdpc3RlckZvcm1zRm9yVmFsaWRhdGlvbih0aGlzLmNvbnRleHQuY29udGFpbmVyLmZpbmQoJ2Zvcm0nKSk7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIuc3Vic2NyaWJlKE15QWNjb3VudEV2ZW50c1tNeUFjY291bnRFdmVudHMuQWRkcmVzc0NyZWF0ZWRdLCBlID0+IHRoaXMub25BZGRyZXNzQ3JlYXRlZE9yVXBkYXRlZChlKSk7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIuc3Vic2NyaWJlKE15QWNjb3VudEV2ZW50c1tNeUFjY291bnRFdmVudHMuQWRkcmVzc1VwZGF0ZWRdLCBlID0+IHRoaXMub25BZGRyZXNzQ3JlYXRlZE9yVXBkYXRlZChlKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIG9uQWRkcmVzc0NyZWF0ZWRPclVwZGF0ZWQoZTogSUV2ZW50SW5mb3JtYXRpb24pIHtcclxuXHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBlLmRhdGE7XHJcblxyXG4gICAgICAgICAgICBpZiAocmVzdWx0LlJldHVyblVybCkge1xyXG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2UoZGVjb2RlVVJJQ29tcG9uZW50KHJlc3VsdC5SZXR1cm5VcmwpKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcignRWRpdEFkZHJlc3MnLCByZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWdpc3RlckZvcm1zRm9yVmFsaWRhdGlvbih0aGlzLmNvbnRleHQuY29udGFpbmVyLmZpbmQoJ2Zvcm0nKSwge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlcnZlclZhbGlkYXRpb25Db250YWluZXI6ICdbZGF0YS10ZW1wbGF0ZWlkPVwiRm9ybUVycm9yTWVzc2FnZXNcIl0nXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmVyZW5kZXIgdGhlIHJlZ2lvbiBzZWxlY3Rvciwga2VlcGluZyB0aGUgY3VycmVudGx5IHNlbGVjdGVkIHZhbHVlXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSByZWJ1aWxkUmVnaW9uU2VsZWN0b3IocmVnaW9uczogYW55KSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRSZWdpb246IHN0cmluZyA9IHRoaXMuY29udGV4dC5jb250YWluZXIuZmluZCgnW2RhdGEtdGVtcGxhdGVpZD1cIkFkZHJlc3NSZWdpb25QaWNrZXJcIl0nKS52YWwoKTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXIoJ0FkZHJlc3NSZWdpb25QaWNrZXInLCB7IFJlZ2lvbnM6IHJlZ2lvbnMsIFNlbGVjdGVkUmVnaW9uIDogc2VsZWN0ZWRSZWdpb259KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBhZGp1c3RQb3N0YWxDb2RlKGFjdGlvbkNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCk6IHZvaWQge1xyXG5cclxuICAgICAgICAgICAgYWN0aW9uQ29udGV4dC5lbGVtZW50Q29udGV4dC52YWwoYWN0aW9uQ29udGV4dC5lbGVtZW50Q29udGV4dC52YWwoKS50b1VwcGVyQ2FzZSgpKTtcclxuICAgICAgICAgICAgXy5hbGwodGhpcy5fZm9ybUluc3RhbmNlcywgZm9ybUluc3RhbmNlID0+IGZvcm1JbnN0YW5jZS52YWxpZGF0ZSgnc2hpcHBpbmctYmFzZWQtb24nLCB0cnVlKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgY3JlYXRlQWRkcmVzcyhhY3Rpb25Db250ZXh0OiBJQ29udHJvbGxlckFjdGlvbkNvbnRleHQpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgICAgIGFjdGlvbkNvbnRleHQuZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBmb3JtRGF0YTogYW55ID0gdGhpcy5nZXRGb3JtRGF0YShhY3Rpb25Db250ZXh0KTtcclxuICAgICAgICAgICAgdmFyIHJldHVyblVybFF1ZXJ5U3RyaW5nOiBzdHJpbmcgPSAnUmV0dXJuVXJsPSc7XHJcbiAgICAgICAgICAgIHZhciByZXR1cm5Vcmw6IHN0cmluZyA9ICcnO1xyXG5cclxuICAgICAgICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluZGV4T2YocmV0dXJuVXJsUXVlcnlTdHJpbmcpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgIHJldHVyblVybCA9IHVybEhlbHBlci5nZXRVUkxQYXJhbWV0ZXIobG9jYXRpb24uc2VhcmNoLCAnUmV0dXJuVXJsJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBidXN5ID0gdGhpcy5hc3luY0J1c3koe2VsZW1lbnRDb250ZXh0OiBhY3Rpb25Db250ZXh0LmVsZW1lbnRDb250ZXh0fSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmN1c3RvbWVyU2VydmljZS5jcmVhdGVBZGRyZXNzKGZvcm1EYXRhLCByZXR1cm5VcmwpXHJcbiAgICAgICAgICAgICAgICAudGhlbihyZXN1bHQgPT4gdGhpcy5vbkNyZWF0ZUFkZHJlc3NGdWxmaWxsZWQocmVzdWx0KSwgcmVhc29uID0+IHRoaXMucmVuZGVyRm9ybUVycm9yTWVzc2FnZXMocmVhc29uKSlcclxuICAgICAgICAgICAgICAgIC5maW4oKCkgPT4gYnVzeS5kb25lKCkpXHJcbiAgICAgICAgICAgICAgICAuZG9uZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBvbkNyZWF0ZUFkZHJlc3NGdWxmaWxsZWQocmVzdWx0OiBhbnkpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaChNeUFjY291bnRFdmVudHNbTXlBY2NvdW50RXZlbnRzLkFkZHJlc3NDcmVhdGVkXSwgeyBkYXRhOiByZXN1bHQgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdXBkYXRlQWRkcmVzcyhhY3Rpb25Db250ZXh0OiBJQ29udHJvbGxlckFjdGlvbkNvbnRleHQpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgICAgIGFjdGlvbkNvbnRleHQuZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBmb3JtRGF0YTogYW55ID0gdGhpcy5nZXRGb3JtRGF0YShhY3Rpb25Db250ZXh0KTtcclxuICAgICAgICAgICAgdmFyIGFkZHJlc3NJZDogc3RyaW5nID0gdGhpcy5jb250ZXh0LmNvbnRhaW5lci5maW5kKCdbZGF0YS1hZGRyZXNzLWlkXScpLmRhdGEoJ2FkZHJlc3MtaWQnKS50b1N0cmluZygpO1xyXG4gICAgICAgICAgICB2YXIgcmV0dXJuVXJsUXVlcnlTdHJpbmc6IHN0cmluZyA9ICdSZXR1cm5Vcmw9JztcclxuICAgICAgICAgICAgdmFyIHJldHVyblVybDogc3RyaW5nID0gJyc7XHJcblxyXG4gICAgICAgICAgICBpZiAod2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZihyZXR1cm5VcmxRdWVyeVN0cmluZykgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuVXJsID0gdXJsSGVscGVyLmdldFVSTFBhcmFtZXRlcihsb2NhdGlvbi5zZWFyY2gsICdSZXR1cm5VcmwnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGJ1c3kgPSB0aGlzLmFzeW5jQnVzeSh7ZWxlbWVudENvbnRleHQ6IGFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHR9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY3VzdG9tZXJTZXJ2aWNlLnVwZGF0ZUFkZHJlc3MoZm9ybURhdGEsIGFkZHJlc3NJZCwgcmV0dXJuVXJsKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4ocmVzdWx0ID0+IHRoaXMub25VcGRhdGVBZGRyZXNzRnVsZmlsbGVkKHJlc3VsdCksIHJlYXNvbiA9PiB0aGlzLnJlbmRlckZvcm1FcnJvck1lc3NhZ2VzKHJlYXNvbikpXHJcbiAgICAgICAgICAgICAgICAuZmluKCgpID0+IGJ1c3kuZG9uZSgpKVxyXG4gICAgICAgICAgICAgICAgLmRvbmUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgb25VcGRhdGVBZGRyZXNzRnVsZmlsbGVkKHJlc3VsdDogYW55KTogdm9pZCB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goTXlBY2NvdW50RXZlbnRzW015QWNjb3VudEV2ZW50cy5BZGRyZXNzVXBkYXRlZF0sIHsgZGF0YTogcmVzdWx0IH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9Db250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9JQ29udHJvbGxlckFjdGlvbkNvbnRleHQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ29tbW9uL1NvdXJjZS9UeXBlc2NyaXB0L01lbWJlcnNoaXBTZXJ2aWNlLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NvbW1vbi9Tb3VyY2UvVHlwZXNjcmlwdC9NeUFjY291bnRFdmVudHMudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ29tbW9uL1NvdXJjZS9UeXBlc2NyaXB0L015QWNjb3VudFN0YXR1cy50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9NeUFjY291bnQvU291cmNlL1R5cGVzY3JpcHQvTXlBY2NvdW50Q29udHJvbGxlci50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBGb3Jnb3RQYXNzd29yZENvbnRyb2xsZXIgZXh0ZW5kcyBPcmNrZXN0cmEuQ29tcG9zZXIuTXlBY2NvdW50Q29udHJvbGxlciB7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBtZW1iZXJzaGlwU2VydmljZTogSU1lbWJlcnNoaXBTZXJ2aWNlID0gbmV3IE1lbWJlcnNoaXBTZXJ2aWNlKG5ldyBNZW1iZXJzaGlwUmVwb3NpdG9yeSgpKTtcclxuXHJcbiAgICAgICAgcHVibGljIGluaXRpYWxpemUoKSB7XHJcblxyXG4gICAgICAgICAgICBzdXBlci5pbml0aWFsaXplKCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJTdWJzY3JpcHRpb25zKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgcmVnaXN0ZXJTdWJzY3JpcHRpb25zKCkge1xyXG5cclxuICAgICAgICAgICB0aGlzLnJlZ2lzdGVyRm9ybXNGb3JWYWxpZGF0aW9uKHRoaXMuY29udGV4dC5jb250YWluZXIuZmluZCgnZm9ybScpKTtcclxuICAgICAgICAgICB0aGlzLmV2ZW50SHViLnN1YnNjcmliZShNeUFjY291bnRFdmVudHNbTXlBY2NvdW50RXZlbnRzLkZvcmdvdFBhc3N3b3JkSW5zdHJ1Y3Rpb25TZW50XSwgZSA9PiB0aGlzLm9uRm9yZ290UGFzc3dvcmRJbnN0cnVjdGlvblNlbnQoZSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBvbkZvcmdvdFBhc3N3b3JkSW5zdHJ1Y3Rpb25TZW50KGU6IElFdmVudEluZm9ybWF0aW9uKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gZS5kYXRhO1xyXG5cclxuICAgICAgICAgICAgaWYgKHJlc3VsdC5SZXR1cm5VcmwpIHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKGRlY29kZVVSSUNvbXBvbmVudChyZXN1bHQuUmV0dXJuVXJsKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcignRm9yZ290UGFzc3dvcmQnLCByZXN1bHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBFdmVudCB0cmlnZ2VyZWQgd2hlbiBzdWJtaXR0aW5nIHRoZSBmb3Jnb3QgcGFzc3dvcmQgZm9ybS5cclxuICAgICAgICAgKiBAcGFyYW0ge0lDb250cm9sbGVyQWN0aW9uQ29udGV4dH0gYWN0aW9uQ29udGV4dCAtIEV2ZW50IGNvbnRleHQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGZvcmdvdFBhc3N3b3JkKGFjdGlvbkNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCk6IHZvaWQge1xyXG5cclxuICAgICAgICAgICAgYWN0aW9uQ29udGV4dC5ldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGZvcm1EYXRhOiBhbnkgPSB0aGlzLmdldEZvcm1EYXRhKGFjdGlvbkNvbnRleHQpO1xyXG4gICAgICAgICAgICB2YXIgYnVzeSA9IHRoaXMuYXN5bmNCdXN5KHtlbGVtZW50Q29udGV4dDogYWN0aW9uQ29udGV4dC5lbGVtZW50Q29udGV4dH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5tZW1iZXJzaGlwU2VydmljZS5mb3Jnb3RQYXNzd29yZChmb3JtRGF0YSlcclxuICAgICAgICAgICAgICAgIC50aGVuKHJlc3VsdCA9PiB0aGlzLm9uRm9yZ290UGFzc3dvcmRGdWxmaWxsZWQocmVzdWx0KSwgcmVhc29uID0+IHRoaXMucmVuZGVyRm9ybUVycm9yTWVzc2FnZXMocmVhc29uKSlcclxuICAgICAgICAgICAgICAgIC5maW4oKCkgPT4gYnVzeS5kb25lKCkpXHJcbiAgICAgICAgICAgICAgICAuZG9uZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBvbkZvcmdvdFBhc3N3b3JkRnVsZmlsbGVkKHJlc3VsdDogYW55KTogdm9pZCB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goTXlBY2NvdW50RXZlbnRzW015QWNjb3VudEV2ZW50cy5Gb3Jnb3RQYXNzd29yZEluc3RydWN0aW9uU2VudF0sIHsgZGF0YTogcmVzdWx0IH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9Db250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9JQ29udHJvbGxlckFjdGlvbkNvbnRleHQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvanF1ZXJ5UGx1Z2lucy9JU2VyaWFsaXplT2JqZWN0SnF1ZXJ5UGx1Z2luLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NvbW1vbi9Tb3VyY2UvVHlwZXNjcmlwdC9NZW1iZXJzaGlwU2VydmljZS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21tb24vU291cmNlL1R5cGVzY3JpcHQvTXlBY2NvdW50RXZlbnRzLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL015QWNjb3VudC9Tb3VyY2UvVHlwZXNjcmlwdC9NeUFjY291bnRDb250cm9sbGVyLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIE5ld1Bhc3N3b3JkQ29udHJvbGxlciBleHRlbmRzIE9yY2tlc3RyYS5Db21wb3Nlci5NeUFjY291bnRDb250cm9sbGVyIHtcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG1lbWJlcnNoaXBTZXJ2aWNlOiBJTWVtYmVyc2hpcFNlcnZpY2UgPSBuZXcgTWVtYmVyc2hpcFNlcnZpY2UobmV3IE1lbWJlcnNoaXBSZXBvc2l0b3J5KCkpO1xyXG5cclxuICAgICAgICBwdWJsaWMgaW5pdGlhbGl6ZSgpIHtcclxuXHJcbiAgICAgICAgICAgIHN1cGVyLmluaXRpYWxpemUoKTtcclxuICAgICAgICAgICAgdGhpcy5yZWdpc3RlclN1YnNjcmlwdGlvbnMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCByZWdpc3RlclN1YnNjcmlwdGlvbnMoKSB7XHJcblxyXG4gICAgICAgICAgIHRoaXMucmVnaXN0ZXJGb3Jtc0ZvclZhbGlkYXRpb24odGhpcy5jb250ZXh0LmNvbnRhaW5lci5maW5kKCdmb3JtJykpO1xyXG4gICAgICAgICAgIHRoaXMuZXZlbnRIdWIuc3Vic2NyaWJlKE15QWNjb3VudEV2ZW50c1tNeUFjY291bnRFdmVudHMuUGFzc3dvcmRDaGFuZ2VkXSwgZSA9PiB0aGlzLm9uUGFzc3dvcmRDaGFuZ2VkKGUpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgb25QYXNzd29yZENoYW5nZWQoZTogSUV2ZW50SW5mb3JtYXRpb24pOiB2b2lkIHtcclxuXHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBlLmRhdGE7XHJcblxyXG4gICAgICAgICAgICBpZiAocmVzdWx0LlJldHVyblVybCkge1xyXG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2UoZGVjb2RlVVJJQ29tcG9uZW50KHJlc3VsdC5SZXR1cm5VcmwpKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKCdOZXdQYXNzd29yZCcsIHJlc3VsdCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEV2ZW50IHRyaWdnZXJlZCB3aGVuIHN1Ym1pdHRpbmcgdGhlIG5ldyBwYXNzd29yZCBmb3JtLlxyXG4gICAgICAgICAqIEBwYXJhbSB7SUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0fSBhY3Rpb25Db250ZXh0IC0gRXZlbnQgY29udGV4dC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgbmV3UGFzc3dvcmQoYWN0aW9uQ29udGV4dDogSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0KTogdm9pZCB7XHJcblxyXG4gICAgICAgICAgICBhY3Rpb25Db250ZXh0LmV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgZm9ybURhdGE6IGFueSA9IHRoaXMuZ2V0Rm9ybURhdGEoYWN0aW9uQ29udGV4dCk7XHJcbiAgICAgICAgICAgIHZhciByZXR1cm5VcmxRdWVyeVN0cmluZzogc3RyaW5nID0gJ1JldHVyblVybD0nO1xyXG4gICAgICAgICAgICB2YXIgdGlja2V0UXVlcnlTdHJpbmc6IHN0cmluZyA9ICd0aWNrZXQ9JztcclxuICAgICAgICAgICAgdmFyIHJldHVyblVybDogc3RyaW5nID0gJyc7XHJcbiAgICAgICAgICAgIHZhciB0aWNrZXQ6IHN0cmluZyA9ICcnO1xyXG5cclxuICAgICAgICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluZGV4T2YocmV0dXJuVXJsUXVlcnlTdHJpbmcpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgIHJldHVyblVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmLnN1YnN0cmluZyh3aW5kb3cubG9jYXRpb24uaHJlZi5pbmRleE9mKHJldHVyblVybFF1ZXJ5U3RyaW5nKVxyXG4gICAgICAgICAgICAgICAgICAgICsgcmV0dXJuVXJsUXVlcnlTdHJpbmcubGVuZ3RoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluZGV4T2YodGlja2V0UXVlcnlTdHJpbmcpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgIHRpY2tldCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmLnN1YnN0cmluZyh3aW5kb3cubG9jYXRpb24uaHJlZi5pbmRleE9mKHRpY2tldFF1ZXJ5U3RyaW5nKVxyXG4gICAgICAgICAgICAgICAgICAgICsgdGlja2V0UXVlcnlTdHJpbmcubGVuZ3RoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGJ1c3kgPSB0aGlzLmFzeW5jQnVzeSh7ZWxlbWVudENvbnRleHQ6IGFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHR9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMubWVtYmVyc2hpcFNlcnZpY2UucmVzZXRQYXNzd29yZChmb3JtRGF0YSwgdGlja2V0LCByZXR1cm5VcmwpXHJcbiAgICAgICAgICAgICAgICAudGhlbihyZXN1bHQgPT4gdGhpcy5vblJlc2V0UGFzc3dvcmRGdWxmaWxsZWQocmVzdWx0KSwgcmVhc29uID0+IHRoaXMucmVuZGVyRm9ybUVycm9yTWVzc2FnZXMocmVhc29uKSlcclxuICAgICAgICAgICAgICAgIC5maW4oKCkgPT4gYnVzeS5kb25lKCkpXHJcbiAgICAgICAgICAgICAgICAuZG9uZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBvblJlc2V0UGFzc3dvcmRGdWxmaWxsZWQocmVzdWx0OiBhbnkpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaChNeUFjY291bnRFdmVudHNbTXlBY2NvdW50RXZlbnRzLlBhc3N3b3JkQ2hhbmdlZF0sIHsgZGF0YTogcmVzdWx0IH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9Db250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L0V2ZW50cy9FdmVudFNjaGVkdWxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9DYWNoZS9DYWNoZVByb3ZpZGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NvbW1vbi9Tb3VyY2UvVHlwZXNjcmlwdC9NZW1iZXJzaGlwU2VydmljZS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21tb24vU291cmNlL1R5cGVzY3JpcHQvTXlBY2NvdW50RXZlbnRzLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NvbW1vbi9Tb3VyY2UvVHlwZXNjcmlwdC9NeUFjY291bnRTdGF0dXMudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIC8qKlxyXG4gICAgICogQ29udHJvbGxlciBmb3IgdGhlIENvdXBvbnMgc2VjdGlvbi5cclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGNsYXNzIFJldHVybmluZ0N1c3RvbWVyQ29udHJvbGxlciBleHRlbmRzIE9yY2tlc3RyYS5Db21wb3Nlci5Db250cm9sbGVyIHtcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG1lbWJlcnNoaXBTZXJ2aWNlOiBJTWVtYmVyc2hpcFNlcnZpY2UgPSBuZXcgTWVtYmVyc2hpcFNlcnZpY2UobmV3IE1lbWJlcnNoaXBSZXBvc2l0b3J5KCkpO1xyXG4gICAgICAgIHByb3RlY3RlZCBjYWNoZVByb3ZpZGVyOiBJQ2FjaGVQcm92aWRlciA9IENhY2hlUHJvdmlkZXIuaW5zdGFuY2UoKTtcclxuXHJcbiAgICAgICAgcHVibGljIGluaXRpYWxpemUoKSB7XHJcblxyXG4gICAgICAgICAgICBzdXBlci5pbml0aWFsaXplKCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJTdWJzY3JpcHRpb25zKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgcmVnaXN0ZXJTdWJzY3JpcHRpb25zKCkge1xyXG5cclxuICAgICAgICAgICB0aGlzLnJlZ2lzdGVyRm9ybXNGb3JWYWxpZGF0aW9uKHRoaXMuY29udGV4dC5jb250YWluZXIuZmluZCgnZm9ybScpKTtcclxuXHJcbiAgICAgICAgICAgdmFyIHNjaGVkdWxlciA9IEV2ZW50U2NoZWR1bGVyLmluc3RhbmNlKE15QWNjb3VudEV2ZW50c1tNeUFjY291bnRFdmVudHMuTG9nZ2VkSW5dKTtcclxuICAgICAgICAgICAgc2NoZWR1bGVyLnNldFBvc3RFdmVudENhbGxiYWNrKChkYXRhOiBhbnkpID0+IHRoaXMub25Mb2dnZWRJbihkYXRhKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIG9uTG9nZ2VkSW4oZGF0YTogYW55KTogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgdmFyIHByb21pc2U6IFEuUHJvbWlzZTxhbnk+ID0gUS5mY2FsbCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5SZXR1cm5VcmwpIHtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZShkZWNvZGVVUklDb21wb25lbnQoZGF0YS5SZXR1cm5VcmwpKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIoJ1JldHVybmluZ0N1c3RvbWVyJywgZGF0YSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJGb3Jtc0ZvclZhbGlkYXRpb24odGhpcy5jb250ZXh0LmNvbnRhaW5lci5maW5kKCdmb3JtJyksIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VydmVyVmFsaWRhdGlvbkNvbnRhaW5lcjogJ1tkYXRhLXRlbXBsYXRlaWQ9XCJSZXR1cm5pbmdDdXN0b21lckZvcm1zU2VydmVyVmFsaWRhdGlvbnNcIl0nXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBFdmVudCB0cmlnZ2VyZWQgd2hlbiBzdWJtaXR0aW5nIHRoZSBsb2dpbiBmb3JtLlxyXG4gICAgICAgICAqIEBwYXJhbSB7SUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0fSBhY3Rpb25Db250ZXh0IC0gRXZlbnQgY29udGV4dC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgbG9naW4oYWN0aW9uQ29udGV4dDogSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0KSB7XHJcblxyXG4gICAgICAgICAgICBhY3Rpb25Db250ZXh0LmV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgYnVzeTogVUlCdXN5SGFuZGxlID0gdGhpcy5hc3luY0J1c3koKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMubG9naW5JbXBsKGFjdGlvbkNvbnRleHQpXHJcbiAgICAgICAgICAgICAgICAudGhlbihyZXN1bHQgPT4gdGhpcy5vbkxvZ2luRnVsZmlsbGVkKHJlc3VsdCwgYnVzeSkpXHJcbiAgICAgICAgICAgICAgICAuZmFpbChyZWFzb24gPT4gdGhpcy5vbkxvZ2luUmVqZWN0ZWQocmVhc29uLCBidXN5KSlcclxuICAgICAgICAgICAgICAgIC5kb25lKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGxvZ2luSW1wbChhY3Rpb25Db250ZXh0OiBJQ29udHJvbGxlckFjdGlvbkNvbnRleHQpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICB2YXIgZm9ybURhdGE6IGFueSA9ICg8SVNlcmlhbGl6ZU9iamVjdEpxdWVyeVBsdWdpbj5hY3Rpb25Db250ZXh0LmVsZW1lbnRDb250ZXh0KS5zZXJpYWxpemVPYmplY3QoKTtcclxuICAgICAgICAgICAgdmFyIGhyZWY6IHN0cmluZyA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xyXG4gICAgICAgICAgICB2YXIgcmV0dXJuVXJsS2V5OiBzdHJpbmcgPSAnUmV0dXJuVXJsPSc7XHJcbiAgICAgICAgICAgIHZhciByZXR1cm5Vcmw6IHN0cmluZyA9IGhyZWYuaW5kZXhPZihyZXR1cm5VcmxLZXkpID4gLTEgPyBocmVmLnN1YnN0cmluZyhocmVmLmluZGV4T2YocmV0dXJuVXJsS2V5KSArIHJldHVyblVybEtleS5sZW5ndGgpIDogJyc7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tZW1iZXJzaGlwU2VydmljZS5sb2dpbihmb3JtRGF0YSwgcmV0dXJuVXJsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgb25Mb2dpbkZ1bGZpbGxlZChyZXN1bHQ6IGFueSwgYnVzeTogVUlCdXN5SGFuZGxlKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAocmVzdWx0LlN0YXR1cyA9PT0gTXlBY2NvdW50U3RhdHVzW015QWNjb3VudFN0YXR1cy5TdWNjZXNzXSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKE15QWNjb3VudEV2ZW50c1tNeUFjY291bnRFdmVudHMuTG9nZ2VkSW5dLCB7IGRhdGE6IHJlc3VsdCB9KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FjaGVQcm92aWRlci5kZWZhdWx0Q2FjaGUuc2V0KCdjdXN0b21lcklkJywgbnVsbCkuZG9uZSgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJGYWlsZWRGb3JtKHJlc3VsdC5TdGF0dXMpO1xyXG4gICAgICAgICAgICAgICAgYnVzeS5kb25lKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgb25Mb2dpblJlamVjdGVkKHJlYXNvbjogYW55LCBidXN5OiBVSUJ1c3lIYW5kbGUpIHtcclxuICAgICAgICAgICAgbGV0IGVycm9yQ29kZSA9IE15QWNjb3VudFN0YXR1c1tNeUFjY291bnRTdGF0dXMuQWpheEZhaWxlZF07XHJcbiAgICAgICAgICAgIGlmIChyZWFzb24gJiYgcmVhc29uLkVycm9ycyAmJiByZWFzb24uRXJyb3JzWzBdICYmIHJlYXNvbi5FcnJvcnNbMF0uRXJyb3JDb2RlKSB7XHJcbiAgICAgICAgICAgICAgICBlcnJvckNvZGUgPSByZWFzb24uRXJyb3JzWzBdLkVycm9yQ29kZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLnJlbmRlckZhaWxlZEZvcm0oZXJyb3JDb2RlKTtcclxuICAgICAgICAgICAgYnVzeS5kb25lKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZW5kZXIgdGhlIHRlbXBsYXRlIGZvciBtZXNzYWdlIGZhaWx1cmVzXHJcbiAgICAgICAgICogUmVnaXN0ZXIgRm9ybWF0IHZhbGlkYXRpb24gdG8gaGlkZSB0aG9zZSBzZXJ2ZXIgbWVzc2FnZSBvbiBjbGllbnQgaW50ZXJhY3Rpb25cclxuICAgICAgICAgKiBSZXNldCBwb3RlbnRpYWxseSB1bnNhZmUgZmllbGRzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSByZW5kZXJGYWlsZWRGb3JtKHN0YXR1czogc3RyaW5nKSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcignUmV0dXJuaW5nQ3VzdG9tZXJGb3Jtc1NlcnZlclZhbGlkYXRpb25zJywgeyBTdGF0dXM6IHN0YXR1cyB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY29udGV4dC5jb250YWluZXIuZmluZCgnaW5wdXRbdHlwZT1cInBhc3N3b3JkXCJdJykudmFsKCcnKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJGb3Jtc0ZvclZhbGlkYXRpb24odGhpcy5jb250ZXh0LmNvbnRhaW5lci5maW5kKCdmb3JtJyksIHtcclxuICAgICAgICAgICAgICAgIHNlcnZlclZhbGlkYXRpb25Db250YWluZXI6ICdbZGF0YS10ZW1wbGF0ZWlkPVwiUmV0dXJuaW5nQ3VzdG9tZXJGb3Jtc1NlcnZlclZhbGlkYXRpb25zXCJdJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNlcGFyYXRlcyB0aGUgbG9naWMgdGhhdCByZXRyaWV2ZXMgdGhlIGRhdGEgYW5kIG1hcHMgaXQgdG8gdGhlIGVudGl0eSBtb2RlbCBmcm9tIHRoZSBhcHBsaWNhdGlvbiBzZXJ2aWNlcyB0aGF0IGFjdHMgb24gdGhlIG1vZGVsLlxyXG4gICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSVNpZ25JbkhlYWRlclJlcG9zaXRvcnkge1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXQgdGhlIFNpZ25JbkhlYWRlclxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldFNpZ25JbkhlYWRlcihwYXJhbTogYW55KTogUS5Qcm9taXNlPGFueT47XHJcbiAgICB9XHJcbn0iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi8uLi9NdmMvQ29tcG9zZXJDbGllbnQudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4vSVNpZ25JbkhlYWRlclJlcG9zaXRvcnkudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgU2lnbkluSGVhZGVyUmVwb3NpdG9yeSBpbXBsZW1lbnRzIE9yY2tlc3RyYS5Db21wb3Nlci5JU2lnbkluSGVhZGVyUmVwb3NpdG9yeSB7XHJcblxyXG4gICAgICAgIHB1YmxpYyBnZXRTaWduSW5IZWFkZXIocGFyYW06IGFueSk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBDb21wb3NlckNsaWVudC5nZXQoJy9hcGkvbWVtYmVyc2hpcC9zaWduaW4nKTtcclxuICAgICAgICB9ICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L1JlcG9zaXRvcmllcy9TaWduSW5IZWFkZXJSZXBvc2l0b3J5LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0NhY2hlL0NhY2hlUHJvdmlkZXIudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgU2lnbkluSGVhZGVyU2VydmljZSB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgY2FjaGVLZXk6IHN0cmluZyA9ICdTaWduSW5IZWFkZXJWaWV3TW9kZWwnO1xyXG4gICAgICAgIHByaXZhdGUgY2FjaGVQb2xpY3k6IElDYWNoZVBvbGljeSA9IHsgc2xpZGluZ0V4cGlyYXRpb246IDMwMCB9OyAvLyA1bWluXHJcbiAgICAgICAgcHJpdmF0ZSBjYWNoZVByb3ZpZGVyOiBJQ2FjaGVQcm92aWRlcjtcclxuICAgICAgICBwcml2YXRlIHNpZ25JbkhlYWRlclJlcG9zaXRvcnk6IElTaWduSW5IZWFkZXJSZXBvc2l0b3J5O1xyXG5cclxuICAgICAgICBjb25zdHJ1Y3RvcihzaWduSW5IZWFkZXJSZXBvc2l0b3J5OiBJU2lnbkluSGVhZGVyUmVwb3NpdG9yeSkge1xyXG5cclxuICAgICAgICAgICAgaWYgKCFzaWduSW5IZWFkZXJSZXBvc2l0b3J5KSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Vycm9yOiBzaWduSW5IZWFkZXJSZXBvc2l0b3J5IGlzIHJlcXVpcmVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuY2FjaGVQcm92aWRlciA9IENhY2hlUHJvdmlkZXIuaW5zdGFuY2UoKTtcclxuICAgICAgICAgICAgdGhpcy5zaWduSW5IZWFkZXJSZXBvc2l0b3J5ID0gc2lnbkluSGVhZGVyUmVwb3NpdG9yeTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBnZXRTaWduSW5IZWFkZXIocGFyYW06IGFueSk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFNpZ25JbkhlYWRlckZyb21DYWNoZShwYXJhbSlcclxuICAgICAgICAgICAgICAgIC5mYWlsKHJlYXNvbiA9PiB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmNhbkhhbmRsZShyZWFzb24pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEZyZXNoU2lnbkluSGVhZGVyKHBhcmFtKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IHJlYXNvbjtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBjYW5IYW5kbGUocmVhc29uOiBhbnkpOiBib29sZWFuIHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiByZWFzb24gPT09IENhY2hlRXJyb3IuRXhwaXJlZCB8fCByZWFzb24gPT09IENhY2hlRXJyb3IuTm90Rm91bmQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZ2V0RnJlc2hTaWduSW5IZWFkZXIocGFyYW06IGFueSk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNpZ25JbkhlYWRlclJlcG9zaXRvcnkuZ2V0U2lnbkluSGVhZGVyKHBhcmFtKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oY2FydCA9PiB0aGlzLnNldFNpZ25JbkhlYWRlclRvQ2FjaGUocGFyYW0sIGNhcnQpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBidWlsZFNpZ25lZEluQ2FjaGVLZXkocGFyYW06IGFueSk6IHN0cmluZyB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jYWNoZUtleSArICcuJyArIHBhcmFtLmN1bHR1cmVJbmZvICsgJy4nICsgcGFyYW0uaXNBdXRoZW50aWNhdGVkICsgJy4nICsgcGFyYW0uZW5jcnlwdGVkQ3VzdG9tZXJJZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbnZhbGlkYXRlQ2FjaGUoKTogUS5Qcm9taXNlPHZvaWQ+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNhY2hlUHJvdmlkZXIuY3VzdG9tQ2FjaGUuZnVsbENsZWFyKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGdldFNpZ25JbkhlYWRlckZyb21DYWNoZShwYXJhbTogYW55KTogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgdmFyIGNvbXBvc2VkS2V5ID0gdGhpcy5idWlsZFNpZ25lZEluQ2FjaGVLZXkocGFyYW0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGVQcm92aWRlci5jdXN0b21DYWNoZS5nZXQ8YW55Pihjb21wb3NlZEtleSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHNldFNpZ25JbkhlYWRlclRvQ2FjaGUocGFyYW06IGFueSwgY2FydDogYW55KTogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgdmFyIGNvbXBvc2VkS2V5ID0gdGhpcy5idWlsZFNpZ25lZEluQ2FjaGVLZXkocGFyYW0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGVQcm92aWRlci5jdXN0b21DYWNoZS5zZXQoY29tcG9zZWRLZXksIGNhcnQsIHRoaXMuY2FjaGVQb2xpY3kpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0NvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvRXZlbnRzL0V2ZW50U2NoZWR1bGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NvbW1vbi9Tb3VyY2UvVHlwZXNjcmlwdC9NeUFjY291bnRFdmVudHMudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9TaWduSW5IZWFkZXJTZXJ2aWNlLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIFNpZ25JbkhlYWRlckNvbnRyb2xsZXIgZXh0ZW5kcyBPcmNrZXN0cmEuQ29tcG9zZXIuQ29udHJvbGxlciB7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBzaWduSW5IZWFkZXJTZXJ2aWNlOiBTaWduSW5IZWFkZXJTZXJ2aWNlID0gbmV3IFNpZ25JbkhlYWRlclNlcnZpY2UobmV3IFNpZ25JbkhlYWRlclJlcG9zaXRvcnkoKSk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKCkge1xyXG5cclxuICAgICAgICAgICAgc3VwZXIuaW5pdGlhbGl6ZSgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplU2lnbkluSGVhZGVyKCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJTdWJzY3JpcHRpb25zKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGluaXRpYWxpemVTaWduSW5IZWFkZXIoKSB7XHJcbiAgICAgICAgICAgIHZhciBjdWx0dXJlSW5mbyA9ICQoJ2h0bWwnKS5hdHRyKCdsYW5nJyk7XHJcbiAgICAgICAgICAgIHZhciBwYXJhbSA9IHsgY3VsdHVyZUluZm8gfTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2lnbkluSGVhZGVyU2VydmljZS5nZXRTaWduSW5IZWFkZXIocGFyYW0pXHJcbiAgICAgICAgICAgICAgICAudGhlbihzaWduSW5IZWFkZXIgPT4gdGhpcy5yZW5kZXIoJ1NpZ25JbkhlYWRlcicsIHNpZ25JbkhlYWRlcikpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHJlZ2lzdGVyU3Vic2NyaXB0aW9ucygpIHtcclxuICAgICAgICAgICAgdmFyIGxvZ2dlZEluU2NoZWR1bGVyID0gRXZlbnRTY2hlZHVsZXIuaW5zdGFuY2UoTXlBY2NvdW50RXZlbnRzW015QWNjb3VudEV2ZW50cy5Mb2dnZWRJbl0pO1xyXG4gICAgICAgICAgICB2YXIgbG9nZ2VkT3V0U2NoZWR1bGVyID0gRXZlbnRTY2hlZHVsZXIuaW5zdGFuY2UoTXlBY2NvdW50RXZlbnRzW015QWNjb3VudEV2ZW50cy5Mb2dnZWRPdXRdKTtcclxuXHJcbiAgICAgICAgICAgIGxvZ2dlZE91dFNjaGVkdWxlci5zdWJzY3JpYmUoIGUgPT4gdGhpcy5vbkxvZ2dlZE91dChlKSk7XHJcbiAgICAgICAgICAgIGxvZ2dlZEluU2NoZWR1bGVyLnN1YnNjcmliZSggZSA9PiB0aGlzLm9uTG9nZ2VkSW4oZSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uTG9nZ2VkT3V0KGU6IElFdmVudEluZm9ybWF0aW9uKTogUS5Qcm9taXNlPGFueT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaWduSW5IZWFkZXJTZXJ2aWNlLmludmFsaWRhdGVDYWNoZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uTG9nZ2VkSW4oZTogSUV2ZW50SW5mb3JtYXRpb24pOiBRLlByb21pc2U8YW55PiB7XHJcbiAgICAgICAgICAgICByZXR1cm4gdGhpcy5zaWduSW5IZWFkZXJTZXJ2aWNlLmludmFsaWRhdGVDYWNoZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvQ29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L1V0aWxzL1VybEhlbHBlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21tb24vU291cmNlL1R5cGVzY3JpcHQvQ3VzdG9tZXJTZXJ2aWNlLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL1NpZ25JbkhlYWRlci9Tb3VyY2UvVHlwZXNjcmlwdC9TaWduSW5IZWFkZXJTZXJ2aWNlLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NvbW1vbi9Tb3VyY2UvVHlwZXNjcmlwdC9NeUFjY291bnRFdmVudHMudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vTXlBY2NvdW50L1NvdXJjZS9UeXBlc2NyaXB0L015QWNjb3VudENvbnRyb2xsZXIudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgVXBkYXRlQWNjb3VudENvbnRyb2xsZXIgZXh0ZW5kcyBPcmNrZXN0cmEuQ29tcG9zZXIuTXlBY2NvdW50Q29udHJvbGxlciB7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBjdXN0b21lclNlcnZpY2U6IElDdXN0b21lclNlcnZpY2UgPSBuZXcgQ3VzdG9tZXJTZXJ2aWNlKG5ldyBDdXN0b21lclJlcG9zaXRvcnkoKSk7XHJcbiAgICAgICAgcHJvdGVjdGVkIHNpZ25JbkhlYWRlclNlcnZpY2U6IFNpZ25JbkhlYWRlclNlcnZpY2UgPSBuZXcgU2lnbkluSGVhZGVyU2VydmljZShuZXcgU2lnbkluSGVhZGVyUmVwb3NpdG9yeSgpKTtcclxuXHJcbiAgICAgICAgcHVibGljIGluaXRpYWxpemUoKSB7XHJcblxyXG4gICAgICAgICAgICBzdXBlci5pbml0aWFsaXplKCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJTdWJzY3JpcHRpb25zKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgcmVnaXN0ZXJTdWJzY3JpcHRpb25zKCkge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5yZWdpc3RlckZvcm1zRm9yVmFsaWRhdGlvbih0aGlzLmNvbnRleHQuY29udGFpbmVyLmZpbmQoJ2Zvcm0nKSk7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIuc3Vic2NyaWJlKE15QWNjb3VudEV2ZW50c1tNeUFjY291bnRFdmVudHMuQWNjb3VudFVwZGF0ZWRdLCBlID0+IHRoaXMub25BY2NvdW50VXBkYXRlZChlKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIG9uQWNjb3VudFVwZGF0ZWQoZTogSUV2ZW50SW5mb3JtYXRpb24pOiB2b2lkIHtcclxuXHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBlLmRhdGE7XHJcblxyXG4gICAgICAgICAgICBpZiAocmVzdWx0LlJldHVyblVybCkge1xyXG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2UoZGVjb2RlVVJJQ29tcG9uZW50KHJlc3VsdC5SZXR1cm5VcmwpKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcignVXBkYXRlQWNjb3VudCcsIHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlZ2lzdGVyRm9ybXNGb3JWYWxpZGF0aW9uKHRoaXMuY29udGV4dC5jb250YWluZXIuZmluZCgnZm9ybScpLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VydmVyVmFsaWRhdGlvbkNvbnRhaW5lcjogJ1tkYXRhLXRlbXBsYXRlaWQ9XCJVcGRhdGVBY2NvdW50U3VjY2Vzc2Z1bFwiXSdcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZW5hYmxlU3VibWl0QnV0dG9uKGFjdGlvbkNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCk6IHZvaWQge1xyXG5cclxuICAgICAgICAgICAgJCgnI1VwZGF0ZUFjY291bnRTdWJtaXQnKS5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB1cGRhdGVBY2NvdW50KGFjdGlvbkNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCk6IHZvaWQge1xyXG5cclxuICAgICAgICAgICAgYWN0aW9uQ29udGV4dC5ldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGZvcm1EYXRhOiBhbnkgPSB0aGlzLmdldEZvcm1EYXRhKGFjdGlvbkNvbnRleHQpO1xyXG4gICAgICAgICAgICB2YXIgcmV0dXJuVXJsUXVlcnlTdHJpbmc6IHN0cmluZyA9ICdSZXR1cm5Vcmw9JztcclxuICAgICAgICAgICAgdmFyIHJldHVyblVybDogc3RyaW5nID0gJyc7XHJcblxyXG4gICAgICAgICAgICBpZiAod2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZihyZXR1cm5VcmxRdWVyeVN0cmluZykgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuVXJsID0gdXJsSGVscGVyLmdldFVSTFBhcmFtZXRlcihsb2NhdGlvbi5zZWFyY2gsICdSZXR1cm5VcmwnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGJ1c3kgPSB0aGlzLmFzeW5jQnVzeSh7ZWxlbWVudENvbnRleHQ6IGFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHR9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY3VzdG9tZXJTZXJ2aWNlLnVwZGF0ZUFjY291bnQoZm9ybURhdGEsIHJldHVyblVybClcclxuICAgICAgICAgICAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNpZ25JbkhlYWRlclNlcnZpY2UuaW52YWxpZGF0ZUNhY2hlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAudGhlbihyZXN1bHQgPT4gdGhpcy5vblVwZGF0ZUFjY291bnRGdWxmaWxsZWQocmVzdWx0KSlcclxuICAgICAgICAgICAgICAgIC5mYWlsKChyZWFzb24pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyB0aGUgYWNjb3VudC4nLCByZWFzb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyRm9ybUVycm9yTWVzc2FnZXMocmVhc29uKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmZpbigoKSA9PiBidXN5LmRvbmUoKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb25VcGRhdGVBY2NvdW50RnVsZmlsbGVkKHJlc3VsdDogYW55KTogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKE15QWNjb3VudEV2ZW50c1tNeUFjY291bnRFdmVudHMuQWNjb3VudFVwZGF0ZWRdLCB7IGRhdGE6IHJlc3VsdCB9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBRKHJlc3VsdCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSVdpc2hMaXN0U2VydmljZSB7XHJcbiAgICAgICAgYWRkTGluZUl0ZW0ocHJvZHVjdElkOiBzdHJpbmcsIHZhcmlhbnRJZD86IHN0cmluZyk6IFEuUHJvbWlzZTxhbnk+O1xyXG5cclxuICAgICAgICByZW1vdmVMaW5lSXRlbShsaW5lSXRlbUlkOiBzdHJpbmcpOiBRLlByb21pc2U8YW55PjtcclxuXHJcbiAgICAgICAgZ2V0V2lzaExpc3RTdW1tYXJ5KCk6IFEuUHJvbWlzZTxhbnk+O1xyXG5cclxuICAgICAgICBjbGVhckNhY2hlKCk7XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9NdmMvQ29tcG9zZXJDbGllbnQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvQ2FjaGUvQ2FjaGVQcm92aWRlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9DYWNoZS9DYWNoZUVycm9yLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uL0lXaXNoTGlzdFJlcG9zaXRvcnkudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9JV2lzaExpc3RTZXJ2aWNlLnRzJyAvPlxyXG5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBXaXNoTGlzdFNlcnZpY2UgaW1wbGVtZW50cyBJV2lzaExpc3RTZXJ2aWNlIHtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgR2V0dGluZ0ZyZXNoV2lzaExpc3RTdW1tYXJ5OiBRLlByb21pc2U8YW55PjtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSB3aXNoTGlzdFJlcG9zaXRvcnk6IElXaXNoTGlzdFJlcG9zaXRvcnk7XHJcbiAgICAgICAgcHJpdmF0ZSBjYWNoZUtleTogc3RyaW5nID0gJ1dpc2hMaXN0U3VtbWFyeVZpZXdNb2RlbCc7XHJcbiAgICAgICAgcHJpdmF0ZSBjYWNoZVBvbGljeTogSUNhY2hlUG9saWN5ID0geyBzbGlkaW5nRXhwaXJhdGlvbjogMzAwIH07IC8vIDVtaW5cclxuICAgICAgICBwcml2YXRlIGNhY2hlUHJvdmlkZXI6IElDYWNoZVByb3ZpZGVyO1xyXG4gICAgICAgIHByaXZhdGUgZXZlbnRIdWI6IElFdmVudEh1YjtcclxuXHJcbiAgICAgICAgY29uc3RydWN0b3Iod2lzaExpc3RSZXBvc2l0b3J5OiBJV2lzaExpc3RSZXBvc2l0b3J5LCBldmVudEh1YjogSUV2ZW50SHViKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXdpc2hMaXN0UmVwb3NpdG9yeSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvcjogd2lzaExpc3RSZXBvc2l0b3J5IGlzIHJlcXVpcmVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCFldmVudEh1Yikge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvcjogZXZlbnRIdWIgaXMgcmVxdWlyZWQnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy53aXNoTGlzdFJlcG9zaXRvcnkgPSB3aXNoTGlzdFJlcG9zaXRvcnk7XHJcbiAgICAgICAgICAgIHRoaXMuY2FjaGVQcm92aWRlciA9IENhY2hlUHJvdmlkZXIuaW5zdGFuY2UoKTtcclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1YiA9IGV2ZW50SHViO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGdldFdpc2hMaXN0U3VtbWFyeSgpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDYWNoZVdpc2hMaXN0U3VtbWFyeSgpXHJcbiAgICAgICAgICAgICAgICAuZmFpbChyZWFzb24gPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jYW5IYW5kbGUocmVhc29uKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRGcmVzaFdpc2hMaXN0U3VtbWFyeSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignQW4gZXJyb3Igb2NjdXJlZCB3aGlsZSBnZXR0aW5nIHRoZSB3aXNoTGlzdCBmcm9tIGNhY2hlLicsIHJlYXNvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgcmVhc29uO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZ2V0RnJlc2hXaXNoTGlzdFN1bW1hcnkoKTogUS5Qcm9taXNlPGFueT4ge1xyXG4gICAgICAgICAgICBpZiAoIVdpc2hMaXN0U2VydmljZS5HZXR0aW5nRnJlc2hXaXNoTGlzdFN1bW1hcnkpIHtcclxuICAgICAgICAgICAgICAgIFdpc2hMaXN0U2VydmljZS5HZXR0aW5nRnJlc2hXaXNoTGlzdFN1bW1hcnkgPVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMud2lzaExpc3RSZXBvc2l0b3J5LmdldFdpc2hMaXN0U3VtbWFyeSgpLnRoZW4od2lzaExpc3QgPT4gdGhpcy5zZXRXaXNoTGlzdFRvQ2FjaGUod2lzaExpc3QpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gdG8gYXZvaWQgZ2V0dGluZyBhIGZyZXNoIHdpc2hsaXN0IG11bHRpcGxlIHRpbWVzIHdpdGhpbiBhIHBhZ2Ugc2Vzc2lvblxyXG4gICAgICAgICAgICByZXR1cm4gV2lzaExpc3RTZXJ2aWNlLkdldHRpbmdGcmVzaFdpc2hMaXN0U3VtbWFyeVxyXG4gICAgICAgICAgICAgICAgLmZhaWwoKHJlYXNvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0FuIGVycm9yIG9jY3VyZWQgd2hpbGUgZ2V0dGluZyBhIGZyZXNoIHdpc2ggbGlzdC4nLCByZWFzb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IHJlYXNvbjtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGdldFNpZ25JblVybCgpOiBRLlByb21pc2U8YW55PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFdpc2hMaXN0U3VtbWFyeSgpXHJcbiAgICAgICAgICAgICAgICAudGhlbih3aXNoTGlzdCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdpc2hMaXN0LlNpZ25JblVybDtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGdldExpbmVJdGVtKHByb2R1Y3RJZDogc3RyaW5nLCB2YXJpYW50SWQ/OiBzdHJpbmcpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRXaXNoTGlzdFN1bW1hcnkoKS50aGVuKHdpc2hMaXN0ID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh3aXNoTGlzdCAmJiB3aXNoTGlzdC5JdGVtcykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3aXNoTGlzdC5JdGVtcy5maWx0ZXIoaXQgPT4gaXQuUHJvZHVjdElkID09PSBwcm9kdWN0SWQgJiYgaXQuVmFyaWFudElkID09PSB2YXJpYW50SWQpWzBdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBhZGRMaW5lSXRlbShwcm9kdWN0SWQ6IHN0cmluZywgdmFyaWFudElkPzogc3RyaW5nLCBxdWFudGl0eTogbnVtYmVyID0gMSk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgUHJvZHVjdElkOiBwcm9kdWN0SWQsXHJcbiAgICAgICAgICAgICAgICBWYXJpYW50SWQ6IHZhcmlhbnRJZCxcclxuICAgICAgICAgICAgICAgIFF1YW50aXR5OiBxdWFudGl0eVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKCd3aXNoTGlzdFVwZGF0aW5nJywgeyBkYXRhOiBkYXRhIH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMud2lzaExpc3RSZXBvc2l0b3J5LmFkZExpbmVJdGVtKHByb2R1Y3RJZCwgdmFyaWFudElkLCBxdWFudGl0eSlcclxuICAgICAgICAgICAgICAgIC50aGVuKHdpc2hMaXN0ID0+IHRoaXMuc2V0V2lzaExpc3RUb0NhY2hlKHdpc2hMaXN0KSlcclxuICAgICAgICAgICAgICAgIC50aGVuKHdpc2hMaXN0ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goJ3dpc2hMaXN0VXBkYXRlZCcsIHsgZGF0YTogd2lzaExpc3QgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdpc2hMaXN0O1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5mYWlsKHJlYXNvbiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhckNhY2hlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgcmVhc29uO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgcmVtb3ZlTGluZUl0ZW0obGluZUl0ZW1JZDogc3RyaW5nKTogUS5Qcm9taXNlPGFueT4ge1xyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIExpbmVJdGVtSWQ6IGxpbmVJdGVtSWRcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaCgnd2lzaExpc3RVcGRhdGluZycsIHsgZGF0YTogZGF0YSB9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLndpc2hMaXN0UmVwb3NpdG9yeS5kZWxldGVMaW5lSXRlbShsaW5lSXRlbUlkKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4od2lzaExpc3QgPT4gdGhpcy5zZXRXaXNoTGlzdFRvQ2FjaGUod2lzaExpc3QpKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4od2lzaExpc3QgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaCgnd2lzaExpc3RVcGRhdGVkJywgeyBkYXRhOiB3aXNoTGlzdCB9KTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gd2lzaExpc3Q7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmZhaWwocmVhc29uID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNsZWFyQ2FjaGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyByZWFzb247XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBjbGVhckNhY2hlKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jYWNoZVByb3ZpZGVyLmRlZmF1bHRDYWNoZS5jbGVhcih0aGlzLmNhY2hlS2V5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBnZXRDYWNoZVdpc2hMaXN0U3VtbWFyeSgpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jYWNoZVByb3ZpZGVyLmRlZmF1bHRDYWNoZS5nZXQ8YW55Pih0aGlzLmNhY2hlS2V5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBzZXRXaXNoTGlzdFRvQ2FjaGUod2lzaExpc3Q6IGFueSk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNhY2hlUHJvdmlkZXIuZGVmYXVsdENhY2hlLnNldCh0aGlzLmNhY2hlS2V5LCB3aXNoTGlzdCwgdGhpcy5jYWNoZVBvbGljeSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGNhbkhhbmRsZShyZWFzb246IGFueSk6IGJvb2xlYW4ge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHJlYXNvbiA9PT0gQ2FjaGVFcnJvci5FeHBpcmVkIHx8IHJlYXNvbiA9PT0gQ2FjaGVFcnJvci5Ob3RGb3VuZDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvQ29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLkNhcnQuVUkvV2lzaExpc3QvU291cmNlL1R5cGVzY3JpcHQvV2lzaExpc3RSZXBvc2l0b3J5LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLkNhcnQuVUkvV2lzaExpc3QvU291cmNlL1R5cGVzY3JpcHQvU2VydmljZXMvV2lzaExpc3RTZXJ2aWNlLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLkNhcnQuVUkvQ2FydFN1bW1hcnkvU291cmNlL1R5cGVzY3JpcHQvQ2FydFNlcnZpY2UudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvUmVwb3NpdG9yaWVzL0NhcnRSZXBvc2l0b3J5LnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIFdpc2hMaXN0Q29udHJvbGxlciBleHRlbmRzIE9yY2tlc3RyYS5Db21wb3Nlci5Db250cm9sbGVyIHtcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIF93aXNoTGlzdFNlcnZpY2U6IElXaXNoTGlzdFNlcnZpY2UgPSBuZXcgV2lzaExpc3RTZXJ2aWNlKG5ldyBXaXNoTGlzdFJlcG9zaXRvcnkoKSwgdGhpcy5ldmVudEh1Yik7XHJcbiAgICAgICAgcHJvdGVjdGVkIF9jYXJ0U2VydmljZTogQ2FydFNlcnZpY2UgPSBuZXcgQ2FydFNlcnZpY2UobmV3IENhcnRSZXBvc2l0b3J5KCksIHRoaXMuZXZlbnRIdWIpO1xyXG5cclxuICAgICAgICBwdWJsaWMgaW5pdGlhbGl6ZSgpIHtcclxuXHJcbiAgICAgICAgICAgIHN1cGVyLmluaXRpYWxpemUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBhZGRUb0NhcnQoYWN0aW9uQ29udGV4dDogSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0KSB7XHJcbiAgICAgICAgICAgIHZhciBjb250ZXh0OiBKUXVlcnkgPSBhY3Rpb25Db250ZXh0LmVsZW1lbnRDb250ZXh0O1xyXG4gICAgICAgICAgICB2YXIgY29udGFpbmVyID0gY29udGV4dC5jbG9zZXN0KCcud2lzaGxpc3QtdGlsZScpO1xyXG4gICAgICAgICAgICB2YXIgcHJvZHVjdElkOiBzdHJpbmcgPSA8YW55PmNvbnRleHQuZGF0YSgncHJvZHVjdGlkJyk7XHJcbiAgICAgICAgICAgIHZhciBwcmljZTogc3RyaW5nID0gPGFueT5jb250ZXh0LmRhdGEoJ3ByaWNlJyk7XHJcbiAgICAgICAgICAgIHZhciBicmFuZDogc3RyaW5nID0gPGFueT5jb250ZXh0LmRhdGEoJ2JyYW5kJyk7XHJcbiAgICAgICAgICAgIHZhciB2YXJpYW50SWQ6IHN0cmluZyA9IDxhbnk+Y29udGV4dC5kYXRhKCd2YXJpYW50aWQnKTtcclxuICAgICAgICAgICAgdmFyIHZhcmlhbnQ6IHN0cmluZyA9IDxhbnk+Y29udGV4dC5kYXRhKCd2YXJpYW50Jyk7XHJcbiAgICAgICAgICAgIHZhciBuYW1lOiBzdHJpbmcgPSA8YW55PmNvbnRleHQuZGF0YSgnbmFtZScpO1xyXG4gICAgICAgICAgICB2YXIgY2F0ZWdvcnk6IHN0cmluZyA9IDxhbnk+Y29udGV4dC5kYXRhKCdjYXRlZ29yeScpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKCd3aXNoTGlzdExpbmVJdGVtQWRkaW5nVG9DYXJ0Jywge1xyXG4gICAgICAgICAgICAgICAgZGF0YTogdGhpcy5nZXRQcm9kdWN0RGF0YUZvckFuYWx5dGljcyhwcm9kdWN0SWQsIHZhcmlhbnQsIG5hbWUsIHByaWNlLCBicmFuZCwgY2F0ZWdvcnkpXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgY29udGFpbmVyLmFkZENsYXNzKCdpcy1sb2FkaW5nJyk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9jYXJ0U2VydmljZS5hZGRMaW5lSXRlbShwcm9kdWN0SWQsIHByaWNlLCB2YXJpYW50SWQsIDEpXHJcbiAgICAgICAgICAgICAgICAuZmluKCgpID0+IGNvbnRhaW5lci5yZW1vdmVDbGFzcygnaXMtbG9hZGluZycpKTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGdldExpc3ROYW1lRm9yQW5hbHl0aWNzKCk6IHN0cmluZyB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTGlzdE5hbWUgbm90IGRlZmluZWQgZm9yIHRoaXMgY29udHJvbGxlcicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGdldFByb2R1Y3REYXRhRm9yQW5hbHl0aWNzKHByb2R1Y3RJZCwgdmFyaWFudCwgZGlzcGxheU5hbWUsIHByaWNlLCBicmFuZCwgY2F0ZWdvcnkpOiBhbnkge1xyXG5cclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBMaXN0OiB0aGlzLmdldExpc3ROYW1lRm9yQW5hbHl0aWNzKCksXHJcbiAgICAgICAgICAgICAgICBQcm9kdWN0SWQ6IHByb2R1Y3RJZCxcclxuICAgICAgICAgICAgICAgIFZhcmlhbnQ6IHZhcmlhbnQsXHJcbiAgICAgICAgICAgICAgICBEaXNwbGF5TmFtZTogZGlzcGxheU5hbWUsXHJcbiAgICAgICAgICAgICAgICBMaXN0UHJpY2U6IHByaWNlLFxyXG4gICAgICAgICAgICAgICAgQnJhbmQ6IGJyYW5kLFxyXG4gICAgICAgICAgICAgICAgQ2F0ZWdvcnlJZDogY2F0ZWdvcnksXHJcbiAgICAgICAgICAgICAgICBRdWFudGl0eTogMVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0NvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0lDb250cm9sbGVyQWN0aW9uQ29udGV4dC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL1dpc2hMaXN0Q29udHJvbGxlci50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBNeVdpc2hMaXN0Q29udHJvbGxlciBleHRlbmRzIE9yY2tlc3RyYS5Db21wb3Nlci5XaXNoTGlzdENvbnRyb2xsZXIge1xyXG5cclxuICAgICAgICBwdWJsaWMgaW5pdGlhbGl6ZSgpIHtcclxuXHJcbiAgICAgICAgICAgIHN1cGVyLmluaXRpYWxpemUoKTtcclxuICAgICAgICAgICAgdGhpcy5yZWdpc3RlclN1YnNjcmlwdGlvbnMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCByZWdpc3RlclN1YnNjcmlwdGlvbnMoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIuc3Vic2NyaWJlKCd3aXNoTGlzdFVwZGF0ZWQnLCAoZTogSUV2ZW50SW5mb3JtYXRpb24pID0+IHRoaXMub25XaXNoTGlzdFVwZGF0ZWQoZSkpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHB1YmxpYyBjb3B5U2hhcmVVcmwoYWN0aW9uQ29udGV4dDogSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0KSB7XHJcbiAgICAgICAgICAgIHZhciBzaGFyZVVybCA9ICQoJyN0eHRTaGFyZVVybCcpO1xyXG4gICAgICAgICAgICB2YXIgc3VjY2VlZDtcclxuXHJcbiAgICAgICAgICAgIHNoYXJlVXJsLmZvY3VzKCkuc2VsZWN0KCk7XHJcblxyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgc3VjY2VlZCA9IGRvY3VtZW50LmV4ZWNDb21tYW5kKCdjb3B5Jyk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgIHN1Y2NlZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKCd3aXNoTGlzdENvcHlpbmdTaGFyZVVybCcsIHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IHt9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHN1Y2NlZWQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZGVsZXRlTGluZUl0ZW0oYWN0aW9uQ29udGV4dDogSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0KSB7XHJcbiAgICAgICAgICAgIHZhciBjb250ZXh0OiBKUXVlcnkgPSBhY3Rpb25Db250ZXh0LmVsZW1lbnRDb250ZXh0O1xyXG4gICAgICAgICAgICB2YXIgbGluZUl0ZW1JZDogc3RyaW5nID0gPGFueT5jb250ZXh0LmRhdGEoJ2xpbmVpdGVtaWQnKTtcclxuICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IGNvbnRleHQuY2xvc2VzdCgnLndpc2hsaXN0LXRpbGUnKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5hZGRDbGFzcygnaXMtbG9hZGluZycpO1xyXG4gICAgICAgICAgICB0aGlzLl93aXNoTGlzdFNlcnZpY2UucmVtb3ZlTGluZUl0ZW0obGluZUl0ZW1JZClcclxuICAgICAgICAgICAgICAgIC50aGVuKHdpc2hMaXN0ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb250YWluZXIucGFyZW50KCkucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmZpbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLnJlbW92ZUNsYXNzKCdpcy1sb2FkaW5nJyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvbldpc2hMaXN0VXBkYXRlZChlOiBJRXZlbnRJbmZvcm1hdGlvbik6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcldpc2hMaXN0UXVhbnRpdHkoZS5kYXRhKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChlLmRhdGEuVG90YWxRdWFudGl0eSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0LndpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHJlbmRlcldpc2hMaXN0UXVhbnRpdHkod2lzaExpc3QpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXIoJ1dpc2hMaXN0UXVhbnRpdHknLCB3aXNoTGlzdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgZ2V0TGlzdE5hbWVGb3JBbmFseXRpY3MoKTogc3RyaW5nIHtcclxuICAgICAgICAgICAgcmV0dXJuICdNeSBXaXNoIExpc3QnO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9Db250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L0V2ZW50cy9FdmVudFNjaGVkdWxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5DYXJ0LlVJL1dpc2hMaXN0L1NvdXJjZS9UeXBlU2NyaXB0L1dpc2hMaXN0UmVwb3NpdG9yeS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9FdmVudHMvRXZlbnRIdWIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvRXZlbnRzL0lFdmVudEluZm9ybWF0aW9uLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLk15QWNjb3VudC5VSS9Db21tb24vU291cmNlL1R5cGVzY3JpcHQvTXlBY2NvdW50RXZlbnRzLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLkNhcnQuVUkvV2lzaExpc3QvU291cmNlL1R5cGVzY3JpcHQvU2VydmljZXMvV2lzaExpc3RTZXJ2aWNlLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIFdpc2hMaXN0SW5IZWFkZXJDb250cm9sbGVyIGV4dGVuZHMgT3Jja2VzdHJhLkNvbXBvc2VyLkNvbnRyb2xsZXIge1xyXG5cclxuICAgICAgICBwcml2YXRlIF93aXNoTGlzdFNlcnZpY2U6IElXaXNoTGlzdFNlcnZpY2UgPSBuZXcgV2lzaExpc3RTZXJ2aWNlKG5ldyBXaXNoTGlzdFJlcG9zaXRvcnkoKSwgdGhpcy5ldmVudEh1Yik7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKCkge1xyXG5cclxuICAgICAgICAgICAgc3VwZXIuaW5pdGlhbGl6ZSgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplV2lzaExpc3RRdWFudGl0eSgpO1xyXG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyU3Vic2NyaXB0aW9ucygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBpbml0aWFsaXplV2lzaExpc3RRdWFudGl0eSgpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5jb250ZXh0LnZpZXdNb2RlbC5Jc0F1dGhlbnRpY2F0ZWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3dpc2hMaXN0U2VydmljZS5jbGVhckNhY2hlKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3dpc2hMaXN0U2VydmljZS5nZXRXaXNoTGlzdFN1bW1hcnkoKVxyXG4gICAgICAgICAgICAgICAgLmRvbmUod2lzaExpc3QgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIV8uaXNFbXB0eSh3aXNoTGlzdCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJXaXNoTGlzdCh3aXNoTGlzdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgcmVnaXN0ZXJTdWJzY3JpcHRpb25zKCk6IHZvaWQge1xyXG5cclxuICAgICAgICAgICAgdmFyIGxvZ2dlZEluU2NoZWR1bGVyID0gRXZlbnRTY2hlZHVsZXIuaW5zdGFuY2UoTXlBY2NvdW50RXZlbnRzW015QWNjb3VudEV2ZW50cy5Mb2dnZWRJbl0pO1xyXG4gICAgICAgICAgICB2YXIgbG9nZ2VkT3V0U2NoZWR1bGVyID0gRXZlbnRTY2hlZHVsZXIuaW5zdGFuY2UoTXlBY2NvdW50RXZlbnRzW015QWNjb3VudEV2ZW50cy5Mb2dnZWRPdXRdKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIuc3Vic2NyaWJlKCd3aXNoTGlzdFVwZGF0ZWQnLCAoZTogSUV2ZW50SW5mb3JtYXRpb24pID0+IHRoaXMub25XaXNoTGlzdFVwZGF0ZWQoZSkpO1xyXG5cclxuICAgICAgICAgICAgbG9nZ2VkT3V0U2NoZWR1bGVyLnN1YnNjcmliZSgoZTogSUV2ZW50SW5mb3JtYXRpb24pID0+IHRoaXMub25SZWZyZXNoVXNlcihlKSk7XHJcbiAgICAgICAgICAgIGxvZ2dlZEluU2NoZWR1bGVyLnN1YnNjcmliZSgoZTogSUV2ZW50SW5mb3JtYXRpb24pID0+IHRoaXMub25SZWZyZXNoVXNlcihlKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb25XaXNoTGlzdFVwZGF0ZWQoZTogSUV2ZW50SW5mb3JtYXRpb24pOiB2b2lkIHtcclxuXHJcbiAgICAgICAgICAgIHZhciB3aXNoTGlzdCA9IGUuZGF0YTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJXaXNoTGlzdCh3aXNoTGlzdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb25SZWZyZXNoVXNlcihlOiBJRXZlbnRJbmZvcm1hdGlvbik6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl93aXNoTGlzdFNlcnZpY2UuY2xlYXJDYWNoZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHJlbmRlcldpc2hMaXN0KHdpc2hMaXN0OiBhbnkpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKCdXaXNoTGlzdFF1YW50aXR5Jywgd2lzaExpc3QpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uRXJyb3IocmVhc29uOiBhbnkpOiB2b2lkIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgQW4gZXJyb3Igb2NjdXJlZCB3aGlsZSByZW5kZXJpbmcgdGhlIHdpc2hMaXN0IHdpdGggdGhlIFdpc2hMaXN0SW5IZWFkZXIuYCwgcmVhc29uKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvQ29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLkNhcnQuVUkvV2lzaExpc3QvU291cmNlL1R5cGVzY3JpcHQvV2lzaExpc3RSZXBvc2l0b3J5LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLkNhcnQuVUkvV2lzaExpc3QvU291cmNlL1R5cGVzY3JpcHQvU2VydmljZXMvV2lzaExpc3RTZXJ2aWNlLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLkNhcnQuVUkvQ2FydFN1bW1hcnkvU291cmNlL1R5cGVzY3JpcHQvQ2FydFNlcnZpY2UudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvUmVwb3NpdG9yaWVzL0NhcnRSZXBvc2l0b3J5LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL1dpc2hMaXN0L1NvdXJjZS9UeXBlc2NyaXB0L1dpc2hMaXN0Q29udHJvbGxlci50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBTaGFyZWRXaXNoTGlzdENvbnRyb2xsZXIgZXh0ZW5kcyBPcmNrZXN0cmEuQ29tcG9zZXIuV2lzaExpc3RDb250cm9sbGVyIHtcclxuXHJcblxyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKCkge1xyXG5cclxuICAgICAgICAgICAgc3VwZXIuaW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGdldExpc3ROYW1lRm9yQW5hbHl0aWNzKCk6IHN0cmluZyB7XHJcbiAgICAgICAgICAgIHJldHVybiAnU2hhcmVkIFdpc2ggTGlzdCc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIFByb2R1Y3RJZGVudGlmaWVyRHRvIHtcclxuICAgICAgICBjb25zdHJ1Y3RvcihwdWJsaWMgUHJvZHVjdElkOiBzdHJpbmcsIHB1YmxpYyBWYXJpYW50SWQ6IHN0cmluZykge31cclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL1JlbGF0ZWRQcm9kdWN0cy9Tb3VyY2UvVHlwZVNjcmlwdC9Qcm9kdWN0SWRlbnRpZmllckR0by50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG5cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSUludmVudG9yeVNlcnZpY2Uge1xyXG5cclxuICAgICAgICBpc0F2YWlsYWJsZVRvU2VsbChza3U6IHN0cmluZyk6IFEuUHJvbWlzZTxib29sZWFuPjtcclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L012Yy9Db21wb3NlckNsaWVudC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL0lJbnZlbnRvcnlTZXJ2aWNlLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIEludmVudG9yeVNlcnZpY2UgaW1wbGVtZW50cyBJSW52ZW50b3J5U2VydmljZSB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgX21lbW9pemVJc0F2YWlsYWJsZVRvU2VsbDogRnVuY3Rpb247XHJcblxyXG4gICAgICAgIHB1YmxpYyBpc0F2YWlsYWJsZVRvU2VsbChza3U6IHN0cmluZyk6IFEuUHJvbWlzZTxib29sZWFuPiB7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXNrdSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgc2t1IGlzIHJlcXVpcmVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5fbWVtb2l6ZUlzQXZhaWxhYmxlVG9TZWxsKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWVtb2l6ZUlzQXZhaWxhYmxlVG9TZWxsID0gXy5tZW1vaXplKGFyZyA9PiB0aGlzLmlzQXZhaWxhYmxlVG9TZWxsSW1wbChhcmcpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX21lbW9pemVJc0F2YWlsYWJsZVRvU2VsbChza3UpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBpc0F2YWlsYWJsZVRvU2VsbEltcGwoc2t1OiBzdHJpbmcpOiBRLlByb21pc2U8Ym9vbGVhbj4ge1xyXG5cclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7IHNrdXM6IFtza3VdIH07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gQ29tcG9zZXJDbGllbnQucG9zdCgnL2FwaS9pbnZlbnRvcnkvZmluZEludmVudG9yeUl0ZW1zJywgZGF0YSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oYXZhaWxhYmxlU2t1cyA9PiBfLmNvbnRhaW5zKGF2YWlsYWJsZVNrdXMsIHNrdSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL1JlbGF0ZWRQcm9kdWN0cy9Tb3VyY2UvVHlwZVNjcmlwdC9Qcm9kdWN0SWRlbnRpZmllckR0by50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJUHJvZHVjdFNlcnZpY2Uge1xyXG4gICAgICAgIGNhbGN1bGF0ZVByaWNlKHByb2R1Y3RJZDogc3RyaW5nLCBjb25jZXJuOiBzdHJpbmcpO1xyXG5cclxuICAgICAgICBnZXRTZWxlY3RlZFZhcmlhbnRWaWV3TW9kZWwoKTtcclxuXHJcbiAgICAgICAgZ2V0VmFyaWFudCh2YXJpYW50SWQ6IHN0cmluZyk7XHJcblxyXG4gICAgICAgIHVwZGF0ZVNlbGVjdGVkS3Zhc1dpdGgoc2VsZWN0aW9uc1RvQWRkOiBhbnksIGNvbmNlcm46IHN0cmluZyk7XHJcblxyXG4gICAgICAgIGdldFJlbGF0ZWRQcm9kdWN0cyhyZWxhdGVkUHJvZHVjdElkZW50aWZpZXJzOiBQcm9kdWN0SWRlbnRpZmllckR0b1tdKTtcclxuXHJcbiAgICAgICAgbG9hZFF1aWNrQnV5UHJvZHVjdChwcm9kdWN0SWQ6IHN0cmluZywgdmFyaWFudElkOiBzdHJpbmcsIGNvbmNlcm46IHN0cmluZywgc291cmNlOiBzdHJpbmcpO1xyXG5cclxuICAgICAgICBmaW5kSW52ZW50b3J5SXRlbXModmlld01vZGVsOiBhbnksIGNvbmNlcm46IHN0cmluZyk7XHJcblxyXG4gICAgICAgIGJ1aWxkVXJsUGF0aChwYXRoQXJyYXk6IHN0cmluZ1tdKTogc3RyaW5nO1xyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvTXZjL0lDb250cm9sbGVyQ29udGV4dC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9NdmMvQ29tcG9zZXJDbGllbnQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvRXZlbnRzL0V2ZW50SHViLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgLy9cclxuICAgIC8vSXNvbGF0ZWQgbG9naWMsIHRoaXMgY2xhc3MgcmVidWlsZCB0aGUga2V5VmFyaWFudEF0dHJpYnV0ZUl0ZW1zIGFycmF5XHJcbiAgICAvL2FzIGV4cGVjdGVkIGJ5IEt2YUl0ZW1zLmhic1xyXG4gICAgLy9UT0RPOiBJbnN0YW5jaWVyIGRhbnMgcHJvZHVjdFNlcnZpY2UgKHBhc3NlciBkYW5zIGxlIGNvbnN0cnVjdGV1cilcclxuICAgIGV4cG9ydCBjbGFzcyBLZXlWYXJpYW50QXR0cmlidXRlSXRlbXNCdWlsZGVyIHtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBjb250ZXh0OiBPcmNrZXN0cmEuQ29tcG9zZXIuSUNvbnRyb2xsZXJDb250ZXh0O1xyXG5cclxuICAgICAgICAvL1Bhc3NlciB2aWV3TW9kZWxcclxuICAgICAgICBjb25zdHJ1Y3Rvcihjb250ZXh0OiBPcmNrZXN0cmEuQ29tcG9zZXIuSUNvbnRyb2xsZXJDb250ZXh0KSB7XHJcbiAgICAgICAgICAgIGlmICghY29udGV4dCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvcjogY29udGV4dCBpcyByZXF1aXJlZCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghY29udGV4dC52aWV3TW9kZWwpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3I6IGNvbnRleHQudmlld01vZGVsIGlzIHJlcXVpcmVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL0ZpbmQgcG9zc2libGUga3ZhIHZhbHVlIHN0YXRlcyBiYXNlcyBvbiB0aGUgZ2l2ZW4gc2VsZWN0aW9uXHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLzxyZXR1cm5zPlxyXG4gICAgICAgIC8vIEtleVZhcmlhbnRBdHRyaWJ1dGVJdGVtIFZpZXdNb2RlbCByZWFkeSBmb3IgcmVuZGVyXHJcbiAgICAgICAgLy88L3JldHVybnM+XHJcbiAgICAgICAgcHVibGljIEJ1aWxkS2V5VmFyaWFudEF0dHJpYnV0ZUl0ZW1zRm9yKHNlbGVjdGVkS3ZhczogYW55KSB7XHJcbiAgICAgICAgICAgIHNlbGVjdGVkS3ZhcyA9IHNlbGVjdGVkS3ZhcyB8fCB7fTtcclxuXHJcbiAgICAgICAgICAgIC8vR2V0IHRoZSBsYXN0IGtub3duIEt2YVN0YXRlIGFuZCB1c2UgaXQgYXMgYSBzdGFydGluZyBwb2ludFxyXG4gICAgICAgICAgICB2YXIga2V5VmFyaWFudEF0dHJpYnV0ZUl0ZW1zID0gdGhpcy5jb250ZXh0LnZpZXdNb2RlbC5rZXlWYXJpYW50QXR0cmlidXRlSXRlbXMgfHwgW107XHJcblxyXG4gICAgICAgICAgICAvL0luaXRpYXRlXHJcbiAgICAgICAgICAgIHZhciByZXZlcnNlS3ZhTG9va3VwICA9IHRoaXMuSW5pdGlhdGVLVkFTdGF0ZUZvcihrZXlWYXJpYW50QXR0cmlidXRlSXRlbXMsIHNlbGVjdGVkS3Zhcyk7XHJcblxyXG4gICAgICAgICAgICAvL0ZpbmRcclxuICAgICAgICAgICAgdmFyIHJlYWNoYWJsZVZhcmlhbnRzID0gdGhpcy5GaW5kUmVhY2hhYmxlVmFyaWFudHNGcm9tKGtleVZhcmlhbnRBdHRyaWJ1dGVJdGVtcywgc2VsZWN0ZWRLdmFzKTtcclxuXHJcbiAgICAgICAgICAgIC8vRW5hYmxlXHJcbiAgICAgICAgICAgIHRoaXMuRW5hYmxlS1ZBU3RhdGUocmV2ZXJzZUt2YUxvb2t1cCwgcmVhY2hhYmxlVmFyaWFudHMsIHNlbGVjdGVkS3Zhcyk7XHJcblxyXG4gICAgICAgICAgICAvL01lbW9pemUgdGhlIEt2YVN0YXRlIGZvciBsYXRlclxyXG4gICAgICAgICAgICB0aGlzLmNvbnRleHQudmlld01vZGVsLmtleVZhcmlhbnRBdHRyaWJ1dGVJdGVtcyA9IGtleVZhcmlhbnRBdHRyaWJ1dGVJdGVtcztcclxuICAgICAgICAgICAgLy9cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBrZXlWYXJpYW50QXR0cmlidXRlSXRlbXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL1RvZ2dsZSB0aGUgU2VsZWN0ZWQgc3RhdGUgYW5kIERpc2FibGUgZXZlcnl0aGluZ1xyXG4gICAgICAgIC8vQWZ0ZXIgdGhpcyBpbml0aWFsIHN0YXRlLCB0aGUgS1ZBcyB3aWxsIGVpdGhlciBiZVxyXG4gICAgICAgIC8vIFNlbGVjdGVkIG9yIERpc2FibGVcclxuICAgICAgICAvL1xyXG4gICAgICAgIC8vPHJldHVybnM+XHJcbiAgICAgICAgLy8gIEEgTG9va3VwIG9mIGFsbCBLVkEgZm9yIGxhdGVyIGVhc3kgYWNjZXNzIHVzaW5nXHJcbiAgICAgICAgLy8gIGxvb2t1cFtwcm9wZXJ0eU5hbWVdW3ZhbHVlXVxyXG4gICAgICAgIC8vPC9yZXR1cm5zPlxyXG4gICAgICAgIHByaXZhdGUgSW5pdGlhdGVLVkFTdGF0ZUZvcihrZXlWYXJpYW50QXR0cmlidXRlSXRlbXM6IGFueSwgc2VsZWN0ZWRLdmFzOiBhbnkpOiBhbnkge1xyXG4gICAgICAgICAgICB2YXIgcmV2ZXJzZUxvb2t1cCA9IHt9O1xyXG5cclxuICAgICAgICAgICAgIF8uZWFjaChrZXlWYXJpYW50QXR0cmlidXRlSXRlbXMsIGZ1bmN0aW9uKGt2YTogYW55KSB7XHJcbiAgICAgICAgICAgICAgICAgdmFyIHByb3BlcnR5TmFtZSA9IGt2YS5Qcm9wZXJ0eU5hbWU7XHJcbiAgICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkVmFsdWUgPSBzZWxlY3RlZEt2YXNbcHJvcGVydHlOYW1lXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgcmV2ZXJzZUxvb2t1cFtwcm9wZXJ0eU5hbWVdID0ge307XHJcbiAgICAgICAgICAgICAgICAgXy5lYWNoKGt2YS5WYWx1ZXMsIGZ1bmN0aW9uKHZhbDogYW55KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgIHZhbC5TZWxlY3RlZCA9IHZhbC5WYWx1ZSA9PT0gc2VsZWN0ZWRWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgdmFsLkRpc2FibGVkID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgIHJldmVyc2VMb29rdXBbcHJvcGVydHlOYW1lXVt2YWwuVmFsdWVdID0gdmFsO1xyXG4gICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcmV2ZXJzZUxvb2t1cDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vRmluZCBhbGwgcmVhY2hhYmxlIHZhcmlhbnRzIGZyb20gdGhlIGdpdmVuIGNvbmZpZ3VyYXRpb25cclxuICAgICAgICAvL1Rob3NlIGFyZSB2YXJpYW50IHRoYXQgY291bGQgcG9zc2libHkgYmUgcmVhY2ggYnkgY2hhbmdpbmdcclxuICAgICAgICAvL29uZSBhbmQgb25seSBvbmUgS1ZBIHZhbHVlXHJcbiAgICAgICAgLy88cmV0dXJucz5cclxuICAgICAgICAvLyAgQW4gYXJyYXkgb2YgVmFyaWFudHMgd2l0aCBhbGwgdGhlaXIgcHJvcGVydGllc1xyXG4gICAgICAgIC8vPC9yZXR1cm5zPlxyXG4gICAgICAgIHByaXZhdGUgRmluZFJlYWNoYWJsZVZhcmlhbnRzRnJvbShrZXlWYXJpYW50QXR0cmlidXRlSXRlbXM6IGFueSwgc2VsZWN0ZWRLdmFzOiBhbnkpOiBhbnkge1xyXG4gICAgICAgICAgICB2YXIgYWxsVmFyaWFudHMgPSAodGhpcy5jb250ZXh0LnZpZXdNb2RlbC5hbGxWYXJpYW50cyB8fCB7fSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgcG9zc2libGVWYXJpYW50c0xvb2t1cCA9IHt9O1xyXG5cclxuICAgICAgICAgICAgLy9DaGFuZ2luZyBTZWxlY3Rpb25cclxuICAgICAgICAgICAgIF8uZWFjaChzZWxlY3RlZEt2YXMsIGZ1bmN0aW9uKHZhbHVlOiBzdHJpbmcsIHByb3BlcnR5TmFtZTogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgdmFyIHBvc3NpYmxlTW92ZSA9IF8ub21pdChzZWxlY3RlZEt2YXMsIHByb3BlcnR5TmFtZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgIHZhciB2ID0gXy5lYWNoKF8uZmlsdGVyKGFsbFZhcmlhbnRzLCB7IEt2YXM6IHBvc3NpYmxlTW92ZSB9KSwgZnVuY3Rpb24odmFyaWFudDogYW55KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlVmFyaWFudHNMb29rdXBbdmFyaWFudC5JZF0gPSB2YXJpYW50O1xyXG4gICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICB2YXIgdmFyaWFudHMgPSBfLm1hcFZhbHVlcyhwb3NzaWJsZVZhcmlhbnRzTG9va3VwLCBfLmlkZW50aXR5KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB2YXJpYW50cztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vRW5hYmxlIHRoZSBLVkFzIGJhc2VkIG9uIHRoZSByZWFjaGFibGUgdmFyaWFudHNcclxuICAgICAgICAvL1VzaW5nIHRoZSByZXZlcnNlIGxvb2trdXAgZm9yIGZhc3RlciBhY2Nlc3NcclxuICAgICAgICBwcml2YXRlIEVuYWJsZUtWQVN0YXRlKHJldmVyc2VLdmFMb29rdXA6IGFueSwgcmVhY2hhYmxlVmFyaWFudHM6IGFueSwgc2VsZWN0ZWRLdmFzOiBhbnkpOiBhbnkge1xyXG4gICAgICAgICAgICAvL0VuYWJsZSByZWFjaGFibGUgc3RhdGVzXHJcbiAgICAgICAgICAgIF8uZWFjaChyZWFjaGFibGVWYXJpYW50cywgZnVuY3Rpb24odmFyaWFudDogYW55LCB2YXJpYW50SWQ6IHN0cmluZykge1xyXG4gICAgICAgICAgICAgICAgXy5lYWNoKHZhcmlhbnQuS3ZhcywgZnVuY3Rpb24odmFsdWU6IHN0cmluZywgcHJvcGVydHlOYW1lOiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIga3ZhID0gcmV2ZXJzZUt2YUxvb2t1cFtwcm9wZXJ0eU5hbWVdIHx8IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWwgPSBrdmFbdmFsdWVdIHx8IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbC5EaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy9JZiB0aGUgY3VycmVudCBzZWxlY3Rpb24gbWF0Y2ggbm90aGluZywgZGlzYWJsZSBpdC5cclxuICAgICAgICAgICAgdmFyIHNlbGVjdGVkVmFyaWFudCA9IF8uZmluZChyZWFjaGFibGVWYXJpYW50cywgeyBLdmFzOiBzZWxlY3RlZEt2YXMgfSk7XHJcbiAgICAgICAgICAgIGlmICghc2VsZWN0ZWRWYXJpYW50KSB7XHJcbiAgICAgICAgICAgICAgICBfLmVhY2goc2VsZWN0ZWRLdmFzLCBmdW5jdGlvbih2YWx1ZTogc3RyaW5nLCBwcm9wZXJ0eU5hbWU6IHN0cmluZykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBrdmEgPSByZXZlcnNlS3ZhTG9va3VwW3Byb3BlcnR5TmFtZV0gfHwgW107XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZhbCA9IGt2YVt2YWx1ZV0gfHwge307XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsLkRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvTXZjL0lDb250cm9sbGVyQ29udGV4dC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9NdmMvQ29tcG9zZXJDbGllbnQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvRXZlbnRzL0V2ZW50SHViLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL1JlbGF0ZWRQcm9kdWN0cy9Tb3VyY2UvVHlwZVNjcmlwdC9Qcm9kdWN0SWRlbnRpZmllckR0by50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL0lQcm9kdWN0U2VydmljZS50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBQcm9kdWN0U2VydmljZSBpbXBsZW1lbnRzIElQcm9kdWN0U2VydmljZSB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgZXZlbnRIdWI6IElFdmVudEh1YjtcclxuICAgICAgICBwcml2YXRlIGNvbnRleHQ6IE9yY2tlc3RyYS5Db21wb3Nlci5JQ29udHJvbGxlckNvbnRleHQ7XHJcblxyXG4gICAgICAgIGNvbnN0cnVjdG9yKGV2ZW50SHViOiBJRXZlbnRIdWIsIGNvbnRleHQ6IE9yY2tlc3RyYS5Db21wb3Nlci5JQ29udHJvbGxlckNvbnRleHQpIHtcclxuICAgICAgICAgICAgaWYgKCFldmVudEh1Yikge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvcjogZXZlbnRIdWIgaXMgcmVxdWlyZWQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIWNvbnRleHQpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3I6IGNvbnRleHQgaXMgcmVxdWlyZWQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIWNvbnRleHQudmlld01vZGVsKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Vycm9yOiBjb250ZXh0LnZpZXdNb2RlbCBpcyByZXF1aXJlZCcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViID0gZXZlbnRIdWI7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc2hvd1F1aWNrVmlldygpIHtcclxuICAgICAgICAgICAgJCgnI2FkZFRvQ2FydE1vZGFsJykubW9kYWwoJ3Nob3cnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBjbG9zZVF1aWNrVmlldygpIHtcclxuICAgICAgICAgICAgJCgnI2FkZFRvQ2FydE1vZGFsJykubW9kYWwoJ2hpZGUnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzZWxlY3RJbWFnZShjbGlja2VkSW1hZ2VJbmRleDogbnVtYmVyLCBjb25jZXJuOiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgLy8gZmluZCBjdXJyZW50bHkgc2VsZWN0ZWQgaW1hZ2UgYW5kIHNldCBzZWxlY3RlZCB0byBmYWxzZVxyXG4gICAgICAgICAgICB2YXIgaW5kZXggPSBfLmZpbmRJbmRleCh0aGlzLmNvbnRleHQudmlld01vZGVsLkltYWdlcywgeyBTZWxlY3RlZDogdHJ1ZSB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChpbmRleCA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQudmlld01vZGVsLkltYWdlc1tpbmRleF0uU2VsZWN0ZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5jb250ZXh0LnZpZXdNb2RlbC5JbWFnZXNbY2xpY2tlZEltYWdlSW5kZXhdLlNlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgdGhpcy5jb250ZXh0LnZpZXdNb2RlbC5TZWxlY3RlZEltYWdlLkltYWdlVXJsID0gdGhpcy5jb250ZXh0LnZpZXdNb2RlbC5JbWFnZXNbY2xpY2tlZEltYWdlSW5kZXhdLkltYWdlVXJsO1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goY29uY2VybiArICdJbWFnZXNDaGFuZ2VkJywgeyBkYXRhOiB0aGlzLmNvbnRleHQudmlld01vZGVsIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGNhbGN1bGF0ZVByaWNlKHByb2R1Y3RJZDogc3RyaW5nLCBjb25jZXJuOiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7IHByb2R1Y3RzOiBbcHJvZHVjdElkXSB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIENvbXBvc2VyQ2xpZW50LnBvc3QoJy9hcGkvcHJvZHVjdC9jYWxjdWxhdGVQcmljZXMnLCBkYXRhKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgZGV0YWlscyA9IHRoaXMuY29udGV4dC52aWV3TW9kZWw7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1haW5SZXN1bHQgPSA8YW55Pl8uZmluZChyZXN1bHQuUHJvZHVjdFByaWNlcywgeyBQcm9kdWN0SWQ6IHByb2R1Y3RJZCB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy9UT0RPIGV4dGVuZCBhbGwgb3RoZXIgcHJvZHVjdHMgb24gdGhlIHBhZ2UgKGlmIGFueSlcclxuICAgICAgICAgICAgICAgICAgICAvL0V4dGVuZCB0aGUgcHJvZHVjdCBkZXRhaWxzXHJcbiAgICAgICAgICAgICAgICAgICAgXy5leHRlbmQoZGV0YWlscywgbWFpblJlc3VsdCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgJiYgcmVzdWx0LkN1cnJlbmN5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgZGV0YWlscy5DdXJyZW5jeSA9IHJlc3VsdC5DdXJyZW5jeTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vRXh0ZW5kIHRoZSB2YXJpYW50c1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhbGxWYXJpYW50cyA9IHRoaXMuY29udGV4dC52aWV3TW9kZWwuYWxsVmFyaWFudHM7XHJcbiAgICAgICAgICAgICAgICAgICAgXy5lYWNoKG1haW5SZXN1bHQuVmFyaWFudFByaWNlcywgKHZhcmlhbnRQcmljZTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YXJpYW50ID0gPGFueT5fLmZpbmQoYWxsVmFyaWFudHMsIHsgSWQ6IHZhcmlhbnRQcmljZS5WYXJpYW50SWQgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF8uZXh0ZW5kKHZhcmlhbnQsIHZhcmlhbnRQcmljZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFyaWFudCAhPT0gdW5kZWZpbmVkICYmIHZhcmlhbnQuSWQgPT09IGRldGFpbHMuZGlzcGxheWVkVmFyaWFudElkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfLmV4dGVuZChkZXRhaWxzLCB2YXJpYW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goY29uY2VybiArICdQcmljZXNDaGFuZ2VkJywgeyBkYXRhOiBkZXRhaWxzIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaChjb25jZXJuICsgJ1ByaWNlQ2FsY3VsYXRlZCcsIHsgZGF0YTogZGV0YWlscyB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLypcclxuICAgICAgICAgKiBSZXR1cm4gdGhlIFZpZXdNb2RlbCBvZiB0aGUgU2VsZWN0ZWQgVmFyaWFudC5cclxuICAgICAgICAgKiBJZiBubyB2YXJpYW50cyBhcmUgYXZhaWxhYmxlLFxyXG4gICAgICAgICAqICAgIGl0IHJldHVybnMgdGhlIFZpZXdNb2RlbCBvZiB0aGUgUHJvZHVjdFxyXG4gICAgICAgICAqIElmIG5vIHZhcmlhbnQgaXMgc2VsZWN0ZWQgKGFrYSB0aGUgS1ZBIHNlbGVjdGlvbiBiaW5kcyB0byBhbiB1bmF2YWlsYWJsZSB2YXJpYW50KVxyXG4gICAgICAgICAqICAgIGl0IHJldHVybnMgYSBOb25lIEJ1eWFibGUgVmlld01vZGVsXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGdldFNlbGVjdGVkVmFyaWFudFZpZXdNb2RlbCgpIHtcclxuICAgICAgICAgICAgdmFyIHNlbGVjdGVkVmFyaWFudElkICA9IHRoaXMuY29udGV4dC52aWV3TW9kZWwuc2VsZWN0ZWRWYXJpYW50SWQ7XHJcbiAgICAgICAgICAgIHZhciBkaXNwbGF5ZWRWYXJpYW50SWQgPSB0aGlzLmNvbnRleHQudmlld01vZGVsLmRpc3BsYXllZFZhcmlhbnRJZDtcclxuXHJcbiAgICAgICAgICAgIGlmICghZGlzcGxheWVkVmFyaWFudElkKSB7XHJcbiAgICAgICAgICAgICAgICAvL1RoaXMgaXMgbW9zdGxpa2VseSBhIHByb2R1Y3RcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbnRleHQudmlld01vZGVsO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNlbGVjdGVkVmFyaWFudElkID09PSBkaXNwbGF5ZWRWYXJpYW50SWQpIHtcclxuICAgICAgICAgICAgICAgIC8vVGhpcyBpcyBtb3N0bGlrZWx5IGEgdmFyaWFudFxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmFyaWFudChzZWxlY3RlZFZhcmlhbnRJZCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAnSXNBdmFpbGFibGVUb1NlbGwnOiBmYWxzZVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gVE9ETyAoU0FNKSA6IGdldFZhcmlhbnQgYW5kIHVwZGF0ZVNlbGVjdGVkS3Zhc1dpdGggc2hvdWxkbid0IGJlIGluIHRoaXMgZmlsZS5cclxuICAgICAgICAvLyAgICAgICAgICAgICAgVGhleSdyZSBtb3JlIHN1aXRlZCB0byBhIENvbnRyb2xsZXIgb3IgYSBoZWxwZXIgY2xhc3MuXHJcblxyXG4gICAgICAgIC8vR2V0IHRoZSBWYXJpYW50IGZvciB0aGUgZ2l2ZW4gaWRcclxuICAgICAgICAvLzxwYXJhbSBuYW1lPVwidmFyaWFudElkXCI+VGhlIHZhcmlhbnQgaWQgdG8gZmluZDwvcGFyYW0+XHJcbiAgICAgICAgLy88cmV0dXJucz5LZXlWYXJpYW50QXR0cmlidXRlSXRlbSBWaWV3TW9kZWwgcmVhZHkgZm9yIHJlbmRlcjwvcmV0dXJucz5cclxuICAgICAgICBwdWJsaWMgZ2V0VmFyaWFudCh2YXJpYW50SWQ6IHN0cmluZyk6IGFueSB7XHJcbiAgICAgICAgICAgIHZhciBhbGxWYXJpYW50cyA9IHRoaXMuY29udGV4dC52aWV3TW9kZWwuYWxsVmFyaWFudHM7XHJcbiAgICAgICAgICAgIHZhciB2YXJpYW50ID0gXy5maW5kKGFsbFZhcmlhbnRzLCB7SWQ6IHZhcmlhbnRJZH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHZhcmlhbnQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdXBkYXRlU2VsZWN0ZWRLdmFzV2l0aChzZWxlY3Rpb25zVG9BZGQ6IGFueSwgY29uY2Vybjogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIHZhciBhbGxWYXJpYW50cyA9IHRoaXMuY29udGV4dC52aWV3TW9kZWwuYWxsVmFyaWFudHM7XHJcbiAgICAgICAgICAgIHZhciBpbml0aWFsU2VsZWN0ZWRLdmFzID0gdGhpcy5jb250ZXh0LnZpZXdNb2RlbC5zZWxlY3RlZEt2YXMgfHwge307XHJcbiAgICAgICAgICAgIHZhciBpbml0aWFsU2VsZWN0ZWRWYXJpYW50SWQgPSB0aGlzLmNvbnRleHQudmlld01vZGVsLnNlbGVjdGVkVmFyaWFudElkO1xyXG4gICAgICAgICAgICB2YXIgaW5pdGlhbERpc3BsYXllZFZhcmlhbnRJZCA9IHRoaXMuY29udGV4dC52aWV3TW9kZWwuZGlzcGxheWVkVmFyaWFudElkO1xyXG5cclxuICAgICAgICAgICAgLy9VcGRhdGUgY3VycmVudCBzZWxlY3Rpb25cclxuICAgICAgICAgICAgdmFyIHNlbGVjdGVkS3ZhcyA9IF8ubWVyZ2UoaW5pdGlhbFNlbGVjdGVkS3Zhcywgc2VsZWN0aW9uc1RvQWRkKTtcclxuXHJcbiAgICAgICAgICAgIC8vRmluZCBwb3NzaWJsZSBtYXRjaGVzXHJcbiAgICAgICAgICAgIHZhciB2YXJpYW50cyA9IF8uZmlsdGVyKGFsbFZhcmlhbnRzLCB7IEt2YXM6IHNlbGVjdGVkS3ZhcyB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmICh2YXJpYW50cyAmJiB2YXJpYW50cy5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgICAgIC8vRXhhY3RseSBvbmUgdmFyaWFudCBmb3VuZCwgbGV0J3MgdXBkYXRlIHRoZSBkZXRhaWwgdG8gZGlzcGxheSBpdC5cclxuICAgICAgICAgICAgICAgIHZhciB2YXJpYW50ID0gPGFueT52YXJpYW50c1swXTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQudmlld01vZGVsLnNlbGVjdGVkS3ZhcyA9IF8uY2xvbmUodmFyaWFudC5LdmFzKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dC52aWV3TW9kZWwuc2VsZWN0ZWRWYXJpYW50SWQgID0gdmFyaWFudC5JZDtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dC52aWV3TW9kZWwuZGlzcGxheWVkVmFyaWFudElkID0gdmFyaWFudC5JZDtcclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvL01vcmUgdGhhbiBvbmUgcG9zc2liaWxlIHZhcmlhbnRzLCBsZXQncyBub3QgYXNzdW1lIGFueSBzZWxlY3RlZCBvbmVzLlxyXG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0LnZpZXdNb2RlbC5zZWxlY3RlZEt2YXMgPSBzZWxlY3RlZEt2YXM7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQudmlld01vZGVsLnNlbGVjdGVkVmFyaWFudElkID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy9TdXBlcnNlZWQgdGhlIHByb2R1Y3QgZGV0YWlscyB3aXRoIHRoZSBzZWxlY3Rpb24gdmFyaWFudCBkZXRhaWxzXHJcbiAgICAgICAgICAgIF8uZXh0ZW5kKHRoaXMuY29udGV4dC52aWV3TW9kZWwsIHRoaXMuZ2V0U2VsZWN0ZWRWYXJpYW50Vmlld01vZGVsKCkpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5idWlsZEtleVZhcmlhbnRBdHRyaWJ1dGVJdGVtcyhjb25jZXJuKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChpbml0aWFsRGlzcGxheWVkVmFyaWFudElkICE9PSB0aGlzLmNvbnRleHQudmlld01vZGVsLmRpc3BsYXllZFZhcmlhbnRJZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKGNvbmNlcm4gKyAnRGlzcGxheWVkVmFyaWFudElkQ2hhbmdlZCcsIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWxEaXNwbGF5ZWRWYXJpYW50SWQ6IGluaXRpYWxEaXNwbGF5ZWRWYXJpYW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXlWYXJpYW50SWQ6IHRoaXMuY29udGV4dC52aWV3TW9kZWwuZGlzcGxheWVkVmFyaWFudElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFNrdTogdGhpcy5jb250ZXh0LnZpZXdNb2RlbC5Ta3VcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGluaXRpYWxTZWxlY3RlZFZhcmlhbnRJZCAhPT0gdGhpcy5jb250ZXh0LnZpZXdNb2RlbC5zZWxlY3RlZFZhcmlhbnRJZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKGNvbmNlcm4gKyAnU2VsZWN0ZWRWYXJpYW50SWRDaGFuZ2VkJywge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW5pdGlhbFNlbGVjdGVkVmFyaWFudElkOiBpbml0aWFsU2VsZWN0ZWRWYXJpYW50SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdGVkVmFyaWFudElkOiB0aGlzLmNvbnRleHQudmlld01vZGVsLnNlbGVjdGVkVmFyaWFudElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFNrdTogdGhpcy5jb250ZXh0LnZpZXdNb2RlbC5Ta3VcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKGNvbmNlcm4gKyAnSW1hZ2VzQ2hhbmdlZCcsIHsgZGF0YTogdGhpcy5jb250ZXh0LnZpZXdNb2RlbCB9KTtcclxuICAgICAgICAgICAgLy9JIHRoaW5rIHRoaXMgcHVibGlzaCBpcyB1bm5lY2Vzc2FyeSBiZWNhdXNlIGl0IGNhbGN1bGF0ZSB0aGUgcHJpY2UgYWZ0ZXIgb24gYSBBUEkgc2VydmVyIGNhbGxcclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKGNvbmNlcm4gKyAnUHJpY2VzQ2hhbmdlZCcsIHsgZGF0YTogdGhpcy5jb250ZXh0LnZpZXdNb2RlbCB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBnZXRSZWxhdGVkUHJvZHVjdHMocmVsYXRlZFByb2R1Y3RJZGVudGlmaWVyczogUHJvZHVjdElkZW50aWZpZXJEdG9bXSk6IFEuUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICAgICAgcmV0dXJuIENvbXBvc2VyQ2xpZW50LnBvc3QoJy9hcGkvcHJvZHVjdC9yZWxhdGVkUHJvZHVjdHMnLCByZWxhdGVkUHJvZHVjdElkZW50aWZpZXJzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBsb2FkUXVpY2tCdXlQcm9kdWN0KHByb2R1Y3RJZDogc3RyaW5nLCB2YXJpYW50SWQ6IHN0cmluZywgY29uY2Vybjogc3RyaW5nLCBzb3VyY2U6IHN0cmluZyk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgUHJvZHVjdElkOiBwcm9kdWN0SWQsXHJcbiAgICAgICAgICAgICAgICBWYXJpYW50SWQ6IHZhcmlhbnRJZFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIENvbXBvc2VyQ2xpZW50LnBvc3QoJy9hcGkvcHJvZHVjdC92YXJpYW50U2VsZWN0aW9uJywgZGF0YSlcclxuICAgICAgICAgICAgICAgIC50aGVuKChxdWlja0J1eVByb2R1Y3RWaWV3TW9kZWwpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goY29uY2VybiArICdRdWlja0J1eUxvYWRlZCcsIHsgZGF0YTogcXVpY2tCdXlQcm9kdWN0Vmlld01vZGVsLCBzb3VyY2U6IHNvdXJjZSB9KTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcXVpY2tCdXlQcm9kdWN0Vmlld01vZGVsO1xyXG4gICAgICAgICAgICAgICAgfSkuZmFpbCgocmVhc29uOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgbG9hZGluZyB0aGUgUHJvZHVjdFF1aWNrVmlldycsIHJlYXNvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgcmVhc29uO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZmluZEludmVudG9yeUl0ZW1zKHZpZXdNb2RlbDogYW55LCBjb25jZXJuOiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgdmFyIHNlbGVjdGVkU2t1OiBzdHJpbmcgID0gdmlld01vZGVsLlNrdSxcclxuICAgICAgICAgICAgICAgIHNrdXM6IHN0cmluZ1tdO1xyXG5cclxuICAgICAgICAgICAgaWYgKF8uaXNFbXB0eSh2aWV3TW9kZWwuYWxsVmFyaWFudHMpKSB7XHJcbiAgICAgICAgICAgICAgICBza3VzID0gW3ZpZXdNb2RlbC5Ta3VdO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgc2t1cyA9IF8ucGx1Y2sodmlld01vZGVsLmFsbFZhcmlhbnRzLCAnU2t1Jyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhID0geyBza3VzOiBza3VzIH07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gQ29tcG9zZXJDbGllbnQucG9zdCgnL2FwaS9pbnZlbnRvcnkvZmluZEludmVudG9yeUl0ZW1zJywgZGF0YSlcclxuICAgICAgICAgICAgICAgIC50aGVuKChza3VzQXZhaWxhYmxlVG9TZWxsKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlzQXZhaWxhYmxlVG9TZWxsID0gXy5pbmNsdWRlKHNrdXNBdmFpbGFibGVUb1NlbGwsIHNlbGVjdGVkU2t1KSAmJiB2aWV3TW9kZWwuSXNBdmFpbGFibGVUb1NlbGw7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKGNvbmNlcm4gKyAnSW52ZW50b3J5UmV0cmlldmVkJywgeyBkYXRhOiBpc0F2YWlsYWJsZVRvU2VsbCB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgIHB1YmxpYyBwcm9kdWN0QXZhaWxhYmxlVG9TZWxsKHNlbGVjdGVkU2t1OiBzdHJpbmcsIHByb2R1Y3RBdmFpbGFibGVUb1NlbGw6IHN0cmluZ1tdLCBwcm9kdWN0SXNBdmFpbGFibGVUb1NlbGw6IGJvb2xlYW4pIDogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiBfLmluY2x1ZGUocHJvZHVjdEF2YWlsYWJsZVRvU2VsbCwgc2VsZWN0ZWRTa3UpICYmIHByb2R1Y3RJc0F2YWlsYWJsZVRvU2VsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgYnVpbGRLZXlWYXJpYW50QXR0cmlidXRlSXRlbXMoY29uY2Vybjogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZEt2YXMgPSB0aGlzLmNvbnRleHQudmlld01vZGVsLnNlbGVjdGVkS3ZhcztcclxuICAgICAgICAgICAgdmFyIGJ1aWxkZXIgPSBuZXcgT3Jja2VzdHJhLkNvbXBvc2VyLktleVZhcmlhbnRBdHRyaWJ1dGVJdGVtc0J1aWxkZXIodGhpcy5jb250ZXh0KTtcclxuICAgICAgICAgICAgdmFyIGtleVZhcmlhbnRBdHRyaWJ1dGVJdGVtcyA9IGJ1aWxkZXIuQnVpbGRLZXlWYXJpYW50QXR0cmlidXRlSXRlbXNGb3Ioc2VsZWN0ZWRLdmFzKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaChjb25jZXJuICsgJ1NlbGVjdGVkS3Zhc0NoYW5nZWQnLCB7IGRhdGE6IGtleVZhcmlhbnRBdHRyaWJ1dGVJdGVtcyB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICBwdWJsaWMgcmVwbGFjZUhpc3RvcnkoKSB7XHJcbiAgICAgICAgICAgIHZhciB2YXJpYW50SWQgPSB0aGlzLmNvbnRleHQudmlld01vZGVsLnNlbGVjdGVkVmFyaWFudElkO1xyXG5cclxuICAgICAgICAgICAgLy9WYXJpYW50IHNlbGVjdGlvbiBpcyBub3QgdmFsaWQgdXNlIGxhc3QgdmFsaWRcclxuICAgICAgICAgICAgaWYgKHZhcmlhbnRJZCA9PT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZnVsbFBhdGhBcnJheSA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZS5zcGxpdCgnLycpLmZpbHRlcihCb29sZWFuKTtcclxuICAgICAgICAgICAgdmFyIHNob3J0UGF0aEFycmF5ID0gZnVsbFBhdGhBcnJheS5zbGljZSgwLCAzKTtcclxuICAgICAgICAgICAgc2hvcnRQYXRoQXJyYXkucHVzaCh2YXJpYW50SWQpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGJ1aWx0UGF0aCA9IHdpbmRvdy5sb2NhdGlvbi5wcm90b2NvbFxyXG4gICAgICAgICAgICArICcvLydcclxuICAgICAgICAgICAgKyB3aW5kb3cubG9jYXRpb24uaG9zdFxyXG4gICAgICAgICAgICArIHRoaXMuYnVpbGRVcmxQYXRoKHNob3J0UGF0aEFycmF5KTtcclxuXHJcbiAgICAgICAgICAgIGhpc3RvcnkucmVwbGFjZVN0YXRlKCB7fSAsIG51bGwsIGJ1aWx0UGF0aCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYnVpbGRVcmxQYXRoKHBhdGhBcnJheTogc3RyaW5nW10pIDogc3RyaW5nIHtcclxuICAgICAgICAgICAgdmFyIG5ld1BhdGhuYW1lID0gJyc7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGF0aEFycmF5Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgbmV3UGF0aG5hbWUgKz0gJy8nO1xyXG4gICAgICAgICAgICAgIG5ld1BhdGhuYW1lICs9IHBhdGhBcnJheVtpXTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5ld1BhdGhuYW1lO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L012Yy9Db21wb3NlckNsaWVudC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9FdmVudHMvRXZlbnRIdWIudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICAvKipcclxuICAgICAgKiBNb2R1bGUgaGVscGVyIHRvIGZvcm1hdCBzdHJpbmcgdmFsdWUgdXNpbmcgdGhlIE92ZXJ0dXJlIGNvbnZlcnRpb24gcnVsZXMuXHJcbiAgICAgICovXHJcbiAgICBleHBvcnQgY2xhc3MgUHJvZHVjdEZvcm1hdHRlciB7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIGNvbnZlcnQgYSBQcm9kdWN0UHJvcGVydHkgc3RyaW5nIHZhbHVlIGludG8gdGhlIHJpZ2h0IHN0cm9uZ2x5IHR5cGVkIHZhcmlhYmxlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogICAgIGZvcm1hdHRlci5jb252ZXJ0VG9TdHJvbmdseVR5cGVkKGFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHQudmFsKCksICdEZWNpbWFsJyk7XHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gc3RyVmFsdWUgICAgICAgICBUaGUgUHJvZHVjdFByb3BlcnR5IHZhbHVlIHRvIGNvbnZlcnRcclxuICAgICAgICAgKiBAcGFyYW0gcHJvcGVydHlEYXRhVHlwZSB0aGUgUHJvZHVjdFByb3BlcnR5LkRhdGFUeXBlIHRvIGluZHVjZSB0aGUgdHlwZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBjb252ZXJ0VG9TdHJvbmdseVR5cGVkKHN0clZhbHVlOiBzdHJpbmcsIHByb3BlcnR5RGF0YVR5cGU6IHN0cmluZyk6IGFueSB7XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZTogYW55O1xyXG5cclxuICAgICAgICAgICAgaWYgKHByb3BlcnR5RGF0YVR5cGUgPT09ICdEZWNpbWFsJykge1xyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSBwYXJzZUZsb2F0KHN0clZhbHVlKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChwcm9wZXJ0eURhdGFUeXBlID09PSAnTnVtYmVyJykge1xyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSBwYXJzZUludChzdHJWYWx1ZSwgMTApO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHByb3BlcnR5RGF0YVR5cGUgPT09ICdCb29sZWFuJykge1xyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSAoc3RyVmFsdWUgPT09ICd0cnVlJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocHJvcGVydHlEYXRhVHlwZSA9PT0gJ1RleHQnKSB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHN0clZhbHVlICsgJyc7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocHJvcGVydHlEYXRhVHlwZSA9PT0gJ0xvb2t1cCcpIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gc3RyVmFsdWUgKyAnJztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gc3RyVmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5DYXJ0LlVJL0NhcnRTdW1tYXJ5L1NvdXJjZS9UeXBlc2NyaXB0L0NhcnRTZXJ2aWNlLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLkNhcnQuVUkvV2lzaExpc3QvU291cmNlL1R5cGVzY3JpcHQvU2VydmljZXMvV2lzaExpc3RTZXJ2aWNlLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLkNhcnQuVUkvV2lzaExpc3QvU291cmNlL1R5cGVTY3JpcHQvV2lzaExpc3RSZXBvc2l0b3J5LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLk15QWNjb3VudC5VSS9Db21tb24vU291cmNlL1R5cGVTY3JpcHQvTWVtYmVyc2hpcFNlcnZpY2UudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvUmVwb3NpdG9yaWVzL0NhcnRSZXBvc2l0b3J5LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9Db250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9JQ29udHJvbGxlckFjdGlvbkNvbnRleHQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvRXZlbnRzL0lFdmVudEluZm9ybWF0aW9uLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L1VJL1VJQnVzeUhhbmRsZS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9FcnJvckhhbmRsaW5nL0Vycm9ySGFuZGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPSdJbnZlbnRvcnlTZXJ2aWNlLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9J1Byb2R1Y3RTZXJ2aWNlLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9J1Byb2R1Y3RGb3JtYXR0ZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nS2V5VmFyaWFudEF0dHJpYnV0ZUl0ZW1zQnVpbGRlci50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBQcm9kdWN0Q29udHJvbGxlciBleHRlbmRzIE9yY2tlc3RyYS5Db21wb3Nlci5Db250cm9sbGVyIHtcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGludmVudG9yeVNlcnZpY2UgPSBuZXcgSW52ZW50b3J5U2VydmljZSgpO1xyXG4gICAgICAgIHByb3RlY3RlZCBwcm9kdWN0U2VydmljZTogUHJvZHVjdFNlcnZpY2UgPSBuZXcgUHJvZHVjdFNlcnZpY2UodGhpcy5ldmVudEh1YiwgdGhpcy5jb250ZXh0KTtcclxuICAgICAgICBwcm90ZWN0ZWQgY2FydFNlcnZpY2U6IENhcnRTZXJ2aWNlID0gbmV3IENhcnRTZXJ2aWNlKG5ldyBDYXJ0UmVwb3NpdG9yeSgpLCB0aGlzLmV2ZW50SHViKTtcclxuICAgICAgICBwcm90ZWN0ZWQgX3dpc2hMaXN0U2VydmljZTogV2lzaExpc3RTZXJ2aWNlID0gbmV3IFdpc2hMaXN0U2VydmljZShuZXcgV2lzaExpc3RSZXBvc2l0b3J5KCksIHRoaXMuZXZlbnRIdWIpO1xyXG4gICAgICAgIHByb3RlY3RlZCBfbWVtYmVyc2hpcFNlcnZpY2U6IElNZW1iZXJzaGlwU2VydmljZSA9IG5ldyBNZW1iZXJzaGlwU2VydmljZShuZXcgTWVtYmVyc2hpcFJlcG9zaXRvcnkoKSk7XHJcblxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgY29uY2Vybjogc3RyaW5nO1xyXG5cclxuICAgICAgICBwdWJsaWMgaW5pdGlhbGl6ZSgpIHtcclxuXHJcbiAgICAgICAgICAgIHN1cGVyLmluaXRpYWxpemUoKTtcclxuICAgICAgICAgICAgdGhpcy5yZWdpc3RlclN1YnNjcmlwdGlvbnMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCByZWdpc3RlclN1YnNjcmlwdGlvbnMoKSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnN1YnNjcmliZSh0aGlzLmNvbmNlcm4gKyAnU2VsZWN0ZWRWYXJpYW50SWRDaGFuZ2VkJywgZSA9PiB0aGlzLm9uU2VsZWN0ZWRWYXJpYW50SWRDaGFuZ2VkKGUpKTtcclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5zdWJzY3JpYmUodGhpcy5jb25jZXJuICsgJ1NlbGVjdGVkS3Zhc0NoYW5nZWQnLCBlID0+IHRoaXMub25TZWxlY3RlZEt2YXNDaGFuZ2VkKGUpKTtcclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5zdWJzY3JpYmUodGhpcy5jb25jZXJuICsgJ0ltYWdlc0NoYW5nZWQnLCBlID0+IHRoaXMub25JbWFnZXNDaGFuZ2VkKGUpKTtcclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5zdWJzY3JpYmUodGhpcy5jb25jZXJuICsgJ1ByaWNlc0NoYW5nZWQnLCBlID0+IHRoaXMub25QcmljZXNDaGFuZ2VkKGUpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvblNlbGVjdGVkVmFyaWFudElkQ2hhbmdlZChlOiBJRXZlbnRJbmZvcm1hdGlvbikge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uU2VsZWN0ZWRLdmFzQ2hhbmdlZChlOiBJRXZlbnRJbmZvcm1hdGlvbikge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uSW1hZ2VzQ2hhbmdlZChlOiBJRXZlbnRJbmZvcm1hdGlvbikge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uUHJpY2VzQ2hhbmdlZChlOiBJRXZlbnRJbmZvcm1hdGlvbikge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHJlbmRlckRhdGEoKTogUS5Qcm9taXNlPHZvaWRbXT4ge1xyXG5cclxuICAgICAgICAgICAgdmFyIHF1YW50aXR5ID0gdGhpcy5nZXRDdXJyZW50UXVhbnRpdHkoKTtcclxuICAgICAgICAgICAgdmFyIHJlbmRlclRhc2tzOiBBcnJheTxRLlByb21pc2U8YW55Pj4gPSBbXTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzUHJvZHVjdFdpdGhWYXJpYW50cygpICYmIHRoaXMuaXNTZWxlY3RlZFZhcmlhbnRVbmF2YWlsYWJsZSgpKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgcmVuZGVyVGFza3MucHVzaCh0aGlzLnJlbmRlclVuYXZhaWxhYmxlUXVhbnRpdHkocXVhbnRpdHkpKTtcclxuICAgICAgICAgICAgICAgIHJlbmRlclRhc2tzLnB1c2godGhpcy5yZW5kZXJVbmF2YWlsYWJsZUFkZFRvQ2FydCgpKTtcclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgcmVuZGVyVGFza3MucHVzaCh0aGlzLnJlbmRlckF2YWlsYWJsZVF1YW50aXR5KHF1YW50aXR5KSk7XHJcbiAgICAgICAgICAgICAgICByZW5kZXJUYXNrcy5wdXNoKHRoaXMucmVuZGVyQXZhaWxhYmxlQWRkVG9DYXJ0KCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJlbmRlclRhc2tzLnB1c2godGhpcy5yZW5kZXJBZGRUb1dpc2hMaXN0KCkpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFEuYWxsKHJlbmRlclRhc2tzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBpc1Byb2R1Y3RXaXRoVmFyaWFudHMoKTogYm9vbGVhbiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gJC5pc0FycmF5KHRoaXMuY29udGV4dC52aWV3TW9kZWwuYWxsVmFyaWFudHMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGlzU2VsZWN0ZWRWYXJpYW50VW5hdmFpbGFibGUoKTogYm9vbGVhbiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gIXRoaXMuY29udGV4dC52aWV3TW9kZWwuc2VsZWN0ZWRWYXJpYW50SWQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgcmVuZGVyVW5hdmFpbGFibGVRdWFudGl0eShxdWFudGl0eTogYW55KTogUS5Qcm9taXNlPHZvaWQ+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBRLmZjYWxsKCgpID0+IHRoaXMucmVuZGVyKCdQcm9kdWN0UXVhbnRpdHknLCB7IFF1YW50aXR5OiBxdWFudGl0eSwgRGlzYWJsZWQ6IHRydWUgfSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHJlbmRlckF2YWlsYWJsZVF1YW50aXR5KHF1YW50aXR5OiBhbnkpOiBRLlByb21pc2U8dm9pZD4ge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW52ZW50b3J5U2VydmljZVxyXG4gICAgICAgICAgICAgICAgLmlzQXZhaWxhYmxlVG9TZWxsKHRoaXMuY29udGV4dC52aWV3TW9kZWwuU2t1KVxyXG4gICAgICAgICAgICAgICAgLnRoZW4ocmVzdWx0ID0+IHRoaXMucmVuZGVyKCdQcm9kdWN0UXVhbnRpdHknLCB7IFF1YW50aXR5OiBxdWFudGl0eSwgRGlzYWJsZWQ6ICFyZXN1bHQgfSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHJlbmRlckFkZFRvV2lzaExpc3QoKTogUS5Qcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICAgICAgdmFyIHZtID0gdGhpcy5jb250ZXh0LnZpZXdNb2RlbDtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXIoJ0FkZFRvV2lzaExpc3QnLCB7IExvYWRlZDogZmFsc2UgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5pc1Byb2R1Y3RXaXRoVmFyaWFudHMoKSAmJiB0aGlzLmlzU2VsZWN0ZWRWYXJpYW50VW5hdmFpbGFibGUoKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fd2lzaExpc3RTZXJ2aWNlLmdldExpbmVJdGVtKHZtLnByb2R1Y3RJZCwgdm0uc2VsZWN0ZWRWYXJpYW50SWQpXHJcbiAgICAgICAgICAgICAgICAudGhlbihyZXN1bHQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIoJ0FkZFRvV2lzaExpc3QnLCB7IExvYWRlZDogdHJ1ZSwgSXNJbldpc2hMaXN0OiB0cnVlLCBJZDogcmVzdWx0LklkIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKCdBZGRUb1dpc2hMaXN0JywgeyBMb2FkZWQ6IHRydWUsIElzSW5XaXNoTGlzdDogZmFsc2UgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgcmVuZGVyVW5hdmFpbGFibGVBZGRUb0NhcnQoKTogUS5Qcm9taXNlPHZvaWQ+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCByZW5kZXJBdmFpbGFibGVBZGRUb0NhcnQoKTogUS5Qcm9taXNlPHZvaWQ+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBkZWNyZW1lbnRRdWFudGl0eShhY3Rpb25Db250ZXh0OiBJQ29udHJvbGxlckFjdGlvbkNvbnRleHQpIHtcclxuICAgICAgICAgICAgdmFyIHF1YW50aXR5ID0gdGhpcy5nZXRDdXJyZW50UXVhbnRpdHkoKTtcclxuICAgICAgICAgICAgcXVhbnRpdHkuVmFsdWUtLTtcclxuXHJcbiAgICAgICAgICAgIGFjdGlvbkNvbnRleHQuZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJBdmFpbGFibGVRdWFudGl0eShxdWFudGl0eSkuZG9uZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGluY3JlbWVudFF1YW50aXR5KGFjdGlvbkNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCkge1xyXG4gICAgICAgICAgICB2YXIgcXVhbnRpdHkgPSB0aGlzLmdldEN1cnJlbnRRdWFudGl0eSgpO1xyXG4gICAgICAgICAgICBxdWFudGl0eS5WYWx1ZSsrO1xyXG5cclxuICAgICAgICAgICAgYWN0aW9uQ29udGV4dC5ldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlckF2YWlsYWJsZVF1YW50aXR5KHF1YW50aXR5KS5kb25lKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgY2hhbmdlUXVhbnRpdHkoYWN0aW9uQ29udGV4dDogSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0KSB7XHJcbiAgICAgICAgICAgIHZhciBxdWFudGl0eSA9IHRoaXMuZ2V0Q3VycmVudFF1YW50aXR5KCk7XHJcbiAgICAgICAgICAgIHZhciBuZXdWYWx1ZTogbnVtYmVyID0gcGFyc2VJbnQoYWN0aW9uQ29udGV4dC5lbGVtZW50Q29udGV4dC52YWwoKSwgMTApO1xyXG5cclxuICAgICAgICAgICAgaWYgKGlzRmluaXRlKG5ld1ZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgcXVhbnRpdHkuVmFsdWUgPSBNYXRoLm1heChNYXRoLm1pbihuZXdWYWx1ZSwgcXVhbnRpdHkuTWF4KSwgcXVhbnRpdHkuTWluKTsgLy8gY29uc3RyYWludCBuZXd2YWx1ZSB0byBtYXggYW5kIG1pbi5cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJBdmFpbGFibGVRdWFudGl0eShxdWFudGl0eSkuZG9uZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGFkZExpbmVJdGVtVG9XaXNoTGlzdChhY3Rpb25Db250ZXh0OiBJQ29udHJvbGxlckFjdGlvbkNvbnRleHQpIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX21lbWJlcnNoaXBTZXJ2aWNlLmlzQXV0aGVudGljYXRlZCgpLnRoZW4ocmVzdWx0ID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuSXNBdXRoZW50aWNhdGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHZtID0gdGhpcy5jb250ZXh0LnZpZXdNb2RlbDtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYnVzeSA9IHRoaXMuYXN5bmNCdXN5KHsgZWxlbWVudENvbnRleHQ6IGFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHQgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGFuYWx5dGljRGF0YSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgRGlzcGxheU5hbWU6IHZtLkRpc3BsYXlOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBMaXN0UHJpY2U6IHZtLkxpc3RQcmljZVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaCgnd2lzaExpc3RMaW5lSXRlbUFkZGluZycsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogYW5hbHl0aWNEYXRhXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3dpc2hMaXN0U2VydmljZS5hZGRMaW5lSXRlbSh2bS5wcm9kdWN0SWQsIHZtLnNlbGVjdGVkVmFyaWFudElkKS50aGVuKGRhdGEgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGluZUl0ZW0gPSBkYXRhLkl0ZW1zLmZpbHRlcihpdCA9PiBpdC5Qcm9kdWN0SWQgPT09IHZtLnByb2R1Y3RJZCAmJiBpdC5WYXJpYW50SWQgPT09IHZtLnNlbGVjdGVkVmFyaWFudElkKVswXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIoJ0FkZFRvV2lzaExpc3QnLCB7IExvYWRlZDogdHJ1ZSwgSXNJbldpc2hMaXN0OiB0cnVlLCBJZDogbGluZUl0ZW0uSWQgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSkuZmluKCgpID0+IGJ1c3kuZG9uZSgpKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVkaXJlY3RUb1NpZ25JbkJlZm9yZUFkZFRvV2lzaExpc3QoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHJlbW92ZUxpbmVJdGVtVG9XaXNoTGlzdChhY3Rpb25Db250ZXh0OiBJQ29udHJvbGxlckFjdGlvbkNvbnRleHQpIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX21lbWJlcnNoaXBTZXJ2aWNlLmlzQXV0aGVudGljYXRlZCgpLnRoZW4ocmVzdWx0ID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuSXNBdXRoZW50aWNhdGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlkID0gYWN0aW9uQ29udGV4dC5lbGVtZW50Q29udGV4dC5kYXRhKCdpZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBidXN5ID0gdGhpcy5hc3luY0J1c3koeyBlbGVtZW50Q29udGV4dDogYWN0aW9uQ29udGV4dC5lbGVtZW50Q29udGV4dCB9KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl93aXNoTGlzdFNlcnZpY2UucmVtb3ZlTGluZUl0ZW0oaWQpLnRoZW4oZGF0YSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKCdBZGRUb1dpc2hMaXN0JywgeyBMb2FkZWQ6IHRydWUsIElzSW5XaXNoTGlzdDogZmFsc2UgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSkuZmluKCgpID0+IGJ1c3kuZG9uZSgpKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWRpcmVjdFRvU2lnbkluQmVmb3JlQWRkVG9XaXNoTGlzdCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgcmVkaXJlY3RUb1NpZ25JbkJlZm9yZUFkZFRvV2lzaExpc3QoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3dpc2hMaXN0U2VydmljZS5nZXRTaWduSW5VcmwoKS50aGVuKHNpZ25JblVybCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl93aXNoTGlzdFNlcnZpY2UuY2xlYXJDYWNoZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0LndpbmRvdy5sb2NhdGlvbi5ocmVmID0gc2lnbkluVXJsICsgJz9SZXR1cm5Vcmw9JyArIHRoaXMuY29udGV4dC53aW5kb3cubG9jYXRpb24uaHJlZjtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYWRkTGluZUl0ZW0oYWN0aW9uQ29udGV4dDogSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0KSB7XHJcbiAgICAgICAgICAgIHZhciBidXN5ID0gdGhpcy5hc3luY0J1c3koeyBlbGVtZW50Q29udGV4dDogYWN0aW9uQ29udGV4dC5lbGVtZW50Q29udGV4dCB9KTtcclxuICAgICAgICAgICAgdmFyIHF1YW50aXR5ID0gdGhpcy5nZXRDdXJyZW50UXVhbnRpdHkoKTtcclxuICAgICAgICAgICAgdmFyIHZtID0gdGhpcy5jb250ZXh0LnZpZXdNb2RlbDtcclxuICAgICAgICAgICAgdmFyIHZhcmlhbnQ6IGFueSA9IF8uZmluZCh2bS5hbGxWYXJpYW50cywgKHY6IGFueSkgPT4gdi5JZCA9PT0gdm0uc2VsZWN0ZWRWYXJpYW50SWQpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGRhdGE6IGFueSA9IHRoaXMuZ2V0UHJvZHVjdERhdGFGb3JBbmFseXRpY3Modm0pO1xyXG4gICAgICAgICAgICBkYXRhLlF1YW50aXR5ID0gcXVhbnRpdHkuVmFsdWUgPyBxdWFudGl0eS5WYWx1ZSA6IDE7XHJcbiAgICAgICAgICAgIGlmICh2YXJpYW50KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdmFyaWFudERhdGE6IGFueSA9IHRoaXMuZ2V0VmFyaWFudERhdGFGb3JBbmFseXRpY3ModmFyaWFudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgXy5leHRlbmQoZGF0YSwgdmFyaWFudERhdGEpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goJ2xpbmVJdGVtQWRkaW5nJyxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiBkYXRhXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuYWRkTGluZUl0ZW1JbXBsKHZtLnByb2R1Y3RJZCwgdm0uTGlzdFByaWNlLCB2bS5zZWxlY3RlZFZhcmlhbnRJZCwgcXVhbnRpdHkpXHJcbiAgICAgICAgICAgICAgICAudGhlbigoZGF0YTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkFkZExpbmVJdGVtU3VjY2VzcyhkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICBhY3Rpb25Db250ZXh0LmVsZW1lbnRDb250ZXh0LmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICAgICAgICAgICAgICB9LCAocmVhc29uOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQWRkTGluZUl0ZW1GYWlsZWQocmVhc29uKTtcclxuICAgICAgICAgICAgICAgICAgICBhY3Rpb25Db250ZXh0LmVsZW1lbnRDb250ZXh0LmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgcmVhc29uO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC50aGVuKChkYXRhOiBhbnkpID0+IHRoaXMuY29tcGxldGVBZGRMaW5lSXRlbShxdWFudGl0eSkpXHJcbiAgICAgICAgICAgICAgICAuZmluKCgpID0+IGJ1c3kuZG9uZSgpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvbkFkZExpbmVJdGVtU3VjY2VzcyhkYXRhOiBhbnkpOiB2b2lkIHtcclxuICAgICAgICAgICAgRXJyb3JIYW5kbGVyLmluc3RhbmNlKCkucmVtb3ZlRXJyb3JzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb25BZGRMaW5lSXRlbUZhaWxlZChyZWFzb246IGFueSk6IHZvaWQge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBvbiBhZGRpbmcgbGluZSBpdGVtJywgcmVhc29uKTtcclxuICAgICAgICAgICAgRXJyb3JIYW5kbGVyLmluc3RhbmNlKCkub3V0cHV0RXJyb3JGcm9tQ29kZSgnQWRkVG9DYXJ0RmFpbGVkJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgZ2V0Q3VycmVudFF1YW50aXR5KCkge1xyXG4gICAgICAgICAgICB2YXIgZWxlbWVudDogSlF1ZXJ5ID0gJCh0aGlzLmNvbnRleHQuY29udGFpbmVyKS5maW5kKCdbbmFtZT1cInByb2R1Y3QtcXVhbnRpdHlcIl0nKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBNaW46IHBhcnNlSW50KGVsZW1lbnQuZGF0YSgncXVhbnRpdHlNaW4nKSwgMTApLFxyXG4gICAgICAgICAgICAgICAgTWF4OiBwYXJzZUludChlbGVtZW50LmRhdGEoJ3F1YW50aXR5TWF4JyksIDEwKSxcclxuICAgICAgICAgICAgICAgIFZhbHVlOiBwYXJzZUludChlbGVtZW50LmRhdGEoJ3F1YW50aXR5JyksIDEwKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBhZGRMaW5lSXRlbUltcGwocHJvZHVjdElkOiBzdHJpbmcsIHByaWNlOiBzdHJpbmcsIHZhcmlhbnRJZDogc3RyaW5nLCBxdWFudGl0eTogYW55KTogUS5Qcm9taXNlPGFueT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jYXJ0U2VydmljZS5hZGRMaW5lSXRlbShwcm9kdWN0SWQsIHByaWNlLCB2YXJpYW50SWQsIHF1YW50aXR5LlZhbHVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBjb21wbGV0ZUFkZExpbmVJdGVtKHF1YW50aXR5QWRkZWQ6IGFueSk6IFEuUHJvbWlzZTx2b2lkPiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc2VsZWN0SW1hZ2UoYWN0aW9uQ29udGV4dDogSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0KSB7XHJcblxyXG4gICAgICAgICAgICBhY3Rpb25Db250ZXh0LmV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgY2xpY2tlZEltYWdlSW5kZXg6IGFueSA9IGFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHQuZGF0YSgnaW5kZXgnKTtcclxuICAgICAgICAgICAgdGhpcy5wcm9kdWN0U2VydmljZS5zZWxlY3RJbWFnZShjbGlja2VkSW1hZ2VJbmRleCwgdGhpcy5jb25jZXJuKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzZWxlY3RLdmEoYWN0aW9uQ29udGV4dDogSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0KSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgc2VsZWN0aW9uc1RvQWRkID0ge307XHJcbiAgICAgICAgICAgIHZhciBwcm9wZXJ0eU5hbWU6IGFueSA9IGFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHQucGFyZW50cygnW2RhdGEtcHJvcGVydHluYW1lXScpLmRhdGEoJ3Byb3BlcnR5bmFtZScpO1xyXG4gICAgICAgICAgICB2YXIgcHJvcGVydHlEYXRhVHlwZTogYW55ID0gYWN0aW9uQ29udGV4dC5lbGVtZW50Q29udGV4dC5wYXJlbnRzKCdbZGF0YS1wcm9wZXJ0eWRhdGF0eXBlXScpLmRhdGEoJ3Byb3BlcnR5ZGF0YXR5cGUnKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBmb3JtYXR0ZXIgPSBuZXcgT3Jja2VzdHJhLkNvbXBvc2VyLlByb2R1Y3RGb3JtYXR0ZXIoKTtcclxuICAgICAgICAgICAgdmFyIHZhbHVlID0gZm9ybWF0dGVyLmNvbnZlcnRUb1N0cm9uZ2x5VHlwZWQoYWN0aW9uQ29udGV4dC5lbGVtZW50Q29udGV4dC52YWwoKSwgcHJvcGVydHlEYXRhVHlwZSk7XHJcblxyXG4gICAgICAgICAgICBzZWxlY3Rpb25zVG9BZGRbcHJvcGVydHlOYW1lXSA9IHZhbHVlO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5wcm9kdWN0U2VydmljZS51cGRhdGVTZWxlY3RlZEt2YXNXaXRoKHNlbGVjdGlvbnNUb0FkZCwgdGhpcy5jb25jZXJuKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBjYWxjdWxhdGVQcmljZSgpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcm9kdWN0U2VydmljZS5jYWxjdWxhdGVQcmljZSh0aGlzLmNvbnRleHQudmlld01vZGVsLnByb2R1Y3RJZCwgdGhpcy5jb25jZXJuKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBnZXRQcm9kdWN0RGF0YUZvckFuYWx5dGljcyh2bTogYW55KTogYW55IHtcclxuICAgICAgICAgICAgdmFyIHByb2R1Y3RJZDogc3RyaW5nID0gKHZtLnByb2R1Y3RJZCkgPyB2bS5wcm9kdWN0SWQgOiB2bS5Qcm9kdWN0SWQ7XHJcblxyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIExpc3Q6IHRoaXMuZ2V0TGlzdE5hbWVGb3JBbmFseXRpY3MoKSxcclxuICAgICAgICAgICAgICAgIFByb2R1Y3RJZDogcHJvZHVjdElkLFxyXG4gICAgICAgICAgICAgICAgRGlzcGxheU5hbWU6IHZtLkRpc3BsYXlOYW1lLFxyXG4gICAgICAgICAgICAgICAgTGlzdFByaWNlOiB2bS5MaXN0UHJpY2UsXHJcbiAgICAgICAgICAgICAgICBCcmFuZDogdm0uQnJhbmQsXHJcbiAgICAgICAgICAgICAgICBDYXRlZ29yeUlkOiB2bS5DYXRlZ29yeUlkXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBnZXRMaXN0TmFtZUZvckFuYWx5dGljcygpOiBzdHJpbmcge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0xpc3ROYW1lIG5vdCBkZWZpbmVkIGZvciB0aGlzIGNvbnRyb2xsZXInKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBnZXRWYXJpYW50RGF0YUZvckFuYWx5dGljcyh2YXJpYW50OiBhbnkpOiBhbnkge1xyXG4gICAgICAgICAgICB2YXIgdmFyaWFudE5hbWU6IHN0cmluZyA9IHRoaXMuYnVpbGRWYXJpYW50TmFtZSh2YXJpYW50Lkt2YXMpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGRhdGE6IGFueSA9IHtcclxuICAgICAgICAgICAgICAgIFZhcmlhbnQ6IHZhcmlhbnROYW1lLFxyXG4gICAgICAgICAgICAgICAgTmFtZTogdmFyaWFudC5EaXNwbGF5TmFtZSA/IHZhcmlhbnQuRGlzcGxheU5hbWUgOiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICBMaXN0UHJpY2U6IHZhcmlhbnQuTGlzdFByaWNlXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBidWlsZFZhcmlhbnROYW1lKGt2YXM6IGFueSk6IHN0cmluZyB7XHJcbiAgICAgICAgICAgIHZhciBrZXlzOiBzdHJpbmdbXSA9IE9iamVjdC5rZXlzKGt2YXMpLnNvcnQoKTtcclxuICAgICAgICAgICAgdmFyIG5hbWVQYXJ0czogc3RyaW5nW10gPSBbXTtcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGk6IG51bWJlciA9IDA7IGkgPCBrZXlzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIga2V5OiBzdHJpbmcgPSBrZXlzW2ldO1xyXG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlOiBhbnkgPSBrdmFzW2tleV07XHJcblxyXG4gICAgICAgICAgICAgICAgbmFtZVBhcnRzLnB1c2godmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbmFtZVBhcnRzLmpvaW4oJyAnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Qcm9kdWN0L1NvdXJjZS9UeXBlc2NyaXB0L1Byb2R1Y3RDb250cm9sbGVyLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgY2xhc3MgUHJvZHVjdERldGFpbENvbnRyb2xsZXIgZXh0ZW5kcyBPcmNrZXN0cmEuQ29tcG9zZXIuUHJvZHVjdENvbnRyb2xsZXIge1xyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgX2NvbmNlcm46IHN0cmluZyA9ICdwcm9kdWN0RGV0YWlsJztcclxuXHJcbiAgICAgICAgcHVibGljIGluaXRpYWxpemUoKSB7XHJcblxyXG4gICAgICAgICAgICBzdXBlci5pbml0aWFsaXplKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnByb2R1Y3RTZXJ2aWNlLnVwZGF0ZVNlbGVjdGVkS3Zhc1dpdGgodGhpcy5jb250ZXh0LnZpZXdNb2RlbC5zZWxlY3RlZEt2YXMsIHRoaXMuX2NvbmNlcm4pO1xyXG5cclxuICAgICAgICAgICAgdmFyIHByaWNlRGlzcGxheUJ1c3k6IFVJQnVzeUhhbmRsZSA9IHRoaXMuYXN5bmNCdXN5KHtcclxuICAgICAgICAgICAgICAgIG1zRGVsYXk6IDMwMCxcclxuICAgICAgICAgICAgICAgIGxvYWRpbmdJbmRpY2F0b3JTZWxlY3RvcjogJy5sb2FkaW5nLWluZGljYXRvci1wcmljZWRpc2NvdW50J1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHZhciBhZGRUb0NhcnRCdXN5OiBVSUJ1c3lIYW5kbGUgPSB0aGlzLmFzeW5jQnVzeSh7XHJcbiAgICAgICAgICAgICAgICBtc0RlbGF5OiAzMDAsXHJcbiAgICAgICAgICAgICAgICBsb2FkaW5nSW5kaWNhdG9yU2VsZWN0b3I6ICcubG9hZGluZy1pbmRpY2F0b3ItaW52ZW50b3J5J1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIFEud2hlbih0aGlzLmNhbGN1bGF0ZVByaWNlKCkpLmRvbmUoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcHJpY2VEaXNwbGF5QnVzeS5kb25lKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5ub3RpZnlBbmFseXRpY3NPZlByb2R1Y3REZXRhaWxzSW1wcmVzc2lvbigpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgUS53aGVuKHRoaXMucmVuZGVyRGF0YSgpKS5kb25lKCgpID0+IGFkZFRvQ2FydEJ1c3kuZG9uZSgpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBnZXRMaXN0TmFtZUZvckFuYWx5dGljcygpOiBzdHJpbmcge1xyXG4gICAgICAgICAgICByZXR1cm4gJ0RldGFpbCc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgbm90aWZ5QW5hbHl0aWNzT2ZQcm9kdWN0RGV0YWlsc0ltcHJlc3Npb24oKSB7XHJcbiAgICAgICAgICAgIHZhciB2bSA9IHRoaXMuY29udGV4dC52aWV3TW9kZWw7XHJcbiAgICAgICAgICAgIHZhciB2YXJpYW50OiBhbnkgPSBfLmZpbmQodm0uYWxsVmFyaWFudHMsICh2OiBhbnkpID0+IHYuSWQgPT09IHZtLnNlbGVjdGVkVmFyaWFudElkKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhOiBhbnkgPSB0aGlzLmdldFByb2R1Y3REYXRhRm9yQW5hbHl0aWNzKHZtKTtcclxuICAgICAgICAgICAgaWYgKHZhcmlhbnQpIHtcclxuICAgICAgICAgICAgICAgIHZhciB2YXJpYW50RGF0YTogYW55ID0gdGhpcy5nZXRWYXJpYW50RGF0YUZvckFuYWx5dGljcyh2YXJpYW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICBfLmV4dGVuZChkYXRhLCB2YXJpYW50RGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMucHVibGlzaFByb2R1Y3RJbXByZXNzaW9uRXZlbnQoZGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgcHVibGlzaFByb2R1Y3RJbXByZXNzaW9uRXZlbnQoZGF0YTogYW55KSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaCgncHJvZHVjdERldGFpbHNSZW5kZXJlZCcsXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogZGF0YVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb25TZWxlY3RlZFZhcmlhbnRJZENoYW5nZWQoZTogSUV2ZW50SW5mb3JtYXRpb24pIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyRGF0YSgpLmRvbmUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvblNlbGVjdGVkS3Zhc0NoYW5nZWQoZTogSUV2ZW50SW5mb3JtYXRpb24pIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKCdLdmFJdGVtcycsIHsgS2V5VmFyaWFudEF0dHJpYnV0ZUl0ZW1zOiBlLmRhdGEgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb25JbWFnZXNDaGFuZ2VkKGU6IElFdmVudEluZm9ybWF0aW9uKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5pc1Byb2R1Y3RXaXRoVmFyaWFudHMoKSAmJiB0aGlzLmlzU2VsZWN0ZWRWYXJpYW50VW5hdmFpbGFibGUoKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIoJ1Byb2R1Y3RJbWFnZXMnLCB0aGlzLmdldFVuYXZhaWxhYmxlUHJvZHVjdEltYWdlcyhlKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcignUHJvZHVjdEltYWdlcycsIGUuZGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgZ2V0VW5hdmFpbGFibGVQcm9kdWN0SW1hZ2VzKGU6IElFdmVudEluZm9ybWF0aW9uKTogYW55IHtcclxuXHJcbiAgICAgICAgICAgIHZhciBmYWxsYmFja0ltYWdlVXJsOiBzdHJpbmcgPSBlLmRhdGEuRmFsbGJhY2tJbWFnZVVybDtcclxuXHJcbiAgICAgICAgICAgIHZhciBpbWFnZTogYW55ID0ge1xyXG4gICAgICAgICAgICAgICAgVGh1bWJuYWlsVXJsOiBmYWxsYmFja0ltYWdlVXJsLFxyXG4gICAgICAgICAgICAgICAgSW1hZ2VVcmw6IGZhbGxiYWNrSW1hZ2VVcmwsXHJcbiAgICAgICAgICAgICAgICBTZWxlY3RlZDogdHJ1ZVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdmFyIHZtOiBhbnkgPSB7XHJcbiAgICAgICAgICAgICAgICBEaXNwbGF5TmFtZTogZS5kYXRhLkRpc3BsYXlOYW1lLFxyXG4gICAgICAgICAgICAgICAgSW1hZ2VzOiBbaW1hZ2VdLFxyXG4gICAgICAgICAgICAgICAgU2VsZWN0ZWRJbWFnZToge1xyXG4gICAgICAgICAgICAgICAgICAgIEltYWdlVXJsOiBmYWxsYmFja0ltYWdlVXJsXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdm07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb25QcmljZXNDaGFuZ2VkKGU6IElFdmVudEluZm9ybWF0aW9uKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5pc1Byb2R1Y3RXaXRoVmFyaWFudHMoKSAmJiB0aGlzLmlzU2VsZWN0ZWRWYXJpYW50VW5hdmFpbGFibGUoKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIoJ1ByaWNlRGlzY291bnQnLCBudWxsKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKCdQcmljZURpc2NvdW50JywgZS5kYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHJlbmRlclVuYXZhaWxhYmxlQWRkVG9DYXJ0KCk6IFEuUHJvbWlzZTx2b2lkPiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gUS5mY2FsbCgoKSA9PiB0aGlzLnJlbmRlcignQWRkVG9DYXJ0UHJvZHVjdERldGFpbCcsIHsgSXNVbmF2YWlsYWJsZTogdHJ1ZSB9KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgcmVuZGVyQXZhaWxhYmxlQWRkVG9DYXJ0KCk6IFEuUHJvbWlzZTx2b2lkPiB7XHJcblxyXG4gICAgICAgICAgICB2YXIgc2t1OiBzdHJpbmcgPSB0aGlzLmNvbnRleHQudmlld01vZGVsLlNrdTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmludmVudG9yeVNlcnZpY2UuaXNBdmFpbGFibGVUb1NlbGwoc2t1KVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC50aGVuKHJlc3VsdCA9PiB0aGlzLnJlbmRlcignQWRkVG9DYXJ0UHJvZHVjdERldGFpbCcsIHsgSXNBdmFpbGFibGVUb1NlbGw6IHJlc3VsdCB9KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc2VsZWN0S3ZhKGFjdGlvbkNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCkge1xyXG5cclxuICAgICAgICAgICAgc3VwZXIuc2VsZWN0S3ZhKGFjdGlvbkNvbnRleHQpO1xyXG5cclxuICAgICAgICAgICAgLy9JRTggY2hlY2tcclxuICAgICAgICAgICAgaWYgKGhpc3RvcnkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucHJvZHVjdFNlcnZpY2UucmVwbGFjZUhpc3RvcnkoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGNvbXBsZXRlQWRkTGluZUl0ZW0ocXVhbnRpdHlBZGRlZDogYW55KTogUS5Qcm9taXNlPHZvaWQ+IHtcclxuXHJcbiAgICAgICAgICAgIHZhciBxdWFudGl0eSA9IHtcclxuICAgICAgICAgICAgICAgIE1pbjogcXVhbnRpdHlBZGRlZC5NaW4sXHJcbiAgICAgICAgICAgICAgICBNYXg6IHF1YW50aXR5QWRkZWQuTWF4LFxyXG4gICAgICAgICAgICAgICAgVmFsdWU6IHF1YW50aXR5QWRkZWQuTWluXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJBdmFpbGFibGVRdWFudGl0eShxdWFudGl0eSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vUHJvZHVjdC9Tb3VyY2UvVHlwZXNjcmlwdC9Qcm9kdWN0Q29udHJvbGxlci50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgZXhwb3J0IGNsYXNzIFByb2R1Y3Rab29tQ29udHJvbGxlciBleHRlbmRzIE9yY2tlc3RyYS5Db21wb3Nlci5Qcm9kdWN0Q29udHJvbGxlciB7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKCkge1xyXG5cclxuICAgICAgICAgICAgc3VwZXIuaW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLmluaXRab29tKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb3Blblpvb20oZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0KSB7XHJcbiAgICAgICAgICAgIGxldCBjb250ZXh0JDogSlF1ZXJ5ID0gJChldmVudC50YXJnZXQpLFxyXG4gICAgICAgICAgICAgICAgaW5kZXg6IG51bWJlciA9IHBhcnNlSW50KCQoJy5qcy10aHVtYm5haWwuYWN0aXZlJykuYXR0cignZGF0YS1pbmRleCcpLCAxMCk7XHJcblxyXG4gICAgICAgICAgICAkKCcuanMtem9vbS10aHVtYm5haWwnKS5lcShpbmRleCkuY2xpY2soKTtcclxuICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgJCgnLm1vZGFsLWZ1bGxzY3JlZW4nKS5tb2RhbCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGNoYW5nZVpvb21lZEltYWdlKGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCkge1xyXG4gICAgICAgICAgICBsZXQgY29udGV4dCQ6IEpRdWVyeSA9ICQoZXZlbnQudGFyZ2V0KSxcclxuICAgICAgICAgICAgICAgIGxhcmdlSW1hZ2U6IEhUTUxJbWFnZUVsZW1lbnQgPSA8SFRNTEltYWdlRWxlbWVudD5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtem9vbS1pbWFnZScpLFxyXG4gICAgICAgICAgICAgICAgc2VsZWN0b3I6IHN0cmluZyA9IGV2ZW50LnRhcmdldC50YWdOYW1lLCAvLyBDbGlja2VkIEhUTUwgZWxlbWVudFxyXG4gICAgICAgICAgICAgICAgJGxhcmdlSW1hZ2U6IEpRdWVyeSA9ICQobGFyZ2VJbWFnZSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoc2VsZWN0b3IudG9Mb2NhbGVMb3dlckNhc2UoKSAhPT0gJ2EnKSB7XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0JCA9IGNvbnRleHQkLnBhcmVudCgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAkKCcuanMtem9vbS10aHVtYm5haWwnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcblxyXG4gICAgICAgICAgICBjb250ZXh0JC5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICRsYXJnZUltYWdlLmF0dHIoJ3NyYycsIGNvbnRleHQkLmF0dHIoJ2RhdGEtaW1hZ2UnKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgZXJyb3Jab29tZWRJbWFnZShldmVudDogSlF1ZXJ5RXZlbnRPYmplY3QpIHtcclxuICAgICAgICAgICAgdmFyICRlbGVtZW50ID0gJChldmVudC50YXJnZXQpLFxyXG4gICAgICAgICAgICAgICAgZmFsbGJhY2tJbWFnZVVybCA9ICRlbGVtZW50LmF0dHIoJ2RhdGEtZmFsbGJhY2staW1hZ2UtdXJsJyk7XHJcblxyXG4gICAgICAgICAgICAkZWxlbWVudC5hdHRyKCdzcmMnLCBmYWxsYmFja0ltYWdlVXJsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBpbml0Wm9vbSgpIHtcclxuICAgICAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5qcy16b29tJywgKGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCkgPT4gdGhpcy5vcGVuWm9vbShldmVudCkpO1xyXG4gICAgICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLmpzLXpvb20tdGh1bWJuYWlsJywgKGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCkgPT4gdGhpcy5jaGFuZ2Vab29tZWRJbWFnZShldmVudCkpO1xyXG4gICAgICAgICAgICAkKCcuanMtem9vbS1pbWFnZScpLm9uKCdlcnJvcicsIChldmVudDogSlF1ZXJ5RXZlbnRPYmplY3QpID0+IHRoaXMuZXJyb3Jab29tZWRJbWFnZShldmVudCkpO1xyXG5cclxuICAgICAgICAgICAgLy8gU2VsZWN0IGZpcnN0IHRodW1ibmFpbFxyXG4gICAgICAgICAgICAkKCcuanMtem9vbS10aHVtYm5haWwnKS5lcSgwKS5jbGljaygpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L012Yy9Db21wb3NlckNsaWVudC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9FdmVudHMvRXZlbnRIdWIudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgUHJvZHVjdFNwZWNpZmljYXRpb25zU2VydmljZSB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgbWVtb2l6ZVByb2R1Y3RTcGVjaWZpY2F0aW9uczogRnVuY3Rpb247XHJcblxyXG4gICAgICAgIHB1YmxpYyBnZXRQcm9kdWN0U3BlY2lmaWNhdGlvbnMocHJvZHVjdElkOiBzdHJpbmcsIHZhcmlhbnRJZDogc3RyaW5nKTogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgaWYgKCFwcm9kdWN0SWQpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIHByb2R1Y3QgaWQgaXMgcmVxdWlyZWQnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLm1lbW9pemVQcm9kdWN0U3BlY2lmaWNhdGlvbnMpIHtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLm1lbW9pemVQcm9kdWN0U3BlY2lmaWNhdGlvbnMgPVxyXG4gICAgICAgICAgICAgICAgICAgIF8ubWVtb2l6ZSh0aGlzLmdldFByb2R1Y3RTcGVjaWZpY2F0aW9uc0ltcGwsIChwcm9kdWN0SWQsIHZhcmlhbnRJZCkgPT4gdmFyaWFudElkKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubWVtb2l6ZVByb2R1Y3RTcGVjaWZpY2F0aW9ucyhwcm9kdWN0SWQsIHZhcmlhbnRJZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGdldFByb2R1Y3RTcGVjaWZpY2F0aW9uc0ltcGwocHJvZHVjdElkOiBzdHJpbmcsIHZhcmlhbnRJZDogc3RyaW5nKTogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7IHByb2R1Y3RJZDogcHJvZHVjdElkLCB2YXJpYW50SWQ6IHZhcmlhbnRJZCB9O1xyXG4gICAgICAgICAgICByZXR1cm4gQ29tcG9zZXJDbGllbnQucG9zdCgnL2FwaS9wcm9kdWN0L3NwZWNpZmljYXRpb25zJywgZGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0NvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvRXZlbnRzL0lFdmVudEluZm9ybWF0aW9uLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9J1Byb2R1Y3RTcGVjaWZpY2F0aW9uc1NlcnZpY2UudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIGV4cG9ydCBjbGFzcyBQcm9kdWN0U3BlY2lmaWNhdGlvbnNDb250cm9sbGVyIGV4dGVuZHMgT3Jja2VzdHJhLkNvbXBvc2VyLkNvbnRyb2xsZXIge1xyXG5cclxuICAgICAgICBwcml2YXRlIHNlcnZpY2U6IFByb2R1Y3RTcGVjaWZpY2F0aW9uc1NlcnZpY2UgPSBuZXcgUHJvZHVjdFNwZWNpZmljYXRpb25zU2VydmljZSgpO1xyXG5cclxuICAgICAgICBwdWJsaWMgaW5pdGlhbGl6ZSgpIHtcclxuXHJcbiAgICAgICAgICAgIHN1cGVyLmluaXRpYWxpemUoKTtcclxuICAgICAgICAgICAgdGhpcy5yZWdpc3RlclN1YnNjcmlwdGlvbnMoKTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJEYXRhKHRoaXMuY29udGV4dC52aWV3TW9kZWwudmFyaWFudElkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgcmVnaXN0ZXJTdWJzY3JpcHRpb25zKCk6IHZvaWQge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5zdWJzY3JpYmUoJ3Byb2R1Y3REZXRhaWxTZWxlY3RlZFZhcmlhbnRJZENoYW5nZWQnLCBlID0+IHRoaXMucmVuZGVyRGF0YShlLmRhdGEuc2VsZWN0ZWRWYXJpYW50SWQpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgcmVuZGVyRGF0YSh2YXJpYW50SWQ6IHN0cmluZyk6IHZvaWQge1xyXG5cclxuICAgICAgICAgICAgdmFyIGhhbmRsZTogbnVtYmVyID0gc2V0VGltZW91dCgoKSA9PiB0aGlzLnJlbmRlcignQXR0cmlidXRlcycsIHsgSXNMb2FkaW5nOiB0cnVlIH0pLCAzMDApO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5nZXRQcm9kdWN0U3BlY2lmaWNhdGlvbnModmFyaWFudElkKVxyXG4gICAgICAgICAgICAgICAgLmRvbmUocmVzdWx0ID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGhhbmRsZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKCdBdHRyaWJ1dGVzJywgcmVzdWx0KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goJ3Byb2R1Y3RTcGVjaWZpY2F0aW9uc0NoYW5nZWQnLCByZXN1bHQpO1xyXG5cclxuICAgICAgICAgICAgICAgIH0sIHJlYXNvbiA9PiB0aGlzLmhhbmRsZUVycm9yKHJlYXNvbikpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXRQcm9kdWN0U3BlY2lmaWNhdGlvbnModmFyaWFudElkOiBzdHJpbmcpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICB2YXIgcHJvZHVjdElkOiBzdHJpbmcgPSB0aGlzLmNvbnRleHQudmlld01vZGVsLnByb2R1Y3RJZDtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VydmljZS5nZXRQcm9kdWN0U3BlY2lmaWNhdGlvbnMocHJvZHVjdElkLCB2YXJpYW50SWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBoYW5kbGVFcnJvcihyZWFzb24gOiBhbnkpIHtcclxuXHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1RoZSBzZWxlY3RlZCB2YXJpYW50IGNoYW5nZWQsICcgK1xyXG4gICAgICAgICAgICAgICAgJ2J1dCB3ZSB3ZXJlIHVuYWJsZSB0byBnZXQgdGhlIHByb2R1Y3Qgc3BlY2lmaWNhdGlvbnMgYXNzb2NpYXRlZCB3aXRoIHRoYXQgdmFyaWFudCcsIHJlYXNvbik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJRmFjZXQge1xyXG4gICAgICAgIGlzQXJyYXk6IGJvb2xlYW47XHJcbiAgICAgICAgZmFjZXRGaWVsZE5hbWU6IHN0cmluZztcclxuICAgICAgICBmYWNldFZhbHVlOiBzdHJpbmc7XHJcbiAgICAgICAgZmFjZXRUeXBlOiBzdHJpbmc7XHJcbiAgICAgICAgZmFjZXRMYW5kaW5nUGFnZVVybDogc3RyaW5nO1xyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9JRmFjZXQudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSVNlbGVjdGVkRmFjZXQge1xyXG4gICAgICAgIGZhY2V0RmllbGROYW1lOiBzdHJpbmc7XHJcbiAgICAgICAgc2VsZWN0ZWRWYWx1ZXM6IHN0cmluZ1tdO1xyXG4gICAgICAgIGlzRmFjZXRBcnJheTogYm9vbGVhbjtcclxuICAgIH1cclxufVxyXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJU2VhcmNoQ3JpdGVyaWFPcHRpb25zIHtcclxuICAgICAgICBmYWNldFJlZ2lzdHJ5OiBJSGFzaFRhYmxlPHN0cmluZz47XHJcbiAgICAgICAgY29ycmVjdGVkU2VhcmNoVGVybT86IHN0cmluZztcclxuICAgIH1cclxufVxyXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi9JRmFjZXQudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4vSVNlbGVjdGVkRmFjZXQudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L0dlbmVyaWNzL0NvbGxlY3Rpb25zL0lIYXNodGFibGUudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4vSVNlYXJjaENyaXRlcmlhT3B0aW9ucy50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgZXhwb3J0IGNsYXNzIFNlYXJjaENyaXRlcmlhIHtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBmYWNldEZpZWxkTmFtZUtleVByZWZpeDogc3RyaW5nID0gJ2ZuJztcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBmYWNldFZhbHVlS2V5UHJlZml4OiBzdHJpbmcgPSAnZnYnO1xyXG5cclxuICAgICAgICBwcml2YXRlIF9mYWNldFJlZ2lzdHJ5OiBJSGFzaFRhYmxlPHN0cmluZz4gPSB7fTtcclxuICAgICAgICBwdWJsaWMga2V5d29yZHM6IHN0cmluZyA9ICcnO1xyXG4gICAgICAgIHB1YmxpYyBjb3JyZWN0ZWRTZWFyY2hUZXJtOiBzdHJpbmc7XHJcbiAgICAgICAgcHVibGljIHBhZ2U6IG51bWJlciA9IDE7XHJcbiAgICAgICAgcHVibGljIHNvcnRCeTogc3RyaW5nID0gJyc7XHJcbiAgICAgICAgcHVibGljIHNvcnREaXJlY3Rpb246IHN0cmluZyA9ICcnO1xyXG4gICAgICAgIHB1YmxpYyBzZWxlY3RlZEZhY2V0czogSUhhc2hUYWJsZTxzdHJpbmd8c3RyaW5nW10+ID0ge307XHJcblxyXG4gICAgICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgZXZlbnRIdWIsIHByaXZhdGUgX3dpbmRvdzogV2luZG93KSB7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgaW5pdGlhbGl6ZShvcHRpb25zOiBJU2VhcmNoQ3JpdGVyaWFPcHRpb25zKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2ZhY2V0UmVnaXN0cnkgPSBvcHRpb25zLmZhY2V0UmVnaXN0cnk7XHJcbiAgICAgICAgICAgIHRoaXMuY29ycmVjdGVkU2VhcmNoVGVybSA9IG9wdGlvbnMuY29ycmVjdGVkU2VhcmNoVGVybTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMubG9hZEZyb21RdWVyeXN0cmluZyh0aGlzLl93aW5kb3cubG9jYXRpb24uc2VhcmNoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBsb2FkRnJvbVF1ZXJ5c3RyaW5nKHF1ZXJ5c3RyaW5nOiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy5sb2FkTm9uRmFjZXRDcml0ZXJpYShxdWVyeXN0cmluZyk7XHJcbiAgICAgICAgICAgIHRoaXMubG9hZEZhY2V0Q3JpdGVyaWEocXVlcnlzdHJpbmcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHRvUXVlcnlzdHJpbmcoKTogc3RyaW5nIHtcclxuICAgICAgICAgICAgdmFyIHF1ZXJ5QnVpbGRlcjogc3RyaW5nW10gPSBbXSxcclxuICAgICAgICAgICAgICAgIGZhY2V0S2V5OiBzdHJpbmcsXHJcbiAgICAgICAgICAgICAgICBmYWNldEluZGV4OiBudW1iZXIgPSAxLFxyXG4gICAgICAgICAgICAgICAgZmFjZXRWYWx1ZTogYW55LFxyXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRGYWNldHM6IElIYXNoVGFibGU8c3RyaW5nfHN0cmluZ1tdPiA9IHRoaXMuc2VsZWN0ZWRGYWNldHM7XHJcblxyXG4gICAgICAgICAgICBpZiAoIV8uaXNFbXB0eSh0aGlzLmtleXdvcmRzKSB8fFxyXG4gICAgICAgICAgICAgICAgIV8uaXNFbXB0eSh0aGlzLnNvcnRCeSkgfHxcclxuICAgICAgICAgICAgICAgICFfLmlzRW1wdHkodGhpcy5zb3J0RGlyZWN0aW9uKSB8fFxyXG4gICAgICAgICAgICAgICAgIV8uaXNFbXB0eSh0aGlzLnBhZ2UpICYmIHRoaXMucGFnZSA+IDEgfHxcclxuICAgICAgICAgICAgICAgICFfLmlzRW1wdHkodGhpcy5zZWxlY3RlZEZhY2V0cykpIHtcclxuICAgICAgICAgICAgICAgICAgICBxdWVyeUJ1aWxkZXIucHVzaCgnPycpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCFfLmlzRW1wdHkodGhpcy5rZXl3b3JkcykgfHwgIV8uaXNFbXB0eSh0aGlzLmNvcnJlY3RlZFNlYXJjaFRlcm0pKSB7XHJcbiAgICAgICAgICAgICAgICBxdWVyeUJ1aWxkZXIucHVzaCgna2V5d29yZHM9Jyk7XHJcbiAgICAgICAgICAgICAgICB2YXIga2V5d29yZCA9IF8uaXNFbXB0eSh0aGlzLmNvcnJlY3RlZFNlYXJjaFRlcm0pID8gdGhpcy5rZXl3b3JkcyA6IHRoaXMuY29ycmVjdGVkU2VhcmNoVGVybTtcclxuICAgICAgICAgICAgICAgIHF1ZXJ5QnVpbGRlci5wdXNoKHRoaXMuZW5jb2RlUXVlcnlzdHJpbmdWYWx1ZShrZXl3b3JkKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghXy5pc0VtcHR5KHRoaXMuc29ydEJ5KSkge1xyXG4gICAgICAgICAgICAgICAgcXVlcnlCdWlsZGVyLnB1c2goJyZzb3J0Qnk9Jyk7XHJcbiAgICAgICAgICAgICAgICBxdWVyeUJ1aWxkZXIucHVzaCh0aGlzLmVuY29kZVF1ZXJ5c3RyaW5nVmFsdWUodGhpcy5zb3J0QnkpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCFfLmlzRW1wdHkodGhpcy5zb3J0RGlyZWN0aW9uKSkge1xyXG4gICAgICAgICAgICAgICAgcXVlcnlCdWlsZGVyLnB1c2goJyZzb3J0RGlyZWN0aW9uPScpO1xyXG4gICAgICAgICAgICAgICAgcXVlcnlCdWlsZGVyLnB1c2godGhpcy5lbmNvZGVRdWVyeXN0cmluZ1ZhbHVlKHRoaXMuc29ydERpcmVjdGlvbikpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIV8uaXNFbXB0eSh0aGlzLnBhZ2UpICYmIHRoaXMucGFnZSA+IDEpIHtcclxuICAgICAgICAgICAgICAgIHF1ZXJ5QnVpbGRlci5wdXNoKCcmcGFnZT0nKTtcclxuICAgICAgICAgICAgICAgIHF1ZXJ5QnVpbGRlci5wdXNoKHRoaXMucGFnZS50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yIChmYWNldEtleSBpbiBzZWxlY3RlZEZhY2V0cykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkRmFjZXRzLmhhc093blByb3BlcnR5KGZhY2V0S2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZhY2V0VmFsdWUgPSBzZWxlY3RlZEZhY2V0c1tmYWNldEtleV07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5QnVpbGRlci5wdXNoKCcmJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcXVlcnlCdWlsZGVyLnB1c2goU2VhcmNoQ3JpdGVyaWEuZmFjZXRGaWVsZE5hbWVLZXlQcmVmaXgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5QnVpbGRlci5wdXNoKGZhY2V0SW5kZXgudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcXVlcnlCdWlsZGVyLnB1c2goJz0nKTtcclxuICAgICAgICAgICAgICAgICAgICBxdWVyeUJ1aWxkZXIucHVzaCh0aGlzLmVuY29kZVF1ZXJ5c3RyaW5nVmFsdWUoZmFjZXRLZXkpKTtcclxuICAgICAgICAgICAgICAgICAgICBxdWVyeUJ1aWxkZXIucHVzaCgnJicpO1xyXG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5QnVpbGRlci5wdXNoKFNlYXJjaENyaXRlcmlhLmZhY2V0VmFsdWVLZXlQcmVmaXgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5QnVpbGRlci5wdXNoKGZhY2V0SW5kZXgudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcXVlcnlCdWlsZGVyLnB1c2goJz0nKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcXVlcnlCdWlsZGVyLnB1c2godGhpcy5lbmNvZGVRdWVyeXN0cmluZ1ZhbHVlKF8uaXNBcnJheShmYWNldFZhbHVlKSA/IGZhY2V0VmFsdWUuam9pbignfCcpIDogZmFjZXRWYWx1ZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZhY2V0SW5kZXgrKztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHF1ZXJ5QnVpbGRlci5qb2luKCcnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBjbGVhckZhY2V0cygpIHtcclxuICAgICAgICAgICAgdGhpcy5yZXNldFBhZ2luZygpO1xyXG4gICAgICAgICAgICB0aGlzLnNlbGVjdGVkRmFjZXRzID0ge307XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYWRkU2luZ2xlRmFjZXQoZmFjZXRLZXk6IHN0cmluZywgZmFjZXRWYWx1ZTogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRGYWNldHNbZmFjZXRLZXldID0gZmFjZXRWYWx1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB1cGRhdGVNdWx0aUZhY2V0cyhmYWNldHM6IElIYXNoVGFibGU8c3RyaW5nfHN0cmluZ1tdPikge1xyXG4gICAgICAgICAgICB2YXIgZmFjZXRLZXk6IHN0cmluZyxcclxuICAgICAgICAgICAgICAgIGZhY2V0VmFsdWVzOiBzdHJpbmdbXTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucmVzZXRQYWdpbmcoKTtcclxuICAgICAgICAgICAgdGhpcy5jbGVhclNlbGVjdGVkTXVsdGlGYWNldHMoKTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoZmFjZXRLZXkgaW4gZmFjZXRzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZmFjZXRzLmhhc093blByb3BlcnR5KGZhY2V0S2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRGYWNldHNbZmFjZXRLZXldID0gW107XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZhY2V0VmFsdWVzID0gKHR5cGVvZiBmYWNldHNbZmFjZXRLZXldID09PSAnc3RyaW5nJyA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFs8c3RyaW5nPmZhY2V0c1tmYWNldEtleV1dIDogPHN0cmluZ1tdPmZhY2V0c1tmYWNldEtleV0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmYWNldFZhbHVlcy5mb3JFYWNoKCh2YWx1ZTogc3RyaW5nLCBpbmRleDogbnVtYmVyLCBhcnJheTogc3RyaW5nW10pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgKDxzdHJpbmdbXT50aGlzLnNlbGVjdGVkRmFjZXRzW2ZhY2V0S2V5XSkucHVzaCh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyByZW1vdmVGYWNldChmYWNldFRvUmVtb3ZlOiBPcmNrZXN0cmEuQ29tcG9zZXIuSUZhY2V0KSB7XHJcbiAgICAgICAgICAgIHZhciBmYWNldDogSVNlbGVjdGVkRmFjZXQ7XHJcbiAgICAgICAgICAgIHRoaXMucmVzZXRQYWdpbmcoKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNlbGVjdGVkRmFjZXRzLmhhc093blByb3BlcnR5KGZhY2V0VG9SZW1vdmUuZmFjZXRGaWVsZE5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICBmYWNldCA9IHRoaXMuZ2V0U2VsZWN0ZWRGYWNldHNBcnJheShmYWNldFRvUmVtb3ZlLmZhY2V0RmllbGROYW1lKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZmFjZXRUb1JlbW92ZS5mYWNldFR5cGUudG9Mb3dlckNhc2UoKSA9PT0gJ3JhbmdlJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGZhY2V0LnNlbGVjdGVkVmFsdWVzID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB0byBzdHJpbmcgaW4gY2FzZSBmYWNldFZhbHVlIGlzIGEgbnVtYmVyXHJcbiAgICAgICAgICAgICAgICAgICAgZmFjZXQuc2VsZWN0ZWRWYWx1ZXMgPSBfLndpdGhvdXQoZmFjZXQuc2VsZWN0ZWRWYWx1ZXMsIGZhY2V0VG9SZW1vdmUuZmFjZXRWYWx1ZS50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U2VsZWN0ZWRGYWNldChmYWNldCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgZ2V0U2VsZWN0ZWRGYWNldHNBcnJheShmYWNldEZpZWxkTmFtZTogc3RyaW5nKSA6IElTZWxlY3RlZEZhY2V0IHtcclxuICAgICAgICAgICAgdmFyIGlzU2VsZWN0ZWRGYWNldEFycmF5OiBib29sZWFuO1xyXG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRGYWNldDogYW55ID0gdGhpcy5zZWxlY3RlZEZhY2V0c1tmYWNldEZpZWxkTmFtZV07XHJcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZEZhY2V0QXJyYXk6IEFycmF5PHN0cmluZz47XHJcblxyXG4gICAgICAgICAgICBpZiAoXy5pc0FycmF5KHNlbGVjdGVkRmFjZXQpKSB7XHJcbiAgICAgICAgICAgICAgICBpc1NlbGVjdGVkRmFjZXRBcnJheSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RlZEZhY2V0QXJyYXkgPSBzZWxlY3RlZEZhY2V0O1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKF8uaXNTdHJpbmcoc2VsZWN0ZWRGYWNldCkpIHtcclxuICAgICAgICAgICAgICAgIGlzU2VsZWN0ZWRGYWNldEFycmF5ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RlZEZhY2V0QXJyYXkgPSAoPHN0cmluZz5zZWxlY3RlZEZhY2V0KS5zcGxpdCgnfCcpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBUaGUgc2VsZWN0ZWQgZmFjZXQgJHtmYWNldEZpZWxkTmFtZX0gaXMgbm90IGFuIGFycmF5IG9yIGEgc3RyaW5nYCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBmYWNldEZpZWxkTmFtZTogZmFjZXRGaWVsZE5hbWUsXHJcbiAgICAgICAgICAgICAgICBzZWxlY3RlZFZhbHVlczogc2VsZWN0ZWRGYWNldEFycmF5LFxyXG4gICAgICAgICAgICAgICAgaXNGYWNldEFycmF5OiBpc1NlbGVjdGVkRmFjZXRBcnJheVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzZXRTZWxlY3RlZEZhY2V0KHNlbGVjdGVkRmFjZXQ6IElTZWxlY3RlZEZhY2V0KTogdm9pZCB7XHJcbiAgICAgICAgICAgIHZhciBmYWNldFN0cjogc3RyaW5nID0gJyc7XHJcblxyXG4gICAgICAgICAgICBpZiAoXy5pc0VtcHR5KHNlbGVjdGVkRmFjZXQuc2VsZWN0ZWRWYWx1ZXMpKSB7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5zZWxlY3RlZEZhY2V0c1tzZWxlY3RlZEZhY2V0LmZhY2V0RmllbGROYW1lXTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZEZhY2V0LmlzRmFjZXRBcnJheSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRGYWNldHNbc2VsZWN0ZWRGYWNldC5mYWNldEZpZWxkTmFtZV0gPSBzZWxlY3RlZEZhY2V0LnNlbGVjdGVkVmFsdWVzO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBfLmVhY2goc2VsZWN0ZWRGYWNldC5zZWxlY3RlZFZhbHVlcywgKHY6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIV8uaXNFbXB0eShmYWNldFN0cikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhY2V0U3RyID0gZmFjZXRTdHIgKyAnfCc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhY2V0U3RyID0gZmFjZXRTdHIgKyB2O1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRmFjZXRzW3NlbGVjdGVkRmFjZXQuZmFjZXRGaWVsZE5hbWVdID0gZmFjZXRTdHI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgY2xlYXJTZWxlY3RlZE11bHRpRmFjZXRzKCkge1xyXG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRGYWNldHMgPSB0aGlzLnNlbGVjdGVkRmFjZXRzLFxyXG4gICAgICAgICAgICAgICAgZmFjZXRLZXk6IHN0cmluZyxcclxuICAgICAgICAgICAgICAgIGZhY2V0S2V5c1RvRGVsZXRlOiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuICAgICAgICAgICAgZm9yIChmYWNldEtleSBpbiBzZWxlY3RlZEZhY2V0cykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkRmFjZXRzLmhhc093blByb3BlcnR5KGZhY2V0S2V5KSAmJiB0aGlzLl9mYWNldFJlZ2lzdHJ5W2ZhY2V0S2V5XSA9PT0gJ211bHRpc2VsZWN0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgIGZhY2V0S2V5c1RvRGVsZXRlLnB1c2goZmFjZXRLZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmYWNldEtleXNUb0RlbGV0ZS5mb3JFYWNoKChmYWNldEtleTogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5zZWxlY3RlZEZhY2V0c1tmYWNldEtleV07XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSByZXNldFBhZ2luZygpIHtcclxuICAgICAgICAgICAgdGhpcy5wYWdlID0gMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgbG9hZEZhY2V0Q3JpdGVyaWEocXVlcnlzdHJpbmc6IHN0cmluZykge1xyXG4gICAgICAgICAgICAvLyBUT0RPOiBEb24ndCBuZWVkIHRvIGxvb3Agb3ZlciBxdWVyeXN0cmluZyBhZ2Fpbi4gU2hvdWxkXHJcbiAgICAgICAgICAgIC8vIGJlIHByb2Nlc3NpbmcgdGhpcyBpbiB0aGUgc2FtZSBsb29wIGFzIHRoZSBub24tZmFjZXQgY3JpdGVyaWEuXHJcbiAgICAgICAgICAgIHZhciBmYWNldEZpZWxkTmFtZTogc3RyaW5nLFxyXG4gICAgICAgICAgICAgICAgZmFjZXRWYWx1ZTogc3RyaW5nLFxyXG4gICAgICAgICAgICAgICAga2V5OiBzdHJpbmcsXHJcbiAgICAgICAgICAgICAgICBrZXlzOiBhbnkgPSB7fSxcclxuICAgICAgICAgICAgICAgIGtleVZhbHVlczogYW55ID0ge307XHJcblxyXG4gICAgICAgICAgICBpZiAocXVlcnlzdHJpbmcubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHF1ZXJ5c3RyaW5nLnN1YnN0cmluZygxKS5zcGxpdCgnJicpLmZvckVhY2goKHZhbHVlLCBpbmRleCwgYXJyYXkpID0+IHtcclxuICAgICAgICAgICAgICAgIHZhciBrZXlWYWx1ZTogc3RyaW5nW10gPSB2YWx1ZS5zcGxpdCgnPScpLFxyXG4gICAgICAgICAgICAgICAgICAgIGtleUZvdW5kOiBzdHJpbmcsXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVGb3VuZDogc3RyaW5nO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChrZXlWYWx1ZS5sZW5ndGggPT09IDIpIHtcclxuICAgICAgICAgICAgICAgICAgICBrZXlGb3VuZCA9IGtleVZhbHVlWzBdLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVGb3VuZCA9IHRoaXMuZGVjb2RlUXVlcnlzdHJpbmdWYWx1ZShrZXlWYWx1ZVsxXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXlGb3VuZC5pbmRleE9mKFNlYXJjaENyaXRlcmlhLmZhY2V0RmllbGROYW1lS2V5UHJlZml4KSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXlzW2tleUZvdW5kLnJlcGxhY2UoU2VhcmNoQ3JpdGVyaWEuZmFjZXRGaWVsZE5hbWVLZXlQcmVmaXgsICcnKV0gPSB2YWx1ZUZvdW5kO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGtleUZvdW5kLmluZGV4T2YoU2VhcmNoQ3JpdGVyaWEuZmFjZXRWYWx1ZUtleVByZWZpeCkgPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAga2V5VmFsdWVzW2tleUZvdW5kLnJlcGxhY2UoU2VhcmNoQ3JpdGVyaWEuZmFjZXRWYWx1ZUtleVByZWZpeCwgJycpXSA9IHZhbHVlRm91bmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGZvciAoa2V5IGluIGtleXMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChrZXlzLmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBmYWNldEZpZWxkTmFtZSA9IHRoaXMuZGVjb2RlUXVlcnlzdHJpbmdWYWx1ZShrZXlzW2tleV0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5VmFsdWVzLmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmFjZXRWYWx1ZSA9IHRoaXMuZGVjb2RlUXVlcnlzdHJpbmdWYWx1ZShrZXlWYWx1ZXNba2V5XSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKHRoaXMuX2ZhY2V0UmVnaXN0cnlbZmFjZXRGaWVsZE5hbWVdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdtdWx0aXNlbGVjdCc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEZhY2V0c1tmYWNldEZpZWxkTmFtZV0gPSBmYWNldFZhbHVlLnNwbGl0KCd8Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRmFjZXRzW2ZhY2V0RmllbGROYW1lXSA9IGZhY2V0VmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgbG9hZE5vbkZhY2V0Q3JpdGVyaWEocXVlcnlzdHJpbmc6IHN0cmluZykge1xyXG4gICAgICAgICAgICBpZiAocXVlcnlzdHJpbmcubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHF1ZXJ5c3RyaW5nLnN1YnN0cmluZygxKS5zcGxpdCgnJicpLmZvckVhY2goKHZhbHVlLCBpbmRleCwgYXJyYXkpID0+IHtcclxuICAgICAgICAgICAgICAgIHZhciBrZXlWYWx1ZTogc3RyaW5nW10gPSB2YWx1ZS5zcGxpdCgnPScpLFxyXG4gICAgICAgICAgICAgICAgICAgIGtleUZvdW5kOiBzdHJpbmcsXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVGb3VuZDogc3RyaW5nO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChrZXlWYWx1ZS5sZW5ndGggPT09IDIpIHtcclxuICAgICAgICAgICAgICAgICAgICBrZXlGb3VuZCA9IGtleVZhbHVlWzBdLnRvVXBwZXJDYXNlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWVGb3VuZCA9IHRoaXMuZGVjb2RlUXVlcnlzdHJpbmdWYWx1ZSgoa2V5VmFsdWVbMV0gKyAnJykpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKGtleUZvdW5kKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ0tFWVdPUkRTJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMua2V5d29yZHMgPSB2YWx1ZUZvdW5kO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdTT1JUQlknOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zb3J0QnkgPSB2YWx1ZUZvdW5kO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdTT1JURElSRUNUSU9OJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc29ydERpcmVjdGlvbiA9IHZhbHVlRm91bmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnUEFHRSc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBhZ2UgPSBwYXJzZUludCh2YWx1ZUZvdW5kLCAxMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGVuY29kZVF1ZXJ5c3RyaW5nVmFsdWUodmFsdWVUb0VuY29kZTogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBlbmNvZGVVUklDb21wb25lbnQodmFsdWVUb0VuY29kZSkucmVwbGFjZSgvJTIwL2csICcrJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGRlY29kZVF1ZXJ5c3RyaW5nVmFsdWUodmFsdWVUb0RlY29kZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KHZhbHVlVG9EZWNvZGUpLnJlcGxhY2UoL1xcKy9nLCAnICcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9FdmVudHMvSUV2ZW50SW5mb3JtYXRpb24udHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L0dlbmVyaWNzL0NvbGxlY3Rpb25zL0lIYXNodGFibGUudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uL0lTZWFyY2hDcml0ZXJpYU9wdGlvbnMudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSVNlYXJjaFNlcnZpY2Uge1xyXG4gICAgICAgIGluaXRpYWxpemUob3B0aW9uczogSVNlYXJjaENyaXRlcmlhT3B0aW9ucyk7XHJcblxyXG4gICAgICAgIHNpbmdsZUZhY2V0c0NoYW5nZWQoZXZlbnRJbmZvcm1hdGlvbjogSUV2ZW50SW5mb3JtYXRpb24pO1xyXG5cclxuICAgICAgICBtdWx0aUZhY2V0Q2hhbmdlZChldmVudEluZm9ybWF0aW9uOiBJRXZlbnRJbmZvcm1hdGlvbik7XHJcblxyXG4gICAgICAgIGNsZWFyRmFjZXRzKGV2ZW50SW5mb3JtYXRpb246IElFdmVudEluZm9ybWF0aW9uKTtcclxuXHJcbiAgICAgICAgcmVtb3ZlRmFjZXQoZXZlbnRJbmZvcm1hdGlvbjogSUV2ZW50SW5mb3JtYXRpb24pO1xyXG5cclxuICAgICAgICBnZXRTZWxlY3RlZEZhY2V0cygpOiBJSGFzaFRhYmxlPHN0cmluZ3xzdHJpbmdbXT47XHJcbiAgICB9XHJcbn1cclxuIiwibW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElTaW5nbGVTZWxlY3RDYXRlZ29yeSB7XHJcbiAgICAgICAgaXNBcnJheTogYm9vbGVhbjtcclxuICAgICAgICBjYXRlZ29yeVVybDogc3RyaW5nO1xyXG4gICAgfVxyXG59XHJcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9FdmVudHMvSUV2ZW50SHViLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9FdmVudHMvSUV2ZW50SW5mb3JtYXRpb24udHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uL1NlYXJjaENyaXRlcmlhLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuL0lTZWFyY2hTZXJ2aWNlLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuLi9JRmFjZXQudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uL0lTaW5nbGVTZWxlY3RDYXRlZ29yeS50cycgLz5cclxuLy8vXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIC8vIFRPRE86IERlY291cGxlIHdpbmRvdyBvYmplY3QgZnJvbSBzZWFyY2ggc2VydmljZS5cclxuICAgIGV4cG9ydCBjbGFzcyBTZWFyY2hTZXJ2aWNlIGltcGxlbWVudHMgSVNlYXJjaFNlcnZpY2Uge1xyXG4gICAgICAgIHByaXZhdGUgX3NlYXJjaENyaXRlcmlhOiBTZWFyY2hDcml0ZXJpYTtcclxuICAgICAgICBwcml2YXRlIF9iYXNlU2VhcmNoVXJsOiBzdHJpbmcgPSB3aW5kb3cubG9jYXRpb24uaHJlZi5yZXBsYWNlKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gsICcnKTtcclxuICAgICAgICBwcml2YXRlIF9iYXNlVXJsOiBzdHJpbmcgPSB0aGlzLl9iYXNlU2VhcmNoVXJsLnJlcGxhY2Uod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLCAnJyk7XHJcbiAgICAgICAgcHJpdmF0ZSBfZmFjZXRSZWdpc3RyeTogSUhhc2hUYWJsZTxzdHJpbmc+ID0ge307XHJcblxyXG4gICAgICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgX2V2ZW50SHViOiBJRXZlbnRIdWIsIHByaXZhdGUgX3dpbmRvdzogV2luZG93KSB7XHJcbiAgICAgICAgICAgICB0aGlzLl9zZWFyY2hDcml0ZXJpYSA9IG5ldyBTZWFyY2hDcml0ZXJpYShfZXZlbnRIdWIsIF93aW5kb3cpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSW5pdGlhbGl6ZXMgdGhlIHNlYXJjaCBzZXJ2aWNlLlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogcGFyYW0gZmFjZXRSZWdpc3RyeSBGYWNldHMgYXZhaWxhYmxlIHRvIHRoZSBzZWFyY2ggc2VydmljZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgaW5pdGlhbGl6ZShvcHRpb25zOiBJU2VhcmNoQ3JpdGVyaWFPcHRpb25zKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJTdWJzY3JpcHRpb25zKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3NlYXJjaENyaXRlcmlhLmluaXRpYWxpemUob3B0aW9ucyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc2luZ2xlRmFjZXRzQ2hhbmdlZChldmVudEluZm9ybWF0aW9uOiBJRXZlbnRJbmZvcm1hdGlvbikge1xyXG4gICAgICAgICAgICB2YXIgZmFjZXRLZXk6IHN0cmluZyA9IGV2ZW50SW5mb3JtYXRpb24uZGF0YS5mYWNldEtleSxcclxuICAgICAgICAgICAgICAgIGZhY2V0VmFsdWU6IHN0cmluZyA9IGV2ZW50SW5mb3JtYXRpb24uZGF0YS5mYWNldFZhbHVlO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fc2VhcmNoQ3JpdGVyaWEuYWRkU2luZ2xlRmFjZXQoZmFjZXRLZXksIGZhY2V0VmFsdWUpO1xyXG4gICAgICAgICAgICB0aGlzLnNlYXJjaCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHNvcnRpbmdDaGFuZ2VkKGV2ZW50SW5mb3JtYXRpb246IElFdmVudEluZm9ybWF0aW9uKSB7XHJcbiAgICAgICAgICAgIHZhciBkYXRhVXJsID0gZXZlbnRJbmZvcm1hdGlvbi5kYXRhLnVybDtcclxuICAgICAgICAgICAgdGhpcy5fd2luZG93LmxvY2F0aW9uLmhyZWYgPSBkYXRhVXJsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGdldFNlbGVjdGVkRmFjZXRzKCk6IElIYXNoVGFibGU8c3RyaW5nfHN0cmluZ1tdPiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zZWFyY2hDcml0ZXJpYS5zZWxlY3RlZEZhY2V0cztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBtdWx0aUZhY2V0Q2hhbmdlZChldmVudEluZm9ybWF0aW9uOiBJRXZlbnRJbmZvcm1hdGlvbikge1xyXG4gICAgICAgICAgICB0aGlzLl9zZWFyY2hDcml0ZXJpYS51cGRhdGVNdWx0aUZhY2V0cyhldmVudEluZm9ybWF0aW9uLmRhdGEuZmlsdGVyKTtcclxuICAgICAgICAgICAgdGhpcy5zZWFyY2goKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBjbGVhckZhY2V0cyhldmVudEluZm9ybWF0aW9uOiBJRXZlbnRJbmZvcm1hdGlvbikge1xyXG4gICAgICAgICAgICB2YXIgbGFuZGluZ1BhZ2VVcmw6IHN0cmluZyA9IGV2ZW50SW5mb3JtYXRpb24uZGF0YS5sYW5kaW5nUGFnZVVybDtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3NlYXJjaENyaXRlcmlhLmNsZWFyRmFjZXRzKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAobGFuZGluZ1BhZ2VVcmwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2Jhc2VTZWFyY2hVcmwgPSBsYW5kaW5nUGFnZVVybDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5zZWFyY2goKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyByZW1vdmVGYWNldChldmVudEluZm9ybWF0aW9uOiBJRXZlbnRJbmZvcm1hdGlvbikge1xyXG4gICAgICAgICAgICB2YXIgZmFjZXQ6IElGYWNldCA9IDxJRmFjZXQ+ZXZlbnRJbmZvcm1hdGlvbi5kYXRhO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fc2VhcmNoQ3JpdGVyaWEucmVtb3ZlRmFjZXQoZmFjZXQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGZhY2V0LmZhY2V0TGFuZGluZ1BhZ2VVcmwgJiYgZmFjZXQuZmFjZXRUeXBlID09PSAnU2luZ2xlU2VsZWN0Jykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fYmFzZVNlYXJjaFVybCA9IGZhY2V0LmZhY2V0TGFuZGluZ1BhZ2VVcmw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYWRkU2luZ2xlU2VsZWN0Q2F0ZWdvcnkoZXZlbnRJbmZvcm1hdGlvbjogSUV2ZW50SW5mb3JtYXRpb24pIHtcclxuICAgICAgICAgICAgdmFyIHNpbmdsZVNlbGVjdENhdGVnb3J5OiBJU2luZ2xlU2VsZWN0Q2F0ZWdvcnkgPSA8SVNpbmdsZVNlbGVjdENhdGVnb3J5PmV2ZW50SW5mb3JtYXRpb24uZGF0YTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2Jhc2VTZWFyY2hVcmwgPSBzaW5nbGVTZWxlY3RDYXRlZ29yeS5jYXRlZ29yeVVybDtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHJlZ2lzdGVyU3Vic2NyaXB0aW9ucygpIHtcclxuICAgICAgICAgICAgdGhpcy5fZXZlbnRIdWIuc3Vic2NyaWJlKCdzb3J0aW5nQ2hhbmdlZCcsIHRoaXMuc29ydGluZ0NoYW5nZWQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgIHRoaXMuX2V2ZW50SHViLnN1YnNjcmliZSgnc2luZ2xlRmFjZXRzQ2hhbmdlZCcsIHRoaXMuc2luZ2xlRmFjZXRzQ2hhbmdlZC5iaW5kKHRoaXMpKTtcclxuICAgICAgICAgICAgdGhpcy5fZXZlbnRIdWIuc3Vic2NyaWJlKCdtdWx0aUZhY2V0Q2hhbmdlZCcsIHRoaXMubXVsdGlGYWNldENoYW5nZWQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgIHRoaXMuX2V2ZW50SHViLnN1YnNjcmliZSgnZmFjZXRzQ2xlYXJlZCcsIHRoaXMuY2xlYXJGYWNldHMuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgIHRoaXMuX2V2ZW50SHViLnN1YnNjcmliZSgnZmFjZXRSZW1vdmVkJywgdGhpcy5yZW1vdmVGYWNldC5iaW5kKHRoaXMpKTtcclxuICAgICAgICAgICAgdGhpcy5fZXZlbnRIdWIuc3Vic2NyaWJlKCdzaW5nbGVDYXRlZ29yeUFkZGVkJywgdGhpcy5hZGRTaW5nbGVTZWxlY3RDYXRlZ29yeS5iaW5kKHRoaXMpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc2VhcmNoKCkge1xyXG4gICAgICAgICAgICB0aGlzLl93aW5kb3cubG9jYXRpb24uaHJlZiA9IHRoaXMuX2Jhc2VTZWFyY2hVcmwgKyB0aGlzLl9zZWFyY2hDcml0ZXJpYS50b1F1ZXJ5c3RyaW5nKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9KcXVlcnlQbHVnaW5zL0lTZXJpYWxpemVPYmplY3RKcXVlcnlQbHVnaW4udHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9Db250cm9sbGVyLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0LnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvSUNvbnRyb2xsZXJDb250ZXh0LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9JQ29udHJvbGxlckFjdGlvbkNvbnRleHQudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L0V2ZW50cy9JRXZlbnRIdWIudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L1N5c3RlbS9JRGlzcG9zYWJsZS50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBTbGlkZXJTZXJ2aWNlIGltcGxlbWVudHMgSURpc3Bvc2FibGUge1xyXG4gICAgICAgIHByaXZhdGUgc2xpZGVySW5zdGFuY2U6IG5vVWlTbGlkZXIubm9VaVNsaWRlcjtcclxuICAgICAgICBwcml2YXRlIGZhY2V0RmllbGROYW1lOiBzdHJpbmc7XHJcbiAgICAgICAgcHJpdmF0ZSBtYXhMYWJlbDogc3RyaW5nO1xyXG4gICAgICAgIHByaXZhdGUgbWF4VmFsdWU6IHN0cmluZztcclxuICAgICAgICBwcml2YXRlIG1pblZhbHVlOiBzdHJpbmc7XHJcbiAgICAgICAgcHJpdmF0ZSBzdGVwO1xyXG4gICAgICAgIHByaXZhdGUgYXBwbHlCdXR0b25Db250ZXh0OiBKUXVlcnk7XHJcblxyXG4gICAgICAgIGNvbnN0cnVjdG9yKHByaXZhdGUgY29udGV4dDogSlF1ZXJ5LCBwcm90ZWN0ZWQgZXZlbnRIdWI6IElFdmVudEh1Yikge1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGluaXRpYWxpemUoc2VsZWN0ZWRWYWx1ZXMpIHtcclxuICAgICAgICAgICAgdGhpcy5hcHBseUJ1dHRvbkNvbnRleHQgPSB0aGlzLmNvbnRleHQuZmluZCgnOnN1Ym1pdCcpO1xyXG4gICAgICAgICAgICB0aGlzLm1hcERhdGEodGhpcy5jb250ZXh0LmRhdGEoKSk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZVNsaWRlcihzZWxlY3RlZFZhbHVlcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZGlzcG9zZSgpIHtcclxuICAgICAgICAgICAgdGhpcy5zbGlkZXJJbnN0YW5jZS5kZXN0cm95KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgbWFwRGF0YShjb250YWluZXJEYXRhKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3RlcCA9IGNvbnRhaW5lckRhdGEuc3RlcCB8fCAxO1xyXG4gICAgICAgICAgICB0aGlzLm1heExhYmVsID0gY29udGFpbmVyRGF0YS5tYXhMYWJlbDtcclxuICAgICAgICAgICAgdGhpcy5tYXhWYWx1ZSA9IGNvbnRhaW5lckRhdGEubWF4O1xyXG4gICAgICAgICAgICB0aGlzLm1pblZhbHVlID0gY29udGFpbmVyRGF0YS5taW47XHJcbiAgICAgICAgICAgIHRoaXMuZmFjZXRGaWVsZE5hbWUgPSBjb250YWluZXJEYXRhLmZhY2V0ZmllbGRuYW1lO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGRpcnRpZWQoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXBwbHlCdXR0b25Db250ZXh0LnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRm9ybWF0dGluZyBmb3IgdGhlIGZvcm1hdHRlZCB2YWx1ZXMgb2YgdGhlIHNsaWRlci4gV2hlbiBnZXR0aW5nLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBmb3JtYXRGcm9tKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLm1heExhYmVsICYmIHZhbHVlID09PSB0aGlzLm1heExhYmVsKSB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHRoaXMubWF4VmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEZvcm1hdHRpbmcgZm9yIHRoZSBmb3JtYXR0ZWQgdmFsdWVzIG9mIHRoZSBzbGlkZXIuIFdoZW4gc2V0dGluZy5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgZm9ybWF0VG8odmFsdWUpIHtcclxuICAgICAgICAgICAgdmFsdWUgPSBwYXJzZUludCh2YWx1ZSwgMTApIHx8IDA7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5tYXhMYWJlbCAmJiB2YWx1ZSA9PT0gdGhpcy5tYXhWYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSB0aGlzLm1heExhYmVsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGluaXRpYWxpemVTbGlkZXIoZmFjZXREYXRhKSB7XHJcbiAgICAgICAgICAgIHZhciBzbGlkZXJFbGVtZW50ID0gdGhpcy5jb250ZXh0LmZpbmQoJy5yYW5nZScpLmdldCgwKTtcclxuICAgICAgICAgICAgdmFyIGRlZmF1bHRSYW5nZSA9IFt0aGlzLm1pblZhbHVlLCB0aGlzLm1heFZhbHVlXTtcclxuICAgICAgICAgICAgdmFyIHN0YXJ0UmFuZ2UgPSBkZWZhdWx0UmFuZ2U7XHJcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZFJhbmdlO1xyXG4gICAgICAgICAgICB2YXIgbG93ZXJSYW5nZUNvbnRleHQ6IEpRdWVyeSAgPSB0aGlzLmNvbnRleHQuZmluZCgnLmpzLWxvd2VyVmFsdWUnKTtcclxuICAgICAgICAgICAgdmFyIHVwcGVyUmFuZ2VDb250ZXh0OiBKUXVlcnkgPSB0aGlzLmNvbnRleHQuZmluZCgnLmpzLWhpZ2hlclZhbHVlJyk7XHJcblxyXG4gICAgICAgICAgICAvLyBUT0RPIGhhbmRsZSBhcnJheSBvciBub3QgYXJyYXlcclxuICAgICAgICAgICAgaWYgKGZhY2V0RGF0YSkge1xyXG4gICAgICAgICAgICAgICAgc2VsZWN0ZWRSYW5nZSA9IGZhY2V0RGF0YS5zcGxpdCgnfCcpO1xyXG4gICAgICAgICAgICAgICAgc3RhcnRSYW5nZSA9IGRlZmF1bHRSYW5nZS5tYXAoKHZhbHVlLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzZWxlY3RlZFJhbmdlW2luZGV4XSA/IHNlbGVjdGVkUmFuZ2VbaW5kZXhdIDogZGVmYXVsdFJhbmdlW2luZGV4XTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNsaWRlckluc3RhbmNlID0gdGhpcy5jcmVhdGVTbGlkZXIoc3RhcnRSYW5nZSwgc2xpZGVyRWxlbWVudCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNsaWRlckluc3RhbmNlLm9uKCdzZXQnLCAodmFsdWVzLCBoYW5kbGUpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlydGllZCgpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2xpZGVySW5zdGFuY2Uub24oJ3VwZGF0ZScsICh2YWx1ZXM6IEFycmF5PHN0cmluZz4sIGhhbmRsZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbG93ZXJSYW5nZUNvbnRleHQudmFsKHZhbHVlc1swXSk7XHJcbiAgICAgICAgICAgICAgICB1cHBlclJhbmdlQ29udGV4dC52YWwodmFsdWVzWzFdKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBsb3dlclJhbmdlQ29udGV4dC5vbigna2V5dXAnLCBldmVudCA9PiB0aGlzLmRpcnRpZWQoKSk7XHJcbiAgICAgICAgICAgIHVwcGVyUmFuZ2VDb250ZXh0Lm9uKCdrZXl1cCcsIGV2ZW50ID0+IHRoaXMuZGlydGllZCgpKTtcclxuICAgICAgICAgICAgbG93ZXJSYW5nZUNvbnRleHQub24oJ2JsdXInLCBldmVudCA9PiB0aGlzLnNsaWRlckluc3RhbmNlLnNldChbJChldmVudC50YXJnZXQpLnZhbCgpLCBudWxsXSkpO1xyXG4gICAgICAgICAgICB1cHBlclJhbmdlQ29udGV4dC5vbignYmx1cicsIGV2ZW50ID0+IHRoaXMuc2xpZGVySW5zdGFuY2Uuc2V0KFtudWxsLCAkKGV2ZW50LnRhcmdldCkudmFsKCldKSk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBjcmVhdGVTbGlkZXIoc3RhcnRSYW5nZSwgc2xpZGVyRWxlbWVudCk6IG5vVWlTbGlkZXIubm9VaVNsaWRlciB7XHJcbiAgICAgICAgICAgbm9VaVNsaWRlci5jcmVhdGUoc2xpZGVyRWxlbWVudCwge1xyXG4gICAgICAgICAgICAgICAgc3RhcnQ6IHN0YXJ0UmFuZ2UsXHJcbiAgICAgICAgICAgICAgICBjb25uZWN0OiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgbWFyZ2luOiB0aGlzLnN0ZXAsXHJcbiAgICAgICAgICAgICAgICBzdGVwOiB0aGlzLnN0ZXAsXHJcbiAgICAgICAgICAgICAgICByYW5nZToge1xyXG4gICAgICAgICAgICAgICAgICAgICdtaW4nOiB0aGlzLm1pblZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgICdtYXgnOiB0aGlzLm1heFZhbHVlXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZm9ybWF0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG86IHZhbHVlID0+IHRoaXMuZm9ybWF0VG8odmFsdWUpLFxyXG4gICAgICAgICAgICAgICAgICAgIGZyb206IHZhbHVlID0+IHRoaXMuZm9ybWF0RnJvbSh2YWx1ZSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gKDxub1VpU2xpZGVyLkluc3RhbmNlPnNsaWRlckVsZW1lbnQpLm5vVWlTbGlkZXI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZ2V0S2V5KCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5mYWNldEZpZWxkTmFtZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBnZXRWYWx1ZXMoKSB7XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZXMgPSA8YW55W10+dGhpcy5zbGlkZXJJbnN0YW5jZS5nZXQoKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh2YWx1ZXNbMV0gPT09IHRoaXMubWF4TGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlc1sxXSA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlcztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgVXJsSGVscGVyIHtcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyByZXNvbHZlUGFnZVR5cGUoKSB7XHJcbiAgICAgICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluZGV4T2YoJ2tleXdvcmRzJykgIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ3NlYXJjaCc7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJ2Jyb3dzZSc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L0pxdWVyeVBsdWdpbnMvSVNlcmlhbGl6ZU9iamVjdEpxdWVyeVBsdWdpbi50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0NvbnRyb2xsZXIudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9JQ29udHJvbGxlckFjdGlvbkNvbnRleHQudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9JQ29udHJvbGxlckNvbnRleHQudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4vU2VydmljZXMvU2VhcmNoU2VydmljZS50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi9TZXJ2aWNlcy9JU2VhcmNoU2VydmljZS50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi9TZXJ2aWNlcy9TbGlkZXJTZXJ2aWNlLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9JQ29udHJvbGxlckFjdGlvbkNvbnRleHQudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4vVXJsSGVscGVyLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgaW50ZXJmYWNlIFNlcmlhbGl6ZU9iamVjdCBleHRlbmRzIEpRdWVyeSB7XHJcbiAgICAgICAgc2VyaWFsaXplT2JqZWN0KCk6IGFueTtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgY2xhc3MgRmFjZXRTZWFyY2hDb250cm9sbGVyIGV4dGVuZHMgT3Jja2VzdHJhLkNvbXBvc2VyLkNvbnRyb2xsZXIge1xyXG4gICAgICAgIHByaXZhdGUgX2RlYm91bmNlSGFuZGxlOyAvLyBuZWVkIHRvIHNlZSBob3cgdG8gZml4IHRoZSBhbnkgZm9yIHRoaXMuXHJcbiAgICAgICAgcHJpdmF0ZSBfZGVib3VuY2VUaW1lb3V0OiBudW1iZXIgPSA1MDA7XHJcbiAgICAgICAgcHJpdmF0ZSBfc2VhcmNoU2VydmljZTogSVNlYXJjaFNlcnZpY2U7IC8vIFRPRE86IERJIHRoaXMsIGNvbnN0cnVjdG9yIGluamVjdGlvbiB2aWEgY29udHJvbGxlciBmYWN0b3J5P1xyXG4gICAgICAgIHByaXZhdGUgc2xpZGVyU2VydmljZTogU2xpZGVyU2VydmljZTsgLy8gVE9ETzogREkgdGhpcywgY29uc3RydWN0b3IgaW5qZWN0aW9uIHZpYSBjb250cm9sbGVyIGZhY3Rvcnk/XHJcbiAgICAgICAgcHJpdmF0ZSBzbGlkZXJTZXJ2aWNlc0luc3RhbmNlczogSUhhc2hUYWJsZTxTbGlkZXJTZXJ2aWNlPiA9IHt9O1xyXG5cclxuICAgICAgICBwdWJsaWMgaW5pdGlhbGl6ZSgpIHtcclxuICAgICAgICAgICAgc3VwZXIuaW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVTZXJ2aWNlcygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG11bHRpRmFjZXRDaGFuZ2VkKGFjdGlvbkNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCkge1xyXG4gICAgICAgICAgICBpZiAoIV8uaXNFbXB0eSh0aGlzLl9kZWJvdW5jZUhhbmRsZSkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2RlYm91bmNlSGFuZGxlLmNhbmNlbCgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgYW5jaG9yQ29udGV4dCA9IGFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHQsXHJcbiAgICAgICAgICAgICAgICBmYWNldEZpZWxkTmFtZSA9IGFuY2hvckNvbnRleHQuYXR0cignbmFtZScpLFxyXG4gICAgICAgICAgICAgICAgZmFjZXRWYWx1ZSA9IGFuY2hvckNvbnRleHQuYXR0cigndmFsdWUnKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2RlYm91bmNlSGFuZGxlID0gXy5kZWJvdW5jZSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goJ211bHRpRmFjZXRDaGFuZ2VkJywge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmFjZXRLZXk6IGZhY2V0RmllbGROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmYWNldFZhbHVlOiBmYWNldFZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWdlVHlwZTogVXJsSGVscGVyLnJlc29sdmVQYWdlVHlwZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWx0ZXI6ICg8SVNlcmlhbGl6ZU9iamVjdEpxdWVyeVBsdWdpbj4kKCdmb3JtW25hbWU9XCJzZWFyY2hGYWNldHNcIl0nLCB0aGlzLmNvbnRleHQuY29udGFpbmVyKSkuc2VyaWFsaXplT2JqZWN0KClcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSwgMjUwKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2RlYm91bmNlSGFuZGxlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZGlzcG9zZSgpIHtcclxuICAgICAgICAgICAgc3VwZXIuZGlzcG9zZSgpO1xyXG4gICAgICAgICAgICBPYmplY3Qua2V5cyh0aGlzLnNsaWRlclNlcnZpY2VzSW5zdGFuY2VzKS5mb3JFYWNoKHNsaWRlclNlcnZpY2VLZXkgPT4gdGhpcy5zbGlkZXJTZXJ2aWNlc0luc3RhbmNlc1tzbGlkZXJTZXJ2aWNlS2V5XS5kaXNwb3NlKCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHNpbmdsZUZhY2V0Q2hhbmdlZChhY3Rpb25Db250ZXh0OiBJQ29udHJvbGxlckFjdGlvbkNvbnRleHQpIHtcclxuICAgICAgICAgICAgdmFyIGFuY2hvckNvbnRleHQgPSBhY3Rpb25Db250ZXh0LmVsZW1lbnRDb250ZXh0LFxyXG4gICAgICAgICAgICAgICAgZmFjZXRGaWVsZE5hbWUgPSBhbmNob3JDb250ZXh0LmRhdGEoJ2ZhY2V0ZmllbGRuYW1lJyksXHJcbiAgICAgICAgICAgICAgICBmYWNldFZhbHVlID0gYW5jaG9yQ29udGV4dC5kYXRhKCdmYWNldHZhbHVlJyksXHJcbiAgICAgICAgICAgICAgICBmYWNldHMgPSB7fTtcclxuXHJcbiAgICAgICAgICAgIGFjdGlvbkNvbnRleHQuZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgYWN0aW9uQ29udGV4dC5ldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaCgnc2luZ2xlRmFjZXRzQ2hhbmdlZCcsIHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICBmYWNldEtleTogZmFjZXRGaWVsZE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZmFjZXRWYWx1ZTogZmFjZXRWYWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICBwYWdlVHlwZTogVXJsSGVscGVyLnJlc29sdmVQYWdlVHlwZSgpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHRvZ2dsZUZhY2V0TGlzdChhY3Rpb25Db250ZXh0OiBJQ29udHJvbGxlckFjdGlvbkNvbnRleHQpIHtcclxuICAgICAgICAgICAgYWN0aW9uQ29udGV4dC5ldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGJ1dHRvbkNvbnRleHQgPSBhY3Rpb25Db250ZXh0LmVsZW1lbnRDb250ZXh0LFxyXG4gICAgICAgICAgICAgICAgbGFiZWw6IHN0cmluZyA9IGJ1dHRvbkNvbnRleHQuaHRtbCgpLFxyXG4gICAgICAgICAgICAgICAgc2hvd01vcmVMYWJlbDogc3RyaW5nID0gYnV0dG9uQ29udGV4dC5kYXRhKCdsYWJlbC1zaG93bW9yZScpLFxyXG4gICAgICAgICAgICAgICAgc2hvd0xlc3NMYWJlbDogc3RyaW5nID0gYnV0dG9uQ29udGV4dC5kYXRhKCdsYWJlbC1zaG93bGVzcycpO1xyXG5cclxuICAgICAgICAgICAgYnV0dG9uQ29udGV4dC5odG1sKGxhYmVsID09PSBzaG93TW9yZUxhYmVsID8gc2hvd0xlc3NMYWJlbCA6IHNob3dNb3JlTGFiZWwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHJlZmluZUJ5UmFuZ2UoYWN0aW9uQ29udGV4dDogSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0KSB7XHJcbiAgICAgICAgICAgIGFjdGlvbkNvbnRleHQuZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IGFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHQuY2xvc2VzdCgnW2RhdGEtZmFjZXRmaWVsZG5hbWVdJyk7XHJcbiAgICAgICAgICAgIHZhciBzbGlkZXJTZXJ2aWNlSW5zdGFuY2UgPSB0aGlzLnNsaWRlclNlcnZpY2VzSW5zdGFuY2VzW2NvbnRhaW5lci5kYXRhKCdmYWNldGZpZWxkbmFtZScpXTtcclxuXHJcbiAgICAgICAgICAgIHZhciB2YWx1ZXMgPSBzbGlkZXJTZXJ2aWNlSW5zdGFuY2UuZ2V0VmFsdWVzKCk7XHJcbiAgICAgICAgICAgIHZhciBrZXkgPSBzbGlkZXJTZXJ2aWNlSW5zdGFuY2UuZ2V0S2V5KCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goJ3NpbmdsZUZhY2V0c0NoYW5nZWQnLCB7XHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmFjZXRLZXk6IGtleSxcclxuICAgICAgICAgICAgICAgICAgICBmYWNldFZhbHVlOiB2YWx1ZXMuam9pbignfCcpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBpbml0aWFsaXplU2VydmljZXMoKSB7XHJcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZEZhY2V0czogSUhhc2hUYWJsZTxzdHJpbmd8c3RyaW5nW10+O1xyXG4gICAgICAgICAgICB2YXIgY29ycmVjdGVkU2VhcmNoVGVybTogc3RyaW5nID0gdGhpcy5jb250ZXh0LmNvbnRhaW5lci5hdHRyKCdkYXRhLWNvcnJlY3RlZC1zZWFyY2gtdGVybScpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fc2VhcmNoU2VydmljZSA9IG5ldyBTZWFyY2hTZXJ2aWNlKHRoaXMuZXZlbnRIdWIsIHdpbmRvdyk7XHJcbiAgICAgICAgICAgIHRoaXMuX3NlYXJjaFNlcnZpY2UuaW5pdGlhbGl6ZSh7XHJcbiAgICAgICAgICAgICAgICBmYWNldFJlZ2lzdHJ5OiB0aGlzLmJ1aWxkRmFjZXRSZWdpc3RyeSgpLFxyXG4gICAgICAgICAgICAgICAgY29ycmVjdGVkU2VhcmNoVGVybTogY29ycmVjdGVkU2VhcmNoVGVybVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgc2VsZWN0ZWRGYWNldHMgPSB0aGlzLl9zZWFyY2hTZXJ2aWNlLmdldFNlbGVjdGVkRmFjZXRzKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNvbnRleHQuY29udGFpbmVyLmZpbmQoJ1tkYXRhLWZhY2V0dHlwZT1cIlJhbmdlXCJdJykuZWFjaCgoaW5kZXgsIGVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIHZhciBmYWNldEZpZWxkTmFtZSA9ICQoZWxlbWVudCkuZGF0YSgnZmFjZXRmaWVsZG5hbWUnKTtcclxuICAgICAgICAgICAgICAgIHZhciBzZXJ2aWNlSW5zdGFuY2UgPSBuZXcgU2xpZGVyU2VydmljZSgkKGVsZW1lbnQpLCB0aGlzLmV2ZW50SHViKTtcclxuXHJcbiAgICAgICAgICAgICAgICBzZXJ2aWNlSW5zdGFuY2UuaW5pdGlhbGl6ZShzZWxlY3RlZEZhY2V0c1tmYWNldEZpZWxkTmFtZV0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zbGlkZXJTZXJ2aWNlc0luc3RhbmNlc1tmYWNldEZpZWxkTmFtZV0gPSBzZXJ2aWNlSW5zdGFuY2U7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBidWlsZEZhY2V0UmVnaXN0cnkoKTogSUhhc2hUYWJsZTxzdHJpbmc+IHtcclxuICAgICAgICAgICAgdmFyIGZhY2V0UmVnaXN0cnk6IElIYXNoVGFibGU8c3RyaW5nPiA9IHt9O1xyXG5cclxuICAgICAgICAgICAgJCgnW2RhdGEtZmFjZXR0eXBlXScsIHRoaXMuY29udGV4dC5jb250YWluZXIpXHJcbiAgICAgICAgICAgICAgICAuYWRkKCQoJyNzZWxlY3RlZEZhY2V0cyBbZGF0YS1mYWNldGZpZWxkbmFtZV0nLCB0aGlzLmNvbnRleHQuY29udGFpbmVyKSlcclxuICAgICAgICAgICAgICAgIC5lYWNoKChpbmRleDogbnVtYmVyLCBpdGVtOiBIVE1MRWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBmYWNldFR5cGU6IHN0cmluZyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmFjZXRGaWVsZE5hbWU6IHN0cmluZyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmFjZXRHcm91cDogSlF1ZXJ5ID0gJChpdGVtKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZmFjZXRGaWVsZE5hbWUgPSBmYWNldEdyb3VwLmRhdGEoJ2ZhY2V0ZmllbGRuYW1lJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZmFjZXRUeXBlID0gKDxzdHJpbmc+ZmFjZXRHcm91cC5kYXRhKCdmYWNldHR5cGUnKSkudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICBmYWNldFJlZ2lzdHJ5W2ZhY2V0RmllbGROYW1lXSA9IGZhY2V0VHlwZTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhY2V0UmVnaXN0cnk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSVF1aWNrVmlld0NvbnRyb2xsZXIge1xyXG4gICAgICAgIHNlbGVjdEltYWdlKGFjdGlvbkNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCk6IHZvaWQ7XHJcbiAgICAgICAgYWRkTGluZUl0ZW0oYWN0aW9uQ29udGV4dDogSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0KTogdm9pZDtcclxuICAgICAgICBzZWxlY3RLdmEoYWN0aW9uQ29udGV4dDogSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0KTogdm9pZDtcclxuICAgIH1cclxufVxyXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvSnF1ZXJ5UGx1Z2lucy9JU2VyaWFsaXplT2JqZWN0SnF1ZXJ5UGx1Z2luLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvQ29udHJvbGxlci50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0lDb250cm9sbGVyQWN0aW9uQ29udGV4dC50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0lDb250cm9sbGVyQ29udGV4dC50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi9TZXJ2aWNlcy9TZWFyY2hTZXJ2aWNlLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuL1NlcnZpY2VzL0lTZWFyY2hTZXJ2aWNlLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9JQ29udHJvbGxlckFjdGlvbkNvbnRleHQudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBpbnRlcmZhY2UgU2VyaWFsaXplT2JqZWN0IGV4dGVuZHMgSlF1ZXJ5IHtcclxuICAgICAgICBzZXJpYWxpemVPYmplY3QoKTogYW55O1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBQcm9kdWN0U2VhcmNoQ29udHJvbGxlciBleHRlbmRzIE9yY2tlc3RyYS5Db21wb3Nlci5Db250cm9sbGVyIHtcclxuICAgICAgICBwcml2YXRlIF9kZWJvdW5jZUhhbmRsZTsgLy8gbmVlZCB0byBzZWUgaG93IHRvIGZpeCB0aGUgYW55IGZvciB0aGlzLlxyXG4gICAgICAgIHByaXZhdGUgX2RlYm91bmNlVGltZW91dDogbnVtYmVyID0gNTAwO1xyXG4gICAgICAgIHByaXZhdGUgX3NlYXJjaFNlcnZpY2U6IElTZWFyY2hTZXJ2aWNlOyAvLyBUT0RPOiBESSB0aGlzLCBjb25zdHJ1Y3RvciBpbmplY3Rpb24gdmlhIGNvbnRyb2xsZXIgZmFjdG9yeT9cclxuXHJcbiAgICAgICAgcHVibGljIGluaXRpYWxpemUoKSB7XHJcbiAgICAgICAgICAgIHN1cGVyLmluaXRpYWxpemUoKTtcclxuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplU2VhcmNoU2VydmljZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG11bHRpRmFjZXRDaGFuZ2VkKGFjdGlvbkNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCkge1xyXG4gICAgICAgICAgICBpZiAoIV8uaXNFbXB0eSh0aGlzLl9kZWJvdW5jZUhhbmRsZSkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2RlYm91bmNlSGFuZGxlLmNhbmNlbCgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgYW5jaG9yQ29udGV4dCA9IGFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHQsXHJcbiAgICAgICAgICAgICAgICBmYWNldEZpZWxkTmFtZSA9IGFuY2hvckNvbnRleHQuYXR0cignbmFtZScpLFxyXG4gICAgICAgICAgICAgICAgZmFjZXRWYWx1ZSA9IGFuY2hvckNvbnRleHQuYXR0cigndmFsdWUnKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2RlYm91bmNlSGFuZGxlID0gXy5kZWJvdW5jZSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goJ211bHRpRmFjZXRDaGFuZ2VkJywge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmFjZXRLZXk6IGZhY2V0RmllbGROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmYWNldFZhbHVlOiBmYWNldFZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWdlVHlwZTogJ2Jyb3dzZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcjogKDxJU2VyaWFsaXplT2JqZWN0SnF1ZXJ5UGx1Z2luPiQoJ2Zvcm1bbmFtZT1cInNlYXJjaEZhY2V0c1wiXScsIHRoaXMuY29udGV4dC5jb250YWluZXIpKS5zZXJpYWxpemVPYmplY3QoKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9LCAyNTApO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fZGVib3VuY2VIYW5kbGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzaW5nbGVGYWNldENoYW5nZWQoYWN0aW9uQ29udGV4dDogSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0KSB7XHJcbiAgICAgICAgICAgIHZhciBhbmNob3JDb250ZXh0ID0gYWN0aW9uQ29udGV4dC5lbGVtZW50Q29udGV4dCxcclxuICAgICAgICAgICAgICAgIGZhY2V0RmllbGROYW1lID0gYW5jaG9yQ29udGV4dC5kYXRhKCdmYWNldGZpZWxkbmFtZScpLFxyXG4gICAgICAgICAgICAgICAgZmFjZXRWYWx1ZSA9IGFuY2hvckNvbnRleHQuZGF0YSgnZmFjZXR2YWx1ZScpLFxyXG4gICAgICAgICAgICAgICAgZmFjZXRzID0ge307XHJcblxyXG4gICAgICAgICAgICBhY3Rpb25Db250ZXh0LmV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGFjdGlvbkNvbnRleHQuZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goJ3NpbmdsZUZhY2V0c0NoYW5nZWQnLCB7XHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmFjZXRLZXk6IGZhY2V0RmllbGROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIGZhY2V0VmFsdWU6IGZhY2V0VmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZVR5cGU6ICdicm93c2UnXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHJlbW92ZVNlbGVjdGVkRmFjZXQoYWN0aW9uQ29udGV4dDogSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0KSB7XHJcbiAgICAgICAgICAgIHZhciByZW1vdmVGYWNldEJ1dHRvbiA9IGFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHQ7XHJcblxyXG4gICAgICAgICAgICBhY3Rpb25Db250ZXh0LmV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGFjdGlvbkNvbnRleHQuZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goJ2ZhY2V0UmVtb3ZlZCcsIHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICBmYWNldEZpZWxkTmFtZTogcmVtb3ZlRmFjZXRCdXR0b24uZGF0YSgnZmFjZXRmaWVsZG5hbWUnKSxcclxuICAgICAgICAgICAgICAgICAgICBmYWNldFZhbHVlOiByZW1vdmVGYWNldEJ1dHRvbi5kYXRhKCdmYWNldHZhbHVlJyksXHJcbiAgICAgICAgICAgICAgICAgICAgZmFjZXRUeXBlOiByZW1vdmVGYWNldEJ1dHRvbi5kYXRhKCdmYWNldHR5cGUnKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBjbGVhclNlbGVjdGVkRmFjZXRzKGFjdGlvbkNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCkge1xyXG4gICAgICAgICAgICBhY3Rpb25Db250ZXh0LmV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGFjdGlvbkNvbnRleHQuZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goJ2ZhY2V0c0NsZWFyZWQnLCBudWxsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgaW5pdGlhbGl6ZVNlYXJjaFNlcnZpY2UoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3NlYXJjaFNlcnZpY2UgPSBuZXcgU2VhcmNoU2VydmljZSh0aGlzLmV2ZW50SHViLCB3aW5kb3cpO1xyXG4gICAgICAgICAgICB0aGlzLl9zZWFyY2hTZXJ2aWNlLmluaXRpYWxpemUoe1xyXG4gICAgICAgICAgICAgICAgZmFjZXRSZWdpc3RyeTogdGhpcy5idWlsZEZhY2V0UmVnaXN0cnkoKVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgYnVpbGRGYWNldFJlZ2lzdHJ5KCk6IElIYXNoVGFibGU8c3RyaW5nPiB7XHJcbiAgICAgICAgICAgIHZhciBmYWNldFJlZ2lzdHJ5OiBJSGFzaFRhYmxlPHN0cmluZz4gPSB7fTtcclxuXHJcbiAgICAgICAgICAgICQoJ1tkYXRhLWZhY2V0dHlwZV0nLCB0aGlzLmNvbnRleHQuY29udGFpbmVyKVxyXG4gICAgICAgICAgICAgICAgLmFkZCgkKCcjc2VsZWN0ZWRGYWNldHMgW2RhdGEtZmFjZXRmaWVsZG5hbWVdJywgdGhpcy5jb250ZXh0LmNvbnRhaW5lcikpXHJcbiAgICAgICAgICAgICAgICAuZWFjaCgoaW5kZXg6IG51bWJlciwgaXRlbTogSFRNTEVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgZmFjZXRUeXBlOiBzdHJpbmcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhY2V0RmllbGROYW1lOiBzdHJpbmcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhY2V0R3JvdXA6IEpRdWVyeSA9ICQoaXRlbSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZhY2V0RmllbGROYW1lID0gZmFjZXRHcm91cC5kYXRhKCdmYWNldGZpZWxkbmFtZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZhY2V0VHlwZSA9ICg8c3RyaW5nPmZhY2V0R3JvdXAuZGF0YSgnZmFjZXR0eXBlJykpLnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZmFjZXRSZWdpc3RyeVtmYWNldEZpZWxkTmFtZV0gPSBmYWNldFR5cGU7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWNldFJlZ2lzdHJ5O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5Qcm9kdWN0LlVJL1Byb2R1Y3QvU291cmNlL1R5cGVTY3JpcHQvUHJvZHVjdENvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nSVF1aWNrVmlld0NvbnRyb2xsZXIudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgUXVpY2tWaWV3Q29udHJvbGxlciAgZXh0ZW5kcyBPcmNrZXN0cmEuQ29tcG9zZXIuUHJvZHVjdENvbnRyb2xsZXIgaW1wbGVtZW50cyBPcmNrZXN0cmEuQ29tcG9zZXIuSVF1aWNrVmlld0NvbnRyb2xsZXIge1xyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgY29uY2Vybjogc3RyaW5nID0gJ3Byb2R1Y3RTZWFyY2gnO1xyXG5cclxuICAgICAgICBwdWJsaWMgaW5pdGlhbGl6ZSgpIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRDb25jZXJuV2l0aENvbnRleHQoKTtcclxuICAgICAgICAgICAgc3VwZXIuaW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHNldENvbmNlcm5XaXRoQ29udGV4dCgpOiB2b2lkIHtcclxuICAgICAgICAgICAgdmFyIGNvbnRleHR1YWxDb25jZXJuOiBzdHJpbmcgPSB0aGlzLmNvbnRleHQuY29udGFpbmVyLmNsb3Nlc3QoJ1tkYXRhLWNvbmNlcm5dJykuZGF0YSgnY29uY2VybicpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGNvbnRleHR1YWxDb25jZXJuKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmNlcm4gPSBjb250ZXh0dWFsQ29uY2VybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHJlZ2lzdGVyU3Vic2NyaXB0aW9ucygpIHtcclxuXHJcbiAgICAgICAgICAgIHN1cGVyLnJlZ2lzdGVyU3Vic2NyaXB0aW9ucygpO1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnN1YnNjcmliZSh0aGlzLmNvbmNlcm4gKyAnUXVpY2tCdXlMb2FkZWQnLCBlID0+IHRoaXMub25RdWlja0J1eUxvYWRlZChlKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb25RdWlja0J1eUxvYWRlZChlOiBJRXZlbnRJbmZvcm1hdGlvbikge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5yZW5kZXIoJ1Byb2R1Y3RRdWlja1ZpZXcnLCBlLmRhdGEpO1xyXG4gICAgICAgICAgICB0aGlzLnByb2R1Y3RTZXJ2aWNlLnNob3dRdWlja1ZpZXcoKTtcclxuICAgICAgICAgICAgdGhpcy5jb250ZXh0LnZpZXdNb2RlbCA9IEpTT04ucGFyc2UoZS5kYXRhWydKc29uQ29udGV4dCddIHx8ICd7fScpO1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRleHQudmlld01vZGVsLnNvdXJjZSA9IGUuc291cmNlO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zZXRWYXJpYW50SWQodGhpcy5jb250ZXh0LnZpZXdNb2RlbC5kaXNwbGF5ZWRWYXJpYW50SWQpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHByaWNlRGlzcGxheUJ1c3k6IFVJQnVzeUhhbmRsZSA9IHRoaXMuYXN5bmNCdXN5KHtcclxuICAgICAgICAgICAgICAgIG1zRGVsYXk6IDMwMCxcclxuICAgICAgICAgICAgICAgIGxvYWRpbmdJbmRpY2F0b3JTZWxlY3RvcjogJy5sb2FkaW5nLWluZGljYXRvci1wcmljZWRpc2NvdW50J1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHZhciBhZGRUb0NhcnRCdXN5OiBVSUJ1c3lIYW5kbGUgPSB0aGlzLmFzeW5jQnVzeSh7XHJcbiAgICAgICAgICAgICAgICBtc0RlbGF5OiAzMDAsXHJcbiAgICAgICAgICAgICAgICBsb2FkaW5nSW5kaWNhdG9yU2VsZWN0b3I6ICcubG9hZGluZy1pbmRpY2F0b3ItaW52ZW50b3J5J1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHZhciBwcm9taXNlOiBRLlByb21pc2U8YW55PiA9IFEuYWxsKFt0aGlzLmNhbGN1bGF0ZVByaWNlKCksIHRoaXMucmVuZGVyRGF0YSgpXSlcclxuICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBFcnJvckhhbmRsZXIuaW5zdGFuY2UoKS5yZW1vdmVFcnJvcnMoKTtcclxuICAgICAgICAgICAgICAgIH0sIChyZWFzb246IGFueSkgPT4gdGhpcy5vbkxvYWRpbmdGYWlsZWQocmVhc29uKSlcclxuICAgICAgICAgICAgICAgIC5maW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHByaWNlRGlzcGxheUJ1c3kuZG9uZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZFRvQ2FydEJ1c3kuZG9uZSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb25Mb2FkaW5nRmFpbGVkKHJlYXNvbjogYW55KSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCBsb2FkaW5nIHRoZSBQcm9kdWN0IFF1aWNrIFZpZXcnKTtcclxuXHJcbiAgICAgICAgICAgIEVycm9ySGFuZGxlci5pbnN0YW5jZSgpLm91dHB1dEVycm9yRnJvbUNvZGUoJ1F1aWNrVmlld0xvYWRGYWlsZWQnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc2V0VmFyaWFudElkKHZhcmlhbnRJZDogc3RyaW5nKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgdmFyaWFudCA9ICh0aGlzLnByb2R1Y3RTZXJ2aWNlLmdldFZhcmlhbnQodmFyaWFudElkKSB8fCB7fSk7XHJcbiAgICAgICAgICAgIHRoaXMucHJvZHVjdFNlcnZpY2UudXBkYXRlU2VsZWN0ZWRLdmFzV2l0aCh2YXJpYW50Lkt2YXMsIHRoaXMuY29uY2Vybik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb25TZWxlY3RlZFZhcmlhbnRJZENoYW5nZWQoZTogSUV2ZW50SW5mb3JtYXRpb24pIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyRGF0YSgpXHJcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB0aGlzLm9uU2VsZWN0ZWRWYXJpYW50SWRDaGFuZ2VkU3VjY2VzcygpLFxyXG4gICAgICAgICAgICAgICAgICAgIChyZWFzb246IGFueSkgPT4gdGhpcy5vblNlbGVjdGVkVmFyaWFudElkQ2hhbmdlZEZhaWxlZChyZWFzb24pKVxyXG4gICAgICAgICAgICAgICAgLmRvbmUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvblNlbGVjdGVkVmFyaWFudElkQ2hhbmdlZFN1Y2Nlc3MoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIEVycm9ySGFuZGxlci5pbnN0YW5jZSgpLnJlbW92ZUVycm9ycygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uU2VsZWN0ZWRWYXJpYW50SWRDaGFuZ2VkRmFpbGVkKHJlYXNvbjogYW55KTogdm9pZCB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHdoaWxlIGNoYW5naW5nIHRoZSBzZWxlY3RlZCB2YXJpYW50LicsIHJlYXNvbik7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyVW5hdmFpbGFibGVBZGRUb0NhcnQoKTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJVbmF2YWlsYWJsZVF1YW50aXR5KHRoaXMuZ2V0Q3VycmVudFF1YW50aXR5KCkpO1xyXG5cclxuICAgICAgICAgICAgRXJyb3JIYW5kbGVyLmluc3RhbmNlKCkub3V0cHV0RXJyb3JGcm9tQ29kZSgnU2VsZWN0ZWRWYXJpYW50Q2hhbmdlRmFpbGVkJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb25TZWxlY3RlZEt2YXNDaGFuZ2VkKGU6IElFdmVudEluZm9ybWF0aW9uKSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcignUHJvZHVjdFF1aWNrVmlld0t2YUl0ZW1zJywgeyBLZXlWYXJpYW50QXR0cmlidXRlSXRlbXM6IGUuZGF0YSB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvbkltYWdlc0NoYW5nZWQoZTogSUV2ZW50SW5mb3JtYXRpb24pIHtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzUHJvZHVjdFdpdGhWYXJpYW50cygpICYmIHRoaXMuaXNTZWxlY3RlZFZhcmlhbnRVbmF2YWlsYWJsZSgpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcignTWFpbkltYWdlQ29udGVudCcsIHRoaXMuZ2V0VW5hdmFpbGFibGVNYWluSW1hZ2VDb250ZW50KGUpKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKCdNYWluSW1hZ2VDb250ZW50JywgZS5kYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXRVbmF2YWlsYWJsZU1haW5JbWFnZUNvbnRlbnQoZTogSUV2ZW50SW5mb3JtYXRpb24pOiBhbnkge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIERpc3BsYXlOYW1lOiBlLmRhdGEuRGlzcGxheU5hbWUsXHJcbiAgICAgICAgICAgICAgICBTZWxlY3RlZEltYWdlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgSW1hZ2VVcmw6IGUuZGF0YS5GYWxsYmFja0ltYWdlVXJsXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb25QcmljZXNDaGFuZ2VkKGU6IElFdmVudEluZm9ybWF0aW9uKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5pc1Byb2R1Y3RXaXRoVmFyaWFudHMoKSAmJiB0aGlzLmlzU2VsZWN0ZWRWYXJpYW50VW5hdmFpbGFibGUoKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIoJ1ByaWNlRGlzY291bnQnLCBudWxsKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKCdQcmljZURpc2NvdW50JywgZS5kYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHJlbmRlclVuYXZhaWxhYmxlQWRkVG9DYXJ0KCk6IFEuUHJvbWlzZTx2b2lkPiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gUS5mY2FsbCgoKSA9PiB0aGlzLnJlbmRlcignQWRkVG9DYXJ0UXVpY2tWaWV3JywgeyBJc1VuYXZhaWxhYmxlOiB0cnVlIH0pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCByZW5kZXJBdmFpbGFibGVBZGRUb0NhcnQoKTogUS5Qcm9taXNlPHZvaWQ+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmludmVudG9yeVNlcnZpY2VcclxuICAgICAgICAgICAgICAgICAgICAgICAuaXNBdmFpbGFibGVUb1NlbGwodGhpcy5jb250ZXh0LnZpZXdNb2RlbC5Ta3UpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzdWx0ID0+IHRoaXMucmVuZGVyKCdBZGRUb0NhcnRRdWlja1ZpZXcnLCB7IElzQXZhaWxhYmxlVG9TZWxsOiByZXN1bHQgfSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGNvbXBsZXRlQWRkTGluZUl0ZW0ocXVhbnRpdHlBZGRlZDogYW55KTogUS5Qcm9taXNlPHZvaWQ+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBRLmZjYWxsKCgpID0+IHRoaXMucHJvZHVjdFNlcnZpY2UuY2xvc2VRdWlja1ZpZXcoKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgZ2V0TGlzdE5hbWVGb3JBbmFseXRpY3MoKTogc3RyaW5nIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29udGV4dC52aWV3TW9kZWwuc291cmNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvSnF1ZXJ5UGx1Z2lucy9JU2VyaWFsaXplT2JqZWN0SnF1ZXJ5UGx1Z2luLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvQ29udHJvbGxlci50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvRXJyb3JIYW5kbGluZy9FcnJvckhhbmRsZXIudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9JQ29udHJvbGxlckFjdGlvbkNvbnRleHQudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9JQ29udHJvbGxlckNvbnRleHQudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L1JlcG9zaXRvcmllcy9DYXJ0UmVwb3NpdG9yeS50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuQ2FydC5VSS9DYXJ0U3VtbWFyeS9Tb3VyY2UvVHlwZVNjcmlwdC9DYXJ0U2VydmljZS50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vUHJvZHVjdC9Tb3VyY2UvVHlwZVNjcmlwdC9Qcm9kdWN0U2VydmljZS50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBTZWFyY2hSZXN1bHRzQ29udHJvbGxlciBleHRlbmRzIE9yY2tlc3RyYS5Db21wb3Nlci5Db250cm9sbGVyIHtcclxuICAgICAgICBwcm90ZWN0ZWQgY2FydFNlcnZpY2U6IENhcnRTZXJ2aWNlID0gbmV3IENhcnRTZXJ2aWNlKG5ldyBDYXJ0UmVwb3NpdG9yeSgpLCB0aGlzLmV2ZW50SHViKTtcclxuICAgICAgICBwcm90ZWN0ZWQgcHJvZHVjdFNlcnZpY2U6IFByb2R1Y3RTZXJ2aWNlID0gbmV3IFByb2R1Y3RTZXJ2aWNlKHRoaXMuZXZlbnRIdWIsIHRoaXMuY29udGV4dCk7XHJcbiAgICAgICAgcHJvdGVjdGVkIGN1cnJlbnRQYWdlOiBhbnk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKCkge1xyXG5cclxuICAgICAgICAgICAgc3VwZXIuaW5pdGlhbGl6ZSgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50UGFnZSA9IHRoaXMuZ2V0Q3VycmVudFBhZ2UoKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaCgnc2VhcmNoUmVzdWx0UmVuZGVyZWQnLCB7XHJcbiAgICAgICAgICAgICAgICBkYXRhIDoge1xyXG4gICAgICAgICAgICAgICAgICAgIFByb2R1Y3RTZWFyY2hSZXN1bHRzIDogdGhpcy5jb250ZXh0LnZpZXdNb2RlbC5Qcm9kdWN0U2VhcmNoUmVzdWx0cyxcclxuICAgICAgICAgICAgICAgICAgICBMaXN0TmFtZSA6IHRoaXMuY29udGV4dC52aWV3TW9kZWwuTGlzdE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgUGFnZU51bWJlciA6IHRoaXMuY3VycmVudFBhZ2UuRGlzcGxheU5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgTWF4SXRlbXNQZXJQYWdlIDogdGhpcy5jb250ZXh0LnZpZXdNb2RlbC5NYXhJdGVtc1BlclBhZ2VcclxuICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGdldEN1cnJlbnRQYWdlKCk6IGFueSB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gPGFueT4gXy5maW5kKHRoaXMuY29udGV4dC52aWV3TW9kZWwuUHJvZHVjdFNlYXJjaFJlc3VsdHMuUGFnaW5hdGlvbi5QYWdlcywge0lzQ3VycmVudFBhZ2UgOiB0cnVlfSkgfHwge307XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYWRkVG9DYXJ0KGFjdGlvbkNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCkge1xyXG5cclxuICAgICAgICAgICAgdmFyIHByb2R1Y3RDb250ZXh0OiBKUXVlcnkgPSAkKGFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHQpLmNsb3Nlc3QoJ1tkYXRhLXByb2R1Y3QtaWRdJyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgaGFzVmFyaWFudHM6IHN0cmluZyA9IDxhbnk+cHJvZHVjdENvbnRleHQuZGF0YSgnaGFzVmFyaWFudHMnKTtcclxuXHJcbiAgICAgICAgICAgIC8vRG8gbm90IHVzZSAuZGF0YSBzaW5jZSBpdCBtYXkgcGFyc2UgdGhlIGlkIGFzIGEgbnVtYmVyLlxyXG4gICAgICAgICAgICB2YXIgcHJvZHVjdElkOiBzdHJpbmcgPSBwcm9kdWN0Q29udGV4dC5hdHRyKCdkYXRhLXByb2R1Y3QtaWQnKTtcclxuICAgICAgICAgICAgdmFyIHZhcmlhbnRJZDogc3RyaW5nID0gcHJvZHVjdENvbnRleHQuYXR0cignZGF0YS1wcm9kdWN0LXZhcmlhbnQtaWQnKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBwcm9kdWN0ID0gXy5maW5kKHRoaXMuY29udGV4dC52aWV3TW9kZWwuUHJvZHVjdFNlYXJjaFJlc3VsdHMuU2VhcmNoUmVzdWx0cywgZnVuY3Rpb24ocHJvZHVjdDogYW55KSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoXy5pc0VtcHR5KHZhcmlhbnRJZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJvZHVjdC5Qcm9kdWN0SWQgPT09IHByb2R1Y3RJZDtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHByb2R1Y3QuUHJvZHVjdElkID09PSBwcm9kdWN0SWQgJiYgcHJvZHVjdC5WYXJpYW50SWQgPT09IHZhcmlhbnRJZDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHZhciBwcmljZTogbnVtYmVyID0gcHJvZHVjdC5QcmljaW5nLklzT25TYWxlID8gcHJvZHVjdC5QcmljaW5nLlByaWNlIDogcHJvZHVjdC5QcmljaW5nLkxpc3RQcmljZTtcclxuXHJcbiAgICAgICAgICAgIHZhciBidXN5ID0gdGhpcy5hc3luY0J1c3koeyBlbGVtZW50Q29udGV4dDogYWN0aW9uQ29udGV4dC5lbGVtZW50Q29udGV4dCwgY29udGFpbmVyQ29udGV4dDogcHJvZHVjdENvbnRleHQgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoaGFzVmFyaWFudHMgPT09ICdUcnVlJykge1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMucHJvZHVjdFNlcnZpY2UubG9hZFF1aWNrQnV5UHJvZHVjdChwcm9kdWN0SWQsIHZhcmlhbnRJZCwgJ3Byb2R1Y3RTZWFyY2gnLCB0aGlzLmNvbnRleHQudmlld01vZGVsLkxpc3ROYW1lKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKChkYXRhOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgRXJyb3JIYW5kbGVyLmluc3RhbmNlKCkucmVtb3ZlRXJyb3JzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIChyZWFzb246IGFueSkgPT4gdGhpcy5vbkFkZFRvQ2FydEZhaWxlZChyZWFzb24pKVxyXG4gICAgICAgICAgICAgICAgICAgIC5maW4oKCkgPT4gYnVzeS5kb25lKCkpO1xyXG5cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciBwcm9kdWN0RGF0YTogYW55ID0gdGhpcy5nZXRQcm9kdWN0RGF0YUZvckFuYWx5dGljcyhwcm9kdWN0SWQsIHByaWNlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaCgnbGluZUl0ZW1BZGRpbmcnLCB7IGRhdGE6IHByb2R1Y3REYXRhIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuY2FydFNlcnZpY2UuYWRkTGluZUl0ZW0ocHJvZHVjdElkLCAnJyArIHByaWNlKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKChkYXRhOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgRXJyb3JIYW5kbGVyLmluc3RhbmNlKCkucmVtb3ZlRXJyb3JzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIChyZWFzb246IGFueSkgPT4gdGhpcy5vbkFkZFRvQ2FydEZhaWxlZChyZWFzb24pKVxyXG4gICAgICAgICAgICAgICAgICAgIC5maW4oKCkgPT4gYnVzeS5kb25lKCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb25BZGRUb0NhcnRGYWlsZWQocmVhc29uOiBhbnkpOiB2b2lkIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igb24gYWRkaW5nIGl0ZW0gdG8gY2FydCcsIHJlYXNvbik7XHJcblxyXG4gICAgICAgICAgICBFcnJvckhhbmRsZXIuaW5zdGFuY2UoKS5vdXRwdXRFcnJvckZyb21Db2RlKCdBZGRUb0NhcnRGYWlsZWQnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzZWFyY2hQcm9kdWN0Q2xpY2soYWN0aW9uQ29udGV4dDogSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0KSB7XHJcbiAgICAgICAgICAgIHZhciBpbmRleDogbnVtYmVyID0gPGFueT5hY3Rpb25Db250ZXh0LmVsZW1lbnRDb250ZXh0LmRhdGEoJ2luZGV4Jyk7XHJcbiAgICAgICAgICAgIHZhciBwcm9kdWN0SWQ6IHN0cmluZyA9IGFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHQuZGF0YSgncHJvZHVjdGlkJykudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgdmFyIHByb2R1Y3Q6IGFueSA9IF8uZmluZCh0aGlzLmNvbnRleHQudmlld01vZGVsLlByb2R1Y3RTZWFyY2hSZXN1bHRzLlNlYXJjaFJlc3VsdHMsIHtQcm9kdWN0SWQgOiBwcm9kdWN0SWR9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaCgncHJvZHVjdENsaWNrJywge2RhdGEgOiB7XHJcbiAgICAgICAgICAgICAgICBQcm9kdWN0IDogcHJvZHVjdCxcclxuICAgICAgICAgICAgICAgIExpc3ROYW1lIDogdGhpcy5jb250ZXh0LnZpZXdNb2RlbC5MaXN0TmFtZSxcclxuICAgICAgICAgICAgICAgIEluZGV4IDogaW5kZXgsXHJcbiAgICAgICAgICAgICAgICBQYWdlTnVtYmVyIDogdGhpcy5jdXJyZW50UGFnZS5EaXNwbGF5TmFtZSxcclxuICAgICAgICAgICAgICAgIE1heEl0ZW1zUGVyUGFnZSA6IHRoaXMuY29udGV4dC52aWV3TW9kZWwuTWF4SXRlbXNQZXJQYWdlXHJcbiAgICAgICAgICAgIH19KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBwYWdlclBhZ2VDaGFuZ2VkKGFjdGlvbkNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCkge1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRleHQud2luZG93LmxvY2F0aW9uLmhyZWYgPSBhY3Rpb25Db250ZXh0LmVsZW1lbnRDb250ZXh0LnZhbCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGdldFByb2R1Y3REYXRhRm9yQW5hbHl0aWNzKHByb2R1Y3RJZDogc3RyaW5nLCBwcmljZTogYW55KTogYW55IHtcclxuICAgICAgICAgICAgdmFyIHJlc3VsdHMgPSB0aGlzLmNvbnRleHQudmlld01vZGVsLlByb2R1Y3RTZWFyY2hSZXN1bHRzLlNlYXJjaFJlc3VsdHM7XHJcbiAgICAgICAgICAgIHZhciB2bSA9IF8uZmluZChyZXN1bHRzLCAocjogYW55KSA9PiByLlByb2R1Y3RJZCA9PT0gcHJvZHVjdElkKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghdm0pIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgQ291bGQgbm90IGZpbmQgYSBwcm9kdWN0IHdpdGggdGhlIElEICcke3Byb2R1Y3RJZH0nLmApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIExpc3Q6IHRoaXMuY29udGV4dC52aWV3TW9kZWwuTGlzdE5hbWUsXHJcbiAgICAgICAgICAgICAgICBQcm9kdWN0SWQ6IHZtLlByb2R1Y3RJZCxcclxuICAgICAgICAgICAgICAgIERpc3BsYXlOYW1lOiB2bS5EaXNwbGF5TmFtZSxcclxuICAgICAgICAgICAgICAgIExpc3RQcmljZTogcHJpY2UsXHJcbiAgICAgICAgICAgICAgICBCcmFuZDogdm0uQnJhbmQsXHJcbiAgICAgICAgICAgICAgICBDYXRlZ29yeUlkOiB2bS5DYXRlZ29yeUlkLFxyXG4gICAgICAgICAgICAgICAgUXVhbnRpdHk6IDFcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0NvbnRyb2xsZXIudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9JQ29udHJvbGxlckFjdGlvbkNvbnRleHQudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9JQ29udHJvbGxlckNvbnRleHQudHMnIC8+XHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBTZWFyY2hTdW1tYXJ5Q29udHJvbGxlciBleHRlbmRzIE9yY2tlc3RyYS5Db21wb3Nlci5Db250cm9sbGVyIHtcclxuXHJcbiAgICAgICAgcHVibGljIGluaXRpYWxpemUoKSB7XHJcblxyXG4gICAgICAgICAgICBzdXBlci5pbml0aWFsaXplKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHByb2R1Y3RTZWFyY2hSZXN1bHRzID0gdGhpcy5jb250ZXh0LnZpZXdNb2RlbC5Qcm9kdWN0U2VhcmNoUmVzdWx0cztcclxuXHJcbiAgICAgICAgICAgIGlmIChwcm9kdWN0U2VhcmNoUmVzdWx0cy5Ub3RhbENvdW50ID09PSAwICYmIHByb2R1Y3RTZWFyY2hSZXN1bHRzLktleXdvcmRzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goJ25vUmVzdWx0c0ZvdW5kJywge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEgOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEtleXdvcmQgOiBwcm9kdWN0U2VhcmNoUmVzdWx0cy5LZXl3b3JkcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgTGlzdE5hbWUgOiB0aGlzLmNvbnRleHQudmlld01vZGVsLkxpc3ROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIV8uaXNFbXB0eShwcm9kdWN0U2VhcmNoUmVzdWx0cy5Db3JyZWN0ZWRTZWFyY2hUZXJtcylcclxuICAgICAgICAgICAgJiYgcHJvZHVjdFNlYXJjaFJlc3VsdHMuS2V5d29yZHNcclxuICAgICAgICAgICAgJiYgcHJvZHVjdFNlYXJjaFJlc3VsdHMuVG90YWxDb3VudCAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKCdzZWFyY2hUZXJtQ29ycmVjdGVkJywge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEgOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFByb2R1Y3RTZWFyY2hSZXN1bHRzIDogcHJvZHVjdFNlYXJjaFJlc3VsdHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEtleXdvcmRFbnRlcmVkIDogcHJvZHVjdFNlYXJjaFJlc3VsdHMuS2V5d29yZHMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEtleXdvcmRDb3JyZWN0ZWQgOiBwcm9kdWN0U2VhcmNoUmVzdWx0cy5Db3JyZWN0ZWRTZWFyY2hUZXJtcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgTGlzdE5hbWUgOiB0aGlzLmNvbnRleHQudmlld01vZGVsLkxpc3ROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIH19XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9KcXVlcnlQbHVnaW5zL0lTZXJpYWxpemVPYmplY3RKcXVlcnlQbHVnaW4udHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9Db250cm9sbGVyLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0LnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvSUNvbnRyb2xsZXJDb250ZXh0LnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuL1NlcnZpY2VzL1NlYXJjaFNlcnZpY2UudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4vU2VydmljZXMvSVNlYXJjaFNlcnZpY2UudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0lDb250cm9sbGVyQWN0aW9uQ29udGV4dC50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi9VcmxIZWxwZXIudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBpbnRlcmZhY2UgU2VyaWFsaXplT2JqZWN0IGV4dGVuZHMgSlF1ZXJ5IHtcclxuICAgICAgICBzZXJpYWxpemVPYmplY3QoKTogYW55O1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBTZWxlY3RlZEZhY2V0U2VhcmNoQ29udHJvbGxlciBleHRlbmRzIE9yY2tlc3RyYS5Db21wb3Nlci5Db250cm9sbGVyIHtcclxuXHJcbiAgICAgICAgcHVibGljIGluaXRpYWxpemUoKSB7XHJcbiAgICAgICAgICAgIHN1cGVyLmluaXRpYWxpemUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyByZW1vdmVTZWxlY3RlZEZhY2V0KGFjdGlvbkNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCkge1xyXG4gICAgICAgICAgICB2YXIgcmVtb3ZlRmFjZXRCdXR0b24gPSBhY3Rpb25Db250ZXh0LmVsZW1lbnRDb250ZXh0O1xyXG5cclxuICAgICAgICAgICAgYWN0aW9uQ29udGV4dC5ldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBhY3Rpb25Db250ZXh0LmV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKCdmYWNldFJlbW92ZWQnLCB7XHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmFjZXRGaWVsZE5hbWU6IHJlbW92ZUZhY2V0QnV0dG9uLmRhdGEoJ2ZhY2V0ZmllbGRuYW1lJyksXHJcbiAgICAgICAgICAgICAgICAgICAgZmFjZXRWYWx1ZTogcmVtb3ZlRmFjZXRCdXR0b24uZGF0YSgnZmFjZXR2YWx1ZScpLFxyXG4gICAgICAgICAgICAgICAgICAgIGZhY2V0VHlwZTogcmVtb3ZlRmFjZXRCdXR0b24uZGF0YSgnZmFjZXR0eXBlJyksXHJcbiAgICAgICAgICAgICAgICAgICAgZmFjZXRMYW5kaW5nUGFnZVVybDogcmVtb3ZlRmFjZXRCdXR0b24uZGF0YSgnZmFjZXRsYW5kaW5ncGFnZXVybCcpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGNsZWFyU2VsZWN0ZWRGYWNldHMoYWN0aW9uQ29udGV4dDogSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0KSB7XHJcbiAgICAgICAgICAgIHZhciBjbGVhckZhY2V0c0J1dHRvbiA9IGFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHQ7XHJcblxyXG4gICAgICAgICAgICBhY3Rpb25Db250ZXh0LmV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGFjdGlvbkNvbnRleHQuZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goJ2ZhY2V0c0NsZWFyZWQnLCB7XHJcbiAgICAgICAgICAgICAgIGRhdGE6IHsgbGFuZGluZ1BhZ2VVcmw6IGNsZWFyRmFjZXRzQnV0dG9uLmRhdGEoJ2xhbmRpbmdwYWdldXJsJykgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBhZGRTaW5nbGVTZWxlY3RDYXRlZ29yeShhY3Rpb25Db250ZXh0OiBJQ29udHJvbGxlckFjdGlvbkNvbnRleHQpIHtcclxuICAgICAgICAgICAgdmFyIHNpbmdsZVNlbGVjdENhdGVnb3J5ID0gYWN0aW9uQ29udGV4dC5lbGVtZW50Q29udGV4dCxcclxuICAgICAgICAgICAgICAgIGFuY2hvckNvbnRleHQgPSBhY3Rpb25Db250ZXh0LmVsZW1lbnRDb250ZXh0LFxyXG4gICAgICAgICAgICAgICAgZmFjZXRGaWVsZE5hbWUgPSBhbmNob3JDb250ZXh0LmRhdGEoJ2ZhY2V0ZmllbGRuYW1lJyksXHJcbiAgICAgICAgICAgICAgICBmYWNldFZhbHVlID0gYW5jaG9yQ29udGV4dC5kYXRhKCdmYWNldHZhbHVlJyk7XHJcblxyXG4gICAgICAgICAgICBhY3Rpb25Db250ZXh0LmV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGFjdGlvbkNvbnRleHQuZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goJ3NpbmdsZUNhdGVnb3J5QWRkZWQnLCB7XHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnlVcmw6IHNpbmdsZVNlbGVjdENhdGVnb3J5LmRhdGEoJ2NhdGVnb3J5dXJsJyksXHJcbiAgICAgICAgICAgICAgICAgICAgZmFjZXRLZXk6IGZhY2V0RmllbGROYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIGZhY2V0VmFsdWU6IGZhY2V0VmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZVR5cGU6IFVybEhlbHBlci5yZXNvbHZlUGFnZVR5cGUoKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L0pxdWVyeVBsdWdpbnMvSVNlcmlhbGl6ZU9iamVjdEpxdWVyeVBsdWdpbi50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0NvbnRyb2xsZXIudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9JQ29udHJvbGxlckFjdGlvbkNvbnRleHQudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9JQ29udHJvbGxlckNvbnRleHQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0lDb250cm9sbGVyQWN0aW9uQ29udGV4dC50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi9VcmxIZWxwZXIudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgU29ydEJ5U2VhcmNoQ29udHJvbGxlciBleHRlbmRzIE9yY2tlc3RyYS5Db21wb3Nlci5Db250cm9sbGVyIHtcclxuXHJcbiAgICAgICAgcHVibGljIHNvcnRpbmdDaGFuZ2VkKGFjdGlvbkNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCkge1xyXG4gICAgICAgICAgICB2YXIgYW5jaG9yQ29udGV4dCA9IGFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHQsXHJcbiAgICAgICAgICAgICAgICBkYXRhU29ydGluZ1R5cGUgPSBhbmNob3JDb250ZXh0LmRhdGEoJ3NvcnRpbmcnKSxcclxuICAgICAgICAgICAgICAgIGRhdGFVcmwgPSBhbmNob3JDb250ZXh0LmRhdGEoJ3VybCcpLFxyXG4gICAgICAgICAgICAgICAgcmVzb2x2ZVBhZ2VUeXBlID0gVXJsSGVscGVyLnJlc29sdmVQYWdlVHlwZSgpO1xyXG5cclxuICAgICAgICAgICAgYWN0aW9uQ29udGV4dC5ldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBhY3Rpb25Db250ZXh0LmV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKCdzb3J0aW5nQ2hhbmdlZCcsIHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICBzb3J0aW5nVHlwZTogZGF0YVNvcnRpbmdUeXBlLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VUeXBlOiByZXNvbHZlUGFnZVR5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiBkYXRhVXJsXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLG51bGwsIi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4vSVBsdWdpbi50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9FdmVudHMvRXZlbnRIdWIudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIGV4cG9ydCBjbGFzcyBTbGlja0Nhcm91c2VsUGx1Z2luIGltcGxlbWVudHMgSVBsdWdpbiB7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKHdpbmRvdzogV2luZG93LCBkb2N1bWVudDogSFRNTERvY3VtZW50KSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0RXZlbnRzKCk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5pdFNsaWNrKCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcHVibGljIGluaXRTbGljaygpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgICAgICQuZWFjaCgkKCcuanMtc2xpY2stY2Fyb3VzZWwnKSwgKGluZGV4LCBlbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2xpY2tJbnN0YW5jZSA9ICQoZWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICBsZXQgc2xpY2tPcHRpb25zOiBhbnkgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXJyb3dzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNpdmU6IFt7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvdHM6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVha3BvaW50OiAxMDI0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5maW5pdGU6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1dXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgaWYgKCEkKHNsaWNrSW5zdGFuY2UpLmhhc0NsYXNzKCdzbGljay1pbml0aWFsaXplZCcpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNsaWNrSW5zdGFuY2UuZGF0YSgnc2xpY2snKS5tb2JpbGVDYXJvdXNlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbmJTbGlkZVRvU2hvdyA9IHNsaWNrSW5zdGFuY2UuZGF0YSgnc2xpY2snKS5tb2JpbGVTbGlkZXNUb1Nob3c7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5iU2xpZGVUb1Nob3cgPSAoIG5iU2xpZGVUb1Nob3cgKSA/IG5iU2xpZGVUb1Nob3cgOiAyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbmJTbGlkZVRvU2Nyb2xsID0gc2xpY2tJbnN0YW5jZS5kYXRhKCdzbGljaycpLm1vYmlsZVNsaWRlc1RvU2Nyb2xsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuYlNsaWRlVG9TY3JvbGwgPSAoIG5iU2xpZGVUb1Njcm9sbCApID8gbmJTbGlkZVRvU2Nyb2xsIDogMjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNsaWNrT3B0aW9ucy5yZXNwb25zaXZlLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtwb2ludDogNzY4LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXJyb3dzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2xpZGVzVG9TaG93OiBuYlNsaWRlVG9TaG93LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlc1RvU2Nyb2xsOiBuYlNsaWRlVG9TY3JvbGwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG90czogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbmZpbml0ZTogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzbGlja09wdGlvbnMucmVzcG9uc2l2ZS5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrcG9pbnQ6IDc2OCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFycm93czogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nczogJ3Vuc2xpY2snIC8vIGRlc3Ryb3lzIHNsaWNrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2xpY2tJbnN0YW5jZS5zbGljayhzbGlja09wdGlvbnMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBwcml2YXRlIHN1YnNjcmlwdEV2ZW50cygpOiB2b2lkIHtcclxuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG5cclxuICAgICAgICAgICAgJCh3aW5kb3cpLm9uKCdyZXNpemUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoJCh3aW5kb3cpLndpZHRoKCkgPiA3NjgpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmluaXRTbGljaygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIEV2ZW50SHViLmluc3RhbmNlKCkuc3Vic2NyaWJlKCdpbmlDYXJvdXNlbCcsIChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmluaXRTbGljaygpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfVxyXG59XHJcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlByb2R1Y3QuVUkvUHJvZHVjdC9Tb3VyY2UvVHlwZVNjcmlwdC9Qcm9kdWN0Q29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9QbHVnaW5zL1NsaWNrQ2Fyb3VzZWxQbHVnaW4udHMnIC8+XHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgZXhwb3J0IGNsYXNzIFJlbGF0ZWRQcm9kdWN0Q29udHJvbGxlciBleHRlbmRzIE9yY2tlc3RyYS5Db21wb3Nlci5Qcm9kdWN0Q29udHJvbGxlciAge1xyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgY29uY2Vybjogc3RyaW5nID0gJ3JlbGF0ZWRQcm9kdWN0JztcclxuICAgICAgICBwcml2YXRlIHNvdXJjZTogc3RyaW5nID0gJ1JlbGF0ZWQgUHJvZHVjdHMnO1xyXG5cclxuICAgICAgICBwcml2YXRlIHByb2R1Y3RzOiBhbnlbXTtcclxuXHJcbiAgICAgICAgcHVibGljIGluaXRpYWxpemUoKSB7XHJcblxyXG4gICAgICAgICAgICBzdXBlci5pbml0aWFsaXplKCk7XHJcbiAgICAgICAgICAgIHRoaXMuZ2V0UmVsYXRlZFByb2R1Y3RzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGdldFJlbGF0ZWRQcm9kdWN0cygpIHtcclxuICAgICAgICAgICAgbGV0IHZtID0gdGhpcy5jb250ZXh0LnZpZXdNb2RlbDtcclxuICAgICAgICAgICAgbGV0IGlkZW50aWZpZXJzID0gdm0uUHJvZHVjdElkZW50aWZpZXJzO1xyXG4gICAgICAgICAgICB0aGlzLnByb2R1Y3RTZXJ2aWNlLmdldFJlbGF0ZWRQcm9kdWN0cyhpZGVudGlmaWVycylcclxuICAgICAgICAgICAgICAgIC50aGVuKGRhdGEgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucHJvZHVjdHMgPSBkYXRhLlByb2R1Y3RzO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vTmVlZCB0byBtYXAgcGFyZW50IGl0ZW1zIHRvIGNoaWxkIGl0ZW0gc2luY2UgaGFuZGxlYmFyIGRvZXNudCBzZWVtIHRvIHN1cHBvcnRcclxuICAgICAgICAgICAgICAgICAgICAvL3BhcnRpYWwgcGFyYW1ldGVycyBvciBwYXRoIHByb3Blcmx5IHdoaWxlIGl0IHN1cHBvc2UgdG8uIE1heWJlIGFuIHVwZGF0ZSBvZiBoYW5kbGViYXIgY291bGQgc29sdmUgdGhlIGlzc3VlXHJcbiAgICAgICAgICAgICAgICAgICAgLy8oMy4wMSByaWdodCBub3cpLlxyXG4gICAgICAgICAgICAgICAgICAgIHZtLlByb2R1Y3RzID0gXy5lYWNoKGRhdGEuUHJvZHVjdHMsIChsaW5lSXRlbTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmVJdGVtLkRpc3BsYXlBZGRUb0NhcnQgPSB2bS5EaXNwbGF5QWRkVG9DYXJ0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5lSXRlbS5EaXNwbGF5UHJpY2VzID0gdm0uRGlzcGxheVByaWNlcztcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIoJ1JlbGF0ZWRQcm9kdWN0cycsIHZtKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goJ2luaUNhcm91c2VsJywgdm0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB2bTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAudGhlbih2bSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZtICYmIHZtLlByb2R1Y3RzICYmIHZtLlByb2R1Y3RzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKCdyZWxhdGVkUHJvZHVjdHNMb2FkZWQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgTGlzdE5hbWU6IHRoaXMuZ2V0UGFnZVNvdXJjZSgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBQcm9kdWN0czogdm0uUHJvZHVjdHNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKHZtOiBhbnkpID0+IHRoaXMub25HZXRSZWxhdGVkUHJvZHVjdHNTdWNjZXNzKHZtKSxcclxuICAgICAgICAgICAgICAgICAgICAocmVhc29uOiBhbnkpID0+IHRoaXMub25HZXRSZWxhdGVkUHJvZHVjdHNGYWlsZWQocmVhc29uKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb25HZXRSZWxhdGVkUHJvZHVjdHNTdWNjZXNzKHZtOiBhbnkpOiB2b2lkIHtcclxuICAgICAgICAgICAgLy9Ib29rIGZvciBvdGhlciBwcm9qZWN0c1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uR2V0UmVsYXRlZFByb2R1Y3RzRmFpbGVkKHJlYXNvbjogYW55KTogdm9pZCB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCBsb2FkaW5nIHRoZSByZWxhdGVkIHByb2R1Y3RzJywgcmVhc29uKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBnZXRQYWdlU291cmNlKCk6IHN0cmluZyB7XHJcbiAgICAgICAgICAgIHJldHVybiAnUmVsYXRlZCBQcm9kdWN0cyc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgZ2V0TGlzdE5hbWVGb3JBbmFseXRpY3MoKTogc3RyaW5nIHtcclxuICAgICAgICAgICAgcmV0dXJuICdSZWxhdGVkIFByb2R1Y3RzJztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvbkxvYWRpbmdGYWlsZWQocmVhc29uOiBhbnkpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIGxvYWRpbmcgdGhlIFJlbGF0ZWQgUHJvZHVjdCBWaWV3Jyk7XHJcblxyXG4gICAgICAgICAgICBFcnJvckhhbmRsZXIuaW5zdGFuY2UoKS5vdXRwdXRFcnJvckZyb21Db2RlKCdSZWxhdGVkUHJvZHVjdExvYWRGYWlsZWQnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICBwdWJsaWMgYWRkVG9DYXJ0KGFjdGlvbkNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCkge1xyXG4gICAgICAgICAgICB2YXIgcHJvZHVjdENvbnRleHQ6IEpRdWVyeSA9ICQoYWN0aW9uQ29udGV4dC5lbGVtZW50Q29udGV4dCkuY2xvc2VzdCgnW2RhdGEtcHJvZHVjdC1pZF0nKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBoYXNWYXJpYW50czogYm9vbGVhbiA9IHByb2R1Y3RDb250ZXh0LmRhdGEoJ2hhc1ZhcmlhbnRzJyk7XHJcbiAgICAgICAgICAgIHZhciBwcm9kdWN0SWQ6IHN0cmluZyA9IHByb2R1Y3RDb250ZXh0LmF0dHIoJ2RhdGEtcHJvZHVjdC1pZCcpO1xyXG4gICAgICAgICAgICB2YXIgdmFyaWFudElkOiBzdHJpbmcgPSBwcm9kdWN0Q29udGV4dC5hdHRyKCdkYXRhLXByb2R1Y3QtdmFyaWFudC1pZCcpO1xyXG4gICAgICAgICAgICB2YXIgcHJpY2U6IHN0cmluZyA9IHByb2R1Y3RDb250ZXh0LmRhdGEoJ3ByaWNlJyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgYnVzeSA9IHRoaXMuYXN5bmNCdXN5KHsgZWxlbWVudENvbnRleHQ6IGFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHQsIGNvbnRhaW5lckNvbnRleHQ6IHByb2R1Y3RDb250ZXh0IH0pO1xyXG4gICAgICAgICAgICB2YXIgcHJvbWlzZTogUS5Qcm9taXNlPGFueT47XHJcblxyXG4gICAgICAgICAgICBpZiAoaGFzVmFyaWFudHMpIHtcclxuICAgICAgICAgICAgICAgIHByb21pc2UgPSB0aGlzLmFkZFZhcmlhbnRQcm9kdWN0VG9DYXJ0KHByb2R1Y3RJZCwgdmFyaWFudElkLCBwcmljZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBwcm9taXNlID0gdGhpcy5hZGROb25WYXJpYW50UHJvZHVjdFRvQ2FydChwcm9kdWN0SWQsIHByaWNlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcHJvbWlzZS5maW4oKCkgPT4gYnVzeS5kb25lKCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogT2NjdXJzIHdoZW4gYWRkaW5nIGEgcHJvZHVjdCB0byB0aGUgY2FydCB0aGF0IGhhcHBlbnMgdG8gaGF2ZSB2YXJpYW50cy5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwcm90ZWN0ZWQgYWRkVmFyaWFudFByb2R1Y3RUb0NhcnQocHJvZHVjdElkOiBzdHJpbmcsIHZhcmlhbnRJZDogc3RyaW5nLCBwcmljZTogc3RyaW5nKTogUS5Qcm9taXNlPGFueT4ge1xyXG4gICAgICAgICAgICB2YXIgcHJvbWlzZSA9IHRoaXMucHJvZHVjdFNlcnZpY2UubG9hZFF1aWNrQnV5UHJvZHVjdChwcm9kdWN0SWQsIHZhcmlhbnRJZCwgdGhpcy5jb25jZXJuLCB0aGlzLnNvdXJjZSk7XHJcbiAgICAgICAgICAgIHByb21pc2UuZmFpbCgocmVhc29uOiBhbnkpID0+IHRoaXMub25Mb2FkaW5nRmFpbGVkKHJlYXNvbikpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBPY2N1cnMgd2hlbiBhZGRpbmcgYSBwcm9kdWN0IHRvIHRoZSBjYXJ0IHRoYXQgaGFzIG5vIHZhcmlhbnQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJvdGVjdGVkIGFkZE5vblZhcmlhbnRQcm9kdWN0VG9DYXJ0KHByb2R1Y3RJZDogc3RyaW5nLCBwcmljZTogc3RyaW5nKTogUS5Qcm9taXNlPGFueT4ge1xyXG4gICAgICAgICAgICB2YXIgdm0gPSB0aGlzLmdldFByb2R1Y3RWaWV3TW9kZWwocHJvZHVjdElkKTtcclxuICAgICAgICAgICAgaWYgKHZtKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcXVhbnRpdHkgPSB0aGlzLmdldEN1cnJlbnRRdWFudGl0eSgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGE6IGFueSA9IHRoaXMuZ2V0UHJvZHVjdERhdGFGb3JBbmFseXRpY3Modm0pO1xyXG4gICAgICAgICAgICAgICAgZGF0YS5RdWFudGl0eSA9IHF1YW50aXR5LlZhbHVlID8gcXVhbnRpdHkuVmFsdWUgOiAxO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaCgnbGluZUl0ZW1BZGRpbmcnLFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGRhdGFcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgcHJvbWlzZSA9IHRoaXMuY2FydFNlcnZpY2UuYWRkTGluZUl0ZW0ocHJvZHVjdElkLCBwcmljZSlcclxuICAgICAgICAgICAgICAgIC50aGVuKCh2bTogYW55KSA9PiB0aGlzLm9uQWRkTGluZUl0ZW1TdWNjZXNzKHZtKSxcclxuICAgICAgICAgICAgICAgICAgICAocmVhc29uOiBhbnkpID0+IHRoaXMub25BZGRMaW5lSXRlbUZhaWxlZChyZWFzb24pKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGdldFByb2R1Y3RWaWV3TW9kZWwocHJvZHVjdElkOiBzdHJpbmcpOiBhbnkge1xyXG4gICAgICAgICAgICB2YXIgcHJvZHVjdFZNID0gXy5maW5kKHRoaXMucHJvZHVjdHMsIHAgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHAuUHJvZHVjdElkID09PSBwcm9kdWN0SWQ7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFwcm9kdWN0Vk0pIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgQ291bGQgbm90IGZpbmQgdGhlIHByb2R1Y3Qgd2l0aCBJRCBvZiAke3Byb2R1Y3RJZH0gd2l0aGluIHJlbGF0ZWQgcHJvZHVjdHMuXHJcbiAgICAgICAgICAgICAgICAgICAgVGhpcyB3aWxsIGNhdXNlIHRoZSBwcm9kdWN0IHRvIG5vdCBiZSByZXBvcnRlZCB0byBBbmFseXRpY3MuYCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBwcm9kdWN0Vk07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgZ2V0Q3VycmVudFF1YW50aXR5KCk6IGFueSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBNaW46IDEsXHJcbiAgICAgICAgICAgICAgICBNYXg6IDEsXHJcbiAgICAgICAgICAgICAgICBWYWx1ZTogMVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHJlbGF0ZWRQcm9kdWN0c0NsaWNrKGFjdGlvbkNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCkge1xyXG5cclxuICAgICAgICAgICAgdmFyIGluZGV4OiBudW1iZXIgPSA8YW55PmFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHQuZGF0YSgnaW5kZXgnKTtcclxuICAgICAgICAgICAgdmFyIHByb2R1Y3RJZDogc3RyaW5nID0gYWN0aW9uQ29udGV4dC5lbGVtZW50Q29udGV4dC5kYXRhKCdwcm9kdWN0aWQnKS50b1N0cmluZygpO1xyXG4gICAgICAgICAgICB2YXIgcHJvZHVjdDogYW55ID0gXy5maW5kKHRoaXMucHJvZHVjdHMsIHtQcm9kdWN0SWQgOiBwcm9kdWN0SWR9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaCgncHJvZHVjdENsaWNrJywgeyBkYXRhIDoge1xyXG4gICAgICAgICAgICAgICAgUHJvZHVjdCA6IHByb2R1Y3QsXHJcbiAgICAgICAgICAgICAgICBMaXN0TmFtZSA6ICdSZWxhdGVkIFByb2R1Y3RzJyxcclxuICAgICAgICAgICAgICAgIEluZGV4IDogaW5kZXhcclxuICAgICAgICAgICAgfX0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIEdlb0xvY2F0aW9uU2VydmljZSB7XHJcbiAgICAgICAgcHJpdmF0ZSBfYnJvd3Nlckdlb2xvY2F0aW9uOiBHZW9sb2NhdGlvbiA9IG5hdmlnYXRvci5nZW9sb2NhdGlvbjtcclxuICAgICAgICBwcml2YXRlIF9nZW9jb2RlcjogZ29vZ2xlLm1hcHMuR2VvY29kZXI7XHJcbiAgICAgICAgcHJpdmF0ZSBfY3VycmVuY3RMb2NhdGlvbjogZ29vZ2xlLm1hcHMuTGF0TG5nO1xyXG5cclxuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICAgICAgdGhpcy5fZ2VvY29kZXIgPSBuZXcgZ29vZ2xlLm1hcHMuR2VvY29kZXIoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBnZW9sb2NhdGUoKTogUS5Qcm9taXNlPGFueT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fYnJvd3Nlckdlb2xvY2F0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDdXJyZW50TG9jYXRpb24oKVxyXG4gICAgICAgICAgICAgICAgICAgIC5jYXRjaCgocmVhc29uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlYXNvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9jdXJyZW5jdExvY2F0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBnZXRDdXJyZW50TG9jYXRpb24oKTogUS5Qcm9taXNlPGdvb2dsZS5tYXBzLkxhdExuZz4ge1xyXG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSBRLmRlZmVyPGdvb2dsZS5tYXBzLkxhdExuZz4oKTtcclxuICAgICAgICAgICAgdGhpcy5fYnJvd3Nlckdlb2xvY2F0aW9uLmdldEN1cnJlbnRQb3NpdGlvbigocG9zKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9jdXJyZW5jdExvY2F0aW9uID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyhwb3MuY29vcmRzLmxhdGl0dWRlLCBwb3MuY29vcmRzLmxvbmdpdHVkZSk7XHJcbiAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHRoaXMuX2N1cnJlbmN0TG9jYXRpb24pO1xyXG4gICAgICAgICAgICB9LCAoKSA9PiB7IGRlZmVycmVkLnJlamVjdCgncHJvYmxlbXMgdG8gZ2V0IGN1cnJlbnQgbG9jYXRpb24nKTsgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGdldEFkZHRyZXNzQnlMb2NhdGlvbihsb2NhdGlvbjogZ29vZ2xlLm1hcHMuTGF0TG5nKTogUS5Qcm9taXNlPHN0cmluZz4ge1xyXG4gICAgICAgICAgICB2YXIgZGVmZXJyZWQgPSBRLmRlZmVyPHN0cmluZz4oKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2dlb2NvZGVyLmdlb2NvZGUoeyBsb2NhdGlvbjogbG9jYXRpb24gfSxcclxuICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChyZXN1bHRzLCBzdGF0dXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdHVzID09PSBnb29nbGUubWFwcy5HZW9jb2RlclN0YXR1cy5PSykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHJlc3VsdHNbMF0uZm9ybWF0dGVkX2FkZHJlc3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoJycpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGdldExvY2F0aW9uQnlBZGRyZXNzKGFkZHJlc3M6IHN0cmluZyk6IFEuUHJvbWlzZTxnb29nbGUubWFwcy5MYXRMbmc+IHtcclxuICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gUS5kZWZlcjxnb29nbGUubWFwcy5MYXRMbmc+KCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9nZW9jb2Rlci5nZW9jb2RlKHsgYWRkcmVzczogYWRkcmVzcyB9LFxyXG4gICAgICAgICAgICAgICAgKHJlc3VsdHMsIHN0YXR1cykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzdGF0dXMgPT09IGdvb2dsZS5tYXBzLkdlb2NvZGVyU3RhdHVzLk9LKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBsb2NhdGlvbiA9IHJlc3VsdHNbMF0uZ2VvbWV0cnkubG9jYXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUobG9jYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUobnVsbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdMb2NhdGlvbiBub3QgcmVzb2x2ZWQgYnkgR29vZ2xlICcgKyBhZGRyZXNzKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vLyBCeSBkZWZhdWx0IHJlbmRlciB3aXRoIGRlZmF1bHQgdmFsdWUgZm9yIFZpZXdNb2RlbC5Hb29nbGVEaXJlY3Rpb25zTGluayAoZGlyZWN0aW9uIHdpdGggRW1wdHkgU3RhcnQgUG9pbnQpLCBcclxuICAgICAgICAvLy8gYW5kIHdoZW4gVXNlciBBY2NlcHQgaGlzIEN1cnJlbnQgTG9jYXRpb24sIGp1c3QgaW4gYXN5bmMgdGFzayB1cGRhdGUgSFJFRiBhdHRyaWJ1dGVzIGFuZCBhdHRhY2ggY3VycmVudCBsb2NhdGlvbiBjb29yZGluYXRlcy5cclxuICAgICAgICAvLy8gV2UgZG8gbm90IHVwZGF0ZSB0aGUgVmlld01vZGVsIGJlZm9yZSByZW5kZXJpbmcsIGFzIHdlIG5lZWQgdG8gd2FpdCBmb3IgVXNlciBJbnB1dFxyXG4gICAgICAgIHB1YmxpYyB1cGRhdGVEaXJlY3Rpb25MaW5rc1dpdGhMYXRMbmdTb3VyY2VBZGRyZXNzKGNvbnRhaW5lcjogSlF1ZXJ5LCBzb3VyY2VMb2NhdGlvbjogZ29vZ2xlLm1hcHMuTGF0TG5nKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXNvdXJjZUxvY2F0aW9uKSB7IHJldHVybjsgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGN0YURpcnMgPSBjb250YWluZXIuZmluZCgnLmN0YUdvb2dsZURpcicpO1xyXG5cclxuICAgICAgICAgICAgY3RhRGlycy5lYWNoKChpbmQsIGN0YURpcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgdmFyIGhyZWYgPSAkKGN0YURpcikuYXR0cignaHJlZicpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGhyZWYuaW5kZXhPZignc2FkZHInKSA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKGN0YURpcikuYXR0cignaHJlZicsIHRoaXMuZ2V0RGlyZWN0aW9uTGF0TG5nU291cmNlQWRkcmVzcyhocmVmLCBzb3VyY2VMb2NhdGlvbikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBnZXREaXJlY3Rpb25MYXRMbmdTb3VyY2VBZGRyZXNzKGJhc2VVcmw6IHN0cmluZywgc291cmNlTG9jYXRpb246IGdvb2dsZS5tYXBzLkxhdExuZykge1xyXG4gICAgICAgICAgICByZXR1cm4gYCR7YmFzZVVybH0mc2FkZHI9JHtzb3VyY2VMb2NhdGlvbi5sYXQoKX0sJHtzb3VyY2VMb2NhdGlvbi5sbmcoKX1gO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvTXZjL0NvbXBvc2VyQ2xpZW50LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9Db250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9JQ29udHJvbGxlckFjdGlvbkNvbnRleHQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vU3RvcmVMb2NhdG9yL1NvdXJjZS9UeXBlU2NyaXB0L1NlcnZpY2VzL0dlb0xvY2F0aW9uU2VydmljZS50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBTdG9yZXNEaXJlY3RvcnlDb250cm9sbGVyIGV4dGVuZHMgQ29udHJvbGxlciB7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBfZ2VvU2VydmljZTogR2VvTG9jYXRpb25TZXJ2aWNlID0gbmV3IEdlb0xvY2F0aW9uU2VydmljZSgpO1xyXG4gICAgICAgIHByaXZhdGUgX3NlYXJjaEJveDogZ29vZ2xlLm1hcHMucGxhY2VzLlNlYXJjaEJveDtcclxuXHJcbiAgICAgICAgcHVibGljIGluaXRpYWxpemUoKSB7XHJcbiAgICAgICAgICAgIHN1cGVyLmluaXRpYWxpemUoKTtcclxuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplU2VhcmNoQm94KCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNldEdvb2dsZURpcmVjdGlvbkxpbmtzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGluaXRpYWxpemVTZWFyY2hCb3goKSB7XHJcbiAgICAgICAgICAgIHZhciBpbnB1dCA9IDxIVE1MSW5wdXRFbGVtZW50PnRoaXMuY29udGV4dC5jb250YWluZXIuZmluZCgnI3N0b3JlRGlyZWN0b3J5U2VhcmNoSW5wdXQnKVswXTtcclxuICAgICAgICAgICAgdGhpcy5fc2VhcmNoQm94ID0gbmV3IGdvb2dsZS5tYXBzLnBsYWNlcy5TZWFyY2hCb3goaW5wdXQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQWN0aW9uIG9uIENsaWNrIG9uIGxvY2F0b3IgaWNvbiBpbiBzZWFyY2ggYm94XHJcbiAgICAgICAgcHVibGljIGN1cnJlbnRMb2NhdGlvbkFjdGlvbihhY3Rpb25Db250ZXh0OiBJQ29udHJvbGxlckFjdGlvbkNvbnRleHQpIHtcclxuICAgICAgICAgICAgYWN0aW9uQ29udGV4dC5ldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRleHQuY29udGFpbmVyLmZpbmQoJ2Zvcm0nKS5zdWJtaXQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBzZXRHb29nbGVEaXJlY3Rpb25MaW5rcygpIHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZW9TZXJ2aWNlLmdlb2xvY2F0ZSgpLnRoZW4obG9jYXRpb24gPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZ2VvU2VydmljZS51cGRhdGVEaXJlY3Rpb25MaW5rc1dpdGhMYXRMbmdTb3VyY2VBZGRyZXNzKHRoaXMuY29udGV4dC5jb250YWluZXIsIGxvY2F0aW9uKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBHZXRTdG9yZXNJbnZlbnRvcnlQYXJhbSB7XHJcbiAgICAgICAgU2t1OiBzdHJpbmc7XHJcbiAgICAgICAgU2VhcmNoUG9pbnQ6IGdvb2dsZS5tYXBzLkxhdExuZztcclxuICAgICAgICBQYWdlOiBudW1iZXI7XHJcbiAgICAgICAgUGFnZXNpemU6IG51bWJlcjtcclxuICAgIH1cclxufSIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9HZXRTdG9yZXNJbnZlbnRvcnlQYXJhbS50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJU3RvcmVJbnZlbnRvcnlTZXJ2aWNlIHtcclxuICAgICAgICBnZXRTdG9yZXNJbnZlbnRvcnkocGFyYW06IEdldFN0b3Jlc0ludmVudG9yeVBhcmFtKTogUS5Qcm9taXNlPGFueT47XHJcblxyXG4gICAgICAgIGdldERlZmF1bHRBZGRyZXNzKCk6IFEuUHJvbWlzZTxhbnk+O1xyXG5cclxuICAgICAgICBnZXRTa3VTZWxlY3Rpb24ocHJvZHVjdElkOiBzdHJpbmcpOiBRLlByb21pc2U8YW55PjtcclxuICAgIH1cclxufSIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvTXZjL0lDb250cm9sbGVyQ29udGV4dC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9NdmMvQ29tcG9zZXJDbGllbnQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvRXZlbnRzL0V2ZW50SHViLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vSVN0b3JlSW52ZW50b3J5U2VydmljZS50cycgLz5cclxuXHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgU3RvcmVJbnZlbnRvcnlTZXJ2aWNlIGltcGxlbWVudHMgSVN0b3JlSW52ZW50b3J5U2VydmljZSB7XHJcblxyXG4gICAgICAgIHB1YmxpYyBnZXRTdG9yZXNJbnZlbnRvcnkocGFyYW06IEdldFN0b3Jlc0ludmVudG9yeVBhcmFtKTogUS5Qcm9taXNlPGFueT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gQ29tcG9zZXJDbGllbnQucG9zdCgnL2FwaS9zdG9yZWludmVudG9yeS9zdG9yZXNpbnZlbnRvcnknLCBwYXJhbSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZ2V0RGVmYXVsdEFkZHJlc3MoKTogUS5Qcm9taXNlPGFueT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gQ29tcG9zZXJDbGllbnQuZ2V0KCcvYXBpL2N1c3RvbWVyL2dldGRlZmF1bHRhZGRyZXNzJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZ2V0U2t1U2VsZWN0aW9uKHByb2R1Y3RJZDogc3RyaW5nKTogUS5Qcm9taXNlPGFueT4ge1xyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIFByb2R1Y3RJZDogcHJvZHVjdElkXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIHJldHVybiBDb21wb3NlckNsaWVudC5wb3N0KCcvYXBpL3Byb2R1Y3QvdmFyaWFudFNlbGVjdGlvbicsIGRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0NvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0lDb250cm9sbGVyQWN0aW9uQ29udGV4dC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL1NlcnZpY2VzL1N0b3JlSW52ZW50b3J5U2VydmljZS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9TdG9yZUxvY2F0b3IvU291cmNlL1R5cGVTY3JpcHQvU2VydmljZXMvR2VvTG9jYXRpb25TZXJ2aWNlLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L0NhY2hlL0NhY2hlUHJvdmlkZXIudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgU3RvcmVJbnZlbnRvcnlDb250cm9sbGVyIGV4dGVuZHMgQ29udHJvbGxlciB7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBfY29uY2Vybjogc3RyaW5nID0gJ1N0b3JlSW52ZW50b3J5Xyc7XHJcbiAgICAgICAgcHJvdGVjdGVkIF9zZXJ2aWNlOiBJU3RvcmVJbnZlbnRvcnlTZXJ2aWNlID0gbmV3IFN0b3JlSW52ZW50b3J5U2VydmljZSgpO1xyXG4gICAgICAgIHByb3RlY3RlZCBfZ2VvU2VydmljZTogR2VvTG9jYXRpb25TZXJ2aWNlID0gbmV3IEdlb0xvY2F0aW9uU2VydmljZSgpO1xyXG4gICAgICAgIHByb3RlY3RlZCBfc2VhcmNoUG9pbnRBZGRyZXNzQ2FjaGVLZXk6IHN0cmluZyA9ICdTdG9yZUxvY2F0b3JTZWFyY2hBZGRyZXNzJztcclxuICAgICAgICBwcm90ZWN0ZWQgY2FjaGUgPSBDYWNoZVByb3ZpZGVyLmluc3RhbmNlKCkuZGVmYXVsdENhY2hlO1xyXG4gICAgICAgIHByaXZhdGUgX3NlYXJjaEJveDogZ29vZ2xlLm1hcHMucGxhY2VzLlNlYXJjaEJveDtcclxuICAgICAgICBwcml2YXRlIF9zZWFyY2hCb3hKUTogSlF1ZXJ5O1xyXG4gICAgICAgIHByaXZhdGUgX3NlYXJjaFBvaW50OiBnb29nbGUubWFwcy5MYXRMbmc7XHJcbiAgICAgICAgcHJpdmF0ZSBfc2VsZWN0ZWRTa3U6IHN0cmluZztcclxuICAgICAgICBwcml2YXRlIF9pc0F1dGhlbnRpY2F0ZWQ6IGJvb2xlYW47XHJcbiAgICAgICAgcHJpdmF0ZSBfcGFnZVNpemU6IG51bWJlcjtcclxuICAgICAgICBwcml2YXRlIF9wcm9kdWN0SWQ6IGFueTtcclxuICAgICAgICBwcml2YXRlIF9nZXRDdXJyZW50TG9jYXRpb246IFEuRGVmZXJyZWQ8Z29vZ2xlLm1hcHMuTGF0TG5nPiA9IFEuZGVmZXI8Z29vZ2xlLm1hcHMuTGF0TG5nPigpO1xyXG5cclxuICAgICAgICBwdWJsaWMgZ2V0Q3VycmVudExvY2F0aW9uKCk6IFEuUHJvbWlzZTxnb29nbGUubWFwcy5MYXRMbmc+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2dldEN1cnJlbnRMb2NhdGlvbi5wcm9taXNlO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKCkge1xyXG4gICAgICAgICAgICB2YXIgZ2V0RGVmYXVsdHNUYXNrczogUS5Qcm9taXNlPGFueT5bXSA9IFtdO1xyXG4gICAgICAgICAgICB2YXIgZ2V0RGVmYXVsdEFkZHJlc3NUYXNrOiBRLlByb21pc2U8YW55PjtcclxuXHJcbiAgICAgICAgICAgIHN1cGVyLmluaXRpYWxpemUoKTtcclxuICAgICAgICAgICAgdGhpcy5yZWdpc3RlclN1YnNjcmlwdGlvbnMoKTtcclxuICAgICAgICAgICAgdGhpcy5pbml0U2VhcmNoQm94KCk7XHJcbiAgICAgICAgICAgIHRoaXMuZ2V0RGF0YUZyb21Db250ZXh0Vmlld01vZGVsKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuX3NlbGVjdGVkU2t1ICYmIHRoaXMuX3Byb2R1Y3RJZCkge1xyXG4gICAgICAgICAgICAgICAgZ2V0RGVmYXVsdHNUYXNrcy5wdXNoKHRoaXMuX3NlcnZpY2UuZ2V0U2t1U2VsZWN0aW9uKHRoaXMuX3Byb2R1Y3RJZCkudGhlbihyZXN1bHQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3NlbGVjdGVkU2t1ID0gcmVzdWx0LlNrdTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZ2V0RGVmYXVsdHNUYXNrcy5wdXNoKHRoaXMuZ2V0RGVmYXVsdEFkZHJlc3MoKSk7XHJcblxyXG4gICAgICAgICAgICBRLmFsbChnZXREZWZhdWx0c1Rhc2tzKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZ2V0U3RvcmVzSW52ZW50b3J5KCk7XHJcbiAgICAgICAgICAgIH0pLmZhaWwocmVhc29uID0+IGNvbnNvbGUubG9nKHRoaXMuX2NvbmNlcm4gKyByZWFzb24pKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2dlb1NlcnZpY2UuZ2VvbG9jYXRlKCkudGhlbihsb2NhdGlvbiA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9nZXRDdXJyZW50TG9jYXRpb24ucmVzb2x2ZShsb2NhdGlvbik7XHJcbiAgICAgICAgICAgIH0sIHJlYXNvbiA9PiB0aGlzLl9nZXRDdXJyZW50TG9jYXRpb24ucmVzb2x2ZShudWxsKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHJlZ2lzdGVyU3Vic2NyaXB0aW9ucygpIHtcclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5zdWJzY3JpYmUoJ3Byb2R1Y3REZXRhaWxTZWxlY3RlZFZhcmlhbnRJZENoYW5nZWQnLCBlID0+IHRoaXMub25TZWxlY3RlZFZhcmlhbnRJZENoYW5nZWQoZSkpO1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnN1YnNjcmliZSgnaW52ZW50b3J5U2VhcmNoUG9pbnRDaGFuZ2VkJywgZSA9PiB0aGlzLnNlYXJjaFBvaW50Q2hhbmdlZChlKSk7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGV4dC53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsICgpID0+IHRoaXMub25IYXNoQ2hhbmdlZCgpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgZ2V0RGF0YUZyb21Db250ZXh0Vmlld01vZGVsKCkge1xyXG4gICAgICAgICAgICB0aGlzLl9zZWxlY3RlZFNrdSA9IHRoaXMuY29udGV4dC52aWV3TW9kZWwuc2VsZWN0ZWRTa3U7XHJcbiAgICAgICAgICAgIHRoaXMuX2lzQXV0aGVudGljYXRlZCA9IHRoaXMuY29udGV4dC52aWV3TW9kZWwuaXNBdXRoZW50aWNhdGVkO1xyXG4gICAgICAgICAgICB0aGlzLl9wYWdlU2l6ZSA9IHRoaXMuY29udGV4dC52aWV3TW9kZWwucGFnZVNpemU7XHJcbiAgICAgICAgICAgIHRoaXMuX3Byb2R1Y3RJZCA9IHRoaXMuY29udGV4dC52aWV3TW9kZWwucHJvZHVjdElkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGluaXRTZWFyY2hCb3goKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3NlYXJjaEJveEpRID0gdGhpcy5jb250ZXh0LmNvbnRhaW5lci5maW5kKCdpbnB1dFtuYW1lPVwic3RvcmVJbnZlbnRvcnlTZWFyY2hJbnB1dFwiXScpO1xyXG4gICAgICAgICAgICB0aGlzLl9zZWFyY2hCb3ggPSBuZXcgZ29vZ2xlLm1hcHMucGxhY2VzLlNlYXJjaEJveCg8SFRNTElucHV0RWxlbWVudD50aGlzLl9zZWFyY2hCb3hKUVswXSk7XHJcbiAgICAgICAgICAgIHRoaXMuX3NlYXJjaEJveC5hZGRMaXN0ZW5lcigncGxhY2VzX2NoYW5nZWQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGxhY2VzID0gdGhpcy5fc2VhcmNoQm94LmdldFBsYWNlcygpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBsYWNlcyAmJiBwbGFjZXMubGVuZ3RoICYmIHBsYWNlc1swXS5nZW9tZXRyeSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaCgnaW52ZW50b3J5U2VhcmNoUG9pbnRDaGFuZ2VkJywgeyBkYXRhOiBwbGFjZXNbMF0uZ2VvbWV0cnkubG9jYXRpb24gfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHNlYXJjaFBvaW50Q2hhbmdlZChlOiBJRXZlbnRJbmZvcm1hdGlvbikge1xyXG4gICAgICAgICAgICB0aGlzLl9zZWFyY2hQb2ludCA9IGUuZGF0YTtcclxuICAgICAgICAgICAgdGhpcy5jYWNoZS5zZXQodGhpcy5fc2VhcmNoUG9pbnRBZGRyZXNzQ2FjaGVLZXksIHRoaXMuX3NlYXJjaEJveEpRLnZhbCgpKTtcclxuICAgICAgICAgICAgdGhpcy5nZXRTdG9yZXNJbnZlbnRvcnkoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvblNlbGVjdGVkVmFyaWFudElkQ2hhbmdlZChlOiBJRXZlbnRJbmZvcm1hdGlvbikge1xyXG4gICAgICAgICAgICB0aGlzLl9zZWxlY3RlZFNrdSA9IGUuZGF0YS5zZWxlY3RlZFNrdTtcclxuICAgICAgICAgICAgdGhpcy5nZXRTdG9yZXNJbnZlbnRvcnkoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvbkhhc2hDaGFuZ2VkKCkge1xyXG4gICAgICAgICAgICBpZiAobG9jYXRpb24uaGFzaCA9PT0gJyNzdG9yZWludmVudG9yeScgJiYgIXRoaXMuX3NlYXJjaFBvaW50KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdldEN1cnJlbnRMb2NhdGlvbigpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oY3VycmVudExvY2F0aW9uID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRMb2NhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2VhcmNoUG9pbnQgPSBjdXJyZW50TG9jYXRpb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldFN0b3Jlc0ludmVudG9yeSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fZ2VvU2VydmljZS5nZXRBZGR0cmVzc0J5TG9jYXRpb24oY3VycmVudExvY2F0aW9uKS50aGVuKHJlc3VsdCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jYWNoZS5zZXQodGhpcy5fc2VhcmNoUG9pbnRBZGRyZXNzQ2FjaGVLZXksIHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2VhcmNoQm94SlEudmFsKHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgZ2V0U3RvcmVzSW52ZW50b3J5KCk6IFEuUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICAgICAgdmFyIGRlYm91bmNlSGFuZGxlO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuX3NlbGVjdGVkU2t1KSB7XHJcbiAgICAgICAgICAgICAgICBkZWJvdW5jZUhhbmRsZSA9IF8uZGVib3VuY2UoKCkgPT4gdGhpcy5yZW5kZXIoJ1N0b3JlSW52ZW50b3J5TGlzdCcsIHsgSXNMb2FkaW5nOiB0cnVlIH0pLCAzMDApO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9zZXJ2aWNlLmdldFN0b3Jlc0ludmVudG9yeSh0aGlzLmdldFN0b3Jlc0ludmVudG9yeVBhcmFtKCkpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzdWx0ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVib3VuY2VIYW5kbGUuY2FuY2VsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKCdTdG9yZUludmVudG9yeUxpc3QnLCByZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEdvb2dsZURpcmVjdGlvbkxpbmtzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAuZmFpbChyZWFzb24gPT4gY29uc29sZS5sb2cocmVhc29uKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBuZXh0UGFnZShhY3Rpb25Db250ZXh0OiBJQ29udHJvbGxlckFjdGlvbkNvbnRleHQpIHtcclxuXHJcbiAgICAgICAgICAgIGFjdGlvbkNvbnRleHQuZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdmFyIHBhZ2U6IG51bWJlciA9IDxhbnk+YWN0aW9uQ29udGV4dC5lbGVtZW50Q29udGV4dC5kYXRhKCdwYWdlJyk7XHJcbiAgICAgICAgICAgIHZhciBidXN5ID0gdGhpcy5hc3luY0J1c3koeyBlbGVtZW50Q29udGV4dDogYWN0aW9uQ29udGV4dC5lbGVtZW50Q29udGV4dCB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3NlcnZpY2UuZ2V0U3RvcmVzSW52ZW50b3J5KHRoaXMuZ2V0U3RvcmVzSW52ZW50b3J5UGFyYW0ocGFnZSkpXHJcbiAgICAgICAgICAgICAgICAudGhlbihyZXN1bHQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXQgPSBhY3Rpb25Db250ZXh0LmVsZW1lbnRDb250ZXh0WzBdLnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRhcmdldEh0bWwgPSB0aGlzLmdldFJlbmRlcmVkVGVtcGxhdGVDb250ZW50cygnU3RvcmVJbnZlbnRvcnlMaXN0JywgcmVzdWx0KTtcclxuICAgICAgICAgICAgICAgICAgICBidXN5LmRvbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAkKHRhcmdldCkucmVwbGFjZVdpdGgodGFyZ2V0SHRtbCkuc3RvcCgpLmZhZGVJbigpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEdvb2dsZURpcmVjdGlvbkxpbmtzKCk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmZhaWwocmVhc29uID0+IGNvbnNvbGUubG9nKHJlYXNvbikpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHNldEdvb2dsZURpcmVjdGlvbkxpbmtzKCk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEN1cnJlbnRMb2NhdGlvbigpLnRoZW4obG9jYXRpb24gPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuX2dlb1NlcnZpY2UudXBkYXRlRGlyZWN0aW9uTGlua3NXaXRoTGF0TG5nU291cmNlQWRkcmVzcyh0aGlzLmNvbnRleHQuY29udGFpbmVyLCBsb2NhdGlvbik7XHJcblxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBnZXRTdG9yZXNJbnZlbnRvcnlQYXJhbShwYWdlOiBudW1iZXIgPSAxKSB7XHJcbiAgICAgICAgICAgIHZhciBwYXJhbSA9IG5ldyBHZXRTdG9yZXNJbnZlbnRvcnlQYXJhbSgpO1xyXG4gICAgICAgICAgICBwYXJhbS5Ta3UgPSB0aGlzLl9zZWxlY3RlZFNrdTtcclxuICAgICAgICAgICAgcGFyYW0uU2VhcmNoUG9pbnQgPSB0aGlzLl9zZWFyY2hQb2ludDtcclxuICAgICAgICAgICAgcGFyYW0uUGFnZSA9IHBhZ2U7XHJcbiAgICAgICAgICAgIHBhcmFtLlBhZ2VzaXplID0gdGhpcy5fcGFnZVNpemU7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcGFyYW07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgZ2V0RGVmYXVsdEFkZHJlc3MoKTogUS5Qcm9taXNlPGFueT4ge1xyXG4gICAgICAgICAgICAvLyB0cnkgZ2V0IGFkZHJlc3MgZnJvbSBsb2NhbCBzdG9yYWdlXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNhY2hlLmdldDxhbnk+KHRoaXMuX3NlYXJjaFBvaW50QWRkcmVzc0NhY2hlS2V5KVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oY2FjaGVkQWRkciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2VhcmNoQm94SlEudmFsKGNhY2hlZEFkZHIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZW9TZXJ2aWNlLmdldExvY2F0aW9uQnlBZGRyZXNzKGNhY2hlZEFkZHIpO1xyXG4gICAgICAgICAgICAgICAgfSwgKHJlYXNvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRyeSBnZXQgY3VzdG9tZXIgZGVmYXVsdCBkZWxpdmVyeSBhZGRyZXNzXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2lzQXV0aGVudGljYXRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fc2VydmljZS5nZXREZWZhdWx0QWRkcmVzcygpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAudGhlbihkZWZhdWx0QWRkciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZvcm1hdHRlZEFkZHJlc3NcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPSBgJHtkZWZhdWx0QWRkci5DaXR5fSwgJHtkZWZhdWx0QWRkci5SZWdpb25Db2RlfSAke2RlZmF1bHRBZGRyLlBvc3RhbENvZGV9LCAke2RlZmF1bHRBZGRyLkNvdW50cnlDb2RlfWA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2VhcmNoQm94SlEudmFsKGZvcm1hdHRlZEFkZHJlc3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZW9TZXJ2aWNlLmdldExvY2F0aW9uQnlBZGRyZXNzKGZvcm1hdHRlZEFkZHJlc3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC50aGVuKGxvY2F0aW9uQnlBZGRyZXNzID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zZWFyY2hQb2ludCA9IGxvY2F0aW9uQnlBZGRyZXNzO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSU1hcE9wdGlvbnMge1xyXG4gICAgICAgIG1hcENhbnZhczogSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgb3B0aW9uczogZ29vZ2xlLm1hcHMuTWFwT3B0aW9ucztcclxuICAgICAgICBpbmZvV2luZG93TWF4V2lkdGg/OiBudW1iZXI7XHJcbiAgICB9XHJcbn1cclxuIiwibW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElTdG9yZUxvY2F0b3JJbml0aWFsaXphdGlvbk9wdGlvbnMge1xyXG4gICAgICAgIG1hcElkOiBzdHJpbmc7XHJcbiAgICAgICAgY29vcmRpbmF0ZXM6IHtcclxuICAgICAgICAgICAgTGF0OiBudW1iZXI7XHJcbiAgICAgICAgICAgIExuZzogbnVtYmVyO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgc2hvd05lYXJlc3RTdG9yZUluZm86IGJvb2xlYW47XHJcbiAgICAgICAgem9vbUxldmVsPzogbnVtYmVyO1xyXG4gICAgICAgIG1hcmtlclBhZGRpbmc/OiBudW1iZXI7XHJcbiAgICB9XHJcbn0iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL2dvb2dsZW1hcHMvZ29vZ2xlLm1hcHMuZC50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBNYXJrZXIge1xyXG4gICAgICAgIHByaXZhdGUgX2tleTogYW55O1xyXG4gICAgICAgIHByaXZhdGUgX3ZhbHVlOiBNYXJrZXJXaXRoTGFiZWw7XHJcbiAgICAgICAgcHJpdmF0ZSBfc3RvcmVOdW1iZXI6IHN0cmluZztcclxuICAgICAgICBwcml2YXRlIF9pc0NsdXN0ZXI6IGJvb2xlYW47XHJcblxyXG4gICAgICAgIGNvbnN0cnVjdG9yKG1hcmtlcjogTWFya2VyV2l0aExhYmVsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3ZhbHVlID0gbWFya2VyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZ2V0IGtleSgpOiBhbnkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fa2V5O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZ2V0IHZhbHVlKCk6IE1hcmtlcldpdGhMYWJlbCB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl92YWx1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNldCBrZXkoa2V5OiBhbnkpIHtcclxuICAgICAgICAgICAgdGhpcy5fa2V5ID0ga2V5O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc2V0IHZhbHVlKG1hcmtlcjogTWFya2VyV2l0aExhYmVsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3ZhbHVlID0gbWFya2VyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZ2V0IHN0b3JlTnVtYmVyKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fc3RvcmVOdW1iZXI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNldCBzdG9yZU51bWJlcih2YWx1ZTogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3N0b3JlTnVtYmVyID0gdmFsdWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBnZXQgaXNDbHVzdGVyKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faXNDbHVzdGVyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgc2V0IGlzQ2x1c3Rlcih2YWx1ZTogYm9vbGVhbikge1xyXG4gICAgICAgICAgICB0aGlzLl9pc0NsdXN0ZXIgPSB2YWx1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzZXRNYXAobWFwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3ZhbHVlLnNldE1hcChtYXApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHNldFBvc2l0aW9uKHBvc2l0aW9uOiBnb29nbGUubWFwcy5MYXRMbmcpIHtcclxuICAgICAgICAgICAgdGhpcy5fdmFsdWUuc2V0UG9zaXRpb24ocG9zaXRpb24pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9NYXJrZXIudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgTWFya2VyUG9vbCB7XHJcbiAgICAgICAgcHJpdmF0ZSBtYXJrZXJzOiBNYXJrZXJbXSA9IFtdO1xyXG4gICAgICAgIHByaXZhdGUgaW5kZXhlZE1hcmtlcnNCeUtleSA9IHt9O1xyXG5cclxuICAgICAgICBwcml2YXRlIF9tYXA6IGdvb2dsZS5tYXBzLk1hcDtcclxuICAgICAgICBwcml2YXRlIF9vbk1hcmtlckNyZWF0ZTogYW55O1xyXG5cclxuICAgICAgICBjb25zdHJ1Y3RvcihtYXA6IGdvb2dsZS5tYXBzLk1hcCwgb25NYXJrZXJDcmVhdGUpIHtcclxuICAgICAgICAgICAgdGhpcy5fbWFwID0gbWFwO1xyXG4gICAgICAgICAgICB0aGlzLl9vbk1hcmtlckNyZWF0ZSA9IG9uTWFya2VyQ3JlYXRlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGdldE1hcmtlcnMoKTogYW55IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubWFya2VycztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBnZXQoaXNDbHVzdGVyOiBib29sZWFuID0gZmFsc2UpOiBNYXJrZXIge1xyXG4gICAgICAgICAgICB2YXIgbWFya2VyID0gaXNDbHVzdGVyID8gdGhpcy5jcmVhdGVDbHVzdGVyTWFya2VyKCkgOiB0aGlzLmNyZWF0ZU1hcmtlcigpO1xyXG4gICAgICAgICAgICBtYXJrZXIuaXNDbHVzdGVyID0gaXNDbHVzdGVyO1xyXG4gICAgICAgICAgICB0aGlzLl9vbk1hcmtlckNyZWF0ZShtYXJrZXIpO1xyXG4gICAgICAgICAgICB0aGlzLm1hcmtlcnMucHVzaChtYXJrZXIpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG1hcmtlcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBnZXRFeGlzdGluZyhrZXkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW5kZXhlZE1hcmtlcnNCeUtleVtrZXldO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGluZGV4KG1hcmtlcjogTWFya2VyKSB7XHJcbiAgICAgICAgICAgIHRoaXMuaW5kZXhlZE1hcmtlcnNCeUtleVttYXJrZXIua2V5XSA9IG1hcmtlcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBoYXNDbHVzdGVycygpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLm1hcmtlcnMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm1hcmtlcnNbaV0gJiYgdGhpcy5tYXJrZXJzW2ldLmlzQ2x1c3Rlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBjcmVhdGVNYXJrZXIoKSB7XHJcbiAgICAgICAgICAgIHZhciBtYXJrZXIgPSBuZXcgTWFya2VyV2l0aExhYmVsKHtcclxuICAgICAgICAgICAgICAgIG1hcDogdGhpcy5fbWFwLFxyXG4gICAgICAgICAgICAgICAgbGFiZWxJbkJhY2tncm91bmQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgbGFiZWxDbGFzczogJ3N0b3JlLW1hcmtlcicsXHJcbiAgICAgICAgICAgICAgICBpY29uOiAnL1VJLlBhY2thZ2UvSW1hZ2VzL21hcC9tYXJrZXIucG5nJyxcclxuICAgICAgICAgICAgICAgIGxhYmVsQW5jaG9yOiBuZXcgZ29vZ2xlLm1hcHMuUG9pbnQoMTIsIDQyKSxcclxuICAgICAgICAgICAgICAgIGxhYmVsVmlzaWJsZTogZmFsc2VcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IE1hcmtlcihtYXJrZXIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGNyZWF0ZUNsdXN0ZXJNYXJrZXIoKSB7XHJcbiAgICAgICAgICAgIHZhciBtYXJrZXIgPSBuZXcgTWFya2VyV2l0aExhYmVsKHtcclxuICAgICAgICAgICAgICAgIG1hcDogdGhpcy5fbWFwLFxyXG4gICAgICAgICAgICAgICAgbGFiZWxJbkJhY2tncm91bmQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgbGFiZWxDbGFzczogJ3N0b3JlLWNsdXN0ZXItbWFya2VyJyxcclxuICAgICAgICAgICAgICAgIGljb246ICcvVUkuUGFja2FnZS9JbWFnZXMvbWFwL2NsdXN0ZXIucG5nJyxcclxuICAgICAgICAgICAgICAgIGxhYmVsQW5jaG9yOiBuZXcgZ29vZ2xlLm1hcHMuUG9pbnQoMTIsIDMwKSxcclxuICAgICAgICAgICAgICAgIGxhYmVsVmlzaWJsZTogZmFsc2VcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IE1hcmtlcihtYXJrZXIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHJlbGVhc2VBbGwoKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5tYXJrZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5tYXJrZXJzW2ldKSB7IHRoaXMubWFya2Vyc1tpXS5zZXRNYXAobnVsbCk7IH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBkZWxldGUgdGhpcy5tYXJrZXJzO1xyXG4gICAgICAgICAgICB0aGlzLm1hcmtlcnMgPSBbXTtcclxuICAgICAgICAgICAgdGhpcy5pbmRleGVkTWFya2Vyc0J5S2V5ID0ge307XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgcHVibGljIHJlbGVhc2VCeUluZGV4KGluZGV4OiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgdmFyIG1hcmtlciA9IHRoaXMuaW5kZXhlZE1hcmtlcnNCeUtleVtpbmRleF07XHJcbiAgICAgICAgICAgIGlmIChtYXJrZXIpIHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmluZGV4ZWRNYXJrZXJzQnlLZXlbaW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgbWFya2VyLnNldE1hcChudWxsKTtcclxuXHJcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5tYXJrZXJzW3RoaXMubWFya2Vycy5pbmRleE9mKG1hcmtlcildO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgcmVsZWFzZUNsdXN0ZXJzKCkge1xyXG4gICAgICAgICAgICB0aGlzLm1hcmtlcnMuZm9yRWFjaChtciA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAobXIuaXNDbHVzdGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWxlYXNlQnlJbmRleChtci5rZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyByZWxlYXNlTWFya2Vyc0J5SWRzKGlzY2x1c3RlcjogYm9vbGVhbiwgaWQ6IHN0cmluZykge1xyXG4gICAgICAgICAgICBpZiAoIWlzY2x1c3Rlcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tYXJrZXJzLmZvckVhY2gobXIgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChtciAmJiBtci5pc0NsdXN0ZXIgJiYgbXIuc3RvcmVOdW1iZXIuaW5kZXhPZihpZCkgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbGVhc2VCeUluZGV4KG1yLmtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubWFya2Vycy5mb3JFYWNoKG1yID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobXIgJiYgIW1yLmlzQ2x1c3RlciAmJiBpZC5pbmRleE9mKG1yLnN0b3JlTnVtYmVyKSA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVsZWFzZUJ5SW5kZXgobXIua2V5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9HZW5lcmljcy9Db2xsZWN0aW9ucy9JSGFzaHRhYmxlLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9J0lNYXBPcHRpb25zLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vTWFya2VyUG9vbC50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBNYXBTZXJ2aWNlIHtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBldmVudEh1YjogSUV2ZW50SHViO1xyXG4gICAgICAgIHByaXZhdGUgX21hcDogZ29vZ2xlLm1hcHMuTWFwO1xyXG4gICAgICAgIHByaXZhdGUgX21hcmtlclBvb2w6IE1hcmtlclBvb2w7XHJcbiAgICAgICAgcHJpdmF0ZSBfcHJldlpvb206IG51bWJlcjtcclxuICAgICAgICBwcml2YXRlIF9jdXJyZW50TG9jYXRpb25NYXJrZXI6IGdvb2dsZS5tYXBzLk1hcmtlcjtcclxuICAgICAgICBwcml2YXRlIF9pbmZvcm1hdGlvbldpbmRvdzogZ29vZ2xlLm1hcHMuSW5mb1dpbmRvdztcclxuICAgICAgICBwcml2YXRlIF9wcm9qZWN0aW9uT3ZlcmxheTogZ29vZ2xlLm1hcHMuT3ZlcmxheVZpZXc7XHJcblxyXG4gICAgICAgIHByaXZhdGUgX21hcEluaXRpYWxpemVkOiBRLkRlZmVycmVkPE1hcFNlcnZpY2U+ID0gUS5kZWZlcjxNYXBTZXJ2aWNlPigpO1xyXG4gICAgICAgIHByaXZhdGUgX21hcElkbGU6IFEuRGVmZXJyZWQ8TWFwU2VydmljZT4gPSBRLmRlZmVyPE1hcFNlcnZpY2U+KCk7XHJcbiAgICAgICAgcHJpdmF0ZSBfbWFwRHJhZ0VuZGVkOiBRLkRlZmVycmVkPE1hcFNlcnZpY2U+ID0gUS5kZWZlcjxNYXBTZXJ2aWNlPigpO1xyXG5cclxuICAgICAgICBjb25zdHJ1Y3RvcihldmVudEh1YjogSUV2ZW50SHViKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIgPSBldmVudEh1YjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKG1hcE9wdGlvbnM6IElNYXBPcHRpb25zKSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9tYXAgPSBuZXcgZ29vZ2xlLm1hcHMuTWFwKG1hcE9wdGlvbnMubWFwQ2FudmFzLCBtYXBPcHRpb25zLm9wdGlvbnMpO1xyXG4gICAgICAgICAgICB0aGlzLl9pbmZvcm1hdGlvbldpbmRvdyA9IG5ldyBnb29nbGUubWFwcy5JbmZvV2luZG93KHsgbWF4V2lkdGg6IG1hcE9wdGlvbnMuaW5mb1dpbmRvd01heFdpZHRoIH0pO1xyXG4gICAgICAgICAgICB0aGlzLl9tYXJrZXJQb29sID0gbmV3IE1hcmtlclBvb2wodGhpcy5fbWFwLCAobWFya2VyKSA9PiB7IHRoaXMub25OZXdNYXJrZXJDcmVhdGVkKG1hcmtlcik7IH0pO1xyXG4gICAgICAgICAgICB0aGlzLnNldFByb2plY3Rpb25PdmVybGF5KCk7XHJcblxyXG4gICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcih0aGlzLl9tYXAsICdjbGljaycsICgpID0+IHRoaXMuX2luZm9ybWF0aW9uV2luZG93LmNsb3NlKCkpO1xyXG5cclxuICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIodGhpcy5fbWFwLCAnem9vbV9jaGFuZ2VkJywgKCkgPT4gdGhpcy5fbWFya2VyUG9vbC5yZWxlYXNlQ2x1c3RlcnMoKSk7XHJcblxyXG4gICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcih0aGlzLl9tYXAsICdib3VuZHNfY2hhbmdlZCcsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMubWFwRHJhZ0VuZGVkKClcclxuICAgICAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaCgnbWFwQm91bmRzVXBkYXRlZCcsIHsgZGF0YTogdGhpcy5fbWFwLmdldEJvdW5kcygpIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKHRoaXMuX21hcCwgJ2lkbGUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXBJZGxlLnJlc29sdmUodGhpcyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIodGhpcy5fbWFwLCAnZHJhZ3N0YXJ0JywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwRHJhZ0VuZGVkID0gUS5kZWZlcjxNYXBTZXJ2aWNlPigpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIodGhpcy5fbWFwLCAnZHJhZ2VuZCcsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21hcERyYWdFbmRlZC5yZXNvbHZlKHRoaXMpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX21hcEluaXRpYWxpemVkLnJlc29sdmUodGhpcyk7XHJcbiAgICAgICAgICAgIHRoaXMuX21hcERyYWdFbmRlZC5yZXNvbHZlKHRoaXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzZXRQcm9qZWN0aW9uT3ZlcmxheSgpIHtcclxuICAgICAgICAgICAgdGhpcy5fcHJvamVjdGlvbk92ZXJsYXkgPSBuZXcgZ29vZ2xlLm1hcHMuT3ZlcmxheVZpZXcoKTtcclxuICAgICAgICAgICAgdGhpcy5fcHJvamVjdGlvbk92ZXJsYXkuZHJhdyA9IGZ1bmN0aW9uIG5hbWUoKSB7XHJcbiAgICAgICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB0aGlzLl9wcm9qZWN0aW9uT3ZlcmxheS5zZXRNYXAodGhpcy5fbWFwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBnZXRNYXAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9tYXA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZ2V0SW5mb3JtYXRpb25XaW5kb3coKTogZ29vZ2xlLm1hcHMuSW5mb1dpbmRvdyB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9pbmZvcm1hdGlvbldpbmRvdztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBnZXRCb3VuZHMobWFya2VyUGFkZGluZz86IG51bWJlcik6IGdvb2dsZS5tYXBzLkxhdExuZ0JvdW5kcyB7XHJcbiAgICAgICAgICAgIHZhciBib3VuZHMgPSB0aGlzLl9tYXAuZ2V0Qm91bmRzKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAobWFya2VyUGFkZGluZykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRyID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyhib3VuZHMuZ2V0Tm9ydGhFYXN0KCkubGF0KCksXHJcbiAgICAgICAgICAgICAgICAgICAgYm91bmRzLmdldE5vcnRoRWFzdCgpLmxuZygpKTtcclxuICAgICAgICAgICAgICAgIHZhciBibCA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoYm91bmRzLmdldFNvdXRoV2VzdCgpLmxhdCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIGJvdW5kcy5nZXRTb3V0aFdlc3QoKS5sbmcoKSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcHJvamVjdGlvbiA9IHRoaXMuX3Byb2plY3Rpb25PdmVybGF5LmdldFByb2plY3Rpb24oKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAocHJvamVjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0clBpeCA9IHByb2plY3Rpb24uZnJvbUxhdExuZ1RvRGl2UGl4ZWwodHIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBibFBpeCA9IHByb2plY3Rpb24uZnJvbUxhdExuZ1RvRGl2UGl4ZWwoYmwpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBibFBpeC55ID0gYmxQaXgueSArIG1hcmtlclBhZGRpbmc7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJQaXgueSA9IHRyUGl4LnkgKyBtYXJrZXJQYWRkaW5nO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgc3cgPSBwcm9qZWN0aW9uLmZyb21EaXZQaXhlbFRvTGF0TG5nKGJsUGl4KTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmUgPSBwcm9qZWN0aW9uLmZyb21EaXZQaXhlbFRvTGF0TG5nKHRyUGl4KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBnb29nbGUubWFwcy5MYXRMbmdCb3VuZHMoc3csIG5lKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGJvdW5kcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBnZXRab29tKCk6IG51bWJlciB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9tYXAuZ2V0Wm9vbSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG9uTmV3TWFya2VyQ3JlYXRlZChtYXJrZXI6IE1hcmtlcikge1xyXG5cclxuICAgICAgICAgICAgaWYgKCFtYXJrZXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKG1hcmtlci5pc0NsdXN0ZXIpIHtcclxuICAgICAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcmtlci52YWx1ZSwgJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaCgnY2x1c3RlckNsaWNrJywgeyBkYXRhOiBtYXJrZXIgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKG1hcmtlci52YWx1ZSwgJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaCgnbWFya2VyQ2xpY2snLCB7IGRhdGE6IG1hcmtlciB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgbWFwSW5pdGlhbGl6ZWQoKTogUS5Qcm9taXNlPE1hcFNlcnZpY2U+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX21hcEluaXRpYWxpemVkLnByb21pc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgbWFwSWRsZSgpOiBRLlByb21pc2U8TWFwU2VydmljZT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbWFwSWRsZS5wcm9taXNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG1hcERyYWdFbmRlZCgpOiBRLlByb21pc2U8TWFwU2VydmljZT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbWFwRHJhZ0VuZGVkLnByb21pc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgY2VudGVyTWFwKHN0b3JlQm91bmRzOiBhbnkpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKHN0b3JlQm91bmRzICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubWFwSWRsZSgpLnRoZW4oXHJcbiAgICAgICAgICAgICAgICAgICAgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgc291dGhXZXN0ID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyhzdG9yZUJvdW5kcy5Tb3V0aFdlc3QuTGF0LCBzdG9yZUJvdW5kcy5Tb3V0aFdlc3QuTG5nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5vcnRoRWFzdCA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoc3RvcmVCb3VuZHMuTm9ydGhFYXN0LkxhdCwgc3RvcmVCb3VuZHMuTm9ydGhFYXN0LkxuZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBib3VuZHMgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nQm91bmRzKHNvdXRoV2VzdCwgbm9ydGhFYXN0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWFwLmZpdEJvdW5kcyhib3VuZHMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9tYXBJZGxlID0gUS5kZWZlcjxNYXBTZXJ2aWNlPigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3BlbkluZm9ybWF0aW9uV2luZG93KGNvbnRlbnQ6IGFueSwgYW5jaG9yPzogYW55KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2luZm9ybWF0aW9uV2luZG93LnNldENvbnRlbnQoY29udGVudCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2luZm9ybWF0aW9uV2luZG93Lm9wZW4odGhpcy5fbWFwLCBhbmNob3IpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHNldExvY2F0aW9uSW5NYXAocG9pbnQ6IGdvb2dsZS5tYXBzLkxhdExuZywgem9vbUxldmVsID0gMTEpIHtcclxuICAgICAgICAgICAgdGhpcy5tYXBJZGxlKCkudGhlbihcclxuICAgICAgICAgICAgICAgICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9tYXAuc2V0Q2VudGVyKHBvaW50KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9tYXAuc2V0Wm9vbSh6b29tTGV2ZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21hcElkbGUgPSBRLmRlZmVyPE1hcFNlcnZpY2U+KCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBleHRlbmRCb3VuZHMocG9pbnQxOiBnb29nbGUubWFwcy5MYXRMbmcsIHBvaW50MjogZ29vZ2xlLm1hcHMuTGF0TG5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWFwSWRsZSgpLnRoZW4oXHJcbiAgICAgICAgICAgICAgICAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJvdW5kczogZ29vZ2xlLm1hcHMuTGF0TG5nQm91bmRzID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZ0JvdW5kcygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJvdW5kcy5leHRlbmQocG9pbnQxKTtcclxuICAgICAgICAgICAgICAgICAgICBib3VuZHMuZXh0ZW5kKHBvaW50Mik7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWFwLmZpdEJvdW5kcyhib3VuZHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21hcC5zZXRDZW50ZXIoYm91bmRzLmdldENlbnRlcigpKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9tYXBJZGxlID0gUS5kZWZlcjxNYXBTZXJ2aWNlPigpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgcHVibGljIGNyZWF0ZU1hcmtlck9uTWFwKGxvY2F0aW9uOiBnb29nbGUubWFwcy5MYXRMbmcsIHRpdGxlOiBzdHJpbmcpOiBnb29nbGUubWFwcy5NYXJrZXIge1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcih7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogbG9jYXRpb24sXHJcbiAgICAgICAgICAgICAgICBtYXA6IHRoaXMuX21hcCxcclxuICAgICAgICAgICAgICAgIHRpdGxlOiB0aXRsZSxcclxuICAgICAgICAgICAgICAgIGljb246ICdodHRwczovL21hcHMuZ29vZ2xlLmNvbS9tYXBmaWxlcy9tYXJrZXJfb3JhbmdlLnBuZydcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc2V0TWFya2VycyhtYXJrZXJJbmZvczogYW55W10sIGlzU2VhcmNoOiBib29sZWFuID0gZmFsc2UpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBjdXJab29tID0gdGhpcy5nZXRab29tKCk7XHJcbiAgICAgICAgICAgIHZhciBhY3Rpb24gPSB0aGlzLl9wcmV2Wm9vbSA9PT0gY3VyWm9vbSA/ICdQQU4nIDogdGhpcy5fcHJldlpvb20gPCBjdXJab29tID8gJ1pPT01fSU4nIDogJ1pPT01fT1VUJztcclxuXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5fbWFya2VyUG9vbC5oYXNDbHVzdGVycygpICYmIGFjdGlvbiA9PT0gJ1pPT01fSU4nKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXJrZXJQb29sLnJlbGVhc2VBbGwoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaXNTZWFyY2gpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21hcmtlclBvb2wucmVsZWFzZUFsbCgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9wcmV2Wm9vbSA9IGN1clpvb207XHJcblxyXG4gICAgICAgICAgICB0aGlzLnRyYW5zZm9ybVJlc3VsdChtYXJrZXJJbmZvcywgdGhpcy5fbWFya2VyUG9vbCwgYWN0aW9uKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKG5ld01hcmtlcnMpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBuZXdNYXJrZXJzLmZvckVhY2gobSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG0udmFsdWUubGFiZWxWaXNpYmxlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSB0cmFuc2Zvcm1SZXN1bHQocmVzdWx0LCBtYXJrZXJQb29sOiBNYXJrZXJQb29sLCBhY3Rpb24pOiBRLlByb21pc2U8YW55W10+IHtcclxuICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gUS5kZWZlcjxNYXJrZXJbXT4oKTtcclxuICAgICAgICAgICAgdmFyIG1hcmtlcnM6IE1hcmtlcltdID0gW107XHJcblxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gYnVpbGRNYXJrZXIobSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IG0uQ2VudGVyLkxhdCArICctJyArIG0uQ2VudGVyLkxuZztcclxuICAgICAgICAgICAgICAgIHZhciBtYXJrZXI6IE1hcmtlciA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB2YXIgaXNDbHVzdGVyID0gbS5JdGVtc0NvdW50ID4gMTtcclxuXHJcbiAgICAgICAgICAgICAgICBtYXJrZXJQb29sLnJlbGVhc2VNYXJrZXJzQnlJZHMoaXNDbHVzdGVyLCBtLlN0b3JlTnVtYmVyKTtcclxuICAgICAgICAgICAgICAgIG1hcmtlciA9IG1hcmtlclBvb2wuZ2V0RXhpc3Rpbmcoa2V5KTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIW1hcmtlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcmtlciA9IG1hcmtlclBvb2wuZ2V0KGlzQ2x1c3Rlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBvc2l0aW9uID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyhtLkNlbnRlci5MYXQsIG0uQ2VudGVyLkxuZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFya2VyLnZhbHVlLnNldFBvc2l0aW9uKHBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICBtYXJrZXIudmFsdWUubGFiZWxDb250ZW50ID0gKCFpc0NsdXN0ZXIgPyBtLlNlYXJjaEluZGV4IDogbS5JdGVtc0NvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICBtYXJrZXIua2V5ID0ga2V5O1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcmtlci5zdG9yZU51bWJlciA9IG0uU3RvcmVOdW1iZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFya2VyLmlzQ2x1c3RlciA9IGlzQ2x1c3RlcjtcclxuICAgICAgICAgICAgICAgICAgICBtYXJrZXJQb29sLmluZGV4KG1hcmtlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFya2Vycy5wdXNoKG1hcmtlcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgbWFya2VyLnZhbHVlLmxhYmVsQ29udGVudCA9ICghaXNDbHVzdGVyID8gbS5TZWFyY2hJbmRleCA6IG0uSXRlbXNDb3VudCk7IC8vdXBkYXRlIHNlYXJjaCBpbmRleDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCByZXN1bHQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBtYSA9IHJlc3VsdFtpXTtcclxuICAgICAgICAgICAgICAgIGJ1aWxkTWFya2VyKG1hKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShtYXJrZXJzKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBkZWZlcnJlZC5wcm9taXNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9Db250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vU2VydmljZXMvR2VvTG9jYXRpb25TZXJ2aWNlLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIFN0b3JlRGV0YWlsc0NvbnRyb2xsZXIgZXh0ZW5kcyBDb250cm9sbGVyIHtcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIF9nZW9TZXJ2aWNlOiBHZW9Mb2NhdGlvblNlcnZpY2UgPSBuZXcgR2VvTG9jYXRpb25TZXJ2aWNlKCk7XHJcblxyXG4gICAgICAgIHByaXZhdGUgX21hcDogZ29vZ2xlLm1hcHMuTWFwO1xyXG4gICAgICAgIHByaXZhdGUgX21hcmtlcjogZ29vZ2xlLm1hcHMuTWFya2VyO1xyXG5cclxuICAgICAgICBwdWJsaWMgaW5pdGlhbGl6ZSgpIHtcclxuICAgICAgICAgICAgc3VwZXIuaW5pdGlhbGl6ZSgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNlbnRlciA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcodGhpcy5jb250ZXh0LnZpZXdNb2RlbC5sYXRpdHVkZSwgdGhpcy5jb250ZXh0LnZpZXdNb2RlbC5sb25naXR1ZGUpO1xyXG4gICAgICAgICAgICB2YXIgbWFwT3B0aW9uczogZ29vZ2xlLm1hcHMuTWFwT3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgIGNlbnRlcjogY2VudGVyLFxyXG4gICAgICAgICAgICAgICAgem9vbTogdGhpcy5jb250ZXh0LnZpZXdNb2RlbC56b29tID8gdGhpcy5jb250ZXh0LnZpZXdNb2RlbC56b29tIDogMTQsXHJcbiAgICAgICAgICAgICAgICBtYXBUeXBlSWQ6IGdvb2dsZS5tYXBzLk1hcFR5cGVJZC5ST0FETUFQLFxyXG4gICAgICAgICAgICAgICAgcGFuQ29udHJvbDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBrZXlib2FyZFNob3J0Y3V0czogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBzY2FsZUNvbnRyb2w6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgc2Nyb2xsd2hlZWw6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgem9vbUNvbnRyb2w6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZHJhZ2dhYmxlOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHN0cmVldFZpZXdDb250cm9sOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIG92ZXJ2aWV3TWFwQ29udHJvbDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBvdmVydmlld01hcENvbnRyb2xPcHRpb25zOiB7IG9wZW5lZDogZmFsc2UgfSxcclxuICAgICAgICAgICAgICAgIGRpc2FibGVEZWZhdWx0VUk6IHRydWVcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX21hcCA9IG5ldyBnb29nbGUubWFwcy5NYXAodGhpcy5jb250ZXh0LmNvbnRhaW5lci5maW5kKGAjbWFwYClbMF0sIG1hcE9wdGlvbnMpO1xyXG4gICAgICAgICAgICB0aGlzLl9tYXJrZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKHtcclxuICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBjZW50ZXIsXHJcbiAgICAgICAgICAgICAgICBtYXA6IHRoaXMuX21hcCxcclxuICAgICAgICAgICAgICAgIGljb246ICcvVUkuUGFja2FnZS9JbWFnZXMvbWFwL21hcmtlci1kZWZhdWx0LnBuZydcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNvbnRleHQud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsICgpID0+IHRoaXMuX21hcC5zZXRDZW50ZXIodGhpcy5fbWFya2VyLmdldFBvc2l0aW9uKCkpKTtcclxuXHJcblxyXG4gICAgICAgICAgICB0aGlzLnNldEdvb2dsZURpcmVjdGlvbkxpbmsoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBzZXRHb29nbGVEaXJlY3Rpb25MaW5rKCkge1xyXG4gICAgICAgICAgICB0aGlzLl9nZW9TZXJ2aWNlLmdlb2xvY2F0ZSgpLnRoZW4obG9jYXRpb24gPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZ2VvU2VydmljZS51cGRhdGVEaXJlY3Rpb25MaW5rc1dpdGhMYXRMbmdTb3VyY2VBZGRyZXNzKHRoaXMuY29udGV4dC5jb250YWluZXIsIGxvY2F0aW9uKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElTdG9yZUxvY2F0b3JTZXJ2aWNlIHtcclxuICAgICAgICBnZXRNYXBDb25maWd1cmF0aW9uKCk6IFEuUHJvbWlzZTxhbnk+O1xyXG5cclxuICAgICAgICBnZXRTdG9yZShzdG9yZU51bWJlcjogc3RyaW5nKTogUS5Qcm9taXNlPGFueT47XHJcblxyXG4gICAgICAgIGdldFN0b3Jlcyhzb3V0aFdlc3Q6IGdvb2dsZS5tYXBzLkxhdExuZywgbm9ydGhFYXN0OiBnb29nbGUubWFwcy5MYXRMbmcsIHNlYXJjaFBvaW50OiBnb29nbGUubWFwcy5MYXRMbmcsXHJcbiAgICAgICAgICAgIHBhZ2U6IG51bWJlciwgcGFnZVNpemU6IG51bWJlcik6IFEuUHJvbWlzZTxhbnk+O1xyXG5cclxuICAgICAgICBnZXRNYXJrZXJzKHNvdXRoV2VzdDogZ29vZ2xlLm1hcHMuTGF0TG5nLCBub3J0aEVhc3Q6IGdvb2dsZS5tYXBzLkxhdExuZyxcclxuICAgICAgICAgICAgem9vbUxldmVsOiBudW1iZXIsIHNlYXJjaFBvaW50OiBnb29nbGUubWFwcy5MYXRMbmcsIGlzU2VhcmNoOiBib29sZWFuLCBwYWdlU2l6ZTogbnVtYmVyKTogUS5Qcm9taXNlPGFueT47XHJcbiAgICB9XHJcbn1cclxuIiwibW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIFN0b3JlTG9jYXRvckVuZFBvaW50VXJscyB7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBHZXRTdG9yZXNFbmRQb2ludFVybCA9ICcvYXBpL3N0b3JlbG9jYXRvci9zdG9yZXMnO1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgR2V0U3RvcmVFbmRQb2ludFVybCA9ICcvYXBpL3N0b3JlbG9jYXRvci9zdG9yZSc7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBHZXRNYXBDb25maWd1cmF0aW9uRW5kUG9pbnRVcmwgPSAnL2FwaS9zdG9yZWxvY2F0b3IvbWFwY29uZmlndXJhdGlvbic7XHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBHZXRNYXJrZXJzRW5kUG9pbnRVcmwgPSAnL2FwaS9zdG9yZWxvY2F0b3IvbWFya2Vycyc7XHJcbiAgICB9XHJcbn0iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L012Yy9JQ29udHJvbGxlckNvbnRleHQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvTXZjL0NvbXBvc2VyQ2xpZW50LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0V2ZW50cy9FdmVudEh1Yi50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL0lTdG9yZUxvY2F0b3JTZXJ2aWNlLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vU3RvcmVMb2NhdG9yRW5kUG9pbnRVcmxzLnRzJyAvPlxyXG5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBTdG9yZUxvY2F0b3JTZXJ2aWNlIGltcGxlbWVudHMgSVN0b3JlTG9jYXRvclNlcnZpY2Uge1xyXG5cclxuICAgICAgICBwcml2YXRlIG1lbW9pemVTdG9yZTogRnVuY3Rpb247XHJcblxyXG4gICAgICAgIHB1YmxpYyBnZXRTdG9yZShzdG9yZU51bWJlcjogc3RyaW5nKTogUS5Qcm9taXNlPGFueT4ge1xyXG4gICAgICAgICAgICBpZiAoIXN0b3JlTnVtYmVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBTdG9yZSBOdW1iZXIgaXMgcmVxdWlyZWQnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLm1lbW9pemVTdG9yZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tZW1vaXplU3RvcmUgPVxyXG4gICAgICAgICAgICAgICAgICAgIF8ubWVtb2l6ZSh0aGlzLmdldFN0b3JlSW1wbCwgKHN0b3JlTnVtYmVyKSA9PiBzdG9yZU51bWJlcik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1lbW9pemVTdG9yZShzdG9yZU51bWJlcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGdldFN0b3JlSW1wbChzdG9yZU51bWJlcjogc3RyaW5nKTogUS5Qcm9taXNlPGFueT4ge1xyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHsgU3RvcmVOdW1iZXI6IHN0b3JlTnVtYmVyIH07XHJcbiAgICAgICAgICAgIHJldHVybiBDb21wb3NlckNsaWVudC5wb3N0KFN0b3JlTG9jYXRvckVuZFBvaW50VXJscy5HZXRTdG9yZUVuZFBvaW50VXJsLCBkYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBnZXRTdG9yZXMoc291dGhXZXN0OiBnb29nbGUubWFwcy5MYXRMbmcsIG5vcnRoRWFzdDogZ29vZ2xlLm1hcHMuTGF0TG5nLFxyXG4gICAgICAgICAgICBzZWFyY2hQb2ludDogZ29vZ2xlLm1hcHMuTGF0TG5nLCBwYWdlOiBudW1iZXIsIHBhZ2VTaXplOiBudW1iZXIpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIHBhZ2U6IHBhZ2UsXHJcbiAgICAgICAgICAgICAgICBwYWdlU2l6ZTogcGFnZVNpemUsXHJcbiAgICAgICAgICAgICAgICBtYXBCb3VuZHM6IHtcclxuICAgICAgICAgICAgICAgICAgICBzb3V0aFdlc3Q6IHNvdXRoV2VzdCxcclxuICAgICAgICAgICAgICAgICAgICBub3J0aEVhc3Q6IG5vcnRoRWFzdFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHNlYXJjaFBvaW50OiBzZWFyY2hQb2ludFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIENvbXBvc2VyQ2xpZW50LnBvc3QoU3RvcmVMb2NhdG9yRW5kUG9pbnRVcmxzLkdldFN0b3Jlc0VuZFBvaW50VXJsLCBkYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBnZXRNYXBDb25maWd1cmF0aW9uKCk6IFEuUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICAgICAgcmV0dXJuIENvbXBvc2VyQ2xpZW50LmdldChTdG9yZUxvY2F0b3JFbmRQb2ludFVybHMuR2V0TWFwQ29uZmlndXJhdGlvbkVuZFBvaW50VXJsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBnZXRNYXJrZXJzKHNvdXRoV2VzdDogZ29vZ2xlLm1hcHMuTGF0TG5nLCBub3J0aEVhc3Q6IGdvb2dsZS5tYXBzLkxhdExuZywgem9vbUxldmVsOiBudW1iZXIsXHJcbiAgICAgICAgICAgIHNlYXJjaFBvaW50OiBnb29nbGUubWFwcy5MYXRMbmcsIGlzU2VhcmNoOiBib29sZWFuLCBwYWdlU2l6ZTogbnVtYmVyKTogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICB6b29tTGV2ZWw6IHpvb21MZXZlbCxcclxuICAgICAgICAgICAgICAgIG1hcEJvdW5kczoge1xyXG4gICAgICAgICAgICAgICAgICAgIHNvdXRoV2VzdDogc291dGhXZXN0LFxyXG4gICAgICAgICAgICAgICAgICAgIG5vcnRoRWFzdDogbm9ydGhFYXN0XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc2VhcmNoUG9pbnQ6IHNlYXJjaFBvaW50LFxyXG4gICAgICAgICAgICAgICAgaXNTZWFyY2g6IGlzU2VhcmNoLFxyXG4gICAgICAgICAgICAgICAgcGFnZVNpemU6IHBhZ2VTaXplXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gQ29tcG9zZXJDbGllbnQucG9zdChTdG9yZUxvY2F0b3JFbmRQb2ludFVybHMuR2V0TWFya2Vyc0VuZFBvaW50VXJsLCBkYXRhKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIFN0b3JlTG9jYXRvckhpc3RvcnlTdGF0ZSB7XHJcbiAgICAgICAgcG9pbnQ6IGdvb2dsZS5tYXBzLkxhdExuZztcclxuICAgICAgICBwYWdlOiBudW1iZXI7XHJcbiAgICAgICAgem9vbTogbnVtYmVyO1xyXG4gICAgICAgIGNlbnRlcjogZ29vZ2xlLm1hcHMuTGF0TG5nO1xyXG4gICAgICAgIHBvczogbnVtYmVyO1xyXG4gICAgfVxyXG59IiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvQ29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vU2VydmljZXMvU3RvcmVMb2NhdG9yU2VydmljZS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL01hcFNlcnZpY2UudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9TZXJ2aWNlcy9HZW9Mb2NhdGlvblNlcnZpY2UudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9JU3RvcmVMb2NhdG9ySW5pdGlhbGl6YXRpb25PcHRpb25zLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vSU1hcE9wdGlvbnMudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9TdG9yZUxvY2F0b3JIaXN0b3J5U3RhdGUudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvQ2FjaGUvQ2FjaGVQcm92aWRlci50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBTdG9yZUxvY2F0b3JDb250cm9sbGVyIGV4dGVuZHMgQ29udHJvbGxlciB7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBfc3RvcmVMb2NhdG9yU2VydmljZTogSVN0b3JlTG9jYXRvclNlcnZpY2UgPSBuZXcgU3RvcmVMb2NhdG9yU2VydmljZSgpO1xyXG4gICAgICAgIHByb3RlY3RlZCBfZ2VvU2VydmljZTogR2VvTG9jYXRpb25TZXJ2aWNlID0gbmV3IEdlb0xvY2F0aW9uU2VydmljZSgpO1xyXG4gICAgICAgIHByb3RlY3RlZCBfbWFwU2VydmljZTogTWFwU2VydmljZSA9IG5ldyBNYXBTZXJ2aWNlKHRoaXMuZXZlbnRIdWIpO1xyXG4gICAgICAgIHByb3RlY3RlZCBfc3RvcmVMb2NhdG9yT3B0aW9uczogSVN0b3JlTG9jYXRvckluaXRpYWxpemF0aW9uT3B0aW9ucztcclxuICAgICAgICBwcm90ZWN0ZWQgX2hpc3RvcnlTdGF0ZTogU3RvcmVMb2NhdG9ySGlzdG9yeVN0YXRlO1xyXG4gICAgICAgIHByb3RlY3RlZCBfaXNSZXN0b3JlTGlzdFBhZ2luZzogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgICAgIHByb3RlY3RlZCBfc2VhcmNoUG9pbnRBZGRyZXNzQ2FjaGVLZXk6IHN0cmluZyA9ICdTdG9yZUxvY2F0b3JTZWFyY2hBZGRyZXNzJztcclxuICAgICAgICBwcm90ZWN0ZWQgY2FjaGUgPSBDYWNoZVByb3ZpZGVyLmluc3RhbmNlKCkuZGVmYXVsdENhY2hlO1xyXG5cclxuICAgICAgICBwcml2YXRlIF9zZWFyY2hCb3g6IGdvb2dsZS5tYXBzLnBsYWNlcy5TZWFyY2hCb3g7XHJcbiAgICAgICAgcHJpdmF0ZSBfc2VhcmNoQm94SlE6IEpRdWVyeTtcclxuICAgICAgICBwcml2YXRlIF9zZWFyY2hQb2ludDogZ29vZ2xlLm1hcHMuTGF0TG5nO1xyXG4gICAgICAgIHByaXZhdGUgX3NlYXJjaFBvaW50TWFya2VyOiBnb29nbGUubWFwcy5NYXJrZXI7XHJcbiAgICAgICAgcHJpdmF0ZSBfaXNTZWFyY2g6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgICAgICBwcml2YXRlIF90aW1lcjogbnVtYmVyO1xyXG4gICAgICAgIHByaXZhdGUgX2VudGVyUHJlc3NlZFRpbWVyOiBudW1iZXI7XHJcbiAgICAgICAgcHJpdmF0ZSBfZ2V0Q3VycmVudExvY2F0aW9uOiBRLkRlZmVycmVkPGdvb2dsZS5tYXBzLkxhdExuZz4gPSBRLmRlZmVyPGdvb2dsZS5tYXBzLkxhdExuZz4oKTtcclxuXHJcbiAgICAgICAgcHVibGljIGdldEN1cnJlbnRMb2NhdGlvbigpOiBRLlByb21pc2U8Z29vZ2xlLm1hcHMuTGF0TG5nPiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZXRDdXJyZW50TG9jYXRpb24ucHJvbWlzZTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBwdWJsaWMgaW5pdGlhbGl6ZShvcHRpb25zOiBJU3RvcmVMb2NhdG9ySW5pdGlhbGl6YXRpb25PcHRpb25zID0ge1xyXG4gICAgICAgICAgICBtYXBJZDogJ21hcCcsXHJcbiAgICAgICAgICAgIGNvb3JkaW5hdGVzOiB7IExhdDogLTMzLjg2ODgsIExuZzogMTUxLjIxOTUgfSxcclxuICAgICAgICAgICAgc2hvd05lYXJlc3RTdG9yZUluZm86IHRydWVcclxuICAgICAgICB9KSB7XHJcbiAgICAgICAgICAgIHN1cGVyLmluaXRpYWxpemUoKTtcclxuICAgICAgICAgICAgdGhpcy5yZWdpc3RlclN1YnNjcmlwdGlvbnMoKTtcclxuICAgICAgICAgICAgdGhpcy5pbml0U2VhcmNoQm94KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3N0b3JlTG9jYXRvck9wdGlvbnMgPSBvcHRpb25zO1xyXG5cclxuICAgICAgICAgICAgLy8gZ2V0IGN1cnJlbnQgbG9jYXRpb25cclxuICAgICAgICAgICAgdGhpcy5fZ2VvU2VydmljZS5nZW9sb2NhdGUoKS50aGVuKGxvY2F0aW9uID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2dldEN1cnJlbnRMb2NhdGlvbi5yZXNvbHZlKGxvY2F0aW9uKTtcclxuICAgICAgICAgICAgfSwgcmVhc29uID0+IHRoaXMuX2dldEN1cnJlbnRMb2NhdGlvbi5yZXNvbHZlKG51bGwpKTtcclxuXHJcbiAgICAgICAgICAgIC8vIGZpcnN0IGNoZWNrIGlmIGFkZHJlc3MgaXMgcG9zdGVkIGZyb20gb3RoZXIgcGFnZS5cclxuICAgICAgICAgICAgdmFyIHBvc3RlZEFkZHJlc3MgPSB0aGlzLl9zZWFyY2hCb3hKUS52YWwoKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghcG9zdGVkQWRkcmVzcykge1xyXG4gICAgICAgICAgICAgICAgLy8gdGhlbiBjaGVjayBoaXN0b3J5IHN0YXRlXHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhcnNlSGlzdG9yeVN0YXRlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gdGhlbiBpZiBhbnkgZW50ZXJlZCBhZGRyZXNzIHNhdmVkIGluIGxvY2FsIHN0b3JhZ2VcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FjaGUuZ2V0PGFueT4odGhpcy5fc2VhcmNoUG9pbnRBZGRyZXNzQ2FjaGVLZXkpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oY2FjaGVkQWRkciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc3RlZEFkZHJlc3MgPSBjYWNoZWRBZGRyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zZWFyY2hCb3hKUS52YWwoY2FjaGVkQWRkcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3N0b3JlTG9jYXRvclNlcnZpY2UuZ2V0TWFwQ29uZmlndXJhdGlvbigpXHJcbiAgICAgICAgICAgICAgICAudGhlbihjb25maWd1cmF0aW9uID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbWFwT3B0aW9ucyA9IHRoaXMuZ2V0TWFwT3B0aW9ucygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb25maWd1cmF0aW9uLlpvb21MZXZlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zdG9yZUxvY2F0b3JPcHRpb25zLnpvb21MZXZlbCA9IGNvbmZpZ3VyYXRpb24uWm9vbUxldmVsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29uZmlndXJhdGlvbi5NYXJrZXJQYWRkaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3N0b3JlTG9jYXRvck9wdGlvbnMubWFya2VyUGFkZGluZyA9IGNvbmZpZ3VyYXRpb24uTWFya2VyUGFkZGluZztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWFwU2VydmljZS5pbml0aWFsaXplKG1hcE9wdGlvbnMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2hpc3RvcnlTdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9tYXBTZXJ2aWNlLmNlbnRlck1hcChjb25maWd1cmF0aW9uLkJvdW5kcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlYXJjaEJveFNldEJvdW5kcyhjb25maWd1cmF0aW9uLkJvdW5kcyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9tYXBTZXJ2aWNlLm1hcEluaXRpYWxpemVkKCk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLnRoZW4obWFwc2VydmljZSA9PiB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9oaXN0b3J5U3RhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN0b3JlTWFwRnJvbUhpc3RvcnlTdGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwb3N0ZWRBZGRyZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZW9TZXJ2aWNlLmdldExvY2F0aW9uQnlBZGRyZXNzKHBvc3RlZEFkZHJlc3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEN1cnJlbnRMb2NhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oY3VycmVudExvY2F0aW9uID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudExvY2F0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaCgnc2VhcmNoUG9pbnRDaGFuZ2VkJywgeyBkYXRhOiBjdXJyZW50TG9jYXRpb24gfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5mYWlsKHJlYXNvbiA9PiB0aGlzLmhhbmRsZVByb21pc2VGYWlsKCdTdG9yZUxvY2F0b3IgSW5pdGlhbGl6ZScsIHJlYXNvbikpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSByZWdpc3RlclN1YnNjcmlwdGlvbnMoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIuc3Vic2NyaWJlKCdtYXBCb3VuZHNVcGRhdGVkJywgZSA9PiB0aGlzLm9uTWFwQm91bmRzVXBkYXRlZChlLmRhdGEsIHRoaXMuX2lzU2VhcmNoKSk7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIuc3Vic2NyaWJlKCdzZWFyY2hQb2ludENoYW5nZWQnLCBlID0+IHRoaXMuc2V0U2VhcmNoTG9jYXRpb25Jbk1hcChlLmRhdGEpKTtcclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5zdWJzY3JpYmUoJ21hcmtlckNsaWNrJywgZSA9PiB0aGlzLm9uTWFya2VyQ2xpY2soZS5kYXRhKSk7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIuc3Vic2NyaWJlKCdjbHVzdGVyQ2xpY2snLCBlID0+IHRoaXMub25DbHVzdGVyQ2xpY2soZS5kYXRhKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGluaXRTZWFyY2hCb3goKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3NlYXJjaEJveEpRID0gdGhpcy5jb250ZXh0LmNvbnRhaW5lci5maW5kKCdpbnB1dFtuYW1lPVwic3RvcmVMb2NhdG9yU2VhcmNoSW5wdXRcIl0nKTtcclxuICAgICAgICAgICAgdGhpcy5fc2VhcmNoQm94ID0gbmV3IGdvb2dsZS5tYXBzLnBsYWNlcy5TZWFyY2hCb3goPEhUTUxJbnB1dEVsZW1lbnQ+dGhpcy5fc2VhcmNoQm94SlFbMF0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zZWFyY2hCb3hPblBsYWNlc0NoYW5nZWQoKTtcclxuICAgICAgICAgICAgdGhpcy5zZWFyY2hCb3hPbkVudGVyUHJlc3NlZCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzZWFyY2hCb3hPblBsYWNlc0NoYW5nZWQoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3NlYXJjaEJveC5hZGRMaXN0ZW5lcigncGxhY2VzX2NoYW5nZWQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5fZW50ZXJQcmVzc2VkVGltZXIpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBsYWNlcyA9IHRoaXMuX3NlYXJjaEJveC5nZXRQbGFjZXMoKTtcclxuICAgICAgICAgICAgICAgIGlmIChwbGFjZXMgJiYgcGxhY2VzLmxlbmd0aCAmJiBwbGFjZXNbMF0uZ2VvbWV0cnkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goJ3NlYXJjaFBvaW50Q2hhbmdlZCcsIHsgZGF0YTogcGxhY2VzWzBdLmdlb21ldHJ5LmxvY2F0aW9uIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc2VhcmNoQm94T25FbnRlclByZXNzZWQoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3NlYXJjaEJveEpRLm9uKCdrZXlwcmVzcycsIChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB2YXIga2V5ID0gZS53aGljaCB8fCBlLmtleUNvZGU7XHJcbiAgICAgICAgICAgICAgICBpZiAoa2V5ID09PSAxMykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2VudGVyUHJlc3NlZFRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9zZWFyY2hQb2ludCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRTZWFyY2hMb2NhdGlvbkluTWFwKHRoaXMuX3NlYXJjaFBvaW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0sIDc1MCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGdldE1hcE9wdGlvbnMoKTogSU1hcE9wdGlvbnMge1xyXG4gICAgICAgICAgICB2YXIgbWFwQ2VudGVyID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyh0aGlzLl9zdG9yZUxvY2F0b3JPcHRpb25zLmNvb3JkaW5hdGVzLkxhdCwgdGhpcy5fc3RvcmVMb2NhdG9yT3B0aW9ucy5jb29yZGluYXRlcy5MbmcpO1xyXG4gICAgICAgICAgICB2YXIgbWFwT3B0aW9uczogSU1hcE9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICBtYXBDYW52YXM6IHRoaXMuY29udGV4dC5jb250YWluZXIuZmluZChgIyR7dGhpcy5fc3RvcmVMb2NhdG9yT3B0aW9ucy5tYXBJZH1gKVswXSxcclxuICAgICAgICAgICAgICAgIGluZm9XaW5kb3dNYXhXaWR0aDogNDUwLFxyXG4gICAgICAgICAgICAgICAgb3B0aW9uczoge1xyXG4gICAgICAgICAgICAgICAgICAgIGNlbnRlcjogdGhpcy5faGlzdG9yeVN0YXRlID8gdGhpcy5faGlzdG9yeVN0YXRlLnBvaW50IDogbWFwQ2VudGVyLFxyXG4gICAgICAgICAgICAgICAgICAgIHpvb206IHRoaXMuX2hpc3RvcnlTdGF0ZSA/IHRoaXMuX2hpc3RvcnlTdGF0ZS56b29tIDogMSxcclxuICAgICAgICAgICAgICAgICAgICBtYXBUeXBlSWQ6IGdvb2dsZS5tYXBzLk1hcFR5cGVJZC5ST0FETUFQLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhbkNvbnRyb2w6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGtleWJvYXJkU2hvcnRjdXRzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHNjYWxlQ29udHJvbDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsd2hlZWw6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIHpvb21Db250cm9sOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0cmVldFZpZXdDb250cm9sOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBvdmVydmlld01hcENvbnRyb2w6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgb3ZlcnZpZXdNYXBDb250cm9sT3B0aW9uczogeyBvcGVuZWQ6IGZhbHNlIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBtYXBPcHRpb25zO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzZWFyY2hCb3hTZXRCb3VuZHMoYm91bmRzOiBhbnkpIHtcclxuICAgICAgICAgICAgdmFyIHNvdXRoV2VzdCA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoYm91bmRzLlNvdXRoV2VzdC5MYXQsIGJvdW5kcy5Tb3V0aFdlc3QuTG5nKTtcclxuICAgICAgICAgICAgdmFyIG5vcnRoRWFzdCA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoYm91bmRzLk5vcnRoRWFzdC5MYXQsIGJvdW5kcy5Ob3J0aEVhc3QuTG5nKTtcclxuICAgICAgICAgICAgYm91bmRzID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZ0JvdW5kcyhzb3V0aFdlc3QsIG5vcnRoRWFzdCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9zZWFyY2hCb3guc2V0Qm91bmRzKGJvdW5kcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb25NYXBCb3VuZHNVcGRhdGVkKGRhdGE/OiBhbnksIGlzU2VhcmNoPzogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQodGhpcy5fdGltZXIpO1xyXG4gICAgICAgICAgICB0aGlzLl90aW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy51cGRhdGVNYXJrZXJzKGRhdGEsIGlzU2VhcmNoKTtcclxuICAgICAgICAgICAgfSwgNzUwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvbk1hcmtlckNsaWNrKG1hcmtlcj86IE1hcmtlcik6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAobWFya2VyICE9IG51bGwgJiYgbWFya2VyLnN0b3JlTnVtYmVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zdG9yZUxvY2F0b3JTZXJ2aWNlLmdldFN0b3JlKG1hcmtlci5zdG9yZU51bWJlcilcclxuICAgICAgICAgICAgICAgICAgICAudGhlbigoc3RvcmUpID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0Q3VycmVudExvY2F0aW9uKCkudGhlbihsb2NhdGlvbiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAobG9jYXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdG9yZS5Hb29nbGVEaXJlY3Rpb25zTGluayA9IHRoaXMuX2dlb1NlcnZpY2UuZ2V0RGlyZWN0aW9uTGF0TG5nU291cmNlQWRkcmVzcyhzdG9yZS5Hb29nbGVEaXJlY3Rpb25zTGluaywgbG9jYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRlbnQgPSB0aGlzLmdldFJlbmRlcmVkVGVtcGxhdGVDb250ZW50cygnU3RvcmVNYXBNYXJrZXJJbmZvJywgc3RvcmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWFwU2VydmljZS5vcGVuSW5mb3JtYXRpb25XaW5kb3coY29udGVudCwgbWFya2VyLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLmZhaWwocmVhc29uID0+IHRoaXMuaGFuZGxlUHJvbWlzZUZhaWwoJ1N0b3JlTG9jYXRvciBPbk1hcmtlckNsaWNrJywgcmVhc29uKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvbkNsdXN0ZXJDbGljayhtYXJrZXI/OiBNYXJrZXIpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5fbWFwU2VydmljZS5nZXRJbmZvcm1hdGlvbldpbmRvdygpLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX21hcFNlcnZpY2UuZ2V0TWFwKCkucGFuVG8obWFya2VyLnZhbHVlLmdldFBvc2l0aW9uKCkpO1xyXG4gICAgICAgICAgICBtYXJrZXIudmFsdWUuc2V0TWFwKG51bGwpO1xyXG4gICAgICAgICAgICB0aGlzLl9tYXBTZXJ2aWNlLmdldE1hcCgpLnNldFpvb20odGhpcy5fbWFwU2VydmljZS5nZXRNYXAoKS5nZXRab29tKCkgKyAxKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCB1cGRhdGVNYXJrZXJzKGRhdGE/OiBhbnksIGlzU2VhcmNoOiBib29sZWFuID0gZmFsc2UpIHtcclxuICAgICAgICAgICAgdmFyIG1hcEJvdW5kcyA9IHRoaXMuX21hcFNlcnZpY2UuZ2V0Qm91bmRzKHRoaXMuX3N0b3JlTG9jYXRvck9wdGlvbnMubWFya2VyUGFkZGluZyk7XHJcbiAgICAgICAgICAgIHZhciB6b29tTGV2ZWwgPSB0aGlzLl9tYXBTZXJ2aWNlLmdldFpvb20oKTtcclxuICAgICAgICAgICAgdmFyIHNlYXJjaFBvaW50ID0gdGhpcy5fc2VhcmNoUG9pbnQ7XHJcbiAgICAgICAgICAgIHZhciBwYWdlU2l6ZSA9IHRoaXMuX2lzUmVzdG9yZUxpc3RQYWdpbmcgPyB0aGlzLl9oaXN0b3J5U3RhdGUucGFnZSAqIHRoaXMuY29udGV4dC52aWV3TW9kZWwucGFnZVNpemUgOiB0aGlzLmNvbnRleHQudmlld01vZGVsLnBhZ2VTaXplO1xyXG5cclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3N0b3JlTG9jYXRvclNlcnZpY2UuZ2V0TWFya2VycyhtYXBCb3VuZHMuZ2V0U291dGhXZXN0KCksIG1hcEJvdW5kcy5nZXROb3J0aEVhc3QoKSwgem9vbUxldmVsLCBzZWFyY2hQb2ludCwgaXNTZWFyY2gsIHBhZ2VTaXplKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKHJlc3VsdCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuTGF0ICYmIHJlc3VsdC5MbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWFwU2VydmljZS5leHRlbmRCb3VuZHMoc2VhcmNoUG9pbnQsIG5ldyBnb29nbGUubWFwcy5MYXRMbmcocmVzdWx0LkxhdCwgcmVzdWx0LkxuZykpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX21hcFNlcnZpY2Uuc2V0TWFya2VycyhyZXN1bHQuTWFya2VycywgaXNTZWFyY2gpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2lzUmVzdG9yZUxpc3RQYWdpbmcgJiYgcmVzdWx0Lk5leHRQYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQuTmV4dFBhZ2UuUGFnZSA9IHRoaXMuX2hpc3RvcnlTdGF0ZS5wYWdlICsgMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclN0b3Jlc0xpc3QocmVzdWx0LCBudWxsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX2lzUmVzdG9yZUxpc3RQYWdpbmcgJiYgdGhpcy5faGlzdG9yeVN0YXRlLnBvcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvcDogdGhpcy5faGlzdG9yeVN0YXRlLnBvc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgNTAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGlzdG9yeVB1c2hTdGF0ZShudWxsLCBudWxsLCBudWxsLCBudWxsLCAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9pc1Jlc3RvcmVMaXN0UGFnaW5nID0gZmFsc2U7XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX3N0b3JlTG9jYXRvck9wdGlvbnMuc2hvd05lYXJlc3RTdG9yZUluZm8gJiYgcmVzdWx0LlN0b3Jlcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZpcnN0U3RvcmUgPSByZXN1bHQuU3RvcmVzWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpcnN0U3RvcmUgJiYgZmlyc3RTdG9yZS5TZWFyY2hJbmRleCA9PT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0TmVhcmVzdFN0b3JlSW5mbyhmaXJzdFN0b3JlLkRlc3RpbmF0aW9uVG9TZWFyY2hQb2ludCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oaXN0b3J5UHVzaFN0YXRlKDEsIHNlYXJjaFBvaW50LCB6b29tTGV2ZWwsIHRoaXMuX21hcFNlcnZpY2UuZ2V0Qm91bmRzKCkuZ2V0Q2VudGVyKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2lzU2VhcmNoID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmZhaWwocmVhc29uID0+IHRoaXMuaGFuZGxlUHJvbWlzZUZhaWwoJ1N0b3JlTG9jYXRvciBVcGRhdGVNYXJrZXJzIGdldE1hcmtlcnMnLCByZWFzb24pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc2V0U2VhcmNoTG9jYXRpb25Jbk1hcChwb2ludDogZ29vZ2xlLm1hcHMuTGF0TG5nLCB6b29tTGV2ZWw6IG51bWJlciA9IHRoaXMuX3N0b3JlTG9jYXRvck9wdGlvbnMuem9vbUxldmVsKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3NlYXJjaFBvaW50ID0gcG9pbnQ7XHJcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlU2VhcmNoUG9pdE1hcmtlcigpO1xyXG4gICAgICAgICAgICB0aGlzLl9pc1NlYXJjaCA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuY2FjaGUuc2V0KHRoaXMuX3NlYXJjaFBvaW50QWRkcmVzc0NhY2hlS2V5LCB0aGlzLl9zZWFyY2hCb3hKUS52YWwoKSk7XHJcbiAgICAgICAgICAgIHRoaXMuX21hcFNlcnZpY2Uuc2V0TG9jYXRpb25Jbk1hcChwb2ludCwgem9vbUxldmVsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgY3JlYXRlU2VhcmNoUG9pdE1hcmtlcigpIHtcclxuICAgICAgICAgICAgdmFyIHRpdGxlID0gdGhpcy5fc2VhcmNoQm94SlEudmFsKCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9zZWFyY2hQb2ludE1hcmtlciA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zZWFyY2hQb2ludE1hcmtlciA9IHRoaXMuX21hcFNlcnZpY2UuY3JlYXRlTWFya2VyT25NYXAodGhpcy5fc2VhcmNoUG9pbnQsIHRpdGxlKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NlYXJjaFBvaW50TWFya2VyLnNldFBvc2l0aW9uKHRoaXMuX3NlYXJjaFBvaW50KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NlYXJjaFBvaW50TWFya2VyLnNldFRpdGxlKHRpdGxlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQWN0aW9uIG9uIENsaWNrIG9uIGxvY2F0b3IgaWNvbiBpbiBzZWFyY2ggYm94XHJcbiAgICAgICAgcHVibGljIGN1cnJlbnRMb2NhdGlvbkFjdGlvbihhY3Rpb25Db250ZXh0OiBJQ29udHJvbGxlckFjdGlvbkNvbnRleHQpIHtcclxuICAgICAgICAgICAgYWN0aW9uQ29udGV4dC5ldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fZ2VvU2VydmljZS5nZW9sb2NhdGUoKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oY3VycmVudExvY2F0aW9uID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goJ3NlYXJjaFBvaW50Q2hhbmdlZCcsIHsgZGF0YTogY3VycmVudExvY2F0aW9uIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2VvU2VydmljZS5nZXRBZGR0cmVzc0J5TG9jYXRpb24oY3VycmVudExvY2F0aW9uKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAudGhlbihhZGRyZXNzID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zZWFyY2hCb3hKUS52YWwoYWRkcmVzcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2VhcmNoUG9pbnRNYXJrZXIuc2V0VGl0bGUoYWRkcmVzcyk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmZhaWwocmVhc29uID0+IHRoaXMuaGFuZGxlUHJvbWlzZUZhaWwoJ1N0b3JlTG9jYXRvciBDdXJyZW50TG9jYXRpb25BY3Rpb24nLCByZWFzb24pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIE5leHQgUGFnZSBBY3Rpb25cclxuICAgICAgICBwdWJsaWMgbmV4dFBhZ2UoYWN0aW9uQ29udGV4dDogSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0KSB7XHJcbiAgICAgICAgICAgIHZhciBwYWdlOiBudW1iZXIgPSA8YW55PmFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHQuZGF0YSgncGFnZScpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5nZXRTdG9yZXNGb3JQYWdlKHBhZ2UsIHRoaXMuY29udGV4dC52aWV3TW9kZWwucGFnZVNpemUsIGFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHQpO1xyXG4gICAgICAgICAgICBhY3Rpb25Db250ZXh0LmV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBSZW1lbWJlciBlbGVtZW50IHBvc2l0aW9uIGluIGhpc3RvcnlcclxuICAgICAgICBwdWJsaWMgcmVtZW1iZXJQb3NpdGlvbihhY3Rpb25Db250ZXh0OiBJQ29udHJvbGxlckFjdGlvbkNvbnRleHQpIHtcclxuICAgICAgICAgICAgdmFyIHBvc2l0aW9uID0gJChkb2N1bWVudCkuc2Nyb2xsVG9wKCk7XHJcbiAgICAgICAgICAgIHRoaXMuaGlzdG9yeVB1c2hTdGF0ZShudWxsLCBudWxsLCBudWxsLCBudWxsLCBwb3NpdGlvbik7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBzZXROZWFyZXN0U3RvcmVJbmZvKGluZm86IHN0cmluZykge1xyXG4gICAgICAgICAgICB2YXIgbmVhcmVzdEluZm9QYW5lbCA9ICQoJyNzdG9yZS1sb2NhdG9yLW5lYXJlc3QnKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghJCgnI25lYXJlc3RJbmZvJykubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgICAgICBuZWFyZXN0SW5mb1BhbmVsLmh0bWwobmVhcmVzdEluZm9QYW5lbC5odG1sKCkucmVwbGFjZSgnezB9JywgJzxzdHJvbmcgaWQ9XFwnbmVhcmVzdEluZm9cXCc+PC9zdHJvbmc+JykpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAkKCcjbmVhcmVzdEluZm8nKS5odG1sKGluZm8pO1xyXG4gICAgICAgICAgICBuZWFyZXN0SW5mb1BhbmVsLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgZ2V0U3RvcmVzRm9yUGFnZShwYWdlOiBudW1iZXIsIHBhZ2VTaXplPzogbnVtYmVyLCBlbGVtZW50PzogYW55KSB7XHJcbiAgICAgICAgICAgIHZhciBtYXBCb3VuZHMgPSB0aGlzLl9tYXBTZXJ2aWNlLmdldEJvdW5kcyh0aGlzLl9zdG9yZUxvY2F0b3JPcHRpb25zLm1hcmtlclBhZGRpbmcpO1xyXG4gICAgICAgICAgICB2YXIgc2VhcmNoUG9pbnQgPSB0aGlzLl9zZWFyY2hQb2ludDtcclxuICAgICAgICAgICAgdmFyIGJ1c3kgPSB0aGlzLmFzeW5jQnVzeSh7IGVsZW1lbnRDb250ZXh0OiBlbGVtZW50IH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fc3RvcmVMb2NhdG9yU2VydmljZS5nZXRTdG9yZXMobWFwQm91bmRzLmdldFNvdXRoV2VzdCgpLCBtYXBCb3VuZHMuZ2V0Tm9ydGhFYXN0KCksIHNlYXJjaFBvaW50LFxyXG4gICAgICAgICAgICAgICAgcGFnZSwgcGFnZVNpemUpXHJcbiAgICAgICAgICAgICAgICAudGhlbigoc3RvcmVzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnVzeS5kb25lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJTdG9yZXNMaXN0KHN0b3JlcywgZWxlbWVudFswXS5wYXJlbnRFbGVtZW50KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5oaXN0b3J5UHVzaFN0YXRlKHBhZ2UpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHJlbmRlclN0b3Jlc0xpc3Qoc3RvcmVzOiBhbnksIHRhcmdldDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBsaXN0SHRtbCA9IHRoaXMuZ2V0UmVuZGVyZWRUZW1wbGF0ZUNvbnRlbnRzKCdTdG9yZXNMaXN0Jywgc3RvcmVzKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0YXJnZXQgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgdmFyICRsaXN0ID0gJCgnI3N0b3Jlc0xpc3QnKS5odG1sKCcnKS5zdG9wKCkuZmFkZU91dCgpO1xyXG4gICAgICAgICAgICAgICAgJGxpc3QuaHRtbChsaXN0SHRtbCkuc3RvcCgpLmZhZGVJbigpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIHBvc2l0aW9uID0gJCh0YXJnZXQpLm9mZnNldCgpLnRvcCArICQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpO1xyXG4gICAgICAgICAgICAgICAgJCh0YXJnZXQpLnJlcGxhY2VXaXRoKGxpc3RIdG1sKS5zdG9wKCkuZmFkZUluKCk7XHJcbiAgICAgICAgICAgICAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgc2Nyb2xsVG9wOiBwb3NpdGlvblxyXG4gICAgICAgICAgICAgICAgfSwgNTAwKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5zZXRHb29nbGVEaXJlY3Rpb25MaW5rcygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHNldEdvb2dsZURpcmVjdGlvbkxpbmtzKCk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEN1cnJlbnRMb2NhdGlvbigpLnRoZW4obG9jYXRpb24gPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZ2VvU2VydmljZS51cGRhdGVEaXJlY3Rpb25MaW5rc1dpdGhMYXRMbmdTb3VyY2VBZGRyZXNzKHRoaXMuY29udGV4dC5jb250YWluZXIsIGxvY2F0aW9uKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGhpc3RvcnlQdXNoU3RhdGUocGFnZTogbnVtYmVyLCBwb2ludD86IGdvb2dsZS5tYXBzLkxhdExuZywgem9vbT86IG51bWJlciwgY2VudGVyPzogZ29vZ2xlLm1hcHMuTGF0TG5nLCBlbGVtZW50UG9zPzogbnVtYmVyKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5faGlzdG9yeVN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9oaXN0b3J5U3RhdGUgPSBuZXcgU3RvcmVMb2NhdG9ySGlzdG9yeVN0YXRlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHBhZ2UpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2hpc3RvcnlTdGF0ZS5wYWdlID0gcGFnZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocG9pbnQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2hpc3RvcnlTdGF0ZS5wb2ludCA9IHBvaW50O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh6b29tKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9oaXN0b3J5U3RhdGUuem9vbSA9IHpvb207XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChjZW50ZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2hpc3RvcnlTdGF0ZS5jZW50ZXIgPSBjZW50ZXI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChlbGVtZW50UG9zID49IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2hpc3RvcnlTdGF0ZS5wb3MgPSBlbGVtZW50UG9zO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5faGlzdG9yeVN0YXRlLnBvaW50KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgb2JqID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICdwX2xhdCc6IHRoaXMuX2hpc3RvcnlTdGF0ZS5wb2ludC5sYXQoKSxcclxuICAgICAgICAgICAgICAgICAgICAncF9sbmcnOiB0aGlzLl9oaXN0b3J5U3RhdGUucG9pbnQubG5nKCksXHJcbiAgICAgICAgICAgICAgICAgICAgJ3BhZ2UnOiB0aGlzLl9oaXN0b3J5U3RhdGUucGFnZSxcclxuICAgICAgICAgICAgICAgICAgICAnem9vbSc6IHRoaXMuX2hpc3RvcnlTdGF0ZS56b29tLFxyXG4gICAgICAgICAgICAgICAgICAgICdjX2xhdCc6IHRoaXMuX2hpc3RvcnlTdGF0ZS5jZW50ZXIubGF0KCksXHJcbiAgICAgICAgICAgICAgICAgICAgJ2NfbG5nJzogdGhpcy5faGlzdG9yeVN0YXRlLmNlbnRlci5sbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICAncG9zJzogdGhpcy5faGlzdG9yeVN0YXRlLnBvc1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaGlzdG9yeS5zdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGhpc3RvcnkucmVwbGFjZVN0YXRlKG9iaiwgbnVsbCwgbnVsbCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGhpc3RvcnkucHVzaFN0YXRlKG9iaiwgbnVsbCwgbnVsbCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBwYXJzZUhpc3RvcnlTdGF0ZSgpIHtcclxuICAgICAgICAgICAgaWYgKGhpc3Rvcnkuc3RhdGUpIHtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9oaXN0b3J5U3RhdGUgPSBuZXcgU3RvcmVMb2NhdG9ySGlzdG9yeVN0YXRlKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaGlzdG9yeS5zdGF0ZS5wX2xhdCAmJiBoaXN0b3J5LnN0YXRlLnBfbG5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faGlzdG9yeVN0YXRlLnBvaW50ID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZyhoaXN0b3J5LnN0YXRlLnBfbGF0LCBoaXN0b3J5LnN0YXRlLnBfbG5nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaGlzdG9yeS5zdGF0ZS5jX2xhdCAmJiBoaXN0b3J5LnN0YXRlLmNfbG5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5faGlzdG9yeVN0YXRlLmNlbnRlciA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoaGlzdG9yeS5zdGF0ZS5jX2xhdCwgaGlzdG9yeS5zdGF0ZS5jX2xuZyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5faGlzdG9yeVN0YXRlLnpvb20gPSBoaXN0b3J5LnN0YXRlLnpvb207XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9oaXN0b3J5U3RhdGUucGFnZSA9IGhpc3Rvcnkuc3RhdGUucGFnZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2hpc3RvcnlTdGF0ZS5wb3MgPSBoaXN0b3J5LnN0YXRlLnBvcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHJlc3RvcmVNYXBGcm9tSGlzdG9yeVN0YXRlKCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnUmVzdG9yZSBkYXRhIGZyb20gaGlzdG9yeSBzdGF0ZScpO1xyXG4gICAgICAgICAgICB0aGlzLl9zZWFyY2hQb2ludCA9IHRoaXMuX2hpc3RvcnlTdGF0ZS5wb2ludDtcclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVTZWFyY2hQb2l0TWFya2VyKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5faGlzdG9yeVN0YXRlLmNlbnRlcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwU2VydmljZS5nZXRNYXAoKS5zZXRDZW50ZXIodGhpcy5faGlzdG9yeVN0YXRlLmNlbnRlcik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9oaXN0b3J5U3RhdGUucGFnZSA+IDEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2lzUmVzdG9yZUxpc3RQYWdpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgaGFuZGxlUHJvbWlzZUZhaWwodGl0bGU6IHN0cmluZywgcmVhc29uOiBhbnkpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2codGl0bGUgKyAnOiAnICsgcmVhc29uKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcblxyXG5IYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdlc2NhcGUnLCBmdW5jdGlvbihvcHRpb25zKSB7XHJcbiAgICB2YXIgaW5uZXJDb250ZW50ID0gb3B0aW9ucy5mbih0aGlzKTtcclxuXHJcbiAgICB2YXIgZXNjYXBlZENvbnRlbnQgPSBfLmVzY2FwZShpbm5lckNvbnRlbnQpO1xyXG5cclxuICAgIHJldHVybiBuZXcgSGFuZGxlYmFycy5TYWZlU3RyaW5nKGVzY2FwZWRDb250ZW50KTtcclxufSk7IiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG5cclxuSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcignaWZfZXEnLCBmdW5jdGlvbihsZWZ0LCByaWdodCwgb3B0aW9ucykge1xyXG4gICAgaWYgKGxlZnQgPT09IHJpZ2h0KSB7XHJcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMuZm4odGhpcyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBvcHRpb25zLmludmVyc2UodGhpcyk7XHJcbiAgICB9XHJcbn0pO1xyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcblxyXG5IYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdpZl9leGlzdHMnLCBmdW5jdGlvbih2YWx1ZSwgb3B0aW9ucykge1xyXG4gICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICByZXR1cm4gb3B0aW9ucy5mbih0aGlzKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMuaW52ZXJzZSh0aGlzKTtcclxuICAgIH1cclxufSk7XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vVHlwaW5ncy90c2QuZC50cycgLz5cclxuXHJcbkhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ2lmX2d0JywgZnVuY3Rpb24obGVmdCwgcmlnaHQsIG9wdGlvbnMpIHtcclxuICAgIGlmIChsZWZ0ID4gcmlnaHQpIHtcclxuICAgICAgICByZXR1cm4gb3B0aW9ucy5mbih0aGlzKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMuaW52ZXJzZSh0aGlzKTtcclxuICAgIH1cclxufSk7XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vVHlwaW5ncy90c2QuZC50cycgLz5cclxuXHJcbkhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ2lmX2d0ZScsIGZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCBvcHRpb25zKSB7XHJcbiAgICBpZiAobGVmdCA+PSByaWdodCkge1xyXG4gICAgICAgIHJldHVybiBvcHRpb25zLmZuKHRoaXMpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gb3B0aW9ucy5pbnZlcnNlKHRoaXMpO1xyXG4gICAgfVxyXG59KTtcclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG5cclxuSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcignaWZfbHQnLCBmdW5jdGlvbihsZWZ0LCByaWdodCwgb3B0aW9ucykge1xyXG4gICAgaWYgKGxlZnQgPCByaWdodCkge1xyXG4gICAgICAgIHJldHVybiBvcHRpb25zLmZuKHRoaXMpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gb3B0aW9ucy5pbnZlcnNlKHRoaXMpO1xyXG4gICAgfVxyXG59KTtcclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG5cclxuSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcignaWZfbHRlJywgZnVuY3Rpb24obGVmdCwgcmlnaHQsIG9wdGlvbnMpIHtcclxuICAgIGlmIChsZWZ0IDw9IHJpZ2h0KSB7XHJcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMuZm4odGhpcyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBvcHRpb25zLmludmVyc2UodGhpcyk7XHJcbiAgICB9XHJcbn0pO1xyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElIYW5kbGViYXJzTG9jYWxpemF0aW9uIGV4dGVuZHMgSGFuZGxlYmFyc1N0YXRpYyB7XHJcbiAgICAgICAgbG9jYWxpemF0aW9uUHJvdmlkZXI6IHtcclxuICAgICAgICAgICAgaGFuZGxlQmFyc0hlbHBlcl9sb2NhbGl6ZUZvcm1hdChjYXRlZ29yeU5hbWU6IHN0cmluZywga2V5TmFtZTogc3RyaW5nLCBhcmdzOiBhbnkpOiBzdHJpbmc7XHJcbiAgICAgICAgICAgIGhhbmRsZUJhcnNIZWxwZXJfbG9jYWxpemUoY2F0ZWdvcnlOYW1lOiBzdHJpbmcsIGtleU5hbWU6IHN0cmluZyk6IHN0cmluZztcclxuICAgICAgICAgICAgaGFuZGxlQmFyc0hlbHBlcl9pc0xvY2FsaXplZChjYXRlZ29yeU5hbWU6IHN0cmluZywga2V5TmFtZTogc3RyaW5nKTogYm9vbGVhbjtcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL0lIYW5kbGViYXJzTG9jYWxpemF0aW9uLnRzJyAvPlxyXG5cclxuSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcignaWZfbG9jYWxpemVkJywgZnVuY3Rpb24oY2F0ZWdvcnlOYW1lLCBrZXlOYW1lLCBvcHRpb25zKSB7XHJcbiAgICBpZiAoKDxPcmNrZXN0cmEuQ29tcG9zZXIuSUhhbmRsZWJhcnNMb2NhbGl6YXRpb24+SGFuZGxlYmFycykubG9jYWxpemF0aW9uUHJvdmlkZXIuaGFuZGxlQmFyc0hlbHBlcl9pc0xvY2FsaXplZChjYXRlZ29yeU5hbWUsIGtleU5hbWUpKSB7XHJcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMuZm4odGhpcyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBvcHRpb25zLmludmVyc2UodGhpcyk7XHJcbiAgICB9XHJcbn0pO1xyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcblxyXG5IYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdpZl9uZXEnLCBmdW5jdGlvbihsZWZ0LCByaWdodCwgb3B0aW9ucykge1xyXG4gICAgaWYgKGxlZnQgIT09IHJpZ2h0KSB7XHJcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMuZm4odGhpcyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBvcHRpb25zLmludmVyc2UodGhpcyk7XHJcbiAgICB9XHJcbn0pO1xyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9JSGFuZGxlYmFyc0xvY2FsaXphdGlvbi50cycgLz5cclxuXHJcbkhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ2xvY2FsaXplRm9ybWF0JywgZnVuY3Rpb24oY2F0ZWdvcnlOYW1lLCBrZXlOYW1lKSB7XHJcbiAgICB2YXIgYXJncyA9IFtdO1xyXG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAyKSB7XHJcbiAgICAgICAgYXJncyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMik7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIHZhbHVlID0gKDxPcmNrZXN0cmEuQ29tcG9zZXIuSUhhbmRsZWJhcnNMb2NhbGl6YXRpb24+SGFuZGxlYmFycykubG9jYWxpemF0aW9uUHJvdmlkZXJcclxuICAgICAgICAuaGFuZGxlQmFyc0hlbHBlcl9sb2NhbGl6ZUZvcm1hdChjYXRlZ29yeU5hbWUsIGtleU5hbWUsIGFyZ3MpO1xyXG5cclxuICAgIHJldHVybiBuZXcgSGFuZGxlYmFycy5TYWZlU3RyaW5nKHZhbHVlKTtcclxufSk7XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL0lIYW5kbGViYXJzTG9jYWxpemF0aW9uLnRzJyAvPlxyXG5cclxuSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcignbG9jYWxpemUnLCBmdW5jdGlvbihjYXRlZ29yeU5hbWUsIGtleU5hbWUpIHtcclxuICAgIHZhciB2YWx1ZSA9ICg8T3Jja2VzdHJhLkNvbXBvc2VyLklIYW5kbGViYXJzTG9jYWxpemF0aW9uPkhhbmRsZWJhcnMpLmxvY2FsaXphdGlvblByb3ZpZGVyLmhhbmRsZUJhcnNIZWxwZXJfbG9jYWxpemUoY2F0ZWdvcnlOYW1lLCBrZXlOYW1lKTtcclxuICAgIHJldHVybiBuZXcgSGFuZGxlYmFycy5TYWZlU3RyaW5nKHZhbHVlKTtcclxufSk7XHJcbiIsIi8vVE9ETzogQ3VzdG9tIGVycm9ycyBhbmQgbm90IGJlaW5nIGFibGUgdG8gaW5oZXJpdCBmcm9tIEVycm9yXHJcbi8vIG1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4vLyAgICAgZXhwb3J0IGNsYXNzIENvbnRyb2xsZXJBbHJlYWR5UmVnaXN0ZXJlZEV4Y2VwdGlvbiBpbXBsZW1lbnRzIEVycm9yIHtcclxuLy8gICAgICAgICBwdWJsaWMgbmFtZSA9ICdDb250cm9sbGVyQWxyZWFkeVJlZ2lzdGVyZWRFeGNlcHRpb24nO1xyXG5cclxuLy8gICAgICAgICBjb25zdHJ1Y3RvcihwdWJsaWMgbWVzc2FnZTogc3RyaW5nID0gJ1RoZSBjb250cm9sbGVyIGhhcyBhbHJlYWR5IGJlZW4gcmVnaXN0ZXJlZC4nKSB7XHJcbi8vICAgICAgICAgfVxyXG4vLyAgICAgfVxyXG4vLyB9XHJcbiIsIi8vVE9ETzogQ3VzdG9tIGVycm9ycyBhbmQgbm90IGJlaW5nIGFibGUgdG8gaW5oZXJpdCBmcm9tIEVycm9yXHJcbi8vIG1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4vLyAgICAgZXhwb3J0IGNsYXNzIE1pc3NpbmdDb250cm9sbGVyRGlzcGF0Y2hlck5hbWVFeGNlcHRpb24gaW1wbGVtZW50cyBFcnJvciB7XHJcbi8vICAgICAgICAgcHVibGljIG5hbWUgPSAnTWlzc2luZ0NvbnRyb2xsZXJEaXNwYXRjaGVyTmFtZUV4Y2VwdGlvbic7XHJcblxyXG4vLyAgICAgICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBtZXNzYWdlOiBzdHJpbmcgPSAnQSBuYW1lIGlzIHJlcXVpcmVkIHRvIGNyZWF0ZSBhIGNvbnRyb2xsZXIgZGlzcGF0Y2hlci4nKSB7XHJcbi8vICAgICAgICAgfVxyXG4vLyAgICAgfVxyXG4vLyB9XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vR2VuZXJpY3MvQ29sbGVjdGlvbnMvSUhhc2hUYWJsZS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL0lDb250cm9sbGVyLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgY2xhc3MgQ29udHJvbGxlclJlZ2lzdHJ5IHtcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBfaW5zdGFuY2UgOiBDb250cm9sbGVyUmVnaXN0cnk7XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgX3JlZ2lzdHJ5IDogSUhhc2hUYWJsZTxhbnk+ID0ge307IC8vSUhhc2hUYWJsZTxJQ29udHJvbGxlcj4gPSB7fTtcclxuXHJcbiAgICAgICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgICAgIGlmIChDb250cm9sbGVyUmVnaXN0cnkuX2luc3RhbmNlID09PSB2b2lkIDApIHtcclxuICAgICAgICAgICAgICAgIENvbnRyb2xsZXJSZWdpc3RyeS5faW5zdGFuY2UgPSB0aGlzO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gQ29udHJvbGxlclJlZ2lzdHJ5Ll9pbnN0YW5jZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBpc1JlZ2lzdGVyZWQoY29udHJvbGxlck5hbWUpOiBib29sZWFuIHtcclxuICAgICAgICAgICAgcmV0dXJuIENvbnRyb2xsZXJSZWdpc3RyeS5fcmVnaXN0cnkuaGFzT3duUHJvcGVydHkoY29udHJvbGxlck5hbWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHJldHJpZXZlQ29udHJvbGxlcihjb250cm9sbGVyTmFtZTogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5pc1JlZ2lzdGVyZWQoY29udHJvbGxlck5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuYWJsZSB0byB1bnJlZ2lzdGVyIHRoZSBjb250cm9sbGVyICcgKyBjb250cm9sbGVyTmFtZSArICcgYmVjYXVzZSBpdCBkb2VzIG5vdCBleGlzdCBpbiB0aGUgcmVnaXN0cnknKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIENvbnRyb2xsZXJSZWdpc3RyeS5fcmVnaXN0cnlbY29udHJvbGxlck5hbWVdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHJlZ2lzdGVyKGNvbnRyb2xsZXJOYW1lOiBzdHJpbmcsIGNvbnRyb2xsZXI6IGFueSApIHsgLy9PcmNrZXN0cmEuQ29tcG9zZXIuSUNvbnRyb2xsZXIpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNSZWdpc3RlcmVkKGNvbnRyb2xsZXJOYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgY29udHJvbGxlciAnICsgY29udHJvbGxlck5hbWUgKyAnIGlzIGFscmVhZHkgcmVnaXN0ZXJlZC4nKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgQ29udHJvbGxlclJlZ2lzdHJ5Ll9yZWdpc3RyeVtjb250cm9sbGVyTmFtZV0gPSBjb250cm9sbGVyO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHVucmVnaXN0ZXIoY29udHJvbGxlck5hbWU6IHN0cmluZyk6IGFueSB7IC8vOiBJQ29udHJvbGxlciB7XHJcbiAgICAgICAgICAgIHZhciB1bnJlZ2lzdGVyZWRDb250cm9sbGVyOiBhbnk7IC8vIElDb250cm9sbGVyO1xyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzUmVnaXN0ZXJlZChjb250cm9sbGVyTmFtZSkpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVW5hYmxlIHRvIHVucmVnaXN0ZXIgdGhlIGNvbnRyb2xsZXIgJyArIGNvbnRyb2xsZXJOYW1lICsgJyBiZWNhdXNlIGl0IGRvZXMgbm90IGV4aXN0IGluIHRoZSByZWdpc3RyeScpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBkZWxldGUgQ29udHJvbGxlclJlZ2lzdHJ5Ll9yZWdpc3RyeVtjb250cm9sbGVyTmFtZV07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdW5yZWdpc3RlcmVkQ29udHJvbGxlcjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vSUNvbnRyb2xsZXJDb250ZXh0LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uL0V2ZW50cy9JRXZlbnRIdWIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vSUNvbXBvc2VyQ29udGV4dC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi9JQ29tcG9zZXJDb25maWd1cmF0aW9uLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElDcmVhdGVDb250cm9sbGVyT3B0aW9ucyB7XHJcbiAgICAgICAgY29udHJvbGxlck5hbWU6IHN0cmluZztcclxuICAgICAgICBjb250ZXh0OiBPcmNrZXN0cmEuQ29tcG9zZXIuSUNvbnRyb2xsZXJDb250ZXh0O1xyXG4gICAgICAgIGV2ZW50SHViOiBPcmNrZXN0cmEuQ29tcG9zZXIuSUV2ZW50SHViO1xyXG4gICAgICAgIGNvbXBvc2VyQ29udGV4dDogSUNvbXBvc2VyQ29udGV4dDtcclxuICAgICAgICBjb21wb3NlckNvbmZpZ3VyYXRpb246IElDb21wb3NlckNvbmZpZ3VyYXRpb247XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uL3R5cGluZ3MvdHNkLmQudHNcIiAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi9JQ29udHJvbGxlci50c1wiIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuL0NvbnRyb2xsZXJSZWdpc3RyeS50c1wiIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuL0lDcmVhdGVDb250cm9sbGVyT3B0aW9ucy50c1wiIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi9DYWNoZS9JQ2FjaGUudHNcIiAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vRXZlbnRzL0lFdmVudEh1Yi50c1wiIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi9JQ29tcG9zZXJDb250ZXh0LnRzXCIgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uL0lDb21wb3NlckNvbmZpZ3VyYXRpb24udHNcIiAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgLyoqXHJcbiAgICAqIEZhY3RvcnkgZm9yIGNyZWF0aW5nIGNvbnRyb2xsZXJzLlxyXG4gICAgKi9cclxuICAgIGV4cG9ydCBjbGFzcyBDb250cm9sbGVyRmFjdG9yeSB7XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgX2NvbnRyb2xsZXJSZWdpc3RyeSA9IG5ldyBPcmNrZXN0cmEuQ29tcG9zZXIuQ29udHJvbGxlclJlZ2lzdHJ5KCk7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICogQ3JlYXRlcyBhbmQgcmV0dXJucyBhbiBpbnN0YW5jZSBvZiBhIGNvbnRyb2xsZXIuXHJcbiAgICAgICAgKi9cclxuICAgICAgICBzdGF0aWMgY3JlYXRlQ29udHJvbGxlcihvcHRpb25zOiBJQ3JlYXRlQ29udHJvbGxlck9wdGlvbnMpIDogSUNvbnRyb2xsZXIge1xyXG5cclxuICAgICAgICAgICAgdmFyIGNvbnRyb2xsZXJDb25zdHJ1Y3RvciA9XHJcbiAgICAgICAgICAgICAgICBDb250cm9sbGVyRmFjdG9yeS5fY29udHJvbGxlclJlZ2lzdHJ5LnJldHJpZXZlQ29udHJvbGxlcihvcHRpb25zLmNvbnRyb2xsZXJOYW1lKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgY29udHJvbGxlckNvbnN0cnVjdG9yKFxyXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5jb250ZXh0LFxyXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5ldmVudEh1YixcclxuICAgICAgICAgICAgICAgIG9wdGlvbnMuY29tcG9zZXJDb250ZXh0LFxyXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5jb21wb3NlckNvbmZpZ3VyYXRpb24pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLG51bGwsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL0lDb21wb3NlckNvbnRleHQudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIGV4cG9ydCBjbGFzcyBDb21wb3NlckNvbnRleHQgaW1wbGVtZW50cyBJQ29tcG9zZXJDb250ZXh0IHtcclxuXHJcbiAgICAgICAgcHVibGljIGxhbmd1YWdlOiBzdHJpbmcgPSAoKCkgPT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2h0bWwnKVswXS5nZXRBdHRyaWJ1dGUoJ2xhbmcnKTtcclxuICAgICAgICB9KSgpO1xyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL012Yy9Db250cm9sbGVyUmVnaXN0cnkudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9NdmMvQ29udHJvbGxlckZhY3RvcnkudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9UZW1wbGF0aW5nL0lDb21wb3NlclRlbXBsYXRlcy50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL1RlbXBsYXRpbmcvSUNvbXBvc2VyVGVtcGxhdGVzLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vTXZjL0xvY2FsaXphdGlvbi9Mb2NhbGl6YXRpb25Qcm92aWRlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL012Yy9Mb2NhbGl6YXRpb24vSUxvY2FsaXphdGlvblByb3ZpZGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vVmFsaWRhdGlvbi9JUGFyc2xleVZhbGlkYXRvci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL0NvbXBvc2VyQ29udGV4dC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL0lDb21wb3NlckNvbmZpZ3VyYXRpb24udHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9NdmMvSUNvbnRyb2xsZXJDb25maWd1cmF0aW9uLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vUGx1Z2lucy9JUGx1Z2luLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uL1R5cGVzY3JpcHQvRXZlbnRzL0V2ZW50SHViLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcblxyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGZ1bmN0aW9uIGxvYWRQbHVnaW5zKHBsdWdpbnM6IHN0cmluZ1tdLCB3aW5kb3c6IFdpbmRvdywgZG9jdW1lbnQ6IEhUTUxEb2N1bWVudCkge1xyXG4gICAgICAgIGlmICghXy5pc0VtcHR5KHBsdWdpbnMpKSB7XHJcbiAgICAgICAgICAgIHBsdWdpbnMuZm9yRWFjaCgocmF3UGx1Z2luTmFtZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdmFyIHBsdWdpbk5hbWUgPSBgJHtyYXdQbHVnaW5OYW1lfVBsdWdpbmAsXHJcbiAgICAgICAgICAgICAgICAgICAgcGx1Z2luOiBJUGx1Z2luO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChPcmNrZXN0cmEuQ29tcG9zZXIuaGFzT3duUHJvcGVydHkocGx1Z2luTmFtZSkgJiYgXy5pc0Z1bmN0aW9uKE9yY2tlc3RyYS5Db21wb3NlcltwbHVnaW5OYW1lXSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBwbHVnaW4gPSAoPElQbHVnaW4+T2JqZWN0LmNyZWF0ZShPcmNrZXN0cmEuQ29tcG9zZXJbcGx1Z2luTmFtZV0pLnByb3RvdHlwZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcGx1Z2luLmluaXRpYWxpemUod2luZG93LCBkb2N1bWVudCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBsb2FkQ29udHJvbGxlcnMoY29udHJvbGxlclJlZ2lzdHJ5OiBPcmNrZXN0cmEuQ29tcG9zZXIuQ29udHJvbGxlclJlZ2lzdHJ5LCBjb250cm9sbGVyczogSUNvbnRyb2xsZXJDb25maWd1cmF0aW9uW10pIHtcclxuICAgICAgICBpZiAoIV8uaXNFbXB0eShjb250cm9sbGVycykpIHtcclxuICAgICAgICAgICAgY29udHJvbGxlcnMuZm9yRWFjaCgoY29udHJvbGxlckNvbmZpZ3VyYXRpb24pID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXJSZWdpc3RyeS5yZWdpc3Rlcihjb250cm9sbGVyQ29uZmlndXJhdGlvbi5uYW1lLCBjb250cm9sbGVyQ29uZmlndXJhdGlvbi5jb250cm9sbGVyKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHJhaXNlTGFuZ3VhZ2VTd2l0Y2hFdmVudElmTmVlZGVkKGNhY2hlUHJvdmlkZXI6IElDYWNoZVByb3ZpZGVyLCBldmVudEh1YjogSUV2ZW50SHViKSB7XHJcbiAgICAgICAgbGV0IGNhY2hlS2V5ID0gJ2xhbmd1YWdlU3dpdGNoRXZlbnQnO1xyXG4gICAgICAgIHJldHVybiBjYWNoZVByb3ZpZGVyLmRlZmF1bHRDYWNoZS5nZXQoY2FjaGVLZXkpLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIGV2ZW50SHViLnB1Ymxpc2goJ2xhbmd1YWdlU3dpdGNoZWQnLCBudWxsKTtcclxuICAgICAgICAgICAgY2FjaGVQcm92aWRlci5kZWZhdWx0Q2FjaGUuY2xlYXIoY2FjaGVLZXkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCB2YXIgYm9vdHN0cmFwID0gKHdpbmRvdzogV2luZG93LCBkb2N1bWVudDogSFRNTERvY3VtZW50LCBjb21wb3NlckNvbmZpZ3VyYXRpb246IElDb21wb3NlckNvbmZpZ3VyYXRpb24pID0+IHtcclxuICAgICAgICB2YXIgY29udHJvbGxlclJlZ2lzdHJ5OiBPcmNrZXN0cmEuQ29tcG9zZXIuQ29udHJvbGxlclJlZ2lzdHJ5ID0gbmV3IE9yY2tlc3RyYS5Db21wb3Nlci5Db250cm9sbGVyUmVnaXN0cnkoKSxcclxuICAgICAgICAgICAgY29udHJvbGxlcjogT3Jja2VzdHJhLkNvbXBvc2VyLklDb250cm9sbGVyLFxyXG4gICAgICAgICAgICBldmVudEh1YjogT3Jja2VzdHJhLkNvbXBvc2VyLklFdmVudEh1YiA9IE9yY2tlc3RyYS5Db21wb3Nlci5FdmVudEh1Yi5pbnN0YW5jZSgpLFxyXG4gICAgICAgICAgICBjYWNoZVByb3ZpZGVyOiBJQ2FjaGVQcm92aWRlciA9IENhY2hlUHJvdmlkZXIuaW5zdGFuY2UoKSxcclxuICAgICAgICAgICAgbG9jYWxpemF0aW9uUHJvdmlkZXI6IE9yY2tlc3RyYS5Db21wb3Nlci5JTG9jYWxpemF0aW9uUHJvdmlkZXIgPSBPcmNrZXN0cmEuQ29tcG9zZXIuTG9jYWxpemF0aW9uUHJvdmlkZXIuaW5zdGFuY2UoKSxcclxuICAgICAgICAgICAgY29tcG9zZXJDb250ZXh0OiBPcmNrZXN0cmEuQ29tcG9zZXIuSUNvbXBvc2VyQ29udGV4dCA9IG5ldyBDb21wb3NlckNvbnRleHQoKTtcclxuXHJcbiAgICAgICAgLy8gVE9ETzogTmVlZCBhIGJldHRlciBzb2x1dGlvbiB0aGF0IDxhbnk+LlxyXG4gICAgICAgICg8YW55PkhhbmRsZWJhcnMpLnBhcnRpYWxzID0gKDxhbnk+T3Jja2VzdHJhLkNvbXBvc2VyKS5UZW1wbGF0ZXM7XHJcbiAgICAgICAgKDxhbnk+SGFuZGxlYmFycykubG9jYWxpemF0aW9uUHJvdmlkZXIgPSBsb2NhbGl6YXRpb25Qcm92aWRlcjtcclxuXHJcbiAgICAgICAgbG9jYWxpemF0aW9uUHJvdmlkZXIuaW5pdGlhbGl6ZShjb21wb3NlckNvbnRleHQpLmZhaWwoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdGYWlsZWQgdG8gaW5pdGlhbGl6ZSB0aGUgbG9jYWxpemF0aW9uIHByb3ZpZGVyJyk7XHJcbiAgICAgICAgfSkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgIHZhciBibGFkZXMgPSAkKCdbZGF0YS1vYy1jb250cm9sbGVyXScpLFxyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcnM6IElDb250cm9sbGVyW10gPSBbXTtcclxuXHJcbiAgICAgICAgICAgIGxvYWRQbHVnaW5zKGNvbXBvc2VyQ29uZmlndXJhdGlvbi5wbHVnaW5zLCB3aW5kb3csIGRvY3VtZW50KTtcclxuICAgICAgICAgICAgbG9hZENvbnRyb2xsZXJzKGNvbnRyb2xsZXJSZWdpc3RyeSwgY29tcG9zZXJDb25maWd1cmF0aW9uLmNvbnRyb2xsZXJzKTtcclxuXHJcbiAgICAgICAgICAgIC8vIE5lZWQgYSBiZXR0ZXIgcXVlcnkgc2VsZWN0b3IgYXMgdGhpcyBvbmUgaXMgc2hpdFxyXG4gICAgICAgICAgICBibGFkZXMuZWFjaCgoaW5kZXg6IG51bWJlciwgaXRlbTogSFRNTEVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIHZhciBibGFkZU5hbWU6IHN0cmluZyA9IGl0ZW0uZ2V0QXR0cmlidXRlKCdkYXRhLW9jLWNvbnRyb2xsZXInKSxcclxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0OiBPcmNrZXN0cmEuQ29tcG9zZXIuSUNvbnRyb2xsZXJDb250ZXh0O1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjb250cm9sbGVyUmVnaXN0cnkuaXNSZWdpc3RlcmVkKGJsYWRlTmFtZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXI6ICQoaXRlbSksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFJdGVtSWQ6IGl0ZW0uZ2V0QXR0cmlidXRlKCdkYXRhLWl0ZW0taWQnKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVOYW1lOiBibGFkZU5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpZXdNb2RlbDogSlNPTi5wYXJzZShpdGVtLmdldEF0dHJpYnV0ZSgnZGF0YS1jb250ZXh0JykgfHwgJ3t9JyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdzogd2luZG93XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlciA9IE9yY2tlc3RyYS5Db21wb3Nlci5Db250cm9sbGVyRmFjdG9yeS5jcmVhdGVDb250cm9sbGVyKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlck5hbWU6IGJsYWRlTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dDogY29udGV4dCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnRIdWI6IGV2ZW50SHViLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21wb3NlckNvbnRleHQ6IGNvbXBvc2VyQ29udGV4dCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9zZXJDb25maWd1cmF0aW9uOiBjb21wb3NlckNvbmZpZ3VyYXRpb25cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlci5pbml0aWFsaXplKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcnMucHVzaChjb250cm9sbGVyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBldmVudEh1Yi5wdWJsaXNoKCdhbGxDb250cm9sbGVyc0luaXRpYWxpemVkJywgbnVsbCk7XHJcblxyXG4gICAgICAgICAgICByYWlzZUxhbmd1YWdlU3dpdGNoRXZlbnRJZk5lZWRlZChjYWNoZVByb3ZpZGVyLCBldmVudEh1Yik7XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogVGhpcyBwYXJ0IG9mIHRoZSBjb2RlIGlzIG1vc3RseSBjcmVhdGVkIHRvIGNsZWFuIHVwIGRvbSBldmVudHNcclxuICAgICAgICAgICAgICogaXQgd2FzIGNyZWF0ZWQgdG8gd29ya2Fyb3VuZCBhIGJ1ZyB3aXRoIElFOCB0aGF0IGhhZCBtZW1vcnkgbGVha3NcclxuICAgICAgICAgICAgICogd2hlbiBhIGNpcmN1bGFyIHJlZmVyZW5jZSB3YXMgbWFkZSB3aXRoIGEgZG9tIGVsZW1lbnQgKGllIGV2ZW50ICsgdXBkYXRlIG9mIHRoZSBkb20gZWxlbWVudClcclxuICAgICAgICAgICAgICogc2VlIDogaHR0cDovL2NvbS5oZW1pb2xhLmNvbS8yMDA5LzExLzIzL21lbW9yeS1sZWFrcy1pbi1pZTgvXHJcbiAgICAgICAgICAgICAqIGFuZCA6IGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMzA4MzE5Ni9pbi1pbnRlcm5ldC1leHBsb3Jlci13aHktZG9lcy1tZW1vcnktbGVhay1zdGF5LWV2ZW4td2hlbi1uYXZpZ2F0aW5nLWF3YXktZnJvbSBcclxuICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICQod2luZG93KS5vbignYmVmb3JldW5sb2FkJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29udHJvbGxlcnMuZm9yRWFjaChjb250cm9sbGVyID0+IGNvbnRyb2xsZXIuZGlzcG9zZSgpKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSkuZG9uZSgpO1xyXG4gICAgfTtcclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSVBvcE92ZXJKcXVlcnlQbHVnaW4gZXh0ZW5kcyBKUXVlcnkge1xyXG4gICAgICAgIHBvcG92ZXIob3B0aW9ucz86IGFueSk6IGFueTtcclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vTXZjL0NvbnRyb2xsZXIudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIGV4cG9ydCBjbGFzcyBTZWFyY2hCb3hDb250cm9sbGVyIGV4dGVuZHMgQ29udHJvbGxlciB7XHJcbiAgICAgICAgcHVibGljIGluaXRpYWxpemUoKSB7XHJcbiAgICAgICAgICAgIHN1cGVyLmluaXRpYWxpemUoKTtcclxuICAgICAgICAgICAgdGhpcy5yZWdpc3RlckZvcm1zRm9yVmFsaWRhdGlvbih0aGlzLmNvbnRleHQuY29udGFpbmVyLmZpbmQoJ2Zvcm0nKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uL012Yy9Db250cm9sbGVyLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgY2xhc3MgUGFnZU5vdEZvdW5kQW5hbHl0aWNzQ29udHJvbGxlciBleHRlbmRzIENvbnRyb2xsZXIge1xyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKCkge1xyXG4gICAgICAgICAgICBzdXBlci5pbml0aWFsaXplKCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgcGFnZVVybCA9IGRlY29kZVVSSUNvbXBvbmVudCh1cmxIZWxwZXIuZ2V0VVJMUGFyYW1ldGVyKHdpbmRvdy5sb2NhdGlvbi5ocmVmLCAnZXJyb3JwYXRoJykpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFwYWdlVXJsIHx8IHBhZ2VVcmwgPT09ICdudWxsJykge1xyXG4gICAgICAgICAgICAgICAgcGFnZVVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goJ3BhZ2VOb3RGb3VuZCcsIHsgZGF0YTogeyBQYWdlVXJsOiBwYWdlVXJsLCBSZWZlcnJlclVybDogZG9jdW1lbnQucmVmZXJyZXIgfSB9KTtcclxuXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufSIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi9NdmMvQ29udHJvbGxlci50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgZXhwb3J0IGNsYXNzIExhbmd1YWdlU3dpdGNoQ29udHJvbGxlciBleHRlbmRzIENvbnRyb2xsZXIge1xyXG5cclxuICAgICAgICBwcml2YXRlIGxhbmd1YWdlU3dpdGNoRXZlbnQ6IHN0cmluZyA9ICdsYW5ndWFnZVN3aXRjaEV2ZW50JztcclxuICAgICAgICBwcml2YXRlIGNhY2hlUHJvdmlkZXI6IElDYWNoZVByb3ZpZGVyO1xyXG5cclxuICAgICAgICBwdWJsaWMgaW5pdGlhbGl6ZSgpIHtcclxuICAgICAgICAgICAgc3VwZXIuaW5pdGlhbGl6ZSgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jYWNoZVByb3ZpZGVyID0gQ2FjaGVQcm92aWRlci5pbnN0YW5jZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG9uTGFuZ3VhZ2VTd2l0Y2goKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY2FjaGVQcm92aWRlci5kZWZhdWx0Q2FjaGUuc2V0KHRoaXMubGFuZ3VhZ2VTd2l0Y2hFdmVudCwgdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufSIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uL012Yy9Db250cm9sbGVyLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuL0lFcnJvckNvbGxlY3Rpb24udHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIGV4cG9ydCBjbGFzcyBFcnJvckNvbnRyb2xsZXIgZXh0ZW5kcyBDb250cm9sbGVyIHtcclxuICAgICAgICBwcml2YXRlIGxhc3RFcnJvckNvZGVzOiBzdHJpbmdbXTtcclxuXHJcbiAgICAgICAgcHVibGljIGluaXRpYWxpemUoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3Vic2NyaWJlVG9FdmVudHMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBzdWJzY3JpYmVUb0V2ZW50cygpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5zdWJzY3JpYmUoJ0dlbmVyYWxFcnJvck9jY3VyZWQnLFxyXG4gICAgICAgICAgICAgICAgKGV2ZW50SW5mbzogSUV2ZW50SW5mb3JtYXRpb24pID0+IHRoaXMuaGFuZGxlR2VuZXJhbEVycm9yKGV2ZW50SW5mby5kYXRhLCBldmVudEluZm8uc291cmNlKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgaGFuZGxlR2VuZXJhbEVycm9yKGVycm9yczogSUVycm9yQ29sbGVjdGlvbiwgc291cmNlOiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgdmFyIGVycm9yQ29kZXM6IHN0cmluZ1tdID0gPHN0cmluZ1tdPl8ubWFwKGVycm9ycy5FcnJvcnMsICdFcnJvckNvZGUnKS5zb3J0KCk7XHJcbiAgICAgICAgICAgIHZhciBsYXN0RXJyb3JDb2RlcyA9IHRoaXMubGFzdEVycm9yQ29kZXMgPyB0aGlzLmxhc3RFcnJvckNvZGVzIDogW107XHJcbiAgICAgICAgICAgIHZhciBpc01hdGNoID0gXy5pc0VxdWFsKGVycm9yQ29kZXMsIGxhc3RFcnJvckNvZGVzKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghaXNNYXRjaCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sYXN0RXJyb3JDb2RlcyA9IGVycm9yQ29kZXM7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcignRm9ybUVycm9yTWVzc2FnZXMnLCBlcnJvcnMpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvL1RPRE86IEZvcmNlIGEgc2Nyb2xsP1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL0Jvb3RzdHJhcC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL0pRdWVyeVBsdWdpbnMvSVBvcE92ZXJKcXVlcnlQbHVnaW4udHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9JQ29tcG9zZXJDb25maWd1cmF0aW9uLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vQ29udHJvbGxlci9TZWFyY2hCb3hDb250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vQ29udHJvbGxlci9QYWdlTm90Rm91bmRBbmFseXRpY3NDb250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vQ29udHJvbGxlci9MYW5ndWFnZVN3aXRjaENvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ29tcG9zZXIuUHJvZHVjdC5VSS9Qcm9kdWN0U2VhcmNoL1NvdXJjZS9UeXBlU2NyaXB0L1NvcnRCeVNlYXJjaENvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ29tcG9zZXIuUHJvZHVjdC5VSS9Qcm9kdWN0U2VhcmNoL1NvdXJjZS9UeXBlU2NyaXB0L0ZhY2V0U2VhcmNoQ29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21wb3Nlci5Qcm9kdWN0LlVJL1Byb2R1Y3RTZWFyY2gvU291cmNlL1R5cGVTY3JpcHQvU2VhcmNoUmVzdWx0c0NvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ29tcG9zZXIuUHJvZHVjdC5VSS9Qcm9kdWN0U2VhcmNoL1NvdXJjZS9UeXBlU2NyaXB0L1NlYXJjaFN1bW1hcnlDb250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NvbXBvc2VyLlByb2R1Y3QuVUkvUHJvZHVjdFNlYXJjaC9Tb3VyY2UvVHlwZVNjcmlwdC9RdWlja1ZpZXdDb250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NvbXBvc2VyLlByb2R1Y3QuVUkvUHJvZHVjdFNlYXJjaC9Tb3VyY2UvVHlwZVNjcmlwdC9TZWxlY3RlZEZhY2V0U2VhcmNoQ29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21wb3Nlci5DYXJ0LlVJL0FkZFRvQ2FydE5vdGlmaWNhdGlvbi9Tb3VyY2UvVHlwZVNjcmlwdC9BZGRUb0NhcnROb3RpZmljYXRpb25Db250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NvbXBvc2VyLkNhcnQuVUkvQ2FydFN1bW1hcnkvU291cmNlL1R5cGVTY3JpcHQvRnVsbENhcnRDb250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NvbXBvc2VyLkNhcnQuVUkvTWluaUNhcnQvU291cmNlL1R5cGVTY3JpcHQvTWluaUNhcnRDb250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NvbXBvc2VyLkNhcnQuVUkvTWluaUNhcnQvU291cmNlL1R5cGVTY3JpcHQvTWluaUNhcnRTdW1tYXJ5Q29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21wb3Nlci5DYXJ0LlVJL0NvdXBvbnMvU291cmNlL1R5cGVzY3JpcHQvQ291cG9uQ29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21wb3Nlci5Qcm9kdWN0LlVJL1Byb2R1Y3REZXRhaWwvU291cmNlL1R5cGVTY3JpcHQvUHJvZHVjdERldGFpbENvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ29tcG9zZXIuUHJvZHVjdC5VSS9SZWxhdGVkUHJvZHVjdHMvU291cmNlL1R5cGVTY3JpcHQvUmVsYXRlZFByb2R1Y3RzQ29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21wb3Nlci5Qcm9kdWN0LlVJL1Byb2R1Y3RTcGVjaWZpY2F0aW9uL1NvdXJjZS9UeXBlU2NyaXB0L1Byb2R1Y3RTcGVjaWZpY2F0aW9uc0NvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ29tcG9zZXIuQ2FydC5VSS9PcmRlclN1bW1hcnkvU291cmNlL1R5cGVTY3JpcHQvT3JkZXJTdW1tYXJ5Q29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21wb3Nlci5DYXJ0LlVJL0NoZWNrb3V0R3Vlc3RDdXN0b21lckluZm8vU291cmNlL1R5cGVTY3JpcHQvR3Vlc3RDdXN0b21lckluZm9DaGVja291dENvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ29tcG9zZXIuQ2FydC5VSS9DaGVja291dFNoaXBwaW5nQWRkcmVzcy9Tb3VyY2UvVHlwZVNjcmlwdC9TaGlwcGluZ0FkZHJlc3NDaGVja291dENvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ29tcG9zZXIuQ2FydC5VSS9DaGVja291dFNoaXBwaW5nTWV0aG9kL1NvdXJjZS9UeXBlU2NyaXB0L1NoaXBwaW5nTWV0aG9kQ2hlY2tvdXRDb250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NvbXBvc2VyLkNhcnQuVUkvQ2hlY2tvdXRCaWxsaW5nQWRkcmVzcy9Tb3VyY2UvVHlwZVNjcmlwdC9CaWxsaW5nQWRkcmVzc0NoZWNrb3V0Q29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21wb3Nlci5DYXJ0LlVJL0NoZWNrb3V0QmlsbGluZ0FkZHJlc3NSZWdpc3RlcmVkL1NvdXJjZS9UeXBlU2NyaXB0L0JpbGxpbmdBZGRyZXNzUmVnaXN0ZXJlZENoZWNrb3V0Q29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21wb3Nlci5DYXJ0LlVJL0NoZWNrb3V0T3JkZXJDb25maXJtYXRpb24vU291cmNlL1R5cGVTY3JpcHQvQ2hlY2tvdXRPcmRlckNvbmZpcm1hdGlvbkNvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ29tcG9zZXIuQ2FydC5VSS9DaGVja291dENvbXBsZXRlL1NvdXJjZS9UeXBlU2NyaXB0L0NoZWNrb3V0Q29tcGxldGVDb250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NvbXBvc2VyLk15QWNjb3VudC5VSS9BZGRyZXNzTGlzdC9Tb3VyY2UvVHlwZVNjcmlwdC9BZGRyZXNzTGlzdENvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ29tcG9zZXIuTXlBY2NvdW50LlVJL0NoYW5nZVBhc3N3b3JkL1NvdXJjZS9UeXBlU2NyaXB0L0NoYW5nZVBhc3N3b3JkQ29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21wb3Nlci5NeUFjY291bnQuVUkvQ3JlYXRlQWNjb3VudC9Tb3VyY2UvVHlwZVNjcmlwdC9DcmVhdGVBY2NvdW50Q29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21wb3Nlci5NeUFjY291bnQuVUkvRWRpdEFkZHJlc3MvU291cmNlL1R5cGVTY3JpcHQvRWRpdEFkZHJlc3NDb250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NvbXBvc2VyLk15QWNjb3VudC5VSS9Gb3Jnb3RQYXNzd29yZC9Tb3VyY2UvVHlwZVNjcmlwdC9Gb3Jnb3RQYXNzd29yZENvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ29tcG9zZXIuTXlBY2NvdW50LlVJL0FjY291bnRIZWFkZXIvU291cmNlL1R5cGVTY3JpcHQvQWNjb3VudEhlYWRlckNvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ29tcG9zZXIuTXlBY2NvdW50LlVJL1VwZGF0ZUFjY291bnQvU291cmNlL1R5cGVTY3JpcHQvVXBkYXRlQWNjb3VudENvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ29tcG9zZXIuTXlBY2NvdW50LlVJL05ld1Bhc3N3b3JkL1NvdXJjZS9UeXBlU2NyaXB0L05ld1Bhc3N3b3JkQ29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21wb3Nlci5NeUFjY291bnQuVUkvUmV0dXJuaW5nQ3VzdG9tZXIvU291cmNlL1R5cGVTY3JpcHQvUmV0dXJuaW5nQ3VzdG9tZXJDb250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NvbXBvc2VyLk15QWNjb3VudC5VSS9XaXNoTGlzdC9Tb3VyY2UvVHlwZVNjcmlwdC9NeVdpc2hMaXN0Q29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21wb3Nlci5NeUFjY291bnQuVUkvV2lzaExpc3RTaGFyZWQvU291cmNlL1R5cGVTY3JpcHQvU2hhcmVkV2lzaExpc3RDb250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NvbXBvc2VyLk15QWNjb3VudC5VSS9XaXNoTGlzdC9Tb3VyY2UvVHlwZVNjcmlwdC9XaXNoTGlzdEluSGVhZGVyQ29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21wb3Nlci5DYXJ0LlVJL0NoZWNrb3V0U2hpcHBpbmdBZGRyZXNzUmVnaXN0ZXJlZC9Tb3VyY2UvVHlwZVNjcmlwdC9TaGlwcGluZ0FkZHJlc3NSZWdpc3RlcmVkQ29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21wb3Nlci5DYXJ0LlVJL0NoZWNrb3V0T3JkZXJTdW1tYXJ5L1NvdXJjZS9UeXBlU2NyaXB0L0NoZWNrb3V0T3JkZXJTdW1tYXJ5Q29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21wb3Nlci5DYXJ0LlVJL0NoZWNrb3V0T3JkZXJTdW1tYXJ5L1NvdXJjZS9UeXBlU2NyaXB0L0NvbXBsZXRlQ2hlY2tvdXRPcmRlclN1bW1hcnlDb250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NvbXBvc2VyLkNhcnQuVUkvQ2hlY2tvdXRQYXltZW50L1NvdXJjZS9UeXBlU2NyaXB0L0NoZWNrb3V0UGF5bWVudENvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ29tcG9zZXIuQ2FydC5VSS9DaGVja291dENvbW1vbi9Tb3VyY2UvVHlwZVNjcmlwdC9DaGVja291dE5hdmlnYXRpb25Db250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NvbXBvc2VyLk15QWNjb3VudC5VSS9TaWduSW5IZWFkZXIvU291cmNlL1R5cGVTY3JpcHQvU2lnbkluSGVhZGVyQ29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21wb3Nlci5NeUFjY291bnQuVUkvTXlBY2NvdW50L1NvdXJjZS9UeXBlU2NyaXB0L015QWNjb3VudENvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ29tcG9zZXIuQ2FydC5VSS9PcmRlckhpc3RvcnkvU291cmNlL1R5cGVTY3JpcHQvQ3VycmVudE9yZGVyc0NvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ29tcG9zZXIuQ2FydC5VSS9PcmRlckhpc3RvcnkvU291cmNlL1R5cGVTY3JpcHQvUGFzdE9yZGVyc0NvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ29tcG9zZXIuQ2FydC5VSS9PcmRlckRldGFpbHMvU291cmNlL1R5cGVTY3JpcHQvT3JkZXJEZXRhaWxzQ29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21wb3Nlci5DYXJ0LlVJL0ZpbmRNeU9yZGVyL1NvdXJjZS9UeXBlU2NyaXB0L0ZpbmRNeU9yZGVyQ29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL0Vycm9ySGFuZGxpbmcvRXJyb3JDb250cm9sbGVyLnRzJyAvPlxyXG5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21wb3Nlci5TdG9yZS5VSS9TdG9yZUxvY2F0b3IvU291cmNlL1R5cGVTY3JpcHQvU3RvcmVMb2NhdG9yQ29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21wb3Nlci5TdG9yZS5VSS9TdG9yZUxvY2F0b3IvU291cmNlL1R5cGVTY3JpcHQvU3RvcmVEZXRhaWxzQ29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21wb3Nlci5TdG9yZS5VSS9TdG9yZURpcmVjdG9yeS9Tb3VyY2UvVHlwZVNjcmlwdC9TdG9yZXNEaXJlY3RvcnlDb250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NvbXBvc2VyLlN0b3JlLlVJL1N0b3JlSW52ZW50b3J5L1NvdXJjZS9UeXBlU2NyaXB0L1N0b3JlSW52ZW50b3J5Q29udHJvbGxlci50cycgLz5cclxuXHJcbigoKSA9PiB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgLy8gVGhpcyBmaWxlIGlzIGN1cnJlbnRseSB1c2VkIGZvciB0aGUgY29tcG9zZXIgdGVhbSBzbyB0aGF0IHdlIGNhbiBkZXBsb3kgYW5kIGhvb2sgaW50b1xyXG4gICAgLy8gb3VyIGNsaWVudC1zaWRlIGNvZGUsIGJ1dCB0aGUgc3RhcnRlciBzaXRlIHRoYXQgc2hpcHMsIHdpbGwgc2hpcCB3aXRoIGFuIEFwcC50c1xyXG4gICAgLy8gdGhhdCB3aWxsIGxvb2sgbGlrZSB0aGlzLlxyXG5cclxuICAgICQoZG9jdW1lbnQpLnJlYWR5KCgpID0+IHtcclxuICAgICAgICB2YXIgY29tcG9zZXJDb25maWd1cmF0aW9uOiBPcmNrZXN0cmEuQ29tcG9zZXIuSUNvbXBvc2VyQ29uZmlndXJhdGlvbiA9IHtcclxuICAgICAgICAgICAgcGx1Z2luczogW1xyXG4gICAgICAgICAgICAgICAgJ0FudGlJRnJhbWVDbGlja0phY2tpbmcnLFxyXG4gICAgICAgICAgICAgICAgJ0NvbXBvc2VyVmFsaWRhdGlvbkxvY2FsaXphdGlvbicsXHJcbiAgICAgICAgICAgICAgICAnSGVscEJ1YmJsZXMnLFxyXG4gICAgICAgICAgICAgICAgJ1N0aWNreUFmZml4JyxcclxuICAgICAgICAgICAgICAgICdTbGlja0Nhcm91c2VsJyxcclxuICAgICAgICAgICAgICAgICdGb2N1c0VsZW1lbnQnLFxyXG4gICAgICAgICAgICAgICAgJ0dvb2dsZUFuYWx5dGljcydcclxuICAgICAgICAgICAgXSxcclxuXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXJzOiBbXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdHZW5lcmFsLkVycm9yQ29udHJvbGxlcicsIGNvbnRyb2xsZXI6IE9yY2tlc3RyYS5Db21wb3Nlci5FcnJvckNvbnRyb2xsZXIgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ0dlbmVyYWwuU2VhcmNoQm94JywgY29udHJvbGxlcjogT3Jja2VzdHJhLkNvbXBvc2VyLlNlYXJjaEJveENvbnRyb2xsZXIgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ0dlbmVyYWwuTGFuZ3VhZ2VTd2l0Y2gnLCBjb250cm9sbGVyOiBPcmNrZXN0cmEuQ29tcG9zZXIuTGFuZ3VhZ2VTd2l0Y2hDb250cm9sbGVyIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnQ2FydC5GdWxsQ2FydCcsIGNvbnRyb2xsZXI6IE9yY2tlc3RyYS5Db21wb3Nlci5GdWxsQ2FydENvbnRyb2xsZXIgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ0NhcnQuT3JkZXJTdW1tYXJ5JywgY29udHJvbGxlcjogT3Jja2VzdHJhLkNvbXBvc2VyLk9yZGVyU3VtbWFyeUNvbnRyb2xsZXIgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ0NhcnQuTWluaUNhcnQnLCBjb250cm9sbGVyOiBPcmNrZXN0cmEuQ29tcG9zZXIuTWluaUNhcnRDb250cm9sbGVyIH0sXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdDYXJ0Lk1pbmlDYXJ0U3VtbWFyeScsIGNvbnRyb2xsZXI6IE9yY2tlc3RyYS5Db21wb3Nlci5NaW5pQ2FydFN1bW1hcnlDb250cm9sbGVyIH0sXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdDYXJ0LkNvdXBvbnMnLCBjb250cm9sbGVyOiBPcmNrZXN0cmEuQ29tcG9zZXIuQ291cG9uQ29udHJvbGxlciB9LFxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnQ2FydC5BZGRUb0NhcnROb3RpZmljYXRpb24nLCBjb250cm9sbGVyOiBPcmNrZXN0cmEuQ29tcG9zZXIuQWRkVG9DYXJ0Tm90aWZpY2F0aW9uQ29udHJvbGxlciB9LFxyXG5cclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ1Byb2R1Y3QuU29ydEJ5U2VhcmNoJywgY29udHJvbGxlcjogT3Jja2VzdHJhLkNvbXBvc2VyLlNvcnRCeVNlYXJjaENvbnRyb2xsZXIgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ1Byb2R1Y3QuRmFjZXRTZWFyY2gnLCBjb250cm9sbGVyOiBPcmNrZXN0cmEuQ29tcG9zZXIuRmFjZXRTZWFyY2hDb250cm9sbGVyIH0sXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdQcm9kdWN0LlByb2R1Y3REZXRhaWwnLCBjb250cm9sbGVyOiBPcmNrZXN0cmEuQ29tcG9zZXIuUHJvZHVjdERldGFpbENvbnRyb2xsZXIgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ1Byb2R1Y3QuUmVsYXRlZFByb2R1Y3RzJywgY29udHJvbGxlcjogT3Jja2VzdHJhLkNvbXBvc2VyLlJlbGF0ZWRQcm9kdWN0Q29udHJvbGxlciB9LFxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnUHJvZHVjdC5TZWFyY2hSZXN1bHRzJywgY29udHJvbGxlcjogT3Jja2VzdHJhLkNvbXBvc2VyLlNlYXJjaFJlc3VsdHNDb250cm9sbGVyIH0sXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdQcm9kdWN0LlNlYXJjaFN1bW1hcnknLCBjb250cm9sbGVyOiBPcmNrZXN0cmEuQ29tcG9zZXIuU2VhcmNoU3VtbWFyeUNvbnRyb2xsZXIgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ1Byb2R1Y3QuUXVpY2tWaWV3JywgY29udHJvbGxlcjogT3Jja2VzdHJhLkNvbXBvc2VyLlF1aWNrVmlld0NvbnRyb2xsZXIgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ1Byb2R1Y3QuU2VsZWN0ZWRTZWFyY2hGYWNldHMnLCBjb250cm9sbGVyOiBPcmNrZXN0cmEuQ29tcG9zZXIuU2VsZWN0ZWRGYWNldFNlYXJjaENvbnRyb2xsZXIgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ1Byb2R1Y3QuUHJvZHVjdFNwZWNpZmljYXRpb25zJywgY29udHJvbGxlcjogT3Jja2VzdHJhLkNvbXBvc2VyLlByb2R1Y3RTcGVjaWZpY2F0aW9uc0NvbnRyb2xsZXIgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ1Byb2R1Y3QuUHJvZHVjdFpvb20nLCBjb250cm9sbGVyOiBPcmNrZXN0cmEuQ29tcG9zZXIuUHJvZHVjdFpvb21Db250cm9sbGVyIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnQ2hlY2tvdXQuR3Vlc3RDdXN0b21lckluZm8nLCBjb250cm9sbGVyOiBPcmNrZXN0cmEuQ29tcG9zZXIuR3Vlc3RDdXN0b21lckluZm9DaGVja291dENvbnRyb2xsZXIgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ0NoZWNrb3V0LlNoaXBwaW5nQWRkcmVzcycsIGNvbnRyb2xsZXI6IE9yY2tlc3RyYS5Db21wb3Nlci5TaGlwcGluZ0FkZHJlc3NDaGVja291dENvbnRyb2xsZXIgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ0NoZWNrb3V0LlNoaXBwaW5nQWRkcmVzc1JlZ2lzdGVyZWQnLCBjb250cm9sbGVyOiBPcmNrZXN0cmEuQ29tcG9zZXIuU2hpcHBpbmdBZGRyZXNzUmVnaXN0ZXJlZENvbnRyb2xsZXIgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ0NoZWNrb3V0LlNoaXBwaW5nTWV0aG9kJywgY29udHJvbGxlcjogT3Jja2VzdHJhLkNvbXBvc2VyLlNoaXBwaW5nTWV0aG9kQ2hlY2tvdXRDb250cm9sbGVyIH0sXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdDaGVja291dC5PcmRlclN1bW1hcnknLCBjb250cm9sbGVyOiBPcmNrZXN0cmEuQ29tcG9zZXIuQ2hlY2tvdXRPcmRlclN1bW1hcnlDb250cm9sbGVyIH0sXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdDaGVja291dC5Db21wbGV0ZU9yZGVyU3VtbWFyeScsIGNvbnRyb2xsZXI6IE9yY2tlc3RyYS5Db21wb3Nlci5Db21wbGV0ZUNoZWNrb3V0T3JkZXJTdW1tYXJ5Q29udHJvbGxlciB9LFxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnQ2hlY2tvdXQuQ2hlY2tvdXRDb21wbGV0ZScsIGNvbnRyb2xsZXI6IE9yY2tlc3RyYS5Db21wb3Nlci5DaGVja291dENvbXBsZXRlQ29udHJvbGxlciB9LFxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnQ2hlY2tvdXQuQ2hlY2tvdXRPcmRlckNvbmZpcm1hdGlvbicsIGNvbnRyb2xsZXI6IE9yY2tlc3RyYS5Db21wb3Nlci5DaGVja291dE9yZGVyQ29uZmlybWF0aW9uQ29udHJvbGxlciB9LFxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnQ2hlY2tvdXQuQmlsbGluZ0FkZHJlc3MnLCBjb250cm9sbGVyOiBPcmNrZXN0cmEuQ29tcG9zZXIuQmlsbGluZ0FkZHJlc3NDaGVja291dENvbnRyb2xsZXIgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ0NoZWNrb3V0LkJpbGxpbmdBZGRyZXNzUmVnaXN0ZXJlZCcsIGNvbnRyb2xsZXI6IE9yY2tlc3RyYS5Db21wb3Nlci5CaWxsaW5nQWRkcmVzc1JlZ2lzdGVyZWRDaGVja291dENvbnRyb2xsZXIgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ0NoZWNrb3V0LlBheW1lbnQnLCBjb250cm9sbGVyOiBPcmNrZXN0cmEuQ29tcG9zZXIuQ2hlY2tvdXRQYXltZW50Q29udHJvbGxlciB9LFxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnQ2hlY2tvdXQuTmF2aWdhdGlvbicsIGNvbnRyb2xsZXI6IE9yY2tlc3RyYS5Db21wb3Nlci5DaGVja291dE5hdmlnYXRpb25Db250cm9sbGVyIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnTXlBY2NvdW50LkFkZHJlc3NMaXN0JywgY29udHJvbGxlcjogT3Jja2VzdHJhLkNvbXBvc2VyLkFkZHJlc3NMaXN0Q29udHJvbGxlciB9LFxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnTXlBY2NvdW50LkNoYW5nZVBhc3N3b3JkJywgY29udHJvbGxlcjogT3Jja2VzdHJhLkNvbXBvc2VyLkNoYW5nZVBhc3N3b3JkQ29udHJvbGxlciB9LFxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnTXlBY2NvdW50LkNyZWF0ZUFjY291bnQnLCBjb250cm9sbGVyOiBPcmNrZXN0cmEuQ29tcG9zZXIuQ3JlYXRlQWNjb3VudENvbnRyb2xsZXIgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ015QWNjb3VudC5FZGl0QWRkcmVzcycsIGNvbnRyb2xsZXI6IE9yY2tlc3RyYS5Db21wb3Nlci5FZGl0QWRkcmVzc0NvbnRyb2xsZXIgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ015QWNjb3VudC5Gb3Jnb3RQYXNzd29yZCcsIGNvbnRyb2xsZXI6IE9yY2tlc3RyYS5Db21wb3Nlci5Gb3Jnb3RQYXNzd29yZENvbnRyb2xsZXIgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ015QWNjb3VudC5BY2NvdW50SGVhZGVyJywgY29udHJvbGxlcjogT3Jja2VzdHJhLkNvbXBvc2VyLkFjY291bnRIZWFkZXJDb250cm9sbGVyIH0sXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdNeUFjY291bnQuVXBkYXRlQWNjb3VudCcsIGNvbnRyb2xsZXI6IE9yY2tlc3RyYS5Db21wb3Nlci5VcGRhdGVBY2NvdW50Q29udHJvbGxlciB9LFxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnTXlBY2NvdW50Lk5ld1Bhc3N3b3JkJywgY29udHJvbGxlcjogT3Jja2VzdHJhLkNvbXBvc2VyLk5ld1Bhc3N3b3JkQ29udHJvbGxlciB9LFxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnTXlBY2NvdW50LlJldHVybmluZ0N1c3RvbWVyJywgY29udHJvbGxlcjogT3Jja2VzdHJhLkNvbXBvc2VyLlJldHVybmluZ0N1c3RvbWVyQ29udHJvbGxlciB9LFxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnTXlBY2NvdW50LlNpZ25JbkhlYWRlcicsIGNvbnRyb2xsZXI6IE9yY2tlc3RyYS5Db21wb3Nlci5TaWduSW5IZWFkZXJDb250cm9sbGVyIH0sXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdNeUFjY291bnQuTXlBY2NvdW50TWVudScsIGNvbnRyb2xsZXI6IE9yY2tlc3RyYS5Db21wb3Nlci5NeUFjY291bnRDb250cm9sbGVyIH0sXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdNeUFjY291bnQuTXlXaXNoTGlzdCcsIGNvbnRyb2xsZXI6IE9yY2tlc3RyYS5Db21wb3Nlci5NeVdpc2hMaXN0Q29udHJvbGxlciB9LFxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnTXlBY2NvdW50LlNoYXJlZFdpc2hMaXN0JywgY29udHJvbGxlcjogT3Jja2VzdHJhLkNvbXBvc2VyLlNoYXJlZFdpc2hMaXN0Q29udHJvbGxlciB9LFxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnTXlBY2NvdW50Lldpc2hMaXN0SW5IZWFkZXInLCBjb250cm9sbGVyOiBPcmNrZXN0cmEuQ29tcG9zZXIuV2lzaExpc3RJbkhlYWRlckNvbnRyb2xsZXIgfSxcclxuXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdPcmRlcnMuQ3VycmVudE9yZGVycycsIGNvbnRyb2xsZXI6IE9yY2tlc3RyYS5Db21wb3Nlci5DdXJyZW50T3JkZXJzQ29udHJvbGxlciB9LFxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnT3JkZXJzLlBhc3RPcmRlcnMnLCBjb250cm9sbGVyOiBPcmNrZXN0cmEuQ29tcG9zZXIuUGFzdE9yZGVyc0NvbnRyb2xsZXIgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ09yZGVycy5PcmRlckRldGFpbHMnLCBjb250cm9sbGVyOiBPcmNrZXN0cmEuQ29tcG9zZXIuT3JkZXJEZXRhaWxzQ29udHJvbGxlciB9LFxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnT3JkZXJzLkZpbmRNeU9yZGVyJywgY29udHJvbGxlcjogT3Jja2VzdHJhLkNvbXBvc2VyLkZpbmRNeU9yZGVyQ29udHJvbGxlciB9LFxyXG5cclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ1N0b3JlLkxvY2F0b3InLCBjb250cm9sbGVyOiBPcmNrZXN0cmEuQ29tcG9zZXIuU3RvcmVMb2NhdG9yQ29udHJvbGxlciB9LFxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnU3RvcmUuRGV0YWlscycsIGNvbnRyb2xsZXI6IE9yY2tlc3RyYS5Db21wb3Nlci5TdG9yZURldGFpbHNDb250cm9sbGVyIH0sXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdTdG9yZS5EaXJlY3RvcnknLCBjb250cm9sbGVyOiBPcmNrZXN0cmEuQ29tcG9zZXIuU3RvcmVzRGlyZWN0b3J5Q29udHJvbGxlciB9LFxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnU3RvcmUuSW52ZW50b3J5JywgY29udHJvbGxlcjogT3Jja2VzdHJhLkNvbXBvc2VyLlN0b3JlSW52ZW50b3J5Q29udHJvbGxlciB9LFxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnUGFnZU5vdEZvdW5kLkFuYWx5dGljcycsIGNvbnRyb2xsZXI6IE9yY2tlc3RyYS5Db21wb3Nlci5QYWdlTm90Rm91bmRBbmFseXRpY3NDb250cm9sbGVyIH1cclxuICAgICAgICAgICAgXVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIE9yY2tlc3RyYS5Db21wb3Nlci5ib290c3RyYXAod2luZG93LCBkb2N1bWVudCwgY29tcG9zZXJDb25maWd1cmF0aW9uKTtcclxuICAgIH0pO1xyXG59KSgpO1xyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4vSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0LnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgLyoqXHJcbiAgICAqIFNpZ25hdHVyZSBmb3IgZXhlY3V0aW5nIGEgZnVuY3Rpb24gdGhhdCByZXF1aXJlcyBhIGNvbnRyb2xsZXIgYWN0aW9uIGNvbnRleHQuXHJcbiAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJQ29udHJvbGxlckFjdGlvblNpZ25hdHVyZSB7XHJcbiAgICAgICAgKG9wdGlvbnM6IENvbXBvc2VyLklDb250cm9sbGVyQWN0aW9uQ29udGV4dCk6IHZvaWQ7XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi9JUGx1Z2luLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgY2xhc3MgQW50aUlGcmFtZUNsaWNrSmFja2luZ1BsdWdpbiBpbXBsZW1lbnRzIElQbHVnaW4ge1xyXG5cclxuICAgICAgICBwdWJsaWMgaW5pdGlhbGl6ZSh3aW5kb3c6IFdpbmRvdywgZG9jdW1lbnQ6IEhUTUxEb2N1bWVudCk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5nZXRPcmlnaW4od2luZG93LnNlbGYpICE9PSB0aGlzLmdldE9yaWdpbih3aW5kb3cudG9wKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdUaGlzIHNpdGUgY2Fubm90IGJlIGhvc3RlZCBpbiBhbiBpRnJhbWUuIFJlZGlyZWN0aW5nLicpO1xyXG4gICAgICAgICAgICAgICAgd2luZG93LnRvcC5sb2NhdGlvbi5ocmVmID0gd2luZG93LnNlbGYubG9jYXRpb24uaHJlZjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXRPcmlnaW4od2luZG93OiBXaW5kb3cpIDogc3RyaW5nIHtcclxuICAgICAgICAgICAgdmFyIG9yaWdpbjogc3RyaW5nO1xyXG5cclxuICAgICAgICAgICAgaWYgKCF3aW5kb3cubG9jYXRpb25bJ29yaWdpbiddKSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb25bJ29yaWdpbiddID0gd2luZG93LmxvY2F0aW9uLnByb3RvY29sICsgJy8vJyArIHdpbmRvdy5sb2NhdGlvbi5ob3N0O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBvcmlnaW4gPSB3aW5kb3cubG9jYXRpb25bJ29yaWdpbiddO1xyXG4gICAgICAgICAgICByZXR1cm4gb3JpZ2luO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uL1ZhbGlkYXRpb24vSVBhcnNsZXlWYWxpZGF0b3IudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uL0NvbXBvc2VyQ29udGV4dC50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi9JUGx1Z2luLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgY2xhc3MgQ29tcG9zZXJWYWxpZGF0aW9uTG9jYWxpemF0aW9uUGx1Z2luIGltcGxlbWVudHMgSVBsdWdpbiB7XHJcbiAgICAgICAgcHVibGljIGluaXRpYWxpemUod2luZG93OiBXaW5kb3csIGRvY3VtZW50OiBIVE1MRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgdmFyIGxvY2FsZTogc3RyaW5nLFxyXG4gICAgICAgICAgICAgICAgcGFybHNleUNvbmZpZyA9ICg8SVBhcnNsZXlWYWxpZGF0b3I+d2luZG93KS5QYXJzbGV5Q29uZmlnLFxyXG4gICAgICAgICAgICAgICAgcGFyc2xleUxvY2FsZU1lc3NhZ2VzID1cclxuICAgICAgICAgICAgICAgICAgICBKU09OLnBhcnNlKCg8YW55Pk9yY2tlc3RyYS5Db21wb3NlcikuVGVtcGxhdGVzWydHbG9iYWxWYWxpZGF0aW9uJ10oKSksXHJcbiAgICAgICAgICAgICAgICBjb21wb3NlckNvbnRleHQgPSBuZXcgQ29tcG9zZXJDb250ZXh0KCk7XHJcblxyXG4gICAgICAgICAgICBsb2NhbGUgPSBjb21wb3NlckNvbnRleHQubGFuZ3VhZ2U7XHJcblxyXG4gICAgICAgICAgICBpZiAoXy5pc0VtcHR5KGxvY2FsZSkpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIGxvY2FsZSBoYXMgbm90IGJlZW4gc2V0Jyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICg8SVBhcnNsZXlWYWxpZGF0b3I+d2luZG93KS5QYXJzbGV5Q29uZmlnID0gKDxJUGFyc2xleVZhbGlkYXRvcj53aW5kb3cpLlBhcnNsZXlDb25maWcgfHwge307XHJcbiAgICAgICAgICAgICg8SVBhcnNsZXlWYWxpZGF0b3I+d2luZG93KS5QYXJzbGV5Q29uZmlnLmkxOG4gPSAoPElQYXJzbGV5VmFsaWRhdG9yPndpbmRvdykuUGFyc2xleUNvbmZpZy5pMThuIHx8IHt9O1xyXG5cclxuICAgICAgICAgICAgKDxJUGFyc2xleVZhbGlkYXRvcj53aW5kb3cpLlBhcnNsZXlDb25maWcuaTE4bltsb2NhbGVdID1cclxuICAgICAgICAgICAgICAgIGpRdWVyeS5leHRlbmQoKDxJUGFyc2xleVZhbGlkYXRvcj53aW5kb3cpLlBhcnNsZXlDb25maWcuaTE4bltsb2NhbGVdIHx8IHt9LCBwYXJzbGV5TG9jYWxlTWVzc2FnZXMpO1xyXG5cclxuICAgICAgICAgICAgLy8gSWYgZmlsZSBpcyBsb2FkZWQgYWZ0ZXIgUGFyc2xleSBtYWluIGZpbGUsIGF1dG8tbG9hZCBsb2NhbGVcclxuICAgICAgICAgICAgaWYgKCg8SVBhcnNsZXlWYWxpZGF0b3I+d2luZG93KS5QYXJzbGV5VmFsaWRhdG9yICE9PSB2b2lkIDApIHtcclxuICAgICAgICAgICAgICAoPElQYXJzbGV5VmFsaWRhdG9yPndpbmRvdykuUGFyc2xleVZhbGlkYXRvci5hZGRDYXRhbG9nKGxvY2FsZSwgKDxJUGFyc2xleVZhbGlkYXRvcj53aW5kb3cpLlBhcnNsZXlDb25maWcuaTE4bltsb2NhbGVdLCB0cnVlKTtcclxuICAgICAgICAgICAgICAoPElQYXJzbGV5VmFsaWRhdG9yPndpbmRvdykuUGFyc2xleVZhbGlkYXRvci5zZXRMb2NhbGUobG9jYWxlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5kZWZpbmVWYWxpZGF0b3JzKCg8SVBhcnNsZXlWYWxpZGF0b3I+d2luZG93KS5QYXJzbGV5VmFsaWRhdG9yKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBkZWZpbmVWYWxpZGF0b3JzKHBhcnNsZXlWYWxpZGF0b3I6IGFueSkge1xyXG4gICAgICAgICAgICB2YXIgcmVnZXg6IFJlZ0V4cCA9ICAvXig/ISgufFxcbikqPFthLXohXFwvP10pKD8hKC58XFxuKSomIykoLnxcXG4pKiQvaTtcclxuXHJcbiAgICAgICAgICAgIHBhcnNsZXlWYWxpZGF0b3IuYWRkVmFsaWRhdG9yKCdhbnRpeHNzJywgKHZhbHVlLCByZXF1aXJlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdmFyIGlzUmVxOiBib29sZWFuO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChfLmlzU3RyaW5nKHJlcXVpcmVtZW50KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlzUmVxID0gKDxzdHJpbmc+cmVxdWlyZW1lbnQpLnRvTG93ZXJDYXNlKCkgPT09ICd0cnVlJztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNSZXEgPSAhIXJlcXVpcmVtZW50O1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBpc1ZhbGlkOiBib29sZWFuID0gIWlzUmVxIHx8IHJlZ2V4LnRlc3QodmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzVmFsaWQ7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy9lbjogJ1RoaXMgZmllbGQgY29udGFpbnMgaW52YWxpZCBjaGFyYWN0ZXJzLicsXHJcbiAgICAgICAgICAgIC8vZnI6ICdDZSBjaGFtcCBjb250aWVudCBkZXMgY2FyYWN0w6hyZXMgaW52YWxpZGVzLidcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi9JUGx1Z2luLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgY2xhc3MgRm9jdXNFbGVtZW50UGx1Z2luIGltcGxlbWVudHMgSVBsdWdpbiB7XHJcbiAgICAgICAgcHVibGljIGluaXRpYWxpemUod2luZG93OiBXaW5kb3csIGRvY3VtZW50OiBIVE1MRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIE9uIGNsaWNrLCBzY3JvbGwgdG8gZmllbGQgYW5kIGZvY3VzIGluIGl0LlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgJCgnYm9keScsIGRvY3VtZW50KS5vbignY2xpY2snLCAnW2RhdGEtZm9jdXMtZWxlbWVudF0nLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gJCh0aGlzKS5kYXRhKCdmb2N1cy1lbGVtZW50Jyk7XHJcbiAgICAgICAgICAgICAgICAkKCdib2R5LCBodG1sJykuc2Nyb2xsVG9wKCQodGFyZ2V0KS5vZmZzZXQoKS50b3AgLSAyMCk7XHJcbiAgICAgICAgICAgICAgICAkKHRhcmdldCkuZm9jdXMoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPScuL0lQbHVnaW4udHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uL0pRdWVyeVBsdWdpbnMvSVBvcE92ZXJKcXVlcnlQbHVnaW4udHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIGV4cG9ydCBjbGFzcyBIZWxwQnViYmxlc1BsdWdpbiBpbXBsZW1lbnRzIElQbHVnaW4ge1xyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKHdpbmRvdzogV2luZG93LCBkb2N1bWVudDogSFRNTERvY3VtZW50KSB7XHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBXaWxsIGNhbGN1bGF0ZSBpZiB0aGVyZSBpcyBlbm91Z2ggc3BhY2UgZm9yIHRoZSBwb3BvdmVyIG9uIHRoZSByaWdodFxyXG4gICAgICAgICAgICAgKiBlbHNlIHdpbGwgcHV0IGl0IGluIHRoZSBib3R0b20uXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBwb3BvdmVyUGxhY2VtZW50KHBvcG92ZXIsIHRyaWdnZXJpbmdFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdHJpZ2dlcmluZ0VsZW1lbnRXaWR0aCA9ICQodHJpZ2dlcmluZ0VsZW1lbnQpLm91dGVyV2lkdGgoKTtcclxuICAgICAgICAgICAgICAgIHZhciBwbGFjZW1lbnQgPSAnYm90dG9tJztcclxuXHJcbiAgICAgICAgICAgICAgICAvLyB3ZSB3aWxsIGNvbnNpZGVyIHRoYXQgaWYgdGhlIHRycmlnZXJpbmcgZWxlbWVudCBjYW4ndCBiZSBkb3VibGVkXHJcbiAgICAgICAgICAgICAgICAvLyB3ZSB3b24ndCBoYXZlIGVub3VnaCBzcGFjZSB0byBkaXNwbGF5IHRoZSBwb3BvdmVyIG9uIHRoZSByaWdodFxyXG4gICAgICAgICAgICAgICAgaWYgKCh3aW5kb3cuaW5uZXJXaWR0aCAtIHRyaWdnZXJpbmdFbGVtZW50V2lkdGgpID4gdHJpZ2dlcmluZ0VsZW1lbnRXaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudCA9ICdyaWdodCc7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBsYWNlbWVudDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gIEFzIGRpc2N1c3NlZCB3aXRoIFNhbSwgdGhpcyBpcyBpbiB0aGUgYXBwLnRzIGZvciBub3cuIEJlY2F1c2Ugd2UgZG9uJ3QgaGF2ZSBhIHN0cmF0ZWd5XHJcbiAgICAgICAgICAgIC8vICB5ZXQgZm9yIGdlbmVyaWMgcHJlc2VudGF0aW9uL3BsdWdpbnMgamF2YXNjcmlwdC5cclxuICAgICAgICAgICAgLy8gIFBvcCBvdmVyIGluaXRpYWxpemF0aW9uLlxyXG4gICAgICAgICAgICAoPE9yY2tlc3RyYS5Db21wb3Nlci5JUG9wT3ZlckpxdWVyeVBsdWdpbj4kKCdib2R5JykpLnBvcG92ZXIoe1xyXG4gICAgICAgICAgICAgICAgaHRtbDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHBsYWNlbWVudDogcG9wb3ZlclBsYWNlbWVudCxcclxuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnW2RhdGEtdG9nZ2xlPXBvcG92ZXJdJyxcclxuICAgICAgICAgICAgICAgIHRyaWdnZXI6ICdmb2N1cycsXHJcbiAgICAgICAgICAgICAgICBjb250ZW50OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJCgnI3BvcG92ZXItY29udGVudCcpLmh0bWwoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogTmVlZHMgdGhlIHNlbGVjdCBibG9jayBvZiBhIHNhbWUgZ3JvdXAgdG8gaGF2ZSBkYXRhLXBhcmVudCBkZWZpbmVkXHJcbiAgICAgICAgICAgICAqIE9SIHRoYXQgdGhleSBiZSBpbiB0aGUgc2FtZSBmb3JtLlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgJCgnYm9keScpLm9uKCdjaGFuZ2UnLCAnLnNlbGVjdC1ibG9jaycsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICB2YXIgaW5wdXQgPSAkKHRoaXMpLmZpbmQoJy5pbnB1dCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHR5cGUgPSBpbnB1dC5hdHRyKCd0eXBlJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IGlucHV0LmF0dHIoJ25hbWUnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBpZiBjaGVja2JveCBjaGVjayBjdXJyZW50IHN0YXRlIG9mIHByb3BcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlID09PSAnY2hlY2tib3gnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0LnByb3AoJ2NoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdyYWRpbycpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcGFyZW50U2VsZWN0b3IgPSAkKHRoaXMpLmRhdGEoJ3BhcmVudCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXJlbnRFbGVtZW50O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAocGFyZW50U2VsZWN0b3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50RWxlbWVudCA9IGlucHV0LmNsb3Nlc3QocGFyZW50U2VsZWN0b3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIG5vIHBhcmVudCBzcGVjaWZpZWQsIGRlZmF1bHQgdG8gZm9ybSBhbmQgZmFsbGJhY2sgdG8gYm9keVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRFbGVtZW50ID0gaW5wdXQuY2xvc2VzdCgnZm9ybScpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmVudEVsZW1lbnQubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRFbGVtZW50ID0gJCgnYm9keScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnRFbGVtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5maW5kKCcuc2VsZWN0LWJsb2NrOmhhcyg6cmFkaW9bbmFtZT1cIicgKyBuYW1lICsgJ1wiXSknKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4vSVBsdWdpbi50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgZXhwb3J0IGNsYXNzIFN0aWNreUFmZml4UGx1Z2luIGltcGxlbWVudHMgSVBsdWdpbiB7XHJcbiAgICAgICAgcHVibGljIGluaXRpYWxpemUod2luZG93OiBXaW5kb3csIGRvY3VtZW50OiBIVE1MRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgJCgnW2RhdGEtc3RpY2t5LXRvcF0nKS5lYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHN0aWNreU9mZnNldCA9ICQodGhpcykuZGF0YSgnc3RpY2t5LXRvcC1vZmZzZXQnKTtcclxuICAgICAgICAgICAgICAgIHN0aWNreU9mZnNldCA9IHN0aWNreU9mZnNldCA/IHN0aWNreU9mZnNldCA6IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hZmZpeCh7XHJcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogZnVuY3Rpb24oZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICQoZWxlbWVudCkucGFyZW50KCkub2Zmc2V0KCkudG9wIC0gc3RpY2t5T2Zmc2V0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
