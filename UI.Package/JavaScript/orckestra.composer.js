



/// <reference path='./IListener.ts' />





/// <reference path='./ISubscription.ts' />
/// <reference path='./IListener.ts' />
/// <reference path='./IListenerQueue.ts' />
/// <reference path='./IEventInformation.ts' />
/// <reference path='../Generics/Collections/IHashTable.ts' />

/// <reference path='./ISubscription.ts' />
/// <reference path='./IListener.ts' />
/// <reference path='./IListenerQueue.ts' />
/// <reference path='./IEventInformation.ts' />
/// <reference path='./IEventHub.ts' />
/// <reference path='../Generics/Collections/IHashTable.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        /**
         * An event hub for subscribing to and publishing events.
        */
        var EventHub = (function () {
            function EventHub() {
                this._events = {};
                if (EventHub._instance) {
                    throw new Error('Error: Instantiation failed: Use EventHub.instance() instead of new.');
                }
                EventHub._instance = this;
            }
            EventHub.instance = function () {
                return EventHub._instance;
            };
            /**
             * Subscribe to an event.
             *
             * @param eventName The name of the event to subscribe to.
             * @param listener The listener subscribing to the event.
            */
            EventHub.prototype.subscribe = function (eventName, listener) {
                var _this = this;
                var index;
                if (!this._events.hasOwnProperty(eventName)) {
                    this._events[eventName] = { queue: [] };
                }
                index = this._events[eventName].queue.push(listener) - 1;
                return (function (topic, index) {
                    return {
                        remove: function () {
                            delete _this._events[eventName].queue[index];
                        }
                    };
                })(eventName, index);
            };
            /**
             * Publishes an event.
             *
             * @param eventName The name of the event to subscribe to.
             * @param eventInformation The information to provide all subscribers when the event is published.
            */
            EventHub.prototype.publish = function (eventName, eventInformation) {
                if (!this._events.hasOwnProperty(eventName)) {
                    return;
                }
                this._events[eventName].queue.forEach(function (listener) {
                    if (listener !== void 0) {
                        listener(eventInformation);
                    }
                });
            };
            EventHub._instance = new EventHub();
            return EventHub;
        }());
        Composer.EventHub = EventHub;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='./IAnalyticsProduct.ts' />
///<reference path='./IAnalyticsSearchResults.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='./IAnalyticsCoupon.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));





///<reference path='../../Typings/tsd.d.ts' />
///<reference path='../System/IDisposable.ts' />

///<reference path='../../Typings/tsd.d.ts' />

///<reference path='../../Typings/tsd.d.ts' />

/// <reference path="../../typings/tsd.d.ts" />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../Generics/Collections/IHashTable.ts' />

///<reference path='../../Typings/tsd.d.ts' />



///<reference path='../../Typings/tsd.d.ts' />

///<reference path='../../Typings/tsd.d.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var UIBusyHandle = (function () {
            /*
             * Start the busy state, to be called before the async call
             * @param loadingIndicatorContext JQuery element of what the handler will remove/add class "hidden".
             * @param containerContext JQuery element containing inputs that will be disabled while busy.
             * @param msDelay Number of ms before activating async. If done is called before the end
             *        of the delay, the loadingIndicatorContext will not be shown.
             */
            function UIBusyHandle(loadingIndicatorContext, containerContext, msDelay) {
                this.loadingIndicatorContext = loadingIndicatorContext;
                this.containerContext = containerContext;
                this.startBusy(msDelay);
            }
            /*
             * Ends the busy state, to be called in the then of the async call
             */
            UIBusyHandle.prototype.done = function () {
                this.endBusy();
            };
            UIBusyHandle.prototype.startBusy = function (msDelay) {
                var _this = this;
                this.timeoutHandle = setTimeout(function () {
                    _this.containerContext.find(':input:enabled').addClass('async-busy').prop('disabled', true);
                    _this.loadingIndicatorContext.removeClass('hidden');
                }, msDelay);
            };
            UIBusyHandle.prototype.endBusy = function () {
                clearTimeout(this.timeoutHandle);
                this.loadingIndicatorContext.addClass('hidden');
                this.containerContext.find(':input.async-busy').removeClass('async-busy').prop('disabled', false);
            };
            return UIBusyHandle;
        }());
        Composer.UIBusyHandle = UIBusyHandle;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../Typings/tsd.d.ts' />



/// <reference path='./Mvc/IControllerConfiguration.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        ;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path="../../typings/tsd.d.ts" />
/// <reference path='../Generics/Collections/IHashTable.ts' />
/// <reference path='../Events/IEventHub.ts' />
/// <reference path='./IController.ts' />
/// <reference path='./IControllerContext.ts' />
/// <reference path='./IRegisterActionOptions.ts' />
/// <reference path='./IControllerActionContext.ts' />
///<reference path='../Templating/IComposerTemplates.ts' />
///<reference path='../Templating/IComposerTemplates.ts' />
/// <reference path='../JQueryPlugins/IParsleyJqueryPlugin.ts' />
/// <reference path='../Validation/IParsley.ts' />
/// <reference path='../UI/UIBusyParam.ts' />
/// <reference path='../UI/UIBusyHandle.ts' />
/// <reference path='../IComposerContext.ts' />
/// <reference path='../IComposerConfiguration.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        /**
        * Provides methods that respond to client-side requests.
        */
        var Controller = (function () {
            function Controller(context, eventHub, composerContext, composerConfiguration) {
                this.context = context;
                this.eventHub = eventHub;
                this.composerContext = composerContext;
                this.composerConfiguration = composerConfiguration;
                this._composerEventPostfix = '.composer';
                this._defaultEventsToMonitor = ['click', 'mouseover', 'mouseout', 'contextmenu', 'submit', 'focus', 'blur', 'change']; // 'dblclick'
                if (_.isEmpty(context)) {
                    throw new Error('context is required');
                }
                if (_.isEmpty(eventHub)) {
                    throw new Error('eventHub is required');
                }
                if (_.isEmpty(composerContext)) {
                    throw new Error('composerContext is required');
                }
            }
            Controller.registerAction = function (classToRegisterActionOn, registerActionOptions) {
                var classPrototype = classToRegisterActionOn.prototype;
                if (!Controller.prototype.isPrototypeOf(classPrototype)) {
                    throw new Error('The class you are trying to register the action on is not a controller.');
                }
                if (_.isFunction(registerActionOptions.actionDelegate)) {
                    if (!classPrototype.hasOwnProperty(registerActionOptions.actionName) ||
                        registerActionOptions.overwrite &&
                            classPrototype.hasOwnProperty(registerActionOptions.actionName) &&
                            _.isFunction(classPrototype[registerActionOptions.actionName])) {
                        classPrototype[registerActionOptions.actionName] = registerActionOptions.actionDelegate;
                    }
                    else {
                        throw new Error("You cannot overwrite the action named \"" + registerActionOptions.actionName + "\" without specifying overwrite = true in the registerActionOptions.");
                    }
                }
                else {
                    throw new Error("Unable to register action " + registerActionOptions.actionName + ". The action delegate is not a function.");
                }
            };
            Controller.prototype.initialize = function () {
                if (_.isEmpty(this.eventsToMonitor)) {
                    this.eventsToMonitor = this._defaultEventsToMonitor;
                }
                this.registerDomEvents();
            };
            Controller.prototype.dispose = function () {
                this.unregisterDomEvents();
            };
            Controller.prototype.asyncBusy = function (options) {
                if (options === void 0) { options = {}; }
                options = _.merge({
                    elementContext: this.context.container,
                    containerContext: this.context.container,
                    loadingIndicatorSelector: '.loading-indicator',
                    msDelay: 0
                }, options);
                var loadingIndicatorContext = options.elementContext.find(options.loadingIndicatorSelector);
                var handle = new Composer.UIBusyHandle(loadingIndicatorContext, options.containerContext, options.msDelay);
                return handle;
            };
            /*
             * Prevents a form from submitting.
             * @param context A controller action context.
             */
            Controller.prototype.preventFormSubmit = function (context) {
                context.event.preventDefault();
            };
            Controller.prototype.render = function (templateId, viewModel, parentSelector) {
                var _this = this;
                var container = this.context.container;
                if (!_.isEmpty(parentSelector)) {
                    container = this.context.container.find(parentSelector);
                }
                var elements = container.find("[data-templateid=\"" + templateId + "\"]");
                if (_.isEmpty(elements)) {
                    console.warn("Could not find the template '" + templateId + "' inside its container.", container);
                }
                elements.each(function (index, item) {
                    var renderedTemplate = _this.getRenderedTemplateContents(templateId, viewModel);
                    if (renderedTemplate !== null) {
                        item.outerHTML = renderedTemplate;
                    }
                });
            };
            Controller.prototype.getRenderedTemplateContents = function (templateId, viewModel) {
                var template = Orckestra.Composer.Templates[templateId];
                if (!_.isFunction(template)) {
                    console.error("Template '" + templateId + "' not found in compiled templates.");
                    return null;
                }
                try {
                    return template(viewModel);
                }
                catch (error) {
                    // catch handlebars rendering errors mostly
                    console.error(error.name + ": " + error.message + " in template '" + templateId + "'.", viewModel);
                }
            };
            Controller.prototype.registerFormsForValidation = function (context, customOptions) {
                if (customOptions === void 0) { customOptions = {}; }
                var formValidators = [];
                var options = {
                    trigger: 'focusout change',
                    focus: 'first',
                    errorTemplate: '<li></li>',
                    classHandler: function (fieldInstance) {
                        var handleSelector = fieldInstance.$element.data('parsleyClassHandlerSelector');
                        // returning undefined will make parsley use the default classHandler
                        if (_.isEmpty(handleSelector)) {
                            return undefined;
                        }
                        var classHandler = fieldInstance.$element.closest(handleSelector);
                        return classHandler;
                    }
                };
                _.assign(options, customOptions);
                context.each(function (index, element) {
                    formValidators.push($(element).parsley(options));
                });
                if (customOptions.serverValidationContainer) {
                    this.hideServerValidationMessageOnClientValidation(formValidators, customOptions.serverValidationContainer);
                }
                return formValidators;
            };
            /**
             * Hide any messages from previous server validation
             * when the new form is used to prevent mixing up
             * client side validation message with server side
             * messages.
             *
             * @param formValidators all the parlsey forms to manage
             * @param serverValidationContainer the jQuery selector to find messages to empty
             */
            Controller.prototype.hideServerValidationMessageOnClientValidation = function (formValidators, serverValidationContainer) {
                _.each(formValidators, function (parsley) {
                    parsley.subscribe('parsley:field:validate', function () {
                        parsley.$element.find(serverValidationContainer).empty();
                        _.defer(function () { parsley.unsubscribe('parsley:field:validate'); });
                    });
                });
            };
            Controller.prototype.registerDomEvents = function () {
                var _this = this;
                var parseAction = this.parseAction.bind(this);
                this._unregister = function () {
                    _this.context.container.off(_this._composerEventPostfix, parseAction);
                };
                this.eventsToMonitor.forEach(function (item) {
                    _this.context.container.on("" + item + _this._composerEventPostfix, parseAction);
                });
            };
            Controller.prototype.unregisterDomEvents = function () {
                if (this._unregister !== void 0) {
                    this._unregister();
                }
            };
            Controller.prototype.parseAction = function (e) {
                this.applyControllerAction($(e.target), e);
            };
            Controller.prototype.applyControllerAction = function (context, e) {
                var controllerActions, eventAttribute = "oc-" + e.type, rawActions = context.data(eventAttribute);
                if (_.isEmpty(rawActions)) {
                    if (context.length > 0 && context[0] !== this.context.container[0]) {
                        this.applyControllerAction(context.parent(), e);
                    }
                    return;
                }
                controllerActions = rawActions.replace(/\s+/g, '').split(',');
                this.applyControllerActions(context, e, controllerActions);
            };
            Controller.prototype.applyControllerActions = function (context, e, controllerActions) {
                var _this = this;
                controllerActions.forEach(function (controllerAction) {
                    var controllerActionContext;
                    if (_.isFunction(_this[controllerAction])) {
                        controllerActionContext = {
                            elementContext: context,
                            event: e
                        };
                        _this[controllerAction].apply(_this, [controllerActionContext]);
                    }
                });
            };
            return Controller;
        }());
        Composer.Controller = Controller;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../Typings/tsd.d.ts' />

///<reference path='../../../Typings/tsd.d.ts' />

///<reference path='../../../Typings/tsd.d.ts' />
///<reference path='../Controller.ts' />
///<reference path='../ComposerClient.ts' />
///<reference path='../IControllerActionContext.ts' />
///<reference path='../../Events/IEventInformation.ts' />
///<reference path='ILocalizationProvider.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var LocalizationProvider = (function () {
            function LocalizationProvider() {
                this._localizationTree = {};
                if (LocalizationProvider._instance) {
                    throw new Error('Error: Instantiation failed: Use LocalizationProvider.instance() instead of new.');
                }
                LocalizationProvider._instance = this;
            }
            LocalizationProvider.instance = function () {
                return LocalizationProvider._instance;
            };
            /**
             * Boostrap the localization.
             *
             * This call is responsibly for refreshing all localization
             * to the current page culture
             */
            LocalizationProvider.prototype.initialize = function (composerContext) {
                this._composerContext = composerContext;
                var provider = this;
                var language = this._composerContext.language;
                return Composer.ComposerClient.get('/api/localization/' + language)
                    .then(function (result) {
                    var tree = result;
                    provider._localizationTree = tree;
                });
            };
            /**
             * Get a  localized string
             *
             * @param categoryName The category used to bundle this localization
             * @param keyName The exact key to localize
             * @return the localizedString or null if none found
            */
            LocalizationProvider.prototype.getLocalizedString = function (categoryName, keyName) {
                categoryName = (categoryName || '').toLowerCase();
                var tree = (this._localizationTree || {});
                var categories = (tree.LocalizedCategories || {});
                var category = (categories[categoryName] || {});
                var values = (category.LocalizedValues || {});
                var value = values[keyName];
                return value;
            };
            /*
             * Note: not really protected, this is a Typescript scoped method
             * called from the javascript scoped handlebars helper.
             */
            LocalizationProvider.prototype.handleBarsHelper_localize = function (categoryName, keyName) {
                var value = this.getLocalizedString(categoryName, keyName);
                if (_.isUndefined(value)) {
                    value = '[' + categoryName + '.' + keyName + ']';
                }
                return value;
            };
            /*
             * Note: not really protected, this is a Typescript scoped method
             * called from the javascript scoped handlebars helper.
             */
            LocalizationProvider.prototype.handleBarsHelper_localizeFormat = function (categoryName, keyName, options) {
                var value;
                var format = this.getLocalizedString(categoryName, keyName);
                if (_.isUndefined(format)) {
                    value = '[' + categoryName + '.' + keyName + ']';
                }
                else {
                    value = this.stringFormat(format, options);
                }
                return value;
            };
            /*
             * Note: not really protected, this is a Typescript scoped method
             * called from the javascript scoped handlebars helper.
             */
            LocalizationProvider.prototype.handleBarsHelper_isLocalized = function (categoryName, keyName) {
                var value = this.getLocalizedString(categoryName, keyName);
                if (_.isEmpty(value) || _.isUndefined(value)) {
                    return false;
                }
                return true;
            };
            /*
             * Substitute to String.Format in C#
             * This is a limited version to support numeric placeholders {0} without formatting
             */
            LocalizationProvider.prototype.stringFormat = function (format, options) {
                return format.replace(/\{\s*([^}\s]+)\s*\}/g, function (m, p1, offset, string) {
                    return options[p1] !== void 0 ? options[p1] : p1;
                });
            };
            LocalizationProvider._instance = new LocalizationProvider();
            return LocalizationProvider;
        }());
        Composer.LocalizationProvider = LocalizationProvider;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../Typings/tsd.d.ts' />
///<reference path='./Localization/ILocalizationProvider.ts' />
///<reference path='./Localization/LocalizationProvider.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var ComposerClient = (function () {
            function ComposerClient() {
            }
            ComposerClient.get = function (url, data) {
                return this.sendRequest('GET', url, data);
            };
            ComposerClient.post = function (url, data) {
                return this.sendRequest('POST', url, data);
            };
            ComposerClient.put = function (url, data) {
                return this.sendRequest('PUT', url, data);
            };
            ComposerClient.remove = function (url, data) {
                return this.sendRequest('DELETE', url, data);
            };
            ComposerClient.sendRequest = function (method, url, data) {
                var _this = this;
                var settings = {
                    contentType: 'application/json',
                    dataType: 'json',
                    data: data ? JSON.stringify(data) : null,
                    method: method,
                    url: url,
                    headers: {
                        'Accept-Language': this.getPageCulture()
                    }
                };
                return Q($.ajax(settings)).fail(function (reason) { return _this.onRequestRejected(reason); });
            };
            ComposerClient.getPageCulture = function () {
                var culture = $('html').attr('lang');
                if (!culture) {
                    throw new Error('No lang attribute was found on the <html> element. Please make sure it is included.');
                }
                return culture;
            };
            ComposerClient.onRequestRejected = function (reason) {
                if (reason.readyState === 0) {
                    throw { Errors: [{ LocalizedErrorMessage: this.getAjaxFailedErrorMessage() }] };
                }
                if (reason.readyState === 4 && reason.status === 205) {
                    console.log('Page must be reloaded.');
                    var redirectUrl = this.getReloadUrl();
                    window.location.href = redirectUrl;
                }
                if (reason.readyState === 4 && reason.status === 401) {
                    throw { Errors: [{ LocalizedErrorMessage: this.getUnauthorizedErrorMessage() }] };
                }
                if (reason.readyState === 4 && reason.status === 500 && reason.responseJSON !== null) {
                    throw { Errors: reason.responseJSON.Errors };
                }
                throw reason;
            };
            ComposerClient.getReloadUrl = function () {
                var rawQueryString = window.location.search;
                var value = 'session=expired';
                if (this.doesUrlContainQueryString(rawQueryString, value)) {
                    return window.location.href;
                }
                var splitter = '&';
                if (_.isEmpty(rawQueryString)) {
                    splitter = '/?';
                }
                var qs = "" + rawQueryString + splitter + value;
                var urls = window.location.href.split('?', 2);
                var url = "" + urls[0] + qs;
                return url;
            };
            ComposerClient.doesUrlContainQueryString = function (url, value) {
                var regex = new RegExp('(\\?|\\&)' + value, 'i');
                return regex.test(url);
            };
            ComposerClient.getAjaxFailedErrorMessage = function () {
                return Composer.LocalizationProvider.instance().getLocalizedString('General', 'L_ErrorAjaxFailed');
            };
            ComposerClient.getUnauthorizedErrorMessage = function () {
                return Composer.LocalizationProvider.instance().getLocalizedString('General', 'L_ErrorUnauthorized');
            };
            return ComposerClient;
        }());
        Composer.ComposerClient = ComposerClient;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Mvc/ComposerClient.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Events/EventHub.ts' />
///<reference path='IMembershipRepository.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var MembershipRepository = (function () {
            function MembershipRepository() {
            }
            /**
            * Attempt to Log In using Composer API.
            * @param
            */
            MembershipRepository.prototype.login = function (formData, returnUrl) {
                var data = _.extend({ ReturnUrl: returnUrl }, formData);
                return Composer.ComposerClient.post('/api/membership/login', data);
            };
            /**
            * Logout using Composer API.
            * @param
            */
            MembershipRepository.prototype.logout = function (returnUrl, preserveCustomerInfo) {
                if (returnUrl === void 0) { returnUrl = ''; }
                if (preserveCustomerInfo === void 0) { preserveCustomerInfo = false; }
                var data = {
                    ReturnUrl: returnUrl,
                    PreserveCustomerInfo: preserveCustomerInfo
                };
                return Composer.ComposerClient.post('/api/membership/logout', data);
            };
            /**
            * Attempt to register using Composer API.
            * @param
            */
            MembershipRepository.prototype.register = function (formData, returnUrl) {
                var data = _.extend({ ReturnUrl: returnUrl }, formData);
                return Composer.ComposerClient.post('/api/membership/register', data);
            };
            /**
            * Attempt to trigger the forgot password email using Composer API.
            * @param
            */
            MembershipRepository.prototype.forgotPassword = function (formData) {
                var data = _.extend({}, formData);
                return Composer.ComposerClient.post('/api/membership/forgotpassword', data);
            };
            /**
            * Attempt to reset password for the Customer identified by the ticket using Composer API.
            * @param
            */
            MembershipRepository.prototype.resetPassword = function (formData, ticket, returnUrl) {
                var data = _.extend({ ReturnUrl: returnUrl, ticket: ticket }, formData);
                return Composer.ComposerClient.post('/api/membership/resetpassword', data);
            };
            /**
            * Attempt to change the password for the connected Customer using Composer API.
            * @param
            */
            MembershipRepository.prototype.changePassword = function (formData, returnUrl) {
                var data = _.extend({ ReturnUrl: returnUrl }, formData);
                return Composer.ComposerClient.post('/api/membership/changepassword', data);
            };
            /**
             * If the current user is authenticated or not
             */
            MembershipRepository.prototype.isAuthenticated = function () {
                return Composer.ComposerClient.get('/api/membership/isAuthenticated');
            };
            return MembershipRepository;
        }());
        Composer.MembershipRepository = MembershipRepository;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Repositories/MembershipRepository.ts' />
///<reference path='IMembershipService.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var MembershipService = (function () {
            function MembershipService(membershipRepository) {
                if (!membershipRepository) {
                    throw new Error('Error: membershipRepository is required');
                }
                this.membershipRepository = membershipRepository;
            }
            /**
            * Attempt to Log In using Composer API.
            * @param
            */
            MembershipService.prototype.login = function (formData, returnUrl) {
                return this.membershipRepository.login(formData, returnUrl);
            };
            /**
            * Logout using Composer API.
            * @param
            */
            MembershipService.prototype.logout = function (returnUrl, preserveCustomerInfo) {
                if (returnUrl === void 0) { returnUrl = ''; }
                if (preserveCustomerInfo === void 0) { preserveCustomerInfo = false; }
                return this.membershipRepository.logout(returnUrl, preserveCustomerInfo);
            };
            /**
            * Attempt to register using Composer API.
            * @param
            */
            MembershipService.prototype.register = function (formData, returnUrl) {
                return this.membershipRepository.register(formData, returnUrl);
            };
            /**
            * Attempt to trigger the forgot password email using Composer API.
            * @param
            */
            MembershipService.prototype.forgotPassword = function (formData) {
                return this.membershipRepository.forgotPassword(formData);
            };
            /**
            * Attempt to reset password for the Customer identified by the ticket using Composer API.
            * @param
            */
            MembershipService.prototype.resetPassword = function (formData, ticket, returnUrl) {
                return this.membershipRepository.resetPassword(formData, ticket, returnUrl);
            };
            /**
            * Attempt to change the password for the connected Customer using Composer API.
            * @param
            */
            MembershipService.prototype.changePassword = function (formData, returnUrl) {
                return this.membershipRepository.changePassword(formData, returnUrl);
            };
            /**
             * If the current user is authenticated or not
             */
            MembershipService.prototype.isAuthenticated = function () {
                var _this = this;
                if (_.isUndefined(this.memoizeIsAuthenticated)) {
                    this.memoizeIsAuthenticated = _.memoize(function (arg) { return _this.isAuthenticatedImpl(); });
                }
                return this.memoizeIsAuthenticated();
            };
            /**
             * If the current user is authenticated or not
             */
            MembershipService.prototype.isAuthenticatedImpl = function () {
                return this.membershipRepository.isAuthenticated();
            };
            return MembershipService;
        }());
        Composer.MembershipService = MembershipService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/jqueryPlugins/ISerializeObjectJqueryPlugin.ts' />
///<reference path='../../../Common/Source/Typescript/MembershipService.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        (function (MyAccountEvents) {
            MyAccountEvents[MyAccountEvents["AccountCreated"] = 0] = "AccountCreated";
            MyAccountEvents[MyAccountEvents["AccountUpdated"] = 1] = "AccountUpdated";
            MyAccountEvents[MyAccountEvents["AddressCreated"] = 2] = "AddressCreated";
            MyAccountEvents[MyAccountEvents["AddressUpdated"] = 3] = "AddressUpdated";
            MyAccountEvents[MyAccountEvents["AddressDeleted"] = 4] = "AddressDeleted";
            MyAccountEvents[MyAccountEvents["LoggedIn"] = 5] = "LoggedIn";
            MyAccountEvents[MyAccountEvents["LoggedOut"] = 6] = "LoggedOut";
            MyAccountEvents[MyAccountEvents["PasswordChanged"] = 7] = "PasswordChanged";
            MyAccountEvents[MyAccountEvents["ForgotPasswordInstructionSent"] = 8] = "ForgotPasswordInstructionSent";
        })(Composer.MyAccountEvents || (Composer.MyAccountEvents = {}));
        var MyAccountEvents = Composer.MyAccountEvents;
        ;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
/// <reference path='../../../../Composer.UI\Source\Typescript\Events\EventHub.ts' />
/// <reference path='./IAnalyticsPlugin.ts' />
/// <reference path='./IAnalyticsOrder.ts' />
/// <reference path='./IAnalyticsTransaction.ts' />
/// <reference path='./IAnalyticsSearchFilters.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Plugins/IPlugin.ts' />
/// <reference path='../../../../Composer.MyAccount.UI/Common/Source/Typescript/MyAccountEvents.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var AnalyticsPlugin = (function () {
            function AnalyticsPlugin() {
            }
            AnalyticsPlugin.prototype.initialize = function () {
                this.useVariantIdWhenPossible = true;
                this.eventHub = Composer.EventHub.instance();
                this.cacheProvider = Composer.CacheProvider.instance();
                this.registerSubscriptions();
            };
            AnalyticsPlugin.setCheckoutOrigin = function (checkoutOrigin) {
                Composer.CacheProvider.instance().sessionStorage.setItem('analytics.checkoutOrigin', checkoutOrigin);
            };
            AnalyticsPlugin.getCheckoutOrigin = function () {
                return Composer.CacheProvider.instance().sessionStorage.getItem('analytics.checkoutOrigin');
            };
            /**
             * Binds all the events for Analytics
             */
            AnalyticsPlugin.prototype.registerSubscriptions = function () {
                var _this = this;
                this.eventHub.subscribe('lineItemAdding', function (eventInfo) {
                    _this.onLineItemAdding(eventInfo);
                });
                this.eventHub.subscribe('lineItemRemoving', function (eventInfo) {
                    _this.onLineItemRemoving(eventInfo);
                });
                this.eventHub.subscribe('productDetailsRendered', function (eventInfo) {
                    _this.onProductDetailsRendered(eventInfo);
                });
                this.eventHub.subscribe('checkoutStepRendered', function (eventInfo) {
                    _this.onCheckoutStepRendered(eventInfo);
                });
                this.eventHub.subscribe('checkoutNavigationRendered', function (eventInfo) {
                    _this.onCheckoutNavigationRendered(eventInfo);
                });
                this.eventHub.subscribe('CheckoutConfirmation', function (eventInfo) {
                    _this.onCheckoutCompleted(eventInfo);
                });
                this.eventHub.subscribe('searchResultRendered', function (eventInfo) {
                    _this.onSearchResultRendered(eventInfo);
                });
                this.eventHub.subscribe('relatedProductsLoaded', function (eventInfo) {
                    _this.onRelatedProductsLoaded(eventInfo);
                });
                this.eventHub.subscribe('productClick', function (eventInfo) {
                    _this.onProductClick(eventInfo);
                });
                this.eventHub.subscribe('pageNotFound', function (eventInfo) {
                    _this.onPageNotFound(eventInfo);
                });
                this.eventHub.subscribe('wishListLineItemAdding', function (eventInfo) {
                    _this.onWishListLineItemAdding(eventInfo);
                });
                this.eventHub.subscribe('wishListLineItemAddingToCart', function (eventInfo) {
                    _this.onLineItemAdding(eventInfo);
                });
                this.eventHub.subscribe('wishListCopyingShareUrl', function (eventInfo) {
                    _this.onWishListCopingShareUrl(eventInfo);
                });
                this.eventHub.subscribe(Composer.MyAccountEvents[Composer.MyAccountEvents.LoggedIn], function (eventInfo) {
                    _this.onUserLoggedIn(eventInfo);
                });
                this.eventHub.subscribe(Composer.MyAccountEvents[Composer.MyAccountEvents.AccountCreated], function (eventInfo) {
                    _this.onUserCreated(eventInfo);
                });
                this.eventHub.subscribe(Composer.MyAccountEvents[Composer.MyAccountEvents.ForgotPasswordInstructionSent], function (eventInfo) {
                    _this.onRecoverPassword(eventInfo);
                });
                this.eventHub.subscribe('noResultsFound', function (eventInfo) {
                    _this.onNoResultsFound(eventInfo);
                });
                this.eventHub.subscribe('searchTermCorrected', function (eventInfo) {
                    _this.onSearchTermCorrected(eventInfo);
                });
                this.eventHub.subscribe('singleCategoryAdded', function (eventInfo) {
                    _this.onSingleFacetChanged(eventInfo);
                });
                this.eventHub.subscribe('singleFacetsChanged', function (eventInfo) {
                    _this.onSingleFacetChanged(eventInfo);
                });
                this.eventHub.subscribe('multiFacetChanged', function (eventInfo) {
                    _this.onMultiFacetChanged(eventInfo);
                });
                this.eventHub.subscribe('sortingChanged', function (eventInfo) {
                    _this.onSortingChanged(eventInfo);
                });
            };
            /**
             * Occurs when a user log in
             */
            AnalyticsPlugin.prototype.onUserLoggedIn = function (eventInfo) {
                if (!eventInfo) {
                    return;
                }
                var data = eventInfo.data;
                this.userLoggedIn('regular', data.ReturnUrl);
            };
            /**
             * Occurs when a user creates an account
             */
            AnalyticsPlugin.prototype.onUserCreated = function (eventInfo) {
                if (!eventInfo) {
                    return;
                }
                this.userCreated();
            };
            /**
             * Occurs when a user log in
             */
            AnalyticsPlugin.prototype.onRecoverPassword = function (eventInfo) {
                if (!eventInfo) {
                    return;
                }
                this.recoverPassword();
            };
            AnalyticsPlugin.prototype.onSingleFacetChanged = function (eventInfo) {
                if (!eventInfo) {
                    return;
                }
                var data = eventInfo.data;
                var facetKey = data.facetKey;
                if (_.isString(data.facetKey)) {
                    facetKey = data.facetKey.replace('[]', '').toLowerCase();
                    if (facetKey.indexOf('category') !== -1) {
                        facetKey = 'category';
                    }
                }
                ;
                var searchFilters = {
                    facetKey: facetKey,
                    facetValue: data.facetValue,
                    pageType: data.pageType
                };
                this.singleFacetChanged(searchFilters);
            };
            AnalyticsPlugin.prototype.onMultiFacetChanged = function (eventInfo) {
                if (!eventInfo) {
                    return;
                }
                var data = eventInfo.data;
                var facetKey = _.isString(data.facetKey) ? data.facetKey.replace('[]', '').toLowerCase() : data.facetKey;
                var searchFilters = {
                    facetKey: facetKey,
                    facetValue: data.facetValue,
                    pageType: data.pageType
                };
                this.multiFacetChanged(searchFilters);
            };
            AnalyticsPlugin.prototype.onSortingChanged = function (eventInfo) {
                if (!eventInfo) {
                    return;
                }
                var data = eventInfo.data;
                this.sortingChanged(data.sortingType, data.pageType);
            };
            /**
             * Occurs when a 404 page loads.
             */
            AnalyticsPlugin.prototype.onPageNotFound = function (eventInfo) {
                if (!eventInfo) {
                    return;
                }
                var data = eventInfo.data;
                this.sendEvent('event', '404 Errors', data.PageUrl, data.ReferrerUrl);
            };
            /**
            * Occurs when a user click on 'Copy Share Url' button
            */
            AnalyticsPlugin.prototype.onWishListCopingShareUrl = function (eventInfo) {
                if (!eventInfo) {
                    return;
                }
                var data = eventInfo.data;
                this.shareWishList(data);
            };
            /**
             * Occurs when a Line Item is being added to the Wish List.
             */
            AnalyticsPlugin.prototype.onWishListLineItemAdding = function (eventInfo) {
                if (!eventInfo) {
                    return;
                }
                var data = eventInfo.data;
                var analyticsProduct = {
                    name: data.DisplayName,
                    price: this.trimPrice(data.ListPrice)
                };
                this.addToWishList(analyticsProduct);
            };
            /**
             * Occurs when a Line Item is being added.
             */
            AnalyticsPlugin.prototype.onLineItemAdding = function (eventInfo) {
                if (!eventInfo) {
                    return;
                }
                var data = eventInfo.data;
                var analyticsProduct = {
                    name: data.DisplayName,
                    id: data.ProductId,
                    variant: data.Variant,
                    price: this.trimPriceAndUnlocalize(data.ListPrice),
                    quantity: data.Quantity,
                    category: data.CategoryId,
                    brand: data.Brand,
                    list: data.List
                };
                this.addToCart(analyticsProduct, data.List);
            };
            /**
             * Occurs when a Line item is being removed.
             */
            AnalyticsPlugin.prototype.onLineItemRemoving = function (eventInfo) {
                if (!eventInfo) {
                    return;
                }
                var data = eventInfo.data;
                var analyticsProduct = {
                    name: data.DisplayName,
                    id: data.ProductId,
                    variant: data.Variant,
                    price: this.trimPriceAndUnlocalize(data.ListPrice),
                    quantity: data.Quantity,
                    category: data.CategoryId,
                    brand: data.Brand
                };
                this.removeFromCart(analyticsProduct, data.List);
            };
            /**
             * Occurs when a product Details is rendered.
             */
            AnalyticsPlugin.prototype.onProductDetailsRendered = function (eventInfo) {
                if (!eventInfo) {
                    return;
                }
                var data = eventInfo.data;
                var analyticsProducts = [];
                analyticsProducts.push({
                    name: data.DisplayName,
                    id: data.ProductId,
                    price: this.trimPriceAndUnlocalize(data.ListPrice),
                    brand: data.Brand,
                    category: data.CategoryId,
                    variant: data.Variant
                });
                this.productDetailImpressions(analyticsProducts, 'Detail');
            };
            /**
             *  Occurs when a Checkout Step is rendered.
             */
            AnalyticsPlugin.prototype.onCheckoutStepRendered = function (eventInfo) {
                var _this = this;
                if (!eventInfo) {
                    return;
                }
                var data = eventInfo.data;
                var analyticsProducts = [];
                if (data.Cart) {
                    Q.resolve(data.Cart).then(function (cart) {
                        _.each(cart.LineItemDetailViewModels, function (lineItemDetailViewModel) {
                            var analyticsProduct = {
                                name: lineItemDetailViewModel.ProductSummary.DisplayName,
                                id: lineItemDetailViewModel.ProductId,
                                price: _this.trimPriceAndUnlocalize(lineItemDetailViewModel.ListPrice),
                                quantity: lineItemDetailViewModel.Quantity,
                                category: lineItemDetailViewModel.ProductSummary.CategoryId.replace(/-/g, '/'),
                                variant: _this.buildVariantForLineItem(lineItemDetailViewModel),
                                brand: lineItemDetailViewModel.ProductSummary.Brand
                            };
                            if (_this.useVariantIdWhenPossible && lineItemDetailViewModel.VariantId) {
                                analyticsProduct.id = lineItemDetailViewModel.VariantId;
                            }
                            analyticsProducts.push(analyticsProduct);
                        });
                        var checkoutOrigin = AnalyticsPlugin.getCheckoutOrigin();
                        var transaction = {
                            checkoutOrigin: checkoutOrigin
                        };
                        _this.checkout(data.StepNumber, transaction, analyticsProducts);
                    });
                }
            };
            /**
             * Occurs when a the Checkout Navigation strip is rendered.
             */
            AnalyticsPlugin.prototype.onCheckoutNavigationRendered = function (eventInfo) {
                if (!eventInfo) {
                    return;
                }
                var data = eventInfo.data;
                this.checkoutOption(data.StepNumber);
            };
            /**
             * Occurs when a the Checkout completes, creating an order out of a Cart.
             */
            AnalyticsPlugin.prototype.onCheckoutCompleted = function (eventInfo) {
                var _this = this;
                if (!eventInfo) {
                    return;
                }
                var data = eventInfo.data;
                var order = {
                    id: data.OrderNumber,
                    affiliation: data.Affiliation,
                    revenue: data.Revenu,
                    tax: data.Tax,
                    shipping: data.Shipping,
                    coupon: _.isEmpty(data.Coupons) ? '' : data.Coupons.map(function (c) { return c.CouponCode; }).join(', '),
                    currencyCode: data.BillingCurrency
                };
                var transaction = this.mapAnalyticTransactionFromOrder(data);
                var products = this.mapAnalyticProductsFromLineItems(data);
                var coupons = this.mapAnalyticCouponsFromOrder(data);
                _.each(coupons, function (coupon) {
                    _this.couponsUsed(coupon);
                });
                this.purchase(order, transaction, products);
            };
            /**
             * Occurs when the Search results on a page are rendered.
             */
            AnalyticsPlugin.prototype.onSearchResultRendered = function (eventInfo) {
                var _this = this;
                if (!eventInfo) {
                    return;
                }
                var data = eventInfo.data;
                if (data.ProductSearchResults.SearchResults.length > 0) {
                    var products = [];
                    _.each(data.ProductSearchResults.SearchResults, function (product, i) {
                        var analyticsProduct = {
                            id: product.ProductId,
                            name: product.DisplayName,
                            price: _this.trimPriceAndUnlocalize(product.Pricing.IsOnSale ? product.Pricing.Price : product.Pricing.ListPrice),
                            brand: product.Brand,
                            category: product.CategoryId,
                            list: data.ListName,
                            position: (i + 1) + (data.MaxItemsPerPage * (data.PageNumber - 1))
                        };
                        products.push(analyticsProduct);
                    });
                    this.productImpressions(products);
                }
                this.sendEvent('event', 'Search Results', 'Rendered', data.ProductSearchResults.Keywords, data.ProductSearchResults.TotalCount);
            };
            /**
             * Occurs when Related Products are loaded.
             */
            AnalyticsPlugin.prototype.onRelatedProductsLoaded = function (eventInfo) {
                var _this = this;
                if (!eventInfo) {
                    return;
                }
                var data = eventInfo.data;
                var products = [];
                _.each(data.Products, function (product, i) {
                    var analyticsProduct = {
                        id: product.ProductId,
                        name: product.DisplayName,
                        price: _this.trimPriceAndUnlocalize(product.Price),
                        brand: product.Brand,
                        list: data.ListName,
                        category: product.CategoryId,
                        position: i + 1
                    };
                    products.push(analyticsProduct);
                });
                this.productImpressions(products);
            };
            /**
             * Occurs when the user clicks on a product.
             */
            AnalyticsPlugin.prototype.onProductClick = function (eventInfo) {
                if (!eventInfo) {
                    return;
                }
                var data = eventInfo.data;
                var position = data.Index + 1;
                if (data.MaxItemsPerPage && data.PageNumber) {
                    position = position + (data.MaxItemsPerPage * (parseInt(data.PageNumber, 10) - 1));
                }
                var product = {
                    id: data.Product.ProductId,
                    name: data.Product.DisplayName,
                    price: this.trimPriceAndUnlocalize(data.Product.Price || data.Product.Pricing.Price),
                    brand: data.Product.Brand,
                    category: data.Product.CategoryId,
                    position: position
                };
                var products = [product];
                this.productClick(products, data.ListName);
            };
            /**
             * Occurs when no results were found for a search.
             */
            AnalyticsPlugin.prototype.onNoResultsFound = function (eventInfo) {
                if (!eventInfo) {
                    return;
                }
                var data = eventInfo.data;
                this.noResultsFound(data.Keyword);
            };
            /**
             * Occurs when a search term has been auto corrected during a search.
             */
            AnalyticsPlugin.prototype.onSearchTermCorrected = function (eventInfo) {
                if (!eventInfo) {
                    return;
                }
                var data = eventInfo.data;
                var searchResults = {
                    keywordCorrected: data.KeywordCorrected,
                    keywordEntered: data.KeywordEntered
                };
                this.searchKeywordCorrection(searchResults);
            };
            AnalyticsPlugin.prototype.buildVariantForLineItem = function (lineItem) {
                if (lineItem.VariantId && lineItem.KeyVariantAttributesList) {
                    return this.buildVariantName(lineItem.KeyVariantAttributesList);
                }
                return undefined;
            };
            AnalyticsPlugin.prototype.buildVariantName = function (kvas) {
                var nameParts = [];
                for (var i = 0; i < kvas.length; i++) {
                    var value = kvas[i].OriginalValue;
                    nameParts.push(value);
                }
                return nameParts.join(' ');
            };
            AnalyticsPlugin.prototype.mapAnalyticProductsFromLineItems = function (data) {
                var _this = this;
                var products = [];
                products = _.map(data.LineItems, function (lineItem) {
                    var analyticsProduct = {
                        id: lineItem.ProductId,
                        name: lineItem.Name,
                        price: lineItem.Price,
                        variant: _this.buildVariantForLineItem(lineItem),
                        quantity: lineItem.Quantity,
                        category: lineItem.CategoryId,
                        brand: lineItem.Brand
                    };
                    if (_this.useVariantIdWhenPossible && lineItem.VariantId) {
                        analyticsProduct.id = lineItem.VariantId;
                    }
                    return analyticsProduct;
                });
                return products;
            };
            AnalyticsPlugin.prototype.mapAnalyticCouponsFromOrder = function (data) {
                var coupons = [];
                var billingCurrency = data.BillingCurrency;
                coupons = _.map(data.Coupons, function (coupon) {
                    var analyticsCoupon = {
                        code: coupon.CouponCode,
                        discountAmount: coupon.Amount,
                        currencyCode: billingCurrency,
                        promotionName: coupon.PromotionName
                    };
                    return analyticsCoupon;
                });
                return coupons;
            };
            AnalyticsPlugin.prototype.mapAnalyticTransactionFromOrder = function (data) {
                var checkoutOrigin = AnalyticsPlugin.getCheckoutOrigin();
                var analyticsTransaction = {
                    shippingType: data.ShippingOptions,
                    checkoutOrigin: checkoutOrigin
                };
                return analyticsTransaction;
            };
            //Abstract methods
            AnalyticsPlugin.prototype.userLoggedIn = function (type, source) {
                console.error('Not implemented Exception');
            };
            AnalyticsPlugin.prototype.userCreated = function () {
                console.error('Not implemented Exception');
            };
            AnalyticsPlugin.prototype.recoverPassword = function () {
                console.error('Not implemented Exception');
            };
            AnalyticsPlugin.prototype.singleFacetChanged = function (searchFilters) {
                console.error('Not implemented Exception');
            };
            AnalyticsPlugin.prototype.multiFacetChanged = function (searchFilters) {
                console.error('Not implemented Exception');
            };
            AnalyticsPlugin.prototype.sortingChanged = function (sortingType, pageType) {
                console.error('Not implemented Exception');
            };
            AnalyticsPlugin.prototype.productImpressions = function (products) {
                console.error('Not implemented Exception');
            };
            AnalyticsPlugin.prototype.productClick = function (product, listName) {
                console.error('Not implemented Exception');
            };
            AnalyticsPlugin.prototype.productDetailImpressions = function (products, listName) {
                console.error('Not implemented Exception');
            };
            AnalyticsPlugin.prototype.addToCart = function (product, listName) {
                console.error('Not implemented Exception');
            };
            AnalyticsPlugin.prototype.addToWishList = function (product) {
                console.error('Not implemented Exception');
            };
            AnalyticsPlugin.prototype.removeFromCart = function (product, listName) {
                console.error('Not implemented Exception');
            };
            AnalyticsPlugin.prototype.checkout = function (step, transaction, products) {
                console.error('Not implemented Exception');
            };
            AnalyticsPlugin.prototype.checkoutOption = function (step) {
                console.error('Not implemented Exception');
            };
            AnalyticsPlugin.prototype.purchase = function (order, transaction, products) {
                console.error('Not implemented Exception');
            };
            AnalyticsPlugin.prototype.couponsUsed = function (order) {
                console.error('Not implemented Exception');
            };
            AnalyticsPlugin.prototype.shareWishList = function (data) {
                console.error('Not implemented Exception');
            };
            AnalyticsPlugin.prototype.searchKeywordCorrection = function (data) {
                console.error('Not implemented Exception');
            };
            AnalyticsPlugin.prototype.noResultsFound = function (keywordNotFound) {
                console.error('Not implemented Exception');
            };
            /**
             * Send a custom event to the analytics providers with multiples informations concerning the event
             * https://support.google.com/analytics/answer/1033068?hl=en
             * @param {string} eventName - The name of the custom event to send (e.g. productClick)
             * @param {string} category - The name that you supply as a way to group objects that you want to track (e.g. Product)
             * @param {string} action - The name the type of event or interaction you want to track for a particular web object (e.g. Click)
             * @param {string} label - Provide additional information for events that you want to track (e.g. Url of the clicked product)
             * @param {number} value - Use it to assign a numerical value to a tracked page object (e.g. Price of the product)
             */
            AnalyticsPlugin.prototype.sendEvent = function (eventName, category, action, label, value) {
                console.error('Not implemented Exception');
            };
            AnalyticsPlugin.prototype.trimPrice = function (price) {
                if (typeof price === 'number') {
                    return price;
                }
                return price ? parseFloat(price.match(/[\d\.\d]+/i)[0]) : null;
            };
            AnalyticsPlugin.prototype.trimPriceAndUnlocalize = function (price) {
                if (!price || typeof price === 'number') {
                    return price;
                }
                // remove anything that is not a digit, '.' or ','
                price = price.replace(/[^0-9,.]/, '');
                // if price contains a '.' its an English price and you can remove any ','
                if (price.indexOf('.') !== -1) {
                    price = price.replace(',', '');
                }
                else {
                    price = price.replace(',', '.');
                }
                return price ? parseFloat(price.match(/[\d\.\d]+/i)[0]) : null;
            };
            AnalyticsPlugin.prototype.formatDate = function (date) {
                var d = new Date(date), month = '' + (d.getMonth() + 1), day = '' + d.getDate(), year = d.getFullYear();
                if (month.length < 2) {
                    month = '0' + month;
                }
                if (day.length < 2) {
                    day = '0' + day;
                }
                return [year, month, day].join('-');
            };
            return AnalyticsPlugin;
        }());
        Composer.AnalyticsPlugin = AnalyticsPlugin;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));



/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
/// <reference path='../../../../Composer.UI/Source/Typescript/Mvc/ComposerClient.ts' />
/// <reference path='../../../../Composer.UI/Source/Typescript/Events/EventHub.ts' />
/// <reference path='./AnalyticsPlugin.ts' />
/// <reference path='./IAnalyticsProduct.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var GoogleAnalyticsPlugin = (function (_super) {
            __extends(GoogleAnalyticsPlugin, _super);
            function GoogleAnalyticsPlugin() {
                _super.apply(this, arguments);
            }
            GoogleAnalyticsPlugin.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                if (!window['dataLayer']) {
                    console.warn('The dataLayer variable does not exists. Have you included the gtm.js script ?');
                    window['dataLayer'] = [];
                }
            };
            GoogleAnalyticsPlugin.prototype.userLoggedIn = function (type, source) {
                dataLayer.push({
                    event: 'accountLogin',
                    loginType: type,
                    loginSource: source
                });
            };
            GoogleAnalyticsPlugin.prototype.userCreated = function () {
                dataLayer.push({
                    event: 'accountCreated'
                });
            };
            GoogleAnalyticsPlugin.prototype.recoverPassword = function () {
                dataLayer.push({
                    event: 'passRecovery'
                });
            };
            GoogleAnalyticsPlugin.prototype.singleFacetChanged = function (searchFilters) {
                dataLayer.push({
                    event: 'filterRefinement',
                    filterName: searchFilters.facetKey,
                    filterValue: searchFilters.facetValue,
                    sectionName: searchFilters.pageType
                });
            };
            GoogleAnalyticsPlugin.prototype.multiFacetChanged = function (searchFilters) {
                dataLayer.push({
                    event: 'filterRefinement',
                    filterName: searchFilters.facetKey,
                    filterValue: searchFilters.facetValue,
                    sectionName: searchFilters.pageType
                });
            };
            GoogleAnalyticsPlugin.prototype.sortingChanged = function (sortingType, pageType) {
                dataLayer.push({
                    event: 'sortingOption',
                    sortingType: sortingType,
                    sectionName: pageType
                });
            };
            GoogleAnalyticsPlugin.prototype.productImpressions = function (products) {
                dataLayer.push({
                    event: 'productImpressions',
                    ecommerce: {
                        impressions: products
                    }
                });
            };
            GoogleAnalyticsPlugin.prototype.productClick = function (products, listName) {
                dataLayer.push({
                    event: 'productClick',
                    ecommerce: {
                        click: {
                            actionField: {
                                list: listName
                            },
                            products: products
                        }
                    }
                });
            };
            GoogleAnalyticsPlugin.prototype.productDetailImpressions = function (products, listName) {
                dataLayer.push({
                    event: 'productDetailImpressions',
                    ecommerce: {
                        detail: {
                            actionField: {
                                list: listName
                            },
                            products: products
                        }
                    }
                });
            };
            GoogleAnalyticsPlugin.prototype.addToCart = function (product, listName) {
                dataLayer.push({
                    event: 'addToCart',
                    ecommerce: {
                        add: {
                            actionField: { list: listName },
                            products: [product]
                        }
                    }
                });
            };
            GoogleAnalyticsPlugin.prototype.addToWishList = function (product) {
                dataLayer.push({
                    'event': 'addToWishList',
                    'productName': product.name,
                    'productPrice': product.price
                });
            };
            GoogleAnalyticsPlugin.prototype.couponsUsed = function (coupon) {
                dataLayer.push({
                    'event': 'checkoutComplete',
                    'couponCode': coupon.code,
                    'discountAmount': coupon.discountAmount
                });
            };
            GoogleAnalyticsPlugin.prototype.shareWishList = function (data) {
                dataLayer.push({
                    'event': 'shareMyWishList'
                });
            };
            GoogleAnalyticsPlugin.prototype.removeFromCart = function (product, listName) {
                dataLayer.push({
                    event: 'removeFromCart',
                    ecommerce: {
                        remove: {
                            actionField: { list: listName },
                            products: [product]
                        }
                    }
                });
            };
            GoogleAnalyticsPlugin.prototype.checkout = function (step, transaction, products) {
                dataLayer.push({
                    event: 'checkout',
                    transaction: transaction,
                    ecommerce: {
                        checkout: {
                            actionField: {
                                step: this.getStepNumber(step)
                            },
                            products: products
                        }
                    }
                });
            };
            GoogleAnalyticsPlugin.prototype.checkoutOption = function (step) {
                dataLayer.push({
                    event: 'checkoutOption',
                    ecommerce: {
                        checkout_option: {
                            actionField: {
                                step: this.getStepNumber(step)
                            }
                        }
                    }
                });
            };
            GoogleAnalyticsPlugin.prototype.purchase = function (order, transaction, products) {
                dataLayer.push({
                    event: 'purchase',
                    transaction: transaction,
                    ecommerce: {
                        purchase: {
                            actionField: order,
                            products: products
                        }
                    }
                });
            };
            GoogleAnalyticsPlugin.prototype.noResultsFound = function (keywordNotFound) {
                dataLayer.push({
                    'event': 'noResults',
                    'keywordEntered': keywordNotFound
                });
            };
            GoogleAnalyticsPlugin.prototype.searchKeywordCorrection = function (searchResults) {
                dataLayer.push({
                    'event': 'keywordCorrection',
                    'keywordCorrected': searchResults.keywordCorrected,
                    'keywordEntered': searchResults.keywordEntered
                });
            };
            GoogleAnalyticsPlugin.prototype.sendEvent = function (eventName, category, action, label, value) {
                dataLayer.push({
                    event: eventName,
                    gaEventCategory: category,
                    gaEventAction: action,
                    gaEventLabel: label,
                    gaEventValue: value
                });
            };
            GoogleAnalyticsPlugin.prototype.getStepNumber = function (step) {
                return step + 1;
            };
            return GoogleAnalyticsPlugin;
        }(Composer.AnalyticsPlugin));
        Composer.GoogleAnalyticsPlugin = GoogleAnalyticsPlugin;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Events/EventHub.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var AddToCartNotificationController = (function (_super) {
            __extends(AddToCartNotificationController, _super);
            function AddToCartNotificationController() {
                _super.apply(this, arguments);
            }
            AddToCartNotificationController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.registerSubscriptions();
            };
            AddToCartNotificationController.prototype.registerSubscriptions = function () {
                var _this = this;
                this.eventHub.subscribe('lineItemAddedToCart', function (e) {
                    _this.displayNotification(e);
                });
            };
            AddToCartNotificationController.prototype.displayNotification = function (e) {
                var _this = this;
                var notificationContainer = $(this.context.container), notificationTime = notificationContainer.data('notificationTime'), cart = e.data.Cart;
                if (notificationTime > 0) {
                    this.render('AddToCartNotificationModal', cart);
                    notificationContainer.removeClass('hidden');
                    setTimeout(function () {
                        _this.closeNotification();
                    }, parseInt(notificationTime, 10));
                }
            };
            AddToCartNotificationController.prototype.onClose = function (e) {
                e.event.preventDefault();
                this.closeNotification();
            };
            AddToCartNotificationController.prototype.closeNotification = function () {
                $(this.context.container).addClass('hidden');
            };
            return AddToCartNotificationController;
        }(Composer.Controller));
        Composer.AddToCartNotificationController = AddToCartNotificationController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
/// <reference path='./ICachePolicy.ts' />

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />



var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        (function (CacheError) {
            CacheError[CacheError["NotFound"] = 0] = "NotFound";
            CacheError[CacheError["Expired"] = 1] = "Expired";
        })(Composer.CacheError || (Composer.CacheError = {}));
        var CacheError = Composer.CacheError;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='./ICachePolicy.ts' />

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
/// <reference path='./../Storage/IStorage.ts' />
/// <reference path='./../Storage/IStorageItem.ts' />
/// <reference path='./CacheError.ts' />
/// <reference path='./ICache.ts' />
/// <reference path='./ICacheItem.ts' />
/// <reference path='./ICachePolicy.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var NoExpirationPolicy = {};
        /**
         * This cache uses a client-side storage engine to provide object caching
         */
        var StorageBasedCache = (function () {
            function StorageBasedCache(storage, type) {
                var _this = this;
                if (!storage) {
                    throw new Error('The storage is required');
                }
                if (!type) {
                    throw new Error('The type is required');
                }
                this._type = type;
                this._storage = storage;
                this._storageInitializing =
                    storage.init().then(function () { return storage.initObjectStore(_this._type); });
            }
            StorageBasedCache.prototype.get = function (key) {
                var _this = this;
                if (!key) {
                    throw new Error('The key is required');
                }
                return this._storageInitializing
                    .then(function () { return _this._storage.get(_this._type, key); })
                    .then(function (cacheItem) { return _this.validate(key, cacheItem).then(function () { return cacheItem.value; }); });
            };
            StorageBasedCache.prototype.validate = function (key, item) {
                var _this = this;
                return Q.Promise(function (resolve, reject) {
                    if (_.isNull(item) || _.isNull(item.value)) {
                        reject(Composer.CacheError.NotFound);
                    }
                    else if (_this.isExpired(item)) {
                        _this._storageInitializing
                            .then(function () { return _this._storage.remove(_this._type, key); })
                            .done(function () { return reject(Composer.CacheError.Expired); }, function (reason) { return reject(reason); });
                    }
                    else {
                        item.lastAccessed = new Date().getTime();
                        var storageItem = {
                            id: key,
                            value: item
                        };
                        _this._storageInitializing
                            .then(function () { return _this._storage.set(_this._type, storageItem); })
                            .done(function () { return resolve(void 0); }, function (reason) { return reject(reason); });
                    }
                });
            };
            StorageBasedCache.prototype.isExpired = function (item) {
                var expirationTime, now = new Date().getTime();
                if (item.policy && item.policy.absoluteExpiration) {
                    expirationTime = item.policy.absoluteExpiration;
                }
                else if (item.policy && item.policy.slidingExpiration) {
                    expirationTime = item.lastAccessed + (item.policy.slidingExpiration * 1000);
                }
                else {
                    return false;
                }
                return expirationTime < now;
            };
            StorageBasedCache.prototype.set = function (key, value, policy, type) {
                var _this = this;
                if (!key) {
                    throw new Error('The key is required');
                }
                var typeItem = !type ? this._type : type;
                var cacheItem = {
                    value: value,
                    policy: !policy ? NoExpirationPolicy : policy,
                    lastAccessed: new Date().getTime()
                };
                var storageItem = {
                    id: key,
                    value: cacheItem
                };
                return this._storageInitializing
                    .then(function () { return _this._storage.set(typeItem, storageItem); })
                    .then(function () { return value; });
            };
            StorageBasedCache.prototype.clear = function (key) {
                var _this = this;
                if (!key) {
                    throw new Error('The key is required');
                }
                return this._storageInitializing
                    .then(function () { return _this._storage.remove(_this._type, key); });
            };
            StorageBasedCache.prototype.fullClear = function () {
                var _this = this;
                return this._storageInitializing
                    .then(function () { return _this._storage.fullRemove(_this._type); });
            };
            return StorageBasedCache;
        }());
        Composer.StorageBasedCache = StorageBasedCache;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
/// <reference path='./IStorage.ts' />
/// <reference path='./IStorageItem.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var BackingStorage = (function () {
            function BackingStorage(_storage) {
                this._storage = _storage;
                this._isInitialized = false;
                this._initializedObjectStores = {};
            }
            BackingStorage.prototype.init = function () {
                var _this = this;
                return Q.fcall(function () {
                    _this._isInitialized = true;
                });
            };
            BackingStorage.prototype.initObjectStore = function (type) {
                var _this = this;
                if (!type) {
                    throw new Error('The type is required');
                }
                return Q.fcall(function () {
                    if (!_this._isInitialized) {
                        throw new Error('The local storage has not been initialized');
                    }
                    _this.initObjectStoreImpl(type);
                });
            };
            BackingStorage.prototype.initObjectStoreImpl = function (type) {
                var objectStore = this.getObjectStore(type);
                if (!objectStore) {
                    objectStore = {};
                    this.setObjectStore(type, objectStore);
                }
                this._initializedObjectStores[type] = true;
            };
            BackingStorage.prototype.get = function (type, id) {
                var _this = this;
                if (!type) {
                    throw new Error('The type is required');
                }
                if (!id) {
                    throw new Error('The id is required');
                }
                return Q.fcall(function () {
                    if (!_this._isInitialized) {
                        throw new Error('The local storage has not been initialized');
                    }
                    if (!_this._initializedObjectStores[type]) {
                        throw new Error('The object store ' + type + ' has not been initialized');
                    }
                    return _this.getImpl(type, id);
                });
            };
            BackingStorage.prototype.getImpl = function (type, id) {
                var objectStore = this.getObjectStore(type);
                if (objectStore.hasOwnProperty(id)) {
                    return objectStore[id];
                }
                return null;
            };
            BackingStorage.prototype.remove = function (type, id) {
                var _this = this;
                if (!type) {
                    throw new Error('The type is required');
                }
                if (!id) {
                    throw new Error('The id is required');
                }
                return Q.fcall(function () {
                    if (!_this._isInitialized) {
                        throw new Error('The local storage has not been initialized');
                    }
                    if (!_this._initializedObjectStores[type]) {
                        throw new Error('The object store ' + type + ' has not been initialized');
                    }
                    _this.removeImpl(type, id);
                });
            };
            BackingStorage.prototype.fullRemove = function (type) {
                var _this = this;
                if (!type) {
                    throw new Error('The type is required');
                }
                return Q.fcall(function () {
                    if (!_this._isInitialized) {
                        throw new Error('The local storage has not been initialized');
                    }
                    if (!_this._initializedObjectStores[type]) {
                        throw new Error('The object store ' + type + ' has not been initialized');
                    }
                    _this.fullRemoveImpl(type);
                });
            };
            BackingStorage.prototype.removeImpl = function (type, id) {
                var objectStore = this.getObjectStore(type);
                if (objectStore.hasOwnProperty(id)) {
                    delete objectStore[id];
                    this.setObjectStore(type, objectStore);
                }
            };
            BackingStorage.prototype.fullRemoveImpl = function (type) {
                this.setObjectStore(type, null);
            };
            BackingStorage.prototype.set = function (type, item) {
                var _this = this;
                if (!type) {
                    throw new Error('The type is required');
                }
                if (!item) {
                    throw new Error('The item is required');
                }
                if (!item.id) {
                    throw new Error('The item id is required');
                }
                return Q.fcall(function () {
                    if (!_this._isInitialized) {
                        throw new Error('The local storage has not been initialized');
                    }
                    if (!_this._initializedObjectStores[type]) {
                        throw new Error('The object store ' + type + ' has not been initialized');
                    }
                    _this.setImpl(type, item);
                });
            };
            BackingStorage.prototype.setImpl = function (type, item) {
                var objectStore = this.getObjectStore(type);
                objectStore[item.id] = item.value;
                this.setObjectStore(type, objectStore);
            };
            BackingStorage.prototype.getObjectStore = function (type) {
                var objectStoreString = this._storage.getItem(type);
                var objectStore = JSON.parse(objectStoreString);
                return objectStore;
            };
            BackingStorage.prototype.setObjectStore = function (type, objectStore) {
                var objectStoreString = JSON.stringify(objectStore);
                this._storage.setItem(type, objectStoreString);
            };
            return BackingStorage;
        }());
        Composer.BackingStorage = BackingStorage;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        (function (StorageType) {
            StorageType[StorageType["localStorage"] = 0] = "localStorage";
            StorageType[StorageType["sessionStorage"] = 1] = "sessionStorage";
        })(Composer.StorageType || (Composer.StorageType = {}));
        var StorageType = Composer.StorageType;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
/// <reference path='./StorageType.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var localStoragePolyFill;
        var sessionStoragePolyFill;
        var StoragePolyfill = (function () {
            function StoragePolyfill() {
            }
            StoragePolyfill.create = function (windowHandle, storageType) {
                var lastStorage, lastStorageKey, storagePolyFill;
                if (storageType === void 0) {
                    throw {
                        name: 'StoragePolyfillException',
                        message: "A storage type must be specified in the storage polyfill create method."
                    };
                }
                switch (storageType) {
                    case Composer.StorageType.localStorage:
                        storagePolyFill = localStoragePolyFill;
                        break;
                    case Composer.StorageType.sessionStorage:
                        storagePolyFill = sessionStoragePolyFill;
                        break;
                }
                if (storagePolyFill !== void 0) {
                    return storagePolyFill;
                }
                function persist(storage) {
                    windowHandle.name = JSON.stringify(storage);
                }
                function getStorageKey(key) {
                    return key.concat(storageType.toString());
                }
                function getStorageApi() {
                    return {
                        clear: function () {
                            var key;
                            Object.keys(storagePolyFill).forEach(function (key) {
                                if (storagePolyFill.hasOwnProperty(key)) {
                                    delete storagePolyFill[key];
                                }
                            });
                            persist(storagePolyFill);
                        },
                        getItem: function (key) {
                            key = getStorageKey(key);
                            return storagePolyFill[key] || null;
                        },
                        key: function (index) {
                            var keys = null;
                            keys = Object.keys(storagePolyFill).filter(function (value, indexToMatch) { return indexToMatch === index; });
                            return keys.length > 0 ? keys[0] : null;
                        },
                        removeItem: function (key) {
                            key = getStorageKey(key);
                            if (key in storagePolyFill && storagePolyFill.hasOwnProperty(key)) {
                                delete storagePolyFill[key];
                                persist(storagePolyFill);
                            }
                        },
                        setItem: function (key, data) {
                            key = getStorageKey(key);
                            storagePolyFill[key] = data;
                            persist(storagePolyFill);
                        },
                        dispose: function () {
                            persist(storagePolyFill);
                        }
                    };
                }
                storagePolyFill = Object.create(getStorageApi());
                if (windowHandle.name !== '') {
                    lastStorage = JSON.parse(windowHandle.name);
                    for (lastStorageKey in lastStorage) {
                        if (lastStorage.hasOwnProperty(lastStorageKey)) {
                            storagePolyFill[lastStorageKey] = lastStorage[lastStorageKey];
                        }
                    }
                }
                switch (storageType) {
                    case Composer.StorageType.localStorage:
                        localStoragePolyFill = storagePolyFill;
                        return localStoragePolyFill;
                    case Composer.StorageType.sessionStorage:
                        sessionStoragePolyFill = storagePolyFill;
                        return sessionStoragePolyFill;
                }
            };
            return StoragePolyfill;
        }());
        Composer.StoragePolyfill = StoragePolyfill;
        ;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='./StoragePolyfill.ts' />
///<reference path='./StorageType.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        //We need to defer the evaluation of the storage since on google chrome / incognito mode,
        //it raise a security error exception / access denied
        function getStorage(storageCallback, storageType, window) {
            var dummyData = '__composer__data__bidon__';
            try {
                var storageToUse = storageCallback();
                if (storageToUse !== void 0) {
                    //Hack to support safari browser / anonymous mode since it support local storage but with a max size of 0kb,
                    //thus we try to insert dummy data to check if it break or not.
                    storageToUse.setItem(dummyData, dummyData);
                    storageToUse.removeItem(dummyData);
                    return storageToUse;
                }
            }
            catch (e) {
                console.log('Storage is not supported or is disabled. window.name will be used instead.');
            }
            return Composer.StoragePolyfill.create(window, storageType);
        }
        Composer.StorageFactory = {
            create: function (storageType, window) {
                switch (storageType) {
                    case Composer.StorageType.localStorage:
                        return getStorage(function () { return window.localStorage; }, storageType, window);
                    case Composer.StorageType.sessionStorage:
                        return getStorage(function () { return window.sessionStorage; }, storageType, window);
                    default:
                        throw {
                            name: 'StorageTypeException',
                            message: "The storage type \"" + storageType + "\" is currently not supported."
                        };
                }
            }
        };
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='./ICache.ts' />
///<reference path='./ICacheProvider.ts' />
///<reference path='./StorageBasedCache.ts' />
///<reference path='../Storage/IStorage.ts' />
///<reference path='../Storage/BackingStorage.ts' />
/// <reference path='../Storage/StorageFactory.ts' />
/// <reference path='../Storage/StorageType.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var CacheProvider = (function () {
            function CacheProvider() {
                this.window = window;
                if (CacheProvider._instance) {
                    throw new Error('Error: Instantiation failed: Use CacheProvider.instance() instead of new.');
                }
                this.defaultCache = this.getDefaultCache();
                this.customCache = this.getCustomCache();
                this.localStorage = this.getLocalStorage();
                this.sessionStorage = this.getSessionStorage();
                CacheProvider._instance = this;
            }
            CacheProvider.instance = function () {
                return CacheProvider._instance;
            };
            CacheProvider.prototype.getCache = function (cacheKey) {
                var backingStorage = this.getLocalStorage();
                return new Composer.StorageBasedCache(new Composer.BackingStorage(backingStorage), cacheKey);
            };
            CacheProvider.prototype.getDefaultCache = function () {
                return this.getCache(CacheProvider.defaultCacheKey);
            };
            CacheProvider.prototype.getCustomCache = function () {
                return this.getCache(CacheProvider.customCacheKey);
            };
            CacheProvider.prototype.getLocalStorage = function () {
                return Composer.StorageFactory.create(Composer.StorageType.localStorage, window);
            };
            CacheProvider.prototype.getSessionStorage = function () {
                return Composer.StorageFactory.create(Composer.StorageType.sessionStorage, window);
            };
            CacheProvider.defaultCacheKey = 'oc-cache';
            CacheProvider.customCacheKey = 'composer-signInHeaderCache';
            CacheProvider._instance = new CacheProvider();
            return CacheProvider;
        }());
        Composer.CacheProvider = CacheProvider;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
/// <reference path='./../Mvc/ComposerClient.ts' />
/// <reference path='./ICartRepository.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var CartRepository = (function () {
            function CartRepository() {
            }
            CartRepository.prototype.getCart = function () {
                return Composer.ComposerClient.get('/api/cart/getcart');
            };
            CartRepository.prototype.addLineItem = function (productId, variantId, quantity, recurringOrderFrequencyName, recurringOrderProgramName) {
                if (!productId) {
                    throw new Error('The product id is required');
                }
                if (quantity <= 0) {
                    throw new Error('The quantity must be greater than zero');
                }
                var data = {
                    ProductId: productId,
                    VariantId: variantId,
                    Quantity: quantity,
                    RecurringOrderFrequencyName: recurringOrderFrequencyName,
                    RecurringOrderProgramName: recurringOrderProgramName
                };
                return Composer.ComposerClient.post('/api/cart/lineitem', data);
            };
            CartRepository.prototype.updateLineItem = function (lineItemId, quantity, recurringOrderFrequencyName, recurringOrderProgramName) {
                if (!lineItemId) {
                    throw new Error('The line item id is required');
                }
                if (quantity <= 0) {
                    throw new Error('The quantity must be greater than zero');
                }
                var data = {
                    LineItemId: lineItemId,
                    Quantity: quantity,
                    RecurringOrderFrequencyName: recurringOrderFrequencyName,
                    RecurringOrderProgramName: recurringOrderProgramName
                };
                return Composer.ComposerClient.put('/api/cart/lineitem', data);
            };
            CartRepository.prototype.deleteLineItem = function (lineItemId) {
                if (!lineItemId) {
                    throw new Error('The line item id is required');
                }
                var data = {
                    LineItemId: lineItemId
                };
                return Composer.ComposerClient.remove('/api/cart/lineitem', data);
            };
            CartRepository.prototype.updateBillingMethodPostalCode = function (postalCode) {
                if (!postalCode) {
                    throw new Error('The postal code is required');
                }
                var data = {
                    PostalCode: postalCode
                };
                return Composer.ComposerClient.post('/api/cart/billingaddress', data);
            };
            CartRepository.prototype.updateShippingMethodPostalCode = function (postalCode) {
                if (!postalCode) {
                    throw new Error('The postal code is required');
                }
                var data = {
                    PostalCode: postalCode
                };
                return Composer.ComposerClient.post('/api/cart/shippingaddress', data);
            };
            CartRepository.prototype.setCheapestShippingMethod = function () {
                var data = {
                    UseCheapest: true
                };
                return Composer.ComposerClient.post('/api/cart/shippingmethod', data);
            };
            CartRepository.prototype.addCoupon = function (couponCode) {
                if (!couponCode) {
                    throw new Error('The coupon code is required');
                }
                var data = {
                    CouponCode: couponCode
                };
                return Composer.ComposerClient.post('/api/cart/coupon', data);
            };
            CartRepository.prototype.removeCoupon = function (couponCode) {
                if (!couponCode) {
                    throw new Error('The coupon code is required');
                }
                var data = {
                    CouponCode: couponCode
                };
                return Composer.ComposerClient.remove('/api/cart/coupon', data);
            };
            CartRepository.prototype.clean = function () {
                var data = {};
                return Composer.ComposerClient.remove('/api/cart/clean', data);
            };
            CartRepository.prototype.updateCart = function (param) {
                if (!param) {
                    throw new Error('The param is required');
                }
                return Composer.ComposerClient.post('/api/cart/updateCart', param);
            };
            CartRepository.prototype.completeCheckout = function (currentStep) {
                var data = {
                    CurrentStep: currentStep
                };
                return Composer.ComposerClient.post('/api/cart/completecheckout', data);
            };
            return CartRepository;
        }());
        Composer.CartRepository = CartRepository;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Cache/CacheProvider.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Cache/CacheError.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Repositories/CartRepository.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Events/EventHub.ts' />
///<reference path='./ICartService.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var CartService = (function () {
            function CartService(cartRepository, eventHub) {
                this.cacheKey = 'CartViewModel';
                this.cachePolicy = { slidingExpiration: 300 }; // 5min
                if (!cartRepository) {
                    throw new Error('Error: cartRepository is required');
                }
                if (!eventHub) {
                    throw new Error('Error: eventHub is required');
                }
                this.cacheProvider = Composer.CacheProvider.instance();
                this.cartRepository = cartRepository;
                this.eventHub = eventHub;
            }
            CartService.prototype.getCart = function () {
                var _this = this;
                return this.getCacheCart()
                    .fail(function (reason) {
                    if (_this.canHandle(reason)) {
                        return _this.getFreshCart();
                    }
                    console.error('An error occured while getting the cart from cache.', reason);
                    throw reason;
                });
            };
            CartService.prototype.canHandle = function (reason) {
                return reason === Composer.CacheError.Expired || reason === Composer.CacheError.NotFound;
            };
            CartService.prototype.getFreshCart = function () {
                var _this = this;
                if (!CartService.GettingFreshCart) {
                    CartService.GettingFreshCart = this.cartRepository.getCart()
                        .then(function (cart) { return _this.setCartToCache(cart); });
                }
                // to avoid getting a fresh cart multiple times within a page session
                return CartService.GettingFreshCart
                    .fail(function (reason) {
                    console.error('An error occured while getting a fresh cart.', reason);
                    throw reason;
                });
            };
            CartService.prototype.addLineItem = function (productId, price, variantId, quantity, recurringOrderFrequencyName, recurringOrderProgramName) {
                var _this = this;
                if (quantity === void 0) { quantity = 1; }
                var data = {
                    ProductId: productId,
                    VariantId: variantId,
                    Quantity: quantity,
                    Price: price
                };
                this.eventHub.publish('cartUpdating', { data: data });
                return this.cartRepository.addLineItem(productId, variantId, quantity, recurringOrderFrequencyName, recurringOrderProgramName)
                    .then(function (cart) { return _this.setCartToCache(cart); })
                    .then(function (cart) {
                    var addedToCartData = {
                        Cart: cart,
                        ProductId: productId,
                        VariantId: variantId
                    };
                    _this.eventHub.publish('cartUpdated', { data: cart });
                    _this.eventHub.publish('lineItemAddedToCart', { data: addedToCartData });
                });
            };
            CartService.prototype.updateLineItem = function (lineItemId, quantity, productId, recurringOrderFrequencyName, recurringOrderProgramName) {
                var _this = this;
                var data = {
                    LineItemId: lineItemId,
                    Quantity: quantity,
                    ProductId: productId
                };
                this.eventHub.publish('cartUpdating', { data: data });
                return this.cartRepository.updateLineItem(lineItemId, quantity, recurringOrderFrequencyName, recurringOrderProgramName)
                    .then(function (cart) { return _this.setCartToCache(cart); })
                    .then(function (cart) { return _this.eventHub.publish('cartUpdated', { data: cart }); });
            };
            CartService.prototype.deleteLineItem = function (lineItemId, productId) {
                var _this = this;
                var data = {
                    LineItemId: lineItemId,
                    ProductId: productId
                };
                this.eventHub.publish('cartUpdating', { data: data });
                return this.cartRepository.deleteLineItem(lineItemId)
                    .then(function (cart) { return _this.setCartToCache(cart); })
                    .then(function (cart) { return _this.eventHub.publish('cartUpdated', { data: cart }); });
            };
            CartService.prototype.updateBillingMethodPostalCode = function (postalCode) {
                var _this = this;
                return this.cartRepository.updateBillingMethodPostalCode(postalCode)
                    .then(function (cart) { return _this.setCartToCache(cart); });
            };
            CartService.prototype.updateShippingMethodPostalCode = function (postalCode) {
                var _this = this;
                return this.cartRepository.updateShippingMethodPostalCode(postalCode)
                    .then(function (cart) { return _this.setCartToCache(cart); });
            };
            CartService.prototype.setCheapestShippingMethod = function () {
                var _this = this;
                return this.cartRepository.setCheapestShippingMethod()
                    .then(function (cart) { return _this.setCartToCache(cart); });
            };
            CartService.prototype.addCoupon = function (couponCode) {
                var _this = this;
                return this.cartRepository.addCoupon(couponCode)
                    .then(function (cart) { return _this.setCartToCache(cart); });
            };
            CartService.prototype.removeCoupon = function (couponCode) {
                var _this = this;
                return this.cartRepository.removeCoupon(couponCode)
                    .then(function (cart) { return _this.setCartToCache(cart); });
            };
            CartService.prototype.clean = function () {
                var _this = this;
                return this.cartRepository.clean()
                    .then(function (cart) { return _this.setCartToCache(cart); });
            };
            CartService.prototype.updateCart = function (param) {
                var _this = this;
                return this.cartRepository.updateCart(param)
                    .then(function (result) { return _this.setCartToCache(result.Cart).then(function () { return result; }); });
            };
            CartService.prototype.completeCheckout = function (currentStep) {
                var _this = this;
                return this.cartRepository.completeCheckout(currentStep)
                    .then(function (result) { return _this.setCartToCache(null).then(function () { return result; }); });
            };
            CartService.prototype.invalidateCache = function () {
                return this.cacheProvider.defaultCache.clear(this.cacheKey);
            };
            CartService.prototype.getCacheCart = function () {
                return this.cacheProvider.defaultCache.get(this.cacheKey);
            };
            CartService.prototype.setCartToCache = function (cart) {
                return this.cacheProvider.defaultCache.set(this.cacheKey, cart, this.cachePolicy);
            };
            return CartService;
        }());
        Composer.CartService = CartService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />

/// <reference path='../../Typings/tsd.d.ts' />
/// <reference path='./IError.ts' />

/// <reference path='../../Typings/tsd.d.ts' />
/// <reference path='./IError.ts' />

/// <reference path='../../Typings/tsd.d.ts' />
/// <reference path='./IErrorCollection.ts' />
/// <reference path='./IError.ts' />
/// <reference path='./IErrorHandler.ts' />
/// <reference path='../Mvc/Localization/LocalizationProvider.ts' />
/// <reference path='../Events/EventHub.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var ErrorHandler = (function () {
            function ErrorHandler() {
            }
            ErrorHandler.instance = function () {
                var instance = new ErrorHandler();
                var memoize = function () { return instance; };
                ErrorHandler.instance = memoize;
                return memoize();
            };
            /**
             * Will output the error to the user.
             * @param {IError} error Error to display.
             */
            ErrorHandler.prototype.outputError = function (error) {
                this.publishGenericErrorEvent(error);
            };
            /**
             * Will localize an error based on its code and will display it
             * to the user.
             * @param {string} errorCode Error code to localize.
             */
            ErrorHandler.prototype.outputErrorFromCode = function (errorCode) {
                var error = this.createErrorFromCode(errorCode);
                this.publishGenericErrorEvent(error);
            };
            ErrorHandler.prototype.createErrorFromCode = function (errorCode) {
                var localization = Composer.LocalizationProvider.instance().getLocalizedString('Errors', "L_" + errorCode);
                var error = {
                    ErrorCode: errorCode,
                    LocalizedErrorMessage: localization
                };
                return error;
            };
            /**
             * Removes all errors from the current page.
             */
            ErrorHandler.prototype.removeErrors = function () {
                this.publishGenericErrorEvent();
            };
            ErrorHandler.prototype.publishGenericErrorEvent = function (error) {
                var errorColl = this.createErrorCollection(error);
                Composer.EventHub.instance().publish('GeneralErrorOccured', {
                    data: errorColl
                });
            };
            ErrorHandler.prototype.createErrorCollection = function (error) {
                var errorCollection = {
                    Errors: []
                };
                if (error) {
                    errorCollection.Errors.push(error);
                }
                return errorCollection;
            };
            return ErrorHandler;
        }());
        Composer.ErrorHandler = ErrorHandler;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Repositories/CartRepository.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/ErrorHandling/ErrorHandler.ts' />
///<reference path='CartService.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var FullCartController = (function (_super) {
            __extends(FullCartController, _super);
            function FullCartController() {
                _super.apply(this, arguments);
                this.source = 'Checkout';
                this.loaded = false;
                this.cartService = new Composer.CartService(new Composer.CartRepository(), this.eventHub);
            }
            FullCartController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.registerSubscriptions();
                this.loadCart();
            };
            FullCartController.prototype.registerSubscriptions = function () {
                var _this = this;
                this.eventHub.subscribe('cartUpdated', function (e) { return _this.onCartUpdated(e.data); });
            };
            FullCartController.prototype.onCartUpdated = function (cart) {
                this.render('CartContent', cart);
                Composer.ErrorHandler.instance().removeErrors();
            };
            FullCartController.prototype.loadCart = function () {
                var _this = this;
                this.cartService.getFreshCart()
                    .then(function (cart) {
                    if (_this.loaded) {
                        return cart;
                    }
                    var e = {
                        data: {
                            Cart: cart,
                            StepNumber: _this.context.viewModel.CurrentStep
                        }
                    };
                    _this.eventHub.publish('checkoutStepRendered', e);
                    return cart;
                })
                    .done(function (cart) {
                    _this.eventHub.publish('cartUpdated', { data: cart });
                    _this.loaded = true;
                }, function (reason) { return _this.loadCartFailed(reason); });
            };
            FullCartController.prototype.loadCartFailed = function (reason) {
                console.error('Error while loading the cart.', reason);
                this.context.container.find('.js-loading').hide();
                Composer.ErrorHandler.instance().outputErrorFromCode('LoadCartFailed');
            };
            FullCartController.prototype.updateLineItem = function (actionContext) {
                var _this = this;
                if (!this.debounceUpdateLineItem) {
                    this.debounceUpdateLineItem =
                        _.debounce(function (args) {
                            return _this.executeLineItemUpdate(args);
                        }, 300);
                }
                var context = actionContext.elementContext;
                context.closest('.cart-row').addClass('is-loading');
                var lineItemId = context.data('lineitemid');
                var productId = context.attr('data-productid');
                var action = context.data('action');
                var quantity = parseInt(context.data('quantity'), 10);
                var tmpQuantity = context.data('tmp-qte') ? parseInt(context.data('tmp-qte'), 10) : null;
                var updatedQuantity = this.updateQuantity(action, tmpQuantity ? tmpQuantity : quantity);
                var recurringOrderFrequencyName = context.data('recurringorderfrequencyname');
                var recurringOrderProgramName = context.data('recurringorderprogramname');
                context.data('tmp-qte', updatedQuantity);
                var args = {
                    context: context,
                    lineItemId: lineItemId,
                    originalQuantity: quantity,
                    updatedQuantity: updatedQuantity,
                    productId: productId,
                    recurringOrderFrequencyName: recurringOrderFrequencyName,
                    recurringOrderProgramName: recurringOrderProgramName
                };
                if (quantity !== updatedQuantity) {
                    //use only debouced function when incrementing/decrementing quantity
                    this.debounceUpdateLineItem(args);
                }
                else {
                    this.executeLineItemUpdate(args);
                }
            };
            FullCartController.prototype.executeLineItemUpdate = function (args) {
                var _this = this;
                this.cartService.getCart().then(function (cart) {
                    var lineItem = _.find(cart.LineItemDetailViewModels, function (li) { return li.Id === args.lineItemId; });
                    if (_this.isUpdateRequired(args, lineItem)) {
                        var delta = args.updatedQuantity - lineItem.Quantity;
                        var positiveDelta = delta < 0 ? delta * -1 : delta;
                        var data = _this.getLineItemDataForAnalytics(lineItem, positiveDelta);
                        if (delta !== 0) {
                            var eventName = (delta > 0) ? 'lineItemAdding' : 'lineItemRemoving';
                            _this.eventHub.publish(eventName, { data: data });
                        }
                        args.context.removeData('tmp-qte');
                        args.context.data('quantity', args.updatedQuantity);
                        return _this.cartService.updateLineItem(args.lineItemId, args.updatedQuantity, args.productId, args.recurringOrderFrequencyName === '' ? null : args.recurringOrderFrequencyName, args.recurringOrderProgramName);
                    }
                    else {
                        _this.render('CartContent', cart);
                        return cart;
                    }
                }).fail(function (reason) { return _this.lineItemUpdateFailed(args.context, reason); });
            };
            FullCartController.prototype.isUpdateRequired = function (updateLineItemArgs, lineItem) {
                if (!lineItem) {
                    return false;
                }
                var shouldUpdateQuantity = updateLineItemArgs.updatedQuantity - lineItem.Quantity !== 0;
                var shouldUpdateRecurringFrequency = updateLineItemArgs.recurringOrderFrequencyName !== lineItem.RecurringOrderFrequencyName;
                var shouldUpdateRecurringProgram = updateLineItemArgs.recurringOrderProgramName !== lineItem.RecurringOrderProgramName;
                return shouldUpdateQuantity || shouldUpdateRecurringFrequency || shouldUpdateRecurringProgram;
            };
            FullCartController.prototype.lineItemUpdateFailed = function (context, reason) {
                console.error('Error while updating line item quantity.', reason);
                context.closest('.cart-row').removeClass('is-loading');
                Composer.ErrorHandler.instance().outputErrorFromCode('LineItemUpdateFailed');
            };
            FullCartController.prototype.getLineItemDataForAnalytics = function (lineItem, quantity) {
                var data = {
                    List: this.source,
                    DisplayName: lineItem.ProductSummary.DisplayName,
                    ProductId: lineItem.ProductId,
                    ListPrice: lineItem.ListPrice,
                    Brand: lineItem.ProductSummary.Brand,
                    CategoryId: lineItem.ProductSummary.CategoryId,
                    Variant: undefined,
                    Quantity: quantity
                };
                if (lineItem.VariantId && lineItem.KeyVariantAttributesList) {
                    data.Variant = this.buildVariantName(lineItem.KeyVariantAttributesList);
                }
                return data;
            };
            FullCartController.prototype.updateQuantity = function (action, quantity) {
                if (!action) {
                    return quantity;
                }
                switch (action.toUpperCase()) {
                    case 'INCREMENT':
                        quantity++;
                        break;
                    case 'DECREMENT':
                        quantity--;
                        if (quantity < 1) {
                            quantity = 1;
                        }
                        break;
                }
                return quantity;
            };
            FullCartController.prototype.deleteLineItem = function (actionContext) {
                var _this = this;
                var context = actionContext.elementContext;
                var lineItemId = context.data('lineitemid');
                var productId = context.attr('data-productid');
                context.closest('.cart-row').addClass('is-loading');
                this.cartService.getCart()
                    .then(function (cart) {
                    var lineItem = _.find(cart.LineItemDetailViewModels, function (li) { return li.Id === lineItemId; });
                    var data = _this.getLineItemDataForAnalytics(lineItem, lineItem.Quantity);
                    _this.eventHub.publish('lineItemRemoving', { data: data });
                    return _this.cartService.deleteLineItem(lineItemId, productId);
                }).fail(function (reason) { return _this.onLineItemDeleteFailed(context, reason); });
            };
            FullCartController.prototype.onLineItemDeleteFailed = function (context, reason) {
                console.error('Error while deleting line item.', reason);
                context.closest('.cart-row').removeClass('is-loading');
                Composer.ErrorHandler.instance().outputErrorFromCode('LineItemDeleteFailed');
            };
            FullCartController.prototype.buildVariantName = function (kvas) {
                var nameParts = [];
                for (var i = 0; i < kvas.length; i++) {
                    var value = kvas[i].OriginalValue;
                    nameParts.push(value);
                }
                return nameParts.join(' ');
            };
            return FullCartController;
        }(Orckestra.Composer.Controller));
        Composer.FullCartController = FullCartController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Mvc/ComposerClient.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var ShippingMethodService = (function () {
            function ShippingMethodService() {
            }
            /**
            * Return a Promise which returns the ShippingMethods available for the cart.
            */
            ShippingMethodService.prototype.getShippingMethods = function () {
                return Composer.ComposerClient.get('/api/cart/shippingmethods');
            };
            return ShippingMethodService;
        }());
        Composer.ShippingMethodService = ShippingMethodService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Mvc/ComposerClient.ts' />
///<reference path='./IRegionService.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var RegionService = (function () {
            function RegionService() {
            }
            RegionService.prototype.getRegions = function () {
                var _this = this;
                if (_.isUndefined(this._memoizeGetRegions)) {
                    this._memoizeGetRegions = _.memoize(function (arg) { return _this.getRegionsImpl(); });
                }
                return this._memoizeGetRegions();
            };
            RegionService.prototype.getRegionsImpl = function () {
                return Composer.ComposerClient.get('/api/address/regions');
            };
            return RegionService;
        }());
        Composer.RegionService = RegionService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.MyAccount.UI/Common/Source/Typescript/MembershipService.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/ErrorHandling/ErrorHandler.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Repositories/CartRepository.ts' />
///<reference path='../../../CheckoutShippingMethod/source/Typescript/ShippingMethodService.ts' />
///<reference path='../../../CartSummary/Source/Typescript/CartService.ts' />
///<reference path='./IBaseCheckoutController.ts' />
///<reference path='./RegionService.ts' />
///<reference path='./ICheckoutService.ts' />
///<reference path='./ICheckoutContext.ts' />
///<reference path='./IRegisterOptions.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var CheckoutService = (function () {
            function CheckoutService() {
                this.orderConfirmationCacheKey = 'orderConfirmationCacheKey';
                this.orderCacheKey = 'orderCacheKey';
                this.registeredControllers = {};
                if (CheckoutService.instance) {
                    throw new Error('Instantiation failed: Use CheckoutService.instance() instead of new.');
                }
                this.eventHub = Composer.EventHub.instance();
                this.window = window;
                this.allControllersReady = Q.defer();
                this.cacheProvider = Composer.CacheProvider.instance();
                this.cartService = new Composer.CartService(new Composer.CartRepository(), this.eventHub);
                this.membershipService = new Composer.MembershipService(new Composer.MembershipRepository());
                this.regionService = new Composer.RegionService();
                this.shippingMethodService = new Composer.ShippingMethodService();
                this.registerAllControllersInitialized();
                CheckoutService.instance = this;
            }
            CheckoutService.getInstance = function () {
                if (!CheckoutService.instance) {
                    CheckoutService.instance = new CheckoutService();
                }
                ;
                return CheckoutService.instance;
            };
            CheckoutService.prototype.registerAllControllersInitialized = function () {
                var _this = this;
                this.eventHub.subscribe('allControllersInitialized', function () {
                    _this.initialize();
                });
            };
            CheckoutService.prototype.initialize = function () {
                var _this = this;
                var authenticatedPromise = this.membershipService.isAuthenticated();
                var getCartPromise = this.getCart();
                var regionsPromise = this.regionService.getRegions();
                var shippingMethodsPromise = this.shippingMethodService.getShippingMethods();
                Q.all([authenticatedPromise, getCartPromise, regionsPromise, shippingMethodsPromise])
                    .spread(function (authVm, cartVm, regionsVm, shippingMethodsVm) {
                    var results = {
                        authenticationViewModel: authVm,
                        cartViewModel: cartVm,
                        regionsViewModel: regionsVm,
                        shippingMethodsViewModel: shippingMethodsVm
                    };
                    return _this.renderControllers(results);
                })
                    .then(function () {
                    _this.allControllersReady.resolve(true);
                })
                    .fail(function (reason) {
                    console.error('Error while initializing CheckoutService.', reason);
                    Composer.ErrorHandler.instance().outputErrorFromCode('CheckoutRenderFailed');
                });
            };
            CheckoutService.prototype.registerController = function (controller) {
                var _this = this;
                if (this.allControllersReady.promise.isPending()) {
                    this.allControllersReady.resolve(false);
                }
                this.allControllersReady.promise
                    .then(function (allControllersReady) {
                    if (allControllersReady) {
                        throw new Error('Too late to register all controllers are ready.');
                    }
                    else {
                        var controllerName = controller.viewModelName;
                        _this.registeredControllers[controllerName] = controller;
                    }
                });
            };
            CheckoutService.prototype.unregisterController = function (controllerName) {
                delete this.registeredControllers[controllerName];
            };
            CheckoutService.prototype.renderControllers = function (checkoutContext) {
                var controllerInstance, renderDataPromises = [];
                for (var controllerName in this.registeredControllers) {
                    if (this.registeredControllers.hasOwnProperty(controllerName)) {
                        controllerInstance = this.registeredControllers[controllerName];
                        renderDataPromises.push(controllerInstance.renderData(checkoutContext));
                    }
                }
                return Q.all(renderDataPromises);
            };
            CheckoutService.prototype.updatePostalCode = function (postalCode) {
                return this.cartService.updateBillingMethodPostalCode(postalCode);
            };
            CheckoutService.prototype.invalidateCache = function () {
                return this.cartService.invalidateCache();
            };
            CheckoutService.prototype.getCart = function () {
                var _this = this;
                if (!_.isNumber(CheckoutService.checkoutStep)) {
                    throw new Error('CheckoutService.checkoutStep has not been set or is not a number.');
                }
                return this.invalidateCache()
                    .then(function () { return _this.cartService.getCart(); })
                    .then(function (cart) {
                    return _this.handleCheckoutSecurity(cart, CheckoutService.checkoutStep);
                })
                    .fail(function (reason) {
                    _this.handleError(reason);
                });
            };
            CheckoutService.prototype.updateCart = function () {
                var _this = this;
                this.allControllersReady.promise
                    .then(function (allControllersReady) {
                    if (!allControllersReady) {
                        throw new Error('All registered controllers are not ready.');
                    }
                });
                if (!_.isNumber(CheckoutService.checkoutStep)) {
                    throw new Error('CheckoutService.checkoutStep has not been set or is not a number.');
                }
                var emptyVm = {
                    CurrentStep: CheckoutService.checkoutStep,
                    UpdatedCart: {}
                };
                return this.buildCartUpdateViewModel(emptyVm)
                    .then(function (vm) { return _this.cartService.updateCart(vm); });
            };
            CheckoutService.prototype.completeCheckout = function () {
                var _this = this;
                if (!_.isNumber(CheckoutService.checkoutStep)) {
                    throw new Error('CheckoutService.checkoutStep has not been set or is not a number.');
                }
                var emptyVm = {
                    CurrentStep: CheckoutService.checkoutStep,
                    UpdatedCart: {}
                };
                return this.buildCartUpdateViewModel(emptyVm)
                    .then(function (vm) {
                    if (_.isEmpty(vm.UpdatedCart)) {
                        console.log('No modification required to the cart.');
                        return vm;
                    }
                    return _this.cartService.updateCart(vm);
                })
                    .then(function (result) {
                    if (result && result.HasErrors) {
                        throw new Error('Error while updating the cart. Complete Checkout will not complete.');
                    }
                    console.log('Publishing the cart!');
                    return _this.cartService.completeCheckout(CheckoutService.checkoutStep);
                });
            };
            CheckoutService.prototype.buildCartUpdateViewModel = function (vm) {
                var _this = this;
                var validationPromise;
                var viewModelUpdatePromise;
                validationPromise = Q(vm).then(function (vm) {
                    return _this.getCartValidation(vm);
                });
                viewModelUpdatePromise = validationPromise.then(function (vm) {
                    return _this.getCartUpdateViewModel(vm);
                });
                return viewModelUpdatePromise;
            };
            CheckoutService.prototype.getCartValidation = function (vm) {
                var validationPromise = this.collectValidationPromises();
                var promise = validationPromise.then(function (results) {
                    console.log('Aggregrating all validation results');
                    var hasFailedValidation = _.any(results, function (r) { return !r; });
                    if (hasFailedValidation) {
                        throw new Error('There were validation errors.');
                    }
                    return vm;
                });
                return promise;
            };
            CheckoutService.prototype.getCartUpdateViewModel = function (vm) {
                var updateModelPromise = this.collectUpdateModelPromises();
                var promise = updateModelPromise.then(function (updates) {
                    console.log('Aggregating all ViewModel updates.');
                    _.each(updates, function (update) {
                        if (update) {
                            var keys = _.keys(update);
                            _.each(keys, function (key) {
                                vm.UpdatedCart[key] = update[key];
                            });
                        }
                    });
                    return vm;
                });
                return promise;
            };
            CheckoutService.prototype.collectValidationPromises = function () {
                var promises = [];
                var controllerInstance;
                var controllerOptions;
                for (var controllerName in this.registeredControllers) {
                    if (this.registeredControllers.hasOwnProperty(controllerName)) {
                        controllerInstance = this.registeredControllers[controllerName];
                        promises.push(controllerInstance.getValidationPromise());
                    }
                }
                return Q.all(promises);
            };
            CheckoutService.prototype.collectUpdateModelPromises = function () {
                var promises = [];
                var controllerInstance;
                var controllerOptions;
                for (var controllerName in this.registeredControllers) {
                    if (this.registeredControllers.hasOwnProperty(controllerName)) {
                        controllerInstance = this.registeredControllers[controllerName];
                        promises.push(controllerInstance.getUpdateModelPromise());
                    }
                }
                return Q.all(promises);
            };
            CheckoutService.prototype.handleCheckoutSecurity = function (cart, targetedStep) {
                var lastStep = cart.OrderSummary.CheckoutRedirectAction.LastCheckoutStep;
                var redirectUrl = cart.OrderSummary.CheckoutRedirectAction.RedirectUrl;
                if (targetedStep > lastStep) {
                    this.window.location.href = redirectUrl;
                }
                return cart;
            };
            CheckoutService.prototype.handleError = function (reason) {
                console.error('Unable to retrieve the cart for the checkout', reason);
                throw reason;
            };
            CheckoutService.prototype.setOrderConfirmationToCache = function (orderConfirmationviewModel) {
                this.cacheProvider.defaultCache.set(this.orderConfirmationCacheKey, orderConfirmationviewModel).done();
            };
            CheckoutService.prototype.getOrderConfirmationFromCache = function () {
                return this.cacheProvider.defaultCache.get(this.orderConfirmationCacheKey);
            };
            CheckoutService.prototype.clearOrderConfirmationFromCache = function () {
                this.cacheProvider.defaultCache.clear(this.orderConfirmationCacheKey).done();
            };
            CheckoutService.prototype.setOrderToCache = function (orderConfirmationviewModel) {
                this.cacheProvider.defaultCache.set(this.orderCacheKey, orderConfirmationviewModel).done();
            };
            return CheckoutService;
        }());
        Composer.CheckoutService = CheckoutService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/JQueryPlugins/ISerializeObjectJqueryPlugin.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/ErrorHandling/ErrorHandler.ts' />
///<reference path='CheckoutService.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var BaseCheckoutController = (function (_super) {
            __extends(BaseCheckoutController, _super);
            function BaseCheckoutController() {
                _super.apply(this, arguments);
                this.debounceTimeout = 300;
            }
            BaseCheckoutController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.checkoutService = Composer.CheckoutService.getInstance();
                this.registerController();
            };
            BaseCheckoutController.prototype.registerController = function () {
                this.checkoutService.registerController(this);
            };
            BaseCheckoutController.prototype.unregisterController = function () {
                this.checkoutService.unregisterController(this.viewModelName);
            };
            BaseCheckoutController.prototype.renderData = function (checkoutContext) {
                throw new Error('Method not implemented');
            };
            BaseCheckoutController.prototype.getValidationPromise = function () {
                var _this = this;
                return Q.fcall(function () { return _this.isValidForUpdate(); });
            };
            BaseCheckoutController.prototype.getUpdateModelPromise = function () {
                var _this = this;
                return Q.fcall(function () {
                    var vm = {};
                    vm[_this.viewModelName] = _this.getViewModelUpdated();
                    return vm;
                });
            };
            BaseCheckoutController.prototype.registerSubscriptions = function () {
                var _this = this;
                this.eventHub.subscribe(this.viewModelName + "Rendered", function () {
                    _this.formInstances = _this.registerFormsForValidation($('form', _this.context.container));
                });
            };
            BaseCheckoutController.prototype.getViewModelUpdated = function () {
                var formContext = $('form', this.context.container), viewModel = formContext.serializeObject();
                return JSON.stringify(viewModel);
            };
            BaseCheckoutController.prototype.isValidForUpdate = function () {
                var isValidForUpdate = _.all(this.formInstances, function (formInstance) { return formInstance.validate(undefined, true); });
                return isValidForUpdate;
            };
            BaseCheckoutController.prototype.onRenderDataFailed = function (reason) {
                this.removeLoading();
                console.error("Failed rendering the control in charge of '" + this.viewModelName + "'.", reason);
                Composer.ErrorHandler.instance().outputErrorFromCode('CheckoutRenderFailed');
            };
            BaseCheckoutController.prototype.removeLoading = function () {
                this.context.container.find('.js-loading').hide();
            };
            return BaseCheckoutController;
        }(Orckestra.Composer.Controller));
        Composer.BaseCheckoutController = BaseCheckoutController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../CheckoutCommon/source/Typescript/BaseCheckoutController.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var BillingAddressCheckoutController = (function (_super) {
            __extends(BillingAddressCheckoutController, _super);
            function BillingAddressCheckoutController() {
                _super.apply(this, arguments);
            }
            BillingAddressCheckoutController.prototype.initialize = function () {
                this.viewModelName = 'BillingAddress';
                _super.prototype.initialize.call(this);
            };
            BillingAddressCheckoutController.prototype.changeUseShippingAddress = function () {
                this.setBillingAddressFormVisibility();
                this.setBillingAddressFormValidation();
            };
            BillingAddressCheckoutController.prototype.renderData = function (checkoutContext) {
                var _this = this;
                return Q.fcall(function () {
                    if (checkoutContext.authenticationViewModel.IsAuthenticated) {
                        _this.renderAuthenticated(checkoutContext);
                    }
                    else {
                        _this.renderUnauthenticated(checkoutContext);
                    }
                    ;
                });
            };
            BillingAddressCheckoutController.prototype.renderAuthenticated = function (checkoutContext) {
                this.unregisterController();
                this.render(this.viewModelName, checkoutContext.authenticationViewModel);
            };
            BillingAddressCheckoutController.prototype.renderUnauthenticated = function (checkoutContext) {
                this.registerSubscriptions();
                this.render(this.viewModelName, checkoutContext.cartViewModel);
                this.render('AddressRegionPicker', {
                    Regions: checkoutContext.regionsViewModel,
                    SelectedRegion: this.getRegionCode(checkoutContext.cartViewModel)
                });
                this.eventHub.publish(this.viewModelName + "Rendered", checkoutContext.cartViewModel);
            };
            BillingAddressCheckoutController.prototype.registerSubscriptions = function () {
                var _this = this;
                this.eventHub.subscribe(this.viewModelName + "Rendered", function () { return _this.onRendered(); });
            };
            BillingAddressCheckoutController.prototype.renderDataFailed = function (reason) {
                console.error('Failed to render Billing Address control', reason);
                this.context.container.find('.js-loading').hide();
                //TODO: Error handling
            };
            BillingAddressCheckoutController.prototype.getRegionCode = function (cart) {
                if (cart.Payment === undefined ||
                    cart.Payment.BillingAddress === undefined ||
                    cart.Payment.BillingAddress.RegionCode === undefined ||
                    cart.Payment.BillingAddress.UseShippingAddress) {
                    return '';
                }
                return cart.Payment.BillingAddress.RegionCode;
            };
            BillingAddressCheckoutController.prototype.onRendered = function () {
                var _this = this;
                var useShippingAddress = this.useShippingAddress();
                this.eventHub.subscribe('postalCodeChanged', function (e) { return _this.onPostalCodeChanged(useShippingAddress, e.data); });
                this.formInstances = this.registerFormsForValidation(this.getVisibleForms());
            };
            BillingAddressCheckoutController.prototype.useShippingAddress = function () {
                return $(this.context.container).find('input[name=UseShippingAddress]:checked').val() === 'true';
            };
            BillingAddressCheckoutController.prototype.onPostalCodeChanged = function (useShippingAddress, cart) {
                if (!useShippingAddress) {
                    return;
                }
                var postalCode = cart.ShippingAddress.PostalCode;
                this.checkoutService.updatePostalCode(postalCode).done();
            };
            BillingAddressCheckoutController.prototype.getVisibleForms = function () {
                var visibleForms = $('form', this.context.container).not('form:has(.hide)');
                return visibleForms;
            };
            BillingAddressCheckoutController.prototype.setBillingAddressFormVisibility = function () {
                var useShippingAddress = this.useShippingAddress();
                if (useShippingAddress) {
                    $('#BillingAddressContent').addClass('hide');
                }
                else {
                    $('#BillingAddressContent').removeClass('hide');
                }
            };
            BillingAddressCheckoutController.prototype.setBillingAddressFormValidation = function () {
                var useShippingAddress = this.useShippingAddress();
                var isValidationEnabled = this.isBillingAddressFormValidationEnabled();
                if (useShippingAddress) {
                    if (isValidationEnabled) {
                        this.disableBillingAddressFormValidation();
                    }
                }
                else {
                    if (!isValidationEnabled) {
                        this.enableBillingAddressFormValidation();
                    }
                }
            };
            BillingAddressCheckoutController.prototype.isBillingAddressFormValidationEnabled = function () {
                var _this = this;
                return _.some(this.formInstances, function (formInstance) {
                    return _this.isBillingAddressFormInstance(formInstance);
                });
            };
            BillingAddressCheckoutController.prototype.disableBillingAddressFormValidation = function () {
                var _this = this;
                var formInstance = _.find(this.formInstances, function (formInstance) {
                    return _this.isBillingAddressFormInstance(formInstance);
                });
                formInstance.destroy();
                _.remove(this.formInstances, function (formInstance) {
                    return _this.isBillingAddressFormInstance(formInstance);
                });
            };
            BillingAddressCheckoutController.prototype.isBillingAddressFormInstance = function (formInstance) {
                return formInstance.$element.is('form#BillingAddress');
            };
            BillingAddressCheckoutController.prototype.enableBillingAddressFormValidation = function () {
                this.formInstances = this.formInstances.concat(this.registerFormsForValidation($('form#BillingAddress')));
            };
            return BillingAddressCheckoutController;
        }(Orckestra.Composer.BaseCheckoutController));
        Composer.BillingAddressCheckoutController = BillingAddressCheckoutController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Mvc/ComposerClient.ts' />
///<reference path='./ICustomerRepository.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var CustomerRepository = (function () {
            function CustomerRepository() {
            }
            /**
            * Attempt to register using Composer API.
            * @param
            */
            CustomerRepository.prototype.updateAccount = function (formData, returnUrl) {
                var data = _.extend({ ReturnUrl: returnUrl }, formData);
                return Composer.ComposerClient.post('/api/customer/update', data);
            };
            /**
            * Get the customer addresses.
            */
            CustomerRepository.prototype.getAddresses = function () {
                return Composer.ComposerClient.get('/api/customer/addresses');
            };
            /**
            * Create a new customer address
            * @param
            */
            CustomerRepository.prototype.createAddress = function (formData, returnUrl) {
                var data = _.extend({ ReturnUrl: returnUrl }, formData);
                return Composer.ComposerClient.post('/api/customer/addresses', data);
            };
            /**
            * Update a customer address
            * @param
            */
            CustomerRepository.prototype.updateAddress = function (formData, addressId, returnUrl) {
                var data = _.extend({ ReturnUrl: returnUrl }, formData);
                return Composer.ComposerClient.post('/api/customer/addresses/' + addressId, data);
            };
            /**
            * Delete a customer address
            * @param
            */
            CustomerRepository.prototype.deleteAddress = function (addressId, returnUrl) {
                var data = { ReturnUrl: returnUrl };
                return Composer.ComposerClient.remove('/api/customer/addresses/' + addressId, data);
            };
            /**
            * Set default address for a customer
            * @param
            */
            CustomerRepository.prototype.setDefaultAddress = function (addressId, returnUrl) {
                var data = { ReturnUrl: returnUrl };
                return Composer.ComposerClient.post('/api/customer/setdefaultaddress/' + addressId, data);
            };
            return CustomerRepository;
        }());
        Composer.CustomerRepository = CustomerRepository;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Repositories/CustomerRepository.ts' />
///<reference path='ICustomerService.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var CustomerService = (function () {
            function CustomerService(customerRepository) {
                if (!customerRepository) {
                    throw new Error('Error: customerRepository is required');
                }
                this.customerRepository = customerRepository;
            }
            /**
            * Attempt to register using Composer API.
            * @param
            */
            CustomerService.prototype.updateAccount = function (formData, returnUrl) {
                return this.customerRepository.updateAccount(formData, returnUrl);
            };
            /**
            * Get the customer addresses.
            */
            CustomerService.prototype.getAddresses = function () {
                var _this = this;
                if (_.isUndefined(this.memoizeGetAdresses)) {
                    this.memoizeGetAdresses = _.memoize(function (arg) { return _this.getAddressesImpl(); });
                }
                return this.memoizeGetAdresses();
            };
            CustomerService.prototype.getAddressesImpl = function () {
                return this.customerRepository.getAddresses();
            };
            /**
            * Create a new customer address
            * @param
            */
            CustomerService.prototype.createAddress = function (formData, returnUrl) {
                return this.customerRepository.createAddress(formData, returnUrl);
            };
            /**
            * Update a customer address
            * @param
            */
            CustomerService.prototype.updateAddress = function (formData, addressId, returnUrl) {
                return this.customerRepository.updateAddress(formData, addressId, returnUrl);
            };
            /**
            * Delete a customer address
            * @param
            */
            CustomerService.prototype.deleteAddress = function (addressId, returnUrl) {
                return this.customerRepository.deleteAddress(addressId, returnUrl);
            };
            /**
            * Set default address for a customer
            * @param
            */
            CustomerService.prototype.setDefaultAddress = function (addressId, returnUrl) {
                return this.customerRepository.setDefaultAddress(addressId, returnUrl);
            };
            return CustomerService;
        }());
        Composer.CustomerService = CustomerService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/jqueryPlugins/ISerializeObjectJqueryPlugin.ts' />
///<reference path='../../../Common/Source/Typescript/MembershipService.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        (function (MyAccountStatus) {
            MyAccountStatus[MyAccountStatus["Success"] = 0] = "Success";
            MyAccountStatus[MyAccountStatus["InvalidTicket"] = 1] = "InvalidTicket";
            MyAccountStatus[MyAccountStatus["DuplicateEmail"] = 2] = "DuplicateEmail";
            MyAccountStatus[MyAccountStatus["DuplicateUserName"] = 3] = "DuplicateUserName";
            MyAccountStatus[MyAccountStatus["InvalidQuestion"] = 4] = "InvalidQuestion";
            MyAccountStatus[MyAccountStatus["InvalidPassword"] = 5] = "InvalidPassword";
            MyAccountStatus[MyAccountStatus["InvalidPasswordAnswer"] = 6] = "InvalidPasswordAnswer";
            MyAccountStatus[MyAccountStatus["InvalidEmail"] = 7] = "InvalidEmail";
            MyAccountStatus[MyAccountStatus["Failed"] = 8] = "Failed";
            MyAccountStatus[MyAccountStatus["UserRejected"] = 9] = "UserRejected";
            MyAccountStatus[MyAccountStatus["RequiresApproval"] = 10] = "RequiresApproval";
            MyAccountStatus[MyAccountStatus["AjaxFailed"] = 11] = "AjaxFailed";
        })(Composer.MyAccountStatus || (Composer.MyAccountStatus = {}));
        var MyAccountStatus = Composer.MyAccountStatus;
        ;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));



///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Mvc/ComposerClient.ts' />
///<reference path='../../../../Composer.MyAccount.UI/Common/Source/Typescript/CustomerService.ts' />
///<reference path='../../../CheckoutCommon/Source/Typescript/AddressDto.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var BillingAddressRegisteredCheckoutService = (function () {
            function BillingAddressRegisteredCheckoutService(customerService) {
                this.customerService = customerService;
            }
            /**
            * Get the customer addresses. The selected billing address is taken from the cart by default.
            * If no address has been set in the cart, the selected billing address corresponds to the preferred address.
            */
            BillingAddressRegisteredCheckoutService.prototype.getBillingAddresses = function (cart) {
                var _this = this;
                if (!cart) {
                    throw new Error('The cart is required');
                }
                return this.customerService.getAddresses()
                    .then(function (addresses) {
                    addresses.AddressesLoaded = true;
                    addresses.SelectedBillingAddressId = _this.getSelectedBillingAddressId(cart, addresses);
                    return addresses;
                });
            };
            BillingAddressRegisteredCheckoutService.prototype.getSelectedBillingAddressId = function (cart, addressList) {
                if (this.isBillingAddressFromCartValid(cart, addressList)) {
                    return cart.Payment.BillingAddress.AddressBookId;
                }
                return this.getPreferredBillingAddressId(addressList);
            };
            BillingAddressRegisteredCheckoutService.prototype.isBillingAddressFromCartValid = function (cart, addressList) {
                if (cart.Payment === undefined) {
                    return false;
                }
                if (cart.Payment.BillingAddress === undefined) {
                    return false;
                }
                return _.any(addressList.Addresses, function (address) { return address.Id === cart.Payment.BillingAddress.AddressBookId; });
            };
            BillingAddressRegisteredCheckoutService.prototype.getPreferredBillingAddressId = function (addressList) {
                var preferredBillingAddress = _.find(addressList.Addresses, function (address) { return address.IsPreferredBilling; });
                return preferredBillingAddress === undefined ? undefined : preferredBillingAddress.Id;
            };
            return BillingAddressRegisteredCheckoutService;
        }());
        Composer.BillingAddressRegisteredCheckoutService = BillingAddressRegisteredCheckoutService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../Typings/tsd.d.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var UIModal = (function () {
            function UIModal(window, modalContextSelector, confirmAction, sender) {
                var _this = this;
                this.openModal = function (event) {
                    _this.modalContext = $(_this.modalContextSelector);
                    _this.confirmDeferred = Q.defer();
                    _this.modalContext.on('shown.bs.modal', function (event) {
                        $('[data-dismiss]', event.target).focus();
                    });
                    _this.modalContext.on('hide.bs.modal', function (event) {
                        $(event.target).off('shown.bs.modal hide.bs.modal');
                        if (_this.confirmDeferred.promise.isPending()) {
                            _this.confirmDeferred.resolve(false);
                        }
                    });
                    _this.modalContext.modal('show');
                    _this.confirmDeferred.promise
                        .then(function (value) {
                        _this.modalContext.modal('hide');
                        if (value) {
                            return _this.confirmAction.call(_this.sender, event);
                        }
                    })
                        .done(null, function (error) {
                        console.log(error);
                    });
                };
                this.confirmAction = confirmAction;
                this.modalContextSelector = modalContextSelector;
                this.window = window;
                this.sender = sender;
                this.registerDomEvents();
            }
            UIModal.prototype.registerDomEvents = function () {
                $(this.window.document).on('click', '.modal--confirm', this.confirmModal.bind(this));
                $(this.window.document).on('click', '.modal--cancel', this.cancelModal.bind(this));
            };
            UIModal.prototype.unregisterDomEvents = function () {
                $(this.window.document).off('click', '.modal--confirm', this.confirmModal);
                $(this.window.document).off('click', '.modal--cancel', this.cancelModal);
            };
            UIModal.prototype.confirmModal = function () {
                this.confirmDeferred.resolve(true);
            };
            UIModal.prototype.cancelModal = function () {
                this.confirmDeferred.resolve(false);
            };
            UIModal.prototype.dispose = function () {
                this.unregisterDomEvents();
            };
            return UIModal;
        }());
        Composer.UIModal = UIModal;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.MyAccount.UI/Common/Source/Typescript/CustomerService.ts' />
///<reference path='../../../../Composer.MyAccount.UI/Common/Source/Typescript/MyAccountEvents.ts' />
///<reference path='../../../../Composer.MyAccount.UI/Common/Source/Typescript/MyAccountStatus.ts' />
///<reference path='../../../CheckoutCommon/source/Typescript/BaseCheckoutController.ts' />
///<reference path='./BillingAddressRegisteredCheckoutService.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/UI/UIModal.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var BillingAddressRegisteredCheckoutController = (function (_super) {
            __extends(BillingAddressRegisteredCheckoutController, _super);
            function BillingAddressRegisteredCheckoutController() {
                _super.apply(this, arguments);
                this.debounceChangeBillingMethod = _.debounce(this.changeBillingAddressImpl, 500, { 'leading': true });
                this.modalElementSelector = '#confirmationModal';
                this.customerService = new Composer.CustomerService(new Composer.CustomerRepository());
                this.billingAddressRegisteredCheckoutService = new Composer.BillingAddressRegisteredCheckoutService(this.customerService);
            }
            BillingAddressRegisteredCheckoutController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.viewModelName = 'BillingAddressRegistered';
                this.uiModal = new Composer.UIModal(window, this.modalElementSelector, this.deleteAddress, this);
            };
            BillingAddressRegisteredCheckoutController.prototype.registerSubscriptions = function () {
                var _this = this;
                this.eventHub.subscribe(this.viewModelName + "Rendered", function (e) { return _this.onRendered(e); });
                this.eventHub.subscribe(Composer.MyAccountEvents[Composer.MyAccountEvents.AddressDeleted], function (e) { return _this.onAddressDeleted(e); });
            };
            BillingAddressRegisteredCheckoutController.prototype.renderData = function (checkoutContext) {
                if (checkoutContext.authenticationViewModel.IsAuthenticated) {
                    return this.renderAuthenticated(checkoutContext);
                }
                else {
                    this.renderUnauthenticated(checkoutContext);
                }
            };
            BillingAddressRegisteredCheckoutController.prototype.renderUnauthenticated = function (checkoutContext) {
                this.unregisterController();
                this.render(this.viewModelName, checkoutContext.authenticationViewModel);
            };
            BillingAddressRegisteredCheckoutController.prototype.renderAuthenticated = function (checkoutContext) {
                var _this = this;
                this.registerSubscriptions();
                this.render(this.viewModelName, { IsAuthenticated: true });
                return this.billingAddressRegisteredCheckoutService.getBillingAddresses(checkoutContext.cartViewModel)
                    .then(function (billingAdressesVm) {
                    _this.render(_this.viewModelName, checkoutContext.cartViewModel);
                    _this.render('BillingRegisteredAddresses', billingAdressesVm);
                })
                    .fail(function (reason) { return _this.handleError(reason); })
                    .fin(function () { return _this.eventHub.publish(_this.viewModelName + "Rendered", checkoutContext.cartViewModel); });
            };
            BillingAddressRegisteredCheckoutController.prototype.onRendered = function (e) {
                var _this = this;
                this.formInstances = this.registerFormsForValidation($('#RegisteredBillingAddress', this.context.container));
                var selectedBillingAddressId = $(this.context.container).find('input[name=BillingAddressId]:checked').val();
                if (!selectedBillingAddressId) {
                    return;
                }
                this.checkoutService.getCart()
                    .then(function (cart) {
                    if (selectedBillingAddressId !== cart.Payment.BillingAddress.AddressBookId) {
                        _this.debounceChangeBillingMethod();
                    }
                })
                    .fail(function (reason) { return _this.handleError(reason); });
            };
            BillingAddressRegisteredCheckoutController.prototype.setSelectedBillingAddress = function () {
                var _this = this;
                var selectedBillingAddressId = $(this.context.container).find('input[name=BillingAddressId]:checked').val();
                if (!selectedBillingAddressId) {
                    return;
                }
                this.checkoutService.getCart()
                    .done(function (cart) {
                    if (selectedBillingAddressId !== cart.Payment.BillingAddress.AddressBookId) {
                        _this.debounceChangeBillingMethod();
                    }
                });
            };
            BillingAddressRegisteredCheckoutController.prototype.changeBillingAddress = function (actionContext) {
                this.debounceChangeBillingMethod();
            };
            BillingAddressRegisteredCheckoutController.prototype.changeBillingAddressImpl = function () {
                var _this = this;
                this.checkoutService.updateCart()
                    .done(function (result) {
                    if (result.HasErrors) {
                        throw new Error('The updated cart contains errors');
                    }
                }, function (reason) { return _this.handleError(reason); });
            };
            /**
             * Requires the element in action context to have a data-address-id.
             */
            BillingAddressRegisteredCheckoutController.prototype.deleteAddress = function (event) {
                var _this = this;
                var element = $(event.target);
                var $addressListItem = element.closest('[data-address-id]');
                var addressId = $addressListItem.data('address-id');
                var busy = this.asyncBusy({ elementContext: element, containerContext: $addressListItem });
                return this.customerService.deleteAddress(addressId, '')
                    .then(function (result) {
                    _this.eventHub.publish(Composer.MyAccountEvents[Composer.MyAccountEvents.AddressDeleted], { data: addressId });
                })
                    .fail(function () { return _this.renderFailedForm(Composer.MyAccountStatus[Composer.MyAccountStatus.AjaxFailed]); })
                    .fin(function () { return busy.done(); });
            };
            BillingAddressRegisteredCheckoutController.prototype.deleteAddressConfirm = function (actionContext) {
                this.uiModal.openModal(actionContext.event);
            };
            BillingAddressRegisteredCheckoutController.prototype.onAddressDeleted = function (e) {
                var addressId = e.data;
                var $addressListItem = $(this.context.container).find('[data-address-id=' + addressId + ']');
                $addressListItem.remove();
            };
            BillingAddressRegisteredCheckoutController.prototype.useShippingAddress = function () {
                var useShippingAddress = $(this.context.container).find('input[name=UseShippingAddress]:checked').val() === 'true';
                return useShippingAddress;
            };
            BillingAddressRegisteredCheckoutController.prototype.getVisibleForms = function () {
                var visibleForms = $('form', this.context.container).not('form:has(.hide)');
                return visibleForms;
            };
            BillingAddressRegisteredCheckoutController.prototype.changeUseShippingAddress = function () {
                this.setBillingAddressFormVisibility();
                this.setBillingAddressFormValidation();
                this.setSelectedBillingAddress();
            };
            BillingAddressRegisteredCheckoutController.prototype.setBillingAddressFormVisibility = function () {
                var useShippingAddress = this.useShippingAddress();
                if (useShippingAddress) {
                    $('#BillingAddressContent').addClass('hide');
                }
                else {
                    $('#BillingAddressContent').removeClass('hide');
                }
            };
            BillingAddressRegisteredCheckoutController.prototype.setBillingAddressFormValidation = function () {
                var useShippingAddress = this.useShippingAddress();
                var isValidationEnabled = this.isBillingAddressFormValidationEnabled();
                if (useShippingAddress) {
                    if (isValidationEnabled) {
                        this.disableBillingAddressFormValidation();
                    }
                }
                else {
                    if (!isValidationEnabled) {
                        this.enableBillingAddressFormValidation();
                    }
                }
            };
            BillingAddressRegisteredCheckoutController.prototype.isBillingAddressFormValidationEnabled = function () {
                var _this = this;
                return _.some(this.formInstances, function (formInstance) {
                    return _this.isBillingAddressFormInstance(formInstance);
                });
            };
            BillingAddressRegisteredCheckoutController.prototype.disableBillingAddressFormValidation = function () {
                var _this = this;
                var formInstance = _.find(this.formInstances, function (formInstance) {
                    return _this.isBillingAddressFormInstance(formInstance);
                });
                formInstance.destroy();
                _.remove(this.formInstances, function (formInstance) {
                    return _this.isBillingAddressFormInstance(formInstance);
                });
            };
            BillingAddressRegisteredCheckoutController.prototype.isBillingAddressFormInstance = function (formInstance) {
                var isBillingAddressFormInstance = formInstance.$element.is('form#BillingAddressRegistered');
                return isBillingAddressFormInstance;
            };
            BillingAddressRegisteredCheckoutController.prototype.enableBillingAddressFormValidation = function () {
                this.formInstances = this.formInstances.concat(this.registerFormsForValidation($('form#BillingAddressRegistered')));
            };
            BillingAddressRegisteredCheckoutController.prototype.renderFailedForm = function (status) {
                //TODO
            };
            BillingAddressRegisteredCheckoutController.prototype.handleError = function (reason) {
                this.eventHub.publish('cartUpdatingFailed', null);
                console.error('The user changed the billing address, but an error occured when updating the preferred billing address', reason);
            };
            return BillingAddressRegisteredCheckoutController;
        }(Orckestra.Composer.BaseCheckoutController));
        Composer.BillingAddressRegisteredCheckoutController = BillingAddressRegisteredCheckoutController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../CheckoutCommon/source/Typescript/BaseCheckoutController.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var CheckoutNavigationController = (function (_super) {
            __extends(CheckoutNavigationController, _super);
            function CheckoutNavigationController() {
                _super.apply(this, arguments);
                this.currentStep = null;
            }
            CheckoutNavigationController.prototype.initialize = function () {
                this.viewModelName = 'checkoutNavigation';
                _super.prototype.initialize.call(this);
                this.checkoutService = Composer.CheckoutService.getInstance();
                this.currentStep = _.findWhere(this.context.viewModel.Steps, { IsActive: true });
                this.renderData();
            };
            CheckoutNavigationController.prototype.renderData = function () {
                var _this = this;
                return Q.fcall(function () {
                    _this.eventHub.publish('checkoutStepRendered', {
                        data: {
                            StepNumber: _this.currentStep.StepNumber,
                            Cart: _this.checkoutService.getCart()
                        }
                    });
                });
            };
            return CheckoutNavigationController;
        }(Orckestra.Composer.Controller));
        Composer.CheckoutNavigationController = CheckoutNavigationController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='./ICheckoutGetCartPromiseFailureHandler.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));



var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Mvc/ComposerClient.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Events/IEventHub.ts' />
///<reference path='../../../CheckoutCommon/source/Typescript/IUpdatePaymentOptions.ts' />
///<reference path='./IGetPaymentMethodsOptions' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var PaymentProvider = (function () {
            function PaymentProvider(window, eventHub) {
                this.window = window;
                this.eventHub = eventHub;
            }
            PaymentProvider.prototype.getCurrentPaymentMethod = function () {
                return this._currentPaymentMethod;
            };
            /**
            * Return a Promise which returns an array of Payment Methods.
            */
            PaymentProvider.prototype.getPaymentMethods = function (getPaymentMethodOptions) {
                return Composer.ComposerClient.post('/api/payment/paymentmethods', getPaymentMethodOptions);
            };
            PaymentProvider.prototype.updatePaymentMethod = function (request) {
                var _this = this;
                return Composer.ComposerClient.put('/api/payment/paymentmethod', request)
                    .then(function (payload) {
                    _this._currentPaymentMethod = request;
                    return payload;
                });
            };
            return PaymentProvider;
        }());
        Composer.PaymentProvider = PaymentProvider;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.Cart.UI/CheckoutCommon/Source/TypeScript/BaseCheckoutController.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var CheckoutCompleteController = (function (_super) {
            __extends(CheckoutCompleteController, _super);
            function CheckoutCompleteController() {
                _super.apply(this, arguments);
            }
            CheckoutCompleteController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.viewModelName = 'CompleteCheckout';
            };
            CheckoutCompleteController.prototype.renderData = function (checkoutContext) {
                return Q(this.render('CheckoutComplete', checkoutContext.cartViewModel));
            };
            return CheckoutCompleteController;
        }(Orckestra.Composer.BaseCheckoutController));
        Composer.CheckoutCompleteController = CheckoutCompleteController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../CheckoutCommon/source/Typescript/BaseCheckoutController.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var GuestCustomerInfoCheckoutController = (function (_super) {
            __extends(GuestCustomerInfoCheckoutController, _super);
            function GuestCustomerInfoCheckoutController() {
                _super.apply(this, arguments);
            }
            GuestCustomerInfoCheckoutController.prototype.initialize = function () {
                this.viewModelName = 'GuestCustomerInfo';
                _super.prototype.initialize.call(this);
            };
            GuestCustomerInfoCheckoutController.prototype.renderData = function (checkoutContext) {
                var _this = this;
                return Q.fcall(function () {
                    if (checkoutContext.authenticationViewModel.IsAuthenticated) {
                        _this.renderAuthenticated(checkoutContext);
                    }
                    else {
                        _this.renderUnauthenticated(checkoutContext);
                    }
                });
            };
            GuestCustomerInfoCheckoutController.prototype.renderAuthenticated = function (checkoutContext) {
                this.unregisterController();
                this.render(this.viewModelName, checkoutContext.authenticationViewModel);
            };
            GuestCustomerInfoCheckoutController.prototype.renderUnauthenticated = function (checkoutContext) {
                this.registerSubscriptions();
                this.render(this.viewModelName, checkoutContext.cartViewModel);
                this.eventHub.publish(this.viewModelName + "Rendered", null);
            };
            return GuestCustomerInfoCheckoutController;
        }(Orckestra.Composer.BaseCheckoutController));
        Composer.GuestCustomerInfoCheckoutController = GuestCustomerInfoCheckoutController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../CheckoutCommon/source/Typescript/BaseCheckoutController.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var CheckoutOrderConfirmationController = (function (_super) {
            __extends(CheckoutOrderConfirmationController, _super);
            function CheckoutOrderConfirmationController() {
                _super.apply(this, arguments);
                this.orderConfirmationCacheKey = 'orderConfirmationCacheKey';
                this.orderCacheKey = 'orderCacheKey';
            }
            CheckoutOrderConfirmationController.prototype.initialize = function () {
                var _this = this;
                _super.prototype.initialize.call(this);
                this.cacheProvider = Composer.CacheProvider.instance();
                this.cacheProvider.defaultCache.get(this.orderCacheKey)
                    .then(function (result) {
                    _this.eventHub.publish('CheckoutConfirmation', { data: result });
                    _this.cacheProvider.defaultCache.clear(_this.orderCacheKey).done();
                })
                    .fail(function (reason) {
                    console.error('Unable to retrieve order number from cache, attempt to redirect.');
                });
                this.cacheProvider.defaultCache.get(this.orderConfirmationCacheKey)
                    .then(function (result) {
                    var orderConfirmationviewModel = {
                        OrderNumber: result.OrderNumber,
                        CustomerEmail: result.CustomerEmail
                    };
                    if (orderConfirmationviewModel !== undefined) {
                        _this.render('CheckoutOrderConfirmation', orderConfirmationviewModel);
                        _this.eventHub.publish('checkoutStepRendered', {
                            data: { StepNumber: _this.context.viewModel.CurrentStep }
                        });
                    }
                    else {
                        console.error('Order was placed but it is not possible to retrieve order number from cache.');
                    }
                })
                    .fail(function (reason) {
                    console.error('Unable to retrieve order number from cache, attempt to redirect.');
                    var redirectUrl = _this.context.viewModel.RedirectUrl;
                    if (redirectUrl) {
                        window.location.href = redirectUrl;
                    }
                    else {
                        console.error('Redirect url was not detected.');
                    }
                });
            };
            return CheckoutOrderConfirmationController;
        }(Orckestra.Composer.Controller));
        Composer.CheckoutOrderConfirmationController = CheckoutOrderConfirmationController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../CheckoutCommon/source/Typescript/BaseCheckoutController.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var CheckoutOrderSummaryController = (function (_super) {
            __extends(CheckoutOrderSummaryController, _super);
            function CheckoutOrderSummaryController() {
                _super.apply(this, arguments);
            }
            CheckoutOrderSummaryController.prototype.initialize = function () {
                this.viewModelName = 'CheckoutOrderSummary';
                _super.prototype.initialize.call(this);
                this.registerSubscriptions();
                Composer.CheckoutService.checkoutStep = this.context.viewModel.CurrentStep;
            };
            CheckoutOrderSummaryController.prototype.registerSubscriptions = function () {
                var _this = this;
                _super.prototype.registerSubscriptions.call(this);
                var handle;
                this.eventHub.subscribe('cartUpdating', function () {
                    clearTimeout(handle);
                    handle = setTimeout(function () { return _this.renderLoading(); }, 300);
                });
                this.eventHub.subscribe('cartUpdatingFailed', function () {
                    clearTimeout(handle);
                    _this.reRender();
                });
                this.eventHub.subscribe('cartUpdated', function (e) {
                    clearTimeout(handle);
                    e.data.LoadCheckoutOrderSummary = true;
                    _this.render(_this.viewModelName, e.data);
                });
            };
            CheckoutOrderSummaryController.prototype.renderData = function (checkoutContext) {
                var _this = this;
                return Q.fcall(function () {
                    checkoutContext.cartViewModel.LoadCheckoutOrderSummary = true;
                    _this.render(_this.viewModelName, checkoutContext.cartViewModel);
                });
            };
            CheckoutOrderSummaryController.prototype.reRender = function () {
                var _this = this;
                this.renderLoading();
                this.checkoutService.getCart()
                    .then(function (cartVm) {
                    cartVm.LoadCheckoutOrderSummary = true;
                    _this.render(_this.viewModelName, cartVm);
                })
                    .fail(function (reason) { return _this.onRenderDataFailed(reason); });
            };
            CheckoutOrderSummaryController.prototype.renderLoading = function () {
                return this.render(this.viewModelName, { LoadCheckoutOrderSummary: true, GettingCart: true });
            };
            /**
             *  Update the cart.
             *  If errors are returned, it stay in the same page.
             *  If there is no errors it moves to the next step.
             */
            CheckoutOrderSummaryController.prototype.nextStep = function (actionContext) {
                var busy = this.asyncBusy({ elementContext: actionContext.elementContext });
                Composer.ErrorHandler.instance().removeErrors();
                this.checkoutService.updateCart()
                    .then(function (result) {
                    if (result.HasErrors === false) {
                        window.location.href = result.NextStepUrl;
                    }
                    else {
                        console.error('Error while updating the cart');
                        busy.done();
                    }
                })
                    .fail(function (reason) {
                    console.error('Error on checkout submit.', reason);
                    Composer.ErrorHandler.instance().outputErrorFromCode('CheckoutNextStepFailed');
                    busy.done();
                });
            };
            return CheckoutOrderSummaryController;
        }(Orckestra.Composer.BaseCheckoutController));
        Composer.CheckoutOrderSummaryController = CheckoutOrderSummaryController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../CheckoutCommon/source/Typescript/BaseCheckoutController.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var CompleteCheckoutOrderSummaryController = (function (_super) {
            __extends(CompleteCheckoutOrderSummaryController, _super);
            function CompleteCheckoutOrderSummaryController() {
                _super.apply(this, arguments);
            }
            CompleteCheckoutOrderSummaryController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.viewModelName = 'CompleteCheckoutOrderSummary';
                Composer.CheckoutService.checkoutStep = this.context.viewModel.CurrentStep;
                this.registerSubscriptions();
            };
            CompleteCheckoutOrderSummaryController.prototype.renderData = function (checkoutContext) {
                return Q(this.render(this.viewModelName, checkoutContext.cartViewModel));
            };
            /**
            *  complete Checkout
            *  If errors are returned, it stays in the same page.
            *  If there is no errors it moves to the next step.
            */
            CompleteCheckoutOrderSummaryController.prototype.nextStep = function (actionContext) {
                var _this = this;
                var busy = this.asyncBusy();
                this.checkoutService.completeCheckout()
                    .then(function (result) {
                    if (_.isEmpty(result.OrderNumber)) {
                        throw {
                            message: 'We could not complete the order because the order number is empty',
                            data: result
                        };
                    }
                    _this.eventHub.publish('checkoutCompleted', { data: result });
                    _this.checkoutService.setOrderToCache(result);
                    return result;
                })
                    .then(function (result) {
                    var orderConfirmationviewModel = {
                        OrderNumber: result.OrderNumber,
                        CustomerEmail: result.CustomerEmail
                    };
                    _this.checkoutService.setOrderConfirmationToCache(orderConfirmationviewModel);
                    if (result.NextStepUrl) {
                        window.location.href = result.NextStepUrl;
                    }
                })
                    .fail(function (reason) {
                    console.error('An error occurred while completing the checkout.', reason);
                    Composer.ErrorHandler.instance().outputErrorFromCode('CompleteCheckoutFailed');
                    busy.done();
                });
            };
            CompleteCheckoutOrderSummaryController.prototype.registerSubscriptions = function () {
                var _this = this;
                _super.prototype.registerSubscriptions.call(this);
                var handle;
                this.eventHub.subscribe('cartUpdating', function () {
                    clearTimeout(handle);
                    handle = setTimeout(function () { return _this.renderLoading(); }, 300);
                });
                this.eventHub.subscribe('cartUpdatingFailed', function () {
                    clearTimeout(handle);
                    _this.reRender();
                });
                this.eventHub.subscribe('cartUpdated', function (e) {
                    clearTimeout(handle);
                    e.data.GettingCart = false;
                    _this.render(_this.viewModelName, e.data);
                });
            };
            CompleteCheckoutOrderSummaryController.prototype.renderLoading = function () {
                var loadingViewModel = { GettingCart: true };
                return this.render(this.viewModelName, loadingViewModel);
            };
            CompleteCheckoutOrderSummaryController.prototype.reRender = function () {
                var _this = this;
                this.renderLoading();
                this.checkoutService
                    .getCart()
                    .then(function (cartVm) { return _this.render(_this.viewModelName, cartVm); })
                    .fail(function (reason) { return _this.onRenderDataFailed(reason); });
            };
            return CompleteCheckoutOrderSummaryController;
        }(Orckestra.Composer.BaseCheckoutController));
        Composer.CompleteCheckoutOrderSummaryController = CompleteCheckoutOrderSummaryController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../../Composer.UI/Source/Typings/tsd.d.ts' />



///<reference path='../../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../../Composer.UI/Source/Typescript/System/IDisposable.ts' />
///<reference path='../ViewModels/IActivePaymentViewModel.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var BaseCheckoutPaymentProvider = (function () {
            function BaseCheckoutPaymentProvider(window, eventHub, providerType, providerName) {
                this._providerType = providerType;
                this._providerName = providerName;
                this._window = window;
                this._eventHub = eventHub;
            }
            Object.defineProperty(BaseCheckoutPaymentProvider.prototype, "providerType", {
                /**
                 * Obtains the underlying type of the Payment Provider.
                 * @return {string} Type of the Payment Provider.
                 */
                get: function () {
                    return this._providerType;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(BaseCheckoutPaymentProvider.prototype, "providerName", {
                /**
                 * Obtains the name of the Payment Provider.
                 * @return {string} Name of the Payment provider.
                 */
                get: function () {
                    return this._providerName;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(BaseCheckoutPaymentProvider.prototype, "window", {
                get: function () {
                    return this._window;
                },
                enumerable: true,
                configurable: true
            });
            /**
             * Method called to get a promise for payment validation.
             * Returns a promise of boolean. The return boolean needs to be false for validation error,
             * or true if valid.
             * @return {Q.Promise<boolean>} Promise that will be executed when we validate the payment control.
             */
            BaseCheckoutPaymentProvider.prototype.validatePayment = function (activePaymentVM) {
                throw new Error('This Payment Provider does not implement the "validatePayment" method.');
            };
            /**
             * Method called to get a promise when payment will submit.
             * @return {Q.Promise<any>} Promise that will be executed when to cart is about the be updated.
             */
            BaseCheckoutPaymentProvider.prototype.submitPayment = function (activePaymentVM) {
                throw new Error('This Payment Provider does not implement the "submitPayment" method.');
            };
            /**
             * Gets the container for the Payment Provider.
             * @return {JQuery} jQuery object.
             */
            BaseCheckoutPaymentProvider.prototype.getForm = function () {
                var form = $('#PaymentForm');
                if (!form || _.isEmpty(form)) {
                    throw new Error('Could not find the element PaymentForm on this page.');
                }
                return form;
            };
            BaseCheckoutPaymentProvider.prototype.dispose = function () {
                //Nothing to do here.
            };
            return BaseCheckoutPaymentProvider;
        }());
        Composer.BaseCheckoutPaymentProvider = BaseCheckoutPaymentProvider;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../ViewModels/IPaymentMethodViewModel.ts' />

///<reference path='../../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../../Composer.UI/Source/Typescript/Mvc/ComposerClient.ts' />
///<reference path='../../../../../Composer.UI/Source/Typescript/Events/EventHub.ts' />
///<reference path='../Providers/BaseCheckoutPaymentProvider.ts' />
///<reference path='../Repositories/IPaymentRepository.ts' />
///<reference path='./IPaymentService.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var PaymentService = (function () {
            function PaymentService(eventHub, paymentRepository) {
                this.eventHub = eventHub;
                this.paymentRepository = paymentRepository;
            }
            /**
             * Return a list of acceptable payment providers details with labels
             * @param  {providers: Array<string>}      Array of provider names.
             * @return {Array<IPaymentMethodViewModel} List of payment provider details
             */
            PaymentService.prototype.getPaymentMethods = function (providers) {
                return this.paymentRepository.getPaymentMethods(providers);
            };
            /**
             * Return the active payment for the active cart
             * @return {IActivePaymentViewModel} Active payment for the active cart.
             */
            PaymentService.prototype.getActivePayment = function () {
                return this.paymentRepository.getActivePayment();
            };
            PaymentService.prototype.removePaymentMethod = function (paymentMethodId, paymentProviderName) {
                return this.paymentRepository.removePaymentMethod(paymentMethodId, paymentProviderName);
            };
            PaymentService.prototype.setPaymentMethod = function (request) {
                return this.paymentRepository.setPaymentMethod(request);
            };
            return PaymentService;
        }());
        Composer.PaymentService = PaymentService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='./IPaymentMethodViewModel.ts' />
///<reference path='./IActivePaymentViewModel.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));



///<reference path='IPaymentProfileListItemViewModel.ts' />

///<reference path='../../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../../Composer.UI/Source/Typescript/Mvc/ComposerClient.ts' />
///<reference path="IPaymentRepository.ts" />
///<reference path="../ViewModels/IPaymentViewModel.ts" />
///<reference path="../ViewModels/IActivePaymentViewModel.ts" />
///<reference path="../ViewModels/IPaymentProfileListViewModel.ts" />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var PaymentRepository = (function () {
            function PaymentRepository() {
            }
            /**
             * Return a list of saved payment methods for a specified array of payment provider names
             * @param  {providers: Array<string>}       Array of provider names.
             * @return {Array<IPaymentMethodViewModel>} Instance of the provider.
             */
            PaymentRepository.prototype.getPaymentMethods = function (providers) {
                return Composer.ComposerClient.post('/api/payment/paymentmethods', { Providers: providers });
            };
            /**
             * Return the active payment for the active cart
             * @return {IActivePaymentViewModel} Active payment for the active cart.
             */
            PaymentRepository.prototype.getActivePayment = function () {
                return Composer.ComposerClient.get('/api/payment/activepayment');
            };
            PaymentRepository.prototype.removePaymentMethod = function (paymentMethodId, paymentProviderName) {
                return Composer.ComposerClient.remove('/api/payment/removemethod', {
                    PaymentMethodId: paymentMethodId,
                    PaymentProviderName: paymentProviderName
                });
            };
            PaymentRepository.prototype.setPaymentMethod = function (request) {
                return Composer.ComposerClient.put('/api/payment/paymentMethod', request);
            };
            return PaymentRepository;
        }());
        Composer.PaymentRepository = PaymentRepository;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='../../../../../Composer.UI/Source/Typings/tsd.d.ts' />
/// <reference path='../../../../../Composer.UI/Source/Typescript/Events/IEventHub.ts' />
/// <reference path='./BaseCheckoutPaymentProvider.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var CheckoutPaymentProviderFactory = (function () {
            function CheckoutPaymentProviderFactory(window, eventHub) {
                this._eventHub = eventHub;
                this._window = window;
            }
            /**
             * Determines if the Checkout Payment Provider exists or not.
             * @param  {string}  providerType Type of the provider.
             * @return {boolean}              True if the provider exists in the Orckestra.Composer namespace.
             */
            CheckoutPaymentProviderFactory.prototype.hasProvider = function (providerType) {
                if (Orckestra.Composer[providerType]) {
                    return true;
                }
                return false;
            };
            /**
             * Gets an instance of a Checkout Payment provider. If the provider does not exists, throws an
             * error.
             * @param  {string}                   providerType                  Type of the provider.
             * @param  {string}                   providerName                  Name of the provider.
             * @return {ICheckoutPaymentProvider}                               Instance of the provider.
             */
            CheckoutPaymentProviderFactory.prototype.getInstance = function (providerType, providerName) {
                if (this.hasProvider(providerType)) {
                    var Clazz = Orckestra.Composer[providerType];
                    var instance = new Clazz(this._window, providerName, this._eventHub);
                    return instance;
                }
                throw new Error('Unable to find a class named "' + providerType + '".');
            };
            return CheckoutPaymentProviderFactory;
        }());
        Composer.CheckoutPaymentProviderFactory = CheckoutPaymentProviderFactory;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='Services/IPaymentService.ts' />
///<reference path='Services/PaymentService.ts' />
///<reference path='Repositories/PaymentRepository.ts' />
///<reference path='Providers/BaseCheckoutPaymentProvider.ts' />
///<reference path='Providers/CheckoutPaymentProviderFactory.ts' />
///<reference path='ViewModels/IPaymentViewModel.ts' />
///<reference path='ViewModels/IActivePaymentViewModel.ts' />
///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/ErrorHandling/ErrorHandler.ts' />
///<reference path='../../../../Composer.Cart.UI/CheckoutCommon/Source/TypeScript/CheckoutService.ts' />
///<reference path='../../../../Composer.Cart.UI/CheckoutCommon/Source/TypeScript/BaseCheckoutController.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var CheckoutPaymentController = (function (_super) {
            __extends(CheckoutPaymentController, _super);
            function CheckoutPaymentController() {
                _super.apply(this, arguments);
                /**
                 * this prevents changing payment method more than once per click
                 * this happens when "new credit card" is selected since we need to
                 * listen for both click and change events to handle both when we
                 * change to new credit card or when new CC is already selected and
                 * we want to come back to the new CC screen
                 */
                this.debounceChangePaymentMethod = _.debounce(this.executeChangePaymentMethod, 300);
            }
            CheckoutPaymentController.prototype.initialize = function () {
                var _this = this;
                _super.prototype.initialize.call(this);
                this._window = window;
                this.viewModelName = 'CheckoutPayment';
                this.paymentService = new Composer.PaymentService(this.eventHub, new Composer.PaymentRepository());
                this.paymentProviders = this.getPaymentProviders();
                this.eventHub.subscribe('paymentMethodsUpdated', function (_) { return _this.renderData(); });
                this.registerSubscriptions();
            };
            CheckoutPaymentController.prototype.selectCreditCardPaymentMethod = function () {
                if (this.viewModel.CreditCardPaymentMethod) {
                    // If a saved credit card is available select the first one
                    if (this.viewModel.SavedCreditCards.length > 0) {
                        this.payWithSavedCreditCard();
                    }
                    else {
                        this.payWithCreditCard();
                    }
                }
            };
            //TODO is it used ?
            CheckoutPaymentController.prototype.payWithSavedCreditCard = function () {
                var provider = _.first(this.viewModel.SavedCreditCards);
                this.changePaymentMethodInternal(provider.Id, provider.PaymentProviderName);
            };
            //TODO is it used ?
            CheckoutPaymentController.prototype.payWithCreditCard = function () {
                var provider = this.viewModel.CreditCardPaymentMethod;
                this.changePaymentMethodInternal(provider.Id, provider.PaymentProviderName);
            };
            CheckoutPaymentController.prototype.changePaymentMethodInternal = function (activeMethodId, paymentProviderName, paymentType) {
                this.viewModel.IsProviderLoading = true;
                this._busyHandler = _super.prototype.asyncBusy.call(this, { elementContext: $(document), containerContext: $(document) });
                this.debounceChangePaymentMethod({ activeMethodId: activeMethodId, paymentProviderName: paymentProviderName, paymentType: paymentType });
            };
            CheckoutPaymentController.prototype.changePaymentMethod = function (actionContext) {
                var activeMethodId = actionContext.elementContext.data('payment-id');
                var paymentProviderName = actionContext.elementContext.data('payment-provider');
                var paymentType = actionContext.elementContext.data('payment-type');
                this.changePaymentMethodInternal(activeMethodId, paymentProviderName, paymentType);
            };
            CheckoutPaymentController.prototype.executeChangePaymentMethod = function (args) {
                var _this = this;
                var activeMethodId = args.activeMethodId, paymentProviderName = args.paymentProviderName, paymentType = args.paymentType;
                this.setPaymentMethod(this.viewModel.PaymentId, activeMethodId, paymentProviderName, paymentType)
                    .then(function (_) { return _this.checkoutService.getCart(); })
                    .then(function (cart) { return _this.eventHub.publish('cartUpdated', { data: cart }); })
                    .fin(function () {
                    _this.viewModel.IsProviderLoading = false;
                    _this.releaseBusyHandler();
                    _this.renderView();
                    _this.formInstances = _this.registerFormsForValidation(_this.context.container.find('form'));
                });
            };
            CheckoutPaymentController.prototype.renderData = function () {
                var _this = this;
                return this.paymentService
                    .getPaymentMethods(_.map(this.paymentProviders, function (p) { return p.providerName; }))
                    .then(function (vm) {
                    if (!vm) {
                        throw new Error('No viewModel received');
                    }
                    if (_.isEmpty(vm.PaymentMethods)) {
                        throw new Error('No payment method was found.');
                    }
                    _this.viewModel = vm;
                    if (_this.viewModel.ActivePaymentViewModel) {
                        _this.activePaymentProvider = _this.findPaymentProviderByType(vm.ActivePaymentViewModel.ProviderType);
                        return _this.viewModel;
                    }
                    else {
                        var defaultPaymentMethod = _this.findDefaultPaymentMethod(vm.PaymentMethods);
                        // only set the payment method if we found an appropriate default payment method
                        if (!!defaultPaymentMethod) {
                            // If we don't already have an active payment selected
                            // we found a defaultPaymentMethod (either the default or the only one)
                            // there is always going to be at least one (default provider + saved payment methods)
                            return _this.setPaymentMethod(vm.PaymentId, defaultPaymentMethod.Id, defaultPaymentMethod.PaymentProviderName, defaultPaymentMethod.PaymentType);
                        }
                    }
                })
                    .then(function (vm) {
                    _this.renderView();
                    _this.formInstances = _this.registerFormsForValidation(_this.context.container.find('form'));
                })
                    .fail(function (reason) {
                    _this.onInitializePaymentMethodFailed(reason);
                });
            };
            CheckoutPaymentController.prototype.getValidationPromise = function () {
                if (!this.activePaymentProvider || !this.viewModel.ActivePaymentViewModel) {
                    return Q(false);
                }
                if (!this.isValidForUpdate()) {
                    return Q(false);
                }
                return this.activePaymentProvider
                    .validatePayment(this.viewModel.ActivePaymentViewModel);
            };
            CheckoutPaymentController.prototype.getUpdateModelPromise = function () {
                var _this = this;
                return Q.fcall(function () {
                    console.log('Committing payment information.');
                    return _this.activePaymentProvider.submitPayment(_this.viewModel.ActivePaymentViewModel);
                });
            };
            CheckoutPaymentController.prototype.dispose = function () {
                _super.prototype.dispose.call(this);
                _.each(this.paymentProviders, function (p) { return p.dispose(); });
            };
            CheckoutPaymentController.prototype.findDefaultPaymentMethod = function (paymentMethods) {
                var defaultPaymentMethod = _.find(paymentMethods, function (paymentMethod) { return paymentMethod.Default && paymentMethod.IsValid; });
                if (!!defaultPaymentMethod) {
                    return defaultPaymentMethod;
                }
                else {
                    return _.find(paymentMethods, function (paymentMethod) { return paymentMethod.IsValid; });
                }
                //return null;
            };
            CheckoutPaymentController.prototype.onInitializePaymentMethodFailed = function (reason) {
                _super.prototype.removeLoading.call(this);
                console.error('Error while retrieving payment methods', reason);
                Composer.ErrorHandler.instance().outputErrorFromCode('CheckoutRenderFailed');
            };
            CheckoutPaymentController.prototype.renderView = function () {
                this.render(this.viewModelName, this.viewModel);
            };
            CheckoutPaymentController.prototype.setPaymentMethod = function (paymentId, activeMethodId, paymentProviderName, paymentType) {
                var _this = this;
                return this.paymentService.setPaymentMethod({
                    PaymentId: paymentId,
                    PaymentProviderName: paymentProviderName,
                    PaymentMethodId: activeMethodId,
                    PaymentType: paymentType,
                    Providers: _.map(this.paymentProviders, function (p) { return p.providerName; })
                })
                    .then(function (paymentViewModel) {
                    _this.activePaymentProvider = _this.findPaymentProviderByType(paymentViewModel.ActivePaymentViewModel.ProviderType);
                    _this.viewModel = paymentViewModel;
                    Composer.ErrorHandler.instance().removeErrors();
                    return paymentViewModel;
                })
                    .fail(function (reason) {
                    _this.onChangePaymentMethodFailed(reason);
                });
            };
            CheckoutPaymentController.prototype.onChangePaymentMethodFailed = function (reason) {
                if (this.viewModel) {
                    this.viewModel.ActivePaymentViewModel = null;
                    this.viewModel.IsLoading = false;
                }
                console.error('Error while changing the payment method.', reason);
                Composer.ErrorHandler.instance().outputErrorFromCode('PaymentMethodChangeFailed');
            };
            CheckoutPaymentController.prototype.findPaymentProviderByType = function (providerType) {
                var provider = _.find(this.paymentProviders, function (provider) {
                    return provider.providerType === providerType;
                });
                if (!provider) {
                    throw new Error('Unable to resove any payment provider named "' + providerType + '"');
                }
                return provider;
            };
            CheckoutPaymentController.prototype.getPaymentProviders = function () {
                if (_.isEmpty(this.context.viewModel.PaymentProviders)) {
                    console.error('No payment provider was found in the Context.');
                }
                var factory = new Composer.CheckoutPaymentProviderFactory(this._window, this.eventHub);
                var providers = [];
                _.each(this.context.viewModel.PaymentProviders, function (vm) {
                    var provider = factory.getInstance(vm.ProviderType, vm.ProviderName);
                    providers.push(provider);
                });
                return providers;
            };
            CheckoutPaymentController.prototype.releaseBusyHandler = function () {
                if (this._busyHandler) {
                    this._busyHandler.done();
                    this._busyHandler = null;
                }
            };
            return CheckoutPaymentController;
        }(Orckestra.Composer.BaseCheckoutController));
        Composer.CheckoutPaymentController = CheckoutPaymentController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Mvc/ComposerClient.ts' />
///<reference path='../../../../Composer.MyAccount.UI/Common/Source/Typescript/CustomerService.ts' />
///<reference path='../../../CheckoutCommon/Source/Typescript/AddressDto.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var ShippingAddressRegisteredService = (function () {
            function ShippingAddressRegisteredService(customerService) {
                this.customerService = customerService;
            }
            /**
           * Get the customer addresses. The selected shipping address is taken from the cart by default.
           * If no address has been set in the cart, the selected shipping address corresponds to the preferred address.
           */
            ShippingAddressRegisteredService.prototype.getShippingAddresses = function (cart) {
                var _this = this;
                if (!cart) {
                    throw new Error('The cart is required');
                }
                return this.customerService.getAddresses()
                    .then(function (addresses) {
                    addresses.AddressesLoaded = true;
                    addresses.SelectedShippingAddressId = _this.getSelectedShippingAddressId(cart, addresses);
                    return addresses;
                });
            };
            ShippingAddressRegisteredService.prototype.getSelectedShippingAddressId = function (cart, addressList) {
                if (this.isShippingAddressFromCartValid(cart, addressList)) {
                    return cart.ShippingAddress.AddressBookId;
                }
                return this.getPreferredShippingAddressId(addressList);
            };
            ShippingAddressRegisteredService.prototype.isShippingAddressFromCartValid = function (cart, addressList) {
                if (cart.ShippingAddress === undefined) {
                    return false;
                }
                return _.any(addressList.Addresses, function (address) { return address.Id === cart.ShippingAddress.AddressBookId; });
            };
            ShippingAddressRegisteredService.prototype.getPreferredShippingAddressId = function (addressList) {
                var preferredShippingAddress = _.find(addressList.Addresses, function (address) { return address.IsPreferredShipping; });
                return preferredShippingAddress === undefined ? undefined : preferredShippingAddress.Id;
            };
            return ShippingAddressRegisteredService;
        }());
        Composer.ShippingAddressRegisteredService = ShippingAddressRegisteredService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Repositories/CustomerRepository.ts' />
///<reference path='../../../../Composer.MyAccount.UI/Common/Source/Typescript/CustomerService.ts' />
///<reference path='../../../../Composer.MyAccount.UI/Common/Source/Typescript/MyAccountEvents.ts' />
///<reference path='../../../../Composer.MyAccount.UI/Common/Source/Typescript/MyAccountStatus.ts' />
///<reference path='../../../CheckoutCommon/source/Typescript/BaseCheckoutController.ts' />
///<reference path='ShippingAddressRegisteredService.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/UI/UIModal.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var ShippingAddressRegisteredController = (function (_super) {
            __extends(ShippingAddressRegisteredController, _super);
            function ShippingAddressRegisteredController() {
                _super.apply(this, arguments);
                this.debounceChangeShippingMethod = _.debounce(this.changeShippingAddressImpl, 500, { 'leading': true });
                this.customerService = new Composer.CustomerService(new Composer.CustomerRepository());
                this.shippingAddressRegisteredService = new Composer.ShippingAddressRegisteredService(this.customerService);
            }
            ShippingAddressRegisteredController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.viewModelName = 'ShippingAddressRegistered';
                this.deleteModalElementSelector = '#confirmationModal';
                this.uiModal = new Composer.UIModal(window, this.deleteModalElementSelector, this.deleteAddress, this);
            };
            ShippingAddressRegisteredController.prototype.registerSubscriptions = function () {
                var _this = this;
                this.eventHub.subscribe(this.viewModelName + "Rendered", function (e) { return _this.onRendered(e); });
                this.eventHub.subscribe(Composer.MyAccountEvents[Composer.MyAccountEvents.AddressDeleted], function (e) { return _this.onAddressDeleted(e); });
            };
            ShippingAddressRegisteredController.prototype.renderData = function (checkoutContext) {
                var _this = this;
                if (checkoutContext.authenticationViewModel.IsAuthenticated) {
                    this.registerSubscriptions();
                    this.render(this.viewModelName, { IsAuthenticated: true, GettingCart: true });
                    return this.shippingAddressRegisteredService.getShippingAddresses(checkoutContext.cartViewModel)
                        .then(function (shippingAdressesVm) {
                        _this.render(_this.viewModelName, checkoutContext.cartViewModel);
                        _this.render('RegisteredAddresses', shippingAdressesVm);
                    })
                        .fail(function (reason) { return _this.handleError(reason); })
                        .fin(function () { return _this.eventHub.publish(_this.viewModelName + "Rendered", checkoutContext.cartViewModel); });
                }
                else {
                    this.unregisterController();
                    this.render(this.viewModelName, checkoutContext.authenticationViewModel);
                }
            };
            ShippingAddressRegisteredController.prototype.onRendered = function (e) {
                var _this = this;
                this.formInstances = this.registerFormsForValidation($('#RegisteredShippingAddress', this.context.container));
                var selectedShippingAddressId = $(this.context.container).find('input[name=ShippingAddressId]:checked').val();
                if (!selectedShippingAddressId) {
                    return;
                }
                this.checkoutService.getCart()
                    .done(function (cart) {
                    if (selectedShippingAddressId !== cart.ShippingAddress.AddressBookId) {
                        _this.debounceChangeShippingMethod();
                    }
                });
            };
            ShippingAddressRegisteredController.prototype.onAddressDeleted = function (e) {
                var addressId = e.data;
                var $addressListItem = $(this.context.container).find('[data-address-id=' + addressId + ']');
                $addressListItem.remove();
            };
            ShippingAddressRegisteredController.prototype.changeShippingAddress = function (actionContext) {
                this.debounceChangeShippingMethod();
            };
            ShippingAddressRegisteredController.prototype.changeShippingAddressImpl = function () {
                var _this = this;
                this.eventHub.publish('cartUpdating', null);
                this.checkoutService.updateCart()
                    .done(function (result) {
                    if (result.HasErrors) {
                        throw new Error('The updated cart contains errors');
                    }
                    _this.eventHub.publish('cartUpdated', { data: result.Cart });
                }, function (reason) { return _this.handleError(reason); });
            };
            ShippingAddressRegisteredController.prototype.deleteAddressConfirm = function (actionContext) {
                this.uiModal.openModal(actionContext.event);
            };
            ShippingAddressRegisteredController.prototype.deleteAddress = function (event) {
                var _this = this;
                var element = $(event.target);
                var $addressListItem = element.closest('[data-address-id]');
                var addressId = $addressListItem.data('address-id');
                var busy = this.asyncBusy({ elementContext: element, containerContext: $addressListItem });
                return this.customerService.deleteAddress(addressId, '')
                    .then(function (result) {
                    _this.eventHub.publish(Composer.MyAccountEvents[Composer.MyAccountEvents.AddressDeleted], { data: addressId });
                })
                    .fail(function () { return _this.renderFailedForm(Composer.MyAccountStatus[Composer.MyAccountStatus.AjaxFailed]); })
                    .fin(function () { return busy.done(); });
            };
            ShippingAddressRegisteredController.prototype.renderFailedForm = function (status) {
                //TODO
            };
            ShippingAddressRegisteredController.prototype.handleError = function (reason) {
                this.eventHub.publish('cartUpdatingFailed', null);
                console.error('The user changed the shipping address, but we were unable to estimate shipping dynamically', reason);
            };
            return ShippingAddressRegisteredController;
        }(Orckestra.Composer.BaseCheckoutController));
        Composer.ShippingAddressRegisteredController = ShippingAddressRegisteredController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Events/IEventHub.ts' />
///<reference path='../../../../Composer.Cart.UI/CartSummary/Source/Typescript/CartService.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var ShippingAddressCheckoutService = (function () {
            function ShippingAddressCheckoutService(cartService, eventHub) {
                if (!cartService) {
                    throw new Error('Error: cartService is required');
                }
                if (!eventHub) {
                    throw new Error('Error: eventHub is required');
                }
                this.cartService = cartService;
                this.eventHub = eventHub;
            }
            ShippingAddressCheckoutService.prototype.setCheapestShippingMethodUsing = function (postalCode) {
                var _this = this;
                this.eventHub.publish('cartUpdating', null);
                return this.cartService.updateShippingMethodPostalCode(postalCode)
                    .then(function () { return _this.cartService.setCheapestShippingMethod(); })
                    .then(function () { return _this.cartService.getCart(); })
                    .then(function (cart) {
                    _this.eventHub.publish('cartUpdated', { data: cart });
                    _this.eventHub.publish('postalCodeChanged', { data: cart });
                })
                    .fail(function (reason) { return _this.handleError(reason); });
            };
            ShippingAddressCheckoutService.prototype.handleError = function (reason) {
                console.error('The user changed the postal code, ' +
                    'but we were unable to update the cart dynamically and estimate shipping fees', reason);
                this.eventHub.publish('cartUpdatingFailed', null);
            };
            return ShippingAddressCheckoutService;
        }());
        Composer.ShippingAddressCheckoutService = ShippingAddressCheckoutService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../CheckoutCommon/source/Typescript/BaseCheckoutController.ts' />
///<reference path='../../../CartSummary/Source/Typescript/CartService.ts' />
///<reference path='ShippingAddressCheckoutService.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var ShippingAddressCheckoutController = (function (_super) {
            __extends(ShippingAddressCheckoutController, _super);
            function ShippingAddressCheckoutController() {
                _super.apply(this, arguments);
                this.shippingAddressCheckoutService = new Composer.ShippingAddressCheckoutService(new Composer.CartService(new Composer.CartRepository(), this.eventHub), this.eventHub);
            }
            ShippingAddressCheckoutController.prototype.initialize = function () {
                this.viewModelName = 'ShippingAddress';
                _super.prototype.initialize.call(this);
            };
            ShippingAddressCheckoutController.prototype.renderData = function (checkoutContext) {
                var _this = this;
                return Q.fcall(function () {
                    if (checkoutContext.authenticationViewModel.IsAuthenticated) {
                        _this.unregisterController();
                        _this.render(_this.viewModelName, checkoutContext.authenticationViewModel);
                    }
                    else {
                        _this.registerSubscriptions();
                        _this.render(_this.viewModelName, checkoutContext.cartViewModel);
                        _this.render('AddressRegionPicker', {
                            Regions: checkoutContext.regionsViewModel,
                            SelectedRegion: _this.getRegionCode(checkoutContext.cartViewModel)
                        });
                        _this.eventHub.publish(_this.viewModelName + "Rendered", checkoutContext.cartViewModel);
                    }
                });
            };
            ShippingAddressCheckoutController.prototype.getRegionCode = function (cart) {
                if (cart.ShippingAddress === undefined || cart.ShippingAddress.RegionCode === undefined) {
                    return '';
                }
                return cart.ShippingAddress.RegionCode;
            };
            ShippingAddressCheckoutController.prototype.changePostalCode = function (actionContext) {
                var context = actionContext.elementContext;
                context.val(context.val().toUpperCase());
                if (!this.isValidForUpdate()) {
                    return;
                }
                var postalCode = context.val();
                this.shippingAddressCheckoutService.setCheapestShippingMethodUsing(postalCode).done();
            };
            return ShippingAddressCheckoutController;
        }(Orckestra.Composer.BaseCheckoutController));
        Composer.ShippingAddressCheckoutController = ShippingAddressCheckoutController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../CheckoutCommon/source/Typescript/BaseCheckoutController.ts' />
///<reference path='ShippingMethodService.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var ShippingMethodCheckoutController = (function (_super) {
            __extends(ShippingMethodCheckoutController, _super);
            function ShippingMethodCheckoutController() {
                _super.apply(this, arguments);
                this.debounceMethodSelected = _.debounce(this.methodSelectedImpl, 500, { 'leading': true });
            }
            ShippingMethodCheckoutController.prototype.initialize = function () {
                this.viewModelName = 'ShippingMethod';
                _super.prototype.initialize.call(this);
            };
            ShippingMethodCheckoutController.prototype.renderData = function (checkoutContext) {
                var _this = this;
                return Q.fcall(function () {
                    var selectedShippingMethodName = '';
                    if (!_.isUndefined(checkoutContext.cartViewModel.ShippingMethod)) {
                        selectedShippingMethodName = checkoutContext.cartViewModel.ShippingMethod.Name;
                        checkoutContext.shippingMethodsViewModel.ShippingMethods.forEach(function (shippingMethod) {
                            if (shippingMethod.Name === selectedShippingMethodName) {
                                checkoutContext.shippingMethodsViewModel.SelectedShippingProviderId = shippingMethod.ShippingProviderId;
                            }
                        });
                    }
                    _this.render(_this.viewModelName, {
                        Methods: checkoutContext.shippingMethodsViewModel,
                        SelectedMethod: selectedShippingMethodName,
                        HasMethods: !_.isEmpty(checkoutContext.shippingMethodsViewModel.ShippingMethods)
                    });
                    _this.eventHub.publish(_this.viewModelName + "Rendered", null);
                });
            };
            ShippingMethodCheckoutController.prototype.methodSelected = function (actionContext) {
                Composer.ErrorHandler.instance().removeErrors();
                this.debounceMethodSelected(actionContext);
            };
            ShippingMethodCheckoutController.prototype.methodSelectedImpl = function (actionContext) {
                var _this = this;
                this.eventHub.publish('cartUpdating', null);
                this.updateShippingProviderId(actionContext)
                    .then(function () { return _this.checkoutService.updateCart(); })
                    .then(function (result) {
                    if (result.HasErrors) {
                        throw new Error('The updated cart contains errors');
                    }
                    _this.eventHub.publish('cartUpdated', { data: result.Cart });
                })
                    .fail(function (reason) { return _this.handleError(reason); });
            };
            ShippingMethodCheckoutController.prototype.updateShippingProviderId = function (actionContext) {
                return Q.fcall(function () {
                    var shippingProviderId = actionContext.elementContext.data('shipping-provider-id');
                    $('#ShippingProviderId').val(shippingProviderId.toString());
                });
            };
            ShippingMethodCheckoutController.prototype.handleError = function (reason) {
                this.eventHub.publish('cartUpdatingFailed', null);
                console.error('The user changed the shipping method, but we were unable to update the cart dynamically', reason);
                Composer.ErrorHandler.instance().outputErrorFromCode('ShippingMethodUpdateFailed');
            };
            return ShippingMethodCheckoutController;
        }(Orckestra.Composer.BaseCheckoutController));
        Composer.ShippingMethodCheckoutController = ShippingMethodCheckoutController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Events/EventHub.ts' />
///<reference path='../../../../Composer.Cart.UI/CartSummary/Source/Typescript/CartService.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var CouponService = (function () {
            function CouponService(cartService, eventHub) {
                if (!cartService) {
                    throw new Error('Error: cartService is required');
                }
                if (!eventHub) {
                    throw new Error('Error: eventHub is required');
                }
                this.cartService = cartService;
                this.eventHub = eventHub;
            }
            /**
            * Adds a coupon using the Composer API.
            * @param couponCode Code of the Coupon to add through the API.
            */
            CouponService.prototype.addCoupon = function (couponCode) {
                var _this = this;
                var data = {
                    CouponCode: couponCode
                };
                this.eventHub.publish('couponUpdating', { data: data });
                return this.cartService.addCoupon(couponCode)
                    .then(function () { return _this.cartService.getCart(); })
                    .then(function (cart) {
                    _this.eventHub.publish('cartUpdated', { data: cart });
                    _this.publishCouponUpdatedEvent(cart, true);
                }, function (reason) {
                    console.error('Error while adding coupon', reason);
                    _this.publishCouponUpdatedEvent(undefined, false);
                });
            };
            /**
             * Removes a coupon using the Composer API
             * @param {String} couponCode Code of the coupon to remove.
             */
            CouponService.prototype.removeCoupon = function (couponCode) {
                var _this = this;
                var data = {
                    CouponCode: couponCode
                };
                return this.cartService.removeCoupon(couponCode)
                    .then(function () { return _this.cartService.getCart(); })
                    .then(function (cart) {
                    _this.eventHub.publish('cartUpdated', { data: cart });
                    _this.publishCouponUpdatedEvent(cart, true);
                }, function (reason) { return _this.publishCouponUpdatedEvent(undefined, false); });
            };
            CouponService.prototype.publishCouponUpdatedEvent = function (result, isSuccess) {
                this.eventHub.publish('couponUpdated', { data: result });
            };
            return CouponService;
        }());
        Composer.CouponService = CouponService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Repositories/CartRepository.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/JQueryPlugins/ISerializeObjectJqueryPlugin.ts' />
///<reference path='./CouponService.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        /**
         * Controller for the Coupons section.
         */
        var CouponController = (function (_super) {
            __extends(CouponController, _super);
            function CouponController() {
                _super.apply(this, arguments);
                this.couponService = new Composer.CouponService(new Composer.CartService(new Composer.CartRepository(), this.eventHub), this.eventHub);
                this.isFirstLoad = true;
            }
            CouponController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.registerSubscriptions();
            };
            /**
             * Registers events on the eventHub.
             */
            CouponController.prototype.registerSubscriptions = function () {
                var _this = this;
                this.eventHub.subscribe('cartUpdated', function (eventInfo) {
                    var cart = eventInfo.data;
                    _this.render(_this.isFirstLoad || _.isEmpty(cart) || cart.IsCartEmpty ? 'CouponsSummary' : 'Coupons', cart);
                    _this.isFirstLoad = false;
                });
                this.eventHub.subscribe('couponUpdated', function (e) {
                    _this.onCouponUpdated(e.data);
                });
            };
            /**
             * Event triggered when adding a coupon.
             * @param {IControllerActionContext} actionContext - Event context.
             */
            CouponController.prototype.applyCoupon = function (actionContext) {
                actionContext.event.preventDefault();
                var formData = actionContext.elementContext.serializeObject();
                if (_.isEmpty(formData.couponCode)) {
                    console.log('The coupon code may not be null');
                    return;
                }
                var busy = this.asyncBusy({ elementContext: actionContext.elementContext, msDelay: 300 });
                this.couponService.addCoupon(formData.couponCode)
                    .done(function () { return busy.done(); });
            };
            /**
             * Event triggered when removing a coupon.
             * @param {IControllerActionContext} actionContext - Event context.
             */
            CouponController.prototype.removeCoupon = function (actionContext) {
                var couponCode = actionContext.elementContext.data('couponcode');
                if (_.isEmpty(couponCode)) {
                    console.log('The coupon code may not be null');
                    return;
                }
                var busy = this.asyncBusy({ elementContext: actionContext.elementContext });
                this.couponService.removeCoupon(couponCode.toString())
                    .done(function () { return busy.done(); });
            };
            /**
             * Event handler for coupon updated. Fires even if request fails.
             * @param {any} viewModel - ViewModel received by the request. May be undefined if the request failed.
             */
            CouponController.prototype.onCouponUpdated = function (viewModel) {
                var formElement = this.getCouponForm();
                var hasErrorMessage = (!viewModel) || _.some(viewModel.Coupons.Messages, function (m) { return m.Level === 'danger'; });
                if (!hasErrorMessage) {
                    formElement.trigger('reset');
                }
            };
            /**
             * Gets the coupon form handled by this Controller.
             * @return {JQuery} JQuery element matching the first form.
             */
            CouponController.prototype.getCouponForm = function () {
                var forms = $(this.context.container).find('form:first');
                return forms;
            };
            return CouponController;
        }(Orckestra.Composer.Controller));
        Composer.CouponController = CouponController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='./IGetOrderDetailsUrlRequest.ts' />
///<reference path='./IGuestOrderDetailsViewModel.ts' />

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Events/IEventHub.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/ComposerClient.ts' />
///<reference path='./IFindOrderService.ts' />
///<reference path='./IGetOrderDetailsUrlRequest.ts' />
///<reference path='./IGuestOrderDetailsViewModel.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var FindOrderService = (function () {
            function FindOrderService(eventHub) {
                this.eventHub = eventHub;
            }
            FindOrderService.prototype.getOrderDetailsUrl = function (req) {
                var _this = this;
                var promise = Composer.ComposerClient.post('/api/order/url', req)
                    .then(function (vm) {
                    _this.eventHub.publish('orderDetailsUrlUpdated', {
                        data: vm
                    });
                    return vm;
                });
                return promise;
            };
            return FindOrderService;
        }());
        Composer.FindOrderService = FindOrderService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/jqueryPlugins/ISerializeObjectJqueryPlugin.ts' />
///<reference path='./IFindOrderService.ts' />
///<reference path='./FindOrderService.ts' />
///<reference path='./IGetOrderDetailsUrlRequest.ts' />
///<reference path='./IGuestOrderDetailsViewModel.ts' />
///<reference path='./IFindMyOrderViewModel.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var FindMyOrderController = (function (_super) {
            __extends(FindMyOrderController, _super);
            function FindMyOrderController() {
                _super.apply(this, arguments);
            }
            FindMyOrderController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.registerFormsForValidation(this.context.container.find('form'));
                this.findOrderService = new Composer.FindOrderService(this.eventHub);
            };
            FindMyOrderController.prototype.getWindow = function () {
                return window;
            };
            FindMyOrderController.prototype.onFindMyOrder = function (actionContext) {
                var _this = this;
                actionContext.event.preventDefault();
                var busy = this.asyncBusy();
                var request = actionContext.elementContext.serializeObject();
                this.findOrderAsync(request)
                    .then(function (vm) {
                    _this.getWindow().location.href = vm.Url;
                })
                    .fail(function (reason) {
                    busy.done();
                    if (reason.status && reason.status === 404) {
                        _this.handleOrderNotFound(reason, request);
                    }
                    else {
                        console.error(reason);
                    }
                });
            };
            FindMyOrderController.prototype.findOrderAsync = function (request) {
                return this.findOrderService.getOrderDetailsUrl(request);
            };
            FindMyOrderController.prototype.handleOrderNotFound = function (reason, request) {
                var vm = {
                    Email: request.Email,
                    OrderNumber: request.OrderNumber,
                    OrderNotFound: true
                };
                this.render('FindMyOrder', vm);
            };
            return FindMyOrderController;
        }(Orckestra.Composer.Controller));
        Composer.FindMyOrderController = FindMyOrderController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../Typings/tsd.d.ts' />

///<reference path='../../Typings/tsd.d.ts' />
///<reference path='./IScheduledCallback.ts' />
///<reference path='./EventHub.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        /**
         * Class in charge of scheduling multiple calls to an event.
         * This class is a multiton. Please use the instance() method to get an instance.
         */
        var EventScheduler = (function () {
            /**
             * Constructor. Should be used for testing purposes and inside the multiton only.
             * @param eventName The name of the event to subscribe to.
             */
            function EventScheduler(eventName) {
                var _this = this;
                var instance = EventScheduler.instances[eventName];
                if (instance) {
                    throw new Error('Error: Instantiation failed: Use EventScheduler.instance(eventName: string) instead of new.');
                }
                this.eventName = eventName;
                this.onEventCallbacks = [];
                Composer.EventHub.instance().subscribe(this.eventName, function (e) { return _this.trigger(e.data); });
            }
            /**
             * Get an instance of the EventScheduler for a specific event.
             * @param eventName The name of the event to listen to.
             */
            EventScheduler.instance = function (eventName) {
                var instance = EventScheduler.instances[eventName];
                if (!instance) {
                    instance = new EventScheduler(eventName);
                    EventScheduler.instances[eventName] = instance;
                }
                return instance;
            };
            /**
             * Subscribes a callback to the EventScheduler.
             * @param callback Function to call when the event arises. Must return a promise.
             */
            EventScheduler.prototype.subscribe = function (callback) {
                this.onEventCallbacks.push(callback);
            };
            /**
             * Sets the callback method that will be invoked after all the others are done executing.
             * @param postEventCallback Function to call when all other callbacks have been executed.
             */
            EventScheduler.prototype.setPostEventCallback = function (postEventCallback) {
                this.postEventCallback = postEventCallback;
            };
            EventScheduler.prototype.trigger = function (data) {
                var _this = this;
                var promise = this.triggerCallbacks(data);
                promise
                    .then(function (data) { return _this.triggerPostEvent(data); })
                    .done(function () { return console.log("Event '" + _this.eventName + "' fulfilled by the Event Schedule successfully."); }, function (reason) { return _this.onError(reason); });
            };
            EventScheduler.prototype.triggerCallbacks = function (data) {
                var promise;
                if (_.isEmpty(this.onEventCallbacks)) {
                    promise = Q(data);
                }
                else {
                    var promises = _.map(this.onEventCallbacks, function (callback) { return callback(data); });
                    promise = Q.all(promises)
                        .then(function (values) {
                        return data;
                    });
                }
                return promise;
            };
            EventScheduler.prototype.triggerPostEvent = function (data) {
                var promise;
                if (this.postEventCallback) {
                    promise = this.postEventCallback(data);
                }
                else {
                    promise = Q(data);
                }
                return promise;
            };
            /**
             * Gets invoked when an error occurs while executing the promises chain.
             */
            EventScheduler.prototype.onError = function (reason) {
                console.error("An error occured while processing the event '" + this.eventName + "' with the EventScheduler.", reason);
            };
            EventScheduler.instances = {};
            return EventScheduler;
        }());
        Composer.EventScheduler = EventScheduler;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Events/EventScheduler.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Repositories/CartRepository.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Events/EventHub.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Events/IEventInformation.ts' />
///<reference path='../../../CartSummary/Source/Typescript/CartService.ts' />
///<reference path='../../../../Composer.MyAccount.UI/Common/Source/Typescript/MyAccountEvents.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var MiniCartController = (function (_super) {
            __extends(MiniCartController, _super);
            function MiniCartController() {
                _super.apply(this, arguments);
                this.cartService = new Composer.CartService(new Composer.CartRepository(), this.eventHub);
            }
            MiniCartController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.initializeMiniCartQuantity();
                this.registerSubscriptions();
            };
            MiniCartController.prototype.initializeMiniCartQuantity = function () {
                var _this = this;
                this.cartService.getCart()
                    .done(function (cart) {
                    if (!_.isEmpty(cart)) {
                        _this.renderCart(cart);
                    }
                });
            };
            MiniCartController.prototype.registerSubscriptions = function () {
                var _this = this;
                var loggedInScheduler = Composer.EventScheduler.instance(Composer.MyAccountEvents[Composer.MyAccountEvents.LoggedIn]);
                var loggedOutScheduler = Composer.EventScheduler.instance(Composer.MyAccountEvents[Composer.MyAccountEvents.LoggedOut]);
                this.eventHub.subscribe('cartUpdated', function (e) { return _this.onCartUpdated(e); });
                loggedOutScheduler.subscribe(function (e) { return _this.onRefreshUser(e); });
                loggedInScheduler.subscribe(function (e) { return _this.onRefreshUser(e); });
            };
            MiniCartController.prototype.onCartUpdated = function (e) {
                var cart = e.data;
                this.renderCart(cart);
            };
            MiniCartController.prototype.onRefreshUser = function (e) {
                return this.cartService.invalidateCache();
            };
            MiniCartController.prototype.renderCart = function (cart) {
                var viewModel = (_.isEmpty(cart) || cart.TotalQuantity === 0) ? {} : cart;
                this.render('MinicartQuantity', viewModel);
            };
            MiniCartController.prototype.onError = function (reason) {
                console.error("An error occured while rendering the cart with the MiniCartController.", reason);
            };
            return MiniCartController;
        }(Orckestra.Composer.Controller));
        Composer.MiniCartController = MiniCartController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Events/EventScheduler.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Repositories/CartRepository.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Events/EventHub.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Events/IEventInformation.ts' />
///<reference path='../../../../Composer.Analytics.UI/Analytics/Source/Typescript/GoogleAnalyticsPlugin.ts' />
///<reference path='../../../CartSummary/Source/Typescript/CartService.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var MiniCartSummaryController = (function (_super) {
            __extends(MiniCartSummaryController, _super);
            function MiniCartSummaryController() {
                _super.apply(this, arguments);
                this.cartService = new Composer.CartService(new Composer.CartRepository(), this.eventHub);
                this.cacheProvider = Composer.CacheProvider.instance();
            }
            MiniCartSummaryController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.initializeMiniCartSummary();
                this.registerSubscriptions();
            };
            MiniCartSummaryController.prototype.registerSubscriptions = function () {
                var _this = this;
                this.eventHub.subscribe('cartUpdated', function (e) {
                    _this.renderMiniCart(e.data);
                });
                this.eventHub.subscribe('lineItemAddedToCart', function (e) {
                    _this.displayMiniCart(e);
                });
                this.eventHub.subscribe('languageSwitched', function (e) {
                    _this.invalidateCart(e);
                });
            };
            MiniCartSummaryController.prototype.invalidateCart = function (e) {
                this.cartService.invalidateCache();
                this.initializeMiniCartSummary();
            };
            MiniCartSummaryController.prototype.displayMiniCart = function (e) {
                var miniCartContainer = $(this.context.container);
                var notificationTime = parseInt(miniCartContainer.data('notificationTime'), 10);
                var scrollToLineItemKey = e.data.ProductId + '-' + (e.data.VariantId || '');
                if (notificationTime > 0) {
                    miniCartContainer.addClass('displayMiniCart');
                    // Scroll to added item
                    $('.minicart-summary-products', miniCartContainer).stop().animate({
                        scrollTop: $('[data-lineitem-id="' + scrollToLineItemKey + '"]', miniCartContainer).position().top
                    }, 1000);
                    setTimeout(function () {
                        miniCartContainer.removeClass('displayMiniCart');
                    }, notificationTime);
                }
            };
            MiniCartSummaryController.prototype.onCloseMiniCart = function (e) {
                var miniCartContainer = $(this.context.container);
                miniCartContainer.addClass('hidden');
                setTimeout(function () {
                    miniCartContainer.removeClass('hidden');
                }, 500);
            };
            MiniCartSummaryController.prototype.onCheckout = function (actionContext) {
                // Set origin of checkout that we will be used in AnalyticsPlugin
                Composer.AnalyticsPlugin.setCheckoutOrigin('Mini Cart Checkout');
            };
            MiniCartSummaryController.prototype.initializeMiniCartSummary = function () {
                var _this = this;
                var busy = this.asyncBusy({ containerContext: this.context.container });
                this.cartService.getCart().done(function (cart) {
                    if (!_.isEmpty(cart)) {
                        _this.renderMiniCart(cart);
                    }
                    busy.done();
                });
            };
            MiniCartSummaryController.prototype.renderMiniCart = function (cart) {
                this.render('MinicartSummary', cart);
            };
            return MiniCartSummaryController;
        }(Orckestra.Composer.Controller));
        Composer.MiniCartSummaryController = MiniCartSummaryController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path="../../../CheckoutPayment/source/Typescript/ViewModels/IActivePaymentViewModel.ts" />



'use strict';

///<reference path='./ICreateVaultTokenOptions.ts' />
///<reference path='./ISetDefaultCustomerPaymentMethodViewModel.ts' />
///<reference path='./IMonerisAddVaultProfileViewModel.ts' />
///<reference path='../../../CheckoutPayment/source/Typescript/ViewModels/IPaymentMethodViewModel.ts' />
///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Mvc/ComposerClient.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var MonerisPaymentService = (function () {
            function MonerisPaymentService() {
            }
            /**
             * Adds a token from Moneris to the current payment.
             * @param  {ICreateVaultTokenOptions} request Request to add the Vault Token.
             * @return {Q.Promise<any>}                   Promise of the AJAX request.
             */
            MonerisPaymentService.prototype.addCreditCard = function (request) {
                return Composer.ComposerClient.post('/api/vaultprofile/addprofile', request);
            };
            MonerisPaymentService.prototype.setDefaultCustomerPaymentMethod = function (request) {
                return Composer.ComposerClient.put('/api/cart/setdefaultpaymentmethod', request);
            };
            MonerisPaymentService.prototype.removePaymentMethod = function (paymentMethodId, paymentProviderName) {
                return Composer.ComposerClient.remove('/api/payment/removemethod', {
                    PaymentMethodId: paymentMethodId,
                    PaymentProviderName: paymentProviderName
                });
            };
            return MonerisPaymentService;
        }());
        Composer.MonerisPaymentService = MonerisPaymentService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../MonerisPaymentService.ts' />
///<reference path='../../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../../Composer.Cart.UI/CheckoutPayment/Source/Typescript/ViewModels/IActivePaymentViewModel.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var BaseSpecializedMonerisCanadaPaymentProvider = (function () {
            function BaseSpecializedMonerisCanadaPaymentProvider(window, paymentService, eventHub) {
                this._window = window;
                this._paymentService = paymentService;
                this._eventHub = eventHub;
            }
            /**
             * Register event handlers for dom events
             */
            BaseSpecializedMonerisCanadaPaymentProvider.prototype.registerDomEvents = function () {
                // do nothing
            };
            /**
             * Unregister event handlers for dom events
             */
            BaseSpecializedMonerisCanadaPaymentProvider.prototype.unregisterDomEvents = function () {
                // do nothing
            };
            /**
             * Method called to get a promise for payment validation.
             * Returns a promise of boolean. The return boolean needs to be false for validation error,
             * or true if valid.
             * @param   {IActivePaymentViewModel}   The current active payment view model
             * @return  {Q.Promise<boolean>}        Promise that will be executed when we validate the payment control.
             */
            BaseSpecializedMonerisCanadaPaymentProvider.prototype.validatePayment = function (activePaymentVM) {
                return Q(true);
            };
            /**
             * Add the temporary token to the vault profile of the user
             * @param   {IActivePaymentViewModel}   The current active payment view model
             * @return  {Q.Promise<any>}            The object is the updated properties of the cart used in CheckoutService.updateCart()
             */
            BaseSpecializedMonerisCanadaPaymentProvider.prototype.addVaultProfileToken = function (activePaymentVM) {
                return Q({});
            };
            return BaseSpecializedMonerisCanadaPaymentProvider;
        }());
        Composer.BaseSpecializedMonerisCanadaPaymentProvider = BaseSpecializedMonerisCanadaPaymentProvider;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='BaseSpecializedMonerisCanadaPaymentProvider.ts' />
///<reference path='../MonerisPaymentService.ts' />
///<reference path='../IMonerisResponseData.ts' />
///<reference path='../../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../../Composer.UI/Source/Typescript/JQueryPlugins/ISerializeObjectJqueryPlugin.ts' />
///<reference path='../../../../../Composer.UI/Source/Typescript/ErrorHandling/ErrorHandler.ts' />
///<reference path='../../../../../Composer.Cart.UI/CheckoutPayment/Source/Typescript/ViewModels/IActivePaymentViewModel.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var CreditCardMonerisCanadaPaymentProvider = (function (_super) {
            __extends(CreditCardMonerisCanadaPaymentProvider, _super);
            function CreditCardMonerisCanadaPaymentProvider(window, paymentService, eventHub) {
                _super.call(this, window, paymentService, eventHub);
            }
            /**
             * Register event handlers for dom events
             */
            CreditCardMonerisCanadaPaymentProvider.prototype.registerDomEvents = function () {
                $(this._window).on('message.composer', this.handleMessageResponse.bind(this));
            };
            /**
             * Unregister event handlers for dom events
             */
            CreditCardMonerisCanadaPaymentProvider.prototype.unregisterDomEvents = function () {
                $(this._window).off('message.composer', this.handleMessageResponse);
            };
            /**
             * Method called to get a promise for payment validation.
             * Returns a promise of boolean. The return boolean needs to be false for validation error,
             * or true if valid.
             * @param   {IActivePaymentViewModel}   The current active payment view model
             * @return  {Q.Promise<boolean>}        Promise that will be executed when we validate the payment control.
             */
            CreditCardMonerisCanadaPaymentProvider.prototype.validatePayment = function (activePaymentVM) {
                var _this = this;
                return Q
                    .fcall(function () { return _this.collectAndValidateFormData(); })
                    .then(function (_) {
                    _this.hideAllMonerisErrors();
                    _this._validationDefer = Q.defer();
                    _this._validationDefer.promise
                        .then(function (monerisRes) {
                        _this._validationDefer = null;
                        if (!monerisRes.dataKey) {
                            throw new Error('Moneris did not return a dataKey.');
                        }
                        _this._monerisResponseData = monerisRes;
                        return true;
                    });
                    if (_this._monerisResponseData) {
                        _this._validationDefer.resolve(_this._monerisResponseData);
                    }
                    else {
                        _this.getMonerisIFrame().contentWindow.postMessage('', activePaymentVM.CapturePaymentUrl);
                    }
                    return _this._validationDefer.promise;
                });
            };
            CreditCardMonerisCanadaPaymentProvider.prototype.validateMonerisIFrame = function (vm) {
                var _this = this;
                var monerisFrame = this.getMonerisIFrame();
                var monerisContentWindow = monerisFrame.contentWindow;
                var promise;
                this.hideAllMonerisErrors();
                this._validationDefer = Q.defer();
                promise = this._validationDefer.promise
                    .then(function (monerisRes) {
                    _this._validationDefer = null;
                    if (!monerisRes.dataKey) {
                        throw new Error('Moneris did not return a dataKey.');
                    }
                    _this._monerisResponseData = monerisRes;
                    return true;
                });
                if (this._monerisResponseData) {
                    this._validationDefer.resolve(this._monerisResponseData);
                }
                else {
                    monerisContentWindow.postMessage('', vm.CapturePaymentUrl);
                }
                return this._validationDefer.promise;
            };
            /**
             * Add the temporary token to the vault profile of the user
             * @param   {IActivePaymentViewModel}   The current active payment view model
             * @return  {Q.Promise<any>}            The object is the updated properties of the cart used in CheckoutService.updateCart()
             */
            CreditCardMonerisCanadaPaymentProvider.prototype.addVaultProfileToken = function (activePaymentVM) {
                var _this = this;
                if (!activePaymentVM.ShouldCapturePayment) {
                    return Q({});
                }
                var formData = this.collectAndValidateFormData();
                var request = {
                    CardHolderName: formData.cardholder,
                    CreatePaymentProfile: formData.createPaymentProfile,
                    VaultTokenId: this._monerisResponseData.dataKey,
                    PaymentId: activePaymentVM.Id,
                    PaymentProviderName: activePaymentVM.ProviderName
                };
                console.log('Adding Moneris payment information.');
                return this._paymentService
                    .addCreditCard(request)
                    .then(function (result) {
                    if (!result.Success) {
                        _this._monerisResponseData = null;
                        throw new Error("Moneris: Could not add the credit card to the payment:\n                                                (" + result.ErrorCode + ") " + result.ErrorMessage);
                    }
                    activePaymentVM.ShouldCapturePayment = false;
                    return {};
                });
            };
            CreditCardMonerisCanadaPaymentProvider.prototype.handleMessageResponse = function (e) {
                var monerisEvent = e.originalEvent;
                var msgData = monerisEvent.data;
                var responseData = JSON.parse(monerisEvent.data);
                if (responseData.errorMessage && !_.isEmpty(responseData.errorMessage)) {
                    this.handleMonerisError(monerisEvent, responseData);
                }
                else {
                    this.handleMonerisSuccess(responseData);
                }
            };
            CreditCardMonerisCanadaPaymentProvider.prototype.handleMonerisSuccess = function (responseData) {
                if (!this._validationDefer) {
                    throw new Error('Received Moneris success response, but no validation defer was found.');
                }
                this._validationDefer.resolve(responseData);
            };
            CreditCardMonerisCanadaPaymentProvider.prototype.handleMonerisError = function (monerisEvent, responseData) {
                var errorMsg = monerisEvent.origin + " SENT (" + responseData.responseCode + ") " + responseData.dataKey + "\n            - " + responseData.errorMessage;
                this.showMonerisErrors(responseData.responseCode);
                if (this._validationDefer) {
                    this._validationDefer.reject(new Error(errorMsg));
                }
                else {
                    console.error(errorMsg, responseData);
                }
            };
            CreditCardMonerisCanadaPaymentProvider.prototype.showMonerisErrors = function (errorCodes) {
                var shouldShowGeneral = false;
                _.each(errorCodes, function (code) {
                    var errorNode = $("#monerisError" + code);
                    if (_.isEmpty(errorNode)) {
                        shouldShowGeneral = true;
                    }
                    errorNode.removeClass('hide');
                });
                if (shouldShowGeneral) {
                    $('#monerisErrorGeneral').removeClass('hide');
                }
            };
            CreditCardMonerisCanadaPaymentProvider.prototype.collectAndValidateFormData = function () {
                var form = this.getForm();
                var formData = this._formData || form.serializeObject();
                if (!formData.cardholder) {
                    throw new Error('The form does not contain a field named "cardholder". This is required.');
                }
                return formData;
            };
            CreditCardMonerisCanadaPaymentProvider.prototype.getMonerisIFrame = function () {
                var frames = $('#monerisFrame');
                if (_.isEmpty(frames)) {
                    throw new Error('Cannot find monerisFrame DOM element');
                }
                return frames[0];
            };
            CreditCardMonerisCanadaPaymentProvider.prototype.hideAllMonerisErrors = function () {
                this.getForm()
                    .find('.parsley-errors-list>.parsley-required')
                    .addClass('hide');
                $('#monerisErrorGeneral').addClass('hide');
            };
            /**
             * Gets the container for the Payment Provider.
             * @return {JQuery} jQuery object.
             */
            CreditCardMonerisCanadaPaymentProvider.prototype.getForm = function () {
                var form = $('#PaymentForm');
                if (!form || _.isEmpty(form)) {
                    throw new Error('Could not find the element PaymentForm on this page.');
                }
                return form;
            };
            return CreditCardMonerisCanadaPaymentProvider;
        }(Composer.BaseSpecializedMonerisCanadaPaymentProvider));
        Composer.CreditCardMonerisCanadaPaymentProvider = CreditCardMonerisCanadaPaymentProvider;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='BaseSpecializedMonerisCanadaPaymentProvider.ts' />
///<reference path='../MonerisPaymentService.ts' />
///<reference path='../../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../../Composer.UI/Source/Typescript/ErrorHandling/ErrorHandler.ts' />
///<reference path='../../../../../Composer.UI/Source/Typescript/UI/UIModal.ts' />
///<reference path='../../../../../Composer.Cart.UI/CheckoutPayment/Source/Typescript/ViewModels/IActivePaymentViewModel.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var SavedCreditCardMonerisCanadaPaymentProvider = (function (_super) {
            __extends(SavedCreditCardMonerisCanadaPaymentProvider, _super);
            function SavedCreditCardMonerisCanadaPaymentProvider(window, paymentService, eventHub) {
                _super.call(this, window, paymentService, eventHub);
                this._deleteModalElementSelector = '#confirmationModal';
                this._uiModal = new Composer.UIModal(window, this._deleteModalElementSelector, this.deleteCart, this);
            }
            /**
             * Register event handlers for dom events
             */
            SavedCreditCardMonerisCanadaPaymentProvider.prototype.registerDomEvents = function () {
                $(this._window.document).on('click', '.moneris--deletecard', this._uiModal.openModal);
            };
            /**
             * Unregister event handlers for dom events
             */
            SavedCreditCardMonerisCanadaPaymentProvider.prototype.unregisterDomEvents = function () {
                $(this._window.document).off('click', '.moneris--deletecard', this._uiModal.openModal);
            };
            /**
             * Method called to get a promise for payment validation.
             * Returns a promise of boolean. The return boolean needs to be false for validation error,
             * or true if valid.
             * @param   {IActivePaymentViewModel}   The current active payment view model
             * @return  {Q.Promise<boolean>}        Promise that will be executed when we validate the payment control.
             */
            SavedCreditCardMonerisCanadaPaymentProvider.prototype.validatePayment = function (activePaymentVM) {
                // Considering the credit card was already added we do not need to run additional validations
                return Q(true);
            };
            /**
             * Add the temporary token to the vault profile of the user
             * @param   {IActivePaymentViewModel}   The current active payment view model
             * @return  {Q.Promise<any>}            The object is the updated properties of the cart used in CheckoutService.updateCart()
             */
            SavedCreditCardMonerisCanadaPaymentProvider.prototype.addVaultProfileToken = function (activePaymentVM) {
                // no need to add the payment method to the vault
                return Q({});
            };
            SavedCreditCardMonerisCanadaPaymentProvider.prototype.deleteCart = function (event) {
                var _this = this;
                var element = $(event.target);
                var paymentMethodId = element.data('payment-id');
                var paymentProviderName = element.data('payment-provider');
                //TODO : To replace with async busy from controller when change inheritance with controller.
                this._busyHandler = new Composer.UIBusyHandle($(document), $(document), 0);
                // TODO: publish valid event
                return this._paymentService
                    .removePaymentMethod(paymentMethodId, paymentProviderName)
                    .then(function () { return _this._eventHub.publish('paymentMethodsUpdated', null); })
                    .fail(function (reason) { return Composer.ErrorHandler.instance().outputError(reason); })
                    .fin(function () {
                    _this.releaseBusyHandler();
                });
            };
            SavedCreditCardMonerisCanadaPaymentProvider.prototype.releaseBusyHandler = function () {
                if (this._busyHandler) {
                    this._busyHandler.done();
                    this._busyHandler = null;
                }
            };
            return SavedCreditCardMonerisCanadaPaymentProvider;
        }(Composer.BaseSpecializedMonerisCanadaPaymentProvider));
        Composer.SavedCreditCardMonerisCanadaPaymentProvider = SavedCreditCardMonerisCanadaPaymentProvider;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='./ICreateVaultTokenOptions.ts' />
///<reference path='./IMonerisResponseData.ts' />
///<reference path='./MonerisPaymentService.ts' />
///<reference path='./Providers/BaseSpecializedMonerisCanadaPaymentProvider.ts' />
///<reference path='./Providers/CreditCardMonerisCanadaPaymentProvider.ts' />
///<reference path='./Providers/SavedCreditCardMonerisCanadaPaymentProvider.ts' />
///<reference path='../../../CheckoutPayment/Source/Typescript/Providers/BaseCheckoutPaymentProvider.ts' />
///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Events/IEventHub.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/JQueryPlugins/ISerializeObjectJqueryPlugin.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var MonerisCanadaPaymentProvider = (function (_super) {
            __extends(MonerisCanadaPaymentProvider, _super);
            function MonerisCanadaPaymentProvider(window, providerName, eventHub) {
                _super.call(this, window, eventHub, 'MonerisCanadaPaymentProvider', providerName);
                this._monerisPaymentService = new Composer.MonerisPaymentService();
                this.registerSpecializedProviders();
                this.registerDomEvents();
            }
            Object.defineProperty(MonerisCanadaPaymentProvider.prototype, "providers", {
                get: function () {
                    return this._providers;
                },
                enumerable: true,
                configurable: true
            });
            /**
             * Method called to get a promise for payment validation.
             * Returns a promise of boolean. The return boolean needs to be false for validation error,
             * or true if valid.
             * @return {Q.Promise<boolean>} Promise that will be executed when we validate the payment control.
             */
            MonerisCanadaPaymentProvider.prototype.validatePayment = function (activePaymentVM) {
                return this.getProvider(activePaymentVM.PaymentMethodType).validatePayment(activePaymentVM);
            };
            MonerisCanadaPaymentProvider.prototype.submitPayment = function (activePaymentVM) {
                return this.getProvider(activePaymentVM.PaymentMethodType)
                    .addVaultProfileToken(activePaymentVM);
            };
            MonerisCanadaPaymentProvider.prototype.dispose = function () {
                this.unregisterDomEvents();
            };
            MonerisCanadaPaymentProvider.prototype.setDefaultCustomerPaymentMethod = function (activePaymentVM) {
                return this._monerisPaymentService
                    .setDefaultCustomerPaymentMethod({
                    PaymentMethodId: activePaymentVM.Id,
                    PaymentProviderName: activePaymentVM.ProviderName
                });
            };
            MonerisCanadaPaymentProvider.prototype.registerSpecializedProviders = function () {
                this._providers = {
                    'SavedCreditCard': new Composer.SavedCreditCardMonerisCanadaPaymentProvider(this.window, this._monerisPaymentService, this._eventHub),
                    'CreditCard': new Composer.CreditCardMonerisCanadaPaymentProvider(this.window, this._monerisPaymentService, this._eventHub)
                };
            };
            MonerisCanadaPaymentProvider.prototype.registerDomEvents = function () {
                _.forEach(this.providers, function (p) { return p.registerDomEvents(); });
            };
            MonerisCanadaPaymentProvider.prototype.unregisterDomEvents = function () {
                _.forEach(this.providers, function (p) { return p.unregisterDomEvents(); });
            };
            MonerisCanadaPaymentProvider.prototype.getProvider = function (providerName) {
                if (!this.providers[providerName]) {
                    throw new Error('Provider not found');
                }
                return this.providers[providerName];
            };
            return MonerisCanadaPaymentProvider;
        }(Composer.BaseCheckoutPaymentProvider));
        Composer.MonerisCanadaPaymentProvider = MonerisCanadaPaymentProvider;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Events/IEventHub.ts' />
///<reference path='../../../CheckoutPayment/Source/Typescript/ViewModels/IActivePaymentViewModel.ts' />
///<reference path='../../../CheckoutPayment/source/Typescript/Providers/BaseCheckoutPaymentProvider.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var OnSitePOSPaymentProvider = (function (_super) {
            __extends(OnSitePOSPaymentProvider, _super);
            function OnSitePOSPaymentProvider(window, providerName, eventHub) {
                _super.call(this, window, eventHub, 'OnSitePOSPaymentProvider', providerName);
            }
            /**
             * Method called to get a promise for payment validation.
             * Returns a promise of boolean. The return boolean needs to be false for validation error,
             * or true if valid.
             * @return {Q.Promise<boolean>} Promise that will be executed when we validate the payment control.
             */
            OnSitePOSPaymentProvider.prototype.validatePayment = function (activeVM) {
                return Q(true);
            };
            /**
             * Method called to get a promise when payment will submit.
             * @return {Q.Promise<any>} Promise that will be executed when to cart is about the be updated.
             */
            OnSitePOSPaymentProvider.prototype.submitPayment = function (activeVM) {
                return Q({});
            };
            return OnSitePOSPaymentProvider;
        }(Composer.BaseCheckoutPaymentProvider));
        Composer.OnSitePOSPaymentProvider = OnSitePOSPaymentProvider;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/JqueryPlugins/ISerializeObjectJqueryPlugin.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerContext.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var OrderDetailsController = (function (_super) {
            __extends(OrderDetailsController, _super);
            function OrderDetailsController() {
                _super.apply(this, arguments);
            }
            OrderDetailsController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
            };
            return OrderDetailsController;
        }(Composer.Controller));
        Composer.OrderDetailsController = OrderDetailsController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));



///<reference path='../../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../../Composer.UI/Source/Typescript/Mvc/ComposerClient.ts' />
///<reference path='../Parameters/IGetOrderParameters' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var OrderService = (function () {
            function OrderService() {
            }
            OrderService.prototype.getPastOrders = function (options) {
                if (options === void 0) { options = { page: 1 }; }
                return Composer.ComposerClient.post('/api/order/past-orders', options);
            };
            OrderService.prototype.getCurrentOrders = function (options) {
                if (options === void 0) { options = { page: 1 }; }
                return Composer.ComposerClient.post('/api/order/current-orders', options);
            };
            return OrderService;
        }());
        Composer.OrderService = OrderService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/JqueryPlugins/ISerializeObjectJqueryPlugin.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerContext.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
///<reference path='./Services/OrderService' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var CurrentOrdersController = (function (_super) {
            __extends(CurrentOrdersController, _super);
            function CurrentOrdersController() {
                _super.apply(this, arguments);
                this.orderService = new Composer.OrderService();
            }
            CurrentOrdersController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.getCurrentOrders();
            };
            CurrentOrdersController.prototype.getOrders = function (context) {
                var page = context.elementContext.data('page');
                context.event.preventDefault();
                this.getCurrentOrders({
                    page: page
                });
            };
            CurrentOrdersController.prototype.getCurrentOrders = function (param) {
                var _this = this;
                var busyHandle = this.asyncBusy();
                this.orderService.getCurrentOrders(param)
                    .done(function (viewModel) {
                    _this.render('CurrentOrders', viewModel);
                    if (!_.isEmpty(viewModel)) {
                        _this.render('OrderHistoryPagination', viewModel.Pagination);
                    }
                    busyHandle.done();
                }, function (reason) {
                    console.error(reason);
                    busyHandle.done();
                });
            };
            return CurrentOrdersController;
        }(Composer.Controller));
        Composer.CurrentOrdersController = CurrentOrdersController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/JqueryPlugins/ISerializeObjectJqueryPlugin.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerContext.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
///<reference path='./Services/OrderService' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var PastOrdersController = (function (_super) {
            __extends(PastOrdersController, _super);
            function PastOrdersController() {
                _super.apply(this, arguments);
                this.orderService = new Composer.OrderService();
            }
            PastOrdersController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.getPastOrders();
            };
            PastOrdersController.prototype.getOrders = function (context) {
                var page = context.elementContext.data('page');
                context.event.preventDefault();
                this.getPastOrders({ page: page });
            };
            PastOrdersController.prototype.getPastOrders = function (param) {
                var _this = this;
                var busyHandle = this.asyncBusy();
                this.orderService.getPastOrders(param)
                    .done(function (viewModel) {
                    _this.render('PastOrders', viewModel);
                    if (!_.isEmpty(viewModel)) {
                        _this.render('OrderHistoryPagination', viewModel.Pagination);
                    }
                    busyHandle.done();
                }, function (reason) {
                    console.error(reason);
                    busyHandle.done();
                });
            };
            return PastOrdersController;
        }(Composer.Controller));
        Composer.PastOrdersController = PastOrdersController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Events/EventHub.ts' />
///<reference path='../../../../Composer.Cart.UI/CartSummary/Source/Typescript/CartService.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var OrderSummaryService = (function () {
            function OrderSummaryService(cartService, eventHub) {
                if (!cartService) {
                    throw new Error('Error: cartService is required');
                }
                if (!eventHub) {
                    throw new Error('Error: eventHub is required');
                }
                this.cartService = cartService;
                this.eventHub = eventHub;
            }
            OrderSummaryService.prototype.setCheapestShippingMethodUsing = function (postalCode) {
                var _this = this;
                this.eventHub.publish('cartUpdating', { data: { PostalCode: postalCode } });
                return this.cartService.updateShippingMethodPostalCode(postalCode)
                    .then(function () { return _this.cartService.setCheapestShippingMethod(); })
                    .then(function () { return _this.cartService.getCart(); })
                    .then(function (cart) { return _this.eventHub.publish('cartUpdated', { data: cart }); })
                    .fail(function (reason) {
                    console.error('Error while updating the shipping method using the postal code', reason);
                    throw reason;
                });
            };
            OrderSummaryService.prototype.cleanCart = function () {
                return this.cartService.clean();
            };
            return OrderSummaryService;
        }());
        Composer.OrderSummaryService = OrderSummaryService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Repositories/CartRepository.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/JQueryPlugins/ISerializeObjectJqueryPlugin.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/ErrorHandling/ErrorHandler.ts' />
///<reference path='../../../../Composer.Analytics.UI/Analytics/Source/Typescript/GoogleAnalyticsPlugin.ts' />
///<reference path='../../../CartSummary/Source/Typescript/CartService.ts' />
///<reference path='OrderSummaryService.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var OrderSummaryController = (function (_super) {
            __extends(OrderSummaryController, _super);
            function OrderSummaryController() {
                _super.apply(this, arguments);
                this.cacheProvider = Composer.CacheProvider.instance();
                this.cartService = new Composer.CartService(new Composer.CartRepository(), this.eventHub);
                this.orderSummaryService = new Composer.OrderSummaryService(this.cartService, this.eventHub);
            }
            OrderSummaryController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.registerSubscriptions();
            };
            OrderSummaryController.prototype.registerSubscriptions = function () {
                var _this = this;
                this.eventHub.subscribe('cartUpdated', function (e) { return _this.render('OrderSummary', e.data); });
            };
            OrderSummaryController.prototype.openModal = function (actionContext) {
                var _this = this;
                this.postalCodeModal = $('#postalCodeModal');
                this.postalCodeInput = $('#postalCode');
                this.clearForm();
                //Due to how HTML5 defines its semantics, the autofocus HTML attribute has no effect in Bootstrap modals
                //http://getbootstrap.com/javascript/#modals
                this.postalCodeModal.on('shown.bs.modal', function () {
                    _this.postalCodeInput.focus();
                });
                this.postalCodeModal.modal('show');
            };
            OrderSummaryController.prototype.clearForm = function () {
                this.postalCodeInput.val('');
                this.render('EstimateShippingValidationForm', { PostalCodeMalformed: false, PostalCodeEmpty: false });
                return;
            };
            OrderSummaryController.prototype.closeModal = function (actionContext) {
                this.postalCodeModal.modal('hide');
                this.postalCodeModal.off('shown.bs.modal');
            };
            OrderSummaryController.prototype.estimateShipping = function (actionContext) {
                var _this = this;
                var formContext = actionContext.elementContext, formValues = formContext.serializeObject(), postalCode = formValues.postalCode.toUpperCase(), postalCodePattern = formContext.data('regex'), postalCodeRegexPattern = new RegExp(postalCodePattern.toString()), result = postalCodeRegexPattern.test(postalCode), busyHandle;
                actionContext.event.preventDefault();
                if (!result) {
                    if (postalCode === '') {
                        return this.render('EstimateShippingValidationForm', { PostalCodeEmpty: true });
                    }
                    else {
                        return this.render('EstimateShippingValidationForm', { PostalCodeMalformed: true, PostalCode: formValues.postalCode });
                    }
                }
                busyHandle = this.asyncBusy();
                this.orderSummaryService.setCheapestShippingMethodUsing(postalCode)
                    .then(function (data) {
                    _this.closeModal(actionContext);
                    return data;
                }, function (reason) {
                    Composer.ErrorHandler.instance().outputErrorFromCode('PostalCodeUpdateFailed');
                })
                    .fin(function () { return busyHandle.done(); });
            };
            OrderSummaryController.prototype.proceedToCheckout = function (actionContext) {
                var nextStepUrl = actionContext.elementContext.data('nextstepurl').toString();
                if (!nextStepUrl) {
                    throw 'No next step Url was defined.';
                }
                Composer.AnalyticsPlugin.setCheckoutOrigin('Checkout');
                var busy = this.asyncBusy();
                this.orderSummaryService.cleanCart().done(function () {
                    window.location.href = nextStepUrl;
                }, function (reason) {
                    console.error('Error while proceeding to Checkout', reason);
                    Composer.ErrorHandler.instance().outputErrorFromCode('ProceedToCheckoutFailed');
                    busy.done();
                });
            };
            return OrderSummaryController;
        }(Orckestra.Composer.Controller));
        Composer.OrderSummaryController = OrderSummaryController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
/// <reference path='../../../../Composer.UI/Source/Typescript/Cache/CacheError.ts' />
/// <reference path='../../../../Composer.UI/Source/Typescript/Cache/ICache.ts' />
/// <reference path='../../../../Composer.UI/Source/Typescript/Cache/ICachePolicy.ts' />
/// <reference path='../../../../Composer.UI/Source/Typescript/Mvc/ComposerClient.ts' />
/// <reference path='./IWishListRepository.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var WishListRepository = (function () {
            function WishListRepository() {
            }
            WishListRepository.prototype.getWishList = function () {
                return Composer.ComposerClient.get('/api/wishlist/getwishlist');
            };
            WishListRepository.prototype.getWishListSummary = function () {
                return Composer.ComposerClient.get('/api/wishlist/getwishlistsummary');
            };
            WishListRepository.prototype.addLineItem = function (productId, variantId, quantity) {
                if (!productId) {
                    throw new Error('The product id is required');
                }
                if (quantity <= 0) {
                    throw new Error('The quantity must be greater than zero');
                }
                var data = {
                    ProductId: productId,
                    VariantId: variantId,
                    Quantity: quantity
                };
                return Composer.ComposerClient.post('/api/wishlist/lineitem', data);
            };
            WishListRepository.prototype.deleteLineItem = function (lineItemId) {
                if (!lineItemId) {
                    throw new Error('The line item id is required');
                }
                var data = {
                    LineItemId: lineItemId
                };
                return Composer.ComposerClient.remove('/api/wishlist/lineitem', data);
            };
            return WishListRepository;
        }());
        Composer.WishListRepository = WishListRepository;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Events/EventScheduler.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/jqueryPlugins/ISerializeObjectJqueryPlugin.ts' />
///<reference path='../../../Common/Source/Typescript/MyAccountEvents.ts' />
///<reference path='../../../Common/Source/Typescript/MembershipService.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var AccountHeaderController = (function (_super) {
            __extends(AccountHeaderController, _super);
            function AccountHeaderController() {
                _super.apply(this, arguments);
                this.membershipService = new Composer.MembershipService(new Composer.MembershipRepository());
            }
            AccountHeaderController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.registerSubscriptions();
            };
            AccountHeaderController.prototype.registerSubscriptions = function () {
                var _this = this;
                var scheduler = Composer.EventScheduler.instance(Composer.MyAccountEvents[Composer.MyAccountEvents.LoggedOut]);
                scheduler.setPostEventCallback(function (data) { return _this.onLoggedOut(data); });
            };
            AccountHeaderController.prototype.onLoggedOut = function (data) {
                var promise = Q.fcall(function () {
                    var newLocation = decodeURIComponent(data.ReturnUrl) || window.location.href;
                    window.location.replace(newLocation);
                });
                return promise;
            };
            AccountHeaderController.prototype.fullLogout = function (actionContext) {
                var _this = this;
                var returnUrlQueryString = 'ReturnUrl=';
                var returnUrl = '';
                actionContext.event.preventDefault();
                if (window.location.href.indexOf(returnUrlQueryString) > -1) {
                    returnUrl = window.location.href.substring(window.location.href.indexOf(returnUrlQueryString)
                        + returnUrlQueryString.length);
                }
                var busy = this.asyncBusy({ elementContext: actionContext.elementContext });
                this.membershipService.logout(returnUrl, false)
                    .then(function (result) { return _this.eventHub.publish(Composer.MyAccountEvents[Composer.MyAccountEvents.LoggedOut], { data: result }); })
                    .fin(function () { return busy.done(); })
                    .done();
            };
            return AccountHeaderController;
        }(Orckestra.Composer.Controller));
        Composer.AccountHeaderController = AccountHeaderController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/jqueryPlugins/ISerializeObjectJqueryPlugin.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var MyAccountController = (function (_super) {
            __extends(MyAccountController, _super);
            function MyAccountController() {
                _super.apply(this, arguments);
            }
            MyAccountController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
            };
            MyAccountController.prototype.getFormData = function (actionContext) {
                return actionContext.elementContext.serializeObject();
            };
            MyAccountController.prototype.renderFormErrorMessages = function (reason) {
                this.render('FormErrorMessages', reason);
                this.context.container.find('input[type="password"]').val('');
                this.registerFormsForValidation(this.context.container.find('form'), {
                    serverValidationContainer: '[data-templateid="FormErrorMessages"]'
                });
            };
            return MyAccountController;
        }(Orckestra.Composer.Controller));
        Composer.MyAccountController = MyAccountController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/jqueryPlugins/ISerializeObjectJqueryPlugin.ts' />
///<reference path='../../../Common/Source/Typescript/CustomerService.ts' />
///<reference path='../../../Common/Source/Typescript/MyAccountEvents.ts' />
///<reference path='../../../Common/Source/Typescript/MyAccountStatus.ts' />
///<reference path='../../../MyAccount/Source/Typescript/MyAccountController.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/UI/UIModal.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        //TODO refactor modal : create a generic modal service
        var AddressListController = (function (_super) {
            __extends(AddressListController, _super);
            function AddressListController() {
                _super.apply(this, arguments);
                this.deleteModalElementSelector = '#confirmationModal';
                this.customerService = new Composer.CustomerService(new Composer.CustomerRepository());
            }
            AddressListController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.uiModal = new Composer.UIModal(window, this.deleteModalElementSelector, this.deleteAddress, this);
                this.registerSubscriptions();
            };
            AddressListController.prototype.registerSubscriptions = function () {
                var _this = this;
                this.eventHub.subscribe(Composer.MyAccountEvents[Composer.MyAccountEvents.AddressDeleted], function (e) { return _this.onAddressDeleted(e); });
            };
            AddressListController.prototype.onAddressDeleted = function (e) {
                var result = e.data;
                var $container = result.$container;
                $container.remove();
            };
            /**
            * Requires the element in action context to have a data-address-id.
            */
            AddressListController.prototype.setDefaultAddress = function (actionContext) {
                var $addressListItem = $(actionContext.elementContext).closest('[data-address-id]');
                var addressId = $addressListItem.data('address-id');
                var busy = this.asyncBusy({ elementContext: actionContext.elementContext, containerContext: $addressListItem });
                this.customerService.setDefaultAddress(addressId.toString(), '')
                    .then(function (result) { return location.reload(); }, function (reason) { return console.error(reason); })
                    .fin(function () { return busy.done(); })
                    .done();
            };
            /**
            * Requires the element in action context to have a data-address-id.
            */
            AddressListController.prototype.deleteAddress = function (event) {
                var _this = this;
                var element = $(event.target);
                var $addressListItem = element.closest('[data-address-id]');
                var addressId = $addressListItem.data('address-id');
                var busy = this.asyncBusy({ elementContext: element, containerContext: $addressListItem });
                this.customerService.deleteAddress(addressId, '')
                    .then(function (result) { return _this.onDeleteAddressFulfilled(result, $addressListItem); }, function (reason) { return console.error(reason); })
                    .fin(function () { return busy.done(); })
                    .done();
            };
            AddressListController.prototype.onDeleteAddressFulfilled = function (result, $addressListItem) {
                var data = {
                    result: result,
                    $container: $addressListItem
                };
                this.eventHub.publish(Composer.MyAccountEvents[Composer.MyAccountEvents.AddressDeleted], { data: data });
            };
            AddressListController.prototype.deleteAddressConfirm = function (actionContext) {
                this.uiModal.openModal(actionContext.event);
            };
            return AddressListController;
        }(Orckestra.Composer.MyAccountController));
        Composer.AddressListController = AddressListController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
///<reference path='../../../Common/Source/Typescript/MembershipService.ts' />
///<reference path='../../../Common/Source/Typescript/MyAccountEvents.ts' />
///<reference path='../../../MyAccount/Source/Typescript/MyAccountController.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var ChangePasswordController = (function (_super) {
            __extends(ChangePasswordController, _super);
            function ChangePasswordController() {
                _super.apply(this, arguments);
                this.membershipService = new Composer.MembershipService(new Composer.MembershipRepository());
            }
            ChangePasswordController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.registerSubscriptions();
            };
            ChangePasswordController.prototype.registerSubscriptions = function () {
                var _this = this;
                this.registerFormsForValidation(this.context.container.find('form'));
                this.eventHub.subscribe(Composer.MyAccountEvents[Composer.MyAccountEvents.PasswordChanged], function (e) { return _this.onPasswordChanged(e); });
            };
            ChangePasswordController.prototype.onPasswordChanged = function (e) {
                var result = e.data;
                if (result.ReturnUrl) {
                    window.location.replace(decodeURIComponent(result.ReturnUrl));
                }
                else {
                    this.render('ChangePassword', result);
                    this.registerFormsForValidation(this.context.container.find('form'), {
                        serverValidationContainer: '[data-templateid="ChangePasswordSuccessful"]'
                    });
                }
            };
            /**
             * Event triggered when submitting the change password form.
             * @param {IControllerActionContext} actionContext - Event context.
             */
            ChangePasswordController.prototype.changePassword = function (actionContext) {
                var _this = this;
                actionContext.event.preventDefault();
                var formData = this.getFormData(actionContext);
                var returnUrlQueryString = 'ReturnUrl=';
                var returnUrl = '';
                if (window.location.href.indexOf(returnUrlQueryString) > -1) {
                    returnUrl = window.location.href.substring(window.location.href.indexOf(returnUrlQueryString)
                        + returnUrlQueryString.length);
                }
                var busy = this.asyncBusy({ elementContext: actionContext.elementContext });
                this.membershipService.changePassword(formData, returnUrl)
                    .then(function (result) { return _this.onChangePasswordFulfilled(result); }, function (reason) { return _this.renderFormErrorMessages(reason); })
                    .fin(function () { return busy.done(); })
                    .done();
            };
            ChangePasswordController.prototype.onChangePasswordFulfilled = function (result) {
                this.eventHub.publish(Composer.MyAccountEvents[Composer.MyAccountEvents.PasswordChanged], { data: result });
            };
            return ChangePasswordController;
        }(Orckestra.Composer.MyAccountController));
        Composer.ChangePasswordController = ChangePasswordController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        Composer.urlHelper = {
            getURLParameter: function (url, name) {
                return decodeURIComponent((new RegExp('[?|&]' + name
                    + '=' + '([^&;]+?)(&|#|;|$)').exec(url) || [, ''])[1].replace(/\+/g, '%20')) || null;
            }
        };
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Utils/UrlHelper.ts' />
///<reference path='../../../Common/Source/Typescript/MembershipService.ts' />
///<reference path='../../../Common/Source/Typescript/MyAccountEvents.ts' />
///<reference path='../../../Common/Source/Typescript/MyAccountStatus.ts' />
///<reference path='../../../MyAccount/Source/Typescript/MyAccountController.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var CreateAccountController = (function (_super) {
            __extends(CreateAccountController, _super);
            function CreateAccountController() {
                _super.apply(this, arguments);
                this.membershipService = new Composer.MembershipService(new Composer.MembershipRepository());
            }
            CreateAccountController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.registerSubscriptions();
            };
            CreateAccountController.prototype.registerSubscriptions = function () {
                var _this = this;
                this.registerFormsForValidation(this.context.container.find('form'));
                this.eventHub.subscribe(Composer.MyAccountEvents[Composer.MyAccountEvents.AccountCreated], function (e) { return _this.onAccountCreated(e); });
            };
            CreateAccountController.prototype.onAccountCreated = function (e) {
                var result = e.data;
                if (result.ReturnUrl) {
                    window.location.replace(decodeURIComponent(result.ReturnUrl));
                }
                else {
                    this.render('CreateAccount', result);
                }
            };
            CreateAccountController.prototype.createAccount = function (actionContext) {
                var _this = this;
                actionContext.event.preventDefault();
                var formData = this.getFormData(actionContext);
                var returnUrlQueryString = 'ReturnUrl=';
                var returnUrl = '';
                if (window.location.href.indexOf(returnUrlQueryString) > -1) {
                    returnUrl = Composer.urlHelper.getURLParameter(location.search, 'ReturnUrl');
                }
                var busy = this.asyncBusy({ elementContext: actionContext.elementContext });
                this.membershipService.register(formData, returnUrl)
                    .then(function (result) { return _this.onRegisterFulfilled(result); }, function (reason) { return _this.renderFormErrorMessages(reason); })
                    .fin(function () { return busy.done(); })
                    .done();
            };
            CreateAccountController.prototype.onRegisterFulfilled = function (result) {
                this.eventHub.publish(Composer.MyAccountEvents[Composer.MyAccountEvents.AccountCreated], { data: result });
                if (result.Status === Composer.MyAccountStatus[Composer.MyAccountStatus.Success]) {
                    this.eventHub.publish(Composer.MyAccountEvents[Composer.MyAccountEvents.LoggedIn], { data: result });
                }
            };
            return CreateAccountController;
        }(Orckestra.Composer.MyAccountController));
        Composer.CreateAccountController = CreateAccountController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/jqueryPlugins/ISerializeObjectJqueryPlugin.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Utils/UrlHelper.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/JQueryPlugins/IParsleyJqueryPlugin.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Validation/IParsley.ts' />
///<reference path='../../../Common/Source/Typescript/CustomerService.ts' />
///<reference path='../../../Common/Source/Typescript/MyAccountEvents.ts' />
///<reference path='../../../MyAccount/Source/Typescript/MyAccountController.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var EditAddressController = (function (_super) {
            __extends(EditAddressController, _super);
            function EditAddressController() {
                _super.apply(this, arguments);
                this.customerService = new Composer.CustomerService(new Composer.CustomerRepository());
            }
            EditAddressController.prototype.initialize = function () {
                var _this = this;
                _super.prototype.initialize.call(this);
                this.registerSubscriptions();
                var busy = this.asyncBusy({ msDelay: 300, loadingIndicatorSelector: '.loading-indicator-regions' });
                Composer.ComposerClient.get('/api/address/regions')
                    .then(function (regions) { return _this.rebuildRegionSelector(regions); })
                    .done(function () { return busy.done(); });
            };
            EditAddressController.prototype.registerSubscriptions = function () {
                var _this = this;
                this.registerFormsForValidation(this.context.container.find('form'));
                this.eventHub.subscribe(Composer.MyAccountEvents[Composer.MyAccountEvents.AddressCreated], function (e) { return _this.onAddressCreatedOrUpdated(e); });
                this.eventHub.subscribe(Composer.MyAccountEvents[Composer.MyAccountEvents.AddressUpdated], function (e) { return _this.onAddressCreatedOrUpdated(e); });
            };
            EditAddressController.prototype.onAddressCreatedOrUpdated = function (e) {
                var result = e.data;
                if (result.ReturnUrl) {
                    window.location.replace(decodeURIComponent(result.ReturnUrl));
                }
                else {
                    this.render('EditAddress', result);
                    this.registerFormsForValidation(this.context.container.find('form'), {
                        serverValidationContainer: '[data-templateid="FormErrorMessages"]'
                    });
                }
            };
            /**
             * Rerender the region selector, keeping the currently selected value
             */
            EditAddressController.prototype.rebuildRegionSelector = function (regions) {
                var selectedRegion = this.context.container.find('[data-templateid="AddressRegionPicker"]').val();
                this.render('AddressRegionPicker', { Regions: regions, SelectedRegion: selectedRegion });
            };
            EditAddressController.prototype.adjustPostalCode = function (actionContext) {
                actionContext.elementContext.val(actionContext.elementContext.val().toUpperCase());
                _.all(this._formInstances, function (formInstance) { return formInstance.validate('shipping-based-on', true); });
            };
            EditAddressController.prototype.createAddress = function (actionContext) {
                var _this = this;
                actionContext.event.preventDefault();
                var formData = this.getFormData(actionContext);
                var returnUrlQueryString = 'ReturnUrl=';
                var returnUrl = '';
                if (window.location.href.indexOf(returnUrlQueryString) > -1) {
                    returnUrl = Composer.urlHelper.getURLParameter(location.search, 'ReturnUrl');
                }
                var busy = this.asyncBusy({ elementContext: actionContext.elementContext });
                this.customerService.createAddress(formData, returnUrl)
                    .then(function (result) { return _this.onCreateAddressFulfilled(result); }, function (reason) { return _this.renderFormErrorMessages(reason); })
                    .fin(function () { return busy.done(); })
                    .done();
            };
            EditAddressController.prototype.onCreateAddressFulfilled = function (result) {
                this.eventHub.publish(Composer.MyAccountEvents[Composer.MyAccountEvents.AddressCreated], { data: result });
            };
            EditAddressController.prototype.updateAddress = function (actionContext) {
                var _this = this;
                actionContext.event.preventDefault();
                var formData = this.getFormData(actionContext);
                var addressId = this.context.container.find('[data-address-id]').data('address-id').toString();
                var returnUrlQueryString = 'ReturnUrl=';
                var returnUrl = '';
                if (window.location.href.indexOf(returnUrlQueryString) > -1) {
                    returnUrl = Composer.urlHelper.getURLParameter(location.search, 'ReturnUrl');
                }
                var busy = this.asyncBusy({ elementContext: actionContext.elementContext });
                this.customerService.updateAddress(formData, addressId, returnUrl)
                    .then(function (result) { return _this.onUpdateAddressFulfilled(result); }, function (reason) { return _this.renderFormErrorMessages(reason); })
                    .fin(function () { return busy.done(); })
                    .done();
            };
            EditAddressController.prototype.onUpdateAddressFulfilled = function (result) {
                this.eventHub.publish(Composer.MyAccountEvents[Composer.MyAccountEvents.AddressUpdated], { data: result });
            };
            return EditAddressController;
        }(Orckestra.Composer.MyAccountController));
        Composer.EditAddressController = EditAddressController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
///<reference path='../../../Common/Source/Typescript/MembershipService.ts' />
///<reference path='../../../Common/Source/Typescript/MyAccountEvents.ts' />
///<reference path='../../../Common/Source/Typescript/MyAccountStatus.ts' />
///<reference path='../../../MyAccount/Source/Typescript/MyAccountController.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var ForgotPasswordController = (function (_super) {
            __extends(ForgotPasswordController, _super);
            function ForgotPasswordController() {
                _super.apply(this, arguments);
                this.membershipService = new Composer.MembershipService(new Composer.MembershipRepository());
            }
            ForgotPasswordController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.registerSubscriptions();
            };
            ForgotPasswordController.prototype.registerSubscriptions = function () {
                var _this = this;
                this.registerFormsForValidation(this.context.container.find('form'));
                this.eventHub.subscribe(Composer.MyAccountEvents[Composer.MyAccountEvents.ForgotPasswordInstructionSent], function (e) { return _this.onForgotPasswordInstructionSent(e); });
            };
            ForgotPasswordController.prototype.onForgotPasswordInstructionSent = function (e) {
                var result = e.data;
                if (result.ReturnUrl) {
                    window.location.replace(decodeURIComponent(result.ReturnUrl));
                }
                else {
                    this.render('ForgotPassword', result);
                }
            };
            /**
             * Event triggered when submitting the forgot password form.
             * @param {IControllerActionContext} actionContext - Event context.
             */
            ForgotPasswordController.prototype.forgotPassword = function (actionContext) {
                var _this = this;
                actionContext.event.preventDefault();
                var formData = this.getFormData(actionContext);
                var busy = this.asyncBusy({ elementContext: actionContext.elementContext });
                this.membershipService.forgotPassword(formData)
                    .then(function (result) { return _this.onForgotPasswordFulfilled(result); }, function (reason) { return _this.renderFormErrorMessages(reason); })
                    .fin(function () { return busy.done(); })
                    .done();
            };
            ForgotPasswordController.prototype.onForgotPasswordFulfilled = function (result) {
                this.eventHub.publish(Composer.MyAccountEvents[Composer.MyAccountEvents.ForgotPasswordInstructionSent], { data: result });
            };
            return ForgotPasswordController;
        }(Orckestra.Composer.MyAccountController));
        Composer.ForgotPasswordController = ForgotPasswordController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/jqueryPlugins/ISerializeObjectJqueryPlugin.ts' />
///<reference path='../../../Common/Source/Typescript/MembershipService.ts' />
///<reference path='../../../Common/Source/Typescript/MyAccountEvents.ts' />
///<reference path='../../../MyAccount/Source/Typescript/MyAccountController.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var NewPasswordController = (function (_super) {
            __extends(NewPasswordController, _super);
            function NewPasswordController() {
                _super.apply(this, arguments);
                this.membershipService = new Composer.MembershipService(new Composer.MembershipRepository());
            }
            NewPasswordController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.registerSubscriptions();
            };
            NewPasswordController.prototype.registerSubscriptions = function () {
                var _this = this;
                this.registerFormsForValidation(this.context.container.find('form'));
                this.eventHub.subscribe(Composer.MyAccountEvents[Composer.MyAccountEvents.PasswordChanged], function (e) { return _this.onPasswordChanged(e); });
            };
            NewPasswordController.prototype.onPasswordChanged = function (e) {
                var result = e.data;
                if (result.ReturnUrl) {
                    window.location.replace(decodeURIComponent(result.ReturnUrl));
                }
                else {
                    this.render('NewPassword', result);
                }
            };
            /**
             * Event triggered when submitting the new password form.
             * @param {IControllerActionContext} actionContext - Event context.
             */
            NewPasswordController.prototype.newPassword = function (actionContext) {
                var _this = this;
                actionContext.event.preventDefault();
                var formData = this.getFormData(actionContext);
                var returnUrlQueryString = 'ReturnUrl=';
                var ticketQueryString = 'ticket=';
                var returnUrl = '';
                var ticket = '';
                if (window.location.href.indexOf(returnUrlQueryString) > -1) {
                    returnUrl = window.location.href.substring(window.location.href.indexOf(returnUrlQueryString)
                        + returnUrlQueryString.length);
                }
                if (window.location.href.indexOf(ticketQueryString) > -1) {
                    ticket = window.location.href.substring(window.location.href.indexOf(ticketQueryString)
                        + ticketQueryString.length);
                }
                var busy = this.asyncBusy({ elementContext: actionContext.elementContext });
                this.membershipService.resetPassword(formData, ticket, returnUrl)
                    .then(function (result) { return _this.onResetPasswordFulfilled(result); }, function (reason) { return _this.renderFormErrorMessages(reason); })
                    .fin(function () { return busy.done(); })
                    .done();
            };
            NewPasswordController.prototype.onResetPasswordFulfilled = function (result) {
                this.eventHub.publish(Composer.MyAccountEvents[Composer.MyAccountEvents.PasswordChanged], { data: result });
            };
            return NewPasswordController;
        }(Orckestra.Composer.MyAccountController));
        Composer.NewPasswordController = NewPasswordController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Events/EventScheduler.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Cache/CacheProvider.ts' />
///<reference path='../../../Common/Source/Typescript/MembershipService.ts' />
///<reference path='../../../Common/Source/Typescript/MyAccountEvents.ts' />
///<reference path='../../../Common/Source/Typescript/MyAccountStatus.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        /**
         * Controller for the Coupons section.
         */
        var ReturningCustomerController = (function (_super) {
            __extends(ReturningCustomerController, _super);
            function ReturningCustomerController() {
                _super.apply(this, arguments);
                this.membershipService = new Composer.MembershipService(new Composer.MembershipRepository());
                this.cacheProvider = Composer.CacheProvider.instance();
            }
            ReturningCustomerController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.registerSubscriptions();
            };
            ReturningCustomerController.prototype.registerSubscriptions = function () {
                var _this = this;
                this.registerFormsForValidation(this.context.container.find('form'));
                var scheduler = Composer.EventScheduler.instance(Composer.MyAccountEvents[Composer.MyAccountEvents.LoggedIn]);
                scheduler.setPostEventCallback(function (data) { return _this.onLoggedIn(data); });
            };
            ReturningCustomerController.prototype.onLoggedIn = function (data) {
                var _this = this;
                var promise = Q.fcall(function () {
                    if (data.ReturnUrl) {
                        window.location.replace(decodeURIComponent(data.ReturnUrl));
                    }
                    else {
                        _this.render('ReturningCustomer', data);
                        _this.registerFormsForValidation(_this.context.container.find('form'), {
                            serverValidationContainer: '[data-templateid="ReturningCustomerFormsServerValidations"]'
                        });
                    }
                });
                return promise;
            };
            /**
             * Event triggered when submitting the login form.
             * @param {IControllerActionContext} actionContext - Event context.
             */
            ReturningCustomerController.prototype.login = function (actionContext) {
                var _this = this;
                actionContext.event.preventDefault();
                var busy = this.asyncBusy();
                this.loginImpl(actionContext)
                    .then(function (result) { return _this.onLoginFulfilled(result, busy); })
                    .fail(function (reason) { return _this.onLoginRejected(reason, busy); })
                    .done();
            };
            ReturningCustomerController.prototype.loginImpl = function (actionContext) {
                var formData = actionContext.elementContext.serializeObject();
                var href = window.location.href;
                var returnUrlKey = 'ReturnUrl=';
                var returnUrl = href.indexOf(returnUrlKey) > -1 ? href.substring(href.indexOf(returnUrlKey) + returnUrlKey.length) : '';
                return this.membershipService.login(formData, returnUrl);
            };
            ReturningCustomerController.prototype.onLoginFulfilled = function (result, busy) {
                if (result.Status === Composer.MyAccountStatus[Composer.MyAccountStatus.Success]) {
                    this.eventHub.publish(Composer.MyAccountEvents[Composer.MyAccountEvents.LoggedIn], { data: result });
                    this.cacheProvider.defaultCache.set('customerId', null).done();
                }
                else {
                    this.renderFailedForm(result.Status);
                    busy.done();
                }
            };
            ReturningCustomerController.prototype.onLoginRejected = function (reason, busy) {
                var errorCode = Composer.MyAccountStatus[Composer.MyAccountStatus.AjaxFailed];
                if (reason && reason.Errors && reason.Errors[0] && reason.Errors[0].ErrorCode) {
                    errorCode = reason.Errors[0].ErrorCode;
                }
                this.renderFailedForm(errorCode);
                busy.done();
            };
            /**
             * Render the template for message failures
             * Register Format validation to hide those server message on client interaction
             * Reset potentially unsafe fields
             */
            ReturningCustomerController.prototype.renderFailedForm = function (status) {
                this.render('ReturningCustomerFormsServerValidations', { Status: status });
                this.context.container.find('input[type="password"]').val('');
                this.registerFormsForValidation(this.context.container.find('form'), {
                    serverValidationContainer: '[data-templateid="ReturningCustomerFormsServerValidations"]'
                });
            };
            return ReturningCustomerController;
        }(Orckestra.Composer.Controller));
        Composer.ReturningCustomerController = ReturningCustomerController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
/// <reference path='./../Mvc/ComposerClient.ts' />
/// <reference path='./ISignInHeaderRepository.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var SignInHeaderRepository = (function () {
            function SignInHeaderRepository() {
            }
            SignInHeaderRepository.prototype.getSignInHeader = function (param) {
                return Composer.ComposerClient.get('/api/membership/signin');
            };
            return SignInHeaderRepository;
        }());
        Composer.SignInHeaderRepository = SignInHeaderRepository;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Repositories/SignInHeaderRepository.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Cache/CacheProvider.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var SignInHeaderService = (function () {
            function SignInHeaderService(signInHeaderRepository) {
                this.cacheKey = 'SignInHeaderViewModel';
                this.cachePolicy = { slidingExpiration: 300 }; // 5min
                if (!signInHeaderRepository) {
                    throw new Error('Error: signInHeaderRepository is required');
                }
                this.cacheProvider = Composer.CacheProvider.instance();
                this.signInHeaderRepository = signInHeaderRepository;
            }
            SignInHeaderService.prototype.getSignInHeader = function (param) {
                var _this = this;
                return this.getSignInHeaderFromCache(param)
                    .fail(function (reason) {
                    if (_this.canHandle(reason)) {
                        return _this.getFreshSignInHeader(param);
                    }
                    throw reason;
                });
            };
            SignInHeaderService.prototype.canHandle = function (reason) {
                return reason === Composer.CacheError.Expired || reason === Composer.CacheError.NotFound;
            };
            SignInHeaderService.prototype.getFreshSignInHeader = function (param) {
                var _this = this;
                return this.signInHeaderRepository.getSignInHeader(param)
                    .then(function (cart) { return _this.setSignInHeaderToCache(param, cart); });
            };
            SignInHeaderService.prototype.buildSignedInCacheKey = function (param) {
                return this.cacheKey + '.' + param.cultureInfo + '.' + param.isAuthenticated + '.' + param.encryptedCustomerId;
            };
            SignInHeaderService.prototype.invalidateCache = function () {
                return this.cacheProvider.customCache.fullClear();
            };
            SignInHeaderService.prototype.getSignInHeaderFromCache = function (param) {
                var composedKey = this.buildSignedInCacheKey(param);
                return this.cacheProvider.customCache.get(composedKey);
            };
            SignInHeaderService.prototype.setSignInHeaderToCache = function (param, cart) {
                var composedKey = this.buildSignedInCacheKey(param);
                return this.cacheProvider.customCache.set(composedKey, cart, this.cachePolicy);
            };
            return SignInHeaderService;
        }());
        Composer.SignInHeaderService = SignInHeaderService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Events/EventScheduler.ts' />
///<reference path='../../../Common/Source/Typescript/MyAccountEvents.ts' />
///<reference path='./SignInHeaderService.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var SignInHeaderController = (function (_super) {
            __extends(SignInHeaderController, _super);
            function SignInHeaderController() {
                _super.apply(this, arguments);
                this.signInHeaderService = new Composer.SignInHeaderService(new Composer.SignInHeaderRepository());
            }
            SignInHeaderController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.initializeSignInHeader();
                this.registerSubscriptions();
            };
            SignInHeaderController.prototype.initializeSignInHeader = function () {
                var _this = this;
                var cultureInfo = $('html').attr('lang');
                var param = { cultureInfo: cultureInfo };
                this.signInHeaderService.getSignInHeader(param)
                    .then(function (signInHeader) { return _this.render('SignInHeader', signInHeader); });
            };
            SignInHeaderController.prototype.registerSubscriptions = function () {
                var _this = this;
                var loggedInScheduler = Composer.EventScheduler.instance(Composer.MyAccountEvents[Composer.MyAccountEvents.LoggedIn]);
                var loggedOutScheduler = Composer.EventScheduler.instance(Composer.MyAccountEvents[Composer.MyAccountEvents.LoggedOut]);
                loggedOutScheduler.subscribe(function (e) { return _this.onLoggedOut(e); });
                loggedInScheduler.subscribe(function (e) { return _this.onLoggedIn(e); });
            };
            SignInHeaderController.prototype.onLoggedOut = function (e) {
                return this.signInHeaderService.invalidateCache();
            };
            SignInHeaderController.prototype.onLoggedIn = function (e) {
                return this.signInHeaderService.invalidateCache();
            };
            return SignInHeaderController;
        }(Orckestra.Composer.Controller));
        Composer.SignInHeaderController = SignInHeaderController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Utils/UrlHelper.ts' />
///<reference path='../../../Common/Source/Typescript/CustomerService.ts' />
///<reference path='../../../SignInHeader/Source/Typescript/SignInHeaderService.ts' />
///<reference path='../../../Common/Source/Typescript/MyAccountEvents.ts' />
///<reference path='../../../MyAccount/Source/Typescript/MyAccountController.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var UpdateAccountController = (function (_super) {
            __extends(UpdateAccountController, _super);
            function UpdateAccountController() {
                _super.apply(this, arguments);
                this.customerService = new Composer.CustomerService(new Composer.CustomerRepository());
                this.signInHeaderService = new Composer.SignInHeaderService(new Composer.SignInHeaderRepository());
            }
            UpdateAccountController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.registerSubscriptions();
            };
            UpdateAccountController.prototype.registerSubscriptions = function () {
                var _this = this;
                this.registerFormsForValidation(this.context.container.find('form'));
                this.eventHub.subscribe(Composer.MyAccountEvents[Composer.MyAccountEvents.AccountUpdated], function (e) { return _this.onAccountUpdated(e); });
            };
            UpdateAccountController.prototype.onAccountUpdated = function (e) {
                var result = e.data;
                if (result.ReturnUrl) {
                    window.location.replace(decodeURIComponent(result.ReturnUrl));
                }
                else {
                    this.render('UpdateAccount', result);
                    this.registerFormsForValidation(this.context.container.find('form'), {
                        serverValidationContainer: '[data-templateid="UpdateAccountSuccessful"]'
                    });
                }
            };
            UpdateAccountController.prototype.enableSubmitButton = function (actionContext) {
                $('#UpdateAccountSubmit').prop('disabled', false);
            };
            UpdateAccountController.prototype.updateAccount = function (actionContext) {
                var _this = this;
                actionContext.event.preventDefault();
                var formData = this.getFormData(actionContext);
                var returnUrlQueryString = 'ReturnUrl=';
                var returnUrl = '';
                if (window.location.href.indexOf(returnUrlQueryString) > -1) {
                    returnUrl = Composer.urlHelper.getURLParameter(location.search, 'ReturnUrl');
                }
                var busy = this.asyncBusy({ elementContext: actionContext.elementContext });
                this.customerService.updateAccount(formData, returnUrl)
                    .then(function (result) {
                    _this.signInHeaderService.invalidateCache();
                    return result;
                })
                    .then(function (result) { return _this.onUpdateAccountFulfilled(result); })
                    .fail(function (reason) {
                    console.error('Error updating the account.', reason);
                    _this.renderFormErrorMessages(reason);
                })
                    .fin(function () { return busy.done(); });
            };
            UpdateAccountController.prototype.onUpdateAccountFulfilled = function (result) {
                this.eventHub.publish(Composer.MyAccountEvents[Composer.MyAccountEvents.AccountUpdated], { data: result });
                return Q(result);
            };
            return UpdateAccountController;
        }(Orckestra.Composer.MyAccountController));
        Composer.UpdateAccountController = UpdateAccountController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../../Composer.UI/Source/Typings/tsd.d.ts' />

///<reference path='../../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../../Composer.UI/Source/Typescript/Mvc/ComposerClient.ts' />
///<reference path='../../../../../Composer.UI/Source/TypeScript/Cache/CacheProvider.ts' />
///<reference path='../../../../../Composer.UI/Source/TypeScript/Cache/CacheError.ts' />
///<reference path='../IWishListRepository.ts' />
///<reference path='./IWishListService.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var WishListService = (function () {
            function WishListService(wishListRepository, eventHub) {
                this.cacheKey = 'WishListSummaryViewModel';
                this.cachePolicy = { slidingExpiration: 300 }; // 5min
                if (!wishListRepository) {
                    throw new Error('Error: wishListRepository is required');
                }
                if (!eventHub) {
                    throw new Error('Error: eventHub is required');
                }
                this.wishListRepository = wishListRepository;
                this.cacheProvider = Composer.CacheProvider.instance();
                this.eventHub = eventHub;
            }
            WishListService.prototype.getWishListSummary = function () {
                var _this = this;
                return this.getCacheWishListSummary()
                    .fail(function (reason) {
                    if (_this.canHandle(reason)) {
                        return _this.getFreshWishListSummary();
                    }
                    console.error('An error occured while getting the wishList from cache.', reason);
                    throw reason;
                });
            };
            WishListService.prototype.getFreshWishListSummary = function () {
                var _this = this;
                if (!WishListService.GettingFreshWishListSummary) {
                    WishListService.GettingFreshWishListSummary =
                        this.wishListRepository.getWishListSummary().then(function (wishList) { return _this.setWishListToCache(wishList); });
                }
                // to avoid getting a fresh wishlist multiple times within a page session
                return WishListService.GettingFreshWishListSummary
                    .fail(function (reason) {
                    console.error('An error occured while getting a fresh wish list.', reason);
                    throw reason;
                });
            };
            WishListService.prototype.getSignInUrl = function () {
                return this.getWishListSummary()
                    .then(function (wishList) {
                    return wishList.SignInUrl;
                });
            };
            WishListService.prototype.getLineItem = function (productId, variantId) {
                return this.getWishListSummary().then(function (wishList) {
                    if (wishList && wishList.Items) {
                        return wishList.Items.filter(function (it) { return it.ProductId === productId && it.VariantId === variantId; })[0];
                    }
                    return null;
                });
            };
            WishListService.prototype.addLineItem = function (productId, variantId, quantity) {
                var _this = this;
                if (quantity === void 0) { quantity = 1; }
                var data = {
                    ProductId: productId,
                    VariantId: variantId,
                    Quantity: quantity
                };
                this.eventHub.publish('wishListUpdating', { data: data });
                return this.wishListRepository.addLineItem(productId, variantId, quantity)
                    .then(function (wishList) { return _this.setWishListToCache(wishList); })
                    .then(function (wishList) {
                    _this.eventHub.publish('wishListUpdated', { data: wishList });
                    return wishList;
                })
                    .fail(function (reason) {
                    _this.clearCache();
                    throw reason;
                });
            };
            WishListService.prototype.removeLineItem = function (lineItemId) {
                var _this = this;
                var data = {
                    LineItemId: lineItemId
                };
                this.eventHub.publish('wishListUpdating', { data: data });
                return this.wishListRepository.deleteLineItem(lineItemId)
                    .then(function (wishList) { return _this.setWishListToCache(wishList); })
                    .then(function (wishList) {
                    _this.eventHub.publish('wishListUpdated', { data: wishList });
                    return wishList;
                })
                    .fail(function (reason) {
                    _this.clearCache();
                    throw reason;
                });
            };
            WishListService.prototype.clearCache = function () {
                return this.cacheProvider.defaultCache.clear(this.cacheKey);
            };
            WishListService.prototype.getCacheWishListSummary = function () {
                return this.cacheProvider.defaultCache.get(this.cacheKey);
            };
            WishListService.prototype.setWishListToCache = function (wishList) {
                return this.cacheProvider.defaultCache.set(this.cacheKey, wishList, this.cachePolicy);
            };
            WishListService.prototype.canHandle = function (reason) {
                return reason === Composer.CacheError.Expired || reason === Composer.CacheError.NotFound;
            };
            return WishListService;
        }());
        Composer.WishListService = WishListService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
///<reference path='../../../../Composer.Cart.UI/WishList/Source/Typescript/WishListRepository.ts' />
///<reference path='../../../../Composer.Cart.UI/WishList/Source/Typescript/Services/WishListService.ts' />
///<reference path='../../../../Composer.Cart.UI/CartSummary/Source/Typescript/CartService.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Repositories/CartRepository.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var WishListController = (function (_super) {
            __extends(WishListController, _super);
            function WishListController() {
                _super.apply(this, arguments);
                this._wishListService = new Composer.WishListService(new Composer.WishListRepository(), this.eventHub);
                this._cartService = new Composer.CartService(new Composer.CartRepository(), this.eventHub);
            }
            WishListController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
            };
            WishListController.prototype.addToCart = function (actionContext) {
                var context = actionContext.elementContext;
                var container = context.closest('.wishlist-tile');
                var productId = context.data('productid');
                var price = context.data('price');
                var brand = context.data('brand');
                var variantId = context.data('variantid');
                var variant = context.data('variant');
                var name = context.data('name');
                var category = context.data('category');
                this.eventHub.publish('wishListLineItemAddingToCart', {
                    data: this.getProductDataForAnalytics(productId, variant, name, price, brand, category)
                });
                container.addClass('is-loading');
                this._cartService.addLineItem(productId, price, variantId, 1)
                    .fin(function () { return container.removeClass('is-loading'); });
            };
            WishListController.prototype.getListNameForAnalytics = function () {
                throw new Error('ListName not defined for this controller');
            };
            WishListController.prototype.getProductDataForAnalytics = function (productId, variant, displayName, price, brand, category) {
                var data = {
                    List: this.getListNameForAnalytics(),
                    ProductId: productId,
                    Variant: variant,
                    DisplayName: displayName,
                    ListPrice: price,
                    Brand: brand,
                    CategoryId: category,
                    Quantity: 1
                };
                return data;
            };
            return WishListController;
        }(Orckestra.Composer.Controller));
        Composer.WishListController = WishListController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
///<reference path='./WishListController.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var MyWishListController = (function (_super) {
            __extends(MyWishListController, _super);
            function MyWishListController() {
                _super.apply(this, arguments);
            }
            MyWishListController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.registerSubscriptions();
            };
            MyWishListController.prototype.registerSubscriptions = function () {
                var _this = this;
                this.eventHub.subscribe('wishListUpdated', function (e) { return _this.onWishListUpdated(e); });
            };
            MyWishListController.prototype.copyShareUrl = function (actionContext) {
                var shareUrl = $('#txtShareUrl');
                var succeed;
                shareUrl.focus().select();
                try {
                    succeed = document.execCommand('copy');
                }
                catch (e) {
                    succeed = false;
                }
                this.eventHub.publish('wishListCopyingShareUrl', {
                    data: {}
                });
                return succeed;
            };
            MyWishListController.prototype.deleteLineItem = function (actionContext) {
                var context = actionContext.elementContext;
                var lineItemId = context.data('lineitemid');
                var container = context.closest('.wishlist-tile');
                container.addClass('is-loading');
                this._wishListService.removeLineItem(lineItemId)
                    .then(function (wishList) {
                    container.parent().remove();
                })
                    .fin(function () {
                    container.removeClass('is-loading');
                });
            };
            MyWishListController.prototype.onWishListUpdated = function (e) {
                this.renderWishListQuantity(e.data);
                if (e.data.TotalQuantity === 0) {
                    this.context.window.location.reload();
                }
            };
            MyWishListController.prototype.renderWishListQuantity = function (wishList) {
                this.render('WishListQuantity', wishList);
            };
            MyWishListController.prototype.getListNameForAnalytics = function () {
                return 'My Wish List';
            };
            return MyWishListController;
        }(Orckestra.Composer.WishListController));
        Composer.MyWishListController = MyWishListController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Events/EventScheduler.ts' />
///<reference path='../../../../Composer.Cart.UI/WishList/Source/TypeScript/WishListRepository.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Events/EventHub.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Events/IEventInformation.ts' />
///<reference path='../../../../Composer.MyAccount.UI/Common/Source/Typescript/MyAccountEvents.ts' />
///<reference path='../../../../Composer.Cart.UI/WishList/Source/Typescript/Services/WishListService.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var WishListInHeaderController = (function (_super) {
            __extends(WishListInHeaderController, _super);
            function WishListInHeaderController() {
                _super.apply(this, arguments);
                this._wishListService = new Composer.WishListService(new Composer.WishListRepository(), this.eventHub);
            }
            WishListInHeaderController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.initializeWishListQuantity();
                this.registerSubscriptions();
            };
            WishListInHeaderController.prototype.initializeWishListQuantity = function () {
                var _this = this;
                if (!this.context.viewModel.IsAuthenticated) {
                    this._wishListService.clearCache();
                }
                this._wishListService.getWishListSummary()
                    .done(function (wishList) {
                    if (!_.isEmpty(wishList)) {
                        _this.renderWishList(wishList);
                    }
                });
            };
            WishListInHeaderController.prototype.registerSubscriptions = function () {
                var _this = this;
                var loggedInScheduler = Composer.EventScheduler.instance(Composer.MyAccountEvents[Composer.MyAccountEvents.LoggedIn]);
                var loggedOutScheduler = Composer.EventScheduler.instance(Composer.MyAccountEvents[Composer.MyAccountEvents.LoggedOut]);
                this.eventHub.subscribe('wishListUpdated', function (e) { return _this.onWishListUpdated(e); });
                loggedOutScheduler.subscribe(function (e) { return _this.onRefreshUser(e); });
                loggedInScheduler.subscribe(function (e) { return _this.onRefreshUser(e); });
            };
            WishListInHeaderController.prototype.onWishListUpdated = function (e) {
                var wishList = e.data;
                this.renderWishList(wishList);
            };
            WishListInHeaderController.prototype.onRefreshUser = function (e) {
                return this._wishListService.clearCache();
            };
            WishListInHeaderController.prototype.renderWishList = function (wishList) {
                this.render('WishListQuantity', wishList);
            };
            WishListInHeaderController.prototype.onError = function (reason) {
                console.error("An error occured while rendering the wishList with the WishListInHeader.", reason);
            };
            return WishListInHeaderController;
        }(Orckestra.Composer.Controller));
        Composer.WishListInHeaderController = WishListInHeaderController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
///<reference path='../../../../Composer.Cart.UI/WishList/Source/Typescript/WishListRepository.ts' />
///<reference path='../../../../Composer.Cart.UI/WishList/Source/Typescript/Services/WishListService.ts' />
///<reference path='../../../../Composer.Cart.UI/CartSummary/Source/Typescript/CartService.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Repositories/CartRepository.ts' />
///<reference path='../../../WishList/Source/Typescript/WishListController.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var SharedWishListController = (function (_super) {
            __extends(SharedWishListController, _super);
            function SharedWishListController() {
                _super.apply(this, arguments);
            }
            SharedWishListController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
            };
            SharedWishListController.prototype.getListNameForAnalytics = function () {
                return 'Shared Wish List';
            };
            return SharedWishListController;
        }(Orckestra.Composer.WishListController));
        Composer.SharedWishListController = SharedWishListController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var ProductIdentifierDto = (function () {
            function ProductIdentifierDto(ProductId, VariantId) {
                this.ProductId = ProductId;
                this.VariantId = VariantId;
            }
            return ProductIdentifierDto;
        }());
        Composer.ProductIdentifierDto = ProductIdentifierDto;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../RelatedProducts/Source/TypeScript/ProductIdentifierDto.ts' />

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Mvc/ComposerClient.ts' />
///<reference path='./IInventoryService.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var InventoryService = (function () {
            function InventoryService() {
            }
            InventoryService.prototype.isAvailableToSell = function (sku) {
                var _this = this;
                if (!sku) {
                    throw new Error('The sku is required');
                }
                if (!this._memoizeIsAvailableToSell) {
                    this._memoizeIsAvailableToSell = _.memoize(function (arg) { return _this.isAvailableToSellImpl(arg); });
                }
                return this._memoizeIsAvailableToSell(sku);
            };
            InventoryService.prototype.isAvailableToSellImpl = function (sku) {
                var data = { skus: [sku] };
                return Composer.ComposerClient.post('/api/inventory/findInventoryItems', data)
                    .then(function (availableSkus) { return _.contains(availableSkus, sku); });
            };
            return InventoryService;
        }());
        Composer.InventoryService = InventoryService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../RelatedProducts/Source/TypeScript/ProductIdentifierDto.ts' />

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Mvc/IControllerContext.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Mvc/ComposerClient.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Events/EventHub.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        //
        //Isolated logic, this class rebuild the keyVariantAttributeItems array
        //as expected by KvaItems.hbs
        //TODO: Instancier dans productService (passer dans le constructeur)
        var KeyVariantAttributeItemsBuilder = (function () {
            //Passer viewModel
            function KeyVariantAttributeItemsBuilder(context) {
                if (!context) {
                    throw new Error('Error: context is required');
                }
                if (!context.viewModel) {
                    throw new Error('Error: context.viewModel is required');
                }
                this.context = context;
            }
            //Find possible kva value states bases on the given selection
            //
            //<returns>
            // KeyVariantAttributeItem ViewModel ready for render
            //</returns>
            KeyVariantAttributeItemsBuilder.prototype.BuildKeyVariantAttributeItemsFor = function (selectedKvas) {
                selectedKvas = selectedKvas || {};
                //Get the last known KvaState and use it as a starting point
                var keyVariantAttributeItems = this.context.viewModel.keyVariantAttributeItems || [];
                //Initiate
                var reverseKvaLookup = this.InitiateKVAStateFor(keyVariantAttributeItems, selectedKvas);
                //Find
                var reachableVariants = this.FindReachableVariantsFrom(keyVariantAttributeItems, selectedKvas);
                //Enable
                this.EnableKVAState(reverseKvaLookup, reachableVariants, selectedKvas);
                //Memoize the KvaState for later
                this.context.viewModel.keyVariantAttributeItems = keyVariantAttributeItems;
                //
                return keyVariantAttributeItems;
            };
            //Toggle the Selected state and Disable everything
            //After this initial state, the KVAs will either be
            // Selected or Disable
            //
            //<returns>
            //  A Lookup of all KVA for later easy access using
            //  lookup[propertyName][value]
            //</returns>
            KeyVariantAttributeItemsBuilder.prototype.InitiateKVAStateFor = function (keyVariantAttributeItems, selectedKvas) {
                var reverseLookup = {};
                _.each(keyVariantAttributeItems, function (kva) {
                    var propertyName = kva.PropertyName;
                    var selectedValue = selectedKvas[propertyName];
                    reverseLookup[propertyName] = {};
                    _.each(kva.Values, function (val) {
                        val.Selected = val.Value === selectedValue;
                        val.Disabled = true;
                        reverseLookup[propertyName][val.Value] = val;
                    });
                });
                return reverseLookup;
            };
            //Find all reachable variants from the given configuration
            //Those are variant that could possibly be reach by changing
            //one and only one KVA value
            //<returns>
            //  An array of Variants with all their properties
            //</returns>
            KeyVariantAttributeItemsBuilder.prototype.FindReachableVariantsFrom = function (keyVariantAttributeItems, selectedKvas) {
                var allVariants = (this.context.viewModel.allVariants || {});
                var possibleVariantsLookup = {};
                //Changing Selection
                _.each(selectedKvas, function (value, propertyName) {
                    var possibleMove = _.omit(selectedKvas, propertyName);
                    var v = _.each(_.filter(allVariants, { Kvas: possibleMove }), function (variant) {
                        possibleVariantsLookup[variant.Id] = variant;
                    });
                });
                //
                var variants = _.mapValues(possibleVariantsLookup, _.identity);
                return variants;
            };
            //Enable the KVAs based on the reachable variants
            //Using the reverse lookkup for faster access
            KeyVariantAttributeItemsBuilder.prototype.EnableKVAState = function (reverseKvaLookup, reachableVariants, selectedKvas) {
                //Enable reachable states
                _.each(reachableVariants, function (variant, variantId) {
                    _.each(variant.Kvas, function (value, propertyName) {
                        var kva = reverseKvaLookup[propertyName] || [];
                        var val = kva[value] || {};
                        val.Disabled = false;
                    });
                });
                //If the current selection match nothing, disable it.
                var selectedVariant = _.find(reachableVariants, { Kvas: selectedKvas });
                if (!selectedVariant) {
                    _.each(selectedKvas, function (value, propertyName) {
                        var kva = reverseKvaLookup[propertyName] || [];
                        var val = kva[value] || {};
                        val.Disabled = true;
                    });
                }
            };
            return KeyVariantAttributeItemsBuilder;
        }());
        Composer.KeyVariantAttributeItemsBuilder = KeyVariantAttributeItemsBuilder;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Mvc/IControllerContext.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Mvc/ComposerClient.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Events/EventHub.ts' />
///<reference path='../../../RelatedProducts/Source/TypeScript/ProductIdentifierDto.ts' />
///<reference path='./IProductService.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var ProductService = (function () {
            function ProductService(eventHub, context) {
                if (!eventHub) {
                    throw new Error('Error: eventHub is required');
                }
                if (!context) {
                    throw new Error('Error: context is required');
                }
                if (!context.viewModel) {
                    throw new Error('Error: context.viewModel is required');
                }
                this.eventHub = eventHub;
                this.context = context;
            }
            ProductService.prototype.showQuickView = function () {
                $('#addToCartModal').modal('show');
            };
            ProductService.prototype.closeQuickView = function () {
                $('#addToCartModal').modal('hide');
            };
            ProductService.prototype.selectImage = function (clickedImageIndex, concern) {
                // find currently selected image and set selected to false
                var index = _.findIndex(this.context.viewModel.Images, { Selected: true });
                if (index > -1) {
                    this.context.viewModel.Images[index].Selected = false;
                }
                this.context.viewModel.Images[clickedImageIndex].Selected = true;
                this.context.viewModel.SelectedImage.ImageUrl = this.context.viewModel.Images[clickedImageIndex].ImageUrl;
                this.eventHub.publish(concern + 'ImagesChanged', { data: this.context.viewModel });
            };
            ProductService.prototype.calculatePrice = function (productId, concern) {
                var _this = this;
                var data = { products: [productId] };
                return Composer.ComposerClient.post('/api/product/calculatePrices', data)
                    .then(function (result) {
                    var details = _this.context.viewModel;
                    var mainResult = _.find(result.ProductPrices, { ProductId: productId });
                    //TODO extend all other products on the page (if any)
                    //Extend the product details
                    _.extend(details, mainResult);
                    if (result && result.Currency) {
                        details.Currency = result.Currency;
                    }
                    //Extend the variants
                    var allVariants = _this.context.viewModel.allVariants;
                    _.each(mainResult.VariantPrices, function (variantPrice) {
                        var variant = _.find(allVariants, { Id: variantPrice.VariantId });
                        _.extend(variant, variantPrice);
                        if (variant !== undefined && variant.Id === details.displayedVariantId) {
                            _.extend(details, variant);
                        }
                    });
                    _this.eventHub.publish(concern + 'PricesChanged', { data: details });
                    _this.eventHub.publish(concern + 'PriceCalculated', { data: details });
                });
            };
            /*
             * Return the ViewModel of the Selected Variant.
             * If no variants are available,
             *    it returns the ViewModel of the Product
             * If no variant is selected (aka the KVA selection binds to an unavailable variant)
             *    it returns a None Buyable ViewModel
             */
            ProductService.prototype.getSelectedVariantViewModel = function () {
                var selectedVariantId = this.context.viewModel.selectedVariantId;
                var displayedVariantId = this.context.viewModel.displayedVariantId;
                if (!displayedVariantId) {
                    //This is mostlikely a product
                    return this.context.viewModel;
                }
                else if (selectedVariantId === displayedVariantId) {
                    //This is mostlikely a variant
                    return this.getVariant(selectedVariantId);
                }
                return {
                    'IsAvailableToSell': false
                };
            };
            // TODO (SAM) : getVariant and updateSelectedKvasWith shouldn't be in this file.
            //              They're more suited to a Controller or a helper class.
            //Get the Variant for the given id
            //<param name="variantId">The variant id to find</param>
            //<returns>KeyVariantAttributeItem ViewModel ready for render</returns>
            ProductService.prototype.getVariant = function (variantId) {
                var allVariants = this.context.viewModel.allVariants;
                var variant = _.find(allVariants, { Id: variantId });
                return variant;
            };
            ProductService.prototype.updateSelectedKvasWith = function (selectionsToAdd, concern) {
                var allVariants = this.context.viewModel.allVariants;
                var initialSelectedKvas = this.context.viewModel.selectedKvas || {};
                var initialSelectedVariantId = this.context.viewModel.selectedVariantId;
                var initialDisplayedVariantId = this.context.viewModel.displayedVariantId;
                //Update current selection
                var selectedKvas = _.merge(initialSelectedKvas, selectionsToAdd);
                //Find possible matches
                var variants = _.filter(allVariants, { Kvas: selectedKvas });
                if (variants && variants.length === 1) {
                    //Exactly one variant found, let's update the detail to display it.
                    var variant = variants[0];
                    this.context.viewModel.selectedKvas = _.clone(variant.Kvas);
                    this.context.viewModel.selectedVariantId = variant.Id;
                    this.context.viewModel.displayedVariantId = variant.Id;
                }
                else {
                    //More than one possibile variants, let's not assume any selected ones.
                    this.context.viewModel.selectedKvas = selectedKvas;
                    this.context.viewModel.selectedVariantId = null;
                }
                //Superseed the product details with the selection variant details
                _.extend(this.context.viewModel, this.getSelectedVariantViewModel());
                this.buildKeyVariantAttributeItems(concern);
                if (initialDisplayedVariantId !== this.context.viewModel.displayedVariantId) {
                    this.eventHub.publish(concern + 'DisplayedVariantIdChanged', {
                        data: {
                            initialDisplayedVariantId: initialDisplayedVariantId,
                            displayVariantId: this.context.viewModel.displayedVariantId,
                            selectedSku: this.context.viewModel.Sku
                        }
                    });
                }
                if (initialSelectedVariantId !== this.context.viewModel.selectedVariantId) {
                    this.eventHub.publish(concern + 'SelectedVariantIdChanged', {
                        data: {
                            initialSelectedVariantId: initialSelectedVariantId,
                            selectedVariantId: this.context.viewModel.selectedVariantId,
                            selectedSku: this.context.viewModel.Sku
                        }
                    });
                }
                this.eventHub.publish(concern + 'ImagesChanged', { data: this.context.viewModel });
                //I think this publish is unnecessary because it calculate the price after on a API server call
                this.eventHub.publish(concern + 'PricesChanged', { data: this.context.viewModel });
            };
            ProductService.prototype.getRelatedProducts = function (relatedProductIdentifiers) {
                return Composer.ComposerClient.post('/api/product/relatedProducts', relatedProductIdentifiers);
            };
            ProductService.prototype.loadQuickBuyProduct = function (productId, variantId, concern, source) {
                var _this = this;
                var data = {
                    ProductId: productId,
                    VariantId: variantId
                };
                return Composer.ComposerClient.post('/api/product/variantSelection', data)
                    .then(function (quickBuyProductViewModel) {
                    _this.eventHub.publish(concern + 'QuickBuyLoaded', { data: quickBuyProductViewModel, source: source });
                    return quickBuyProductViewModel;
                }).fail(function (reason) {
                    console.error('Failed loading the ProductQuickView', reason);
                    throw reason;
                });
            };
            ProductService.prototype.findInventoryItems = function (viewModel, concern) {
                var _this = this;
                var selectedSku = viewModel.Sku, skus;
                if (_.isEmpty(viewModel.allVariants)) {
                    skus = [viewModel.Sku];
                }
                else {
                    skus = _.pluck(viewModel.allVariants, 'Sku');
                }
                var data = { skus: skus };
                return Composer.ComposerClient.post('/api/inventory/findInventoryItems', data)
                    .then(function (skusAvailableToSell) {
                    var isAvailableToSell = _.include(skusAvailableToSell, selectedSku) && viewModel.IsAvailableToSell;
                    _this.eventHub.publish(concern + 'InventoryRetrieved', { data: isAvailableToSell });
                });
            };
            ProductService.prototype.productAvailableToSell = function (selectedSku, productAvailableToSell, productIsAvailableToSell) {
                return _.include(productAvailableToSell, selectedSku) && productIsAvailableToSell;
            };
            ProductService.prototype.buildKeyVariantAttributeItems = function (concern) {
                var selectedKvas = this.context.viewModel.selectedKvas;
                var builder = new Orckestra.Composer.KeyVariantAttributeItemsBuilder(this.context);
                var keyVariantAttributeItems = builder.BuildKeyVariantAttributeItemsFor(selectedKvas);
                this.eventHub.publish(concern + 'SelectedKvasChanged', { data: keyVariantAttributeItems });
            };
            ProductService.prototype.replaceHistory = function () {
                var variantId = this.context.viewModel.selectedVariantId;
                //Variant selection is not valid use last valid
                if (variantId === null) {
                    return;
                }
                var fullPathArray = window.location.pathname.split('/').filter(Boolean);
                var shortPathArray = fullPathArray.slice(0, 3);
                shortPathArray.push(variantId);
                var builtPath = window.location.protocol
                    + '//'
                    + window.location.host
                    + this.buildUrlPath(shortPathArray);
                history.replaceState({}, null, builtPath);
            };
            ProductService.prototype.buildUrlPath = function (pathArray) {
                var newPathname = '';
                for (var i = 0; i < pathArray.length; i++) {
                    newPathname += '/';
                    newPathname += pathArray[i];
                }
                return newPathname;
            };
            return ProductService;
        }());
        Composer.ProductService = ProductService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Mvc/ComposerClient.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Events/EventHub.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        /**
          * Module helper to format string value using the Overture convertion rules.
          */
        var ProductFormatter = (function () {
            function ProductFormatter() {
            }
            /**
             * convert a ProductProperty string value into the right strongly typed variable.
             *
             *     formatter.convertToStronglyTyped(actionContext.elementContext.val(), 'Decimal');
             *
             * @param strValue         The ProductProperty value to convert
             * @param propertyDataType the ProductProperty.DataType to induce the type
             */
            ProductFormatter.prototype.convertToStronglyTyped = function (strValue, propertyDataType) {
                var value;
                if (propertyDataType === 'Decimal') {
                    value = parseFloat(strValue);
                }
                else if (propertyDataType === 'Number') {
                    value = parseInt(strValue, 10);
                }
                else if (propertyDataType === 'Boolean') {
                    value = (strValue === 'true');
                }
                else if (propertyDataType === 'Text') {
                    value = strValue + '';
                }
                else if (propertyDataType === 'Lookup') {
                    value = strValue + '';
                }
                else {
                    value = strValue;
                }
                return value;
            };
            return ProductFormatter;
        }());
        Composer.ProductFormatter = ProductFormatter;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.Cart.UI/CartSummary/Source/Typescript/CartService.ts' />
///<reference path='../../../../Composer.Cart.UI/WishList/Source/Typescript/Services/WishListService.ts' />
///<reference path='../../../../Composer.Cart.UI/WishList/Source/TypeScript/WishListRepository.ts' />
///<reference path='../../../../Composer.MyAccount.UI/Common/Source/TypeScript/MembershipService.ts' />
///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Repositories/CartRepository.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Events/IEventInformation.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/UI/UIBusyHandle.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/ErrorHandling/ErrorHandler.ts' />
///<reference path='InventoryService.ts' />
///<reference path='ProductService.ts' />
///<reference path='ProductFormatter.ts' />
///<reference path='KeyVariantAttributeItemsBuilder.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var ProductController = (function (_super) {
            __extends(ProductController, _super);
            function ProductController() {
                _super.apply(this, arguments);
                this.inventoryService = new Composer.InventoryService();
                this.productService = new Composer.ProductService(this.eventHub, this.context);
                this.cartService = new Composer.CartService(new Composer.CartRepository(), this.eventHub);
                this._wishListService = new Composer.WishListService(new Composer.WishListRepository(), this.eventHub);
                this._membershipService = new Composer.MembershipService(new Composer.MembershipRepository());
            }
            ProductController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.registerSubscriptions();
            };
            ProductController.prototype.registerSubscriptions = function () {
                var _this = this;
                this.eventHub.subscribe(this.concern + 'SelectedVariantIdChanged', function (e) { return _this.onSelectedVariantIdChanged(e); });
                this.eventHub.subscribe(this.concern + 'SelectedKvasChanged', function (e) { return _this.onSelectedKvasChanged(e); });
                this.eventHub.subscribe(this.concern + 'ImagesChanged', function (e) { return _this.onImagesChanged(e); });
                this.eventHub.subscribe(this.concern + 'PricesChanged', function (e) { return _this.onPricesChanged(e); });
            };
            ProductController.prototype.onSelectedVariantIdChanged = function (e) {
                return;
            };
            ProductController.prototype.onSelectedKvasChanged = function (e) {
                return;
            };
            ProductController.prototype.onImagesChanged = function (e) {
                return;
            };
            ProductController.prototype.onPricesChanged = function (e) {
                return;
            };
            ProductController.prototype.renderData = function () {
                var quantity = this.getCurrentQuantity();
                var renderTasks = [];
                if (this.isProductWithVariants() && this.isSelectedVariantUnavailable()) {
                    renderTasks.push(this.renderUnavailableQuantity(quantity));
                    renderTasks.push(this.renderUnavailableAddToCart());
                }
                else {
                    renderTasks.push(this.renderAvailableQuantity(quantity));
                    renderTasks.push(this.renderAvailableAddToCart());
                }
                renderTasks.push(this.renderAddToWishList());
                return Q.all(renderTasks);
            };
            ProductController.prototype.isProductWithVariants = function () {
                return $.isArray(this.context.viewModel.allVariants);
            };
            ProductController.prototype.isSelectedVariantUnavailable = function () {
                return !this.context.viewModel.selectedVariantId;
            };
            ProductController.prototype.renderUnavailableQuantity = function (quantity) {
                var _this = this;
                return Q.fcall(function () { return _this.render('ProductQuantity', { Quantity: quantity, Disabled: true }); });
            };
            ProductController.prototype.renderAvailableQuantity = function (quantity) {
                var _this = this;
                return this.inventoryService
                    .isAvailableToSell(this.context.viewModel.Sku)
                    .then(function (result) { return _this.render('ProductQuantity', { Quantity: quantity, Disabled: !result }); });
            };
            ProductController.prototype.renderAddToWishList = function () {
                var _this = this;
                var vm = this.context.viewModel;
                this.render('AddToWishList', { Loaded: false });
                if (this.isProductWithVariants() && this.isSelectedVariantUnavailable()) {
                    return;
                }
                return this._wishListService.getLineItem(vm.productId, vm.selectedVariantId)
                    .then(function (result) {
                    if (result) {
                        _this.render('AddToWishList', { Loaded: true, IsInWishList: true, Id: result.Id });
                    }
                    else {
                        _this.render('AddToWishList', { Loaded: true, IsInWishList: false });
                    }
                });
            };
            ProductController.prototype.renderUnavailableAddToCart = function () {
                return;
            };
            ProductController.prototype.renderAvailableAddToCart = function () {
                return;
            };
            ProductController.prototype.decrementQuantity = function (actionContext) {
                var quantity = this.getCurrentQuantity();
                quantity.Value--;
                actionContext.event.preventDefault();
                this.renderAvailableQuantity(quantity).done();
            };
            ProductController.prototype.incrementQuantity = function (actionContext) {
                var quantity = this.getCurrentQuantity();
                quantity.Value++;
                actionContext.event.preventDefault();
                this.renderAvailableQuantity(quantity).done();
            };
            ProductController.prototype.changeQuantity = function (actionContext) {
                var quantity = this.getCurrentQuantity();
                var newValue = parseInt(actionContext.elementContext.val(), 10);
                if (isFinite(newValue)) {
                    quantity.Value = Math.max(Math.min(newValue, quantity.Max), quantity.Min); // constraint newvalue to max and min.
                }
                this.renderAvailableQuantity(quantity).done();
            };
            ProductController.prototype.addLineItemToWishList = function (actionContext) {
                var _this = this;
                this._membershipService.isAuthenticated().then(function (result) {
                    if (result.IsAuthenticated) {
                        var vm = _this.context.viewModel;
                        var busy = _this.asyncBusy({ elementContext: actionContext.elementContext });
                        var analyticData = {
                            DisplayName: vm.DisplayName,
                            ListPrice: vm.ListPrice
                        };
                        _this.eventHub.publish('wishListLineItemAdding', {
                            data: analyticData
                        });
                        _this._wishListService.addLineItem(vm.productId, vm.selectedVariantId).then(function (data) {
                            var lineItem = data.Items.filter(function (it) { return it.ProductId === vm.productId && it.VariantId === vm.selectedVariantId; })[0];
                            _this.render('AddToWishList', { Loaded: true, IsInWishList: true, Id: lineItem.Id });
                        }).fin(function () { return busy.done(); });
                    }
                    else {
                        _this.redirectToSignInBeforeAddToWishList();
                    }
                });
            };
            ProductController.prototype.removeLineItemToWishList = function (actionContext) {
                var _this = this;
                this._membershipService.isAuthenticated().then(function (result) {
                    if (result.IsAuthenticated) {
                        var id = actionContext.elementContext.data('id');
                        var busy = _this.asyncBusy({ elementContext: actionContext.elementContext });
                        _this._wishListService.removeLineItem(id).then(function (data) {
                            _this.render('AddToWishList', { Loaded: true, IsInWishList: false });
                        }).fin(function () { return busy.done(); });
                    }
                    else {
                        _this.redirectToSignInBeforeAddToWishList();
                    }
                });
            };
            ProductController.prototype.redirectToSignInBeforeAddToWishList = function () {
                var _this = this;
                this._wishListService.getSignInUrl().then(function (signInUrl) {
                    _this._wishListService.clearCache();
                    _this.context.window.location.href = signInUrl + '?ReturnUrl=' + _this.context.window.location.href;
                });
            };
            ProductController.prototype.addLineItem = function (actionContext) {
                var _this = this;
                var busy = this.asyncBusy({ elementContext: actionContext.elementContext });
                var quantity = this.getCurrentQuantity();
                var vm = this.context.viewModel;
                var variant = _.find(vm.allVariants, function (v) { return v.Id === vm.selectedVariantId; });
                var data = this.getProductDataForAnalytics(vm);
                data.Quantity = quantity.Value ? quantity.Value : 1;
                if (variant) {
                    var variantData = this.getVariantDataForAnalytics(variant);
                    _.extend(data, variantData);
                }
                this.eventHub.publish('lineItemAdding', {
                    data: data
                });
                this.addLineItemImpl(vm.productId, vm.ListPrice, vm.selectedVariantId, quantity)
                    .then(function (data) {
                    _this.onAddLineItemSuccess(data);
                    actionContext.elementContext.focus();
                    return data;
                }, function (reason) {
                    _this.onAddLineItemFailed(reason);
                    actionContext.elementContext.focus();
                    throw reason;
                })
                    .then(function (data) { return _this.completeAddLineItem(quantity); })
                    .fin(function () { return busy.done(); });
            };
            ProductController.prototype.onAddLineItemSuccess = function (data) {
                Composer.ErrorHandler.instance().removeErrors();
            };
            ProductController.prototype.onAddLineItemFailed = function (reason) {
                console.error('Error on adding line item', reason);
                Composer.ErrorHandler.instance().outputErrorFromCode('AddToCartFailed');
            };
            ProductController.prototype.getCurrentQuantity = function () {
                var element = $(this.context.container).find('[name="product-quantity"]');
                return {
                    Min: parseInt(element.data('quantityMin'), 10),
                    Max: parseInt(element.data('quantityMax'), 10),
                    Value: parseInt(element.data('quantity'), 10)
                };
            };
            ProductController.prototype.addLineItemImpl = function (productId, price, variantId, quantity) {
                return this.cartService.addLineItem(productId, price, variantId, quantity.Value);
            };
            ProductController.prototype.completeAddLineItem = function (quantityAdded) {
                return;
            };
            ProductController.prototype.selectImage = function (actionContext) {
                actionContext.event.preventDefault();
                var clickedImageIndex = actionContext.elementContext.data('index');
                this.productService.selectImage(clickedImageIndex, this.concern);
            };
            ProductController.prototype.selectKva = function (actionContext) {
                var selectionsToAdd = {};
                var propertyName = actionContext.elementContext.parents('[data-propertyname]').data('propertyname');
                var propertyDataType = actionContext.elementContext.parents('[data-propertydatatype]').data('propertydatatype');
                var formatter = new Orckestra.Composer.ProductFormatter();
                var value = formatter.convertToStronglyTyped(actionContext.elementContext.val(), propertyDataType);
                selectionsToAdd[propertyName] = value;
                this.productService.updateSelectedKvasWith(selectionsToAdd, this.concern);
            };
            ProductController.prototype.calculatePrice = function () {
                return this.productService.calculatePrice(this.context.viewModel.productId, this.concern);
            };
            ProductController.prototype.getProductDataForAnalytics = function (vm) {
                var productId = (vm.productId) ? vm.productId : vm.ProductId;
                var data = {
                    List: this.getListNameForAnalytics(),
                    ProductId: productId,
                    DisplayName: vm.DisplayName,
                    ListPrice: vm.ListPrice,
                    Brand: vm.Brand,
                    CategoryId: vm.CategoryId
                };
                return data;
            };
            ProductController.prototype.getListNameForAnalytics = function () {
                throw new Error('ListName not defined for this controller');
            };
            ProductController.prototype.getVariantDataForAnalytics = function (variant) {
                var variantName = this.buildVariantName(variant.Kvas);
                var data = {
                    Variant: variantName,
                    Name: variant.DisplayName ? variant.DisplayName : undefined,
                    ListPrice: variant.ListPrice
                };
                return data;
            };
            ProductController.prototype.buildVariantName = function (kvas) {
                var keys = Object.keys(kvas).sort();
                var nameParts = [];
                for (var i = 0; i < keys.length; i++) {
                    var key = keys[i];
                    var value = kvas[key];
                    nameParts.push(value);
                }
                return nameParts.join(' ');
            };
            return ProductController;
        }(Orckestra.Composer.Controller));
        Composer.ProductController = ProductController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../Product/Source/Typescript/ProductController.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var ProductDetailController = (function (_super) {
            __extends(ProductDetailController, _super);
            function ProductDetailController() {
                _super.apply(this, arguments);
                this._concern = 'productDetail';
            }
            ProductDetailController.prototype.initialize = function () {
                var _this = this;
                _super.prototype.initialize.call(this);
                this.productService.updateSelectedKvasWith(this.context.viewModel.selectedKvas, this._concern);
                var priceDisplayBusy = this.asyncBusy({
                    msDelay: 300,
                    loadingIndicatorSelector: '.loading-indicator-pricediscount'
                });
                var addToCartBusy = this.asyncBusy({
                    msDelay: 300,
                    loadingIndicatorSelector: '.loading-indicator-inventory'
                });
                Q.when(this.calculatePrice()).done(function () {
                    priceDisplayBusy.done();
                    _this.notifyAnalyticsOfProductDetailsImpression();
                });
                Q.when(this.renderData()).done(function () { return addToCartBusy.done(); });
            };
            ProductDetailController.prototype.getListNameForAnalytics = function () {
                return 'Detail';
            };
            ProductDetailController.prototype.notifyAnalyticsOfProductDetailsImpression = function () {
                var vm = this.context.viewModel;
                var variant = _.find(vm.allVariants, function (v) { return v.Id === vm.selectedVariantId; });
                var data = this.getProductDataForAnalytics(vm);
                if (variant) {
                    var variantData = this.getVariantDataForAnalytics(variant);
                    _.extend(data, variantData);
                }
                this.publishProductImpressionEvent(data);
            };
            ProductDetailController.prototype.publishProductImpressionEvent = function (data) {
                this.eventHub.publish('productDetailsRendered', {
                    data: data
                });
            };
            ProductDetailController.prototype.onSelectedVariantIdChanged = function (e) {
                this.renderData().done();
            };
            ProductDetailController.prototype.onSelectedKvasChanged = function (e) {
                this.render('KvaItems', { KeyVariantAttributeItems: e.data });
            };
            ProductDetailController.prototype.onImagesChanged = function (e) {
                if (this.isProductWithVariants() && this.isSelectedVariantUnavailable()) {
                    this.render('ProductImages', this.getUnavailableProductImages(e));
                }
                else {
                    this.render('ProductImages', e.data);
                }
            };
            ProductDetailController.prototype.getUnavailableProductImages = function (e) {
                var fallbackImageUrl = e.data.FallbackImageUrl;
                var image = {
                    ThumbnailUrl: fallbackImageUrl,
                    ImageUrl: fallbackImageUrl,
                    Selected: true
                };
                var vm = {
                    DisplayName: e.data.DisplayName,
                    Images: [image],
                    SelectedImage: {
                        ImageUrl: fallbackImageUrl
                    }
                };
                return vm;
            };
            ProductDetailController.prototype.onPricesChanged = function (e) {
                if (this.isProductWithVariants() && this.isSelectedVariantUnavailable()) {
                    this.render('PriceDiscount', null);
                }
                else {
                    this.render('PriceDiscount', e.data);
                }
            };
            ProductDetailController.prototype.renderUnavailableAddToCart = function () {
                var _this = this;
                return Q.fcall(function () { return _this.render('AddToCartProductDetail', { IsUnavailable: true }); });
            };
            ProductDetailController.prototype.renderAvailableAddToCart = function () {
                var _this = this;
                var sku = this.context.viewModel.Sku;
                return this.inventoryService.isAvailableToSell(sku)
                    .then(function (result) { return _this.render('AddToCartProductDetail', { IsAvailableToSell: result }); });
            };
            ProductDetailController.prototype.selectKva = function (actionContext) {
                _super.prototype.selectKva.call(this, actionContext);
                //IE8 check
                if (history) {
                    this.productService.replaceHistory();
                }
            };
            ProductDetailController.prototype.completeAddLineItem = function (quantityAdded) {
                var quantity = {
                    Min: quantityAdded.Min,
                    Max: quantityAdded.Max,
                    Value: quantityAdded.Min
                };
                return this.renderAvailableQuantity(quantity);
            };
            return ProductDetailController;
        }(Orckestra.Composer.ProductController));
        Composer.ProductDetailController = ProductDetailController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../Product/Source/Typescript/ProductController.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var ProductZoomController = (function (_super) {
            __extends(ProductZoomController, _super);
            function ProductZoomController() {
                _super.apply(this, arguments);
            }
            ProductZoomController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.initZoom();
            };
            ProductZoomController.prototype.openZoom = function (event) {
                var context$ = $(event.target), index = parseInt($('.js-thumbnail.active').attr('data-index'), 10);
                $('.js-zoom-thumbnail').eq(index).click();
                event.preventDefault();
                $('.modal-fullscreen').modal();
            };
            ProductZoomController.prototype.changeZoomedImage = function (event) {
                var context$ = $(event.target), largeImage = document.querySelector('.js-zoom-image'), selector = event.target.tagName, // Clicked HTML element
                $largeImage = $(largeImage);
                if (selector.toLocaleLowerCase() !== 'a') {
                    context$ = context$.parent();
                }
                $('.js-zoom-thumbnail').removeClass('active');
                context$.addClass('active');
                $largeImage.attr('src', context$.attr('data-image'));
            };
            ProductZoomController.prototype.errorZoomedImage = function (event) {
                var $element = $(event.target), fallbackImageUrl = $element.attr('data-fallback-image-url');
                $element.attr('src', fallbackImageUrl);
            };
            ProductZoomController.prototype.initZoom = function () {
                var _this = this;
                $(document).on('click', '.js-zoom', function (event) { return _this.openZoom(event); });
                $(document).on('click', '.js-zoom-thumbnail', function (event) { return _this.changeZoomedImage(event); });
                $('.js-zoom-image').on('error', function (event) { return _this.errorZoomedImage(event); });
                // Select first thumbnail
                $('.js-zoom-thumbnail').eq(0).click();
            };
            return ProductZoomController;
        }(Orckestra.Composer.ProductController));
        Composer.ProductZoomController = ProductZoomController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));



///<reference path='./IFacet.ts' />

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
/// <reference path='./IFacet.ts' />
/// <reference path='./ISelectedFacet.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Generics/Collections/IHashtable.ts' />
/// <reference path='./ISearchCriteriaOptions.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var SearchCriteria = (function () {
            function SearchCriteria(eventHub, _window) {
                this.eventHub = eventHub;
                this._window = _window;
                this._facetRegistry = {};
                this.keywords = '';
                this.page = 1;
                this.sortBy = '';
                this.sortDirection = '';
                this.selectedFacets = {};
            }
            SearchCriteria.prototype.initialize = function (options) {
                this._facetRegistry = options.facetRegistry;
                this.correctedSearchTerm = options.correctedSearchTerm;
                this.loadFromQuerystring(this._window.location.search);
            };
            SearchCriteria.prototype.loadFromQuerystring = function (querystring) {
                this.loadNonFacetCriteria(querystring);
                this.loadFacetCriteria(querystring);
            };
            SearchCriteria.prototype.toQuerystring = function () {
                var queryBuilder = [], facetKey, facetIndex = 1, facetValue, selectedFacets = this.selectedFacets;
                if (!_.isEmpty(this.keywords) ||
                    !_.isEmpty(this.sortBy) ||
                    !_.isEmpty(this.sortDirection) ||
                    !_.isEmpty(this.page) && this.page > 1 ||
                    !_.isEmpty(this.selectedFacets)) {
                    queryBuilder.push('?');
                }
                if (!_.isEmpty(this.keywords) || !_.isEmpty(this.correctedSearchTerm)) {
                    queryBuilder.push('keywords=');
                    var keyword = _.isEmpty(this.correctedSearchTerm) ? this.keywords : this.correctedSearchTerm;
                    queryBuilder.push(this.encodeQuerystringValue(keyword));
                }
                if (!_.isEmpty(this.sortBy)) {
                    queryBuilder.push('&sortBy=');
                    queryBuilder.push(this.encodeQuerystringValue(this.sortBy));
                }
                if (!_.isEmpty(this.sortDirection)) {
                    queryBuilder.push('&sortDirection=');
                    queryBuilder.push(this.encodeQuerystringValue(this.sortDirection));
                }
                if (!_.isEmpty(this.page) && this.page > 1) {
                    queryBuilder.push('&page=');
                    queryBuilder.push(this.page.toString());
                }
                for (facetKey in selectedFacets) {
                    if (selectedFacets.hasOwnProperty(facetKey)) {
                        facetValue = selectedFacets[facetKey];
                        queryBuilder.push('&');
                        queryBuilder.push(SearchCriteria.facetFieldNameKeyPrefix);
                        queryBuilder.push(facetIndex.toString());
                        queryBuilder.push('=');
                        queryBuilder.push(this.encodeQuerystringValue(facetKey));
                        queryBuilder.push('&');
                        queryBuilder.push(SearchCriteria.facetValueKeyPrefix);
                        queryBuilder.push(facetIndex.toString());
                        queryBuilder.push('=');
                        queryBuilder.push(this.encodeQuerystringValue(_.isArray(facetValue) ? facetValue.join('|') : facetValue));
                        facetIndex++;
                    }
                }
                return queryBuilder.join('');
            };
            SearchCriteria.prototype.clearFacets = function () {
                this.resetPaging();
                this.selectedFacets = {};
            };
            SearchCriteria.prototype.addSingleFacet = function (facetKey, facetValue) {
                this.selectedFacets[facetKey] = facetValue;
            };
            SearchCriteria.prototype.updateMultiFacets = function (facets) {
                var _this = this;
                var facetKey, facetValues;
                this.resetPaging();
                this.clearSelectedMultiFacets();
                for (facetKey in facets) {
                    if (facets.hasOwnProperty(facetKey)) {
                        this.selectedFacets[facetKey] = [];
                        facetValues = (typeof facets[facetKey] === 'string' ?
                            [facets[facetKey]] : facets[facetKey]);
                        facetValues.forEach(function (value, index, array) {
                            _this.selectedFacets[facetKey].push(value);
                        });
                    }
                }
            };
            SearchCriteria.prototype.removeFacet = function (facetToRemove) {
                var facet;
                this.resetPaging();
                if (this.selectedFacets.hasOwnProperty(facetToRemove.facetFieldName)) {
                    facet = this.getSelectedFacetsArray(facetToRemove.facetFieldName);
                    if (facetToRemove.facetType.toLowerCase() === 'range') {
                        facet.selectedValues = undefined;
                    }
                    else {
                        // to string in case facetValue is a number
                        facet.selectedValues = _.without(facet.selectedValues, facetToRemove.facetValue.toString());
                    }
                    this.setSelectedFacet(facet);
                }
            };
            SearchCriteria.prototype.getSelectedFacetsArray = function (facetFieldName) {
                var isSelectedFacetArray;
                var selectedFacet = this.selectedFacets[facetFieldName];
                var selectedFacetArray;
                if (_.isArray(selectedFacet)) {
                    isSelectedFacetArray = true;
                    selectedFacetArray = selectedFacet;
                }
                else if (_.isString(selectedFacet)) {
                    isSelectedFacetArray = false;
                    selectedFacetArray = selectedFacet.split('|');
                }
                else {
                    throw new Error("The selected facet " + facetFieldName + " is not an array or a string");
                }
                return {
                    facetFieldName: facetFieldName,
                    selectedValues: selectedFacetArray,
                    isFacetArray: isSelectedFacetArray
                };
            };
            SearchCriteria.prototype.setSelectedFacet = function (selectedFacet) {
                var facetStr = '';
                if (_.isEmpty(selectedFacet.selectedValues)) {
                    delete this.selectedFacets[selectedFacet.facetFieldName];
                }
                else {
                    if (selectedFacet.isFacetArray) {
                        this.selectedFacets[selectedFacet.facetFieldName] = selectedFacet.selectedValues;
                    }
                    else {
                        _.each(selectedFacet.selectedValues, function (v) {
                            if (!_.isEmpty(facetStr)) {
                                facetStr = facetStr + '|';
                            }
                            facetStr = facetStr + v;
                        });
                        this.selectedFacets[selectedFacet.facetFieldName] = facetStr;
                    }
                }
            };
            SearchCriteria.prototype.clearSelectedMultiFacets = function () {
                var _this = this;
                var selectedFacets = this.selectedFacets, facetKey, facetKeysToDelete = [];
                for (facetKey in selectedFacets) {
                    if (selectedFacets.hasOwnProperty(facetKey) && this._facetRegistry[facetKey] === 'multiselect') {
                        facetKeysToDelete.push(facetKey);
                    }
                }
                facetKeysToDelete.forEach(function (facetKey) {
                    delete _this.selectedFacets[facetKey];
                });
            };
            SearchCriteria.prototype.resetPaging = function () {
                this.page = 1;
            };
            SearchCriteria.prototype.loadFacetCriteria = function (querystring) {
                var _this = this;
                // TODO: Don't need to loop over querystring again. Should
                // be processing this in the same loop as the non-facet criteria.
                var facetFieldName, facetValue, key, keys = {}, keyValues = {};
                if (querystring.length === 0) {
                    return;
                }
                querystring.substring(1).split('&').forEach(function (value, index, array) {
                    var keyValue = value.split('='), keyFound, valueFound;
                    if (keyValue.length === 2) {
                        keyFound = keyValue[0].toLowerCase();
                        valueFound = _this.decodeQuerystringValue(keyValue[1]);
                        if (keyFound.indexOf(SearchCriteria.facetFieldNameKeyPrefix) === 0) {
                            keys[keyFound.replace(SearchCriteria.facetFieldNameKeyPrefix, '')] = valueFound;
                        }
                        if (keyFound.indexOf(SearchCriteria.facetValueKeyPrefix) === 0) {
                            keyValues[keyFound.replace(SearchCriteria.facetValueKeyPrefix, '')] = valueFound;
                        }
                    }
                });
                for (key in keys) {
                    if (keys.hasOwnProperty(key)) {
                        facetFieldName = this.decodeQuerystringValue(keys[key]);
                        if (keyValues.hasOwnProperty(key)) {
                            facetValue = this.decodeQuerystringValue(keyValues[key]);
                            switch (this._facetRegistry[facetFieldName]) {
                                case 'multiselect':
                                    this.selectedFacets[facetFieldName] = facetValue.split('|');
                                    break;
                                default:
                                    this.selectedFacets[facetFieldName] = facetValue;
                                    break;
                            }
                        }
                    }
                }
            };
            SearchCriteria.prototype.loadNonFacetCriteria = function (querystring) {
                var _this = this;
                if (querystring.length === 0) {
                    return;
                }
                querystring.substring(1).split('&').forEach(function (value, index, array) {
                    var keyValue = value.split('='), keyFound, valueFound;
                    if (keyValue.length === 2) {
                        keyFound = keyValue[0].toUpperCase();
                        valueFound = _this.decodeQuerystringValue((keyValue[1] + ''));
                        switch (keyFound) {
                            case 'KEYWORDS':
                                _this.keywords = valueFound;
                                break;
                            case 'SORTBY':
                                _this.sortBy = valueFound;
                                break;
                            case 'SORTDIRECTION':
                                _this.sortDirection = valueFound;
                                break;
                            case 'PAGE':
                                _this.page = parseInt(valueFound, 10);
                                break;
                            default:
                                break;
                        }
                    }
                });
            };
            SearchCriteria.prototype.encodeQuerystringValue = function (valueToEncode) {
                return encodeURIComponent(valueToEncode).replace(/%20/g, '+');
            };
            SearchCriteria.prototype.decodeQuerystringValue = function (valueToDecode) {
                return decodeURIComponent(valueToDecode).replace(/\+/g, ' ');
            };
            SearchCriteria.facetFieldNameKeyPrefix = 'fn';
            SearchCriteria.facetValueKeyPrefix = 'fv';
            return SearchCriteria;
        }());
        Composer.SearchCriteria = SearchCriteria;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='../../../../../Composer.UI/Source/TypeScript/Events/IEventInformation.ts' />
/// <reference path='../../../../../Composer.UI/Source/TypeScript/Generics/Collections/IHashtable.ts' />
/// <reference path='../ISearchCriteriaOptions.ts' />



/// <reference path='../../../../../Composer.UI/Source/Typings/tsd.d.ts' />
/// <reference path='../../../../../Composer.UI/Source/TypeScript/Events/IEventHub.ts' />
/// <reference path='../../../../../Composer.UI/Source/TypeScript/Events/IEventInformation.ts' />
/// <reference path='../SearchCriteria.ts' />
/// <reference path='./ISearchService.ts' />
/// <reference path='../IFacet.ts' />
/// <reference path='../ISingleSelectCategory.ts' />
///
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        // TODO: Decouple window object from search service.
        var SearchService = (function () {
            function SearchService(_eventHub, _window) {
                this._eventHub = _eventHub;
                this._window = _window;
                this._baseSearchUrl = window.location.href.replace(window.location.search, '');
                this._baseUrl = this._baseSearchUrl.replace(window.location.pathname, '');
                this._facetRegistry = {};
                this._searchCriteria = new Composer.SearchCriteria(_eventHub, _window);
            }
            /**
             * Initializes the search service.
             *
             * param facetRegistry Facets available to the search service.
             */
            SearchService.prototype.initialize = function (options) {
                this.registerSubscriptions();
                this._searchCriteria.initialize(options);
            };
            SearchService.prototype.singleFacetsChanged = function (eventInformation) {
                var facetKey = eventInformation.data.facetKey, facetValue = eventInformation.data.facetValue;
                this._searchCriteria.addSingleFacet(facetKey, facetValue);
                this.search();
            };
            SearchService.prototype.sortingChanged = function (eventInformation) {
                var dataUrl = eventInformation.data.url;
                this._window.location.href = dataUrl;
            };
            SearchService.prototype.getSelectedFacets = function () {
                return this._searchCriteria.selectedFacets;
            };
            SearchService.prototype.multiFacetChanged = function (eventInformation) {
                this._searchCriteria.updateMultiFacets(eventInformation.data.filter);
                this.search();
            };
            SearchService.prototype.clearFacets = function (eventInformation) {
                var landingPageUrl = eventInformation.data.landingPageUrl;
                this._searchCriteria.clearFacets();
                if (landingPageUrl) {
                    this._baseSearchUrl = landingPageUrl;
                }
                this.search();
            };
            SearchService.prototype.removeFacet = function (eventInformation) {
                var facet = eventInformation.data;
                this._searchCriteria.removeFacet(facet);
                if (facet.facetLandingPageUrl && facet.facetType === 'SingleSelect') {
                    this._baseSearchUrl = facet.facetLandingPageUrl;
                }
                this.search();
            };
            SearchService.prototype.addSingleSelectCategory = function (eventInformation) {
                var singleSelectCategory = eventInformation.data;
                this._baseSearchUrl = singleSelectCategory.categoryUrl;
                this.search();
            };
            SearchService.prototype.registerSubscriptions = function () {
                this._eventHub.subscribe('sortingChanged', this.sortingChanged.bind(this));
                this._eventHub.subscribe('singleFacetsChanged', this.singleFacetsChanged.bind(this));
                this._eventHub.subscribe('multiFacetChanged', this.multiFacetChanged.bind(this));
                this._eventHub.subscribe('facetsCleared', this.clearFacets.bind(this));
                this._eventHub.subscribe('facetRemoved', this.removeFacet.bind(this));
                this._eventHub.subscribe('singleCategoryAdded', this.addSingleSelectCategory.bind(this));
            };
            SearchService.prototype.search = function () {
                this._window.location.href = this._baseSearchUrl + this._searchCriteria.toQuerystring();
            };
            return SearchService;
        }());
        Composer.SearchService = SearchService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='../../../../../Composer.UI/Source/Typings/tsd.d.ts' />
/// <reference path='../../../../../Composer.UI/Source/TypeScript/JqueryPlugins/ISerializeObjectJqueryPlugin.ts' />
/// <reference path='../../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
/// <reference path='../../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
/// <reference path='../../../../../Composer.UI/Source/TypeScript/Mvc/IControllerContext.ts' />
///<reference path='../../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
/// <reference path='../../../../../Composer.UI/Source/TypeScript/Events/IEventHub.ts' />
/// <reference path='../../../../../Composer.UI/Source/TypeScript/System/IDisposable.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var SliderService = (function () {
            function SliderService(context, eventHub) {
                this.context = context;
                this.eventHub = eventHub;
                this.context = context;
            }
            SliderService.prototype.initialize = function (selectedValues) {
                this.applyButtonContext = this.context.find(':submit');
                this.mapData(this.context.data());
                this.initializeSlider(selectedValues);
            };
            SliderService.prototype.dispose = function () {
                this.sliderInstance.destroy();
            };
            SliderService.prototype.mapData = function (containerData) {
                this.step = containerData.step || 1;
                this.maxLabel = containerData.maxLabel;
                this.maxValue = containerData.max;
                this.minValue = containerData.min;
                this.facetFieldName = containerData.facetfieldname;
            };
            SliderService.prototype.dirtied = function () {
                this.applyButtonContext.prop('disabled', false);
            };
            /**
             * Formatting for the formatted values of the slider. When getting.
             */
            SliderService.prototype.formatFrom = function (value) {
                if (this.maxLabel && value === this.maxLabel) {
                    value = this.maxValue;
                }
                return value;
            };
            /**
             * Formatting for the formatted values of the slider. When setting.
             */
            SliderService.prototype.formatTo = function (value) {
                value = parseInt(value, 10) || 0;
                if (this.maxLabel && value === this.maxValue) {
                    value = this.maxLabel;
                }
                return value;
            };
            SliderService.prototype.initializeSlider = function (facetData) {
                var _this = this;
                var sliderElement = this.context.find('.range').get(0);
                var defaultRange = [this.minValue, this.maxValue];
                var startRange = defaultRange;
                var selectedRange;
                var lowerRangeContext = this.context.find('.js-lowerValue');
                var upperRangeContext = this.context.find('.js-higherValue');
                // TODO handle array or not array
                if (facetData) {
                    selectedRange = facetData.split('|');
                    startRange = defaultRange.map(function (value, index) {
                        return selectedRange[index] ? selectedRange[index] : defaultRange[index];
                    });
                }
                this.sliderInstance = this.createSlider(startRange, sliderElement);
                this.sliderInstance.on('set', function (values, handle) {
                    _this.dirtied();
                });
                this.sliderInstance.on('update', function (values, handle) {
                    lowerRangeContext.val(values[0]);
                    upperRangeContext.val(values[1]);
                });
                lowerRangeContext.on('keyup', function (event) { return _this.dirtied(); });
                upperRangeContext.on('keyup', function (event) { return _this.dirtied(); });
                lowerRangeContext.on('blur', function (event) { return _this.sliderInstance.set([$(event.target).val(), null]); });
                upperRangeContext.on('blur', function (event) { return _this.sliderInstance.set([null, $(event.target).val()]); });
            };
            SliderService.prototype.createSlider = function (startRange, sliderElement) {
                var _this = this;
                noUiSlider.create(sliderElement, {
                    start: startRange,
                    connect: true,
                    margin: this.step,
                    step: this.step,
                    range: {
                        'min': this.minValue,
                        'max': this.maxValue
                    },
                    format: {
                        to: function (value) { return _this.formatTo(value); },
                        from: function (value) { return _this.formatFrom(value); }
                    }
                });
                return sliderElement.noUiSlider;
            };
            SliderService.prototype.getKey = function () {
                return this.facetFieldName;
            };
            SliderService.prototype.getValues = function () {
                var values = this.sliderInstance.get();
                if (values[1] === this.maxLabel) {
                    values[1] = undefined;
                }
                return values;
            };
            return SliderService;
        }());
        Composer.SliderService = SliderService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var UrlHelper = (function () {
            function UrlHelper() {
            }
            UrlHelper.resolvePageType = function () {
                if (window.location.href.indexOf('keywords') !== -1) {
                    return 'search';
                }
                else {
                    return 'browse';
                }
            };
            return UrlHelper;
        }());
        Composer.UrlHelper = UrlHelper;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/JqueryPlugins/ISerializeObjectJqueryPlugin.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerContext.ts' />
/// <reference path='./Services/SearchService.ts' />
/// <reference path='./Services/ISearchService.ts' />
/// <reference path='./Services/SliderService.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
/// <reference path='./UrlHelper.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var FacetSearchController = (function (_super) {
            __extends(FacetSearchController, _super);
            function FacetSearchController() {
                _super.apply(this, arguments);
                this._debounceTimeout = 500;
                this.sliderServicesInstances = {};
            }
            FacetSearchController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.initializeServices();
            };
            FacetSearchController.prototype.multiFacetChanged = function (actionContext) {
                var _this = this;
                if (!_.isEmpty(this._debounceHandle)) {
                    this._debounceHandle.cancel();
                }
                var anchorContext = actionContext.elementContext, facetFieldName = anchorContext.attr('name'), facetValue = anchorContext.attr('value');
                this._debounceHandle = _.debounce(function () {
                    _this.eventHub.publish('multiFacetChanged', {
                        data: {
                            facetKey: facetFieldName,
                            facetValue: facetValue,
                            pageType: Composer.UrlHelper.resolvePageType(),
                            filter: $('form[name="searchFacets"]', _this.context.container).serializeObject()
                        }
                    });
                }, 250);
                this._debounceHandle();
            };
            FacetSearchController.prototype.dispose = function () {
                var _this = this;
                _super.prototype.dispose.call(this);
                Object.keys(this.sliderServicesInstances).forEach(function (sliderServiceKey) { return _this.sliderServicesInstances[sliderServiceKey].dispose(); });
            };
            FacetSearchController.prototype.singleFacetChanged = function (actionContext) {
                var anchorContext = actionContext.elementContext, facetFieldName = anchorContext.data('facetfieldname'), facetValue = anchorContext.data('facetvalue'), facets = {};
                actionContext.event.preventDefault();
                actionContext.event.stopPropagation();
                this.eventHub.publish('singleFacetsChanged', {
                    data: {
                        facetKey: facetFieldName,
                        facetValue: facetValue,
                        pageType: Composer.UrlHelper.resolvePageType()
                    }
                });
            };
            FacetSearchController.prototype.toggleFacetList = function (actionContext) {
                actionContext.event.preventDefault();
                var buttonContext = actionContext.elementContext, label = buttonContext.html(), showMoreLabel = buttonContext.data('label-showmore'), showLessLabel = buttonContext.data('label-showless');
                buttonContext.html(label === showMoreLabel ? showLessLabel : showMoreLabel);
            };
            FacetSearchController.prototype.refineByRange = function (actionContext) {
                actionContext.event.preventDefault();
                var container = actionContext.elementContext.closest('[data-facetfieldname]');
                var sliderServiceInstance = this.sliderServicesInstances[container.data('facetfieldname')];
                var values = sliderServiceInstance.getValues();
                var key = sliderServiceInstance.getKey();
                this.eventHub.publish('singleFacetsChanged', {
                    data: {
                        facetKey: key,
                        facetValue: values.join('|')
                    }
                });
            };
            FacetSearchController.prototype.initializeServices = function () {
                var _this = this;
                var selectedFacets;
                var correctedSearchTerm = this.context.container.attr('data-corrected-search-term');
                this._searchService = new Composer.SearchService(this.eventHub, window);
                this._searchService.initialize({
                    facetRegistry: this.buildFacetRegistry(),
                    correctedSearchTerm: correctedSearchTerm
                });
                selectedFacets = this._searchService.getSelectedFacets();
                this.context.container.find('[data-facettype="Range"]').each(function (index, element) {
                    var facetFieldName = $(element).data('facetfieldname');
                    var serviceInstance = new Composer.SliderService($(element), _this.eventHub);
                    serviceInstance.initialize(selectedFacets[facetFieldName]);
                    _this.sliderServicesInstances[facetFieldName] = serviceInstance;
                });
            };
            FacetSearchController.prototype.buildFacetRegistry = function () {
                var facetRegistry = {};
                $('[data-facettype]', this.context.container)
                    .add($('#selectedFacets [data-facetfieldname]', this.context.container))
                    .each(function (index, item) {
                    var facetType, facetFieldName, facetGroup = $(item);
                    facetFieldName = facetGroup.data('facetfieldname');
                    facetType = facetGroup.data('facettype').toLowerCase();
                    facetRegistry[facetFieldName] = facetType;
                });
                return facetRegistry;
            };
            return FacetSearchController;
        }(Orckestra.Composer.Controller));
        Composer.FacetSearchController = FacetSearchController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/JqueryPlugins/ISerializeObjectJqueryPlugin.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerContext.ts' />
/// <reference path='./Services/SearchService.ts' />
/// <reference path='./Services/ISearchService.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var ProductSearchController = (function (_super) {
            __extends(ProductSearchController, _super);
            function ProductSearchController() {
                _super.apply(this, arguments);
                this._debounceTimeout = 500;
            }
            ProductSearchController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.initializeSearchService();
            };
            ProductSearchController.prototype.multiFacetChanged = function (actionContext) {
                var _this = this;
                if (!_.isEmpty(this._debounceHandle)) {
                    this._debounceHandle.cancel();
                }
                var anchorContext = actionContext.elementContext, facetFieldName = anchorContext.attr('name'), facetValue = anchorContext.attr('value');
                this._debounceHandle = _.debounce(function () {
                    _this.eventHub.publish('multiFacetChanged', {
                        data: {
                            facetKey: facetFieldName,
                            facetValue: facetValue,
                            pageType: 'browse',
                            filter: $('form[name="searchFacets"]', _this.context.container).serializeObject()
                        }
                    });
                }, 250);
                this._debounceHandle();
            };
            ProductSearchController.prototype.singleFacetChanged = function (actionContext) {
                var anchorContext = actionContext.elementContext, facetFieldName = anchorContext.data('facetfieldname'), facetValue = anchorContext.data('facetvalue'), facets = {};
                actionContext.event.preventDefault();
                actionContext.event.stopPropagation();
                this.eventHub.publish('singleFacetsChanged', {
                    data: {
                        facetKey: facetFieldName,
                        facetValue: facetValue,
                        pageType: 'browse'
                    }
                });
            };
            ProductSearchController.prototype.removeSelectedFacet = function (actionContext) {
                var removeFacetButton = actionContext.elementContext;
                actionContext.event.preventDefault();
                actionContext.event.stopPropagation();
                this.eventHub.publish('facetRemoved', {
                    data: {
                        facetFieldName: removeFacetButton.data('facetfieldname'),
                        facetValue: removeFacetButton.data('facetvalue'),
                        facetType: removeFacetButton.data('facettype')
                    }
                });
            };
            ProductSearchController.prototype.clearSelectedFacets = function (actionContext) {
                actionContext.event.preventDefault();
                actionContext.event.stopPropagation();
                this.eventHub.publish('facetsCleared', null);
            };
            ProductSearchController.prototype.initializeSearchService = function () {
                this._searchService = new Composer.SearchService(this.eventHub, window);
                this._searchService.initialize({
                    facetRegistry: this.buildFacetRegistry()
                });
            };
            ProductSearchController.prototype.buildFacetRegistry = function () {
                var facetRegistry = {};
                $('[data-facettype]', this.context.container)
                    .add($('#selectedFacets [data-facetfieldname]', this.context.container))
                    .each(function (index, item) {
                    var facetType, facetFieldName, facetGroup = $(item);
                    facetFieldName = facetGroup.data('facetfieldname');
                    facetType = facetGroup.data('facettype').toLowerCase();
                    facetRegistry[facetFieldName] = facetType;
                });
                return facetRegistry;
            };
            return ProductSearchController;
        }(Orckestra.Composer.Controller));
        Composer.ProductSearchController = ProductSearchController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='../../../../Composer.Product.UI/Product/Source/TypeScript/ProductController.ts' />
///<reference path='IQuickViewController.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var QuickViewController = (function (_super) {
            __extends(QuickViewController, _super);
            function QuickViewController() {
                _super.apply(this, arguments);
                this.concern = 'productSearch';
            }
            QuickViewController.prototype.initialize = function () {
                this.setConcernWithContext();
                _super.prototype.initialize.call(this);
            };
            QuickViewController.prototype.setConcernWithContext = function () {
                var contextualConcern = this.context.container.closest('[data-concern]').data('concern');
                if (contextualConcern) {
                    this.concern = contextualConcern;
                }
            };
            QuickViewController.prototype.registerSubscriptions = function () {
                var _this = this;
                _super.prototype.registerSubscriptions.call(this);
                this.eventHub.subscribe(this.concern + 'QuickBuyLoaded', function (e) { return _this.onQuickBuyLoaded(e); });
            };
            QuickViewController.prototype.onQuickBuyLoaded = function (e) {
                var _this = this;
                this.render('ProductQuickView', e.data);
                this.productService.showQuickView();
                this.context.viewModel = JSON.parse(e.data['JsonContext'] || '{}');
                this.context.viewModel.source = e.source;
                this.setVariantId(this.context.viewModel.displayedVariantId);
                var priceDisplayBusy = this.asyncBusy({
                    msDelay: 300,
                    loadingIndicatorSelector: '.loading-indicator-pricediscount'
                });
                var addToCartBusy = this.asyncBusy({
                    msDelay: 300,
                    loadingIndicatorSelector: '.loading-indicator-inventory'
                });
                var promise = Q.all([this.calculatePrice(), this.renderData()])
                    .then(function () {
                    Composer.ErrorHandler.instance().removeErrors();
                }, function (reason) { return _this.onLoadingFailed(reason); })
                    .fin(function () {
                    priceDisplayBusy.done();
                    addToCartBusy.done();
                });
            };
            QuickViewController.prototype.onLoadingFailed = function (reason) {
                console.error('Failed loading the Product Quick View');
                Composer.ErrorHandler.instance().outputErrorFromCode('QuickViewLoadFailed');
            };
            QuickViewController.prototype.setVariantId = function (variantId) {
                var variant = (this.productService.getVariant(variantId) || {});
                this.productService.updateSelectedKvasWith(variant.Kvas, this.concern);
            };
            QuickViewController.prototype.onSelectedVariantIdChanged = function (e) {
                var _this = this;
                this.renderData()
                    .then(function () { return _this.onSelectedVariantIdChangedSuccess(); }, function (reason) { return _this.onSelectedVariantIdChangedFailed(reason); })
                    .done();
            };
            QuickViewController.prototype.onSelectedVariantIdChangedSuccess = function () {
                Composer.ErrorHandler.instance().removeErrors();
            };
            QuickViewController.prototype.onSelectedVariantIdChangedFailed = function (reason) {
                console.error('Error while changing the selected variant.', reason);
                this.renderUnavailableAddToCart();
                this.renderUnavailableQuantity(this.getCurrentQuantity());
                Composer.ErrorHandler.instance().outputErrorFromCode('SelectedVariantChangeFailed');
            };
            QuickViewController.prototype.onSelectedKvasChanged = function (e) {
                this.render('ProductQuickViewKvaItems', { KeyVariantAttributeItems: e.data });
            };
            QuickViewController.prototype.onImagesChanged = function (e) {
                if (this.isProductWithVariants() && this.isSelectedVariantUnavailable()) {
                    this.render('MainImageContent', this.getUnavailableMainImageContent(e));
                }
                else {
                    this.render('MainImageContent', e.data);
                }
            };
            QuickViewController.prototype.getUnavailableMainImageContent = function (e) {
                return {
                    DisplayName: e.data.DisplayName,
                    SelectedImage: {
                        ImageUrl: e.data.FallbackImageUrl
                    }
                };
            };
            QuickViewController.prototype.onPricesChanged = function (e) {
                if (this.isProductWithVariants() && this.isSelectedVariantUnavailable()) {
                    this.render('PriceDiscount', null);
                }
                else {
                    this.render('PriceDiscount', e.data);
                }
            };
            QuickViewController.prototype.renderUnavailableAddToCart = function () {
                var _this = this;
                return Q.fcall(function () { return _this.render('AddToCartQuickView', { IsUnavailable: true }); });
            };
            QuickViewController.prototype.renderAvailableAddToCart = function () {
                var _this = this;
                return this.inventoryService
                    .isAvailableToSell(this.context.viewModel.Sku)
                    .then(function (result) { return _this.render('AddToCartQuickView', { IsAvailableToSell: result }); });
            };
            QuickViewController.prototype.completeAddLineItem = function (quantityAdded) {
                var _this = this;
                return Q.fcall(function () { return _this.productService.closeQuickView(); });
            };
            QuickViewController.prototype.getListNameForAnalytics = function () {
                return this.context.viewModel.source;
            };
            return QuickViewController;
        }(Orckestra.Composer.ProductController));
        Composer.QuickViewController = QuickViewController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/JqueryPlugins/ISerializeObjectJqueryPlugin.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/ErrorHandling/ErrorHandler.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerContext.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Repositories/CartRepository.ts' />
/// <reference path='../../../../Composer.Cart.UI/CartSummary/Source/TypeScript/CartService.ts' />
/// <reference path='../../../Product/Source/TypeScript/ProductService.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var SearchResultsController = (function (_super) {
            __extends(SearchResultsController, _super);
            function SearchResultsController() {
                _super.apply(this, arguments);
                this.cartService = new Composer.CartService(new Composer.CartRepository(), this.eventHub);
                this.productService = new Composer.ProductService(this.eventHub, this.context);
            }
            SearchResultsController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.currentPage = this.getCurrentPage();
                this.eventHub.publish('searchResultRendered', {
                    data: {
                        ProductSearchResults: this.context.viewModel.ProductSearchResults,
                        ListName: this.context.viewModel.ListName,
                        PageNumber: this.currentPage.DisplayName,
                        MaxItemsPerPage: this.context.viewModel.MaxItemsPerPage
                    } });
            };
            SearchResultsController.prototype.getCurrentPage = function () {
                return _.find(this.context.viewModel.ProductSearchResults.Pagination.Pages, { IsCurrentPage: true }) || {};
            };
            SearchResultsController.prototype.addToCart = function (actionContext) {
                var _this = this;
                var productContext = $(actionContext.elementContext).closest('[data-product-id]');
                var hasVariants = productContext.data('hasVariants');
                //Do not use .data since it may parse the id as a number.
                var productId = productContext.attr('data-product-id');
                var variantId = productContext.attr('data-product-variant-id');
                var product = _.find(this.context.viewModel.ProductSearchResults.SearchResults, function (product) {
                    if (_.isEmpty(variantId)) {
                        return product.ProductId === productId;
                    }
                    else {
                        return product.ProductId === productId && product.VariantId === variantId;
                    }
                });
                var price = product.Pricing.IsOnSale ? product.Pricing.Price : product.Pricing.ListPrice;
                var busy = this.asyncBusy({ elementContext: actionContext.elementContext, containerContext: productContext });
                if (hasVariants === 'True') {
                    this.productService.loadQuickBuyProduct(productId, variantId, 'productSearch', this.context.viewModel.ListName)
                        .then(function (data) {
                        Composer.ErrorHandler.instance().removeErrors();
                        return data;
                    }, function (reason) { return _this.onAddToCartFailed(reason); })
                        .fin(function () { return busy.done(); });
                }
                else {
                    var productData = this.getProductDataForAnalytics(productId, price);
                    this.eventHub.publish('lineItemAdding', { data: productData });
                    this.cartService.addLineItem(productId, '' + price)
                        .then(function (data) {
                        Composer.ErrorHandler.instance().removeErrors();
                        return data;
                    }, function (reason) { return _this.onAddToCartFailed(reason); })
                        .fin(function () { return busy.done(); });
                }
            };
            SearchResultsController.prototype.onAddToCartFailed = function (reason) {
                console.error('Error on adding item to cart', reason);
                Composer.ErrorHandler.instance().outputErrorFromCode('AddToCartFailed');
            };
            SearchResultsController.prototype.searchProductClick = function (actionContext) {
                var index = actionContext.elementContext.data('index');
                var productId = actionContext.elementContext.data('productid').toString();
                var product = _.find(this.context.viewModel.ProductSearchResults.SearchResults, { ProductId: productId });
                this.eventHub.publish('productClick', { data: {
                        Product: product,
                        ListName: this.context.viewModel.ListName,
                        Index: index,
                        PageNumber: this.currentPage.DisplayName,
                        MaxItemsPerPage: this.context.viewModel.MaxItemsPerPage
                    } });
            };
            SearchResultsController.prototype.pagerPageChanged = function (actionContext) {
                this.context.window.location.href = actionContext.elementContext.val();
            };
            SearchResultsController.prototype.getProductDataForAnalytics = function (productId, price) {
                var results = this.context.viewModel.ProductSearchResults.SearchResults;
                var vm = _.find(results, function (r) { return r.ProductId === productId; });
                if (!vm) {
                    throw new Error("Could not find a product with the ID '" + productId + "'.");
                }
                var data = {
                    List: this.context.viewModel.ListName,
                    ProductId: vm.ProductId,
                    DisplayName: vm.DisplayName,
                    ListPrice: price,
                    Brand: vm.Brand,
                    CategoryId: vm.CategoryId,
                    Quantity: 1
                };
                return data;
            };
            return SearchResultsController;
        }(Orckestra.Composer.Controller));
        Composer.SearchResultsController = SearchResultsController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerContext.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var SearchSummaryController = (function (_super) {
            __extends(SearchSummaryController, _super);
            function SearchSummaryController() {
                _super.apply(this, arguments);
            }
            SearchSummaryController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                var productSearchResults = this.context.viewModel.ProductSearchResults;
                if (productSearchResults.TotalCount === 0 && productSearchResults.Keywords) {
                    this.eventHub.publish('noResultsFound', {
                        data: {
                            Keyword: productSearchResults.Keywords,
                            ListName: this.context.viewModel.ListName,
                        } });
                }
                if (!_.isEmpty(productSearchResults.CorrectedSearchTerms)
                    && productSearchResults.Keywords
                    && productSearchResults.TotalCount !== 0) {
                    this.eventHub.publish('searchTermCorrected', {
                        data: {
                            ProductSearchResults: productSearchResults,
                            KeywordEntered: productSearchResults.Keywords,
                            KeywordCorrected: productSearchResults.CorrectedSearchTerms,
                            ListName: this.context.viewModel.ListName,
                        } });
                }
            };
            return SearchSummaryController;
        }(Orckestra.Composer.Controller));
        Composer.SearchSummaryController = SearchSummaryController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/JqueryPlugins/ISerializeObjectJqueryPlugin.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerContext.ts' />
/// <reference path='./Services/SearchService.ts' />
/// <reference path='./Services/ISearchService.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
/// <reference path='./UrlHelper.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var SelectedFacetSearchController = (function (_super) {
            __extends(SelectedFacetSearchController, _super);
            function SelectedFacetSearchController() {
                _super.apply(this, arguments);
            }
            SelectedFacetSearchController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
            };
            SelectedFacetSearchController.prototype.removeSelectedFacet = function (actionContext) {
                var removeFacetButton = actionContext.elementContext;
                actionContext.event.preventDefault();
                actionContext.event.stopPropagation();
                this.eventHub.publish('facetRemoved', {
                    data: {
                        facetFieldName: removeFacetButton.data('facetfieldname'),
                        facetValue: removeFacetButton.data('facetvalue'),
                        facetType: removeFacetButton.data('facettype'),
                        facetLandingPageUrl: removeFacetButton.data('facetlandingpageurl')
                    }
                });
            };
            SelectedFacetSearchController.prototype.clearSelectedFacets = function (actionContext) {
                var clearFacetsButton = actionContext.elementContext;
                actionContext.event.preventDefault();
                actionContext.event.stopPropagation();
                this.eventHub.publish('facetsCleared', {
                    data: { landingPageUrl: clearFacetsButton.data('landingpageurl') }
                });
            };
            SelectedFacetSearchController.prototype.addSingleSelectCategory = function (actionContext) {
                var singleSelectCategory = actionContext.elementContext, anchorContext = actionContext.elementContext, facetFieldName = anchorContext.data('facetfieldname'), facetValue = anchorContext.data('facetvalue');
                actionContext.event.preventDefault();
                actionContext.event.stopPropagation();
                this.eventHub.publish('singleCategoryAdded', {
                    data: {
                        categoryUrl: singleSelectCategory.data('categoryurl'),
                        facetKey: facetFieldName,
                        facetValue: facetValue,
                        pageType: Composer.UrlHelper.resolvePageType()
                    }
                });
            };
            return SelectedFacetSearchController;
        }(Orckestra.Composer.Controller));
        Composer.SelectedFacetSearchController = SelectedFacetSearchController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/JqueryPlugins/ISerializeObjectJqueryPlugin.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
/// <reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerContext.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
/// <reference path='./UrlHelper.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var SortBySearchController = (function (_super) {
            __extends(SortBySearchController, _super);
            function SortBySearchController() {
                _super.apply(this, arguments);
            }
            SortBySearchController.prototype.sortingChanged = function (actionContext) {
                var anchorContext = actionContext.elementContext, dataSortingType = anchorContext.data('sorting'), dataUrl = anchorContext.data('url'), resolvePageType = Composer.UrlHelper.resolvePageType();
                actionContext.event.preventDefault();
                actionContext.event.stopPropagation();
                this.eventHub.publish('sortingChanged', {
                    data: {
                        sortingType: dataSortingType,
                        pageType: resolvePageType,
                        url: dataUrl
                    }
                });
            };
            return SortBySearchController;
        }(Orckestra.Composer.Controller));
        Composer.SortBySearchController = SortBySearchController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Mvc/ComposerClient.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Events/EventHub.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var ProductSpecificationsService = (function () {
            function ProductSpecificationsService() {
            }
            ProductSpecificationsService.prototype.getProductSpecifications = function (productId, variantId) {
                if (!productId) {
                    throw new Error('The product id is required');
                }
                if (!this.memoizeProductSpecifications) {
                    this.memoizeProductSpecifications =
                        _.memoize(this.getProductSpecificationsImpl, function (productId, variantId) { return variantId; });
                }
                return this.memoizeProductSpecifications(productId, variantId);
            };
            ProductSpecificationsService.prototype.getProductSpecificationsImpl = function (productId, variantId) {
                var data = { productId: productId, variantId: variantId };
                return Composer.ComposerClient.post('/api/product/specifications', data);
            };
            return ProductSpecificationsService;
        }());
        Composer.ProductSpecificationsService = ProductSpecificationsService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Events/IEventInformation.ts' />
///<reference path='ProductSpecificationsService.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var ProductSpecificationsController = (function (_super) {
            __extends(ProductSpecificationsController, _super);
            function ProductSpecificationsController() {
                _super.apply(this, arguments);
                this.service = new Composer.ProductSpecificationsService();
            }
            ProductSpecificationsController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.registerSubscriptions();
                this.renderData(this.context.viewModel.variantId);
            };
            ProductSpecificationsController.prototype.registerSubscriptions = function () {
                var _this = this;
                this.eventHub.subscribe('productDetailSelectedVariantIdChanged', function (e) { return _this.renderData(e.data.selectedVariantId); });
            };
            ProductSpecificationsController.prototype.renderData = function (variantId) {
                var _this = this;
                var handle = setTimeout(function () { return _this.render('Attributes', { IsLoading: true }); }, 300);
                this.getProductSpecifications(variantId)
                    .done(function (result) {
                    clearTimeout(handle);
                    _this.render('Attributes', result);
                    _this.eventHub.publish('productSpecificationsChanged', result);
                }, function (reason) { return _this.handleError(reason); });
            };
            ProductSpecificationsController.prototype.getProductSpecifications = function (variantId) {
                var productId = this.context.viewModel.productId;
                return this.service.getProductSpecifications(productId, variantId);
            };
            ProductSpecificationsController.prototype.handleError = function (reason) {
                console.error('The selected variant changed, ' +
                    'but we were unable to get the product specifications associated with that variant', reason);
            };
            return ProductSpecificationsController;
        }(Orckestra.Composer.Controller));
        Composer.ProductSpecificationsController = ProductSpecificationsController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));



/// <reference path='../../Typings/tsd.d.ts' />
/// <reference path='./IPlugin.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Events/EventHub.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var SlickCarouselPlugin = (function () {
            function SlickCarouselPlugin() {
            }
            SlickCarouselPlugin.prototype.initialize = function (window, document) {
                this.subscriptEvents();
                this.initSlick();
            };
            ;
            SlickCarouselPlugin.prototype.initSlick = function () {
                $.each($('.js-slick-carousel'), function (index, element) {
                    var slickInstance = $(element);
                    var slickOptions = {
                        arrows: true,
                        responsive: [{
                                dots: false,
                                breakpoint: 1024,
                                settings: {
                                    slidesToShow: 3,
                                    infinite: true
                                }
                            }]
                    };
                    if (!$(slickInstance).hasClass('slick-initialized')) {
                        if (slickInstance.data('slick').mobileCarousel) {
                            var nbSlideToShow = slickInstance.data('slick').mobileSlidesToShow;
                            nbSlideToShow = (nbSlideToShow) ? nbSlideToShow : 2;
                            var nbSlideToScroll = slickInstance.data('slick').mobileSlidesToScroll;
                            nbSlideToScroll = (nbSlideToScroll) ? nbSlideToScroll : 2;
                            slickOptions.responsive.push({
                                breakpoint: 768,
                                arrows: false,
                                settings: {
                                    slidesToShow: nbSlideToShow,
                                    slidesToScroll: nbSlideToScroll,
                                    dots: true,
                                    infinite: true
                                }
                            });
                        }
                        else {
                            slickOptions.responsive.push({
                                breakpoint: 768,
                                arrows: false,
                                settings: 'unslick' // destroys slick
                            });
                        }
                        slickInstance.slick(slickOptions);
                    }
                });
            };
            ;
            SlickCarouselPlugin.prototype.subscriptEvents = function () {
                var _this = this;
                var self = this;
                $(window).on('resize', function () {
                    if ($(window).width() > 768) {
                        _this.initSlick();
                    }
                });
                Composer.EventHub.instance().subscribe('iniCarousel', function (data) {
                    _this.initSlick();
                });
            };
            return SlickCarouselPlugin;
        }());
        Composer.SlickCarouselPlugin = SlickCarouselPlugin;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
/// <reference path='../../../../Composer.Product.UI/Product/Source/TypeScript/ProductController.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Plugins/SlickCarouselPlugin.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var RelatedProductController = (function (_super) {
            __extends(RelatedProductController, _super);
            function RelatedProductController() {
                _super.apply(this, arguments);
                this.concern = 'relatedProduct';
                this.source = 'Related Products';
            }
            RelatedProductController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.getRelatedProducts();
            };
            RelatedProductController.prototype.getRelatedProducts = function () {
                var _this = this;
                var vm = this.context.viewModel;
                var identifiers = vm.ProductIdentifiers;
                this.productService.getRelatedProducts(identifiers)
                    .then(function (data) {
                    _this.products = data.Products;
                    //Need to map parent items to child item since handlebar doesnt seem to support
                    //partial parameters or path properly while it suppose to. Maybe an update of handlebar could solve the issue
                    //(3.01 right now).
                    vm.Products = _.each(data.Products, function (lineItem) {
                        lineItem.DisplayAddToCart = vm.DisplayAddToCart;
                        lineItem.DisplayPrices = vm.DisplayPrices;
                    });
                    _this.render('RelatedProducts', vm);
                    _this.eventHub.publish('iniCarousel', vm);
                    return vm;
                })
                    .then(function (vm) {
                    if (vm && vm.Products && vm.Products.length > 0) {
                        _this.eventHub.publish('relatedProductsLoaded', {
                            data: {
                                ListName: _this.getPageSource(),
                                Products: vm.Products
                            }
                        });
                    }
                })
                    .then(function (vm) { return _this.onGetRelatedProductsSuccess(vm); }, function (reason) { return _this.onGetRelatedProductsFailed(reason); });
            };
            RelatedProductController.prototype.onGetRelatedProductsSuccess = function (vm) {
                //Hook for other projects
            };
            RelatedProductController.prototype.onGetRelatedProductsFailed = function (reason) {
                console.error('Failed loading the related products', reason);
            };
            RelatedProductController.prototype.getPageSource = function () {
                return 'Related Products';
            };
            RelatedProductController.prototype.getListNameForAnalytics = function () {
                return 'Related Products';
            };
            RelatedProductController.prototype.onLoadingFailed = function (reason) {
                console.error('Failed loading the Related Product View');
                Composer.ErrorHandler.instance().outputErrorFromCode('RelatedProductLoadFailed');
            };
            RelatedProductController.prototype.addToCart = function (actionContext) {
                var productContext = $(actionContext.elementContext).closest('[data-product-id]');
                var hasVariants = productContext.data('hasVariants');
                var productId = productContext.attr('data-product-id');
                var variantId = productContext.attr('data-product-variant-id');
                var price = productContext.data('price');
                var busy = this.asyncBusy({ elementContext: actionContext.elementContext, containerContext: productContext });
                var promise;
                if (hasVariants) {
                    promise = this.addVariantProductToCart(productId, variantId, price);
                }
                else {
                    promise = this.addNonVariantProductToCart(productId, price);
                }
                promise.fin(function () { return busy.done(); });
            };
            /**
             * Occurs when adding a product to the cart that happens to have variants.
             */
            RelatedProductController.prototype.addVariantProductToCart = function (productId, variantId, price) {
                var _this = this;
                var promise = this.productService.loadQuickBuyProduct(productId, variantId, this.concern, this.source);
                promise.fail(function (reason) { return _this.onLoadingFailed(reason); });
                return promise;
            };
            /**
             * Occurs when adding a product to the cart that has no variant.
             */
            RelatedProductController.prototype.addNonVariantProductToCart = function (productId, price) {
                var _this = this;
                var vm = this.getProductViewModel(productId);
                if (vm) {
                    var quantity = this.getCurrentQuantity();
                    var data = this.getProductDataForAnalytics(vm);
                    data.Quantity = quantity.Value ? quantity.Value : 1;
                    this.eventHub.publish('lineItemAdding', {
                        data: data
                    });
                }
                var promise = this.cartService.addLineItem(productId, price)
                    .then(function (vm) { return _this.onAddLineItemSuccess(vm); }, function (reason) { return _this.onAddLineItemFailed(reason); });
                return promise;
            };
            RelatedProductController.prototype.getProductViewModel = function (productId) {
                var productVM = _.find(this.products, function (p) {
                    return p.ProductId === productId;
                });
                if (!productVM) {
                    console.warn("Could not find the product with ID of " + productId + " within related products.\n                    This will cause the product to not be reported to Analytics.");
                }
                return productVM;
            };
            RelatedProductController.prototype.getCurrentQuantity = function () {
                return {
                    Min: 1,
                    Max: 1,
                    Value: 1
                };
            };
            RelatedProductController.prototype.relatedProductsClick = function (actionContext) {
                var index = actionContext.elementContext.data('index');
                var productId = actionContext.elementContext.data('productid').toString();
                var product = _.find(this.products, { ProductId: productId });
                this.eventHub.publish('productClick', { data: {
                        Product: product,
                        ListName: 'Related Products',
                        Index: index
                    } });
            };
            return RelatedProductController;
        }(Orckestra.Composer.ProductController));
        Composer.RelatedProductController = RelatedProductController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../../Composer.UI/Source/Typings/tsd.d.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var GeoLocationService = (function () {
            function GeoLocationService() {
                this._browserGeolocation = navigator.geolocation;
                this._geocoder = new google.maps.Geocoder();
            }
            GeoLocationService.prototype.geolocate = function () {
                var _this = this;
                if (this._browserGeolocation) {
                    return this.getCurrentLocation()
                        .catch(function (reason) {
                        console.log(reason);
                        return _this._currenctLocation;
                    });
                }
                return null;
            };
            GeoLocationService.prototype.getCurrentLocation = function () {
                var _this = this;
                var deferred = Q.defer();
                this._browserGeolocation.getCurrentPosition(function (pos) {
                    _this._currenctLocation = new google.maps.LatLng(pos.coords.latitude, pos.coords.longitude);
                    deferred.resolve(_this._currenctLocation);
                }, function () { deferred.reject('problems to get current location'); });
                return deferred.promise;
            };
            GeoLocationService.prototype.getAddtressByLocation = function (location) {
                var deferred = Q.defer();
                this._geocoder.geocode({ location: location }, function (results, status) {
                    if (status === google.maps.GeocoderStatus.OK) {
                        deferred.resolve(results[0].formatted_address);
                    }
                    else {
                        deferred.resolve('');
                    }
                });
                return deferred.promise;
            };
            GeoLocationService.prototype.getLocationByAddress = function (address) {
                var deferred = Q.defer();
                this._geocoder.geocode({ address: address }, function (results, status) {
                    if (status === google.maps.GeocoderStatus.OK) {
                        var location = results[0].geometry.location;
                        deferred.resolve(location);
                    }
                    else {
                        deferred.resolve(null);
                        console.log('Location not resolved by Google ' + address);
                    }
                });
                return deferred.promise;
            };
            /// By default render with default value for ViewModel.GoogleDirectionsLink (direction with Empty Start Point), 
            /// and when User Accept his Current Location, just in async task update HREF attributes and attach current location coordinates.
            /// We do not update the ViewModel before rendering, as we need to wait for User Input
            GeoLocationService.prototype.updateDirectionLinksWithLatLngSourceAddress = function (container, sourceLocation) {
                var _this = this;
                if (!sourceLocation) {
                    return;
                }
                var ctaDirs = container.find('.ctaGoogleDir');
                ctaDirs.each(function (ind, ctaDir) {
                    var href = $(ctaDir).attr('href');
                    if (href.indexOf('saddr') === -1) {
                        $(ctaDir).attr('href', _this.getDirectionLatLngSourceAddress(href, sourceLocation));
                    }
                });
            };
            GeoLocationService.prototype.getDirectionLatLngSourceAddress = function (baseUrl, sourceLocation) {
                return baseUrl + "&saddr=" + sourceLocation.lat() + "," + sourceLocation.lng();
            };
            return GeoLocationService;
        }());
        Composer.GeoLocationService = GeoLocationService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/Typescript/Mvc/ComposerClient.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
///<reference path='../../../StoreLocator/Source/TypeScript/Services/GeoLocationService.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var StoresDirectoryController = (function (_super) {
            __extends(StoresDirectoryController, _super);
            function StoresDirectoryController() {
                _super.apply(this, arguments);
                this._geoService = new Composer.GeoLocationService();
            }
            StoresDirectoryController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.initializeSearchBox();
                this.setGoogleDirectionLinks();
            };
            StoresDirectoryController.prototype.initializeSearchBox = function () {
                var input = this.context.container.find('#storeDirectorySearchInput')[0];
                this._searchBox = new google.maps.places.SearchBox(input);
            };
            // Action on Click on locator icon in search box
            StoresDirectoryController.prototype.currentLocationAction = function (actionContext) {
                actionContext.event.preventDefault();
                this.context.container.find('form').submit();
            };
            StoresDirectoryController.prototype.setGoogleDirectionLinks = function () {
                var _this = this;
                return this._geoService.geolocate().then(function (location) {
                    _this._geoService.updateDirectionLinksWithLatLngSourceAddress(_this.context.container, location);
                });
            };
            return StoresDirectoryController;
        }(Composer.Controller));
        Composer.StoresDirectoryController = StoresDirectoryController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../../Composer.UI/Source/Typings/tsd.d.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var GetStoresInventoryParam = (function () {
            function GetStoresInventoryParam() {
            }
            return GetStoresInventoryParam;
        }());
        Composer.GetStoresInventoryParam = GetStoresInventoryParam;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='./GetStoresInventoryParam.ts' />

///<reference path='../../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../../Composer.UI/Source/Typescript/Mvc/IControllerContext.ts' />
///<reference path='../../../../../Composer.UI/Source/Typescript/Mvc/ComposerClient.ts' />
///<reference path='../../../../../Composer.UI/Source/Typescript/Events/EventHub.ts' />
///<reference path='./IStoreInventoryService.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var StoreInventoryService = (function () {
            function StoreInventoryService() {
            }
            StoreInventoryService.prototype.getStoresInventory = function (param) {
                return Composer.ComposerClient.post('/api/storeinventory/storesinventory', param);
            };
            StoreInventoryService.prototype.getDefaultAddress = function () {
                return Composer.ComposerClient.get('/api/customer/getdefaultaddress');
            };
            StoreInventoryService.prototype.getSkuSelection = function (productId) {
                var data = {
                    ProductId: productId
                };
                return Composer.ComposerClient.post('/api/product/variantSelection', data);
            };
            return StoreInventoryService;
        }());
        Composer.StoreInventoryService = StoreInventoryService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
///<reference path='./Services/StoreInventoryService.ts' />
///<reference path='../../../StoreLocator/Source/TypeScript/Services/GeoLocationService.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Cache/CacheProvider.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var StoreInventoryController = (function (_super) {
            __extends(StoreInventoryController, _super);
            function StoreInventoryController() {
                _super.apply(this, arguments);
                this._concern = 'StoreInventory_';
                this._service = new Composer.StoreInventoryService();
                this._geoService = new Composer.GeoLocationService();
                this._searchPointAddressCacheKey = 'StoreLocatorSearchAddress';
                this.cache = Composer.CacheProvider.instance().defaultCache;
                this._getCurrentLocation = Q.defer();
            }
            StoreInventoryController.prototype.getCurrentLocation = function () {
                return this._getCurrentLocation.promise;
            };
            StoreInventoryController.prototype.initialize = function () {
                var _this = this;
                var getDefaultsTasks = [];
                var getDefaultAddressTask;
                _super.prototype.initialize.call(this);
                this.registerSubscriptions();
                this.initSearchBox();
                this.getDataFromContextViewModel();
                if (!this._selectedSku && this._productId) {
                    getDefaultsTasks.push(this._service.getSkuSelection(this._productId).then(function (result) {
                        _this._selectedSku = result.Sku;
                    }));
                }
                getDefaultsTasks.push(this.getDefaultAddress());
                Q.all(getDefaultsTasks).then(function () {
                    _this.getStoresInventory();
                }).fail(function (reason) { return console.log(_this._concern + reason); });
                this._geoService.geolocate().then(function (location) {
                    _this._getCurrentLocation.resolve(location);
                }, function (reason) { return _this._getCurrentLocation.resolve(null); });
            };
            StoreInventoryController.prototype.registerSubscriptions = function () {
                var _this = this;
                this.eventHub.subscribe('productDetailSelectedVariantIdChanged', function (e) { return _this.onSelectedVariantIdChanged(e); });
                this.eventHub.subscribe('inventorySearchPointChanged', function (e) { return _this.searchPointChanged(e); });
                this.context.window.addEventListener('hashchange', function () { return _this.onHashChanged(); });
            };
            StoreInventoryController.prototype.getDataFromContextViewModel = function () {
                this._selectedSku = this.context.viewModel.selectedSku;
                this._isAuthenticated = this.context.viewModel.isAuthenticated;
                this._pageSize = this.context.viewModel.pageSize;
                this._productId = this.context.viewModel.productId;
            };
            StoreInventoryController.prototype.initSearchBox = function () {
                var _this = this;
                this._searchBoxJQ = this.context.container.find('input[name="storeInventorySearchInput"]');
                this._searchBox = new google.maps.places.SearchBox(this._searchBoxJQ[0]);
                this._searchBox.addListener('places_changed', function () {
                    var places = _this._searchBox.getPlaces();
                    if (places && places.length && places[0].geometry) {
                        _this.eventHub.publish('inventorySearchPointChanged', { data: places[0].geometry.location });
                    }
                });
            };
            StoreInventoryController.prototype.searchPointChanged = function (e) {
                this._searchPoint = e.data;
                this.cache.set(this._searchPointAddressCacheKey, this._searchBoxJQ.val());
                this.getStoresInventory();
            };
            StoreInventoryController.prototype.onSelectedVariantIdChanged = function (e) {
                this._selectedSku = e.data.selectedSku;
                this.getStoresInventory();
            };
            StoreInventoryController.prototype.onHashChanged = function () {
                var _this = this;
                if (location.hash === '#storeinventory' && !this._searchPoint) {
                    this.getCurrentLocation()
                        .then(function (currentLocation) {
                        if (currentLocation) {
                            _this._searchPoint = currentLocation;
                            _this.getStoresInventory();
                            _this._geoService.getAddtressByLocation(currentLocation).then(function (result) {
                                _this.cache.set(_this._searchPointAddressCacheKey, result);
                                _this._searchBoxJQ.val(result);
                            });
                        }
                    });
                }
            };
            StoreInventoryController.prototype.getStoresInventory = function () {
                var _this = this;
                var debounceHandle;
                if (this._selectedSku) {
                    debounceHandle = _.debounce(function () { return _this.render('StoreInventoryList', { IsLoading: true }); }, 300);
                    return this._service.getStoresInventory(this.getStoresInventoryParam())
                        .then(function (result) {
                        debounceHandle.cancel();
                        _this.render('StoreInventoryList', result);
                        _this.setGoogleDirectionLinks();
                    })
                        .fail(function (reason) { return console.log(reason); });
                }
            };
            StoreInventoryController.prototype.nextPage = function (actionContext) {
                var _this = this;
                actionContext.event.preventDefault();
                var page = actionContext.elementContext.data('page');
                var busy = this.asyncBusy({ elementContext: actionContext.elementContext });
                this._service.getStoresInventory(this.getStoresInventoryParam(page))
                    .then(function (result) {
                    var target = actionContext.elementContext[0].parentElement;
                    var targetHtml = _this.getRenderedTemplateContents('StoreInventoryList', result);
                    busy.done();
                    $(target).replaceWith(targetHtml).stop().fadeIn();
                    _this.setGoogleDirectionLinks();
                })
                    .fail(function (reason) { return console.log(reason); });
            };
            StoreInventoryController.prototype.setGoogleDirectionLinks = function () {
                var _this = this;
                return this.getCurrentLocation().then(function (location) {
                    _this._geoService.updateDirectionLinksWithLatLngSourceAddress(_this.context.container, location);
                });
            };
            StoreInventoryController.prototype.getStoresInventoryParam = function (page) {
                if (page === void 0) { page = 1; }
                var param = new Composer.GetStoresInventoryParam();
                param.Sku = this._selectedSku;
                param.SearchPoint = this._searchPoint;
                param.Page = page;
                param.Pagesize = this._pageSize;
                return param;
            };
            StoreInventoryController.prototype.getDefaultAddress = function () {
                var _this = this;
                // try get address from local storage
                return this.cache.get(this._searchPointAddressCacheKey)
                    .then(function (cachedAddr) {
                    _this._searchBoxJQ.val(cachedAddr);
                    return _this._geoService.getLocationByAddress(cachedAddr);
                }, function (reason) {
                    // try get customer default delivery address
                    if (_this._isAuthenticated) {
                        return _this._service.getDefaultAddress()
                            .then(function (defaultAddr) {
                            var formattedAddress = defaultAddr.City + ", " + defaultAddr.RegionCode + " " + defaultAddr.PostalCode + ", " + defaultAddr.CountryCode;
                            _this._searchBoxJQ.val(formattedAddress);
                            return _this._geoService.getLocationByAddress(formattedAddress);
                        });
                    }
                })
                    .then(function (locationByAddress) {
                    _this._searchPoint = locationByAddress;
                });
            };
            return StoreInventoryController;
        }(Composer.Controller));
        Composer.StoreInventoryController = StoreInventoryController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));



///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/Typings/googlemaps/google.maps.d.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var Marker = (function () {
            function Marker(marker) {
                this._value = marker;
            }
            Object.defineProperty(Marker.prototype, "key", {
                get: function () {
                    return this._key;
                },
                set: function (key) {
                    this._key = key;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Marker.prototype, "value", {
                get: function () {
                    return this._value;
                },
                set: function (marker) {
                    this._value = marker;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Marker.prototype, "storeNumber", {
                get: function () {
                    return this._storeNumber;
                },
                set: function (value) {
                    this._storeNumber = value;
                },
                enumerable: true,
                configurable: true
            });
            Object.defineProperty(Marker.prototype, "isCluster", {
                get: function () {
                    return this._isCluster;
                },
                set: function (value) {
                    this._isCluster = value;
                },
                enumerable: true,
                configurable: true
            });
            Marker.prototype.setMap = function (map) {
                this._value.setMap(map);
            };
            Marker.prototype.setPosition = function (position) {
                this._value.setPosition(position);
            };
            return Marker;
        }());
        Composer.Marker = Marker;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='./Marker.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var MarkerPool = (function () {
            function MarkerPool(map, onMarkerCreate) {
                this.markers = [];
                this.indexedMarkersByKey = {};
                this._map = map;
                this._onMarkerCreate = onMarkerCreate;
            }
            MarkerPool.prototype.getMarkers = function () {
                return this.markers;
            };
            MarkerPool.prototype.get = function (isCluster) {
                if (isCluster === void 0) { isCluster = false; }
                var marker = isCluster ? this.createClusterMarker() : this.createMarker();
                marker.isCluster = isCluster;
                this._onMarkerCreate(marker);
                this.markers.push(marker);
                return marker;
            };
            MarkerPool.prototype.getExisting = function (key) {
                return this.indexedMarkersByKey[key];
            };
            MarkerPool.prototype.index = function (marker) {
                this.indexedMarkersByKey[marker.key] = marker;
            };
            MarkerPool.prototype.hasClusters = function () {
                for (var i = 0; i < this.markers.length; i++) {
                    if (this.markers[i] && this.markers[i].isCluster) {
                        return true;
                    }
                }
                return false;
            };
            MarkerPool.prototype.createMarker = function () {
                var marker = new MarkerWithLabel({
                    map: this._map,
                    labelInBackground: false,
                    labelClass: 'store-marker',
                    icon: '/UI.Package/Images/map/marker.png',
                    labelAnchor: new google.maps.Point(12, 42),
                    labelVisible: false
                });
                return new Composer.Marker(marker);
            };
            MarkerPool.prototype.createClusterMarker = function () {
                var marker = new MarkerWithLabel({
                    map: this._map,
                    labelInBackground: false,
                    labelClass: 'store-cluster-marker',
                    icon: '/UI.Package/Images/map/cluster.png',
                    labelAnchor: new google.maps.Point(12, 30),
                    labelVisible: false
                });
                return new Composer.Marker(marker);
            };
            MarkerPool.prototype.releaseAll = function () {
                for (var i = 0; i < this.markers.length; i++) {
                    if (this.markers[i]) {
                        this.markers[i].setMap(null);
                    }
                }
                delete this.markers;
                this.markers = [];
                this.indexedMarkersByKey = {};
            };
            MarkerPool.prototype.releaseByIndex = function (index) {
                var marker = this.indexedMarkersByKey[index];
                if (marker) {
                    delete this.indexedMarkersByKey[index];
                    marker.setMap(null);
                    delete this.markers[this.markers.indexOf(marker)];
                }
            };
            MarkerPool.prototype.releaseClusters = function () {
                var _this = this;
                this.markers.forEach(function (mr) {
                    if (mr.isCluster) {
                        _this.releaseByIndex(mr.key);
                    }
                });
            };
            MarkerPool.prototype.releaseMarkersByIds = function (iscluster, id) {
                var _this = this;
                if (!iscluster) {
                    this.markers.forEach(function (mr) {
                        if (mr && mr.isCluster && mr.storeNumber.indexOf(id) >= 0) {
                            _this.releaseByIndex(mr.key);
                            return;
                        }
                    });
                }
                else {
                    this.markers.forEach(function (mr) {
                        if (mr && !mr.isCluster && id.indexOf(mr.storeNumber) >= 0) {
                            _this.releaseByIndex(mr.key);
                            return;
                        }
                    });
                }
            };
            return MarkerPool;
        }());
        Composer.MarkerPool = MarkerPool;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Generics/Collections/IHashtable.ts' />
///<reference path='IMapOptions.ts' />
///<reference path='./MarkerPool.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var MapService = (function () {
            function MapService(eventHub) {
                this._mapInitialized = Q.defer();
                this._mapIdle = Q.defer();
                this._mapDragEnded = Q.defer();
                this.eventHub = eventHub;
            }
            MapService.prototype.initialize = function (mapOptions) {
                var _this = this;
                this._map = new google.maps.Map(mapOptions.mapCanvas, mapOptions.options);
                this._informationWindow = new google.maps.InfoWindow({ maxWidth: mapOptions.infoWindowMaxWidth });
                this._markerPool = new Composer.MarkerPool(this._map, function (marker) { _this.onNewMarkerCreated(marker); });
                this.setProjectionOverlay();
                google.maps.event.addListener(this._map, 'click', function () { return _this._informationWindow.close(); });
                google.maps.event.addListener(this._map, 'zoom_changed', function () { return _this._markerPool.releaseClusters(); });
                google.maps.event.addListener(this._map, 'bounds_changed', function () {
                    _this.mapDragEnded()
                        .then(function () {
                        _this.eventHub.publish('mapBoundsUpdated', { data: _this._map.getBounds() });
                    });
                });
                google.maps.event.addListener(this._map, 'idle', function () {
                    _this._mapIdle.resolve(_this);
                });
                google.maps.event.addListener(this._map, 'dragstart', function () {
                    _this._mapDragEnded = Q.defer();
                });
                google.maps.event.addListener(this._map, 'dragend', function () {
                    _this._mapDragEnded.resolve(_this);
                });
                this._mapInitialized.resolve(this);
                this._mapDragEnded.resolve(this);
            };
            MapService.prototype.setProjectionOverlay = function () {
                this._projectionOverlay = new google.maps.OverlayView();
                this._projectionOverlay.draw = function name() {
                    //
                };
                this._projectionOverlay.setMap(this._map);
            };
            MapService.prototype.getMap = function () {
                return this._map;
            };
            MapService.prototype.getInformationWindow = function () {
                return this._informationWindow;
            };
            MapService.prototype.getBounds = function (markerPadding) {
                var bounds = this._map.getBounds();
                if (markerPadding) {
                    var tr = new google.maps.LatLng(bounds.getNorthEast().lat(), bounds.getNorthEast().lng());
                    var bl = new google.maps.LatLng(bounds.getSouthWest().lat(), bounds.getSouthWest().lng());
                    var projection = this._projectionOverlay.getProjection();
                    if (projection) {
                        var trPix = projection.fromLatLngToDivPixel(tr);
                        var blPix = projection.fromLatLngToDivPixel(bl);
                        blPix.y = blPix.y + markerPadding;
                        trPix.y = trPix.y + markerPadding;
                        var sw = projection.fromDivPixelToLatLng(blPix);
                        var ne = projection.fromDivPixelToLatLng(trPix);
                        return new google.maps.LatLngBounds(sw, ne);
                    }
                }
                return bounds;
            };
            MapService.prototype.getZoom = function () {
                return this._map.getZoom();
            };
            MapService.prototype.onNewMarkerCreated = function (marker) {
                var _this = this;
                if (!marker) {
                    return;
                }
                if (marker.isCluster) {
                    google.maps.event.addListener(marker.value, 'click', function () {
                        _this.eventHub.publish('clusterClick', { data: marker });
                    });
                }
                else {
                    google.maps.event.addListener(marker.value, 'click', function () {
                        _this.eventHub.publish('markerClick', { data: marker });
                    });
                }
            };
            MapService.prototype.mapInitialized = function () {
                return this._mapInitialized.promise;
            };
            MapService.prototype.mapIdle = function () {
                return this._mapIdle.promise;
            };
            MapService.prototype.mapDragEnded = function () {
                return this._mapDragEnded.promise;
            };
            MapService.prototype.centerMap = function (storeBounds) {
                var _this = this;
                if (storeBounds != null) {
                    this.mapIdle().then(function () {
                        var southWest = new google.maps.LatLng(storeBounds.SouthWest.Lat, storeBounds.SouthWest.Lng);
                        var northEast = new google.maps.LatLng(storeBounds.NorthEast.Lat, storeBounds.NorthEast.Lng);
                        var bounds = new google.maps.LatLngBounds(southWest, northEast);
                        _this._map.fitBounds(bounds);
                        _this._mapIdle = Q.defer();
                    });
                }
            };
            MapService.prototype.openInformationWindow = function (content, anchor) {
                this._informationWindow.setContent(content);
                this._informationWindow.open(this._map, anchor);
            };
            MapService.prototype.setLocationInMap = function (point, zoomLevel) {
                var _this = this;
                if (zoomLevel === void 0) { zoomLevel = 11; }
                this.mapIdle().then(function () {
                    _this._map.setCenter(point);
                    _this._map.setZoom(zoomLevel);
                    _this._mapIdle = Q.defer();
                });
            };
            MapService.prototype.extendBounds = function (point1, point2) {
                var _this = this;
                this.mapIdle().then(function () {
                    var bounds = new google.maps.LatLngBounds();
                    bounds.extend(point1);
                    bounds.extend(point2);
                    _this._map.fitBounds(bounds);
                    _this._map.setCenter(bounds.getCenter());
                    _this._mapIdle = Q.defer();
                });
            };
            MapService.prototype.createMarkerOnMap = function (location, title) {
                return new google.maps.Marker({
                    position: location,
                    map: this._map,
                    title: title,
                    icon: 'https://maps.google.com/mapfiles/marker_orange.png'
                });
            };
            MapService.prototype.setMarkers = function (markerInfos, isSearch) {
                if (isSearch === void 0) { isSearch = false; }
                var curZoom = this.getZoom();
                var action = this._prevZoom === curZoom ? 'PAN' : this._prevZoom < curZoom ? 'ZOOM_IN' : 'ZOOM_OUT';
                if (!this._markerPool.hasClusters() && action === 'ZOOM_IN') {
                    this._markerPool.releaseAll();
                }
                if (isSearch) {
                    this._markerPool.releaseAll();
                }
                this._prevZoom = curZoom;
                this.transformResult(markerInfos, this._markerPool, action)
                    .then(function (newMarkers) {
                    newMarkers.forEach(function (m) {
                        m.value.labelVisible = true;
                    });
                });
            };
            MapService.prototype.transformResult = function (result, markerPool, action) {
                var deferred = Q.defer();
                var markers = [];
                function buildMarker(m) {
                    var key = m.Center.Lat + '-' + m.Center.Lng;
                    var marker = null;
                    var isCluster = m.ItemsCount > 1;
                    markerPool.releaseMarkersByIds(isCluster, m.StoreNumber);
                    marker = markerPool.getExisting(key);
                    if (!marker) {
                        marker = markerPool.get(isCluster);
                        var position = new google.maps.LatLng(m.Center.Lat, m.Center.Lng);
                        marker.value.setPosition(position);
                        marker.value.labelContent = (!isCluster ? m.SearchIndex : m.ItemsCount);
                        marker.key = key;
                        marker.storeNumber = m.StoreNumber;
                        marker.isCluster = isCluster;
                        markerPool.index(marker);
                        markers.push(marker);
                    }
                    marker.value.labelContent = (!isCluster ? m.SearchIndex : m.ItemsCount); //update search index;
                }
                for (var i = 0; i < result.length; i++) {
                    var ma = result[i];
                    buildMarker(ma);
                }
                deferred.resolve(markers);
                return deferred.promise;
            };
            return MapService;
        }());
        Composer.MapService = MapService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='./Services/GeoLocationService.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var StoreDetailsController = (function (_super) {
            __extends(StoreDetailsController, _super);
            function StoreDetailsController() {
                _super.apply(this, arguments);
                this._geoService = new Composer.GeoLocationService();
            }
            StoreDetailsController.prototype.initialize = function () {
                var _this = this;
                _super.prototype.initialize.call(this);
                var center = new google.maps.LatLng(this.context.viewModel.latitude, this.context.viewModel.longitude);
                var mapOptions = {
                    center: center,
                    zoom: this.context.viewModel.zoom ? this.context.viewModel.zoom : 14,
                    mapTypeId: google.maps.MapTypeId.ROADMAP,
                    panControl: false,
                    keyboardShortcuts: false,
                    scaleControl: false,
                    scrollwheel: false,
                    zoomControl: false,
                    draggable: false,
                    streetViewControl: false,
                    overviewMapControl: false,
                    overviewMapControlOptions: { opened: false },
                    disableDefaultUI: true
                };
                this._map = new google.maps.Map(this.context.container.find("#map")[0], mapOptions);
                this._marker = new google.maps.Marker({
                    position: center,
                    map: this._map,
                    icon: '/UI.Package/Images/map/marker-default.png'
                });
                this.context.window.addEventListener('resize', function () { return _this._map.setCenter(_this._marker.getPosition()); });
                this.setGoogleDirectionLink();
            };
            StoreDetailsController.prototype.setGoogleDirectionLink = function () {
                var _this = this;
                this._geoService.geolocate().then(function (location) {
                    _this._geoService.updateDirectionLinksWithLatLngSourceAddress(_this.context.container, location);
                });
            };
            return StoreDetailsController;
        }(Composer.Controller));
        Composer.StoreDetailsController = StoreDetailsController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../../Composer.UI/Source/Typings/tsd.d.ts' />

var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var StoreLocatorEndPointUrls = (function () {
            function StoreLocatorEndPointUrls() {
            }
            StoreLocatorEndPointUrls.GetStoresEndPointUrl = '/api/storelocator/stores';
            StoreLocatorEndPointUrls.GetStoreEndPointUrl = '/api/storelocator/store';
            StoreLocatorEndPointUrls.GetMapConfigurationEndPointUrl = '/api/storelocator/mapconfiguration';
            StoreLocatorEndPointUrls.GetMarkersEndPointUrl = '/api/storelocator/markers';
            return StoreLocatorEndPointUrls;
        }());
        Composer.StoreLocatorEndPointUrls = StoreLocatorEndPointUrls;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../../Composer.UI/Source/Typescript/Mvc/IControllerContext.ts' />
///<reference path='../../../../../Composer.UI/Source/Typescript/Mvc/ComposerClient.ts' />
///<reference path='../../../../../Composer.UI/Source/Typescript/Events/EventHub.ts' />
///<reference path='./IStoreLocatorService.ts' />
///<reference path='./StoreLocatorEndPointUrls.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var StoreLocatorService = (function () {
            function StoreLocatorService() {
            }
            StoreLocatorService.prototype.getStore = function (storeNumber) {
                if (!storeNumber) {
                    throw new Error('The Store Number is required');
                }
                if (!this.memoizeStore) {
                    this.memoizeStore =
                        _.memoize(this.getStoreImpl, function (storeNumber) { return storeNumber; });
                }
                return this.memoizeStore(storeNumber);
            };
            StoreLocatorService.prototype.getStoreImpl = function (storeNumber) {
                var data = { StoreNumber: storeNumber };
                return Composer.ComposerClient.post(Composer.StoreLocatorEndPointUrls.GetStoreEndPointUrl, data);
            };
            StoreLocatorService.prototype.getStores = function (southWest, northEast, searchPoint, page, pageSize) {
                var data = {
                    page: page,
                    pageSize: pageSize,
                    mapBounds: {
                        southWest: southWest,
                        northEast: northEast
                    },
                    searchPoint: searchPoint
                };
                return Composer.ComposerClient.post(Composer.StoreLocatorEndPointUrls.GetStoresEndPointUrl, data);
            };
            StoreLocatorService.prototype.getMapConfiguration = function () {
                return Composer.ComposerClient.get(Composer.StoreLocatorEndPointUrls.GetMapConfigurationEndPointUrl);
            };
            StoreLocatorService.prototype.getMarkers = function (southWest, northEast, zoomLevel, searchPoint, isSearch, pageSize) {
                var data = {
                    zoomLevel: zoomLevel,
                    mapBounds: {
                        southWest: southWest,
                        northEast: northEast
                    },
                    searchPoint: searchPoint,
                    isSearch: isSearch,
                    pageSize: pageSize
                };
                return Composer.ComposerClient.post(Composer.StoreLocatorEndPointUrls.GetMarkersEndPointUrl, data);
            };
            return StoreLocatorService;
        }());
        Composer.StoreLocatorService = StoreLocatorService;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        var StoreLocatorHistoryState = (function () {
            function StoreLocatorHistoryState() {
            }
            return StoreLocatorHistoryState;
        }());
        Composer.StoreLocatorHistoryState = StoreLocatorHistoryState;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../../Composer.UI/Source/Typings/tsd.d.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/Controller.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Mvc/IControllerActionContext.ts' />
///<reference path='./Services/StoreLocatorService.ts' />
///<reference path='./MapService.ts' />
///<reference path='./Services/GeoLocationService.ts' />
///<reference path='./IStoreLocatorInitializationOptions.ts' />
///<reference path='./IMapOptions.ts' />
///<reference path='./StoreLocatorHistoryState.ts' />
///<reference path='../../../../Composer.UI/Source/TypeScript/Cache/CacheProvider.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var StoreLocatorController = (function (_super) {
            __extends(StoreLocatorController, _super);
            function StoreLocatorController() {
                _super.apply(this, arguments);
                this._storeLocatorService = new Composer.StoreLocatorService();
                this._geoService = new Composer.GeoLocationService();
                this._mapService = new Composer.MapService(this.eventHub);
                this._isRestoreListPaging = false;
                this._searchPointAddressCacheKey = 'StoreLocatorSearchAddress';
                this.cache = Composer.CacheProvider.instance().defaultCache;
                this._isSearch = false;
                this._getCurrentLocation = Q.defer();
            }
            StoreLocatorController.prototype.getCurrentLocation = function () {
                return this._getCurrentLocation.promise;
            };
            StoreLocatorController.prototype.initialize = function (options) {
                var _this = this;
                if (options === void 0) { options = {
                    mapId: 'map',
                    coordinates: { Lat: -33.8688, Lng: 151.2195 },
                    showNearestStoreInfo: true
                }; }
                _super.prototype.initialize.call(this);
                this.registerSubscriptions();
                this.initSearchBox();
                this._storeLocatorOptions = options;
                // get current location
                this._geoService.geolocate().then(function (location) {
                    _this._getCurrentLocation.resolve(location);
                }, function (reason) { return _this._getCurrentLocation.resolve(null); });
                // first check if address is posted from other page.
                var postedAddress = this._searchBoxJQ.val();
                if (!postedAddress) {
                    // then check history state
                    this.parseHistoryState();
                    // then if any entered address saved in local storage
                    this.cache.get(this._searchPointAddressCacheKey)
                        .then(function (cachedAddr) {
                        postedAddress = cachedAddr;
                        _this._searchBoxJQ.val(cachedAddr);
                    });
                }
                this._storeLocatorService.getMapConfiguration()
                    .then(function (configuration) {
                    var mapOptions = _this.getMapOptions();
                    if (configuration.ZoomLevel) {
                        _this._storeLocatorOptions.zoomLevel = configuration.ZoomLevel;
                    }
                    if (configuration.MarkerPadding) {
                        _this._storeLocatorOptions.markerPadding = configuration.MarkerPadding;
                    }
                    _this._mapService.initialize(mapOptions);
                    if (!_this._historyState) {
                        _this._mapService.centerMap(configuration.Bounds);
                    }
                    _this.searchBoxSetBounds(configuration.Bounds);
                    return _this._mapService.mapInitialized();
                })
                    .then(function (mapservice) {
                    if (_this._historyState) {
                        _this.restoreMapFromHistoryState();
                        return null;
                    }
                    if (postedAddress) {
                        return _this._geoService.getLocationByAddress(postedAddress);
                    }
                    else {
                        return _this.getCurrentLocation();
                    }
                })
                    .then(function (currentLocation) {
                    if (currentLocation) {
                        _this.eventHub.publish('searchPointChanged', { data: currentLocation });
                    }
                })
                    .fail(function (reason) { return _this.handlePromiseFail('StoreLocator Initialize', reason); });
            };
            StoreLocatorController.prototype.registerSubscriptions = function () {
                var _this = this;
                this.eventHub.subscribe('mapBoundsUpdated', function (e) { return _this.onMapBoundsUpdated(e.data, _this._isSearch); });
                this.eventHub.subscribe('searchPointChanged', function (e) { return _this.setSearchLocationInMap(e.data); });
                this.eventHub.subscribe('markerClick', function (e) { return _this.onMarkerClick(e.data); });
                this.eventHub.subscribe('clusterClick', function (e) { return _this.onClusterClick(e.data); });
            };
            StoreLocatorController.prototype.initSearchBox = function () {
                this._searchBoxJQ = this.context.container.find('input[name="storeLocatorSearchInput"]');
                this._searchBox = new google.maps.places.SearchBox(this._searchBoxJQ[0]);
                this.searchBoxOnPlacesChanged();
                this.searchBoxOnEnterPressed();
            };
            StoreLocatorController.prototype.searchBoxOnPlacesChanged = function () {
                var _this = this;
                this._searchBox.addListener('places_changed', function () {
                    clearTimeout(_this._enterPressedTimer);
                    var places = _this._searchBox.getPlaces();
                    if (places && places.length && places[0].geometry) {
                        _this.eventHub.publish('searchPointChanged', { data: places[0].geometry.location });
                    }
                });
            };
            StoreLocatorController.prototype.searchBoxOnEnterPressed = function () {
                var _this = this;
                this._searchBoxJQ.on('keypress', function (e) {
                    var key = e.which || e.keyCode;
                    if (key === 13) {
                        _this._enterPressedTimer = setTimeout(function () {
                            if (_this._searchPoint) {
                                _this.setSearchLocationInMap(_this._searchPoint);
                            }
                        }, 750);
                    }
                });
            };
            StoreLocatorController.prototype.getMapOptions = function () {
                var mapCenter = new google.maps.LatLng(this._storeLocatorOptions.coordinates.Lat, this._storeLocatorOptions.coordinates.Lng);
                var mapOptions = {
                    mapCanvas: this.context.container.find("#" + this._storeLocatorOptions.mapId)[0],
                    infoWindowMaxWidth: 450,
                    options: {
                        center: this._historyState ? this._historyState.point : mapCenter,
                        zoom: this._historyState ? this._historyState.zoom : 1,
                        mapTypeId: google.maps.MapTypeId.ROADMAP,
                        panControl: false,
                        keyboardShortcuts: true,
                        scaleControl: false,
                        scrollwheel: false,
                        zoomControl: true,
                        streetViewControl: false,
                        overviewMapControl: true,
                        overviewMapControlOptions: { opened: false }
                    }
                };
                return mapOptions;
            };
            StoreLocatorController.prototype.searchBoxSetBounds = function (bounds) {
                var southWest = new google.maps.LatLng(bounds.SouthWest.Lat, bounds.SouthWest.Lng);
                var northEast = new google.maps.LatLng(bounds.NorthEast.Lat, bounds.NorthEast.Lng);
                bounds = new google.maps.LatLngBounds(southWest, northEast);
                this._searchBox.setBounds(bounds);
            };
            StoreLocatorController.prototype.onMapBoundsUpdated = function (data, isSearch) {
                var _this = this;
                clearTimeout(this._timer);
                this._timer = setTimeout(function () {
                    _this.updateMarkers(data, isSearch);
                }, 750);
            };
            StoreLocatorController.prototype.onMarkerClick = function (marker) {
                var _this = this;
                if (marker != null && marker.storeNumber) {
                    this._storeLocatorService.getStore(marker.storeNumber)
                        .then(function (store) {
                        _this.getCurrentLocation().then(function (location) {
                            if (location) {
                                store.GoogleDirectionsLink = _this._geoService.getDirectionLatLngSourceAddress(store.GoogleDirectionsLink, location);
                            }
                            var content = _this.getRenderedTemplateContents('StoreMapMarkerInfo', store);
                            _this._mapService.openInformationWindow(content, marker.value);
                        });
                    })
                        .fail(function (reason) { return _this.handlePromiseFail('StoreLocator OnMarkerClick', reason); });
                }
            };
            StoreLocatorController.prototype.onClusterClick = function (marker) {
                this._mapService.getInformationWindow().close();
                this._mapService.getMap().panTo(marker.value.getPosition());
                marker.value.setMap(null);
                this._mapService.getMap().setZoom(this._mapService.getMap().getZoom() + 1);
            };
            StoreLocatorController.prototype.updateMarkers = function (data, isSearch) {
                var _this = this;
                if (isSearch === void 0) { isSearch = false; }
                var mapBounds = this._mapService.getBounds(this._storeLocatorOptions.markerPadding);
                var zoomLevel = this._mapService.getZoom();
                var searchPoint = this._searchPoint;
                var pageSize = this._isRestoreListPaging ? this._historyState.page * this.context.viewModel.pageSize : this.context.viewModel.pageSize;
                this._storeLocatorService.getMarkers(mapBounds.getSouthWest(), mapBounds.getNorthEast(), zoomLevel, searchPoint, isSearch, pageSize)
                    .then(function (result) {
                    if (result.Lat && result.Lng) {
                        _this._mapService.extendBounds(searchPoint, new google.maps.LatLng(result.Lat, result.Lng));
                    }
                    else {
                        _this._mapService.setMarkers(result.Markers, isSearch);
                        if (_this._isRestoreListPaging && result.NextPage) {
                            result.NextPage.Page = _this._historyState.page + 1;
                        }
                        _this.renderStoresList(result, null);
                        if (_this._isRestoreListPaging && _this._historyState.pos) {
                            $('html, body').animate({
                                scrollTop: _this._historyState.pos
                            }, 500);
                            _this.historyPushState(null, null, null, null, 0);
                        }
                        _this._isRestoreListPaging = false;
                        if (_this._storeLocatorOptions.showNearestStoreInfo && result.Stores) {
                            var firstStore = result.Stores[0];
                            if (firstStore && firstStore.SearchIndex === 1) {
                                _this.setNearestStoreInfo(firstStore.DestinationToSearchPoint);
                            }
                        }
                    }
                    _this.historyPushState(1, searchPoint, zoomLevel, _this._mapService.getBounds().getCenter());
                    _this._isSearch = false;
                })
                    .fail(function (reason) { return _this.handlePromiseFail('StoreLocator UpdateMarkers getMarkers', reason); });
            };
            StoreLocatorController.prototype.setSearchLocationInMap = function (point, zoomLevel) {
                if (zoomLevel === void 0) { zoomLevel = this._storeLocatorOptions.zoomLevel; }
                this._searchPoint = point;
                this.createSearchPoitMarker();
                this._isSearch = true;
                this.cache.set(this._searchPointAddressCacheKey, this._searchBoxJQ.val());
                this._mapService.setLocationInMap(point, zoomLevel);
            };
            StoreLocatorController.prototype.createSearchPoitMarker = function () {
                var title = this._searchBoxJQ.val();
                if (this._searchPointMarker == null) {
                    this._searchPointMarker = this._mapService.createMarkerOnMap(this._searchPoint, title);
                }
                else {
                    this._searchPointMarker.setPosition(this._searchPoint);
                    this._searchPointMarker.setTitle(title);
                }
            };
            // Action on Click on locator icon in search box
            StoreLocatorController.prototype.currentLocationAction = function (actionContext) {
                var _this = this;
                actionContext.event.preventDefault();
                this._geoService.geolocate()
                    .then(function (currentLocation) {
                    _this.eventHub.publish('searchPointChanged', { data: currentLocation });
                    return _this._geoService.getAddtressByLocation(currentLocation);
                })
                    .then(function (address) {
                    _this._searchBoxJQ.val(address);
                    _this._searchPointMarker.setTitle(address);
                })
                    .fail(function (reason) { return _this.handlePromiseFail('StoreLocator CurrentLocationAction', reason); });
            };
            // Next Page Action
            StoreLocatorController.prototype.nextPage = function (actionContext) {
                var page = actionContext.elementContext.data('page');
                this.getStoresForPage(page, this.context.viewModel.pageSize, actionContext.elementContext);
                actionContext.event.preventDefault();
            };
            // Remember element position in history
            StoreLocatorController.prototype.rememberPosition = function (actionContext) {
                var position = $(document).scrollTop();
                this.historyPushState(null, null, null, null, position);
            };
            StoreLocatorController.prototype.setNearestStoreInfo = function (info) {
                var nearestInfoPanel = $('#store-locator-nearest');
                if (!$('#nearestInfo').length) {
                    nearestInfoPanel.html(nearestInfoPanel.html().replace('{0}', '<strong id=\'nearestInfo\'></strong>'));
                }
                $('#nearestInfo').html(info);
                nearestInfoPanel.removeClass('hide');
            };
            StoreLocatorController.prototype.getStoresForPage = function (page, pageSize, element) {
                var _this = this;
                var mapBounds = this._mapService.getBounds(this._storeLocatorOptions.markerPadding);
                var searchPoint = this._searchPoint;
                var busy = this.asyncBusy({ elementContext: element });
                this._storeLocatorService.getStores(mapBounds.getSouthWest(), mapBounds.getNorthEast(), searchPoint, page, pageSize)
                    .then(function (stores) {
                    busy.done();
                    _this.renderStoresList(stores, element[0].parentElement);
                });
                this.historyPushState(page);
            };
            StoreLocatorController.prototype.renderStoresList = function (stores, target) {
                var listHtml = this.getRenderedTemplateContents('StoresList', stores);
                if (target == null) {
                    var $list = $('#storesList').html('').stop().fadeOut();
                    $list.html(listHtml).stop().fadeIn();
                }
                else {
                    var position = $(target).offset().top + $(document).scrollTop();
                    $(target).replaceWith(listHtml).stop().fadeIn();
                    $('html, body').animate({
                        scrollTop: position
                    }, 500);
                }
                this.setGoogleDirectionLinks();
            };
            StoreLocatorController.prototype.setGoogleDirectionLinks = function () {
                var _this = this;
                return this.getCurrentLocation().then(function (location) {
                    _this._geoService.updateDirectionLinksWithLatLngSourceAddress(_this.context.container, location);
                });
            };
            StoreLocatorController.prototype.historyPushState = function (page, point, zoom, center, elementPos) {
                if (!this._historyState) {
                    this._historyState = new Composer.StoreLocatorHistoryState();
                }
                if (page) {
                    this._historyState.page = page;
                }
                if (point) {
                    this._historyState.point = point;
                }
                if (zoom) {
                    this._historyState.zoom = zoom;
                }
                if (center) {
                    this._historyState.center = center;
                }
                if (elementPos >= 0) {
                    this._historyState.pos = elementPos;
                }
                if (this._historyState.point) {
                    var obj = {
                        'p_lat': this._historyState.point.lat(),
                        'p_lng': this._historyState.point.lng(),
                        'page': this._historyState.page,
                        'zoom': this._historyState.zoom,
                        'c_lat': this._historyState.center.lat(),
                        'c_lng': this._historyState.center.lng(),
                        'pos': this._historyState.pos
                    };
                    if (history.state) {
                        history.replaceState(obj, null, null);
                    }
                    else {
                        history.pushState(obj, null, null);
                    }
                }
            };
            StoreLocatorController.prototype.parseHistoryState = function () {
                if (history.state) {
                    this._historyState = new Composer.StoreLocatorHistoryState();
                    if (history.state.p_lat && history.state.p_lng) {
                        this._historyState.point = new google.maps.LatLng(history.state.p_lat, history.state.p_lng);
                    }
                    if (history.state.c_lat && history.state.c_lng) {
                        this._historyState.center = new google.maps.LatLng(history.state.c_lat, history.state.c_lng);
                    }
                    this._historyState.zoom = history.state.zoom;
                    this._historyState.page = history.state.page;
                    this._historyState.pos = history.state.pos;
                }
            };
            StoreLocatorController.prototype.restoreMapFromHistoryState = function () {
                console.log('Restore data from history state');
                this._searchPoint = this._historyState.point;
                this.createSearchPoitMarker();
                if (this._historyState.center) {
                    this._mapService.getMap().setCenter(this._historyState.center);
                }
                if (this._historyState.page > 1) {
                    this._isRestoreListPaging = true;
                }
            };
            StoreLocatorController.prototype.handlePromiseFail = function (title, reason) {
                console.log(title + ': ' + reason);
            };
            return StoreLocatorController;
        }(Composer.Controller));
        Composer.StoreLocatorController = StoreLocatorController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../Typings/tsd.d.ts' />
Handlebars.registerHelper('escape', function (options) {
    var innerContent = options.fn(this);
    var escapedContent = _.escape(innerContent);
    return new Handlebars.SafeString(escapedContent);
});

///<reference path='../../../Typings/tsd.d.ts' />
Handlebars.registerHelper('if_eq', function (left, right, options) {
    if (left === right) {
        return options.fn(this);
    }
    else {
        return options.inverse(this);
    }
});

///<reference path='../../../Typings/tsd.d.ts' />
Handlebars.registerHelper('if_exists', function (value, options) {
    if (typeof value !== 'undefined') {
        return options.fn(this);
    }
    else {
        return options.inverse(this);
    }
});

///<reference path='../../../Typings/tsd.d.ts' />
Handlebars.registerHelper('if_gt', function (left, right, options) {
    if (left > right) {
        return options.fn(this);
    }
    else {
        return options.inverse(this);
    }
});

///<reference path='../../../Typings/tsd.d.ts' />
Handlebars.registerHelper('if_gte', function (left, right, options) {
    if (left >= right) {
        return options.fn(this);
    }
    else {
        return options.inverse(this);
    }
});

///<reference path='../../../Typings/tsd.d.ts' />
Handlebars.registerHelper('if_lt', function (left, right, options) {
    if (left < right) {
        return options.fn(this);
    }
    else {
        return options.inverse(this);
    }
});

///<reference path='../../../Typings/tsd.d.ts' />
Handlebars.registerHelper('if_lte', function (left, right, options) {
    if (left <= right) {
        return options.fn(this);
    }
    else {
        return options.inverse(this);
    }
});

///<reference path='../../../Typings/tsd.d.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../../Typings/tsd.d.ts' />
///<reference path='./IHandlebarsLocalization.ts' />
Handlebars.registerHelper('if_localized', function (categoryName, keyName, options) {
    if (Handlebars.localizationProvider.handleBarsHelper_isLocalized(categoryName, keyName)) {
        return options.fn(this);
    }
    else {
        return options.inverse(this);
    }
});

///<reference path='../../../Typings/tsd.d.ts' />
Handlebars.registerHelper('if_neq', function (left, right, options) {
    if (left !== right) {
        return options.fn(this);
    }
    else {
        return options.inverse(this);
    }
});

///<reference path='../../../Typings/tsd.d.ts' />
///<reference path='./IHandlebarsLocalization.ts' />
Handlebars.registerHelper('localizeFormat', function (categoryName, keyName) {
    var args = [];
    if (arguments.length > 2) {
        args = Array.prototype.slice.call(arguments, 2);
    }
    var value = Handlebars.localizationProvider
        .handleBarsHelper_localizeFormat(categoryName, keyName, args);
    return new Handlebars.SafeString(value);
});

///<reference path='../../../Typings/tsd.d.ts' />
///<reference path='./IHandlebarsLocalization.ts' />
Handlebars.registerHelper('localize', function (categoryName, keyName) {
    var value = Handlebars.localizationProvider.handleBarsHelper_localize(categoryName, keyName);
    return new Handlebars.SafeString(value);
});

//TODO: Custom errors and not being able to inherit from Error
// module Orckestra.Composer {
//     export class ControllerAlreadyRegisteredException implements Error {
//         public name = 'ControllerAlreadyRegisteredException';
//         constructor(public message: string = 'The controller has already been registered.') {
//         }
//     }
// }

//TODO: Custom errors and not being able to inherit from Error
// module Orckestra.Composer {
//     export class MissingControllerDispatcherNameException implements Error {
//         public name = 'MissingControllerDispatcherNameException';
//         constructor(public message: string = 'A name is required to create a controller dispatcher.') {
//         }
//     }
// }

///<reference path='../Generics/Collections/IHashTable.ts' />
///<reference path='./IController.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var ControllerRegistry = (function () {
            function ControllerRegistry() {
                if (ControllerRegistry._instance === void 0) {
                    ControllerRegistry._instance = this;
                }
                return ControllerRegistry._instance;
            }
            ControllerRegistry.prototype.isRegistered = function (controllerName) {
                return ControllerRegistry._registry.hasOwnProperty(controllerName);
            };
            ControllerRegistry.prototype.retrieveController = function (controllerName) {
                if (!this.isRegistered(controllerName)) {
                    throw new Error('Unable to unregister the controller ' + controllerName + ' because it does not exist in the registry');
                }
                return ControllerRegistry._registry[controllerName];
            };
            ControllerRegistry.prototype.register = function (controllerName, controller) {
                if (this.isRegistered(controllerName)) {
                    throw new Error('The controller ' + controllerName + ' is already registered.');
                }
                ControllerRegistry._registry[controllerName] = controller;
            };
            ControllerRegistry.prototype.unregister = function (controllerName) {
                var unregisteredController; // IController;
                if (!this.isRegistered(controllerName)) {
                    throw new Error('Unable to unregister the controller ' + controllerName + ' because it does not exist in the registry');
                }
                delete ControllerRegistry._registry[controllerName];
                return unregisteredController;
            };
            ControllerRegistry._registry = {}; //IHashTable<IController> = {};
            return ControllerRegistry;
        }());
        Composer.ControllerRegistry = ControllerRegistry;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../Typings/tsd.d.ts' />
///<reference path='./IControllerContext.ts' />
///<reference path='../Events/IEventHub.ts' />
///<reference path='../IComposerContext.ts' />
///<reference path='../IComposerConfiguration.ts' />

/// <reference path="../../typings/tsd.d.ts" />
/// <reference path="./IController.ts" />
/// <reference path="./ControllerRegistry.ts" />
/// <reference path="./ICreateControllerOptions.ts" />
/// <reference path="../Cache/ICache.ts" />
/// <reference path="../Events/IEventHub.ts" />
/// <reference path="../IComposerContext.ts" />
/// <reference path="../IComposerConfiguration.ts" />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        /**
        * Factory for creating controllers.
        */
        var ControllerFactory = (function () {
            function ControllerFactory() {
            }
            /**
            * Creates and returns an instance of a controller.
            */
            ControllerFactory.createController = function (options) {
                var controllerConstructor = ControllerFactory._controllerRegistry.retrieveController(options.controllerName);
                return new controllerConstructor(options.context, options.eventHub, options.composerContext, options.composerConfiguration);
            };
            ControllerFactory._controllerRegistry = new Orckestra.Composer.ControllerRegistry();
            return ControllerFactory;
        }());
        Composer.ControllerFactory = ControllerFactory;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));



///<reference path='../Typings/tsd.d.ts' />
///<reference path='./IComposerContext.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var ComposerContext = (function () {
            function ComposerContext() {
                this.language = (function () {
                    return document.getElementsByTagName('html')[0].getAttribute('lang');
                })();
            }
            return ComposerContext;
        }());
        Composer.ComposerContext = ComposerContext;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../Typings/tsd.d.ts' />
///<reference path='./Mvc/ControllerRegistry.ts' />
///<reference path='./Mvc/ControllerFactory.ts' />
///<reference path='./Templating/IComposerTemplates.ts' />
///<reference path='./Templating/IComposerTemplates.ts' />
///<reference path='./Mvc/Localization/LocalizationProvider.ts' />
///<reference path='./Mvc/Localization/ILocalizationProvider.ts' />
///<reference path='./Validation/IParsleyValidator.ts' />
///<reference path='./ComposerContext.ts' />
///<reference path='./IComposerConfiguration.ts' />
///<reference path='./Mvc/IControllerConfiguration.ts' />
///<reference path='./Plugins/IPlugin.ts' />
///<reference path='../Typescript/Events/EventHub.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
        function loadPlugins(plugins, window, document) {
            if (!_.isEmpty(plugins)) {
                plugins.forEach(function (rawPluginName) {
                    var pluginName = rawPluginName + "Plugin", plugin;
                    if (Orckestra.Composer.hasOwnProperty(pluginName) && _.isFunction(Orckestra.Composer[pluginName])) {
                        plugin = Object.create(Orckestra.Composer[pluginName]).prototype;
                        plugin.initialize(window, document);
                    }
                });
            }
        }
        function loadControllers(controllerRegistry, controllers) {
            if (!_.isEmpty(controllers)) {
                controllers.forEach(function (controllerConfiguration) {
                    controllerRegistry.register(controllerConfiguration.name, controllerConfiguration.controller);
                });
            }
        }
        function raiseLanguageSwitchEventIfNeeded(cacheProvider, eventHub) {
            var cacheKey = 'languageSwitchEvent';
            return cacheProvider.defaultCache.get(cacheKey).then(function (value) {
                eventHub.publish('languageSwitched', null);
                cacheProvider.defaultCache.clear(cacheKey);
            });
        }
        Composer.bootstrap = function (window, document, composerConfiguration) {
            var controllerRegistry = new Orckestra.Composer.ControllerRegistry(), controller, eventHub = Orckestra.Composer.EventHub.instance(), cacheProvider = Composer.CacheProvider.instance(), localizationProvider = Orckestra.Composer.LocalizationProvider.instance(), composerContext = new Composer.ComposerContext();
            // TODO: Need a better solution that <any>.
            Handlebars.partials = Orckestra.Composer.Templates;
            Handlebars.localizationProvider = localizationProvider;
            localizationProvider.initialize(composerContext).fail(function () {
                console.log('Failed to initialize the localization provider');
            }).then(function () {
                var blades = $('[data-oc-controller]'), controllers = [];
                loadPlugins(composerConfiguration.plugins, window, document);
                loadControllers(controllerRegistry, composerConfiguration.controllers);
                // Need a better query selector as this one is shit
                blades.each(function (index, item) {
                    var bladeName = item.getAttribute('data-oc-controller'), context;
                    if (controllerRegistry.isRegistered(bladeName)) {
                        context = {
                            container: $(item),
                            dataItemId: item.getAttribute('data-item-id'),
                            templateName: bladeName,
                            viewModel: JSON.parse(item.getAttribute('data-context') || '{}'),
                            window: window
                        };
                        controller = Orckestra.Composer.ControllerFactory.createController({
                            controllerName: bladeName,
                            context: context,
                            eventHub: eventHub,
                            composerContext: composerContext,
                            composerConfiguration: composerConfiguration
                        });
                        controller.initialize();
                        controllers.push(controller);
                    }
                });
                eventHub.publish('allControllersInitialized', null);
                raiseLanguageSwitchEventIfNeeded(cacheProvider, eventHub);
                /**
                 * This part of the code is mostly created to clean up dom events
                 * it was created to workaround a bug with IE8 that had memory leaks
                 * when a circular reference was made with a dom element (ie event + update of the dom element)
                 * see : http://com.hemiola.com/2009/11/23/memory-leaks-in-ie8/
                 * and : http://stackoverflow.com/questions/3083196/in-internet-explorer-why-does-memory-leak-stay-even-when-navigating-away-from
                 */
                $(window).on('beforeunload', function () {
                    controllers.forEach(function (controller) { return controller.dispose(); });
                });
            }).done();
        };
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../Typings/tsd.d.ts' />

///<reference path='../../Typings/tsd.d.ts' />
///<reference path='../Mvc/Controller.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var SearchBoxController = (function (_super) {
            __extends(SearchBoxController, _super);
            function SearchBoxController() {
                _super.apply(this, arguments);
            }
            SearchBoxController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.registerFormsForValidation(this.context.container.find('form'));
            };
            return SearchBoxController;
        }(Composer.Controller));
        Composer.SearchBoxController = SearchBoxController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../Typings/tsd.d.ts' />
///<reference path='../Mvc/Controller.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var PageNotFoundAnalyticsController = (function (_super) {
            __extends(PageNotFoundAnalyticsController, _super);
            function PageNotFoundAnalyticsController() {
                _super.apply(this, arguments);
            }
            PageNotFoundAnalyticsController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                var pageUrl = decodeURIComponent(Composer.urlHelper.getURLParameter(window.location.href, 'errorpath'));
                if (!pageUrl || pageUrl === 'null') {
                    pageUrl = window.location.href;
                }
                this.eventHub.publish('pageNotFound', { data: { PageUrl: pageUrl, ReferrerUrl: document.referrer } });
            };
            return PageNotFoundAnalyticsController;
        }(Composer.Controller));
        Composer.PageNotFoundAnalyticsController = PageNotFoundAnalyticsController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../Typings/tsd.d.ts' />
///<reference path='../Mvc/Controller.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var LanguageSwitchController = (function (_super) {
            __extends(LanguageSwitchController, _super);
            function LanguageSwitchController() {
                _super.apply(this, arguments);
                this.languageSwitchEvent = 'languageSwitchEvent';
            }
            LanguageSwitchController.prototype.initialize = function () {
                _super.prototype.initialize.call(this);
                this.cacheProvider = Composer.CacheProvider.instance();
            };
            LanguageSwitchController.prototype.onLanguageSwitch = function () {
                this.cacheProvider.defaultCache.set(this.languageSwitchEvent, true);
            };
            return LanguageSwitchController;
        }(Composer.Controller));
        Composer.LanguageSwitchController = LanguageSwitchController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='../../Typings/tsd.d.ts' />
/// <reference path='../Mvc/Controller.ts' />
/// <reference path='./IErrorCollection.ts' />
var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var ErrorController = (function (_super) {
            __extends(ErrorController, _super);
            function ErrorController() {
                _super.apply(this, arguments);
            }
            ErrorController.prototype.initialize = function () {
                this.subscribeToEvents();
            };
            ErrorController.prototype.subscribeToEvents = function () {
                var _this = this;
                this.eventHub.subscribe('GeneralErrorOccured', function (eventInfo) { return _this.handleGeneralError(eventInfo.data, eventInfo.source); });
            };
            ErrorController.prototype.handleGeneralError = function (errors, source) {
                var errorCodes = _.map(errors.Errors, 'ErrorCode').sort();
                var lastErrorCodes = this.lastErrorCodes ? this.lastErrorCodes : [];
                var isMatch = _.isEqual(errorCodes, lastErrorCodes);
                if (!isMatch) {
                    this.lastErrorCodes = errorCodes;
                    this.render('FormErrorMessages', errors);
                }
                //TODO: Force a scroll?
            };
            return ErrorController;
        }(Composer.Controller));
        Composer.ErrorController = ErrorController;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../Typings/tsd.d.ts' />
///<reference path='./Bootstrap.ts' />
///<reference path='./JQueryPlugins/IPopOverJqueryPlugin.ts' />
///<reference path='./IComposerConfiguration.ts' />
///<reference path='./Controller/SearchBoxController.ts' />
///<reference path='./Controller/PageNotFoundAnalyticsController.ts' />
///<reference path='./Controller/LanguageSwitchController.ts' />
///<reference path='../../../Composer.Product.UI/ProductSearch/Source/TypeScript/SortBySearchController.ts' />
///<reference path='../../../Composer.Product.UI/ProductSearch/Source/TypeScript/FacetSearchController.ts' />
///<reference path='../../../Composer.Product.UI/ProductSearch/Source/TypeScript/SearchResultsController.ts' />
///<reference path='../../../Composer.Product.UI/ProductSearch/Source/TypeScript/SearchSummaryController.ts' />
///<reference path='../../../Composer.Product.UI/ProductSearch/Source/TypeScript/QuickViewController.ts' />
///<reference path='../../../Composer.Product.UI/ProductSearch/Source/TypeScript/SelectedFacetSearchController.ts' />
///<reference path='../../../Composer.Cart.UI/AddToCartNotification/Source/TypeScript/AddToCartNotificationController.ts' />
///<reference path='../../../Composer.Cart.UI/CartSummary/Source/TypeScript/FullCartController.ts' />
///<reference path='../../../Composer.Cart.UI/MiniCart/Source/TypeScript/MiniCartController.ts' />
///<reference path='../../../Composer.Cart.UI/MiniCart/Source/TypeScript/MiniCartSummaryController.ts' />
///<reference path='../../../Composer.Cart.UI/Coupons/Source/Typescript/CouponController.ts' />
///<reference path='../../../Composer.Product.UI/ProductDetail/Source/TypeScript/ProductDetailController.ts' />
///<reference path='../../../Composer.Product.UI/RelatedProducts/Source/TypeScript/RelatedProductsController.ts' />
///<reference path='../../../Composer.Product.UI/ProductSpecification/Source/TypeScript/ProductSpecificationsController.ts' />
///<reference path='../../../Composer.Cart.UI/OrderSummary/Source/TypeScript/OrderSummaryController.ts' />
///<reference path='../../../Composer.Cart.UI/CheckoutGuestCustomerInfo/Source/TypeScript/GuestCustomerInfoCheckoutController.ts' />
///<reference path='../../../Composer.Cart.UI/CheckoutShippingAddress/Source/TypeScript/ShippingAddressCheckoutController.ts' />
///<reference path='../../../Composer.Cart.UI/CheckoutShippingMethod/Source/TypeScript/ShippingMethodCheckoutController.ts' />
///<reference path='../../../Composer.Cart.UI/CheckoutBillingAddress/Source/TypeScript/BillingAddressCheckoutController.ts' />
///<reference path='../../../Composer.Cart.UI/CheckoutBillingAddressRegistered/Source/TypeScript/BillingAddressRegisteredCheckoutController.ts' />
///<reference path='../../../Composer.Cart.UI/CheckoutOrderConfirmation/Source/TypeScript/CheckoutOrderConfirmationController.ts' />
///<reference path='../../../Composer.Cart.UI/CheckoutComplete/Source/TypeScript/CheckoutCompleteController.ts' />
///<reference path='../../../Composer.MyAccount.UI/AddressList/Source/TypeScript/AddressListController.ts' />
///<reference path='../../../Composer.MyAccount.UI/ChangePassword/Source/TypeScript/ChangePasswordController.ts' />
///<reference path='../../../Composer.MyAccount.UI/CreateAccount/Source/TypeScript/CreateAccountController.ts' />
///<reference path='../../../Composer.MyAccount.UI/EditAddress/Source/TypeScript/EditAddressController.ts' />
///<reference path='../../../Composer.MyAccount.UI/ForgotPassword/Source/TypeScript/ForgotPasswordController.ts' />
///<reference path='../../../Composer.MyAccount.UI/AccountHeader/Source/TypeScript/AccountHeaderController.ts' />
///<reference path='../../../Composer.MyAccount.UI/UpdateAccount/Source/TypeScript/UpdateAccountController.ts' />
///<reference path='../../../Composer.MyAccount.UI/NewPassword/Source/TypeScript/NewPasswordController.ts' />
///<reference path='../../../Composer.MyAccount.UI/ReturningCustomer/Source/TypeScript/ReturningCustomerController.ts' />
///<reference path='../../../Composer.MyAccount.UI/WishList/Source/TypeScript/MyWishListController.ts' />
///<reference path='../../../Composer.MyAccount.UI/WishListShared/Source/TypeScript/SharedWishListController.ts' />
///<reference path='../../../Composer.MyAccount.UI/WishList/Source/TypeScript/WishListInHeaderController.ts' />
///<reference path='../../../Composer.Cart.UI/CheckoutShippingAddressRegistered/Source/TypeScript/ShippingAddressRegisteredController.ts' />
///<reference path='../../../Composer.Cart.UI/CheckoutOrderSummary/Source/TypeScript/CheckoutOrderSummaryController.ts' />
///<reference path='../../../Composer.Cart.UI/CheckoutOrderSummary/Source/TypeScript/CompleteCheckoutOrderSummaryController.ts' />
///<reference path='../../../Composer.Cart.UI/CheckoutPayment/Source/TypeScript/CheckoutPaymentController.ts' />
///<reference path='../../../Composer.Cart.UI/CheckoutCommon/Source/TypeScript/CheckoutNavigationController.ts' />
///<reference path='../../../Composer.MyAccount.UI/SignInHeader/Source/TypeScript/SignInHeaderController.ts' />
///<reference path='../../../Composer.MyAccount.UI/MyAccount/Source/TypeScript/MyAccountController.ts' />
///<reference path='../../../Composer.Cart.UI/OrderHistory/Source/TypeScript/CurrentOrdersController.ts' />
///<reference path='../../../Composer.Cart.UI/OrderHistory/Source/TypeScript/PastOrdersController.ts' />
///<reference path='../../../Composer.Cart.UI/OrderDetails/Source/TypeScript/OrderDetailsController.ts' />
///<reference path='../../../Composer.Cart.UI/FindMyOrder/Source/TypeScript/FindMyOrderController.ts' />
///<reference path='./ErrorHandling/ErrorController.ts' />
///<reference path='../../../Composer.Store.UI/StoreLocator/Source/TypeScript/StoreLocatorController.ts' />
///<reference path='../../../Composer.Store.UI/StoreLocator/Source/TypeScript/StoreDetailsController.ts' />
///<reference path='../../../Composer.Store.UI/StoreDirectory/Source/TypeScript/StoresDirectoryController.ts' />
///<reference path='../../../Composer.Store.UI/StoreInventory/Source/TypeScript/StoreInventoryController.ts' />
(function () {
    'use strict';
    // This file is currently used for the composer team so that we can deploy and hook into
    // our client-side code, but the starter site that ships, will ship with an App.ts
    // that will look like this.
    $(document).ready(function () {
        var composerConfiguration = {
            plugins: [
                'AntiIFrameClickJacking',
                'ComposerValidationLocalization',
                'HelpBubbles',
                'StickyAffix',
                'SlickCarousel',
                'FocusElement',
                'GoogleAnalytics'
            ],
            controllers: [
                { name: 'General.ErrorController', controller: Orckestra.Composer.ErrorController },
                { name: 'General.SearchBox', controller: Orckestra.Composer.SearchBoxController },
                { name: 'General.LanguageSwitch', controller: Orckestra.Composer.LanguageSwitchController },
                { name: 'Cart.FullCart', controller: Orckestra.Composer.FullCartController },
                { name: 'Cart.OrderSummary', controller: Orckestra.Composer.OrderSummaryController },
                { name: 'Cart.MiniCart', controller: Orckestra.Composer.MiniCartController },
                { name: 'Cart.MiniCartSummary', controller: Orckestra.Composer.MiniCartSummaryController },
                { name: 'Cart.Coupons', controller: Orckestra.Composer.CouponController },
                { name: 'Cart.AddToCartNotification', controller: Orckestra.Composer.AddToCartNotificationController },
                { name: 'Product.SortBySearch', controller: Orckestra.Composer.SortBySearchController },
                { name: 'Product.FacetSearch', controller: Orckestra.Composer.FacetSearchController },
                { name: 'Product.ProductDetail', controller: Orckestra.Composer.ProductDetailController },
                { name: 'Product.RelatedProducts', controller: Orckestra.Composer.RelatedProductController },
                { name: 'Product.SearchResults', controller: Orckestra.Composer.SearchResultsController },
                { name: 'Product.SearchSummary', controller: Orckestra.Composer.SearchSummaryController },
                { name: 'Product.QuickView', controller: Orckestra.Composer.QuickViewController },
                { name: 'Product.SelectedSearchFacets', controller: Orckestra.Composer.SelectedFacetSearchController },
                { name: 'Product.ProductSpecifications', controller: Orckestra.Composer.ProductSpecificationsController },
                { name: 'Product.ProductZoom', controller: Orckestra.Composer.ProductZoomController },
                { name: 'Checkout.GuestCustomerInfo', controller: Orckestra.Composer.GuestCustomerInfoCheckoutController },
                { name: 'Checkout.ShippingAddress', controller: Orckestra.Composer.ShippingAddressCheckoutController },
                { name: 'Checkout.ShippingAddressRegistered', controller: Orckestra.Composer.ShippingAddressRegisteredController },
                { name: 'Checkout.ShippingMethod', controller: Orckestra.Composer.ShippingMethodCheckoutController },
                { name: 'Checkout.OrderSummary', controller: Orckestra.Composer.CheckoutOrderSummaryController },
                { name: 'Checkout.CompleteOrderSummary', controller: Orckestra.Composer.CompleteCheckoutOrderSummaryController },
                { name: 'Checkout.CheckoutComplete', controller: Orckestra.Composer.CheckoutCompleteController },
                { name: 'Checkout.CheckoutOrderConfirmation', controller: Orckestra.Composer.CheckoutOrderConfirmationController },
                { name: 'Checkout.BillingAddress', controller: Orckestra.Composer.BillingAddressCheckoutController },
                { name: 'Checkout.BillingAddressRegistered', controller: Orckestra.Composer.BillingAddressRegisteredCheckoutController },
                { name: 'Checkout.Payment', controller: Orckestra.Composer.CheckoutPaymentController },
                { name: 'Checkout.Navigation', controller: Orckestra.Composer.CheckoutNavigationController },
                { name: 'MyAccount.AddressList', controller: Orckestra.Composer.AddressListController },
                { name: 'MyAccount.ChangePassword', controller: Orckestra.Composer.ChangePasswordController },
                { name: 'MyAccount.CreateAccount', controller: Orckestra.Composer.CreateAccountController },
                { name: 'MyAccount.EditAddress', controller: Orckestra.Composer.EditAddressController },
                { name: 'MyAccount.ForgotPassword', controller: Orckestra.Composer.ForgotPasswordController },
                { name: 'MyAccount.AccountHeader', controller: Orckestra.Composer.AccountHeaderController },
                { name: 'MyAccount.UpdateAccount', controller: Orckestra.Composer.UpdateAccountController },
                { name: 'MyAccount.NewPassword', controller: Orckestra.Composer.NewPasswordController },
                { name: 'MyAccount.ReturningCustomer', controller: Orckestra.Composer.ReturningCustomerController },
                { name: 'MyAccount.SignInHeader', controller: Orckestra.Composer.SignInHeaderController },
                { name: 'MyAccount.MyAccountMenu', controller: Orckestra.Composer.MyAccountController },
                { name: 'MyAccount.MyWishList', controller: Orckestra.Composer.MyWishListController },
                { name: 'MyAccount.SharedWishList', controller: Orckestra.Composer.SharedWishListController },
                { name: 'MyAccount.WishListInHeader', controller: Orckestra.Composer.WishListInHeaderController },
                { name: 'Orders.CurrentOrders', controller: Orckestra.Composer.CurrentOrdersController },
                { name: 'Orders.PastOrders', controller: Orckestra.Composer.PastOrdersController },
                { name: 'Orders.OrderDetails', controller: Orckestra.Composer.OrderDetailsController },
                { name: 'Orders.FindMyOrder', controller: Orckestra.Composer.FindMyOrderController },
                { name: 'Store.Locator', controller: Orckestra.Composer.StoreLocatorController },
                { name: 'Store.Details', controller: Orckestra.Composer.StoreDetailsController },
                { name: 'Store.Directory', controller: Orckestra.Composer.StoresDirectoryController },
                { name: 'Store.Inventory', controller: Orckestra.Composer.StoreInventoryController },
                { name: 'PageNotFound.Analytics', controller: Orckestra.Composer.PageNotFoundAnalyticsController }
            ]
        };
        Orckestra.Composer.bootstrap(window, document, composerConfiguration);
    });
})();

/// <reference path='./IPlugin.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var AntiIFrameClickJackingPlugin = (function () {
            function AntiIFrameClickJackingPlugin() {
            }
            AntiIFrameClickJackingPlugin.prototype.initialize = function (window, document) {
                if (this.getOrigin(window.self) !== this.getOrigin(window.top)) {
                    console.warn('This site cannot be hosted in an iFrame. Redirecting.');
                    window.top.location.href = window.self.location.href;
                }
            };
            AntiIFrameClickJackingPlugin.prototype.getOrigin = function (window) {
                var origin;
                if (!window.location['origin']) {
                    window.location['origin'] = window.location.protocol + '//' + window.location.host;
                }
                origin = window.location['origin'];
                return origin;
            };
            return AntiIFrameClickJackingPlugin;
        }());
        Composer.AntiIFrameClickJackingPlugin = AntiIFrameClickJackingPlugin;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='../../Typings/tsd.d.ts' />
/// <reference path='../Validation/IParsleyValidator.ts' />
/// <reference path='../ComposerContext.ts' />
/// <reference path='./IPlugin.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var ComposerValidationLocalizationPlugin = (function () {
            function ComposerValidationLocalizationPlugin() {
            }
            ComposerValidationLocalizationPlugin.prototype.initialize = function (window, document) {
                var locale, parlseyConfig = window.ParsleyConfig, parsleyLocaleMessages = JSON.parse(Orckestra.Composer.Templates['GlobalValidation']()), composerContext = new Composer.ComposerContext();
                locale = composerContext.language;
                if (_.isEmpty(locale)) {
                    throw new Error('The locale has not been set');
                }
                window.ParsleyConfig = window.ParsleyConfig || {};
                window.ParsleyConfig.i18n = window.ParsleyConfig.i18n || {};
                window.ParsleyConfig.i18n[locale] =
                    jQuery.extend(window.ParsleyConfig.i18n[locale] || {}, parsleyLocaleMessages);
                // If file is loaded after Parsley main file, auto-load locale
                if (window.ParsleyValidator !== void 0) {
                    window.ParsleyValidator.addCatalog(locale, window.ParsleyConfig.i18n[locale], true);
                    window.ParsleyValidator.setLocale(locale);
                }
                this.defineValidators(window.ParsleyValidator);
            };
            ComposerValidationLocalizationPlugin.prototype.defineValidators = function (parsleyValidator) {
                var regex = /^(?!(.|\n)*<[a-z!\/?])(?!(.|\n)*&#)(.|\n)*$/i;
                parsleyValidator.addValidator('antixss', function (value, requirement) {
                    var isReq;
                    if (_.isString(requirement)) {
                        isReq = requirement.toLowerCase() === 'true';
                    }
                    else {
                        isReq = !!requirement;
                    }
                    var isValid = !isReq || regex.test(value);
                    return isValid;
                });
                //en: 'This field contains invalid characters.',
                //fr: 'Ce champ contient des caractres invalides.'
            };
            return ComposerValidationLocalizationPlugin;
        }());
        Composer.ComposerValidationLocalizationPlugin = ComposerValidationLocalizationPlugin;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='./IPlugin.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var FocusElementPlugin = (function () {
            function FocusElementPlugin() {
            }
            FocusElementPlugin.prototype.initialize = function (window, document) {
                /**
                 * On click, scroll to field and focus in it.
                 */
                $('body', document).on('click', '[data-focus-element]', function (e) {
                    var target = $(this).data('focus-element');
                    $('body, html').scrollTop($(target).offset().top - 20);
                    $(target).focus();
                    e.preventDefault();
                });
            };
            return FocusElementPlugin;
        }());
        Composer.FocusElementPlugin = FocusElementPlugin;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='./IPlugin.ts' />
/// <reference path='../JQueryPlugins/IPopOverJqueryPlugin.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var HelpBubblesPlugin = (function () {
            function HelpBubblesPlugin() {
            }
            HelpBubblesPlugin.prototype.initialize = function (window, document) {
                /**
                 * Will calculate if there is enough space for the popover on the right
                 * else will put it in the bottom.
                 */
                function popoverPlacement(popover, triggeringElement) {
                    var triggeringElementWidth = $(triggeringElement).outerWidth();
                    var placement = 'bottom';
                    // we will consider that if the trrigering element can't be doubled
                    // we won't have enough space to display the popover on the right
                    if ((window.innerWidth - triggeringElementWidth) > triggeringElementWidth) {
                        placement = 'right';
                    }
                    return placement;
                }
                //  As discussed with Sam, this is in the app.ts for now. Because we don't have a strategy
                //  yet for generic presentation/plugins javascript.
                //  Pop over initialization.
                $('body').popover({
                    html: true,
                    placement: popoverPlacement,
                    selector: '[data-toggle=popover]',
                    trigger: 'focus',
                    content: function () {
                        return $('#popover-content').html();
                    }
                });
                /**
                 * Needs the select block of a same group to have data-parent defined
                 * OR that they be in the same form.
                 */
                $('body').on('change', '.select-block', function () {
                    var input = $(this).find('.input');
                    var type = input.attr('type');
                    var name = input.attr('name');
                    // if checkbox check current state of prop
                    if (type === 'checkbox') {
                        if (input.prop('checked')) {
                            $(this).addClass('active');
                        }
                        else {
                            $(this).removeClass('active');
                        }
                    }
                    if (type === 'radio') {
                        var parentSelector = $(this).data('parent');
                        var parentElement;
                        if (parentSelector) {
                            parentElement = input.closest(parentSelector);
                        }
                        else {
                            // if no parent specified, default to form and fallback to body
                            parentElement = input.closest('form');
                            if (parentElement.length === 0) {
                                parentElement = $('body');
                            }
                        }
                        parentElement
                            .find('.select-block:has(:radio[name="' + name + '"])')
                            .removeClass('active');
                        $(this).addClass('active');
                    }
                });
            };
            return HelpBubblesPlugin;
        }());
        Composer.HelpBubblesPlugin = HelpBubblesPlugin;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

/// <reference path='../../Typings/tsd.d.ts' />
/// <reference path='./IPlugin.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        var StickyAffixPlugin = (function () {
            function StickyAffixPlugin() {
            }
            StickyAffixPlugin.prototype.initialize = function (window, document) {
                $('[data-sticky-top]').each(function () {
                    var stickyOffset = $(this).data('sticky-top-offset');
                    stickyOffset = stickyOffset ? stickyOffset : 0;
                    $(this).affix({
                        offset: {
                            top: function (element) {
                                return $(element).parent().offset().top - stickyOffset;
                            }
                        }
                    });
                });
            };
            return StickyAffixPlugin;
        }());
        Composer.StickyAffixPlugin = StickyAffixPlugin;
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

///<reference path='./IControllerActionContext.ts' />
var Orckestra;
(function (Orckestra) {
    var Composer;
    (function (Composer) {
        'use strict';
    })(Composer = Orckestra.Composer || (Orckestra.Composer = {}));
})(Orckestra || (Orckestra = {}));

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0V2ZW50cy9JU3Vic2NyaXB0aW9uLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvRXZlbnRzL0lMaXN0ZW5lci50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0V2ZW50cy9JTGlzdGVuZXJRdWV1ZS50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0V2ZW50cy9JRXZlbnRJbmZvcm1hdGlvbi50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0dlbmVyaWNzL0NvbGxlY3Rpb25zL0lIYXNoVGFibGUudHMiLCJDb21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9FdmVudHMvSUV2ZW50SHViLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvRXZlbnRzL0V2ZW50SHViLnRzIiwiQ29tcG9zZXIuQW5hbHl0aWNzLlVJL0FuYWx5dGljcy9Tb3VyY2UvVHlwZXNjcmlwdC9JQW5hbHl0aWNzUHJvZHVjdC50cyIsIkNvbXBvc2VyLkFuYWx5dGljcy5VSS9BbmFseXRpY3MvU291cmNlL1R5cGVzY3JpcHQvSUFuYWx5dGljc1NlYXJjaFJlc3VsdHMudHMiLCJDb21wb3Nlci5BbmFseXRpY3MuVUkvQW5hbHl0aWNzL1NvdXJjZS9UeXBlc2NyaXB0L0lBbmFseXRpY3NQbHVnaW4udHMiLCJDb21wb3Nlci5BbmFseXRpY3MuVUkvQW5hbHl0aWNzL1NvdXJjZS9UeXBlc2NyaXB0L0lBbmFseXRpY3NDb3Vwb24udHMiLCJDb21wb3Nlci5BbmFseXRpY3MuVUkvQW5hbHl0aWNzL1NvdXJjZS9UeXBlc2NyaXB0L0lBbmFseXRpY3NPcmRlci50cyIsIkNvbXBvc2VyLkFuYWx5dGljcy5VSS9BbmFseXRpY3MvU291cmNlL1R5cGVzY3JpcHQvSUFuYWx5dGljc1RyYW5zYWN0aW9uLnRzIiwiQ29tcG9zZXIuQW5hbHl0aWNzLlVJL0FuYWx5dGljcy9Tb3VyY2UvVHlwZXNjcmlwdC9JQW5hbHl0aWNzU2VhcmNoRmlsdGVycy50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L1BsdWdpbnMvSVBsdWdpbi50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L1N5c3RlbS9JRGlzcG9zYWJsZS50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L012Yy9JQ29udHJvbGxlci50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L012Yy9JQ29udHJvbGxlckNvbnRleHQudHMiLCJDb21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9NdmMvSVJlZ2lzdGVyQWN0aW9uT3B0aW9ucy50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L012Yy9JQ29udHJvbGxlckFjdGlvbkNvbnRleHQudHMiLCJDb21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9UZW1wbGF0aW5nL0lDb21wb3NlclRlbXBsYXRlcy50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0pRdWVyeVBsdWdpbnMvSVBhcnNsZXlKcXVlcnlQbHVnaW4udHMiLCJDb21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9WYWxpZGF0aW9uL0lQYXJzbGV5LnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvVUkvVUlCdXN5UGFyYW0udHMiLCJDb21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9VSS9VSUJ1c3lIYW5kbGUudHMiLCJDb21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9JQ29tcG9zZXJDb250ZXh0LnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvTXZjL0lDb250cm9sbGVyQ29uZmlndXJhdGlvbi50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0lDb21wb3NlckNvbmZpZ3VyYXRpb24udHMiLCJDb21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9NdmMvQ29udHJvbGxlci50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0pRdWVyeVBsdWdpbnMvSVNlcmlhbGl6ZU9iamVjdEpxdWVyeVBsdWdpbi50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L012Yy9Mb2NhbGl6YXRpb24vSUxvY2FsaXphdGlvblByb3ZpZGVyLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvTXZjL0xvY2FsaXphdGlvbi9Mb2NhbGl6YXRpb25Qcm92aWRlci50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L012Yy9Db21wb3NlckNsaWVudC50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L1JlcG9zaXRvcmllcy9JTWVtYmVyc2hpcFJlcG9zaXRvcnkudHMiLCJDb21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9SZXBvc2l0b3JpZXMvTWVtYmVyc2hpcFJlcG9zaXRvcnkudHMiLCJDb21wb3Nlci5NeUFjY291bnQuVUkvQ29tbW9uL1NvdXJjZS9UeXBlc2NyaXB0L0lNZW1iZXJzaGlwU2VydmljZS50cyIsIkNvbXBvc2VyLk15QWNjb3VudC5VSS9Db21tb24vU291cmNlL1R5cGVzY3JpcHQvTWVtYmVyc2hpcFNlcnZpY2UudHMiLCJDb21wb3Nlci5NeUFjY291bnQuVUkvQ29tbW9uL1NvdXJjZS9UeXBlc2NyaXB0L015QWNjb3VudEV2ZW50cy50cyIsIkNvbXBvc2VyLkFuYWx5dGljcy5VSS9BbmFseXRpY3MvU291cmNlL1R5cGVzY3JpcHQvQW5hbHl0aWNzUGx1Z2luLnRzIiwiQ29tcG9zZXIuQW5hbHl0aWNzLlVJL0FuYWx5dGljcy9Tb3VyY2UvVHlwZXNjcmlwdC9Hb29nbGVBbmFseXRpY3NNYW5hZ2VyLmpzIiwiQ29tcG9zZXIuQW5hbHl0aWNzLlVJL0FuYWx5dGljcy9Tb3VyY2UvVHlwZXNjcmlwdC9Hb29nbGVBbmFseXRpY3NQbHVnaW4udHMiLCJDb21wb3Nlci5DYXJ0LlVJL0FkZFRvQ2FydE5vdGlmaWNhdGlvbi9Tb3VyY2UvVHlwZXNjcmlwdC9BZGRUb0NhcnROb3RpZmljYXRpb25Db250cm9sbGVyLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvQ2FjaGUvSUNhY2hlUG9saWN5LnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvQ2FjaGUvSUNhY2hlLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvQ2FjaGUvSUNhY2hlUHJvdmlkZXIudHMiLCJDb21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9TdG9yYWdlL0lTdG9yYWdlLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvU3RvcmFnZS9JU3RvcmFnZUl0ZW0udHMiLCJDb21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9DYWNoZS9DYWNoZUVycm9yLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvQ2FjaGUvSUNhY2hlSXRlbS50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0NhY2hlL1N0b3JhZ2VCYXNlZENhY2hlLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvU3RvcmFnZS9CYWNraW5nU3RvcmFnZS50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L1N0b3JhZ2UvU3RvcmFnZVR5cGUudHMiLCJDb21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9TdG9yYWdlL1N0b3JhZ2VQb2x5RmlsbC50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L1N0b3JhZ2UvU3RvcmFnZUZhY3RvcnkudHMiLCJDb21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9DYWNoZS9DYWNoZVByb3ZpZGVyLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvUmVwb3NpdG9yaWVzL0lDYXJ0UmVwb3NpdG9yeS50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L1JlcG9zaXRvcmllcy9DYXJ0UmVwb3NpdG9yeS50cyIsIkNvbXBvc2VyLkNhcnQuVUkvQ2FydFN1bW1hcnkvU291cmNlL1R5cGVzY3JpcHQvSUNhcnRTZXJ2aWNlLnRzIiwiQ29tcG9zZXIuQ2FydC5VSS9DYXJ0U3VtbWFyeS9Tb3VyY2UvVHlwZXNjcmlwdC9DYXJ0U2VydmljZS50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0Vycm9ySGFuZGxpbmcvSUVycm9yLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvRXJyb3JIYW5kbGluZy9JRXJyb3JDb2xsZWN0aW9uLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvRXJyb3JIYW5kbGluZy9JRXJyb3JIYW5kbGVyLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvRXJyb3JIYW5kbGluZy9FcnJvckhhbmRsZXIudHMiLCJDb21wb3Nlci5DYXJ0LlVJL0NhcnRTdW1tYXJ5L1NvdXJjZS9UeXBlc2NyaXB0L0Z1bGxDYXJ0Q29udHJvbGxlci50cyIsIkNvbXBvc2VyLkNhcnQuVUkvQ2hlY2tvdXRTaGlwcGluZ01ldGhvZC9Tb3VyY2UvVHlwZXNjcmlwdC9TaGlwcGluZ01ldGhvZFNlcnZpY2UudHMiLCJDb21wb3Nlci5DYXJ0LlVJL0NoZWNrb3V0Q29tbW9uL1NvdXJjZS9UeXBlc2NyaXB0L0lCYXNlQ2hlY2tvdXRDb250cm9sbGVyLnRzIiwiQ29tcG9zZXIuQ2FydC5VSS9DaGVja291dENvbW1vbi9Tb3VyY2UvVHlwZXNjcmlwdC9JUmVnaW9uU2VydmljZS50cyIsIkNvbXBvc2VyLkNhcnQuVUkvQ2hlY2tvdXRDb21tb24vU291cmNlL1R5cGVzY3JpcHQvUmVnaW9uU2VydmljZS50cyIsIkNvbXBvc2VyLkNhcnQuVUkvQ2hlY2tvdXRDb21tb24vU291cmNlL1R5cGVzY3JpcHQvSUNoZWNrb3V0U2VydmljZS50cyIsIkNvbXBvc2VyLkNhcnQuVUkvQ2hlY2tvdXRDb21tb24vU291cmNlL1R5cGVzY3JpcHQvSUNoZWNrb3V0Q29udGV4dC50cyIsIkNvbXBvc2VyLkNhcnQuVUkvQ2hlY2tvdXRDb21tb24vU291cmNlL1R5cGVzY3JpcHQvSVJlZ2lzdGVyT3B0aW9ucy50cyIsIkNvbXBvc2VyLkNhcnQuVUkvQ2hlY2tvdXRDb21tb24vU291cmNlL1R5cGVzY3JpcHQvQ2hlY2tvdXRTZXJ2aWNlLnRzIiwiQ29tcG9zZXIuQ2FydC5VSS9DaGVja291dENvbW1vbi9Tb3VyY2UvVHlwZXNjcmlwdC9CYXNlQ2hlY2tvdXRDb250cm9sbGVyLnRzIiwiQ29tcG9zZXIuQ2FydC5VSS9DaGVja291dEJpbGxpbmdBZGRyZXNzL1NvdXJjZS9UeXBlc2NyaXB0L0JpbGxpbmdBZGRyZXNzQ2hlY2tvdXRDb250cm9sbGVyLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvUmVwb3NpdG9yaWVzL0lDdXN0b21lclJlcG9zaXRvcnkudHMiLCJDb21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9SZXBvc2l0b3JpZXMvQ3VzdG9tZXJSZXBvc2l0b3J5LnRzIiwiQ29tcG9zZXIuTXlBY2NvdW50LlVJL0NvbW1vbi9Tb3VyY2UvVHlwZXNjcmlwdC9JQ3VzdG9tZXJTZXJ2aWNlLnRzIiwiQ29tcG9zZXIuTXlBY2NvdW50LlVJL0NvbW1vbi9Tb3VyY2UvVHlwZXNjcmlwdC9DdXN0b21lclNlcnZpY2UudHMiLCJDb21wb3Nlci5NeUFjY291bnQuVUkvQ29tbW9uL1NvdXJjZS9UeXBlc2NyaXB0L015QWNjb3VudFN0YXR1cy50cyIsIkNvbXBvc2VyLkNhcnQuVUkvQ2hlY2tvdXRDb21tb24vU291cmNlL1R5cGVzY3JpcHQvQWRkcmVzc0R0by5qcyIsIkNvbXBvc2VyLkNhcnQuVUkvQ2hlY2tvdXRCaWxsaW5nQWRkcmVzc1JlZ2lzdGVyZWQvU291cmNlL1R5cGVzY3JpcHQvQmlsbGluZ0FkZHJlc3NSZWdpc3RlcmVkQ2hlY2tvdXRTZXJ2aWNlLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvVUkvVUlNb2RhbC50cyIsIkNvbXBvc2VyLkNhcnQuVUkvQ2hlY2tvdXRCaWxsaW5nQWRkcmVzc1JlZ2lzdGVyZWQvU291cmNlL1R5cGVzY3JpcHQvQmlsbGluZ0FkZHJlc3NSZWdpc3RlcmVkQ2hlY2tvdXRDb250cm9sbGVyLnRzIiwiQ29tcG9zZXIuQ2FydC5VSS9DaGVja291dENvbW1vbi9Tb3VyY2UvVHlwZXNjcmlwdC9DaGVja291dE5hdmlnYXRpb25Db250cm9sbGVyLnRzIiwiQ29tcG9zZXIuQ2FydC5VSS9DaGVja291dENvbW1vbi9Tb3VyY2UvVHlwZXNjcmlwdC9JQ2hlY2tvdXRHZXRDYXJ0UHJvbWlzZUZhaWx1cmVIYW5kbGVyLnRzIiwiQ29tcG9zZXIuQ2FydC5VSS9DaGVja291dENvbW1vbi9Tb3VyY2UvVHlwZXNjcmlwdC9JQ2hlY2tvdXRHZXRDYXJ0UHJvbWlzZVBhcmFtLnRzIiwiQ29tcG9zZXIuQ2FydC5VSS9DaGVja291dENvbW1vbi9Tb3VyY2UvVHlwZXNjcmlwdC9JR2V0UGF5bWVudE1ldGhvZHNPcHRpb25zLnRzIiwiQ29tcG9zZXIuQ2FydC5VSS9DaGVja291dENvbW1vbi9Tb3VyY2UvVHlwZXNjcmlwdC9JVXBkYXRlUGF5bWVudE9wdGlvbnMudHMiLCJDb21wb3Nlci5DYXJ0LlVJL0NoZWNrb3V0Q29tbW9uL1NvdXJjZS9UeXBlc2NyaXB0L1BheW1lbnRQcm92aWRlci50cyIsIkNvbXBvc2VyLkNhcnQuVUkvQ2hlY2tvdXRDb21wbGV0ZS9Tb3VyY2UvVHlwZXNjcmlwdC9DaGVja291dENvbXBsZXRlQ29udHJvbGxlci50cyIsIkNvbXBvc2VyLkNhcnQuVUkvQ2hlY2tvdXRHdWVzdEN1c3RvbWVySW5mby9Tb3VyY2UvVHlwZXNjcmlwdC9HdWVzdEN1c3RvbWVySW5mb0NoZWNrb3V0Q29udHJvbGxlci50cyIsIkNvbXBvc2VyLkNhcnQuVUkvQ2hlY2tvdXRPcmRlckNvbmZpcm1hdGlvbi9Tb3VyY2UvVHlwZXNjcmlwdC9DaGVja291dE9yZGVyQ29uZmlybWF0aW9uQ29udHJvbGxlci50cyIsIkNvbXBvc2VyLkNhcnQuVUkvQ2hlY2tvdXRPcmRlclN1bW1hcnkvU291cmNlL1R5cGVzY3JpcHQvQ2hlY2tvdXRPcmRlclN1bW1hcnlDb250cm9sbGVyLnRzIiwiQ29tcG9zZXIuQ2FydC5VSS9DaGVja291dE9yZGVyU3VtbWFyeS9Tb3VyY2UvVHlwZXNjcmlwdC9Db21wbGV0ZUNoZWNrb3V0T3JkZXJTdW1tYXJ5Q29udHJvbGxlci50cyIsIkNvbXBvc2VyLkNhcnQuVUkvQ2hlY2tvdXRQYXltZW50L1NvdXJjZS9UeXBlc2NyaXB0L1NlcnZpY2VzL0lQYXltZW50U2VydmljZS50cyIsIkNvbXBvc2VyLkNhcnQuVUkvQ2hlY2tvdXRQYXltZW50L1NvdXJjZS9UeXBlc2NyaXB0L1ZpZXdNb2RlbHMvSUFjdGl2ZVBheW1lbnRWaWV3TW9kZWwudHMiLCJDb21wb3Nlci5DYXJ0LlVJL0NoZWNrb3V0UGF5bWVudC9Tb3VyY2UvVHlwZXNjcmlwdC9Qcm92aWRlcnMvQmFzZUNoZWNrb3V0UGF5bWVudFByb3ZpZGVyLnRzIiwiQ29tcG9zZXIuQ2FydC5VSS9DaGVja291dFBheW1lbnQvU291cmNlL1R5cGVzY3JpcHQvVmlld01vZGVscy9JUGF5bWVudE1ldGhvZFZpZXdNb2RlbC50cyIsIkNvbXBvc2VyLkNhcnQuVUkvQ2hlY2tvdXRQYXltZW50L1NvdXJjZS9UeXBlc2NyaXB0L1JlcG9zaXRvcmllcy9JUGF5bWVudFJlcG9zaXRvcnkudHMiLCJDb21wb3Nlci5DYXJ0LlVJL0NoZWNrb3V0UGF5bWVudC9Tb3VyY2UvVHlwZXNjcmlwdC9TZXJ2aWNlcy9QYXltZW50U2VydmljZS50cyIsIkNvbXBvc2VyLkNhcnQuVUkvQ2hlY2tvdXRQYXltZW50L1NvdXJjZS9UeXBlc2NyaXB0L1ZpZXdNb2RlbHMvSVBheW1lbnRWaWV3TW9kZWwudHMiLCJDb21wb3Nlci5DYXJ0LlVJL0NoZWNrb3V0UGF5bWVudC9Tb3VyY2UvVHlwZXNjcmlwdC9WaWV3TW9kZWxzL0lQYXltZW50UHJvZmlsZUxpc3RJdGVtVmlld01vZGVsLnRzIiwiQ29tcG9zZXIuQ2FydC5VSS9DaGVja291dFBheW1lbnQvU291cmNlL1R5cGVzY3JpcHQvVmlld01vZGVscy9JUGF5bWVudFByb2ZpbGVMaXN0Vmlld01vZGVsLnRzIiwiQ29tcG9zZXIuQ2FydC5VSS9DaGVja291dFBheW1lbnQvU291cmNlL1R5cGVzY3JpcHQvUmVwb3NpdG9yaWVzL1BheW1lbnRSZXBvc2l0b3J5LnRzIiwiQ29tcG9zZXIuQ2FydC5VSS9DaGVja291dFBheW1lbnQvU291cmNlL1R5cGVzY3JpcHQvUHJvdmlkZXJzL0NoZWNrb3V0UGF5bWVudFByb3ZpZGVyRmFjdG9yeS50cyIsIkNvbXBvc2VyLkNhcnQuVUkvQ2hlY2tvdXRQYXltZW50L1NvdXJjZS9UeXBlc2NyaXB0L0NoZWNrb3V0UGF5bWVudENvbnRyb2xsZXIudHMiLCJDb21wb3Nlci5DYXJ0LlVJL0NoZWNrb3V0U2hpcHBpbmdBZGRyZXNzUmVnaXN0ZXJlZC9Tb3VyY2UvVHlwZXNjcmlwdC9TaGlwcGluZ0FkZHJlc3NSZWdpc3RlcmVkU2VydmljZS50cyIsIkNvbXBvc2VyLkNhcnQuVUkvQ2hlY2tvdXRTaGlwcGluZ0FkZHJlc3NSZWdpc3RlcmVkL1NvdXJjZS9UeXBlc2NyaXB0L1NoaXBwaW5nQWRkcmVzc1JlZ2lzdGVyZWRDb250cm9sbGVyLnRzIiwiQ29tcG9zZXIuQ2FydC5VSS9DaGVja291dFNoaXBwaW5nQWRkcmVzcy9Tb3VyY2UvVHlwZXNjcmlwdC9TaGlwcGluZ0FkZHJlc3NDaGVja291dFNlcnZpY2UudHMiLCJDb21wb3Nlci5DYXJ0LlVJL0NoZWNrb3V0U2hpcHBpbmdBZGRyZXNzL1NvdXJjZS9UeXBlc2NyaXB0L1NoaXBwaW5nQWRkcmVzc0NoZWNrb3V0Q29udHJvbGxlci50cyIsIkNvbXBvc2VyLkNhcnQuVUkvQ2hlY2tvdXRTaGlwcGluZ01ldGhvZC9Tb3VyY2UvVHlwZXNjcmlwdC9TaGlwcGluZ01ldGhvZENoZWNrb3V0Q29udHJvbGxlci50cyIsIkNvbXBvc2VyLkNhcnQuVUkvQ291cG9ucy9Tb3VyY2UvVHlwZXNjcmlwdC9Db3Vwb25TZXJ2aWNlLnRzIiwiQ29tcG9zZXIuQ2FydC5VSS9Db3Vwb25zL1NvdXJjZS9UeXBlc2NyaXB0L0NvdXBvbkNvbnRyb2xsZXIudHMiLCJDb21wb3Nlci5DYXJ0LlVJL0ZpbmRNeU9yZGVyL1NvdXJjZS9UeXBlc2NyaXB0L0lHZXRPcmRlckRldGFpbHNVcmxSZXF1ZXN0LnRzIiwiQ29tcG9zZXIuQ2FydC5VSS9GaW5kTXlPcmRlci9Tb3VyY2UvVHlwZXNjcmlwdC9JR3Vlc3RPcmRlckRldGFpbHNWaWV3TW9kZWwudHMiLCJDb21wb3Nlci5DYXJ0LlVJL0ZpbmRNeU9yZGVyL1NvdXJjZS9UeXBlc2NyaXB0L0lGaW5kT3JkZXJTZXJ2aWNlLnRzIiwiQ29tcG9zZXIuQ2FydC5VSS9GaW5kTXlPcmRlci9Tb3VyY2UvVHlwZXNjcmlwdC9GaW5kT3JkZXJTZXJ2aWNlLnRzIiwiQ29tcG9zZXIuQ2FydC5VSS9GaW5kTXlPcmRlci9Tb3VyY2UvVHlwZXNjcmlwdC9JRmluZE15T3JkZXJWaWV3TW9kZWwudHMiLCJDb21wb3Nlci5DYXJ0LlVJL0ZpbmRNeU9yZGVyL1NvdXJjZS9UeXBlc2NyaXB0L0ZpbmRNeU9yZGVyQ29udHJvbGxlci50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0V2ZW50cy9JU2NoZWR1bGVkQ2FsbGJhY2sudHMiLCJDb21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9FdmVudHMvRXZlbnRTY2hlZHVsZXIudHMiLCJDb21wb3Nlci5DYXJ0LlVJL01pbmlDYXJ0L1NvdXJjZS9UeXBlc2NyaXB0L01pbmlDYXJ0Q29udHJvbGxlci50cyIsIkNvbXBvc2VyLkNhcnQuVUkvTWluaUNhcnQvU291cmNlL1R5cGVzY3JpcHQvTWluaUNhcnRTdW1tYXJ5Q29udHJvbGxlci50cyIsIkNvbXBvc2VyLkNhcnQuVUkvTW9uZXJpc1BheW1lbnRQcm92aWRlci9Tb3VyY2UvVHlwZXNjcmlwdC9JQ3JlYXRlVmF1bHRUb2tlbk9wdGlvbnMudHMiLCJDb21wb3Nlci5DYXJ0LlVJL01vbmVyaXNQYXltZW50UHJvdmlkZXIvU291cmNlL1R5cGVzY3JpcHQvSU1vbmVyaXNBZGRWYXVsdFByb2ZpbGVWaWV3TW9kZWwudHMiLCJDb21wb3Nlci5DYXJ0LlVJL01vbmVyaXNQYXltZW50UHJvdmlkZXIvU291cmNlL1R5cGVzY3JpcHQvSU1vbmVyaXNSZXNwb25zZURhdGEudHMiLCJDb21wb3Nlci5DYXJ0LlVJL01vbmVyaXNQYXltZW50UHJvdmlkZXIvU291cmNlL1R5cGVzY3JpcHQvSVNldERlZmF1bHRDdXN0b21lclBheW1lbnRNZXRob2RWaWV3TW9kZWwudHMiLCJDb21wb3Nlci5DYXJ0LlVJL01vbmVyaXNQYXltZW50UHJvdmlkZXIvU291cmNlL1R5cGVzY3JpcHQvTW9uZXJpc1BheW1lbnRTZXJ2aWNlLnRzIiwiQ29tcG9zZXIuQ2FydC5VSS9Nb25lcmlzUGF5bWVudFByb3ZpZGVyL1NvdXJjZS9UeXBlc2NyaXB0L1Byb3ZpZGVycy9CYXNlU3BlY2lhbGl6ZWRNb25lcmlzQ2FuYWRhUGF5bWVudFByb3ZpZGVyLnRzIiwiQ29tcG9zZXIuQ2FydC5VSS9Nb25lcmlzUGF5bWVudFByb3ZpZGVyL1NvdXJjZS9UeXBlc2NyaXB0L1Byb3ZpZGVycy9DcmVkaXRDYXJkTW9uZXJpc0NhbmFkYVBheW1lbnRQcm92aWRlci50cyIsIkNvbXBvc2VyLkNhcnQuVUkvTW9uZXJpc1BheW1lbnRQcm92aWRlci9Tb3VyY2UvVHlwZXNjcmlwdC9Qcm92aWRlcnMvU2F2ZWRDcmVkaXRDYXJkTW9uZXJpc0NhbmFkYVBheW1lbnRQcm92aWRlci50cyIsIkNvbXBvc2VyLkNhcnQuVUkvTW9uZXJpc1BheW1lbnRQcm92aWRlci9Tb3VyY2UvVHlwZXNjcmlwdC9Nb25lcmlzQ2FuYWRhUGF5bWVudFByb3ZpZGVyLnRzIiwiQ29tcG9zZXIuQ2FydC5VSS9PblNpdGVQYXltZW50UHJvdmlkZXIvU291cmNlL1R5cGVzY3JpcHQvT25TaXRlUE9TUGF5bWVudFByb3ZpZGVyLnRzIiwiQ29tcG9zZXIuQ2FydC5VSS9PcmRlckRldGFpbHMvU291cmNlL1R5cGVzY3JpcHQvT3JkZXJEZXRhaWxzQ29udHJvbGxlci50cyIsIkNvbXBvc2VyLkNhcnQuVUkvT3JkZXJIaXN0b3J5L1NvdXJjZS9UeXBlc2NyaXB0L1BhcmFtZXRlcnMvSUdldE9yZGVyUGFyYW1ldGVycy50cyIsIkNvbXBvc2VyLkNhcnQuVUkvT3JkZXJIaXN0b3J5L1NvdXJjZS9UeXBlc2NyaXB0L1NlcnZpY2VzL09yZGVyU2VydmljZS50cyIsIkNvbXBvc2VyLkNhcnQuVUkvT3JkZXJIaXN0b3J5L1NvdXJjZS9UeXBlc2NyaXB0L0N1cnJlbnRPcmRlcnNDb250cm9sbGVyLnRzIiwiQ29tcG9zZXIuQ2FydC5VSS9PcmRlckhpc3RvcnkvU291cmNlL1R5cGVzY3JpcHQvUGFzdE9yZGVyc0NvbnRyb2xsZXIudHMiLCJDb21wb3Nlci5DYXJ0LlVJL09yZGVyU3VtbWFyeS9Tb3VyY2UvVHlwZXNjcmlwdC9PcmRlclN1bW1hcnlTZXJ2aWNlLnRzIiwiQ29tcG9zZXIuQ2FydC5VSS9PcmRlclN1bW1hcnkvU291cmNlL1R5cGVzY3JpcHQvT3JkZXJTdW1tYXJ5Q29udHJvbGxlci50cyIsIkNvbXBvc2VyLkNhcnQuVUkvV2lzaExpc3QvU291cmNlL1R5cGVzY3JpcHQvSVdpc2hMaXN0UmVwb3NpdG9yeS50cyIsIkNvbXBvc2VyLkNhcnQuVUkvV2lzaExpc3QvU291cmNlL1R5cGVzY3JpcHQvV2lzaExpc3RSZXBvc2l0b3J5LnRzIiwiQ29tcG9zZXIuTXlBY2NvdW50LlVJL0FjY291bnRIZWFkZXIvU291cmNlL1R5cGVzY3JpcHQvQWNjb3VudEhlYWRlckNvbnRyb2xsZXIudHMiLCJDb21wb3Nlci5NeUFjY291bnQuVUkvTXlBY2NvdW50L1NvdXJjZS9UeXBlc2NyaXB0L015QWNjb3VudENvbnRyb2xsZXIudHMiLCJDb21wb3Nlci5NeUFjY291bnQuVUkvQWRkcmVzc0xpc3QvU291cmNlL1R5cGVzY3JpcHQvQWRkcmVzc0xpc3RDb250cm9sbGVyLnRzIiwiQ29tcG9zZXIuTXlBY2NvdW50LlVJL0NoYW5nZVBhc3N3b3JkL1NvdXJjZS9UeXBlc2NyaXB0L0NoYW5nZVBhc3N3b3JkQ29udHJvbGxlci50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L1V0aWxzL1VybEhlbHBlci50cyIsIkNvbXBvc2VyLk15QWNjb3VudC5VSS9DcmVhdGVBY2NvdW50L1NvdXJjZS9UeXBlc2NyaXB0L0NyZWF0ZUFjY291bnRDb250cm9sbGVyLnRzIiwiQ29tcG9zZXIuTXlBY2NvdW50LlVJL0VkaXRBZGRyZXNzL1NvdXJjZS9UeXBlc2NyaXB0L0VkaXRBZGRyZXNzQ29udHJvbGxlci50cyIsIkNvbXBvc2VyLk15QWNjb3VudC5VSS9Gb3Jnb3RQYXNzd29yZC9Tb3VyY2UvVHlwZXNjcmlwdC9Gb3Jnb3RQYXNzd29yZENvbnRyb2xsZXIudHMiLCJDb21wb3Nlci5NeUFjY291bnQuVUkvTmV3UGFzc3dvcmQvU291cmNlL1R5cGVzY3JpcHQvTmV3UGFzc3dvcmRDb250cm9sbGVyLnRzIiwiQ29tcG9zZXIuTXlBY2NvdW50LlVJL1JldHVybmluZ0N1c3RvbWVyL1NvdXJjZS9UeXBlc2NyaXB0L1JldHVybmluZ0N1c3RvbWVyQ29udHJvbGxlci50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L1JlcG9zaXRvcmllcy9JU2lnbkluSGVhZGVyUmVwb3NpdG9yeS50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L1JlcG9zaXRvcmllcy9TaWduSW5IZWFkZXJSZXBvc2l0b3J5LnRzIiwiQ29tcG9zZXIuTXlBY2NvdW50LlVJL1NpZ25JbkhlYWRlci9Tb3VyY2UvVHlwZXNjcmlwdC9TaWduSW5IZWFkZXJTZXJ2aWNlLnRzIiwiQ29tcG9zZXIuTXlBY2NvdW50LlVJL1NpZ25JbkhlYWRlci9Tb3VyY2UvVHlwZXNjcmlwdC9TaWduSW5IZWFkZXJDb250cm9sbGVyLnRzIiwiQ29tcG9zZXIuTXlBY2NvdW50LlVJL1VwZGF0ZUFjY291bnQvU291cmNlL1R5cGVzY3JpcHQvVXBkYXRlQWNjb3VudENvbnRyb2xsZXIudHMiLCJDb21wb3Nlci5DYXJ0LlVJL1dpc2hMaXN0L1NvdXJjZS9UeXBlc2NyaXB0L1NlcnZpY2VzL0lXaXNoTGlzdFNlcnZpY2UudHMiLCJDb21wb3Nlci5DYXJ0LlVJL1dpc2hMaXN0L1NvdXJjZS9UeXBlc2NyaXB0L1NlcnZpY2VzL1dpc2hMaXN0U2VydmljZS50cyIsIkNvbXBvc2VyLk15QWNjb3VudC5VSS9XaXNoTGlzdC9Tb3VyY2UvVHlwZXNjcmlwdC9XaXNoTGlzdENvbnRyb2xsZXIudHMiLCJDb21wb3Nlci5NeUFjY291bnQuVUkvV2lzaExpc3QvU291cmNlL1R5cGVzY3JpcHQvTXlXaXNoTGlzdENvbnRyb2xsZXIudHMiLCJDb21wb3Nlci5NeUFjY291bnQuVUkvV2lzaExpc3QvU291cmNlL1R5cGVzY3JpcHQvV2lzaExpc3RJbkhlYWRlckNvbnRyb2xsZXIudHMiLCJDb21wb3Nlci5NeUFjY291bnQuVUkvV2lzaExpc3RTaGFyZWQvU291cmNlL1R5cGVzY3JpcHQvU2hhcmVkV2lzaExpc3RDb250cm9sbGVyLnRzIiwiQ29tcG9zZXIuUHJvZHVjdC5VSS9SZWxhdGVkUHJvZHVjdHMvU291cmNlL1R5cGVzY3JpcHQvUHJvZHVjdElkZW50aWZpZXJEdG8udHMiLCJDb21wb3Nlci5Qcm9kdWN0LlVJL1Byb2R1Y3QvU291cmNlL1R5cGVzY3JpcHQvSUludmVudG9yeVNlcnZpY2UudHMiLCJDb21wb3Nlci5Qcm9kdWN0LlVJL1Byb2R1Y3QvU291cmNlL1R5cGVzY3JpcHQvSW52ZW50b3J5U2VydmljZS50cyIsIkNvbXBvc2VyLlByb2R1Y3QuVUkvUHJvZHVjdC9Tb3VyY2UvVHlwZXNjcmlwdC9JUHJvZHVjdFNlcnZpY2UudHMiLCJDb21wb3Nlci5Qcm9kdWN0LlVJL1Byb2R1Y3QvU291cmNlL1R5cGVzY3JpcHQvS2V5VmFyaWFudEF0dHJpYnV0ZUl0ZW1zQnVpbGRlci50cyIsIkNvbXBvc2VyLlByb2R1Y3QuVUkvUHJvZHVjdC9Tb3VyY2UvVHlwZXNjcmlwdC9Qcm9kdWN0U2VydmljZS50cyIsIkNvbXBvc2VyLlByb2R1Y3QuVUkvUHJvZHVjdC9Tb3VyY2UvVHlwZXNjcmlwdC9Qcm9kdWN0Rm9ybWF0dGVyLnRzIiwiQ29tcG9zZXIuUHJvZHVjdC5VSS9Qcm9kdWN0L1NvdXJjZS9UeXBlc2NyaXB0L1Byb2R1Y3RDb250cm9sbGVyLnRzIiwiQ29tcG9zZXIuUHJvZHVjdC5VSS9Qcm9kdWN0RGV0YWlsL1NvdXJjZS9UeXBlc2NyaXB0L1Byb2R1Y3REZXRhaWxDb250cm9sbGVyLnRzIiwiQ29tcG9zZXIuUHJvZHVjdC5VSS9Qcm9kdWN0RGV0YWlsL1NvdXJjZS9UeXBlc2NyaXB0L1Byb2R1Y3Rab29tQ29udHJvbGxlci50cyIsIkNvbXBvc2VyLlByb2R1Y3QuVUkvUHJvZHVjdFNlYXJjaC9Tb3VyY2UvVHlwZXNjcmlwdC9JRmFjZXQudHMiLCJDb21wb3Nlci5Qcm9kdWN0LlVJL1Byb2R1Y3RTZWFyY2gvU291cmNlL1R5cGVzY3JpcHQvSVNlbGVjdGVkRmFjZXQudHMiLCJDb21wb3Nlci5Qcm9kdWN0LlVJL1Byb2R1Y3RTZWFyY2gvU291cmNlL1R5cGVzY3JpcHQvSVNlYXJjaENyaXRlcmlhT3B0aW9ucy50cyIsIkNvbXBvc2VyLlByb2R1Y3QuVUkvUHJvZHVjdFNlYXJjaC9Tb3VyY2UvVHlwZXNjcmlwdC9TZWFyY2hDcml0ZXJpYS50cyIsIkNvbXBvc2VyLlByb2R1Y3QuVUkvUHJvZHVjdFNlYXJjaC9Tb3VyY2UvVHlwZXNjcmlwdC9TZXJ2aWNlcy9JU2VhcmNoU2VydmljZS50cyIsIkNvbXBvc2VyLlByb2R1Y3QuVUkvUHJvZHVjdFNlYXJjaC9Tb3VyY2UvVHlwZXNjcmlwdC9JU2luZ2xlU2VsZWN0Q2F0ZWdvcnkudHMiLCJDb21wb3Nlci5Qcm9kdWN0LlVJL1Byb2R1Y3RTZWFyY2gvU291cmNlL1R5cGVzY3JpcHQvU2VydmljZXMvU2VhcmNoU2VydmljZS50cyIsIkNvbXBvc2VyLlByb2R1Y3QuVUkvUHJvZHVjdFNlYXJjaC9Tb3VyY2UvVHlwZXNjcmlwdC9TZXJ2aWNlcy9TbGlkZXJTZXJ2aWNlLnRzIiwiQ29tcG9zZXIuUHJvZHVjdC5VSS9Qcm9kdWN0U2VhcmNoL1NvdXJjZS9UeXBlc2NyaXB0L1VybEhlbHBlci50cyIsIkNvbXBvc2VyLlByb2R1Y3QuVUkvUHJvZHVjdFNlYXJjaC9Tb3VyY2UvVHlwZXNjcmlwdC9GYWNldFNlYXJjaENvbnRyb2xsZXIudHMiLCJDb21wb3Nlci5Qcm9kdWN0LlVJL1Byb2R1Y3RTZWFyY2gvU291cmNlL1R5cGVzY3JpcHQvSVF1aWNrVmlld0NvbnRyb2xsZXIudHMiLCJDb21wb3Nlci5Qcm9kdWN0LlVJL1Byb2R1Y3RTZWFyY2gvU291cmNlL1R5cGVzY3JpcHQvUHJvZHVjdFNlYXJjaENvbnRyb2xsZXIudHMiLCJDb21wb3Nlci5Qcm9kdWN0LlVJL1Byb2R1Y3RTZWFyY2gvU291cmNlL1R5cGVzY3JpcHQvUXVpY2tWaWV3Q29udHJvbGxlci50cyIsIkNvbXBvc2VyLlByb2R1Y3QuVUkvUHJvZHVjdFNlYXJjaC9Tb3VyY2UvVHlwZXNjcmlwdC9TZWFyY2hSZXN1bHRzQ29udHJvbGxlci50cyIsIkNvbXBvc2VyLlByb2R1Y3QuVUkvUHJvZHVjdFNlYXJjaC9Tb3VyY2UvVHlwZXNjcmlwdC9TZWFyY2hTdW1tYXJ5Q29udHJvbGxlci50cyIsIkNvbXBvc2VyLlByb2R1Y3QuVUkvUHJvZHVjdFNlYXJjaC9Tb3VyY2UvVHlwZXNjcmlwdC9TZWxlY3RlZEZhY2V0U2VhcmNoQ29udHJvbGxlci50cyIsIkNvbXBvc2VyLlByb2R1Y3QuVUkvUHJvZHVjdFNlYXJjaC9Tb3VyY2UvVHlwZXNjcmlwdC9Tb3J0QnlTZWFyY2hDb250cm9sbGVyLnRzIiwiQ29tcG9zZXIuUHJvZHVjdC5VSS9Qcm9kdWN0U3BlY2lmaWNhdGlvbi9Tb3VyY2UvVHlwZXNjcmlwdC9Qcm9kdWN0U3BlY2lmaWNhdGlvbnNTZXJ2aWNlLnRzIiwiQ29tcG9zZXIuUHJvZHVjdC5VSS9Qcm9kdWN0U3BlY2lmaWNhdGlvbi9Tb3VyY2UvVHlwZXNjcmlwdC9Qcm9kdWN0U3BlY2lmaWNhdGlvbnNDb250cm9sbGVyLnRzIiwiQ29tcG9zZXIuUHJvZHVjdC5VSS9SZWxhdGVkUHJvZHVjdHMvU291cmNlL1R5cGVzY3JpcHQvUmVsYXRlZFByb2R1Y3RDYXJvdXNlbC5qcyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L1BsdWdpbnMvU2xpY2tDYXJvdXNlbFBsdWdpbi50cyIsIkNvbXBvc2VyLlByb2R1Y3QuVUkvUmVsYXRlZFByb2R1Y3RzL1NvdXJjZS9UeXBlc2NyaXB0L1JlbGF0ZWRQcm9kdWN0c0NvbnRyb2xsZXIudHMiLCJDb21wb3Nlci5TdG9yZS5VSS9TdG9yZUxvY2F0b3IvU291cmNlL1R5cGVzY3JpcHQvU2VydmljZXMvR2VvTG9jYXRpb25TZXJ2aWNlLnRzIiwiQ29tcG9zZXIuU3RvcmUuVUkvU3RvcmVEaXJlY3RvcnkvU291cmNlL1R5cGVzY3JpcHQvU3RvcmVzRGlyZWN0b3J5Q29udHJvbGxlci50cyIsIkNvbXBvc2VyLlN0b3JlLlVJL1N0b3JlSW52ZW50b3J5L1NvdXJjZS9UeXBlc2NyaXB0L1NlcnZpY2VzL0dldFN0b3Jlc0ludmVudG9yeVBhcmFtLnRzIiwiQ29tcG9zZXIuU3RvcmUuVUkvU3RvcmVJbnZlbnRvcnkvU291cmNlL1R5cGVzY3JpcHQvU2VydmljZXMvSVN0b3JlSW52ZW50b3J5U2VydmljZS50cyIsIkNvbXBvc2VyLlN0b3JlLlVJL1N0b3JlSW52ZW50b3J5L1NvdXJjZS9UeXBlc2NyaXB0L1NlcnZpY2VzL1N0b3JlSW52ZW50b3J5U2VydmljZS50cyIsIkNvbXBvc2VyLlN0b3JlLlVJL1N0b3JlSW52ZW50b3J5L1NvdXJjZS9UeXBlc2NyaXB0L1N0b3JlSW52ZW50b3J5Q29udHJvbGxlci50cyIsIkNvbXBvc2VyLlN0b3JlLlVJL1N0b3JlTG9jYXRvci9Tb3VyY2UvVHlwZXNjcmlwdC9JTWFwT3B0aW9ucy50cyIsIkNvbXBvc2VyLlN0b3JlLlVJL1N0b3JlTG9jYXRvci9Tb3VyY2UvVHlwZXNjcmlwdC9JU3RvcmVMb2NhdG9ySW5pdGlhbGl6YXRpb25PcHRpb25zLnRzIiwiQ29tcG9zZXIuU3RvcmUuVUkvU3RvcmVMb2NhdG9yL1NvdXJjZS9UeXBlc2NyaXB0L01hcmtlci50cyIsIkNvbXBvc2VyLlN0b3JlLlVJL1N0b3JlTG9jYXRvci9Tb3VyY2UvVHlwZXNjcmlwdC9NYXJrZXJQb29sLnRzIiwiQ29tcG9zZXIuU3RvcmUuVUkvU3RvcmVMb2NhdG9yL1NvdXJjZS9UeXBlc2NyaXB0L01hcFNlcnZpY2UudHMiLCJDb21wb3Nlci5TdG9yZS5VSS9TdG9yZUxvY2F0b3IvU291cmNlL1R5cGVzY3JpcHQvU3RvcmVEZXRhaWxzQ29udHJvbGxlci50cyIsIkNvbXBvc2VyLlN0b3JlLlVJL1N0b3JlTG9jYXRvci9Tb3VyY2UvVHlwZXNjcmlwdC9TZXJ2aWNlcy9JU3RvcmVMb2NhdG9yU2VydmljZS50cyIsIkNvbXBvc2VyLlN0b3JlLlVJL1N0b3JlTG9jYXRvci9Tb3VyY2UvVHlwZXNjcmlwdC9TZXJ2aWNlcy9TdG9yZUxvY2F0b3JFbmRQb2ludFVybHMudHMiLCJDb21wb3Nlci5TdG9yZS5VSS9TdG9yZUxvY2F0b3IvU291cmNlL1R5cGVzY3JpcHQvU2VydmljZXMvU3RvcmVMb2NhdG9yU2VydmljZS50cyIsIkNvbXBvc2VyLlN0b3JlLlVJL1N0b3JlTG9jYXRvci9Tb3VyY2UvVHlwZXNjcmlwdC9TdG9yZUxvY2F0b3JIaXN0b3J5U3RhdGUudHMiLCJDb21wb3Nlci5TdG9yZS5VSS9TdG9yZUxvY2F0b3IvU291cmNlL1R5cGVzY3JpcHQvU3RvcmVMb2NhdG9yQ29udHJvbGxlci50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0hhbmRsZWJhcnMvSGVscGVycy9Fc2NhcGVIZWxwZXIudHMiLCJDb21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9IYW5kbGViYXJzL0hlbHBlcnMvSWZFcXVhbHNIZWxwZXIudHMiLCJDb21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9IYW5kbGViYXJzL0hlbHBlcnMvSWZFeGlzdHNIZWxwZXIudHMiLCJDb21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9IYW5kbGViYXJzL0hlbHBlcnMvSWZHcmVhdGVyVGhhbkhlbHBlci50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0hhbmRsZWJhcnMvSGVscGVycy9JZkdyZWF0ZXJUaGFuT3JFcXVhbEhlbHBlci50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0hhbmRsZWJhcnMvSGVscGVycy9JZkxlc3NUaGFuSGVscGVyLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvSGFuZGxlYmFycy9IZWxwZXJzL0lmTGVzc1RoYW5PckVxdWFsSGVscGVyLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvSGFuZGxlYmFycy9IZWxwZXJzL0lIYW5kbGViYXJzTG9jYWxpemF0aW9uLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvSGFuZGxlYmFycy9IZWxwZXJzL0lmTG9jYWxpemVkSGVscGVyLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvSGFuZGxlYmFycy9IZWxwZXJzL0lmTm90RXF1YWxzSGVscGVyLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvSGFuZGxlYmFycy9IZWxwZXJzL0xvY2FsaXplRm9ybWF0SGVscGVyLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvSGFuZGxlYmFycy9IZWxwZXJzL0xvY2FsaXplSGVscGVyLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvTXZjL0V4Y2VwdGlvbnMvQ29udHJvbGxlckFscmVhZHlSZWdpc3RlcmVkRXhjZXB0aW9uLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvTXZjL0V4Y2VwdGlvbnMvTWlzc2luZ0NvbnRyb2xsZXJEaXNwYXRjaGVyTmFtZUV4Y2VwdGlvbi50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L012Yy9Db250cm9sbGVyUmVnaXN0cnkudHMiLCJDb21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9NdmMvSUNyZWF0ZUNvbnRyb2xsZXJPcHRpb25zLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvTXZjL0NvbnRyb2xsZXJGYWN0b3J5LnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvVmFsaWRhdGlvbi9JUGFyc2xleVZhbGlkYXRvci5qcyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0NvbXBvc2VyQ29udGV4dC50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0Jvb3RzdHJhcC50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0pRdWVyeVBsdWdpbnMvSVBvcE92ZXJKcXVlcnlQbHVnaW4udHMiLCJDb21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9Db250cm9sbGVyL1NlYXJjaEJveENvbnRyb2xsZXIudHMiLCJDb21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9Db250cm9sbGVyL1BhZ2VOb3RGb3VuZEFuYWx5dGljc0NvbnRyb2xsZXIudHMiLCJDb21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9Db250cm9sbGVyL0xhbmd1YWdlU3dpdGNoQ29udHJvbGxlci50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0Vycm9ySGFuZGxpbmcvRXJyb3JDb250cm9sbGVyLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvQXBwLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvUGx1Z2lucy9BbnRpSUZyYW1lQ2xpY2tKYWNraW5nUGx1Z2luLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvUGx1Z2lucy9Db21wb3NlclZhbGlkYXRpb25QbHVnaW4udHMiLCJDb21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9QbHVnaW5zL0ZvY3VzRWxlbWVudFBsdWdpbi50cyIsIkNvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L1BsdWdpbnMvSGVscEJ1YmJsZXNQbHVnaW4udHMiLCJDb21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9QbHVnaW5zL1N0aWNreUFmZml4UGx1Z2luLnRzIiwiQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvTXZjL0lDb250cm9sbGVyQWN0aW9uU2lnbmF0dXJlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQVVDOztBQ0FBOztBQ1ZELHVDQUF1QztBQU10QztBQ1VBOztBQ1RBOztBQ1BELDJDQUEyQztBQUMzQyx1Q0FBdUM7QUFDdkMsNENBQTRDO0FBQzVDLCtDQUErQztBQUMvQyw4REFBOEQ7QUF1QjdEO0FDM0JELDJDQUEyQztBQUMzQyx1Q0FBdUM7QUFDdkMsNENBQTRDO0FBQzVDLCtDQUErQztBQUMvQyx1Q0FBdUM7QUFDdkMsOERBQThEO0FBRTlELElBQU8sU0FBUyxDQStEZjtBQS9ERCxXQUFPLFNBQVM7SUFBQyxJQUFBLFFBQVEsQ0ErRHhCO0lBL0RnQixXQUFBLFFBQVEsRUFBQyxDQUFDO1FBQ3ZCOztVQUVFO1FBQ0Y7WUFRSTtnQkFQUSxZQUFPLEdBQXFFLEVBQUUsQ0FBQztnQkFRbkYsRUFBRSxDQUFDLENBQUMsUUFBUSxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUM7b0JBQ3JCLE1BQU0sSUFBSSxLQUFLLENBQUMsc0VBQXNFLENBQUMsQ0FBQztnQkFDNUYsQ0FBQztnQkFFRCxRQUFRLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQztZQUM5QixDQUFDO1lBVmEsaUJBQVEsR0FBdEI7Z0JBQ0ksTUFBTSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUM7WUFDOUIsQ0FBQztZQVVEOzs7OztjQUtFO1lBQ0YsNEJBQVMsR0FBVCxVQUFVLFNBQWlCLEVBQUUsUUFBbUI7Z0JBQWhELGlCQWdCQztnQkFmRyxJQUFJLEtBQWEsQ0FBQztnQkFFbEIsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLGNBQWMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUM7b0JBQzFDLElBQUksQ0FBQyxPQUFPLENBQUMs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QU8sU0FBUyxDQVNmO0FBVEQsV0FBTyxTQUFTO0lBQUMsSUFBQSxRQUFRLENBU3hCO0lBVGdCLFdBQUEsUUFBUSxFQUFDLENBQUM7UUFDdkIsWUFBWSxDQUFDO0lBUWpCLENBQUMsRUFUZ0IsUUFBUSxHQUFSLGtCQUFRLEtBQVIsa0JBQVEsUUFTeEI7QUFBRCxDQUFDLEVBVE0sU0FBUyxLQUFULFNBQVMsUUFTZiIsImZpbGUiOiJvcmNrZXN0cmEuY29tcG9zZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIC8qKlxyXG4gICAgICogQSBob29rIHRoYXQgYWxsb3dzIGEgbGlzdGVuZXIgdG8gdW5zdWJzY3JpYmUgZnJvbSBhbiBldmVudC5cclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJU3Vic2NyaXB0aW9uIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZW1vdmVzIGEgbGlzdGVuZXIgZnJvbSBhbiBldmVudC5cclxuICAgICAgICAgKi9cclxuICAgICAgICByZW1vdmUoKTogdm9pZDtcclxuICAgIH1cclxufVxyXG4iLCJtb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIC8qKlxyXG4gICAgICogQSBsaXN0ZW5lciB0aGF0IGNhbiBzdWJzY3JpYmUgdG8gYW4gZXZlbnQuXHJcbiAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJTGlzdGVuZXIge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFNpZ25hdHVyZSBmb3IgYSBsaXN0ZW5lciB0aGF0IGlzIHN1YnNjcmliZWQgdG8gYW4gZXZlbnQuXHJcbiAgICAgICAgKi9cclxuICAgICAgICAoZXZlbnRJbmZvcm1hdGlvbjogSUV2ZW50SW5mb3JtYXRpb24pOiB2b2lkO1xyXG4gICAgfVxyXG59XHJcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4vSUxpc3RlbmVyLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElMaXN0ZW5lclF1ZXVlIHtcclxuICAgICAgICBxdWV1ZTogSUxpc3RlbmVyW107XHJcbiAgICB9XHJcbn1cclxuIiwibW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAvKipcclxuICAgICAqIEluZm9ybWF0aW9uIHRoYXQgYW4gZXZlbnQgcHVibGlzaGVzIHRvIGl0cyBzdWJzY3JpYmVycy5cclxuICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElFdmVudEluZm9ybWF0aW9uIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgZGF0YSB0aGF0IGFuIGV2ZW50IGlzIHB1Ymxpc2hpbmcgdG8gaXRzIHN1YnNjcmliZXJzLlxyXG4gICAgICAgICovXHJcbiAgICAgICAgZGF0YTogYW55OyAvLyBubyBjaG9pY2UgYnV0IHVzaW5nLiBFdmVudHMgdGhhdCBwdWJsaXNoIG1heSBjb250YWluIGRpZmZlcmVudCBkYXRhIHRvIHByb3ZpZGUgdG8gdGhlaXIgc3Vic2NyaWJlcnNcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU291cmNlIGZyb20gd2hpY2ggdGhlIGRhdGEgb3JpZ2luYXRlcy4gKE9wdGlvbmFsKVxyXG4gICAgICAgICAqIEB0eXBlIHtzdHJpbmd9XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgc291cmNlPzogc3RyaW5nO1xyXG4gICAgfVxyXG59XHJcbiIsIm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgLypcclxuICAgICogQSBnZW5lcmljIGhhc2h0YWJsZVxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElIYXNoVGFibGU8VD4ge1xyXG4gICAgICAgIFtrZXk6IHN0cmluZ106IFQ7XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi9JU3Vic2NyaXB0aW9uLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuL0lMaXN0ZW5lci50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi9JTGlzdGVuZXJRdWV1ZS50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi9JRXZlbnRJbmZvcm1hdGlvbi50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vR2VuZXJpY3MvQ29sbGVjdGlvbnMvSUhhc2hUYWJsZS50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKiBBbiBldmVudCBodWIgZm9yIHN1YnNjcmliaW5nIHRvIGFuZCBwdWJsaXNoaW5nIGV2ZW50cy5cclxuICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElFdmVudEh1YiB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU3Vic2NyaWJlIHRvIGFuIGV2ZW50LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50TmFtZSBUaGUgbmFtZSBvZiB0aGUgZXZlbnQgdG8gc3Vic2NyaWJlIHRvLlxyXG4gICAgICAgICAqIEBwYXJhbSBsaXN0ZW5lciBUaGUgbGlzdGVuZXIgc3Vic2NyaWJpbmcgdG8gdGhlIGV2ZW50LlxyXG4gICAgICAgICovXHJcbiAgICAgICAgc3Vic2NyaWJlKGV2ZW50TmFtZTogc3RyaW5nLCBsaXN0ZW5lcjogSUxpc3RlbmVyKTogSVN1YnNjcmlwdGlvbjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUHVibGlzaGVzIGFuIGV2ZW50LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50TmFtZSBUaGUgbmFtZSBvZiB0aGUgZXZlbnQgdG8gc3Vic2NyaWJlIHRvLlxyXG4gICAgICAgICAqIEBwYXJhbSBldmVudEluZm9ybWF0aW9uIFRoZSBpbmZvcm1hdGlvbiB0byBwcm92aWRlIGFsbCBzdWJzY3JpYmVycyB3aGVuIHRoZSBldmVudCBpcyBwdWJsaXNoZWQuXHJcbiAgICAgICAgKi9cclxuICAgICAgICBwdWJsaXNoKGV2ZW50TmFtZTogc3RyaW5nLCBldmVudEluZm9ybWF0aW9uOiBJRXZlbnRJbmZvcm1hdGlvbik6IHZvaWQ7XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi9JU3Vic2NyaXB0aW9uLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuL0lMaXN0ZW5lci50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi9JTGlzdGVuZXJRdWV1ZS50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi9JRXZlbnRJbmZvcm1hdGlvbi50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi9JRXZlbnRIdWIudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uL0dlbmVyaWNzL0NvbGxlY3Rpb25zL0lIYXNoVGFibGUudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIC8qKlxyXG4gICAgICogQW4gZXZlbnQgaHViIGZvciBzdWJzY3JpYmluZyB0byBhbmQgcHVibGlzaGluZyBldmVudHMuXHJcbiAgICAqL1xyXG4gICAgZXhwb3J0IGNsYXNzIEV2ZW50SHViIGltcGxlbWVudHMgT3Jja2VzdHJhLkNvbXBvc2VyLklFdmVudEh1YiB7XHJcbiAgICAgICAgcHJpdmF0ZSBfZXZlbnRzOiBPcmNrZXN0cmEuQ29tcG9zZXIuSUhhc2hUYWJsZTxPcmNrZXN0cmEuQ29tcG9zZXIuSUxpc3RlbmVyUXVldWU+ID0ge307XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgX2luc3RhbmNlOiBPcmNrZXN0cmEuQ29tcG9zZXIuSUV2ZW50SHViID0gbmV3IEV2ZW50SHViKCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgaW5zdGFuY2UoKTogT3Jja2VzdHJhLkNvbXBvc2VyLklFdmVudEh1YiB7XHJcbiAgICAgICAgICAgIHJldHVybiBFdmVudEh1Yi5faW5zdGFuY2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICAgICAgaWYgKEV2ZW50SHViLl9pbnN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvcjogSW5zdGFudGlhdGlvbiBmYWlsZWQ6IFVzZSBFdmVudEh1Yi5pbnN0YW5jZSgpIGluc3RlYWQgb2YgbmV3LicpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBFdmVudEh1Yi5faW5zdGFuY2UgPSB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU3Vic2NyaWJlIHRvIGFuIGV2ZW50LlxyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGV2ZW50TmFtZSBUaGUgbmFtZSBvZiB0aGUgZXZlbnQgdG8gc3Vic2NyaWJlIHRvLlxyXG4gICAgICAgICAqIEBwYXJhbSBsaXN0ZW5lciBUaGUgbGlzdGVuZXIgc3Vic2NyaWJpbmcgdG8gdGhlIGV2ZW50LlxyXG4gICAgICAgICovXHJcbiAgICAgICAgc3Vic2NyaWJlKGV2ZW50TmFtZTogc3RyaW5nLCBsaXN0ZW5lcjogSUxpc3RlbmVyKTogSVN1YnNjcmlwdGlvbiB7XHJcbiAgICAgICAgICAgIHZhciBpbmRleDogbnVtYmVyO1xyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLl9ldmVudHMuaGFzT3duUHJvcGVydHkoZXZlbnROYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZXZlbnRzW2V2ZW50TmFtZV0gPSB7IHF1ZXVlOiBbXSB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpbmRleCA9IHRoaXMuX2V2ZW50c1tldmVudE5hbWVdLnF1ZXVlLnB1c2gobGlzdGVuZXIpIC0gMTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiAoKHRvcGljLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICByZW1vdmU6ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMuX2V2ZW50c1tldmVudE5hbWVdLnF1ZXVlW2luZGV4XTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9KShldmVudE5hbWUsIGluZGV4KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFB1Ymxpc2hlcyBhbiBldmVudC5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBldmVudE5hbWUgVGhlIG5hbWUgb2YgdGhlIGV2ZW50IHRvIHN1YnNjcmliZSB0by5cclxuICAgICAgICAgKiBAcGFyYW0gZXZlbnRJbmZvcm1hdGlvbiBUaGUgaW5mb3JtYXRpb24gdG8gcHJvdmlkZSBhbGwgc3Vic2NyaWJlcnMgd2hlbiB0aGUgZXZlbnQgaXMgcHVibGlzaGVkLlxyXG4gICAgICAgICovXHJcbiAgICAgICAgcHVibGlzaChldmVudE5hbWU6IHN0cmluZywgZXZlbnRJbmZvcm1hdGlvbjogSUV2ZW50SW5mb3JtYXRpb24pOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLl9ldmVudHMuaGFzT3duUHJvcGVydHkoZXZlbnROYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9ldmVudHNbZXZlbnROYW1lXS5xdWV1ZS5mb3JFYWNoKGZ1bmN0aW9uIChsaXN0ZW5lcjogSUxpc3RlbmVyKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGxpc3RlbmVyICE9PSB2b2lkIDApIHtcclxuICAgICAgICAgICAgICAgICAgICBsaXN0ZW5lcihldmVudEluZm9ybWF0aW9uKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJQW5hbHl0aWNzUHJvZHVjdCB7XHJcbiAgICAgICAgaWQ/OiBzdHJpbmc7XHJcbiAgICAgICAgbmFtZT86IHN0cmluZztcclxuICAgICAgICBwcmljZT86IG51bWJlcjtcclxuICAgICAgICBicmFuZD86IHN0cmluZztcclxuICAgICAgICBjYXRlZ29yeT86IHN0cmluZztcclxuICAgICAgICB2YXJpYW50Pzogc3RyaW5nO1xyXG4gICAgICAgIHF1YW50aXR5PzogbnVtYmVyO1xyXG4gICAgICAgIHBvc2l0aW9uPzogbnVtYmVyO1xyXG4gICAgICAgIGxpc3Q/OiBzdHJpbmc7XHJcbiAgICB9XHJcbn0iLCJtb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSUFuYWx5dGljc1NlYXJjaFJlc3VsdHMge1xyXG4gICAgICAgIFByb2R1Y3RTZWFyY2hSZXN1bHRzPzogYW55O1xyXG4gICAgICAgIGtleXdvcmRFbnRlcmVkPzogc3RyaW5nO1xyXG4gICAgICAgIGtleXdvcmRDb3JyZWN0ZWQ/OiBzdHJpbmc7XHJcbiAgICB9XHJcbn0iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4vSUFuYWx5dGljc1Byb2R1Y3QudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9JQW5hbHl0aWNzU2VhcmNoUmVzdWx0cy50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJQW5hbHl0aWNzUGx1Z2luIHtcclxuICAgICAgICBwcm9kdWN0SW1wcmVzc2lvbnMocHJvZHVjdHM6IElBbmFseXRpY3NQcm9kdWN0W10pOiB2b2lkO1xyXG4gICAgICAgIHByb2R1Y3RDbGljayhwcm9kdWN0OiBJQW5hbHl0aWNzUHJvZHVjdCwgbGlzdE5hbWU6IHN0cmluZyk6IHZvaWQ7XHJcbiAgICAgICAgcHJvZHVjdERldGFpbEltcHJlc3Npb25zKHByb2R1Y3RzOiBJQW5hbHl0aWNzUHJvZHVjdFtdLCBsaXN0TmFtZTogc3RyaW5nKTogdm9pZDtcclxuICAgICAgICBhZGRUb0NhcnQocHJvZHVjdDogSUFuYWx5dGljc1Byb2R1Y3QsIGxpc3ROYW1lOiBzdHJpbmcpOiB2b2lkO1xyXG4gICAgICAgIHJlbW92ZUZyb21DYXJ0KHByb2R1Y3Q6IElBbmFseXRpY3NQcm9kdWN0LCBsaXN0TmFtZTogc3RyaW5nKTogdm9pZDtcclxuICAgICAgICBjaGVja291dChzdGVwOiBudW1iZXIsIHRyYW5zYWN0aW9uOiBJQW5hbHl0aWNzVHJhbnNhY3Rpb24sIHByb2R1Y3RzOiBJQW5hbHl0aWNzUHJvZHVjdFtdKTogdm9pZDtcclxuICAgICAgICBjaGVja291dE9wdGlvbihzdGVwOiBudW1iZXIpOiB2b2lkO1xyXG4gICAgICAgIHNlYXJjaEtleXdvcmRDb3JyZWN0aW9uKHNlYXJjaFJlc3VsdHM6IElBbmFseXRpY3NTZWFyY2hSZXN1bHRzKTogdm9pZDtcclxuICAgICAgICBub1Jlc3VsdHNGb3VuZChrZXl3b3JkTm90Rm91bmQ6IHN0cmluZyk6IHZvaWQ7XHJcbiAgICAgICAgY291cG9uc1VzZWQob3JkZXI6IElBbmFseXRpY3NDb3Vwb24pOiB2b2lkO1xyXG4gICAgICAgIHB1cmNoYXNlKG9yZGVyOiBJQW5hbHl0aWNzT3JkZXIsIHRyYW5zYWN0aW9uOiBJQW5hbHl0aWNzVHJhbnNhY3Rpb24sIHByb2R1Y3RzOiBJQW5hbHl0aWNzUHJvZHVjdFtdKTogdm9pZDtcclxuICAgICAgICBzZW5kRXZlbnQoZXZlbnROYW1lOiBzdHJpbmcsIGNhdGVnb3J5OiBzdHJpbmcsIGFjdGlvbjogc3RyaW5nLCBsYWJlbD86IHN0cmluZywgdmFsdWU/OiBudW1iZXIpOiB2b2lkO1xyXG4gICAgICAgIHVzZXJMb2dnZWRJbih0eXBlOiBzdHJpbmcsIHNvdXJjZTogc3RyaW5nKTogdm9pZDtcclxuICAgICAgICB1c2VyQ3JlYXRlZCgpOiB2b2lkO1xyXG4gICAgICAgIHJlY292ZXJQYXNzd29yZCgpOiB2b2lkO1xyXG4gICAgfVxyXG59IiwibW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElBbmFseXRpY3NDb3Vwb24ge1xyXG4gICAgICAgIGNvZGU/OiBzdHJpbmc7XHJcbiAgICAgICAgZGlzY291bnRBbW91bnQ/OiBzdHJpbmc7XHJcbiAgICAgICAgY3VycmVuY3lDb2RlPzogc3RyaW5nO1xyXG4gICAgICAgIHByb21vdGlvbk5hbWU/OiBzdHJpbmc7XHJcbiAgICB9XHJcbn0iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4vSUFuYWx5dGljc0NvdXBvbi50cycgLz5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElBbmFseXRpY3NPcmRlciB7XHJcbiAgICAgICAgaWQ/OiBzdHJpbmc7XHJcbiAgICAgICAgYWZmaWxpYXRpb24/OiBzdHJpbmc7XHJcbiAgICAgICAgcmV2ZW51ZT86IHN0cmluZztcclxuICAgICAgICB0YXg/OiBzdHJpbmc7XHJcbiAgICAgICAgc2hpcHBpbmc/OiBzdHJpbmc7XHJcbiAgICAgICAgY3VycmVuY3lDb2RlPzogc3RyaW5nO1xyXG4gICAgICAgIGNvdXBvbj86IHN0cmluZztcclxuICAgIH1cclxufSIsIm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJQW5hbHl0aWNzVHJhbnNhY3Rpb24ge1xyXG4gICAgICAgIHNoaXBwaW5nVHlwZT86IHN0cmluZztcclxuICAgICAgICBjaGVja291dE9yaWdpbj86IHN0cmluZztcclxuICAgIH1cclxufSIsIm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJQW5hbHl0aWNzU2VhcmNoRmlsdGVycyB7XHJcbiAgICAgICAgZmFjZXRLZXk/OiBzdHJpbmc7XHJcbiAgICAgICAgZmFjZXRWYWx1ZT86IHN0cmluZztcclxuICAgICAgICBwYWdlVHlwZT86IHN0cmluZztcclxuICAgIH1cclxufSIsIm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJUGx1Z2luIHtcclxuICAgICAgICBpbml0aWFsaXplKHdpbmRvdzogV2luZG93LCBkb2N1bWVudDogSFRNTERvY3VtZW50KTogdm9pZDtcclxuICAgIH1cclxufVxyXG4iLCJtb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIC8qKlxyXG4gICAgICogUHJvdmlkZXMgYSBtZWNoYW5pc20gZm9yIHJlbGVhc2luZyBhbnkgcmVzb3VyY2VzLlxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElEaXNwb3NhYmxlIHtcclxuICAgICAgICBkaXNwb3NlKCk6IHZvaWQ7XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uL1N5c3RlbS9JRGlzcG9zYWJsZS50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJQ29udHJvbGxlciBleHRlbmRzIElEaXNwb3NhYmxlIHtcclxuICAgICAgICAvKlxyXG4gICAgICAgICAqIEluaXRpYWxpemVzIGEgdmlldyBjb250cm9sbGVyLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGluaXRpYWxpemUoKTogdm9pZDtcclxuXHJcbiAgICAgICAgLypcclxuICAgICAgICAgKiBEaXNwb3NlcyBhbnkgcmVzb3VyY2VzIHVzZWQgYnkgYSB2aWV3IGNvbnRyb2xsZXIuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZGlzcG9zZSgpOiB2b2lkO1xyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vVHlwaW5ncy90c2QuZC50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJQ29udHJvbGxlckNvbnRleHQge1xyXG4gICAgICAgIHRlbXBsYXRlTmFtZTogc3RyaW5nO1xyXG4gICAgICAgIGRhdGFJdGVtSWQ6IHN0cmluZztcclxuICAgICAgICBjb250YWluZXI6IEpRdWVyeTtcclxuICAgICAgICB2aWV3TW9kZWw6IGFueTtcclxuICAgICAgICB3aW5kb3c6IFdpbmRvdztcclxuICAgIH1cclxufVxyXG5cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElSZWdpc3RlckFjdGlvbk9wdGlvbnMge1xyXG4gICAgICAgIGFjdGlvbk5hbWU6IHN0cmluZztcclxuICAgICAgICBhY3Rpb25EZWxlZ2F0ZTogRnVuY3Rpb247XHJcbiAgICAgICAgb3ZlcndyaXRlPzogYm9vbGVhbjtcclxuICAgIH1cclxufVxyXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vdHlwaW5ncy90c2QuZC50c1wiIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICAvKipcclxuICAgICogQWxsIHRoZSBjb250ZXh0dWFsIGluZm9ybWF0aW9uIHJlcXVpcmVkIGZvciBhbiBhY3Rpb24gdG8gZXhlY3V0ZS5cclxuICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElDb250cm9sbGVyQWN0aW9uQ29udGV4dCB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgKiBBIERPTSBlbGVtZW50IHJlcXVlc3RpbmcgdGhlIGFjdGlvbiB0byBleGVjdXRlLlxyXG4gICAgICAgICovXHJcbiAgICAgICAgZWxlbWVudENvbnRleHQ6IEpRdWVyeTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgKiBBIERPTSBldmVudCB0aGF0IHRyaWdnZXJzIHRoZSBhY3Rpb24gdG8gZXhlY3V0ZS5cclxuICAgICAgICAqL1xyXG4gICAgICAgIGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdDtcclxuICAgIH1cclxufVxyXG5cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi9HZW5lcmljcy9Db2xsZWN0aW9ucy9JSGFzaFRhYmxlLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAvKlxyXG4gICAgKiBUaGlzIGlzIHRoZSBjb2xsZWN0aW9uIG9mIGNvbXBpbGVkIEhhbmRsZWJhcnMgdGVtcGxhdGVzLiBUaGUgdGVtcGxhdGVzIGFyZVxyXG4gICAgKiBnZW5lcmF0ZWQgYnkgdGhlIGJ1aWxkIHByb2Nlc3MuIFRoaXMgaXMgaGVyZSBvbmx5IHRvIGFwcGVhc2UgVHlwZVNjcmlwdC5cclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJQ29tcG9zZXJUZW1wbGF0ZXMge1xyXG4gICAgICAgIFRlbXBsYXRlczogSUhhc2hUYWJsZTxGdW5jdGlvbj47XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElQYXJzbGV5SnF1ZXJ5UGx1Z2luIGV4dGVuZHMgSlF1ZXJ5IHtcclxuICAgICAgICBwYXJzbGV5KG9wdGlvbnM/OiBhbnkpO1xyXG4gICAgfVxyXG59XHJcbiIsIm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJUGFyc2xleSB7XHJcbiAgICAgICAgaXNWYWxpZChncm91cD86IGFueSwgZm9yY2U/OiBib29sZWFuKTogYm9vbGVhbjtcclxuICAgICAgICB2YWxpZGF0ZShncm91cD86IGFueSwgZm9yY2U/OiBib29sZWFuKTogYm9vbGVhbjtcclxuICAgICAgICBkZXN0cm95KCk6IHZvaWQ7XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIFVJQnVzeVBhcmFtIHtcclxuICAgICAgICAvKlxyXG4gICAgICAgICAqIEN1c3RvbSBVSSBidXN5IGZ1bmN0aW9uIChvcHRpb25hbCkuIFRoaXMgb3ZlcmlkZXMgdGhlIG91dCBvZiB0aGUgYm94IFVJIGJ1c3kgZWZmZWN0LlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNhbGxiYWNrPzogRnVuY3Rpb247XHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICogRWxlbWVudCByZXNwb25zaWJsZSBmb3IgdGhlIGJ1c3kgc3RhdGUgKG9wdGlvbmFsKVxyXG4gICAgICAgICAqIFVzdWFsbHkgdGhlIGJ1dHRvbiBjbGlja2VkXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZWxlbWVudENvbnRleHQ/OiBKUXVlcnk7XHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICogVGhlIHJvb3QgY29udGFpbmVyIHRvIGRpc2FibGUgKG9wdGlvbmFsKVxyXG4gICAgICAgICAqIFVzdWFsbHkgdGhlIGJsYWRlIGNvbnRhaW5pbmcgdGhlIGJ1dHRvblxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNvbnRhaW5lckNvbnRleHQ/OiBKUXVlcnk7XHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICogZG9tIHNlbGVjdG9yIHRvIGZpbmQgdGhlIGxvYWRpbmcgaW5kaWNhdG9yIHJlbGF0aXZlIHRvIHRoZWVsZW1lbnRDb250ZXh0XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgbG9hZGluZ0luZGljYXRvclNlbGVjdG9yPzogc3RyaW5nO1xyXG5cclxuICAgICAgICAvKlxyXG4gICAgICAgICAqIGRlbGF5IGluIG1pbGxpc2Vjb25kIGJlZm9yZSBkaXNwbGF5aW5nIHRoZSBsb2FkaW5nIGluZGljYXRvclxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG1zRGVsYXk/OiBudW1iZXI7XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIFVJQnVzeUhhbmRsZSB7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBsb2FkaW5nSW5kaWNhdG9yQ29udGV4dDogSlF1ZXJ5O1xyXG4gICAgICAgIHByb3RlY3RlZCBjb250YWluZXJDb250ZXh0OiBKUXVlcnk7XHJcbiAgICAgICAgcHJvdGVjdGVkIHRpbWVvdXRIYW5kbGU7XHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICogU3RhcnQgdGhlIGJ1c3kgc3RhdGUsIHRvIGJlIGNhbGxlZCBiZWZvcmUgdGhlIGFzeW5jIGNhbGxcclxuICAgICAgICAgKiBAcGFyYW0gbG9hZGluZ0luZGljYXRvckNvbnRleHQgSlF1ZXJ5IGVsZW1lbnQgb2Ygd2hhdCB0aGUgaGFuZGxlciB3aWxsIHJlbW92ZS9hZGQgY2xhc3MgXCJoaWRkZW5cIi5cclxuICAgICAgICAgKiBAcGFyYW0gY29udGFpbmVyQ29udGV4dCBKUXVlcnkgZWxlbWVudCBjb250YWluaW5nIGlucHV0cyB0aGF0IHdpbGwgYmUgZGlzYWJsZWQgd2hpbGUgYnVzeS5cclxuICAgICAgICAgKiBAcGFyYW0gbXNEZWxheSBOdW1iZXIgb2YgbXMgYmVmb3JlIGFjdGl2YXRpbmcgYXN5bmMuIElmIGRvbmUgaXMgY2FsbGVkIGJlZm9yZSB0aGUgZW5kXHJcbiAgICAgICAgICogICAgICAgIG9mIHRoZSBkZWxheSwgdGhlIGxvYWRpbmdJbmRpY2F0b3JDb250ZXh0IHdpbGwgbm90IGJlIHNob3duLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcihsb2FkaW5nSW5kaWNhdG9yQ29udGV4dDogSlF1ZXJ5LCBjb250YWluZXJDb250ZXh0OiBKUXVlcnksIG1zRGVsYXk6IG51bWJlcikge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5sb2FkaW5nSW5kaWNhdG9yQ29udGV4dCA9IGxvYWRpbmdJbmRpY2F0b3JDb250ZXh0O1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRhaW5lckNvbnRleHQgPSBjb250YWluZXJDb250ZXh0O1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zdGFydEJ1c3kobXNEZWxheSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKlxyXG4gICAgICAgICAqIEVuZHMgdGhlIGJ1c3kgc3RhdGUsIHRvIGJlIGNhbGxlZCBpbiB0aGUgdGhlbiBvZiB0aGUgYXN5bmMgY2FsbFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBkb25lKCkge1xyXG4gICAgICAgICAgICB0aGlzLmVuZEJ1c3koKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhcnRCdXN5KG1zRGVsYXk6IG51bWJlcikge1xyXG5cclxuICAgICAgICAgICAgdGhpcy50aW1lb3V0SGFuZGxlID0gc2V0VGltZW91dCgoKSA9PiB7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5jb250YWluZXJDb250ZXh0LmZpbmQoJzppbnB1dDplbmFibGVkJykuYWRkQ2xhc3MoJ2FzeW5jLWJ1c3knKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nSW5kaWNhdG9yQ29udGV4dC5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XHJcblxyXG4gICAgICAgICAgICB9LCBtc0RlbGF5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgZW5kQnVzeSgpIHtcclxuXHJcbiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVvdXRIYW5kbGUpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5sb2FkaW5nSW5kaWNhdG9yQ29udGV4dC5hZGRDbGFzcygnaGlkZGVuJyk7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGFpbmVyQ29udGV4dC5maW5kKCc6aW5wdXQuYXN5bmMtYnVzeScpLnJlbW92ZUNsYXNzKCdhc3luYy1idXN5JykucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vVHlwaW5ncy90c2QuZC50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJQ29tcG9zZXJDb250ZXh0IHtcclxuXHJcbiAgICAgICAgbGFuZ3VhZ2U6IHN0cmluZztcclxuICAgIH1cclxufVxyXG4iLCJtb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSUNvbnRyb2xsZXJDb25maWd1cmF0aW9uIHtcclxuICAgICAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICAgICAgY29udHJvbGxlcjogYW55O1xyXG4gICAgfVxyXG59XHJcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4vTXZjL0lDb250cm9sbGVyQ29uZmlndXJhdGlvbi50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJQ29tcG9zZXJDb25maWd1cmF0aW9uIHtcclxuICAgICAgICBwbHVnaW5zPzogc3RyaW5nW107XHJcbiAgICAgICAgcGF5bWVudFByb3ZpZGVyPzoge1xyXG4gICAgICAgICAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICAgICAgICAgIG9yaWdpbjogc3RyaW5nO1xyXG4gICAgICAgICAgICBwcm9maWxlSWQ6IHN0cmluZztcclxuICAgICAgICB9O1xyXG4gICAgICAgIGNvbnRyb2xsZXJzOiBJQ29udHJvbGxlckNvbmZpZ3VyYXRpb25bXTtcclxuICAgIH07XHJcbn1cclxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uLy4uL3R5cGluZ3MvdHNkLmQudHNcIiAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuLi9HZW5lcmljcy9Db2xsZWN0aW9ucy9JSGFzaFRhYmxlLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuLi9FdmVudHMvSUV2ZW50SHViLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuL0lDb250cm9sbGVyLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuL0lDb250cm9sbGVyQ29udGV4dC50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi9JUmVnaXN0ZXJBY3Rpb25PcHRpb25zLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuL0lDb250cm9sbGVyQWN0aW9uQ29udGV4dC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi9UZW1wbGF0aW5nL0lDb21wb3NlclRlbXBsYXRlcy50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi9UZW1wbGF0aW5nL0lDb21wb3NlclRlbXBsYXRlcy50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vSlF1ZXJ5UGx1Z2lucy9JUGFyc2xleUpxdWVyeVBsdWdpbi50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vVmFsaWRhdGlvbi9JUGFyc2xleS50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vVUkvVUlCdXN5UGFyYW0udHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uL1VJL1VJQnVzeUhhbmRsZS50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vSUNvbXBvc2VyQ29udGV4dC50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vSUNvbXBvc2VyQ29uZmlndXJhdGlvbi50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIC8qKlxyXG4gICAgKiBQcm92aWRlcyBtZXRob2RzIHRoYXQgcmVzcG9uZCB0byBjbGllbnQtc2lkZSByZXF1ZXN0cy5cclxuICAgICovXHJcbiAgICBleHBvcnQgY2xhc3MgQ29udHJvbGxlciBpbXBsZW1lbnRzIElDb250cm9sbGVyIHtcclxuICAgICAgICBwcml2YXRlIF9jb21wb3NlckV2ZW50UG9zdGZpeCA9ICcuY29tcG9zZXInO1xyXG4gICAgICAgIHByaXZhdGUgX2RlZmF1bHRFdmVudHNUb01vbml0b3I6IHN0cmluZ1tdID1cclxuICAgICAgICBbJ2NsaWNrJywgJ21vdXNlb3ZlcicsICdtb3VzZW91dCcsICdjb250ZXh0bWVudScsICdzdWJtaXQnLCAnZm9jdXMnLCAnYmx1cicsICdjaGFuZ2UnXTsgLy8gJ2RibGNsaWNrJ1xyXG4gICAgICAgIHByaXZhdGUgX3VucmVnaXN0ZXI6IHtcclxuICAgICAgICAgICAgKCk6IHZvaWQ7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gQ2xhc3NlcyB0aGF0IGV4dGVuZCBDb250cm9sbGVyIHNob3VsZCByZWFsbHkgbGFzZXIgZm9jdXMgYW5kIGNob29zZSB3aGljaCBldmVudHMgdG8gTW9uaXRvci5cclxuICAgICAgICAvLyBUaGUgZGVmYXVsdCBldmVudHMgYXJlIGhlcmUgZm9yIG1hZ2ljIG1vZGUuXHJcbiAgICAgICAgcHJvdGVjdGVkIGV2ZW50c1RvTW9uaXRvcjogc3RyaW5nW107XHJcblxyXG4gICAgICAgIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBjb250ZXh0OiBJQ29udHJvbGxlckNvbnRleHQsXHJcbiAgICAgICAgICAgIHByb3RlY3RlZCBldmVudEh1YjogSUV2ZW50SHViLFxyXG4gICAgICAgICAgICBwcm90ZWN0ZWQgY29tcG9zZXJDb250ZXh0OiBJQ29tcG9zZXJDb250ZXh0LFxyXG4gICAgICAgICAgICBwcm90ZWN0ZWQgY29tcG9zZXJDb25maWd1cmF0aW9uOiBJQ29tcG9zZXJDb25maWd1cmF0aW9uXHJcbiAgICAgICAgKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAoXy5pc0VtcHR5KGNvbnRleHQpKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvbnRleHQgaXMgcmVxdWlyZWQnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKF8uaXNFbXB0eShldmVudEh1YikpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignZXZlbnRIdWIgaXMgcmVxdWlyZWQnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKF8uaXNFbXB0eShjb21wb3NlckNvbnRleHQpKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvbXBvc2VyQ29udGV4dCBpcyByZXF1aXJlZCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHJlZ2lzdGVyQWN0aW9uKGNsYXNzVG9SZWdpc3RlckFjdGlvbk9uOiBhbnksIHJlZ2lzdGVyQWN0aW9uT3B0aW9uczogSVJlZ2lzdGVyQWN0aW9uT3B0aW9ucykge1xyXG4gICAgICAgICAgICB2YXIgY2xhc3NQcm90b3R5cGUgPSBjbGFzc1RvUmVnaXN0ZXJBY3Rpb25Pbi5wcm90b3R5cGU7XHJcblxyXG4gICAgICAgICAgICBpZiAoIUNvbnRyb2xsZXIucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoY2xhc3NQcm90b3R5cGUpKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgJ1RoZSBjbGFzcyB5b3UgYXJlIHRyeWluZyB0byByZWdpc3RlciB0aGUgYWN0aW9uIG9uIGlzIG5vdCBhIGNvbnRyb2xsZXIuJ1xyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKF8uaXNGdW5jdGlvbihyZWdpc3RlckFjdGlvbk9wdGlvbnMuYWN0aW9uRGVsZWdhdGUpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWNsYXNzUHJvdG90eXBlLmhhc093blByb3BlcnR5KHJlZ2lzdGVyQWN0aW9uT3B0aW9ucy5hY3Rpb25OYW1lKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgIHJlZ2lzdGVyQWN0aW9uT3B0aW9ucy5vdmVyd3JpdGUgJiZcclxuICAgICAgICAgICAgICAgICAgICBjbGFzc1Byb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eShyZWdpc3RlckFjdGlvbk9wdGlvbnMuYWN0aW9uTmFtZSkgJiZcclxuICAgICAgICAgICAgICAgICAgICBfLmlzRnVuY3Rpb24oY2xhc3NQcm90b3R5cGVbcmVnaXN0ZXJBY3Rpb25PcHRpb25zLmFjdGlvbk5hbWVdKSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjbGFzc1Byb3RvdHlwZVtyZWdpc3RlckFjdGlvbk9wdGlvbnMuYWN0aW9uTmFtZV0gPSByZWdpc3RlckFjdGlvbk9wdGlvbnMuYWN0aW9uRGVsZWdhdGU7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgWW91IGNhbm5vdCBvdmVyd3JpdGUgdGhlIGFjdGlvbiBuYW1lZCBcIiR7cmVnaXN0ZXJBY3Rpb25PcHRpb25zLmFjdGlvbk5hbWV9XCIgXFxcclxud2l0aG91dCBzcGVjaWZ5aW5nIG92ZXJ3cml0ZSA9IHRydWUgaW4gdGhlIHJlZ2lzdGVyQWN0aW9uT3B0aW9ucy5gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgVW5hYmxlIHRvIHJlZ2lzdGVyIGFjdGlvbiAke3JlZ2lzdGVyQWN0aW9uT3B0aW9ucy5hY3Rpb25OYW1lfS4gVGhlIGFjdGlvbiBkZWxlZ2F0ZSBpcyBub3QgYSBmdW5jdGlvbi5gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGluaXRpYWxpemUoKSB7XHJcbiAgICAgICAgICAgIGlmIChfLmlzRW1wdHkodGhpcy5ldmVudHNUb01vbml0b3IpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50c1RvTW9uaXRvciA9IHRoaXMuX2RlZmF1bHRFdmVudHNUb01vbml0b3I7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJEb21FdmVudHMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBkaXNwb3NlKCkge1xyXG4gICAgICAgICAgICB0aGlzLnVucmVnaXN0ZXJEb21FdmVudHMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBhc3luY0J1c3kob3B0aW9uczogVUlCdXN5UGFyYW0gPSB7fSk6IFVJQnVzeUhhbmRsZSB7XHJcbiAgICAgICAgICAgIG9wdGlvbnMgPSBfLm1lcmdlKDxVSUJ1c3lQYXJhbT57XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50Q29udGV4dDogdGhpcy5jb250ZXh0LmNvbnRhaW5lcixcclxuICAgICAgICAgICAgICAgIGNvbnRhaW5lckNvbnRleHQ6IHRoaXMuY29udGV4dC5jb250YWluZXIsXHJcbiAgICAgICAgICAgICAgICBsb2FkaW5nSW5kaWNhdG9yU2VsZWN0b3I6ICcubG9hZGluZy1pbmRpY2F0b3InLFxyXG4gICAgICAgICAgICAgICAgbXNEZWxheTogMFxyXG4gICAgICAgICAgICB9LCBvcHRpb25zKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBsb2FkaW5nSW5kaWNhdG9yQ29udGV4dCA9IG9wdGlvbnMuZWxlbWVudENvbnRleHQuZmluZChvcHRpb25zLmxvYWRpbmdJbmRpY2F0b3JTZWxlY3Rvcik7XHJcbiAgICAgICAgICAgIHZhciBoYW5kbGUgPSBuZXcgVUlCdXN5SGFuZGxlKGxvYWRpbmdJbmRpY2F0b3JDb250ZXh0LCBvcHRpb25zLmNvbnRhaW5lckNvbnRleHQsIG9wdGlvbnMubXNEZWxheSk7XHJcbiAgICAgICAgICAgIHJldHVybiBoYW5kbGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKlxyXG4gICAgICAgICAqIFByZXZlbnRzIGEgZm9ybSBmcm9tIHN1Ym1pdHRpbmcuXHJcbiAgICAgICAgICogQHBhcmFtIGNvbnRleHQgQSBjb250cm9sbGVyIGFjdGlvbiBjb250ZXh0LlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBwcmV2ZW50Rm9ybVN1Ym1pdChjb250ZXh0OiBJQ29udHJvbGxlckFjdGlvbkNvbnRleHQpIHtcclxuICAgICAgICAgICAgY29udGV4dC5ldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHJlbmRlcih0ZW1wbGF0ZUlkOiBzdHJpbmcsIHZpZXdNb2RlbDogYW55LCBwYXJlbnRTZWxlY3Rvcj86IHN0cmluZykge1xyXG4gICAgICAgICAgICB2YXIgY29udGFpbmVyID0gdGhpcy5jb250ZXh0LmNvbnRhaW5lcjtcclxuXHJcbiAgICAgICAgICAgIGlmICghXy5pc0VtcHR5KHBhcmVudFNlbGVjdG9yKSkge1xyXG4gICAgICAgICAgICAgICAgY29udGFpbmVyID0gdGhpcy5jb250ZXh0LmNvbnRhaW5lci5maW5kKHBhcmVudFNlbGVjdG9yKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGVsZW1lbnRzID0gY29udGFpbmVyLmZpbmQoYFtkYXRhLXRlbXBsYXRlaWQ9XCIke3RlbXBsYXRlSWR9XCJdYCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoXy5pc0VtcHR5KGVsZW1lbnRzKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBDb3VsZCBub3QgZmluZCB0aGUgdGVtcGxhdGUgJyR7dGVtcGxhdGVJZH0nIGluc2lkZSBpdHMgY29udGFpbmVyLmAsIGNvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGVsZW1lbnRzLmVhY2goKGluZGV4OiBOdW1iZXIsIGl0ZW06IEhUTUxFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVuZGVyZWRUZW1wbGF0ZSA9IHRoaXMuZ2V0UmVuZGVyZWRUZW1wbGF0ZUNvbnRlbnRzKHRlbXBsYXRlSWQsIHZpZXdNb2RlbCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHJlbmRlcmVkVGVtcGxhdGUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLm91dGVySFRNTCA9IHJlbmRlcmVkVGVtcGxhdGU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGdldFJlbmRlcmVkVGVtcGxhdGVDb250ZW50cyh0ZW1wbGF0ZUlkOiBzdHJpbmcsIHZpZXdNb2RlbDogYW55KTogc3RyaW5nIHtcclxuICAgICAgICAgICAgdmFyIHRlbXBsYXRlID0gKDxhbnk+T3Jja2VzdHJhLkNvbXBvc2VyKS5UZW1wbGF0ZXNbdGVtcGxhdGVJZF07XHJcblxyXG4gICAgICAgICAgICBpZiAoIV8uaXNGdW5jdGlvbih0ZW1wbGF0ZSkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFRlbXBsYXRlICcke3RlbXBsYXRlSWR9JyBub3QgZm91bmQgaW4gY29tcGlsZWQgdGVtcGxhdGVzLmApO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGVtcGxhdGUodmlld01vZGVsKTtcclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIC8vIGNhdGNoIGhhbmRsZWJhcnMgcmVuZGVyaW5nIGVycm9ycyBtb3N0bHlcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYCR7ZXJyb3IubmFtZX06ICR7ZXJyb3IubWVzc2FnZX0gaW4gdGVtcGxhdGUgJyR7dGVtcGxhdGVJZH0nLmAsIHZpZXdNb2RlbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCByZWdpc3RlckZvcm1zRm9yVmFsaWRhdGlvbihjb250ZXh0OiBKUXVlcnksIGN1c3RvbU9wdGlvbnM6IGFueSA9IHt9KTogT3Jja2VzdHJhLkNvbXBvc2VyLklQYXJzbGV5W10ge1xyXG4gICAgICAgICAgICB2YXIgZm9ybVZhbGlkYXRvcnM6IE9yY2tlc3RyYS5Db21wb3Nlci5JUGFyc2xleVtdID0gW107XHJcblxyXG4gICAgICAgICAgICB2YXIgb3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgICAgIHRyaWdnZXI6ICdmb2N1c291dCBjaGFuZ2UnLFxyXG4gICAgICAgICAgICAgICAgZm9jdXM6ICdmaXJzdCcsXHJcbiAgICAgICAgICAgICAgICBlcnJvclRlbXBsYXRlOiAnPGxpPjwvbGk+JyxcclxuICAgICAgICAgICAgICAgIGNsYXNzSGFuZGxlcjogZnVuY3Rpb24oZmllbGRJbnN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBoYW5kbGVTZWxlY3RvciA9IGZpZWxkSW5zdGFuY2UuJGVsZW1lbnQuZGF0YSgncGFyc2xleUNsYXNzSGFuZGxlclNlbGVjdG9yJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHJldHVybmluZyB1bmRlZmluZWQgd2lsbCBtYWtlIHBhcnNsZXkgdXNlIHRoZSBkZWZhdWx0IGNsYXNzSGFuZGxlclxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfLmlzRW1wdHkoaGFuZGxlU2VsZWN0b3IpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBjbGFzc0hhbmRsZXIgPSBmaWVsZEluc3RhbmNlLiRlbGVtZW50LmNsb3Nlc3QoaGFuZGxlU2VsZWN0b3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjbGFzc0hhbmRsZXI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBfLmFzc2lnbihvcHRpb25zLCBjdXN0b21PcHRpb25zKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnRleHQuZWFjaCgoaW5kZXgsIGVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgICAgIGZvcm1WYWxpZGF0b3JzLnB1c2goKDxPcmNrZXN0cmEuQ29tcG9zZXIuSVBhcnNsZXk+KDxPcmNrZXN0cmEuQ29tcG9zZXIuSVBhcnNsZXlKcXVlcnlQbHVnaW4+JChlbGVtZW50KSkucGFyc2xleShvcHRpb25zKSkpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChjdXN0b21PcHRpb25zLnNlcnZlclZhbGlkYXRpb25Db250YWluZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaGlkZVNlcnZlclZhbGlkYXRpb25NZXNzYWdlT25DbGllbnRWYWxpZGF0aW9uKGZvcm1WYWxpZGF0b3JzLCBjdXN0b21PcHRpb25zLnNlcnZlclZhbGlkYXRpb25Db250YWluZXIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZm9ybVZhbGlkYXRvcnM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBIaWRlIGFueSBtZXNzYWdlcyBmcm9tIHByZXZpb3VzIHNlcnZlciB2YWxpZGF0aW9uXHJcbiAgICAgICAgICogd2hlbiB0aGUgbmV3IGZvcm0gaXMgdXNlZCB0byBwcmV2ZW50IG1peGluZyB1cFxyXG4gICAgICAgICAqIGNsaWVudCBzaWRlIHZhbGlkYXRpb24gbWVzc2FnZSB3aXRoIHNlcnZlciBzaWRlXHJcbiAgICAgICAgICogbWVzc2FnZXMuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBAcGFyYW0gZm9ybVZhbGlkYXRvcnMgYWxsIHRoZSBwYXJsc2V5IGZvcm1zIHRvIG1hbmFnZVxyXG4gICAgICAgICAqIEBwYXJhbSBzZXJ2ZXJWYWxpZGF0aW9uQ29udGFpbmVyIHRoZSBqUXVlcnkgc2VsZWN0b3IgdG8gZmluZCBtZXNzYWdlcyB0byBlbXB0eVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgaGlkZVNlcnZlclZhbGlkYXRpb25NZXNzYWdlT25DbGllbnRWYWxpZGF0aW9uKGZvcm1WYWxpZGF0b3JzOiBPcmNrZXN0cmEuQ29tcG9zZXIuSVBhcnNsZXlbXSwgc2VydmVyVmFsaWRhdGlvbkNvbnRhaW5lcjogYW55KSB7XHJcbiAgICAgICAgICAgIF8uZWFjaChmb3JtVmFsaWRhdG9ycywgZnVuY3Rpb24ocGFyc2xleTogYW55KSB7XHJcbiAgICAgICAgICAgICAgICBwYXJzbGV5LnN1YnNjcmliZSgncGFyc2xleTpmaWVsZDp2YWxpZGF0ZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcnNsZXkuJGVsZW1lbnQuZmluZChzZXJ2ZXJWYWxpZGF0aW9uQ29udGFpbmVyKS5lbXB0eSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIF8uZGVmZXIoZnVuY3Rpb24oKSB7IHBhcnNsZXkudW5zdWJzY3JpYmUoJ3BhcnNsZXk6ZmllbGQ6dmFsaWRhdGUnKTsgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHJlZ2lzdGVyRG9tRXZlbnRzKCkge1xyXG4gICAgICAgICAgICB2YXIgcGFyc2VBY3Rpb24gPSB0aGlzLnBhcnNlQWN0aW9uLmJpbmQodGhpcyk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl91bnJlZ2lzdGVyID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0LmNvbnRhaW5lci5vZmYodGhpcy5fY29tcG9zZXJFdmVudFBvc3RmaXgsIHBhcnNlQWN0aW9uKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRzVG9Nb25pdG9yLmZvckVhY2goKGl0ZW06IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0LmNvbnRhaW5lci5vbihgJHtpdGVtfSR7dGhpcy5fY29tcG9zZXJFdmVudFBvc3RmaXh9YCwgcGFyc2VBY3Rpb24pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgdW5yZWdpc3RlckRvbUV2ZW50cygpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX3VucmVnaXN0ZXIgIT09IHZvaWQgMCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdW5yZWdpc3RlcigpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHBhcnNlQWN0aW9uKGU6IEpRdWVyeUV2ZW50T2JqZWN0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXBwbHlDb250cm9sbGVyQWN0aW9uKCQoZS50YXJnZXQpLCBlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgYXBwbHlDb250cm9sbGVyQWN0aW9uKGNvbnRleHQ6IEpRdWVyeSwgZTogSlF1ZXJ5RXZlbnRPYmplY3QpIHtcclxuICAgICAgICAgICAgdmFyIGNvbnRyb2xsZXJBY3Rpb25zOiBzdHJpbmdbXSxcclxuICAgICAgICAgICAgICAgIGV2ZW50QXR0cmlidXRlOiBzdHJpbmcgPSBgb2MtJHtlLnR5cGV9YCxcclxuICAgICAgICAgICAgICAgIHJhd0FjdGlvbnM6IHN0cmluZyA9IGNvbnRleHQuZGF0YShldmVudEF0dHJpYnV0ZSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoXy5pc0VtcHR5KHJhd0FjdGlvbnMpKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29udGV4dC5sZW5ndGggPiAwICYmIGNvbnRleHRbMF0gIT09IHRoaXMuY29udGV4dC5jb250YWluZXJbMF0pIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGx5Q29udHJvbGxlckFjdGlvbihjb250ZXh0LnBhcmVudCgpLCBlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBY3Rpb25zID0gcmF3QWN0aW9ucy5yZXBsYWNlKC9cXHMrL2csICcnKS5zcGxpdCgnLCcpO1xyXG4gICAgICAgICAgICB0aGlzLmFwcGx5Q29udHJvbGxlckFjdGlvbnMoY29udGV4dCwgZSwgY29udHJvbGxlckFjdGlvbnMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBhcHBseUNvbnRyb2xsZXJBY3Rpb25zKGNvbnRleHQ6IEpRdWVyeSwgZTogSlF1ZXJ5RXZlbnRPYmplY3QsIGNvbnRyb2xsZXJBY3Rpb25zOiBzdHJpbmdbXSkge1xyXG4gICAgICAgICAgICBjb250cm9sbGVyQWN0aW9ucy5mb3JFYWNoKChjb250cm9sbGVyQWN0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB2YXIgY29udHJvbGxlckFjdGlvbkNvbnRleHQ6IE9yY2tlc3RyYS5Db21wb3Nlci5JQ29udHJvbGxlckFjdGlvbkNvbnRleHQ7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKF8uaXNGdW5jdGlvbih0aGlzW2NvbnRyb2xsZXJBY3Rpb25dKSkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyQWN0aW9uQ29udGV4dCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudENvbnRleHQ6IGNvbnRleHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50OiBlXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpc1tjb250cm9sbGVyQWN0aW9uXS5hcHBseSh0aGlzLCBbY29udHJvbGxlckFjdGlvbkNvbnRleHRdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vVHlwaW5ncy90c2QuZC50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJU2VyaWFsaXplT2JqZWN0SnF1ZXJ5UGx1Z2luIGV4dGVuZHMgSlF1ZXJ5IHtcclxuICAgICAgICBzZXJpYWxpemVPYmplY3QoKTogYW55O1xyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vVHlwaW5ncy90c2QuZC50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKiBMb2NhbGl6YXRpb24gUHJvdmlkZXIgZm9yIGFjY2Vzc2luZyBsb2NhbGl6ZWQgc3RyaW5nXHJcbiAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJTG9jYWxpemF0aW9uUHJvdmlkZXIge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEJvb3N0cmFwIHRoZSBsb2NhbGl6YXRpb24uXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgaW5pdGlhbGl6ZShjb21wb3NlckNvbnRleHQ6IElDb21wb3NlckNvbnRleHQpOiBRLlByb21pc2U8YW55PjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0IGEgIGxvY2FsaXplZCBzdHJpbmdcclxuICAgICAgICAgKlxyXG4gICAgICAgICAqIEBwYXJhbSBjYXRlZ29yeU5hbWUgVGhlIGNhdGVnb3J5IHVzZWQgdG8gYnVuZGxlIHRoaXMgbG9jYWxpemF0aW9uXHJcbiAgICAgICAgICogQHBhcmFtIGtleU5hbWUgVGhlIGV4YWN0IGtleSB0byBsb2NhbGl6ZVxyXG4gICAgICAgICAqIEByZXR1cm4gdGhlIGxvY2FsaXplZFN0cmluZyBvciBudWxsIGlmIG5vbmUgZm91bmRcclxuICAgICAgICAqL1xyXG4gICAgICAgIGdldExvY2FsaXplZFN0cmluZyhjYXRlZ29yeU5hbWU6IHN0cmluZywga2V5TmFtZTogc3RyaW5nKTogc3RyaW5nO1xyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi9Db250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uL0NvbXBvc2VyQ2xpZW50LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uL0lDb250cm9sbGVyQWN0aW9uQ29udGV4dC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi9FdmVudHMvSUV2ZW50SW5mb3JtYXRpb24udHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nSUxvY2FsaXphdGlvblByb3ZpZGVyLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgY2xhc3MgTG9jYWxpemF0aW9uUHJvdmlkZXIgaW1wbGVtZW50cyBPcmNrZXN0cmEuQ29tcG9zZXIuSUxvY2FsaXphdGlvblByb3ZpZGVyIHtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgX2luc3RhbmNlOiBPcmNrZXN0cmEuQ29tcG9zZXIuSUxvY2FsaXphdGlvblByb3ZpZGVyID0gbmV3IExvY2FsaXphdGlvblByb3ZpZGVyKCk7XHJcbiAgICAgICAgcHJpdmF0ZSBfbG9jYWxpemF0aW9uVHJlZTogYW55ID0ge307XHJcbiAgICAgICAgcHJpdmF0ZSBfY29tcG9zZXJDb250ZXh0OiBJQ29tcG9zZXJDb250ZXh0O1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGluc3RhbmNlKCk6IE9yY2tlc3RyYS5Db21wb3Nlci5JTG9jYWxpemF0aW9uUHJvdmlkZXIge1xyXG4gICAgICAgICAgICByZXR1cm4gTG9jYWxpemF0aW9uUHJvdmlkZXIuX2luc3RhbmNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgICAgIGlmIChMb2NhbGl6YXRpb25Qcm92aWRlci5faW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3I6IEluc3RhbnRpYXRpb24gZmFpbGVkOiBVc2UgTG9jYWxpemF0aW9uUHJvdmlkZXIuaW5zdGFuY2UoKSBpbnN0ZWFkIG9mIG5ldy4nKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgTG9jYWxpemF0aW9uUHJvdmlkZXIuX2luc3RhbmNlID0gdGhpcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEJvb3N0cmFwIHRoZSBsb2NhbGl6YXRpb24uXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBUaGlzIGNhbGwgaXMgcmVzcG9uc2libHkgZm9yIHJlZnJlc2hpbmcgYWxsIGxvY2FsaXphdGlvblxyXG4gICAgICAgICAqIHRvIHRoZSBjdXJyZW50IHBhZ2UgY3VsdHVyZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKGNvbXBvc2VyQ29udGV4dDogSUNvbXBvc2VyQ29udGV4dCk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2NvbXBvc2VyQ29udGV4dCA9IGNvbXBvc2VyQ29udGV4dDtcclxuXHJcbiAgICAgICAgICAgIHZhciBwcm92aWRlciA9IHRoaXM7XHJcbiAgICAgICAgICAgIHZhciBsYW5ndWFnZSA9IHRoaXMuX2NvbXBvc2VyQ29udGV4dC5sYW5ndWFnZTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBDb21wb3NlckNsaWVudC5nZXQoJy9hcGkvbG9jYWxpemF0aW9uLycgKyBsYW5ndWFnZSlcclxuICAgICAgICAgICAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdHJlZSA9IHJlc3VsdDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXIuX2xvY2FsaXphdGlvblRyZWUgPSB0cmVlO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXQgYSAgbG9jYWxpemVkIHN0cmluZ1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIGNhdGVnb3J5TmFtZSBUaGUgY2F0ZWdvcnkgdXNlZCB0byBidW5kbGUgdGhpcyBsb2NhbGl6YXRpb25cclxuICAgICAgICAgKiBAcGFyYW0ga2V5TmFtZSBUaGUgZXhhY3Qga2V5IHRvIGxvY2FsaXplXHJcbiAgICAgICAgICogQHJldHVybiB0aGUgbG9jYWxpemVkU3RyaW5nIG9yIG51bGwgaWYgbm9uZSBmb3VuZFxyXG4gICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGdldExvY2FsaXplZFN0cmluZyhjYXRlZ29yeU5hbWU6IHN0cmluZywga2V5TmFtZTogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIGNhdGVnb3J5TmFtZSAgID0gKGNhdGVnb3J5TmFtZSB8fCAnJykudG9Mb3dlckNhc2UoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciB0cmVlICAgICAgID0gKHRoaXMuX2xvY2FsaXphdGlvblRyZWUgfHwge30pO1xyXG4gICAgICAgICAgICB2YXIgY2F0ZWdvcmllcyA9ICh0cmVlLkxvY2FsaXplZENhdGVnb3JpZXMgfHwge30pO1xyXG4gICAgICAgICAgICB2YXIgY2F0ZWdvcnkgICA9IChjYXRlZ29yaWVzW2NhdGVnb3J5TmFtZV0gfHwge30pO1xyXG4gICAgICAgICAgICB2YXIgdmFsdWVzICAgICA9IChjYXRlZ29yeS5Mb2NhbGl6ZWRWYWx1ZXMgfHwge30pO1xyXG5cclxuICAgICAgICAgICAgdmFyIHZhbHVlID0gdmFsdWVzW2tleU5hbWVdO1xyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKlxyXG4gICAgICAgICAqIE5vdGU6IG5vdCByZWFsbHkgcHJvdGVjdGVkLCB0aGlzIGlzIGEgVHlwZXNjcmlwdCBzY29wZWQgbWV0aG9kXHJcbiAgICAgICAgICogY2FsbGVkIGZyb20gdGhlIGphdmFzY3JpcHQgc2NvcGVkIGhhbmRsZWJhcnMgaGVscGVyLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByb3RlY3RlZCBoYW5kbGVCYXJzSGVscGVyX2xvY2FsaXplKGNhdGVnb3J5TmFtZTogc3RyaW5nLCBrZXlOYW1lOiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgdmFyIHZhbHVlID0gdGhpcy5nZXRMb2NhbGl6ZWRTdHJpbmcoY2F0ZWdvcnlOYW1lLCBrZXlOYW1lKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChfLmlzVW5kZWZpbmVkKHZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSAnWycgKyBjYXRlZ29yeU5hbWUgKyAnLicgKyBrZXlOYW1lICsgJ10nO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKlxyXG4gICAgICAgICAqIE5vdGU6IG5vdCByZWFsbHkgcHJvdGVjdGVkLCB0aGlzIGlzIGEgVHlwZXNjcmlwdCBzY29wZWQgbWV0aG9kXHJcbiAgICAgICAgICogY2FsbGVkIGZyb20gdGhlIGphdmFzY3JpcHQgc2NvcGVkIGhhbmRsZWJhcnMgaGVscGVyLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByb3RlY3RlZCBoYW5kbGVCYXJzSGVscGVyX2xvY2FsaXplRm9ybWF0KGNhdGVnb3J5TmFtZTogc3RyaW5nLCBrZXlOYW1lOiBzdHJpbmcsIG9wdGlvbnM6IGFueVtdKSB7XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZTtcclxuICAgICAgICAgICAgdmFyIGZvcm1hdCA9IHRoaXMuZ2V0TG9jYWxpemVkU3RyaW5nKGNhdGVnb3J5TmFtZSwga2V5TmFtZSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoXy5pc1VuZGVmaW5lZChmb3JtYXQpKSB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9ICdbJyArIGNhdGVnb3J5TmFtZSArICcuJyArIGtleU5hbWUgKyAnXSc7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHRoaXMuc3RyaW5nRm9ybWF0KGZvcm1hdCwgb3B0aW9ucyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICogTm90ZTogbm90IHJlYWxseSBwcm90ZWN0ZWQsIHRoaXMgaXMgYSBUeXBlc2NyaXB0IHNjb3BlZCBtZXRob2RcclxuICAgICAgICAgKiBjYWxsZWQgZnJvbSB0aGUgamF2YXNjcmlwdCBzY29wZWQgaGFuZGxlYmFycyBoZWxwZXIuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJvdGVjdGVkIGhhbmRsZUJhcnNIZWxwZXJfaXNMb2NhbGl6ZWQoY2F0ZWdvcnlOYW1lOiBzdHJpbmcsIGtleU5hbWU6IHN0cmluZykge1xyXG4gICAgICAgICAgICB2YXIgdmFsdWUgPSB0aGlzLmdldExvY2FsaXplZFN0cmluZyhjYXRlZ29yeU5hbWUsIGtleU5hbWUpO1xyXG5cclxuICAgICAgICAgICAgaWYgKF8uaXNFbXB0eSh2YWx1ZSkgfHwgXy5pc1VuZGVmaW5lZCh2YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKlxyXG4gICAgICAgICAqIFN1YnN0aXR1dGUgdG8gU3RyaW5nLkZvcm1hdCBpbiBDI1xyXG4gICAgICAgICAqIFRoaXMgaXMgYSBsaW1pdGVkIHZlcnNpb24gdG8gc3VwcG9ydCBudW1lcmljIHBsYWNlaG9sZGVycyB7MH0gd2l0aG91dCBmb3JtYXR0aW5nXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBzdHJpbmdGb3JtYXQoZm9ybWF0OiBzdHJpbmcsIG9wdGlvbnM6IGFueVtdKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmb3JtYXQucmVwbGFjZSgvXFx7XFxzKihbXn1cXHNdKylcXHMqXFx9L2csIChtLCBwMSwgb2Zmc2V0LCBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBvcHRpb25zW3AxXSAhPT0gdm9pZCAwID8gb3B0aW9uc1twMV0gOiBwMTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL0xvY2FsaXphdGlvbi9JTG9jYWxpemF0aW9uUHJvdmlkZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9Mb2NhbGl6YXRpb24vTG9jYWxpemF0aW9uUHJvdmlkZXIudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBpbnRlcmZhY2UgRW5oYW5jZWRKUXVlcnlBamF4U2V0dGluZ3MgZXh0ZW5kcyBKUXVlcnlBamF4U2V0dGluZ3Mge1xyXG4gICAgICAgIG1ldGhvZDogc3RyaW5nO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBDb21wb3NlckNsaWVudCB7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgZ2V0KHVybDogc3RyaW5nLCBkYXRhPzogYW55KSA6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnNlbmRSZXF1ZXN0KCdHRVQnLCB1cmwsIGRhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBwb3N0KHVybDogc3RyaW5nLCBkYXRhOiBhbnkpIDogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VuZFJlcXVlc3QoJ1BPU1QnLCB1cmwsIGRhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBwdXQodXJsOiBzdHJpbmcsIGRhdGE6IGFueSkgOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZW5kUmVxdWVzdCgnUFVUJywgdXJsLCBkYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgcmVtb3ZlKHVybDogc3RyaW5nLCBkYXRhOiBhbnkpIDogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2VuZFJlcXVlc3QoJ0RFTEVURScsIHVybCwgZGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBzZW5kUmVxdWVzdChtZXRob2Q6IHN0cmluZywgdXJsOiBzdHJpbmcsIGRhdGE/OiBhbnkpIDogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgdmFyIHNldHRpbmdzOiBFbmhhbmNlZEpRdWVyeUFqYXhTZXR0aW5ncyA9IHtcclxuICAgICAgICAgICAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vanNvbicsXHJcbiAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgICAgICAgICAgICAgZGF0YTogZGF0YSA/IEpTT04uc3RyaW5naWZ5KGRhdGEpIDogbnVsbCxcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogbWV0aG9kLFxyXG4gICAgICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ0FjY2VwdC1MYW5ndWFnZSc6IHRoaXMuZ2V0UGFnZUN1bHR1cmUoKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFEoJC5hamF4KHNldHRpbmdzKSkuZmFpbChyZWFzb24gPT4gdGhpcy5vblJlcXVlc3RSZWplY3RlZChyZWFzb24pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGdldFBhZ2VDdWx0dXJlKCk6IHN0cmluZyB7XHJcblxyXG4gICAgICAgICAgICB2YXIgY3VsdHVyZTogc3RyaW5nID0gJCgnaHRtbCcpLmF0dHIoJ2xhbmcnKTtcclxuICAgICAgICAgICAgaWYgKCFjdWx0dXJlKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGxhbmcgYXR0cmlidXRlIHdhcyBmb3VuZCBvbiB0aGUgPGh0bWw+IGVsZW1lbnQuIFBsZWFzZSBtYWtlIHN1cmUgaXQgaXMgaW5jbHVkZWQuJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjdWx0dXJlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgb25SZXF1ZXN0UmVqZWN0ZWQocmVhc29uOiBhbnkpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgICAgIGlmIChyZWFzb24ucmVhZHlTdGF0ZSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgeyBFcnJvcnM6IFsgeyBMb2NhbGl6ZWRFcnJvck1lc3NhZ2U6IHRoaXMuZ2V0QWpheEZhaWxlZEVycm9yTWVzc2FnZSgpIH0gXSB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAocmVhc29uLnJlYWR5U3RhdGUgPT09IDQgJiYgcmVhc29uLnN0YXR1cyA9PT0gMjA1KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnUGFnZSBtdXN0IGJlIHJlbG9hZGVkLicpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlZGlyZWN0VXJsID0gdGhpcy5nZXRSZWxvYWRVcmwoKTtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gcmVkaXJlY3RVcmw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChyZWFzb24ucmVhZHlTdGF0ZSA9PT0gNCAmJiByZWFzb24uc3RhdHVzID09PSA0MDEpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IHsgRXJyb3JzOiBbIHsgTG9jYWxpemVkRXJyb3JNZXNzYWdlOiB0aGlzLmdldFVuYXV0aG9yaXplZEVycm9yTWVzc2FnZSgpIH0gXSB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAocmVhc29uLnJlYWR5U3RhdGUgPT09IDQgJiYgcmVhc29uLnN0YXR1cyA9PT0gNTAwICYmIHJlYXNvbi5yZXNwb25zZUpTT04gIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IHsgRXJyb3JzOiByZWFzb24ucmVzcG9uc2VKU09OLkVycm9ycyB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aHJvdyByZWFzb247XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBnZXRSZWxvYWRVcmwoKTogc3RyaW5nIHtcclxuICAgICAgICAgICAgdmFyIHJhd1F1ZXJ5U3RyaW5nOiBzdHJpbmcgPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoO1xyXG5cclxuICAgICAgICAgICAgdmFyIHZhbHVlOiBzdHJpbmcgPSAnc2Vzc2lvbj1leHBpcmVkJztcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmRvZXNVcmxDb250YWluUXVlcnlTdHJpbmcocmF3UXVlcnlTdHJpbmcsIHZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgc3BsaXR0ZXIgPSAnJic7XHJcbiAgICAgICAgICAgIGlmIChfLmlzRW1wdHkocmF3UXVlcnlTdHJpbmcpKSB7XHJcbiAgICAgICAgICAgICAgICBzcGxpdHRlciA9ICcvPyc7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBxczogc3RyaW5nID0gYCR7cmF3UXVlcnlTdHJpbmd9JHtzcGxpdHRlcn0ke3ZhbHVlfWA7XHJcblxyXG4gICAgICAgICAgICB2YXIgdXJsczogc3RyaW5nW10gPSB3aW5kb3cubG9jYXRpb24uaHJlZi5zcGxpdCgnPycsIDIpO1xyXG4gICAgICAgICAgICB2YXIgdXJsOiBzdHJpbmcgPSBgJHt1cmxzWzBdfSR7cXN9YDtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB1cmw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBkb2VzVXJsQ29udGFpblF1ZXJ5U3RyaW5nKHVybDogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHZhciByZWdleDogUmVnRXhwID0gbmV3IFJlZ0V4cCgnKFxcXFw/fFxcXFwmKScgKyB2YWx1ZSwgJ2knKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiByZWdleC50ZXN0KHVybCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBnZXRBamF4RmFpbGVkRXJyb3JNZXNzYWdlKCk6IHN0cmluZyB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gTG9jYWxpemF0aW9uUHJvdmlkZXIuaW5zdGFuY2UoKS5nZXRMb2NhbGl6ZWRTdHJpbmcoJ0dlbmVyYWwnLCAnTF9FcnJvckFqYXhGYWlsZWQnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGdldFVuYXV0aG9yaXplZEVycm9yTWVzc2FnZSgpOiBzdHJpbmcge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIExvY2FsaXphdGlvblByb3ZpZGVyLmluc3RhbmNlKCkuZ2V0TG9jYWxpemVkU3RyaW5nKCdHZW5lcmFsJywgJ0xfRXJyb3JVbmF1dGhvcml6ZWQnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG5cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSU1lbWJlcnNoaXBSZXBvc2l0b3J5IHtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgKiBBdHRlbXB0IHRvIExvZyBJbiB1c2luZyBDb21wb3NlciBBUEkuXHJcbiAgICAgICAgKiBAcGFyYW1cclxuICAgICAgICAqL1xyXG4gICAgICAgIGxvZ2luKGZvcm1EYXRhOiBhbnksIHJldHVyblVybDogc3RyaW5nKTogUS5Qcm9taXNlPGFueT47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICogTG9nb3V0IHVzaW5nIENvbXBvc2VyIEFQSS5cclxuICAgICAgICAqIEBwYXJhbVxyXG4gICAgICAgICovXHJcbiAgICAgICAgbG9nb3V0KHJldHVyblVybDogc3RyaW5nLCBwcmVzZXJ2ZUN1c3RvbWVySW5mbzogYm9vbGVhbik6IFEuUHJvbWlzZTxhbnk+O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAqIEF0dGVtcHQgdG8gcmVnaXN0ZXIgdXNpbmcgQ29tcG9zZXIgQVBJLlxyXG4gICAgICAgICogQHBhcmFtXHJcbiAgICAgICAgKi9cclxuICAgICAgICByZWdpc3Rlcihmb3JtRGF0YTogYW55LCByZXR1cm5Vcmw6IHN0cmluZyk6IFEuUHJvbWlzZTxhbnk+O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAqIEF0dGVtcHQgdG8gdHJpZ2dlciB0aGUgZm9yZ290IHBhc3N3b3JkIGVtYWlsIHVzaW5nIENvbXBvc2VyIEFQSS5cclxuICAgICAgICAqIEBwYXJhbVxyXG4gICAgICAgICovXHJcbiAgICAgICAgZm9yZ290UGFzc3dvcmQoZm9ybURhdGE6IGFueSk6IFEuUHJvbWlzZTxhbnk+O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAqIEF0dGVtcHQgdG8gcmVzZXQgcGFzc3dvcmQgZm9yIHRoZSBDdXN0b21lciBpZGVudGlmaWVkIGJ5IHRoZSB0aWNrZXQgdXNpbmcgQ29tcG9zZXIgQVBJLlxyXG4gICAgICAgICogQHBhcmFtXHJcbiAgICAgICAgKi9cclxuICAgICAgICByZXNldFBhc3N3b3JkKGZvcm1EYXRhOiBhbnksIHRpY2tldDogc3RyaW5nLCByZXR1cm5Vcmw6IHN0cmluZyk6IFEuUHJvbWlzZTxhbnk+O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAqIEF0dGVtcHQgdG8gY2hhbmdlIHRoZSBwYXNzd29yZCBmb3IgdGhlIGNvbm5lY3RlZCBDdXN0b21lciB1c2luZyBDb21wb3NlciBBUEkuXHJcbiAgICAgICAgKiBAcGFyYW1cclxuICAgICAgICAqL1xyXG4gICAgICAgIGNoYW5nZVBhc3N3b3JkKGZvcm1EYXRhOiBhbnksIHJldHVyblVybDogc3RyaW5nKTogUS5Qcm9taXNlPGFueT47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIElmIHRoZSBjdXJyZW50IHVzZXIgaXMgYXV0aGVudGljYXRlZCBvciBub3RcclxuICAgICAgICAgKi9cclxuICAgICAgICBpc0F1dGhlbnRpY2F0ZWQoKTogUS5Qcm9taXNlPGFueT47XHJcbiAgICB9XHJcbn0iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L012Yy9Db21wb3NlckNsaWVudC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9FdmVudHMvRXZlbnRIdWIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nSU1lbWJlcnNoaXBSZXBvc2l0b3J5LnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIE1lbWJlcnNoaXBSZXBvc2l0b3J5IGltcGxlbWVudHMgSU1lbWJlcnNoaXBSZXBvc2l0b3J5IHtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgKiBBdHRlbXB0IHRvIExvZyBJbiB1c2luZyBDb21wb3NlciBBUEkuXHJcbiAgICAgICAgKiBAcGFyYW1cclxuICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBsb2dpbihmb3JtRGF0YTogYW55LCByZXR1cm5Vcmw6IHN0cmluZyk6IFEuUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSBfLmV4dGVuZCh7IFJldHVyblVybDogcmV0dXJuVXJsIH0sIGZvcm1EYXRhKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBDb21wb3NlckNsaWVudC5wb3N0KCcvYXBpL21lbWJlcnNoaXAvbG9naW4nLCBkYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICogTG9nb3V0IHVzaW5nIENvbXBvc2VyIEFQSS5cclxuICAgICAgICAqIEBwYXJhbVxyXG4gICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGxvZ291dChyZXR1cm5Vcmw6IHN0cmluZyA9ICcnLCBwcmVzZXJ2ZUN1c3RvbWVySW5mbzogYm9vbGVhbiA9IGZhbHNlKTogUS5Qcm9taXNlPGFueT4ge1xyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIFJldHVyblVybDogcmV0dXJuVXJsLFxyXG4gICAgICAgICAgICAgICAgUHJlc2VydmVDdXN0b21lckluZm86IHByZXNlcnZlQ3VzdG9tZXJJbmZvXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gQ29tcG9zZXJDbGllbnQucG9zdCgnL2FwaS9tZW1iZXJzaGlwL2xvZ291dCcsIGRhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgKiBBdHRlbXB0IHRvIHJlZ2lzdGVyIHVzaW5nIENvbXBvc2VyIEFQSS5cclxuICAgICAgICAqIEBwYXJhbVxyXG4gICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHJlZ2lzdGVyKGZvcm1EYXRhOiBhbnksIHJldHVyblVybDogc3RyaW5nKTogUS5Qcm9taXNlPGFueT4ge1xyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IF8uZXh0ZW5kKHsgUmV0dXJuVXJsOiByZXR1cm5VcmwgfSwgZm9ybURhdGEpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIENvbXBvc2VyQ2xpZW50LnBvc3QoJy9hcGkvbWVtYmVyc2hpcC9yZWdpc3RlcicsIGRhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgKiBBdHRlbXB0IHRvIHRyaWdnZXIgdGhlIGZvcmdvdCBwYXNzd29yZCBlbWFpbCB1c2luZyBDb21wb3NlciBBUEkuXHJcbiAgICAgICAgKiBAcGFyYW1cclxuICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBmb3Jnb3RQYXNzd29yZChmb3JtRGF0YTogYW55KTogUS5Qcm9taXNlPGFueT4ge1xyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IF8uZXh0ZW5kKHt9LCBmb3JtRGF0YSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gQ29tcG9zZXJDbGllbnQucG9zdCgnL2FwaS9tZW1iZXJzaGlwL2ZvcmdvdHBhc3N3b3JkJywgZGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAqIEF0dGVtcHQgdG8gcmVzZXQgcGFzc3dvcmQgZm9yIHRoZSBDdXN0b21lciBpZGVudGlmaWVkIGJ5IHRoZSB0aWNrZXQgdXNpbmcgQ29tcG9zZXIgQVBJLlxyXG4gICAgICAgICogQHBhcmFtXHJcbiAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgcmVzZXRQYXNzd29yZChmb3JtRGF0YTogYW55LCB0aWNrZXQ6IHN0cmluZywgcmV0dXJuVXJsOiBzdHJpbmcpOiBRLlByb21pc2U8YW55PiB7XHJcbiAgICAgICAgICAgIHZhciBkYXRhID0gXy5leHRlbmQoeyBSZXR1cm5Vcmw6IHJldHVyblVybCwgdGlja2V0OiB0aWNrZXQgfSwgZm9ybURhdGEpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIENvbXBvc2VyQ2xpZW50LnBvc3QoJy9hcGkvbWVtYmVyc2hpcC9yZXNldHBhc3N3b3JkJywgZGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAqIEF0dGVtcHQgdG8gY2hhbmdlIHRoZSBwYXNzd29yZCBmb3IgdGhlIGNvbm5lY3RlZCBDdXN0b21lciB1c2luZyBDb21wb3NlciBBUEkuXHJcbiAgICAgICAgKiBAcGFyYW1cclxuICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBjaGFuZ2VQYXNzd29yZChmb3JtRGF0YTogYW55LCByZXR1cm5Vcmw6IHN0cmluZyk6IFEuUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSBfLmV4dGVuZCh7IFJldHVyblVybDogcmV0dXJuVXJsIH0sIGZvcm1EYXRhKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBDb21wb3NlckNsaWVudC5wb3N0KCcvYXBpL21lbWJlcnNoaXAvY2hhbmdlcGFzc3dvcmQnLCBkYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIElmIHRoZSBjdXJyZW50IHVzZXIgaXMgYXV0aGVudGljYXRlZCBvciBub3RcclxuICAgICAgICAgKi9cclxuICAgICAgICAgcHVibGljIGlzQXV0aGVudGljYXRlZCgpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gQ29tcG9zZXJDbGllbnQuZ2V0KCcvYXBpL21lbWJlcnNoaXAvaXNBdXRoZW50aWNhdGVkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSU1lbWJlcnNoaXBTZXJ2aWNlIHtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgKiBBdHRlbXB0IHRvIExvZyBJbiB1c2luZyBDb21wb3NlciBBUEkuXHJcbiAgICAgICAgKiBAcGFyYW1cclxuICAgICAgICAqL1xyXG4gICAgICAgIGxvZ2luKGZvcm1EYXRhOiBhbnksIHJldHVyblVybDogc3RyaW5nKTogUS5Qcm9taXNlPGFueT47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICogTG9nb3V0IHVzaW5nIENvbXBvc2VyIEFQSS5cclxuICAgICAgICAqIEBwYXJhbVxyXG4gICAgICAgICovXHJcbiAgICAgICAgbG9nb3V0KHJldHVyblVybDogc3RyaW5nLCBwcmVzZXJ2ZUN1c3RvbWVySW5mbzogYm9vbGVhbik6IFEuUHJvbWlzZTxhbnk+O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAqIEF0dGVtcHQgdG8gcmVnaXN0ZXIgdXNpbmcgQ29tcG9zZXIgQVBJLlxyXG4gICAgICAgICogQHBhcmFtXHJcbiAgICAgICAgKi9cclxuICAgICAgICByZWdpc3Rlcihmb3JtRGF0YTogYW55LCByZXR1cm5Vcmw6IHN0cmluZyk6IFEuUHJvbWlzZTxhbnk+O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAqIEF0dGVtcHQgdG8gdHJpZ2dlciB0aGUgZm9yZ290IHBhc3N3b3JkIGVtYWlsIHVzaW5nIENvbXBvc2VyIEFQSS5cclxuICAgICAgICAqIEBwYXJhbVxyXG4gICAgICAgICovXHJcbiAgICAgICAgZm9yZ290UGFzc3dvcmQoZm9ybURhdGE6IGFueSk6IFEuUHJvbWlzZTxhbnk+O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAqIEF0dGVtcHQgdG8gcmVzZXQgcGFzc3dvcmQgZm9yIHRoZSBDdXN0b21lciBpZGVudGlmaWVkIGJ5IHRoZSB0aWNrZXQgdXNpbmcgQ29tcG9zZXIgQVBJLlxyXG4gICAgICAgICogQHBhcmFtXHJcbiAgICAgICAgKi9cclxuICAgICAgICByZXNldFBhc3N3b3JkKGZvcm1EYXRhOiBhbnksIHRpY2tldDogc3RyaW5nLCByZXR1cm5Vcmw6IHN0cmluZyk6IFEuUHJvbWlzZTxhbnk+O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAqIEF0dGVtcHQgdG8gY2hhbmdlIHRoZSBwYXNzd29yZCBmb3IgdGhlIGNvbm5lY3RlZCBDdXN0b21lciB1c2luZyBDb21wb3NlciBBUEkuXHJcbiAgICAgICAgKiBAcGFyYW1cclxuICAgICAgICAqL1xyXG4gICAgICAgIGNoYW5nZVBhc3N3b3JkKGZvcm1EYXRhOiBhbnksIHJldHVyblVybDogc3RyaW5nKTogUS5Qcm9taXNlPGFueT47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIElmIHRoZSBjdXJyZW50IHVzZXIgaXMgYXV0aGVudGljYXRlZCBvciBub3RcclxuICAgICAgICAgKi9cclxuICAgICAgICBpc0F1dGhlbnRpY2F0ZWQoKTogUS5Qcm9taXNlPGFueT47XHJcbiAgICB9XHJcbn0iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L1JlcG9zaXRvcmllcy9NZW1iZXJzaGlwUmVwb3NpdG9yeS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPSdJTWVtYmVyc2hpcFNlcnZpY2UudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgTWVtYmVyc2hpcFNlcnZpY2UgaW1wbGVtZW50cyBJTWVtYmVyc2hpcFNlcnZpY2Uge1xyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgbWVtb2l6ZUlzQXV0aGVudGljYXRlZDogRnVuY3Rpb247XHJcbiAgICAgICAgcHJvdGVjdGVkIG1lbWJlcnNoaXBSZXBvc2l0b3J5OiBJTWVtYmVyc2hpcFJlcG9zaXRvcnk7XHJcblxyXG4gICAgICAgIGNvbnN0cnVjdG9yKG1lbWJlcnNoaXBSZXBvc2l0b3J5OiBJTWVtYmVyc2hpcFJlcG9zaXRvcnkpIHtcclxuXHJcbiAgICAgICAgICAgIGlmICghbWVtYmVyc2hpcFJlcG9zaXRvcnkpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3I6IG1lbWJlcnNoaXBSZXBvc2l0b3J5IGlzIHJlcXVpcmVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMubWVtYmVyc2hpcFJlcG9zaXRvcnkgPSBtZW1iZXJzaGlwUmVwb3NpdG9yeTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICogQXR0ZW1wdCB0byBMb2cgSW4gdXNpbmcgQ29tcG9zZXIgQVBJLlxyXG4gICAgICAgICogQHBhcmFtXHJcbiAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgbG9naW4oZm9ybURhdGE6IGFueSwgcmV0dXJuVXJsOiBzdHJpbmcpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tZW1iZXJzaGlwUmVwb3NpdG9yeS5sb2dpbihmb3JtRGF0YSwgcmV0dXJuVXJsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICogTG9nb3V0IHVzaW5nIENvbXBvc2VyIEFQSS5cclxuICAgICAgICAqIEBwYXJhbVxyXG4gICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGxvZ291dChyZXR1cm5Vcmw6IHN0cmluZyA9ICcnLCBwcmVzZXJ2ZUN1c3RvbWVySW5mbzogYm9vbGVhbiA9IGZhbHNlKTogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubWVtYmVyc2hpcFJlcG9zaXRvcnkubG9nb3V0KHJldHVyblVybCwgcHJlc2VydmVDdXN0b21lckluZm8pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgKiBBdHRlbXB0IHRvIHJlZ2lzdGVyIHVzaW5nIENvbXBvc2VyIEFQSS5cclxuICAgICAgICAqIEBwYXJhbVxyXG4gICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHJlZ2lzdGVyKGZvcm1EYXRhOiBhbnksIHJldHVyblVybDogc3RyaW5nKTogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubWVtYmVyc2hpcFJlcG9zaXRvcnkucmVnaXN0ZXIoZm9ybURhdGEsIHJldHVyblVybCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAqIEF0dGVtcHQgdG8gdHJpZ2dlciB0aGUgZm9yZ290IHBhc3N3b3JkIGVtYWlsIHVzaW5nIENvbXBvc2VyIEFQSS5cclxuICAgICAgICAqIEBwYXJhbVxyXG4gICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGZvcmdvdFBhc3N3b3JkKGZvcm1EYXRhOiBhbnkpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tZW1iZXJzaGlwUmVwb3NpdG9yeS5mb3Jnb3RQYXNzd29yZChmb3JtRGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAqIEF0dGVtcHQgdG8gcmVzZXQgcGFzc3dvcmQgZm9yIHRoZSBDdXN0b21lciBpZGVudGlmaWVkIGJ5IHRoZSB0aWNrZXQgdXNpbmcgQ29tcG9zZXIgQVBJLlxyXG4gICAgICAgICogQHBhcmFtXHJcbiAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgcmVzZXRQYXNzd29yZChmb3JtRGF0YTogYW55LCB0aWNrZXQ6IHN0cmluZywgcmV0dXJuVXJsOiBzdHJpbmcpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tZW1iZXJzaGlwUmVwb3NpdG9yeS5yZXNldFBhc3N3b3JkKGZvcm1EYXRhLCB0aWNrZXQsIHJldHVyblVybCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAqIEF0dGVtcHQgdG8gY2hhbmdlIHRoZSBwYXNzd29yZCBmb3IgdGhlIGNvbm5lY3RlZCBDdXN0b21lciB1c2luZyBDb21wb3NlciBBUEkuXHJcbiAgICAgICAgKiBAcGFyYW1cclxuICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBjaGFuZ2VQYXNzd29yZChmb3JtRGF0YTogYW55LCByZXR1cm5Vcmw6IHN0cmluZyk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1lbWJlcnNoaXBSZXBvc2l0b3J5LmNoYW5nZVBhc3N3b3JkKGZvcm1EYXRhLCByZXR1cm5VcmwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSWYgdGhlIGN1cnJlbnQgdXNlciBpcyBhdXRoZW50aWNhdGVkIG9yIG5vdFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgICBwdWJsaWMgaXNBdXRoZW50aWNhdGVkKCk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIGlmIChfLmlzVW5kZWZpbmVkKHRoaXMubWVtb2l6ZUlzQXV0aGVudGljYXRlZCkpIHtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLm1lbW9pemVJc0F1dGhlbnRpY2F0ZWQgPSBfLm1lbW9pemUoYXJnID0+IHRoaXMuaXNBdXRoZW50aWNhdGVkSW1wbCgpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubWVtb2l6ZUlzQXV0aGVudGljYXRlZCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSWYgdGhlIGN1cnJlbnQgdXNlciBpcyBhdXRoZW50aWNhdGVkIG9yIG5vdFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgICBwcm90ZWN0ZWQgaXNBdXRoZW50aWNhdGVkSW1wbCgpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tZW1iZXJzaGlwUmVwb3NpdG9yeS5pc0F1dGhlbnRpY2F0ZWQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvQ29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L2pxdWVyeVBsdWdpbnMvSVNlcmlhbGl6ZU9iamVjdEpxdWVyeVBsdWdpbi50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21tb24vU291cmNlL1R5cGVzY3JpcHQvTWVtYmVyc2hpcFNlcnZpY2UudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuXHJcbiAgICBleHBvcnQgZW51bSBNeUFjY291bnRFdmVudHMge1xyXG4gICAgICAgIEFjY291bnRDcmVhdGVkLFxyXG4gICAgICAgIEFjY291bnRVcGRhdGVkLFxyXG4gICAgICAgIEFkZHJlc3NDcmVhdGVkLFxyXG4gICAgICAgIEFkZHJlc3NVcGRhdGVkLFxyXG4gICAgICAgIEFkZHJlc3NEZWxldGVkLFxyXG4gICAgICAgIExvZ2dlZEluLFxyXG4gICAgICAgIExvZ2dlZE91dCxcclxuICAgICAgICBQYXNzd29yZENoYW5nZWQsXHJcbiAgICAgICAgRm9yZ290UGFzc3dvcmRJbnN0cnVjdGlvblNlbnRcclxuICAgIH07XHJcbn1cclxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJXFxTb3VyY2VcXFR5cGVzY3JpcHRcXEV2ZW50c1xcRXZlbnRIdWIudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4vSUFuYWx5dGljc1BsdWdpbi50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi9JQW5hbHl0aWNzT3JkZXIudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4vSUFuYWx5dGljc1RyYW5zYWN0aW9uLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuL0lBbmFseXRpY3NTZWFyY2hGaWx0ZXJzLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9QbHVnaW5zL0lQbHVnaW4udHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLk15QWNjb3VudC5VSS9Db21tb24vU291cmNlL1R5cGVzY3JpcHQvTXlBY2NvdW50RXZlbnRzLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgY2xhc3MgQW5hbHl0aWNzUGx1Z2luIGltcGxlbWVudHMgSUFuYWx5dGljc1BsdWdpbiwgSVBsdWdpbiB7XHJcbiAgICAgICAgcHJvdGVjdGVkIGNhY2hlUHJvdmlkZXI6IElDYWNoZVByb3ZpZGVyO1xyXG4gICAgICAgIHByb3RlY3RlZCBldmVudEh1YjogSUV2ZW50SHViO1xyXG4gICAgICAgIHByb3RlY3RlZCB1c2VWYXJpYW50SWRXaGVuUG9zc2libGU6IGJvb2xlYW47XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKCkge1xyXG4gICAgICAgICAgICB0aGlzLnVzZVZhcmlhbnRJZFdoZW5Qb3NzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIgPSBFdmVudEh1Yi5pbnN0YW5jZSgpO1xyXG4gICAgICAgICAgICB0aGlzLmNhY2hlUHJvdmlkZXIgPSBDYWNoZVByb3ZpZGVyLmluc3RhbmNlKCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJTdWJzY3JpcHRpb25zKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHNldENoZWNrb3V0T3JpZ2luKGNoZWNrb3V0T3JpZ2luOiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgQ2FjaGVQcm92aWRlci5pbnN0YW5jZSgpLnNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ2FuYWx5dGljcy5jaGVja291dE9yaWdpbicsIGNoZWNrb3V0T3JpZ2luKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgZ2V0Q2hlY2tvdXRPcmlnaW4oKTogc3RyaW5nIHtcclxuICAgICAgICAgICAgcmV0dXJuIENhY2hlUHJvdmlkZXIuaW5zdGFuY2UoKS5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCdhbmFseXRpY3MuY2hlY2tvdXRPcmlnaW4nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEJpbmRzIGFsbCB0aGUgZXZlbnRzIGZvciBBbmFseXRpY3NcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgcmVnaXN0ZXJTdWJzY3JpcHRpb25zKCkge1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnN1YnNjcmliZSgnbGluZUl0ZW1BZGRpbmcnLCAoZXZlbnRJbmZvOiBJRXZlbnRJbmZvcm1hdGlvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkxpbmVJdGVtQWRkaW5nKGV2ZW50SW5mbyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5zdWJzY3JpYmUoJ2xpbmVJdGVtUmVtb3ZpbmcnLCAoZXZlbnRJbmZvOiBJRXZlbnRJbmZvcm1hdGlvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkxpbmVJdGVtUmVtb3ZpbmcoZXZlbnRJbmZvKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnN1YnNjcmliZSgncHJvZHVjdERldGFpbHNSZW5kZXJlZCcsIChldmVudEluZm86IElFdmVudEluZm9ybWF0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uUHJvZHVjdERldGFpbHNSZW5kZXJlZChldmVudEluZm8pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIuc3Vic2NyaWJlKCdjaGVja291dFN0ZXBSZW5kZXJlZCcsIChldmVudEluZm86IElFdmVudEluZm9ybWF0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uQ2hlY2tvdXRTdGVwUmVuZGVyZWQoZXZlbnRJbmZvKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnN1YnNjcmliZSgnY2hlY2tvdXROYXZpZ2F0aW9uUmVuZGVyZWQnLCAoZXZlbnRJbmZvOiBJRXZlbnRJbmZvcm1hdGlvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkNoZWNrb3V0TmF2aWdhdGlvblJlbmRlcmVkKGV2ZW50SW5mbyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5zdWJzY3JpYmUoJ0NoZWNrb3V0Q29uZmlybWF0aW9uJywgKGV2ZW50SW5mbzogSUV2ZW50SW5mb3JtYXRpb24pID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25DaGVja291dENvbXBsZXRlZChldmVudEluZm8pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIuc3Vic2NyaWJlKCdzZWFyY2hSZXN1bHRSZW5kZXJlZCcsIChldmVudEluZm86IElFdmVudEluZm9ybWF0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uU2VhcmNoUmVzdWx0UmVuZGVyZWQoZXZlbnRJbmZvKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnN1YnNjcmliZSgncmVsYXRlZFByb2R1Y3RzTG9hZGVkJywgKGV2ZW50SW5mbzogSUV2ZW50SW5mb3JtYXRpb24pID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25SZWxhdGVkUHJvZHVjdHNMb2FkZWQoZXZlbnRJbmZvKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnN1YnNjcmliZSgncHJvZHVjdENsaWNrJywgKGV2ZW50SW5mbzogSUV2ZW50SW5mb3JtYXRpb24pID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25Qcm9kdWN0Q2xpY2soZXZlbnRJbmZvKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnN1YnNjcmliZSgncGFnZU5vdEZvdW5kJywgKGV2ZW50SW5mbzogSUV2ZW50SW5mb3JtYXRpb24pID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25QYWdlTm90Rm91bmQoZXZlbnRJbmZvKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnN1YnNjcmliZSgnd2lzaExpc3RMaW5lSXRlbUFkZGluZycsIChldmVudEluZm86IElFdmVudEluZm9ybWF0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uV2lzaExpc3RMaW5lSXRlbUFkZGluZyhldmVudEluZm8pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIuc3Vic2NyaWJlKCd3aXNoTGlzdExpbmVJdGVtQWRkaW5nVG9DYXJ0JywgKGV2ZW50SW5mbzogSUV2ZW50SW5mb3JtYXRpb24pID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25MaW5lSXRlbUFkZGluZyhldmVudEluZm8pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIuc3Vic2NyaWJlKCd3aXNoTGlzdENvcHlpbmdTaGFyZVVybCcsIChldmVudEluZm86IElFdmVudEluZm9ybWF0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uV2lzaExpc3RDb3BpbmdTaGFyZVVybChldmVudEluZm8pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIuc3Vic2NyaWJlKE15QWNjb3VudEV2ZW50c1tNeUFjY291bnRFdmVudHMuTG9nZ2VkSW5dLCAoZXZlbnRJbmZvOiBJRXZlbnRJbmZvcm1hdGlvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vblVzZXJMb2dnZWRJbihldmVudEluZm8pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIuc3Vic2NyaWJlKE15QWNjb3VudEV2ZW50c1tNeUFjY291bnRFdmVudHMuQWNjb3VudENyZWF0ZWRdLCAoZXZlbnRJbmZvOiBJRXZlbnRJbmZvcm1hdGlvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vblVzZXJDcmVhdGVkKGV2ZW50SW5mbyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5zdWJzY3JpYmUoTXlBY2NvdW50RXZlbnRzW015QWNjb3VudEV2ZW50cy5Gb3Jnb3RQYXNzd29yZEluc3RydWN0aW9uU2VudF0sIChldmVudEluZm86IElFdmVudEluZm9ybWF0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uUmVjb3ZlclBhc3N3b3JkKGV2ZW50SW5mbyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5zdWJzY3JpYmUoJ25vUmVzdWx0c0ZvdW5kJywgKGV2ZW50SW5mbzogSUV2ZW50SW5mb3JtYXRpb24pID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25Ob1Jlc3VsdHNGb3VuZChldmVudEluZm8pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIuc3Vic2NyaWJlKCdzZWFyY2hUZXJtQ29ycmVjdGVkJywgKGV2ZW50SW5mbzogSUV2ZW50SW5mb3JtYXRpb24pID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25TZWFyY2hUZXJtQ29ycmVjdGVkKGV2ZW50SW5mbyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5zdWJzY3JpYmUoJ3NpbmdsZUNhdGVnb3J5QWRkZWQnLCAoZXZlbnRJbmZvOiBJRXZlbnRJbmZvcm1hdGlvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vblNpbmdsZUZhY2V0Q2hhbmdlZChldmVudEluZm8pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIuc3Vic2NyaWJlKCdzaW5nbGVGYWNldHNDaGFuZ2VkJywgKGV2ZW50SW5mbzogSUV2ZW50SW5mb3JtYXRpb24pID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25TaW5nbGVGYWNldENoYW5nZWQoZXZlbnRJbmZvKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnN1YnNjcmliZSgnbXVsdGlGYWNldENoYW5nZWQnLCAoZXZlbnRJbmZvOiBJRXZlbnRJbmZvcm1hdGlvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbk11bHRpRmFjZXRDaGFuZ2VkKGV2ZW50SW5mbyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5zdWJzY3JpYmUoJ3NvcnRpbmdDaGFuZ2VkJywgKGV2ZW50SW5mbzogSUV2ZW50SW5mb3JtYXRpb24pID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25Tb3J0aW5nQ2hhbmdlZChldmVudEluZm8pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIE9jY3VycyB3aGVuIGEgdXNlciBsb2cgaW5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwcm90ZWN0ZWQgb25Vc2VyTG9nZ2VkSW4oZXZlbnRJbmZvOiBJRXZlbnRJbmZvcm1hdGlvbik6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAoIWV2ZW50SW5mbykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IGV2ZW50SW5mby5kYXRhO1xyXG5cclxuICAgICAgICAgICAgdGhpcy51c2VyTG9nZ2VkSW4oJ3JlZ3VsYXInLCBkYXRhLlJldHVyblVybCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBPY2N1cnMgd2hlbiBhIHVzZXIgY3JlYXRlcyBhbiBhY2NvdW50XHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uVXNlckNyZWF0ZWQoZXZlbnRJbmZvOiBJRXZlbnRJbmZvcm1hdGlvbik6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAoIWV2ZW50SW5mbykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnVzZXJDcmVhdGVkKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBPY2N1cnMgd2hlbiBhIHVzZXIgbG9nIGluXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uUmVjb3ZlclBhc3N3b3JkKGV2ZW50SW5mbzogSUV2ZW50SW5mb3JtYXRpb24pOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKCFldmVudEluZm8pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5yZWNvdmVyUGFzc3dvcmQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvblNpbmdsZUZhY2V0Q2hhbmdlZChldmVudEluZm86IElFdmVudEluZm9ybWF0aW9uKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICghZXZlbnRJbmZvKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBldmVudEluZm8uZGF0YTtcclxuICAgICAgICAgICAgbGV0IGZhY2V0S2V5ID0gZGF0YS5mYWNldEtleTtcclxuICAgICAgICAgICAgaWYgKF8uaXNTdHJpbmcoZGF0YS5mYWNldEtleSkpIHtcclxuICAgICAgICAgICAgICAgIGZhY2V0S2V5ID0gZGF0YS5mYWNldEtleS5yZXBsYWNlKCdbXScsICcnKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGZhY2V0S2V5LmluZGV4T2YoJ2NhdGVnb3J5JykgIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmFjZXRLZXkgPSAnY2F0ZWdvcnknO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgbGV0IHNlYXJjaEZpbHRlcnM6IElBbmFseXRpY3NTZWFyY2hGaWx0ZXJzID0ge1xyXG4gICAgICAgICAgICAgICAgZmFjZXRLZXk6IGZhY2V0S2V5LFxyXG4gICAgICAgICAgICAgICAgZmFjZXRWYWx1ZTogZGF0YS5mYWNldFZhbHVlLFxyXG4gICAgICAgICAgICAgICAgcGFnZVR5cGU6IGRhdGEucGFnZVR5cGVcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2luZ2xlRmFjZXRDaGFuZ2VkKHNlYXJjaEZpbHRlcnMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uTXVsdGlGYWNldENoYW5nZWQoZXZlbnRJbmZvOiBJRXZlbnRJbmZvcm1hdGlvbik6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAoIWV2ZW50SW5mbykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IGV2ZW50SW5mby5kYXRhO1xyXG5cclxuICAgICAgICAgICAgbGV0IGZhY2V0S2V5ID0gXy5pc1N0cmluZyhkYXRhLmZhY2V0S2V5KSA/IGRhdGEuZmFjZXRLZXkucmVwbGFjZSgnW10nLCAnJykudG9Mb3dlckNhc2UoKSA6IGRhdGEuZmFjZXRLZXk7XHJcblxyXG4gICAgICAgICAgICB2YXIgc2VhcmNoRmlsdGVyczogSUFuYWx5dGljc1NlYXJjaEZpbHRlcnMgPSB7XHJcbiAgICAgICAgICAgICAgICBmYWNldEtleTogZmFjZXRLZXksXHJcbiAgICAgICAgICAgICAgICBmYWNldFZhbHVlOiBkYXRhLmZhY2V0VmFsdWUsXHJcbiAgICAgICAgICAgICAgICBwYWdlVHlwZTogZGF0YS5wYWdlVHlwZVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdGhpcy5tdWx0aUZhY2V0Q2hhbmdlZChzZWFyY2hGaWx0ZXJzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvblNvcnRpbmdDaGFuZ2VkKGV2ZW50SW5mbzogSUV2ZW50SW5mb3JtYXRpb24pOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKCFldmVudEluZm8pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGRhdGEgPSBldmVudEluZm8uZGF0YTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc29ydGluZ0NoYW5nZWQoZGF0YS5zb3J0aW5nVHlwZSwgZGF0YS5wYWdlVHlwZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBPY2N1cnMgd2hlbiBhIDQwNCBwYWdlIGxvYWRzLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByb3RlY3RlZCBvblBhZ2VOb3RGb3VuZChldmVudEluZm86IElFdmVudEluZm9ybWF0aW9uKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICghZXZlbnRJbmZvKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhID0gZXZlbnRJbmZvLmRhdGE7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNlbmRFdmVudCgnZXZlbnQnLCAnNDA0IEVycm9ycycsIGRhdGEuUGFnZVVybCwgZGF0YS5SZWZlcnJlclVybCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAqIE9jY3VycyB3aGVuIGEgdXNlciBjbGljayBvbiAnQ29weSBTaGFyZSBVcmwnIGJ1dHRvblxyXG4gICAgICAgICovXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uV2lzaExpc3RDb3BpbmdTaGFyZVVybChldmVudEluZm86IElFdmVudEluZm9ybWF0aW9uKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICghZXZlbnRJbmZvKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIGRhdGEgPSBldmVudEluZm8uZGF0YTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2hhcmVXaXNoTGlzdChkYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIE9jY3VycyB3aGVuIGEgTGluZSBJdGVtIGlzIGJlaW5nIGFkZGVkIHRvIHRoZSBXaXNoIExpc3QuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uV2lzaExpc3RMaW5lSXRlbUFkZGluZyhldmVudEluZm86IElFdmVudEluZm9ybWF0aW9uKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICghZXZlbnRJbmZvKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhID0gZXZlbnRJbmZvLmRhdGE7XHJcbiAgICAgICAgICAgIHZhciBhbmFseXRpY3NQcm9kdWN0OiBJQW5hbHl0aWNzUHJvZHVjdCA9IHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IGRhdGEuRGlzcGxheU5hbWUsXHJcbiAgICAgICAgICAgICAgICBwcmljZTogdGhpcy50cmltUHJpY2UoZGF0YS5MaXN0UHJpY2UpXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB0aGlzLmFkZFRvV2lzaExpc3QoYW5hbHl0aWNzUHJvZHVjdCk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogT2NjdXJzIHdoZW4gYSBMaW5lIEl0ZW0gaXMgYmVpbmcgYWRkZWQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uTGluZUl0ZW1BZGRpbmcoZXZlbnRJbmZvOiBJRXZlbnRJbmZvcm1hdGlvbik6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAoIWV2ZW50SW5mbykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IGV2ZW50SW5mby5kYXRhO1xyXG4gICAgICAgICAgICB2YXIgYW5hbHl0aWNzUHJvZHVjdDogSUFuYWx5dGljc1Byb2R1Y3QgPSB7XHJcbiAgICAgICAgICAgICAgICBuYW1lOiBkYXRhLkRpc3BsYXlOYW1lLFxyXG4gICAgICAgICAgICAgICAgaWQ6IGRhdGEuUHJvZHVjdElkLFxyXG4gICAgICAgICAgICAgICAgdmFyaWFudDogZGF0YS5WYXJpYW50LFxyXG4gICAgICAgICAgICAgICAgcHJpY2U6IHRoaXMudHJpbVByaWNlQW5kVW5sb2NhbGl6ZShkYXRhLkxpc3RQcmljZSksXHJcbiAgICAgICAgICAgICAgICBxdWFudGl0eTogZGF0YS5RdWFudGl0eSxcclxuICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBkYXRhLkNhdGVnb3J5SWQsXHJcbiAgICAgICAgICAgICAgICBicmFuZDogZGF0YS5CcmFuZCxcclxuICAgICAgICAgICAgICAgIGxpc3Q6IGRhdGEuTGlzdFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdGhpcy5hZGRUb0NhcnQoYW5hbHl0aWNzUHJvZHVjdCwgZGF0YS5MaXN0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIE9jY3VycyB3aGVuIGEgTGluZSBpdGVtIGlzIGJlaW5nIHJlbW92ZWQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uTGluZUl0ZW1SZW1vdmluZyhldmVudEluZm86IElFdmVudEluZm9ybWF0aW9uKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICghZXZlbnRJbmZvKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhID0gZXZlbnRJbmZvLmRhdGE7XHJcbiAgICAgICAgICAgIHZhciBhbmFseXRpY3NQcm9kdWN0OiBJQW5hbHl0aWNzUHJvZHVjdCA9IHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IGRhdGEuRGlzcGxheU5hbWUsXHJcbiAgICAgICAgICAgICAgICBpZDogZGF0YS5Qcm9kdWN0SWQsXHJcbiAgICAgICAgICAgICAgICB2YXJpYW50OiBkYXRhLlZhcmlhbnQsXHJcbiAgICAgICAgICAgICAgICBwcmljZTogdGhpcy50cmltUHJpY2VBbmRVbmxvY2FsaXplKGRhdGEuTGlzdFByaWNlKSxcclxuICAgICAgICAgICAgICAgIHF1YW50aXR5OiBkYXRhLlF1YW50aXR5LFxyXG4gICAgICAgICAgICAgICAgY2F0ZWdvcnk6IGRhdGEuQ2F0ZWdvcnlJZCxcclxuICAgICAgICAgICAgICAgIGJyYW5kOiBkYXRhLkJyYW5kXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB0aGlzLnJlbW92ZUZyb21DYXJ0KGFuYWx5dGljc1Byb2R1Y3QsIGRhdGEuTGlzdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBPY2N1cnMgd2hlbiBhIHByb2R1Y3QgRGV0YWlscyBpcyByZW5kZXJlZC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwcm90ZWN0ZWQgb25Qcm9kdWN0RGV0YWlsc1JlbmRlcmVkKGV2ZW50SW5mbzogSUV2ZW50SW5mb3JtYXRpb24pOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKCFldmVudEluZm8pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGRhdGEgPSBldmVudEluZm8uZGF0YTtcclxuICAgICAgICAgICAgdmFyIGFuYWx5dGljc1Byb2R1Y3RzOiBJQW5hbHl0aWNzUHJvZHVjdFtdID0gW107XHJcblxyXG4gICAgICAgICAgICBhbmFseXRpY3NQcm9kdWN0cy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIG5hbWU6IGRhdGEuRGlzcGxheU5hbWUsXHJcbiAgICAgICAgICAgICAgICBpZDogZGF0YS5Qcm9kdWN0SWQsXHJcbiAgICAgICAgICAgICAgICBwcmljZTogdGhpcy50cmltUHJpY2VBbmRVbmxvY2FsaXplKGRhdGEuTGlzdFByaWNlKSxcclxuICAgICAgICAgICAgICAgIGJyYW5kOiBkYXRhLkJyYW5kLFxyXG4gICAgICAgICAgICAgICAgY2F0ZWdvcnk6IGRhdGEuQ2F0ZWdvcnlJZCxcclxuICAgICAgICAgICAgICAgIHZhcmlhbnQ6IGRhdGEuVmFyaWFudFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucHJvZHVjdERldGFpbEltcHJlc3Npb25zKGFuYWx5dGljc1Byb2R1Y3RzLCAnRGV0YWlsJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiAgT2NjdXJzIHdoZW4gYSBDaGVja291dCBTdGVwIGlzIHJlbmRlcmVkLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByb3RlY3RlZCBvbkNoZWNrb3V0U3RlcFJlbmRlcmVkKGV2ZW50SW5mbzogSUV2ZW50SW5mb3JtYXRpb24pOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKCFldmVudEluZm8pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGRhdGEgPSBldmVudEluZm8uZGF0YTtcclxuXHJcbiAgICAgICAgICAgIHZhciBhbmFseXRpY3NQcm9kdWN0czogSUFuYWx5dGljc1Byb2R1Y3RbXSA9IFtdO1xyXG5cclxuICAgICAgICAgICAgaWYgKGRhdGEuQ2FydCkge1xyXG4gICAgICAgICAgICAgICAgUS5yZXNvbHZlKGRhdGEuQ2FydCkudGhlbihjYXJ0ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBfLmVhY2goY2FydC5MaW5lSXRlbURldGFpbFZpZXdNb2RlbHMsIChsaW5lSXRlbURldGFpbFZpZXdNb2RlbDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhbmFseXRpY3NQcm9kdWN0OiBJQW5hbHl0aWNzUHJvZHVjdCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGxpbmVJdGVtRGV0YWlsVmlld01vZGVsLlByb2R1Y3RTdW1tYXJ5LkRpc3BsYXlOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGxpbmVJdGVtRGV0YWlsVmlld01vZGVsLlByb2R1Y3RJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByaWNlOiB0aGlzLnRyaW1QcmljZUFuZFVubG9jYWxpemUobGluZUl0ZW1EZXRhaWxWaWV3TW9kZWwuTGlzdFByaWNlKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1YW50aXR5OiBsaW5lSXRlbURldGFpbFZpZXdNb2RlbC5RdWFudGl0eSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBsaW5lSXRlbURldGFpbFZpZXdNb2RlbC5Qcm9kdWN0U3VtbWFyeS5DYXRlZ29yeUlkLnJlcGxhY2UoLy0vZywgJy8nKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhcmlhbnQ6IHRoaXMuYnVpbGRWYXJpYW50Rm9yTGluZUl0ZW0obGluZUl0ZW1EZXRhaWxWaWV3TW9kZWwpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJhbmQ6IGxpbmVJdGVtRGV0YWlsVmlld01vZGVsLlByb2R1Y3RTdW1tYXJ5LkJyYW5kXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy51c2VWYXJpYW50SWRXaGVuUG9zc2libGUgJiYgbGluZUl0ZW1EZXRhaWxWaWV3TW9kZWwuVmFyaWFudElkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmFseXRpY3NQcm9kdWN0LmlkID0gbGluZUl0ZW1EZXRhaWxWaWV3TW9kZWwuVmFyaWFudElkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbmFseXRpY3NQcm9kdWN0cy5wdXNoKGFuYWx5dGljc1Byb2R1Y3QpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgY2hlY2tvdXRPcmlnaW4gPSBBbmFseXRpY3NQbHVnaW4uZ2V0Q2hlY2tvdXRPcmlnaW4oKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgdHJhbnNhY3Rpb246IElBbmFseXRpY3NUcmFuc2FjdGlvbiA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tvdXRPcmlnaW46IGNoZWNrb3V0T3JpZ2luXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jaGVja291dChkYXRhLlN0ZXBOdW1iZXIsIHRyYW5zYWN0aW9uLCBhbmFseXRpY3NQcm9kdWN0cyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogT2NjdXJzIHdoZW4gYSB0aGUgQ2hlY2tvdXQgTmF2aWdhdGlvbiBzdHJpcCBpcyByZW5kZXJlZC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwcm90ZWN0ZWQgb25DaGVja291dE5hdmlnYXRpb25SZW5kZXJlZChldmVudEluZm86IElFdmVudEluZm9ybWF0aW9uKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICghZXZlbnRJbmZvKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhID0gZXZlbnRJbmZvLmRhdGE7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNoZWNrb3V0T3B0aW9uKGRhdGEuU3RlcE51bWJlcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBPY2N1cnMgd2hlbiBhIHRoZSBDaGVja291dCBjb21wbGV0ZXMsIGNyZWF0aW5nIGFuIG9yZGVyIG91dCBvZiBhIENhcnQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uQ2hlY2tvdXRDb21wbGV0ZWQoZXZlbnRJbmZvOiBJRXZlbnRJbmZvcm1hdGlvbik6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAoIWV2ZW50SW5mbykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IGV2ZW50SW5mby5kYXRhO1xyXG5cclxuICAgICAgICAgICAgdmFyIG9yZGVyOiBJQW5hbHl0aWNzT3JkZXIgPSB7XHJcbiAgICAgICAgICAgICAgICBpZDogZGF0YS5PcmRlck51bWJlcixcclxuICAgICAgICAgICAgICAgIGFmZmlsaWF0aW9uOiBkYXRhLkFmZmlsaWF0aW9uLFxyXG4gICAgICAgICAgICAgICAgcmV2ZW51ZTogZGF0YS5SZXZlbnUsXHJcbiAgICAgICAgICAgICAgICB0YXg6IGRhdGEuVGF4LFxyXG4gICAgICAgICAgICAgICAgc2hpcHBpbmc6IGRhdGEuU2hpcHBpbmcsXHJcbiAgICAgICAgICAgICAgICBjb3Vwb246IF8uaXNFbXB0eShkYXRhLkNvdXBvbnMpID8gJycgOiBkYXRhLkNvdXBvbnMubWFwKGMgPT4gYy5Db3Vwb25Db2RlKS5qb2luKCcsICcpLFxyXG4gICAgICAgICAgICAgICAgY3VycmVuY3lDb2RlOiBkYXRhLkJpbGxpbmdDdXJyZW5jeVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdmFyIHRyYW5zYWN0aW9uOiBJQW5hbHl0aWNzVHJhbnNhY3Rpb24gPSB0aGlzLm1hcEFuYWx5dGljVHJhbnNhY3Rpb25Gcm9tT3JkZXIoZGF0YSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgcHJvZHVjdHM6IElBbmFseXRpY3NQcm9kdWN0W10gPSB0aGlzLm1hcEFuYWx5dGljUHJvZHVjdHNGcm9tTGluZUl0ZW1zKGRhdGEpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNvdXBvbnM6IElBbmFseXRpY3NDb3Vwb25bXSA9IHRoaXMubWFwQW5hbHl0aWNDb3Vwb25zRnJvbU9yZGVyKGRhdGEpO1xyXG5cclxuICAgICAgICAgICAgXy5lYWNoKGNvdXBvbnMsIChjb3Vwb246IElBbmFseXRpY3NDb3Vwb24pID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY291cG9uc1VzZWQoY291cG9uKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnB1cmNoYXNlKG9yZGVyLCB0cmFuc2FjdGlvbiwgcHJvZHVjdHMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogT2NjdXJzIHdoZW4gdGhlIFNlYXJjaCByZXN1bHRzIG9uIGEgcGFnZSBhcmUgcmVuZGVyZWQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uU2VhcmNoUmVzdWx0UmVuZGVyZWQoZXZlbnRJbmZvOiBJRXZlbnRJbmZvcm1hdGlvbik6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAoIWV2ZW50SW5mbykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IGV2ZW50SW5mby5kYXRhO1xyXG5cclxuICAgICAgICAgICAgaWYgKGRhdGEuUHJvZHVjdFNlYXJjaFJlc3VsdHMuU2VhcmNoUmVzdWx0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcHJvZHVjdHM6IElBbmFseXRpY3NQcm9kdWN0W10gPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICBfLmVhY2goZGF0YS5Qcm9kdWN0U2VhcmNoUmVzdWx0cy5TZWFyY2hSZXN1bHRzLCAocHJvZHVjdDogYW55LCBpOiBudW1iZXIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYW5hbHl0aWNzUHJvZHVjdDogSUFuYWx5dGljc1Byb2R1Y3QgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBwcm9kdWN0LlByb2R1Y3RJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogcHJvZHVjdC5EaXNwbGF5TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJpY2U6IHRoaXMudHJpbVByaWNlQW5kVW5sb2NhbGl6ZShwcm9kdWN0LlByaWNpbmcuSXNPblNhbGUgPyBwcm9kdWN0LlByaWNpbmcuUHJpY2UgOiBwcm9kdWN0LlByaWNpbmcuTGlzdFByaWNlKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJhbmQ6IHByb2R1Y3QuQnJhbmQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBwcm9kdWN0LkNhdGVnb3J5SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpc3Q6IGRhdGEuTGlzdE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiAoaSArIDEpICsgKGRhdGEuTWF4SXRlbXNQZXJQYWdlICogKGRhdGEuUGFnZU51bWJlciAtIDEpKVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHByb2R1Y3RzLnB1c2goYW5hbHl0aWNzUHJvZHVjdCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb2R1Y3RJbXByZXNzaW9ucyhwcm9kdWN0cyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2VuZEV2ZW50KCdldmVudCcsICdTZWFyY2ggUmVzdWx0cycsICdSZW5kZXJlZCcsIGRhdGEuUHJvZHVjdFNlYXJjaFJlc3VsdHMuS2V5d29yZHMsIGRhdGEuUHJvZHVjdFNlYXJjaFJlc3VsdHMuVG90YWxDb3VudCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBPY2N1cnMgd2hlbiBSZWxhdGVkIFByb2R1Y3RzIGFyZSBsb2FkZWQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uUmVsYXRlZFByb2R1Y3RzTG9hZGVkKGV2ZW50SW5mbzogSUV2ZW50SW5mb3JtYXRpb24pOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKCFldmVudEluZm8pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGRhdGEgPSBldmVudEluZm8uZGF0YTtcclxuXHJcbiAgICAgICAgICAgIHZhciBwcm9kdWN0czogSUFuYWx5dGljc1Byb2R1Y3RbXSA9IFtdO1xyXG5cclxuICAgICAgICAgICAgXy5lYWNoKGRhdGEuUHJvZHVjdHMsIChwcm9kdWN0OiBhbnksIGk6IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFuYWx5dGljc1Byb2R1Y3Q6IElBbmFseXRpY3NQcm9kdWN0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlkOiBwcm9kdWN0LlByb2R1Y3RJZCxcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBwcm9kdWN0LkRpc3BsYXlOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIHByaWNlOiB0aGlzLnRyaW1QcmljZUFuZFVubG9jYWxpemUocHJvZHVjdC5QcmljZSksXHJcbiAgICAgICAgICAgICAgICAgICAgYnJhbmQ6IHByb2R1Y3QuQnJhbmQsXHJcbiAgICAgICAgICAgICAgICAgICAgbGlzdDogZGF0YS5MaXN0TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeTogcHJvZHVjdC5DYXRlZ29yeUlkLFxyXG4gICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBpICsgMVxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBwcm9kdWN0cy5wdXNoKGFuYWx5dGljc1Byb2R1Y3QpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucHJvZHVjdEltcHJlc3Npb25zKHByb2R1Y3RzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIE9jY3VycyB3aGVuIHRoZSB1c2VyIGNsaWNrcyBvbiBhIHByb2R1Y3QuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uUHJvZHVjdENsaWNrKGV2ZW50SW5mbzogSUV2ZW50SW5mb3JtYXRpb24pOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKCFldmVudEluZm8pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGRhdGEgPSBldmVudEluZm8uZGF0YTtcclxuXHJcbiAgICAgICAgICAgIHZhciBwb3NpdGlvbjogbnVtYmVyID0gZGF0YS5JbmRleCArIDE7XHJcblxyXG4gICAgICAgICAgICBpZiAoZGF0YS5NYXhJdGVtc1BlclBhZ2UgJiYgZGF0YS5QYWdlTnVtYmVyKSB7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbiA9IHBvc2l0aW9uICsgKGRhdGEuTWF4SXRlbXNQZXJQYWdlICogKHBhcnNlSW50KGRhdGEuUGFnZU51bWJlciwgMTApIC0gMSkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgcHJvZHVjdDogSUFuYWx5dGljc1Byb2R1Y3QgPSB7XHJcbiAgICAgICAgICAgICAgICBpZDogZGF0YS5Qcm9kdWN0LlByb2R1Y3RJZCxcclxuICAgICAgICAgICAgICAgIG5hbWU6IGRhdGEuUHJvZHVjdC5EaXNwbGF5TmFtZSxcclxuICAgICAgICAgICAgICAgIHByaWNlOiB0aGlzLnRyaW1QcmljZUFuZFVubG9jYWxpemUoZGF0YS5Qcm9kdWN0LlByaWNlIHx8IGRhdGEuUHJvZHVjdC5QcmljaW5nLlByaWNlKSxcclxuICAgICAgICAgICAgICAgIGJyYW5kOiBkYXRhLlByb2R1Y3QuQnJhbmQsXHJcbiAgICAgICAgICAgICAgICBjYXRlZ29yeTogZGF0YS5Qcm9kdWN0LkNhdGVnb3J5SWQsXHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogcG9zaXRpb25cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHZhciBwcm9kdWN0czogSUFuYWx5dGljc1Byb2R1Y3RbXSA9IFtwcm9kdWN0XTtcclxuICAgICAgICAgICAgdGhpcy5wcm9kdWN0Q2xpY2socHJvZHVjdHMsIGRhdGEuTGlzdE5hbWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogT2NjdXJzIHdoZW4gbm8gcmVzdWx0cyB3ZXJlIGZvdW5kIGZvciBhIHNlYXJjaC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwcm90ZWN0ZWQgb25Ob1Jlc3VsdHNGb3VuZChldmVudEluZm86IElFdmVudEluZm9ybWF0aW9uKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICghZXZlbnRJbmZvKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhID0gZXZlbnRJbmZvLmRhdGE7XHJcblxyXG4gICAgICAgICAgICB0aGlzLm5vUmVzdWx0c0ZvdW5kKGRhdGEuS2V5d29yZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBPY2N1cnMgd2hlbiBhIHNlYXJjaCB0ZXJtIGhhcyBiZWVuIGF1dG8gY29ycmVjdGVkIGR1cmluZyBhIHNlYXJjaC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwcm90ZWN0ZWQgb25TZWFyY2hUZXJtQ29ycmVjdGVkKGV2ZW50SW5mbzogSUV2ZW50SW5mb3JtYXRpb24pOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKCFldmVudEluZm8pIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IGV2ZW50SW5mby5kYXRhO1xyXG5cclxuICAgICAgICAgICAgY29uc3Qgc2VhcmNoUmVzdWx0czogSUFuYWx5dGljc1NlYXJjaFJlc3VsdHMgPSB7XHJcbiAgICAgICAgICAgICAgICBrZXl3b3JkQ29ycmVjdGVkOiBkYXRhLktleXdvcmRDb3JyZWN0ZWQsXHJcbiAgICAgICAgICAgICAgICBrZXl3b3JkRW50ZXJlZDogZGF0YS5LZXl3b3JkRW50ZXJlZFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zZWFyY2hLZXl3b3JkQ29ycmVjdGlvbihzZWFyY2hSZXN1bHRzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBidWlsZFZhcmlhbnRGb3JMaW5lSXRlbShsaW5lSXRlbTogYW55KTogc3RyaW5nIHtcclxuICAgICAgICAgICAgaWYgKGxpbmVJdGVtLlZhcmlhbnRJZCAmJiBsaW5lSXRlbS5LZXlWYXJpYW50QXR0cmlidXRlc0xpc3QpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmJ1aWxkVmFyaWFudE5hbWUobGluZUl0ZW0uS2V5VmFyaWFudEF0dHJpYnV0ZXNMaXN0KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBidWlsZFZhcmlhbnROYW1lKGt2YXM6IGFueVtdKTogc3RyaW5nIHtcclxuICAgICAgICAgICAgdmFyIG5hbWVQYXJ0czogc3RyaW5nW10gPSBbXTtcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGk6IG51bWJlciA9IDA7IGkgPCBrdmFzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWU6IGFueSA9IGt2YXNbaV0uT3JpZ2luYWxWYWx1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBuYW1lUGFydHMucHVzaCh2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuYW1lUGFydHMuam9pbignICcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG1hcEFuYWx5dGljUHJvZHVjdHNGcm9tTGluZUl0ZW1zKGRhdGE6IGFueSk6IElBbmFseXRpY3NQcm9kdWN0W10ge1xyXG5cclxuICAgICAgICAgICAgdmFyIHByb2R1Y3RzOiBJQW5hbHl0aWNzUHJvZHVjdFtdID0gW107XHJcblxyXG4gICAgICAgICAgICBwcm9kdWN0cyA9IF8ubWFwKGRhdGEuTGluZUl0ZW1zLCAobGluZUl0ZW06IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdmFyIGFuYWx5dGljc1Byb2R1Y3Q6IElBbmFseXRpY3NQcm9kdWN0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlkOiBsaW5lSXRlbS5Qcm9kdWN0SWQsXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogbGluZUl0ZW0uTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBwcmljZTogbGluZUl0ZW0uUHJpY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyaWFudDogdGhpcy5idWlsZFZhcmlhbnRGb3JMaW5lSXRlbShsaW5lSXRlbSksXHJcbiAgICAgICAgICAgICAgICAgICAgcXVhbnRpdHk6IGxpbmVJdGVtLlF1YW50aXR5LFxyXG4gICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5OiBsaW5lSXRlbS5DYXRlZ29yeUlkLFxyXG4gICAgICAgICAgICAgICAgICAgIGJyYW5kOiBsaW5lSXRlbS5CcmFuZFxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy51c2VWYXJpYW50SWRXaGVuUG9zc2libGUgJiYgbGluZUl0ZW0uVmFyaWFudElkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW5hbHl0aWNzUHJvZHVjdC5pZCA9IGxpbmVJdGVtLlZhcmlhbnRJZDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYW5hbHl0aWNzUHJvZHVjdDtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcHJvZHVjdHM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgbWFwQW5hbHl0aWNDb3Vwb25zRnJvbU9yZGVyKGRhdGE6IGFueSk6IElBbmFseXRpY3NDb3Vwb25bXSB7XHJcbiAgICAgICAgICAgIHZhciBjb3Vwb25zOiBJQW5hbHl0aWNzQ291cG9uW10gPSBbXTtcclxuICAgICAgICAgICAgdmFyIGJpbGxpbmdDdXJyZW5jeSA9IGRhdGEuQmlsbGluZ0N1cnJlbmN5O1xyXG4gICAgICAgICAgICBjb3Vwb25zID0gXy5tYXAoZGF0YS5Db3Vwb25zLCAoY291cG9uOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgIHZhciBhbmFseXRpY3NDb3Vwb246IElBbmFseXRpY3NDb3Vwb24gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29kZTogY291cG9uLkNvdXBvbkNvZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgZGlzY291bnRBbW91bnQ6IGNvdXBvbi5BbW91bnQsXHJcbiAgICAgICAgICAgICAgICAgICAgY3VycmVuY3lDb2RlOiBiaWxsaW5nQ3VycmVuY3ksXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvbW90aW9uTmFtZTogY291cG9uLlByb21vdGlvbk5hbWVcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gIGFuYWx5dGljc0NvdXBvbjtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gY291cG9ucztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBtYXBBbmFseXRpY1RyYW5zYWN0aW9uRnJvbU9yZGVyKGRhdGE6IGFueSk6IElBbmFseXRpY3NUcmFuc2FjdGlvbiB7XHJcbiAgICAgICAgICAgIGxldCBjaGVja291dE9yaWdpbiA9IEFuYWx5dGljc1BsdWdpbi5nZXRDaGVja291dE9yaWdpbigpO1xyXG4gICAgICAgICAgICBsZXQgYW5hbHl0aWNzVHJhbnNhY3Rpb246IElBbmFseXRpY3NUcmFuc2FjdGlvbiA9IHtcclxuICAgICAgICAgICAgICAgIHNoaXBwaW5nVHlwZTogZGF0YS5TaGlwcGluZ09wdGlvbnMsXHJcbiAgICAgICAgICAgICAgICBjaGVja291dE9yaWdpbiA6IGNoZWNrb3V0T3JpZ2luXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gYW5hbHl0aWNzVHJhbnNhY3Rpb247XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL0Fic3RyYWN0IG1ldGhvZHNcclxuICAgICAgICBwdWJsaWMgdXNlckxvZ2dlZEluKHR5cGU6IHN0cmluZywgc291cmNlOiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignTm90IGltcGxlbWVudGVkIEV4Y2VwdGlvbicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHVzZXJDcmVhdGVkKCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdOb3QgaW1wbGVtZW50ZWQgRXhjZXB0aW9uJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgcmVjb3ZlclBhc3N3b3JkKCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdOb3QgaW1wbGVtZW50ZWQgRXhjZXB0aW9uJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc2luZ2xlRmFjZXRDaGFuZ2VkKHNlYXJjaEZpbHRlcnM6IElBbmFseXRpY3NTZWFyY2hGaWx0ZXJzKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ05vdCBpbXBsZW1lbnRlZCBFeGNlcHRpb24nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBtdWx0aUZhY2V0Q2hhbmdlZChzZWFyY2hGaWx0ZXJzOiBJQW5hbHl0aWNzU2VhcmNoRmlsdGVycykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdOb3QgaW1wbGVtZW50ZWQgRXhjZXB0aW9uJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc29ydGluZ0NoYW5nZWQoc29ydGluZ1R5cGU6IHN0cmluZywgcGFnZVR5cGU6IHN0cmluZykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdOb3QgaW1wbGVtZW50ZWQgRXhjZXB0aW9uJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgcHJvZHVjdEltcHJlc3Npb25zKHByb2R1Y3RzOiBJQW5hbHl0aWNzUHJvZHVjdFtdKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ05vdCBpbXBsZW1lbnRlZCBFeGNlcHRpb24nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBwcm9kdWN0Q2xpY2socHJvZHVjdDogSUFuYWx5dGljc1Byb2R1Y3QsIGxpc3ROYW1lOiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignTm90IGltcGxlbWVudGVkIEV4Y2VwdGlvbicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHByb2R1Y3REZXRhaWxJbXByZXNzaW9ucyhwcm9kdWN0czogSUFuYWx5dGljc1Byb2R1Y3RbXSwgbGlzdE5hbWU6IHN0cmluZykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdOb3QgaW1wbGVtZW50ZWQgRXhjZXB0aW9uJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYWRkVG9DYXJ0KHByb2R1Y3Q6IElBbmFseXRpY3NQcm9kdWN0LCBsaXN0TmFtZTogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ05vdCBpbXBsZW1lbnRlZCBFeGNlcHRpb24nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBhZGRUb1dpc2hMaXN0KHByb2R1Y3Q6IElBbmFseXRpY3NQcm9kdWN0KSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ05vdCBpbXBsZW1lbnRlZCBFeGNlcHRpb24nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyByZW1vdmVGcm9tQ2FydChwcm9kdWN0OiBJQW5hbHl0aWNzUHJvZHVjdCwgbGlzdE5hbWU6IHN0cmluZykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdOb3QgaW1wbGVtZW50ZWQgRXhjZXB0aW9uJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgY2hlY2tvdXQoc3RlcDogbnVtYmVyLCB0cmFuc2FjdGlvbjogSUFuYWx5dGljc1RyYW5zYWN0aW9uLCBwcm9kdWN0czogSUFuYWx5dGljc1Byb2R1Y3RbXSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdOb3QgaW1wbGVtZW50ZWQgRXhjZXB0aW9uJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgY2hlY2tvdXRPcHRpb24oc3RlcDogbnVtYmVyKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ05vdCBpbXBsZW1lbnRlZCBFeGNlcHRpb24nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBwdXJjaGFzZShvcmRlcjogSUFuYWx5dGljc09yZGVyLCB0cmFuc2FjdGlvbjogSUFuYWx5dGljc1RyYW5zYWN0aW9uLCBwcm9kdWN0czogSUFuYWx5dGljc1Byb2R1Y3RbXSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdOb3QgaW1wbGVtZW50ZWQgRXhjZXB0aW9uJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgY291cG9uc1VzZWQob3JkZXI6IElBbmFseXRpY3NDb3Vwb24pIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignTm90IGltcGxlbWVudGVkIEV4Y2VwdGlvbicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHNoYXJlV2lzaExpc3QoZGF0YTogYW55KSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ05vdCBpbXBsZW1lbnRlZCBFeGNlcHRpb24nKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzZWFyY2hLZXl3b3JkQ29ycmVjdGlvbihkYXRhOiBJQW5hbHl0aWNzU2VhcmNoUmVzdWx0cykge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdOb3QgaW1wbGVtZW50ZWQgRXhjZXB0aW9uJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgbm9SZXN1bHRzRm91bmQoa2V5d29yZE5vdEZvdW5kOiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignTm90IGltcGxlbWVudGVkIEV4Y2VwdGlvbicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU2VuZCBhIGN1c3RvbSBldmVudCB0byB0aGUgYW5hbHl0aWNzIHByb3ZpZGVycyB3aXRoIG11bHRpcGxlcyBpbmZvcm1hdGlvbnMgY29uY2VybmluZyB0aGUgZXZlbnRcclxuICAgICAgICAgKiBodHRwczovL3N1cHBvcnQuZ29vZ2xlLmNvbS9hbmFseXRpY3MvYW5zd2VyLzEwMzMwNjg/aGw9ZW5cclxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXZlbnROYW1lIC0gVGhlIG5hbWUgb2YgdGhlIGN1c3RvbSBldmVudCB0byBzZW5kIChlLmcuIHByb2R1Y3RDbGljaylcclxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gY2F0ZWdvcnkgLSBUaGUgbmFtZSB0aGF0IHlvdSBzdXBwbHkgYXMgYSB3YXkgdG8gZ3JvdXAgb2JqZWN0cyB0aGF0IHlvdSB3YW50IHRvIHRyYWNrIChlLmcuIFByb2R1Y3QpXHJcbiAgICAgICAgICogQHBhcmFtIHtzdHJpbmd9IGFjdGlvbiAtIFRoZSBuYW1lIHRoZSB0eXBlIG9mIGV2ZW50IG9yIGludGVyYWN0aW9uIHlvdSB3YW50IHRvIHRyYWNrIGZvciBhIHBhcnRpY3VsYXIgd2ViIG9iamVjdCAoZS5nLiBDbGljaylcclxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gbGFiZWwgLSBQcm92aWRlIGFkZGl0aW9uYWwgaW5mb3JtYXRpb24gZm9yIGV2ZW50cyB0aGF0IHlvdSB3YW50IHRvIHRyYWNrIChlLmcuIFVybCBvZiB0aGUgY2xpY2tlZCBwcm9kdWN0KVxyXG4gICAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSB2YWx1ZSAtIFVzZSBpdCB0byBhc3NpZ24gYSBudW1lcmljYWwgdmFsdWUgdG8gYSB0cmFja2VkIHBhZ2Ugb2JqZWN0IChlLmcuIFByaWNlIG9mIHRoZSBwcm9kdWN0KVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzZW5kRXZlbnQoZXZlbnROYW1lOiBzdHJpbmcsIGNhdGVnb3J5OiBzdHJpbmcsIGFjdGlvbjogc3RyaW5nLCBsYWJlbD86IHN0cmluZywgdmFsdWU/OiBudW1iZXIpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignTm90IGltcGxlbWVudGVkIEV4Y2VwdGlvbicpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHRyaW1QcmljZShwcmljZSkge1xyXG4gICAgICAgICAgICBpZiAodHlwZW9mIHByaWNlID09PSAnbnVtYmVyJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHByaWNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcHJpY2UgPyBwYXJzZUZsb2F0KHByaWNlLm1hdGNoKC9bXFxkXFwuXFxkXSsvaSlbMF0pIDogbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB0cmltUHJpY2VBbmRVbmxvY2FsaXplKHByaWNlKSB7XHJcbiAgICAgICAgICAgIGlmICghcHJpY2UgfHwgdHlwZW9mIHByaWNlID09PSAnbnVtYmVyJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHByaWNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyByZW1vdmUgYW55dGhpbmcgdGhhdCBpcyBub3QgYSBkaWdpdCwgJy4nIG9yICcsJ1xyXG4gICAgICAgICAgICBwcmljZSA9IHByaWNlLnJlcGxhY2UoL1teMC05LC5dLywgJycpO1xyXG5cclxuICAgICAgICAgICAgLy8gaWYgcHJpY2UgY29udGFpbnMgYSAnLicgaXRzIGFuIEVuZ2xpc2ggcHJpY2UgYW5kIHlvdSBjYW4gcmVtb3ZlIGFueSAnLCdcclxuICAgICAgICAgICAgaWYgKHByaWNlLmluZGV4T2YoJy4nKSAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIHByaWNlID0gcHJpY2UucmVwbGFjZSgnLCcsICcnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHByaWNlID0gcHJpY2UucmVwbGFjZSgnLCcsICcuJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBwcmljZSA/IHBhcnNlRmxvYXQocHJpY2UubWF0Y2goL1tcXGRcXC5cXGRdKy9pKVswXSkgOiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGZvcm1hdERhdGUoZGF0ZSkge1xyXG4gICAgICAgICAgICB2YXIgZCA9IG5ldyBEYXRlKGRhdGUpLFxyXG4gICAgICAgICAgICAgICAgbW9udGggPSAnJyArIChkLmdldE1vbnRoKCkgKyAxKSxcclxuICAgICAgICAgICAgICAgIGRheSA9ICcnICsgZC5nZXREYXRlKCksXHJcbiAgICAgICAgICAgICAgICB5ZWFyID0gZC5nZXRGdWxsWWVhcigpO1xyXG5cclxuICAgICAgICAgICAgaWYgKG1vbnRoLmxlbmd0aCA8IDIpIHtcclxuICAgICAgICAgICAgICAgIG1vbnRoID0gJzAnICsgbW9udGg7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGRheS5sZW5ndGggPCAyKSB7XHJcbiAgICAgICAgICAgICAgICBkYXkgPSAnMCcgKyBkYXk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBbeWVhciwgbW9udGgsIGRheV0uam9pbignLScpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLG51bGwsIi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9NdmMvQ29tcG9zZXJDbGllbnQudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0V2ZW50cy9FdmVudEh1Yi50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi9BbmFseXRpY3NQbHVnaW4udHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4vSUFuYWx5dGljc1Byb2R1Y3QudHMnIC8+XHJcblxyXG5kZWNsYXJlIHZhciBkYXRhTGF5ZXI6IGFueTtcclxuZGVjbGFyZSB2YXIgZ2E6IGFueTtcclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBHb29nbGVBbmFseXRpY3NQbHVnaW4gZXh0ZW5kcyBBbmFseXRpY3NQbHVnaW4ge1xyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKCkge1xyXG4gICAgICAgICAgICBzdXBlci5pbml0aWFsaXplKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXdpbmRvd1snZGF0YUxheWVyJ10pIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignVGhlIGRhdGFMYXllciB2YXJpYWJsZSBkb2VzIG5vdCBleGlzdHMuIEhhdmUgeW91IGluY2x1ZGVkIHRoZSBndG0uanMgc2NyaXB0ID8nKTtcclxuICAgICAgICAgICAgICAgIHdpbmRvd1snZGF0YUxheWVyJ10gPSBbXTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB1c2VyTG9nZ2VkSW4odHlwZTogc3RyaW5nLCBzb3VyY2U6IHN0cmluZykge1xyXG4gICAgICAgICAgICBkYXRhTGF5ZXIucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBldmVudDogJ2FjY291bnRMb2dpbicsXHJcbiAgICAgICAgICAgICAgICBsb2dpblR5cGU6IHR5cGUsXHJcbiAgICAgICAgICAgICAgICBsb2dpblNvdXJjZTogc291cmNlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHVzZXJDcmVhdGVkKCkge1xyXG4gICAgICAgICAgICBkYXRhTGF5ZXIucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBldmVudDogJ2FjY291bnRDcmVhdGVkJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyByZWNvdmVyUGFzc3dvcmQoKSB7XHJcbiAgICAgICAgICAgIGRhdGFMYXllci5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGV2ZW50OiAncGFzc1JlY292ZXJ5J1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzaW5nbGVGYWNldENoYW5nZWQoc2VhcmNoRmlsdGVyczogSUFuYWx5dGljc1NlYXJjaEZpbHRlcnMpIHtcclxuICAgICAgICAgICAgZGF0YUxheWVyLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgZXZlbnQ6ICdmaWx0ZXJSZWZpbmVtZW50JyxcclxuICAgICAgICAgICAgICAgIGZpbHRlck5hbWU6IHNlYXJjaEZpbHRlcnMuZmFjZXRLZXksXHJcbiAgICAgICAgICAgICAgICBmaWx0ZXJWYWx1ZTogc2VhcmNoRmlsdGVycy5mYWNldFZhbHVlLFxyXG4gICAgICAgICAgICAgICAgc2VjdGlvbk5hbWU6IHNlYXJjaEZpbHRlcnMucGFnZVR5cGVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgbXVsdGlGYWNldENoYW5nZWQoc2VhcmNoRmlsdGVyczogSUFuYWx5dGljc1NlYXJjaEZpbHRlcnMpIHtcclxuICAgICAgICAgICAgZGF0YUxheWVyLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgZXZlbnQ6ICdmaWx0ZXJSZWZpbmVtZW50JyxcclxuICAgICAgICAgICAgICAgIGZpbHRlck5hbWU6IHNlYXJjaEZpbHRlcnMuZmFjZXRLZXksXHJcbiAgICAgICAgICAgICAgICBmaWx0ZXJWYWx1ZTogc2VhcmNoRmlsdGVycy5mYWNldFZhbHVlLFxyXG4gICAgICAgICAgICAgICAgc2VjdGlvbk5hbWU6IHNlYXJjaEZpbHRlcnMucGFnZVR5cGVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc29ydGluZ0NoYW5nZWQoc29ydGluZ1R5cGU6IHN0cmluZywgcGFnZVR5cGU6IHN0cmluZykge1xyXG4gICAgICAgICAgICBkYXRhTGF5ZXIucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBldmVudDogJ3NvcnRpbmdPcHRpb24nLFxyXG4gICAgICAgICAgICAgICAgc29ydGluZ1R5cGU6IHNvcnRpbmdUeXBlLFxyXG4gICAgICAgICAgICAgICAgc2VjdGlvbk5hbWU6IHBhZ2VUeXBlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHByb2R1Y3RJbXByZXNzaW9ucyhwcm9kdWN0czogSUFuYWx5dGljc1Byb2R1Y3RbXSkge1xyXG4gICAgICAgICAgICBkYXRhTGF5ZXIucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBldmVudDogJ3Byb2R1Y3RJbXByZXNzaW9ucycsXHJcbiAgICAgICAgICAgICAgICBlY29tbWVyY2U6IHtcclxuICAgICAgICAgICAgICAgICAgICBpbXByZXNzaW9uczogcHJvZHVjdHNcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgcHJvZHVjdENsaWNrKHByb2R1Y3RzOiBJQW5hbHl0aWNzUHJvZHVjdFtdLCBsaXN0TmFtZTogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIGRhdGFMYXllci5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGV2ZW50OiAncHJvZHVjdENsaWNrJyxcclxuICAgICAgICAgICAgICAgIGVjb21tZXJjZToge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsaWNrOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbkZpZWxkOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaXN0OiBsaXN0TmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0czogcHJvZHVjdHNcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHByb2R1Y3REZXRhaWxJbXByZXNzaW9ucyhwcm9kdWN0czogSUFuYWx5dGljc1Byb2R1Y3RbXSwgbGlzdE5hbWU6IHN0cmluZykge1xyXG4gICAgICAgICAgICBkYXRhTGF5ZXIucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBldmVudDogJ3Byb2R1Y3REZXRhaWxJbXByZXNzaW9ucycsXHJcbiAgICAgICAgICAgICAgICBlY29tbWVyY2U6IHtcclxuICAgICAgICAgICAgICAgICAgICBkZXRhaWw6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uRmllbGQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxpc3Q6IGxpc3ROYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sICAgIC8vICdkZXRhaWwnIGFjdGlvbnMgaGF2ZSBhbiBvcHRpb25hbCBsaXN0IHByb3BlcnR5LlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0czogcHJvZHVjdHNcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGFkZFRvQ2FydChwcm9kdWN0OiBJQW5hbHl0aWNzUHJvZHVjdCwgbGlzdE5hbWU6IHN0cmluZykge1xyXG4gICAgICAgICAgICBkYXRhTGF5ZXIucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBldmVudDogJ2FkZFRvQ2FydCcsXHJcbiAgICAgICAgICAgICAgICBlY29tbWVyY2U6IHtcclxuICAgICAgICAgICAgICAgICAgICBhZGQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uRmllbGQ6IHsgbGlzdDogbGlzdE5hbWUgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdHM6IFtwcm9kdWN0XVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYWRkVG9XaXNoTGlzdChwcm9kdWN0OiBJQW5hbHl0aWNzUHJvZHVjdCkge1xyXG4gICAgICAgICAgICBkYXRhTGF5ZXIucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAnZXZlbnQnOiAnYWRkVG9XaXNoTGlzdCcsXHJcbiAgICAgICAgICAgICAgICAncHJvZHVjdE5hbWUnOiBwcm9kdWN0Lm5hbWUsXHJcbiAgICAgICAgICAgICAgICAncHJvZHVjdFByaWNlJzogcHJvZHVjdC5wcmljZVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBjb3Vwb25zVXNlZChjb3Vwb246IElBbmFseXRpY3NDb3Vwb24pIHtcclxuICAgICAgICAgICAgZGF0YUxheWVyLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgJ2V2ZW50JzogJ2NoZWNrb3V0Q29tcGxldGUnLFxyXG4gICAgICAgICAgICAgICAgJ2NvdXBvbkNvZGUnOiBjb3Vwb24uY29kZSxcclxuICAgICAgICAgICAgICAgICdkaXNjb3VudEFtb3VudCc6IGNvdXBvbi5kaXNjb3VudEFtb3VudFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzaGFyZVdpc2hMaXN0KGRhdGE6IGFueSkge1xyXG4gICAgICAgICAgICBkYXRhTGF5ZXIucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAnZXZlbnQnOiAnc2hhcmVNeVdpc2hMaXN0J1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyByZW1vdmVGcm9tQ2FydChwcm9kdWN0OiBJQW5hbHl0aWNzUHJvZHVjdCwgbGlzdE5hbWU6IHN0cmluZykge1xyXG4gICAgICAgICAgICBkYXRhTGF5ZXIucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBldmVudDogJ3JlbW92ZUZyb21DYXJ0JyxcclxuICAgICAgICAgICAgICAgIGVjb21tZXJjZToge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb25GaWVsZDogeyBsaXN0OiBsaXN0TmFtZSB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0czogW3Byb2R1Y3RdXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBjaGVja291dChzdGVwOiBudW1iZXIsIHRyYW5zYWN0aW9uOiBJQW5hbHl0aWNzVHJhbnNhY3Rpb24sIHByb2R1Y3RzOiBJQW5hbHl0aWNzUHJvZHVjdFtdKSB7XHJcbiAgICAgICAgICAgIGRhdGFMYXllci5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGV2ZW50OiAnY2hlY2tvdXQnLFxyXG4gICAgICAgICAgICAgICAgdHJhbnNhY3Rpb246IHRyYW5zYWN0aW9uLFxyXG4gICAgICAgICAgICAgICAgZWNvbW1lcmNlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hlY2tvdXQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uRmllbGQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0ZXA6IHRoaXMuZ2V0U3RlcE51bWJlcihzdGVwKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0czogcHJvZHVjdHNcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGNoZWNrb3V0T3B0aW9uKHN0ZXA6IG51bWJlcikge1xyXG4gICAgICAgICAgICBkYXRhTGF5ZXIucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBldmVudDogJ2NoZWNrb3V0T3B0aW9uJyxcclxuICAgICAgICAgICAgICAgIGVjb21tZXJjZToge1xyXG4gICAgICAgICAgICAgICAgICAgIGNoZWNrb3V0X29wdGlvbjoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb25GaWVsZDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RlcDogdGhpcy5nZXRTdGVwTnVtYmVyKHN0ZXApXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHB1cmNoYXNlKG9yZGVyOiBJQW5hbHl0aWNzT3JkZXIsIHRyYW5zYWN0aW9uOiBJQW5hbHl0aWNzVHJhbnNhY3Rpb24sIHByb2R1Y3RzOiBJQW5hbHl0aWNzUHJvZHVjdFtdKSB7XHJcbiAgICAgICAgICAgIGRhdGFMYXllci5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGV2ZW50OiAncHVyY2hhc2UnLFxyXG4gICAgICAgICAgICAgICAgdHJhbnNhY3Rpb246IHRyYW5zYWN0aW9uLFxyXG4gICAgICAgICAgICAgICAgZWNvbW1lcmNlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHVyY2hhc2U6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uRmllbGQ6IG9yZGVyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0czogcHJvZHVjdHNcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG5vUmVzdWx0c0ZvdW5kKGtleXdvcmROb3RGb3VuZDogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIGRhdGFMYXllci5wdXNoKHtcclxuICAgICAgICAgICAgICAgICdldmVudCc6ICdub1Jlc3VsdHMnLFxyXG4gICAgICAgICAgICAgICAgJ2tleXdvcmRFbnRlcmVkJzoga2V5d29yZE5vdEZvdW5kXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHNlYXJjaEtleXdvcmRDb3JyZWN0aW9uKHNlYXJjaFJlc3VsdHM6IElBbmFseXRpY3NTZWFyY2hSZXN1bHRzKSB7XHJcbiAgICAgICAgICAgIGRhdGFMYXllci5wdXNoKHtcclxuICAgICAgICAgICAgICAgICdldmVudCc6ICdrZXl3b3JkQ29ycmVjdGlvbicsXHJcbiAgICAgICAgICAgICAgICAna2V5d29yZENvcnJlY3RlZCc6IHNlYXJjaFJlc3VsdHMua2V5d29yZENvcnJlY3RlZCxcclxuICAgICAgICAgICAgICAgICdrZXl3b3JkRW50ZXJlZCc6IHNlYXJjaFJlc3VsdHMua2V5d29yZEVudGVyZWRcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc2VuZEV2ZW50KGV2ZW50TmFtZTogc3RyaW5nLCBjYXRlZ29yeTogc3RyaW5nLCBhY3Rpb246IHN0cmluZywgbGFiZWw/OiBzdHJpbmcsIHZhbHVlPzogbnVtYmVyKSB7XHJcbiAgICAgICAgICAgIGRhdGFMYXllci5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGV2ZW50OiBldmVudE5hbWUsXHJcbiAgICAgICAgICAgICAgICBnYUV2ZW50Q2F0ZWdvcnk6IGNhdGVnb3J5LFxyXG4gICAgICAgICAgICAgICAgZ2FFdmVudEFjdGlvbjogYWN0aW9uLFxyXG4gICAgICAgICAgICAgICAgZ2FFdmVudExhYmVsOiBsYWJlbCxcclxuICAgICAgICAgICAgICAgIGdhRXZlbnRWYWx1ZTogdmFsdWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGdldFN0ZXBOdW1iZXIoc3RlcCkge1xyXG4gICAgICAgICAgICByZXR1cm4gc3RlcCArIDE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9FdmVudHMvRXZlbnRIdWIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0NvbnRyb2xsZXIudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIGV4cG9ydCBjbGFzcyBBZGRUb0NhcnROb3RpZmljYXRpb25Db250cm9sbGVyIGV4dGVuZHMgQ29udHJvbGxlciB7XHJcbiAgICAgICAgcHVibGljIGluaXRpYWxpemUoKSB7XHJcbiAgICAgICAgICAgIHN1cGVyLmluaXRpYWxpemUoKTtcclxuICAgICAgICAgICAgdGhpcy5yZWdpc3RlclN1YnNjcmlwdGlvbnMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgcmVnaXN0ZXJTdWJzY3JpcHRpb25zKCk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnN1YnNjcmliZSgnbGluZUl0ZW1BZGRlZFRvQ2FydCcsIChlOiBJRXZlbnRJbmZvcm1hdGlvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5Tm90aWZpY2F0aW9uKGUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBkaXNwbGF5Tm90aWZpY2F0aW9uKGU6IElFdmVudEluZm9ybWF0aW9uKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGxldCBub3RpZmljYXRpb25Db250YWluZXIgPSAkKHRoaXMuY29udGV4dC5jb250YWluZXIpLFxyXG4gICAgICAgICAgICAgICAgbm90aWZpY2F0aW9uVGltZSA9IG5vdGlmaWNhdGlvbkNvbnRhaW5lci5kYXRhKCdub3RpZmljYXRpb25UaW1lJyksXHJcbiAgICAgICAgICAgICAgICBjYXJ0ID0gZS5kYXRhLkNhcnQ7XHJcblxyXG4gICAgICAgICAgICBpZiAobm90aWZpY2F0aW9uVGltZSA+IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKCdBZGRUb0NhcnROb3RpZmljYXRpb25Nb2RhbCcsIGNhcnQpO1xyXG5cclxuICAgICAgICAgICAgICAgIG5vdGlmaWNhdGlvbkNvbnRhaW5lci5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZU5vdGlmaWNhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgfSwgcGFyc2VJbnQobm90aWZpY2F0aW9uVGltZSwgMTApKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG9uQ2xvc2UoZTogSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0KTogdm9pZCB7XHJcbiAgICAgICAgICAgIGUuZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZU5vdGlmaWNhdGlvbigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBjbG9zZU5vdGlmaWNhdGlvbigpOiB2b2lkIHtcclxuICAgICAgICAgICAgJCh0aGlzLmNvbnRleHQuY29udGFpbmVyKS5hZGRDbGFzcygnaGlkZGVuJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXByZXNlbnRzIGEgc2V0IG9mIGV2aWN0aW9uIGFuZCBleHBpcmF0aW9uIGRldGFpbHMgZm9yIGEgc3BlY2lmaWMgY2FjaGUgZW50cnkuXHJcbiAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJQ2FjaGVQb2xpY3kge1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBzaW5jZSAxOTcwLzAxLzAxIGNvcnJlc3BvbmRpbmcgdG8gdGhlIHRpbWUgd2hlbiB0aGUgY2FjaGUgZW50cnkgc2hvdWxkIGV4cGlyZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICBhYnNvbHV0ZUV4cGlyYXRpb24/OiBudW1iZXI7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJlcHJlc2VudHMgdGhlIHNlY29uZHMgc2luY2UgdGhlIGxhc3QgY2FjaGUgYWNjZXNzIGFmdGVyIHdoaWNoIHRoZSBjYWNoZSBlbnRyeSBzaG91bGQgZXhwaXJlLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHNsaWRpbmdFeHBpcmF0aW9uPzogbnVtYmVyO1xyXG4gICAgfVxyXG59XHJcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuL0lDYWNoZVBvbGljeS50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVwcmVzZW50cyBhbiBvYmplY3QgY2FjaGUgYW5kIHByb3ZpZGVzIHNlcnZpY2VzIGZvciBhY2Nlc3NpbmcgdGhlIGNhY2hlLlxyXG4gICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSUNhY2hlIHtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSWYgYW4gZW50cnkgd2l0aCB0aGUgZ2l2ZW4ga2V5IGlzIGZvdW5kLCB0aGUgcHJvbWlzZSB3aWxsIGJlIGZ1bGZpbGxlZCB3aXRoIHRoZSBjYWNoZWQgdmFsdWUuXHJcbiAgICAgICAgICogSWYgYW4gZW50cnkgd2l0aCB0aGUgZ2l2ZW4ga2V5IGlzIGZvdW5kIGJ1dCB0aGUgdmFsdWUgaXMgbnVsbCwgdGhlIHByb21pc2Ugd2lsbCBiZSByZWplY3RlZC5cclxuICAgICAgICAgKiBJZiBhbiBlbnRyeSB3aXRoIHRoZSBnaXZlbiBrZXkgaXMgbm90IGZvdW5kLCB0aGUgcHJvbWlzZSB3aWxsIGJlIHJlamVjdGVkLlxyXG4gICAgICAgICAqIElmIHRoZSBlbnRyeSBpcyBleHBpcmVkLCB0aGUgcHJvbWlzZSB3aWxsIGJlIHJlamVjdGVkLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldDxUPihrZXk6IHN0cmluZyk6IFEuUHJvbWlzZTxUPjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhpcyB3aWxsIGhhbmRsZSBhZGRpbmcgYW5kIGVkaXRpbmcgYSBjYWNoZSBlbnRyeSwgd2hpY2ggd2lsbCBuZXZlciBleHBpcmUuXHJcbiAgICAgICAgICogT24gc3VjY2VzcywgdGhlIHByb21pc2Ugd2lsbCBiZSBmdWxmaWxsZWQgd2l0aCB0aGUgbmV3bHkgY2FjaGVkIHZhbHVlLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHNldDxUPihrZXk6IHN0cmluZywgdmFsdWU6IFQpOiBRLlByb21pc2U8VD47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoaXMgd2lsbCBoYW5kbGUgYWRkaW5nIGFuZCBlZGl0aW5nIGFuIGVudHJ5IGluIHRoZSBjYWNoZS5cclxuICAgICAgICAgKiBUaGUgZW50cnkgd2lsbCBleHBpcmUgYWNjb3JkaW5nIHRvIHRoZSBnaXZlbiBwb2xpY3kuXHJcbiAgICAgICAgICogT24gc3VjY2VzcywgdGhlIHByb21pc2Ugd2lsbCBiZSBmdWxmaWxsZWQgd2l0aCB0aGUgbmV3bHkgY2FjaGVkIHZhbHVlLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHNldDxUPihrZXk6IHN0cmluZywgdmFsdWU6IFQsIHBvbGljeTogSUNhY2hlUG9saWN5KTogUS5Qcm9taXNlPFQ+O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDbGVhciB0aGUgY2FjaGUgZm9yIHRoZSBzcGVjaWZpZWQga2V5XHJcbiAgICAgICAgICogT24gc3VjY2VzcywgdGhlIHByb21pc2Ugd2lsbCByZXR1cm4gdm9pZFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGNsZWFyKGtleTogc3RyaW5nKTogUS5Qcm9taXNlPHZvaWQ+O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDbGVhciB0aGUgY2FjaGUgZm9yIHRoZSBzcGVjaWZpZWQgdHlwZVxyXG4gICAgICAgICAqIE9uIHN1Y2Nlc3MsIHRoZSBwcm9taXNlIHdpbGwgcmV0dXJuIHZvaWRcclxuICAgICAgICAgKi9cclxuICAgICAgICBmdWxsQ2xlYXIoKTogUS5Qcm9taXNlPHZvaWQ+O1xyXG4gICAgfVxyXG59XHJcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcblxyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJQ2FjaGVQcm92aWRlciB7XHJcblxyXG4gICAgICAgIGRlZmF1bHRDYWNoZTogSUNhY2hlO1xyXG4gICAgICAgIGN1c3RvbUNhY2hlOiBJQ2FjaGU7XHJcblxyXG4gICAgICAgIGxvY2FsU3RvcmFnZTogU3RvcmFnZTtcclxuICAgICAgICBzZXNzaW9uU3RvcmFnZTogU3RvcmFnZTtcclxuICAgIH1cclxufSIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEZWZpbmVzIGEgc3RvcmFnZSBlbmdpbmUgQVBJIGNhcGFibGUgb2YgcGVyZm9ybWluZyBhbGwgdGhlIGJhc2ljIENSVUQgb3BlcmF0aW9ucy5cclxuICAgICAqIFRoZSBBUEkgb3BlcmF0ZXMgb24gSmF2YXNjcmlwdCBvYmplY3RzLCBhbmQgYWxsIG9iamVjdHMgYXJlIHN0b3JlZCBhY2NvcmRpbmcgdG8gdGhlaXIgZGVmaW5lZCB0eXBlLlxyXG4gICAgICpcclxuICAgICAqIFRoaXMgQVBJIGhhcyBiZWVuIGRlc2lnbmVkIGluIHN1Y2ggYSB3YXkgdGhhdCB0aGUgdW5kZXJseWluZyBzdG9yYWdlIGVuZ2luZSBjb3VsZCBiZSBhbnkgb2YgdGhvc2Ugb2ZmZXJlZCBieSBwb3B1bGFyIGJyb3dzZXJzLFxyXG4gICAgICogc3VjaCBhcyBMb2NhbFN0b3JhZ2UsIFNlc3Npb25TdG9yYWdlLCBhbmQgSW5kZXhlZERCXHJcbiAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJU3RvcmFnZSB7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBjbGllbnQgbXVzdCBjYWxsIHRoaXMgdG8gaW5pdGlhbGl6ZSB0aGUgc3RvcmFnZSBlbmdpbmUgYmVmb3JlIHVzaW5nIGl0LlxyXG4gICAgICAgICAqIElmIHRoZSBzdG9yYWdlIGVuZ2luZSBpbml0aWFsaXplcyBzdWNjZXNzZnVsbHksIHRoZSBwcm9taXNlIHdpbGwgYmUgZnVsZmlsbGVkLlxyXG4gICAgICAgICAqIFRoZSBwcm9taXNlIHdpbGwgYmUgcmVqZWN0ZWQgaWYgdGhlIHN0b3JhZ2UgZW5naW5lIGNhbm5vdCBiZSB1c2VkLlxyXG4gICAgICAgICAqIEl0IHNob3VsZCBiZSBwb3NzaWJsZSB0byBjYWxsIHRoaXMgbWV0aG9kIG11bHRpcGxlIHRpbWVzLCBhbmQgdGhlIHNhbWUgcmVzdWx0IHdpbGwgYmUgcmV0dXJuZWQgZWFjaCB0aW1lLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGluaXQoKTogUS5Qcm9taXNlPHZvaWQ+O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgY2xpZW50IG11c3QgY2FsbCB0aGlzIHRvIGluaXRpYWxpemUgdGhlIG9iamVjdCBzdG9yZSBhc3NvY2lhdGVkIHdpdGggYSBzcGVjaWZpYyBvYmplY3QgdHlwZS5cclxuICAgICAgICAgKiBJZiB0aGUgc3RvcmFnZSBlbmdpbmUgc3VwcG9ydHMgdGhlIG9iamVjdCB0eXBlLCB0aGUgcHJvbWlzZSB3aWxsIGJlIGZ1bGZpbGxlZC5cclxuICAgICAgICAgKiBUaGUgcHJvbWlzZSB3aWxsIGJlIHJlamVjdGVkIGlmIHRoZSBvYmplY3QgdHlwZSBjYW5ub3QgYmUgc3RvcmVkLlxyXG4gICAgICAgICAqIEl0IHNob3VsZCBiZSBwb3NzaWJsZSB0byBjYWxsIHRoaXMgbWV0aG9kIG11bHRpcGxlIHRpbWVzLCBhbmQgdGhlIHNhbWUgcmVzdWx0IHdpbGwgYmUgcmV0dXJuZWQgZWFjaCB0aW1lLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGluaXRPYmplY3RTdG9yZSh0eXBlOiBzdHJpbmcpOiBRLlByb21pc2U8dm9pZD47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIElmIGFuIG9iamVjdCB3aXRoIGEgc3BlY2lmaWMgaWQgZm9yIGEgc3BlY2lmaWMgdHlwZSBpcyBmb3VuZCwgdGhlIHByb21pc2Ugd2lsbCBiZSBmdWxmaWxsZWQgd2l0aCB0aGF0IG9iamVjdC5cclxuICAgICAgICAgKiBJZiBubyBvYmplY3QgaXMgZm91bmQsIHRoZSBwcm9taXNlIHdpbGwgYmUgZnVsZmlsbGVkIHdpdGggYSBudWxsIG9iamVjdC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXQ8VD4odHlwZTogc3RyaW5nLCBpZDogc3RyaW5nKTogUS5Qcm9taXNlPFQ+O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGlzIHdpbGwgcmVtb3ZlIGFuIG9iamVjdCB3aXRoIGEgc3BlY2lmaWMgaWQgZm9yIGEgc3BlY2lmaWMgdHlwZS5cclxuICAgICAgICAgKiBJZiBubyBvYmplY3QgaXMgZm91bmQsIHRoZSBwcm9taXNlIHdpbGwgYmUgZnVsZmlsbGVkLlxyXG4gICAgICAgICAqIElmIGFuIG9iamVjdCBpcyBmb3VuZCBhbmQgcmVtb3ZlZCwgdGhlIHByb21pc2Ugd2lsbCBiZSBmdWxmaWxsZWQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcmVtb3ZlKHR5cGU6IHN0cmluZywgaWQ6IHN0cmluZyk6IFEuUHJvbWlzZTx2b2lkPjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhpcyB3aWxsIHJlbW92ZSB0aGUgc3BlY2lmaWMgdHlwZVxyXG4gICAgICAgICAqIElmIG5vIHR5cGUgaXMgZm91bmQsIHRoZSBwcm9taXNlIHdpbGwgYmUgZnVsZmlsbGVkLlxyXG4gICAgICAgICAqIElmIGEgdHlwZSBpcyBmb3VuZCBhbmQgcmVtb3ZlZCwgdGhlIHByb21pc2Ugd2lsbCBiZSBmdWxmaWxsZWQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZnVsbFJlbW92ZSh0eXBlOiBzdHJpbmcpOiBRLlByb21pc2U8dm9pZD47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoaXMgd2lsbCBoYW5kbGUgYWRkaW5nIGFuZCB1cGRhdGluZyBvYmplY3RzIG9mIGEgc3BlY2lmaWMgdHlwZS5cclxuICAgICAgICAgKiBPbiBzdWNjZXNzLCB0aGUgcHJvbWlzZSB3aWxsIGJlIGZ1bGZpbGxlZC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBzZXQ8VD4odHlwZTogc3RyaW5nLCBpdGVtOiBJU3RvcmFnZUl0ZW08VD4pOiBRLlByb21pc2U8dm9pZD47XHJcbiAgICB9XHJcbn1cclxuIiwibW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcblxyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJU3RvcmFnZUl0ZW08VD4ge1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGUgdW5pcXVlIGlkZW50aWZpZXIgb2YgdGhlIG9iamVjdCBzdG9yZWQgb3IgdG8gYmUgc3RvcmVkLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGlkOiBzdHJpbmc7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBvYmplY3Qgc3RvcmVkIG9yIHRvIGJlIHN0b3JlZC5cclxuICAgICAgICAgKi9cclxuICAgICAgICB2YWx1ZTogVDtcclxuICAgIH1cclxufVxyXG4iLCJtb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuXHJcbiAgICBleHBvcnQgZW51bSBDYWNoZUVycm9yIHtcclxuXHJcbiAgICAgICAgTm90Rm91bmQsXHJcbiAgICAgICAgRXhwaXJlZFxyXG4gICAgfVxyXG59XHJcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4vSUNhY2hlUG9saWN5LnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcblxyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJQ2FjaGVJdGVtPFQ+IHtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmVwcmVzZW50cyB0aGUgdmFsdWUgdG8gYmUgY2FjaGVkLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHZhbHVlOiBUO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZXByZXNlbnRzIGEgc2V0IG9mIGV2aWN0aW9uIGFuZCBleHBpcmF0aW9uIGRldGFpbHMgZm9yIGEgc3BlY2lmaWMgY2FjaGUgZW50cnkuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcG9saWN5OiBJQ2FjaGVQb2xpY3k7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHNpbmNlIDE5NzAvMDEvMDEgY29ycmVzcG9uZGluZyB0byB0aGUgdGltZSB0aGUgY2FjaGUgaXRlbSB3YXMgbGFzdCBhY2Nlc3NlZC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBsYXN0QWNjZXNzZWQ6IG51bWJlcjtcclxuICAgIH1cclxufVxyXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi8uLi9TdG9yYWdlL0lTdG9yYWdlLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuLy4uL1N0b3JhZ2UvSVN0b3JhZ2VJdGVtLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuL0NhY2hlRXJyb3IudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4vSUNhY2hlLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuL0lDYWNoZUl0ZW0udHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4vSUNhY2hlUG9saWN5LnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcblxyXG4gICAgdmFyIE5vRXhwaXJhdGlvblBvbGljeTogSUNhY2hlUG9saWN5ID0geyB9O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBjYWNoZSB1c2VzIGEgY2xpZW50LXNpZGUgc3RvcmFnZSBlbmdpbmUgdG8gcHJvdmlkZSBvYmplY3QgY2FjaGluZ1xyXG4gICAgICovXHJcbiAgICBleHBvcnQgY2xhc3MgU3RvcmFnZUJhc2VkQ2FjaGUgaW1wbGVtZW50cyBPcmNrZXN0cmEuQ29tcG9zZXIuSUNhY2hlIHtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBfc3RvcmFnZUluaXRpYWxpemluZzogUS5Qcm9taXNlPHZvaWQ+O1xyXG4gICAgICAgIHByaXZhdGUgX3N0b3JhZ2U6IElTdG9yYWdlO1xyXG4gICAgICAgIHByaXZhdGUgX3R5cGU6IHN0cmluZztcclxuXHJcbiAgICAgICAgY29uc3RydWN0b3Ioc3RvcmFnZTogSVN0b3JhZ2UsIHR5cGU6IHN0cmluZykge1xyXG5cclxuICAgICAgICAgICAgaWYgKCFzdG9yYWdlKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBzdG9yYWdlIGlzIHJlcXVpcmVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghdHlwZSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgdHlwZSBpcyByZXF1aXJlZCcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLl90eXBlID0gdHlwZTtcclxuICAgICAgICAgICAgdGhpcy5fc3RvcmFnZSA9IHN0b3JhZ2U7XHJcbiAgICAgICAgICAgIHRoaXMuX3N0b3JhZ2VJbml0aWFsaXppbmcgPVxyXG4gICAgICAgICAgICAgICAgc3RvcmFnZS5pbml0KCkudGhlbigoKSA9PiBzdG9yYWdlLmluaXRPYmplY3RTdG9yZSh0aGlzLl90eXBlKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZ2V0PFQ+KGtleTogc3RyaW5nKTogUS5Qcm9taXNlPFQ+IHtcclxuXHJcbiAgICAgICAgICAgIGlmICgha2V5KSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBrZXkgaXMgcmVxdWlyZWQnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N0b3JhZ2VJbml0aWFsaXppbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB0aGlzLl9zdG9yYWdlLmdldDxJQ2FjaGVJdGVtPFQ+Pih0aGlzLl90eXBlLCBrZXkpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGNhY2hlSXRlbSA9PiB0aGlzLnZhbGlkYXRlKGtleSwgY2FjaGVJdGVtKS50aGVuKCgpID0+IGNhY2hlSXRlbS52YWx1ZSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSB2YWxpZGF0ZTxUPihrZXk6IHN0cmluZywgaXRlbTogSUNhY2hlSXRlbTxUPik6IFEuUHJvbWlzZTx2b2lkPiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gUS5Qcm9taXNlPHZvaWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoXy5pc051bGwoaXRlbSkgfHwgXy5pc051bGwoaXRlbS52YWx1ZSkpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KENhY2hlRXJyb3IuTm90Rm91bmQpO1xyXG5cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5pc0V4cGlyZWQoaXRlbSkpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc3RvcmFnZUluaXRpYWxpemluZ1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB0aGlzLl9zdG9yYWdlLnJlbW92ZSh0aGlzLl90eXBlLCBrZXkpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuZG9uZSgoKSA9PiByZWplY3QoQ2FjaGVFcnJvci5FeHBpcmVkKSwgcmVhc29uID0+IHJlamVjdChyZWFzb24pKTtcclxuXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpdGVtLmxhc3RBY2Nlc3NlZCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgc3RvcmFnZUl0ZW06IElTdG9yYWdlSXRlbTxJQ2FjaGVJdGVtPFQ+PiA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGtleSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IGl0ZW1cclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zdG9yYWdlSW5pdGlhbGl6aW5nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHRoaXMuX3N0b3JhZ2Uuc2V0KHRoaXMuX3R5cGUsIHN0b3JhZ2VJdGVtKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgLmRvbmUoKCkgPT4gcmVzb2x2ZSh2b2lkIDApLCByZWFzb24gPT4gcmVqZWN0KHJlYXNvbikpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgaXNFeHBpcmVkPFQ+KGl0ZW06IElDYWNoZUl0ZW08VD4pOiBib29sZWFuIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBleHBpcmF0aW9uVGltZTogbnVtYmVyLCBub3c6IG51bWJlciA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGl0ZW0ucG9saWN5ICYmIGl0ZW0ucG9saWN5LmFic29sdXRlRXhwaXJhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgZXhwaXJhdGlvblRpbWUgPSBpdGVtLnBvbGljeS5hYnNvbHV0ZUV4cGlyYXRpb247XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaXRlbS5wb2xpY3kgJiYgaXRlbS5wb2xpY3kuc2xpZGluZ0V4cGlyYXRpb24pIHtcclxuICAgICAgICAgICAgICAgIGV4cGlyYXRpb25UaW1lID0gaXRlbS5sYXN0QWNjZXNzZWQgKyAoaXRlbS5wb2xpY3kuc2xpZGluZ0V4cGlyYXRpb24gKiAxMDAwKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGV4cGlyYXRpb25UaW1lIDwgbm93O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHNldDxUPihrZXk6IHN0cmluZywgdmFsdWU6IFQsIHBvbGljeT86IElDYWNoZVBvbGljeSwgdHlwZT86IHN0cmluZyk6IFEuUHJvbWlzZTxUPiB7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWtleSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUga2V5IGlzIHJlcXVpcmVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciB0eXBlSXRlbSA9ICF0eXBlID8gdGhpcy5fdHlwZSA6IHR5cGU7XHJcblxyXG4gICAgICAgICAgICB2YXIgY2FjaGVJdGVtOiBJQ2FjaGVJdGVtPFQ+ID0ge1xyXG4gICAgICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxyXG4gICAgICAgICAgICAgICAgcG9saWN5OiAhcG9saWN5ID8gTm9FeHBpcmF0aW9uUG9saWN5IDogcG9saWN5LFxyXG4gICAgICAgICAgICAgICAgbGFzdEFjY2Vzc2VkOiBuZXcgRGF0ZSgpLmdldFRpbWUoKVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdmFyIHN0b3JhZ2VJdGVtOiBJU3RvcmFnZUl0ZW08SUNhY2hlSXRlbTxUPj4gPSB7XHJcbiAgICAgICAgICAgICAgICBpZDoga2V5LFxyXG4gICAgICAgICAgICAgICAgdmFsdWU6IGNhY2hlSXRlbVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N0b3JhZ2VJbml0aWFsaXppbmdcclxuICAgICAgICAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB0aGlzLl9zdG9yYWdlLnNldCh0eXBlSXRlbSwgc3RvcmFnZUl0ZW0pKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHZhbHVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBjbGVhcihrZXk6IHN0cmluZyk6IFEuUHJvbWlzZTx2b2lkPiB7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWtleSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUga2V5IGlzIHJlcXVpcmVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdG9yYWdlSW5pdGlhbGl6aW5nXHJcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB0aGlzLl9zdG9yYWdlLnJlbW92ZSh0aGlzLl90eXBlLCBrZXkpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBmdWxsQ2xlYXIoKTogUS5Qcm9taXNlPHZvaWQ+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zdG9yYWdlSW5pdGlhbGl6aW5nXHJcbiAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB0aGlzLl9zdG9yYWdlLmZ1bGxSZW1vdmUodGhpcy5fdHlwZSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi9JU3RvcmFnZS50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi9JU3RvcmFnZUl0ZW0udHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgQmFja2luZ1N0b3JhZ2UgaW1wbGVtZW50cyBPcmNrZXN0cmEuQ29tcG9zZXIuSVN0b3JhZ2Uge1xyXG5cclxuICAgICAgICBwcml2YXRlIF9pc0luaXRpYWxpemVkOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICAgICAgcHJpdmF0ZSBfaW5pdGlhbGl6ZWRPYmplY3RTdG9yZXMgPSB7fTtcclxuXHJcbiAgICAgICAgY29uc3RydWN0b3IocHJpdmF0ZSBfc3RvcmFnZTogU3RvcmFnZSkge1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGluaXQoKTogUS5Qcm9taXNlPHZvaWQ+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBRLmZjYWxsKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2lzSW5pdGlhbGl6ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbml0T2JqZWN0U3RvcmUodHlwZTogc3RyaW5nKTogUS5Qcm9taXNlPHZvaWQ+IHtcclxuXHJcbiAgICAgICAgICAgIGlmICghdHlwZSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgdHlwZSBpcyByZXF1aXJlZCcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gUS5mY2FsbCgoKSA9PiB7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9pc0luaXRpYWxpemVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgbG9jYWwgc3RvcmFnZSBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmluaXRPYmplY3RTdG9yZUltcGwodHlwZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBpbml0T2JqZWN0U3RvcmVJbXBsKHR5cGU6IHN0cmluZyk6IHZvaWQge1xyXG5cclxuICAgICAgICAgICAgdmFyIG9iamVjdFN0b3JlOiBhbnkgPSB0aGlzLmdldE9iamVjdFN0b3JlKHR5cGUpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFvYmplY3RTdG9yZSkge1xyXG5cclxuICAgICAgICAgICAgICAgIG9iamVjdFN0b3JlID0ge307XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldE9iamVjdFN0b3JlKHR5cGUsIG9iamVjdFN0b3JlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5faW5pdGlhbGl6ZWRPYmplY3RTdG9yZXNbdHlwZV0gPSB0cnVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGdldDxUPih0eXBlOiBzdHJpbmcsIGlkOiBzdHJpbmcpOiBRLlByb21pc2U8VD4ge1xyXG5cclxuICAgICAgICAgICAgaWYgKCF0eXBlKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSB0eXBlIGlzIHJlcXVpcmVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCFpZCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgaWQgaXMgcmVxdWlyZWQnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFEuZmNhbGw8VD4oKCkgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5faXNJbml0aWFsaXplZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIGxvY2FsIHN0b3JhZ2UgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2luaXRpYWxpemVkT2JqZWN0U3RvcmVzW3R5cGVdKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgb2JqZWN0IHN0b3JlICcgKyB0eXBlICsgJyBoYXMgbm90IGJlZW4gaW5pdGlhbGl6ZWQnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRJbXBsPFQ+KHR5cGUsIGlkKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGdldEltcGw8VD4odHlwZTogc3RyaW5nLCBpZDogc3RyaW5nKTogVCB7XHJcblxyXG4gICAgICAgICAgICB2YXIgb2JqZWN0U3RvcmU6IGFueSA9IHRoaXMuZ2V0T2JqZWN0U3RvcmUodHlwZSk7XHJcblxyXG4gICAgICAgICAgICBpZiAob2JqZWN0U3RvcmUuaGFzT3duUHJvcGVydHkoaWQpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqZWN0U3RvcmVbaWRdO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyByZW1vdmUodHlwZTogc3RyaW5nLCBpZDogc3RyaW5nKTogUS5Qcm9taXNlPHZvaWQ+IHtcclxuXHJcbiAgICAgICAgICAgIGlmICghdHlwZSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgdHlwZSBpcyByZXF1aXJlZCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghaWQpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIGlkIGlzIHJlcXVpcmVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBRLmZjYWxsPHZvaWQ+KCgpID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2lzSW5pdGlhbGl6ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBsb2NhbCBzdG9yYWdlIGhhcyBub3QgYmVlbiBpbml0aWFsaXplZCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9pbml0aWFsaXplZE9iamVjdFN0b3Jlc1t0eXBlXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIG9iamVjdCBzdG9yZSAnICsgdHlwZSArICcgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW1vdmVJbXBsKHR5cGUsIGlkKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZnVsbFJlbW92ZSh0eXBlOiBzdHJpbmcpOiBRLlByb21pc2U8dm9pZD4ge1xyXG5cclxuICAgICAgICAgICAgaWYgKCF0eXBlKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSB0eXBlIGlzIHJlcXVpcmVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBRLmZjYWxsPHZvaWQ+KCgpID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2lzSW5pdGlhbGl6ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBsb2NhbCBzdG9yYWdlIGhhcyBub3QgYmVlbiBpbml0aWFsaXplZCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9pbml0aWFsaXplZE9iamVjdFN0b3Jlc1t0eXBlXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIG9iamVjdCBzdG9yZSAnICsgdHlwZSArICcgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5mdWxsUmVtb3ZlSW1wbCh0eXBlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHJlbW92ZUltcGwodHlwZTogc3RyaW5nLCBpZDogc3RyaW5nKTogdm9pZCB7XHJcblxyXG4gICAgICAgICAgICB2YXIgb2JqZWN0U3RvcmU6IGFueSA9IHRoaXMuZ2V0T2JqZWN0U3RvcmUodHlwZSk7XHJcblxyXG4gICAgICAgICAgICBpZiAob2JqZWN0U3RvcmUuaGFzT3duUHJvcGVydHkoaWQpKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgZGVsZXRlIG9iamVjdFN0b3JlW2lkXTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0T2JqZWN0U3RvcmUodHlwZSwgb2JqZWN0U3RvcmUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGZ1bGxSZW1vdmVJbXBsKHR5cGU6IHN0cmluZyk6IHZvaWQge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zZXRPYmplY3RTdG9yZSh0eXBlLCBudWxsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzZXQ8VD4odHlwZTogc3RyaW5nLCBpdGVtOiBJU3RvcmFnZUl0ZW08VD4pOiBRLlByb21pc2U8dm9pZD4ge1xyXG5cclxuICAgICAgICAgICAgaWYgKCF0eXBlKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSB0eXBlIGlzIHJlcXVpcmVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCFpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBpdGVtIGlzIHJlcXVpcmVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCFpdGVtLmlkKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBpdGVtIGlkIGlzIHJlcXVpcmVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBRLmZjYWxsPHZvaWQ+KCgpID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIXRoaXMuX2lzSW5pdGlhbGl6ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBsb2NhbCBzdG9yYWdlIGhhcyBub3QgYmVlbiBpbml0aWFsaXplZCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9pbml0aWFsaXplZE9iamVjdFN0b3Jlc1t0eXBlXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIG9iamVjdCBzdG9yZSAnICsgdHlwZSArICcgaGFzIG5vdCBiZWVuIGluaXRpYWxpemVkJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRJbXBsPFQ+KHR5cGUsIGl0ZW0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc2V0SW1wbDxUPih0eXBlOiBzdHJpbmcsIGl0ZW06IElTdG9yYWdlSXRlbTxUPik6IHZvaWQge1xyXG5cclxuICAgICAgICAgICAgdmFyIG9iamVjdFN0b3JlOiBhbnkgPSB0aGlzLmdldE9iamVjdFN0b3JlKHR5cGUpO1xyXG4gICAgICAgICAgICBvYmplY3RTdG9yZVtpdGVtLmlkXSA9IGl0ZW0udmFsdWU7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNldE9iamVjdFN0b3JlKHR5cGUsIG9iamVjdFN0b3JlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgZ2V0T2JqZWN0U3RvcmUodHlwZTogc3RyaW5nKTogYW55IHtcclxuXHJcbiAgICAgICAgICAgIHZhciBvYmplY3RTdG9yZVN0cmluZzogc3RyaW5nID0gdGhpcy5fc3RvcmFnZS5nZXRJdGVtKHR5cGUpO1xyXG4gICAgICAgICAgICB2YXIgb2JqZWN0U3RvcmU6IGFueSA9IEpTT04ucGFyc2Uob2JqZWN0U3RvcmVTdHJpbmcpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG9iamVjdFN0b3JlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzZXRPYmplY3RTdG9yZSh0eXBlOiBzdHJpbmcsIG9iamVjdFN0b3JlOiBhbnkpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBvYmplY3RTdG9yZVN0cmluZzogc3RyaW5nID0gSlNPTi5zdHJpbmdpZnkob2JqZWN0U3RvcmUpO1xyXG4gICAgICAgICAgICB0aGlzLl9zdG9yYWdlLnNldEl0ZW0odHlwZSwgb2JqZWN0U3RvcmVTdHJpbmcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJtb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIGV4cG9ydCBlbnVtIFN0b3JhZ2VUeXBlIHtcclxuICAgICAgICBsb2NhbFN0b3JhZ2UsXHJcbiAgICAgICAgc2Vzc2lvblN0b3JhZ2VcclxuICAgIH1cclxufVxyXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi9TdG9yYWdlVHlwZS50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgdmFyIGxvY2FsU3RvcmFnZVBvbHlGaWxsOiBhbnk7XHJcbiAgICB2YXIgc2Vzc2lvblN0b3JhZ2VQb2x5RmlsbDogYW55O1xyXG4gICAgZXhwb3J0IGNsYXNzIFN0b3JhZ2VQb2x5ZmlsbCB7XHJcblxyXG4gICAgICAgIHN0YXRpYyBjcmVhdGUod2luZG93SGFuZGxlOiBXaW5kb3csIHN0b3JhZ2VUeXBlIDogU3RvcmFnZVR5cGUpOiBTdG9yYWdlIHtcclxuICAgICAgICAgICAgdmFyIGxhc3RTdG9yYWdlOiBhbnksXHJcbiAgICAgICAgICAgICAgICBsYXN0U3RvcmFnZUtleTogc3RyaW5nLFxyXG4gICAgICAgICAgICAgICAgc3RvcmFnZVBvbHlGaWxsOiBhbnk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHN0b3JhZ2VUeXBlID09PSB2b2lkIDApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnU3RvcmFnZVBvbHlmaWxsRXhjZXB0aW9uJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBBIHN0b3JhZ2UgdHlwZSBtdXN0IGJlIHNwZWNpZmllZCBpbiB0aGUgc3RvcmFnZSBwb2x5ZmlsbCBjcmVhdGUgbWV0aG9kLmBcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHN3aXRjaCAoc3RvcmFnZVR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgU3RvcmFnZVR5cGUubG9jYWxTdG9yYWdlOlxyXG4gICAgICAgICAgICAgICAgICAgIHN0b3JhZ2VQb2x5RmlsbCA9IGxvY2FsU3RvcmFnZVBvbHlGaWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBTdG9yYWdlVHlwZS5zZXNzaW9uU3RvcmFnZTpcclxuICAgICAgICAgICAgICAgICAgICBzdG9yYWdlUG9seUZpbGwgPSBzZXNzaW9uU3RvcmFnZVBvbHlGaWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoc3RvcmFnZVBvbHlGaWxsICE9PSB2b2lkIDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzdG9yYWdlUG9seUZpbGw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHBlcnNpc3Qoc3RvcmFnZTogYW55KSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3dIYW5kbGUubmFtZSA9IEpTT04uc3RyaW5naWZ5KHN0b3JhZ2UpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBnZXRTdG9yYWdlS2V5KGtleTogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ga2V5LmNvbmNhdChzdG9yYWdlVHlwZS50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0U3RvcmFnZUFwaSgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xlYXI6IGZ1bmN0aW9uKCk6IHZvaWQge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIga2V5OiBzdHJpbmc7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhzdG9yYWdlUG9seUZpbGwpLmZvckVhY2goKGtleTogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RvcmFnZVBvbHlGaWxsLmhhc093blByb3BlcnR5KGtleSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgc3RvcmFnZVBvbHlGaWxsW2tleV07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgcGVyc2lzdChzdG9yYWdlUG9seUZpbGwpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGdldEl0ZW06IGZ1bmN0aW9uKGtleTogc3RyaW5nKTogYW55IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAga2V5ID0gZ2V0U3RvcmFnZUtleShrZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RvcmFnZVBvbHlGaWxsW2tleV0gfHwgbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICAgICAgICBrZXk6IGZ1bmN0aW9uKGluZGV4OiBudW1iZXIpOiBzdHJpbmcge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIga2V5czogc3RyaW5nW10gPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAga2V5cyA9IE9iamVjdC5rZXlzKHN0b3JhZ2VQb2x5RmlsbCkuZmlsdGVyKCh2YWx1ZTogc3RyaW5nLCBpbmRleFRvTWF0Y2g6IG51bWJlcikgPT4gaW5kZXhUb01hdGNoID09PSBpbmRleCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4ga2V5cy5sZW5ndGggPiAwID8ga2V5c1swXSA6IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlSXRlbTogZnVuY3Rpb24oa2V5OiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAga2V5ID0gZ2V0U3RvcmFnZUtleShrZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoa2V5IGluIHN0b3JhZ2VQb2x5RmlsbCAmJiBzdG9yYWdlUG9seUZpbGwuaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHN0b3JhZ2VQb2x5RmlsbFtrZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVyc2lzdChzdG9yYWdlUG9seUZpbGwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgc2V0SXRlbShrZXk6IHN0cmluZywgZGF0YTogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleSA9IGdldFN0b3JhZ2VLZXkoa2V5KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmFnZVBvbHlGaWxsW2tleV0gPSBkYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwZXJzaXN0KHN0b3JhZ2VQb2x5RmlsbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZGlzcG9zZTogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBlcnNpc3Qoc3RvcmFnZVBvbHlGaWxsKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzdG9yYWdlUG9seUZpbGwgPSBPYmplY3QuY3JlYXRlKGdldFN0b3JhZ2VBcGkoKSk7XHJcblxyXG4gICAgICAgICAgICBpZiAod2luZG93SGFuZGxlLm5hbWUgIT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICBsYXN0U3RvcmFnZSA9IEpTT04ucGFyc2Uod2luZG93SGFuZGxlLm5hbWUpO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAobGFzdFN0b3JhZ2VLZXkgaW4gbGFzdFN0b3JhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobGFzdFN0b3JhZ2UuaGFzT3duUHJvcGVydHkobGFzdFN0b3JhZ2VLZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0b3JhZ2VQb2x5RmlsbFtsYXN0U3RvcmFnZUtleV0gPSBsYXN0U3RvcmFnZVtsYXN0U3RvcmFnZUtleV07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBzd2l0Y2ggKHN0b3JhZ2VUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFN0b3JhZ2VUeXBlLmxvY2FsU3RvcmFnZTpcclxuICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2VQb2x5RmlsbCA9IHN0b3JhZ2VQb2x5RmlsbDtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gbG9jYWxTdG9yYWdlUG9seUZpbGw7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFN0b3JhZ2VUeXBlLnNlc3Npb25TdG9yYWdlOlxyXG4gICAgICAgICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlUG9seUZpbGwgPSBzdG9yYWdlUG9seUZpbGw7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlc3Npb25TdG9yYWdlUG9seUZpbGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcblxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4vU3RvcmFnZVBvbHlmaWxsLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vU3RvcmFnZVR5cGUudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuXHJcbiAgICAvL1dlIG5lZWQgdG8gZGVmZXIgdGhlIGV2YWx1YXRpb24gb2YgdGhlIHN0b3JhZ2Ugc2luY2Ugb24gZ29vZ2xlIGNocm9tZSAvIGluY29nbml0byBtb2RlLFxyXG4gICAgLy9pdCByYWlzZSBhIHNlY3VyaXR5IGVycm9yIGV4Y2VwdGlvbiAvIGFjY2VzcyBkZW5pZWRcclxuICAgIGZ1bmN0aW9uIGdldFN0b3JhZ2Uoc3RvcmFnZUNhbGxiYWNrIDogKCkgPT4gU3RvcmFnZSwgc3RvcmFnZVR5cGUgOiBTdG9yYWdlVHlwZSwgd2luZG93IDogV2luZG93KTogU3RvcmFnZSB7XHJcbiAgICAgICAgdmFyIGR1bW15RGF0YTogc3RyaW5nID0gJ19fY29tcG9zZXJfX2RhdGFfX2JpZG9uX18nO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHZhciBzdG9yYWdlVG9Vc2UgPSBzdG9yYWdlQ2FsbGJhY2soKTtcclxuICAgICAgICAgICAgaWYgKHN0b3JhZ2VUb1VzZSAhPT0gdm9pZCAwKSB7XHJcbiAgICAgICAgICAgICAgICAvL0hhY2sgdG8gc3VwcG9ydCBzYWZhcmkgYnJvd3NlciAvIGFub255bW91cyBtb2RlIHNpbmNlIGl0IHN1cHBvcnQgbG9jYWwgc3RvcmFnZSBidXQgd2l0aCBhIG1heCBzaXplIG9mIDBrYixcclxuICAgICAgICAgICAgICAgIC8vdGh1cyB3ZSB0cnkgdG8gaW5zZXJ0IGR1bW15IGRhdGEgdG8gY2hlY2sgaWYgaXQgYnJlYWsgb3Igbm90LlxyXG4gICAgICAgICAgICAgICAgc3RvcmFnZVRvVXNlLnNldEl0ZW0oZHVtbXlEYXRhLCBkdW1teURhdGEpO1xyXG4gICAgICAgICAgICAgICAgc3RvcmFnZVRvVXNlLnJlbW92ZUl0ZW0oZHVtbXlEYXRhKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzdG9yYWdlVG9Vc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdTdG9yYWdlIGlzIG5vdCBzdXBwb3J0ZWQgb3IgaXMgZGlzYWJsZWQuIHdpbmRvdy5uYW1lIHdpbGwgYmUgdXNlZCBpbnN0ZWFkLicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIFN0b3JhZ2VQb2x5ZmlsbC5jcmVhdGUod2luZG93LCBzdG9yYWdlVHlwZSk7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IHZhciBTdG9yYWdlRmFjdG9yeSA9IHtcclxuICAgICAgICBjcmVhdGU6IGZ1bmN0aW9uIChzdG9yYWdlVHlwZTogU3RvcmFnZVR5cGUsIHdpbmRvdzogV2luZG93KTogU3RvcmFnZSB7XHJcblxyXG4gICAgICAgICAgICBzd2l0Y2ggKHN0b3JhZ2VUeXBlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBTdG9yYWdlVHlwZS5sb2NhbFN0b3JhZ2U6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBnZXRTdG9yYWdlKCgpID0+IHdpbmRvdy5sb2NhbFN0b3JhZ2UsIHN0b3JhZ2VUeXBlLCB3aW5kb3cpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjYXNlIFN0b3JhZ2VUeXBlLnNlc3Npb25TdG9yYWdlOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZ2V0U3RvcmFnZSgoKSA9PiB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UsIHN0b3JhZ2VUeXBlLCB3aW5kb3cpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnU3RvcmFnZVR5cGVFeGNlcHRpb24nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogYFRoZSBzdG9yYWdlIHR5cGUgXCIke3N0b3JhZ2VUeXBlfVwiIGlzIGN1cnJlbnRseSBub3Qgc3VwcG9ydGVkLmBcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vSUNhY2hlLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vSUNhY2hlUHJvdmlkZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9TdG9yYWdlQmFzZWRDYWNoZS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi9TdG9yYWdlL0lTdG9yYWdlLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uL1N0b3JhZ2UvQmFja2luZ1N0b3JhZ2UudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uL1N0b3JhZ2UvU3RvcmFnZUZhY3RvcnkudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uL1N0b3JhZ2UvU3RvcmFnZVR5cGUudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgQ2FjaGVQcm92aWRlciBpbXBsZW1lbnRzIElDYWNoZVByb3ZpZGVyIHtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgZGVmYXVsdENhY2hlS2V5IDogc3RyaW5nID0gJ29jLWNhY2hlJztcclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBjdXN0b21DYWNoZUtleSA6IHN0cmluZyA9ICdjb21wb3Nlci1zaWduSW5IZWFkZXJDYWNoZSc7XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgX2luc3RhbmNlOiBPcmNrZXN0cmEuQ29tcG9zZXIuSUNhY2hlUHJvdmlkZXIgPSBuZXcgQ2FjaGVQcm92aWRlcigpO1xyXG5cclxuICAgICAgICBwdWJsaWMgd2luZG93OiBXaW5kb3cgPSB3aW5kb3c7XHJcbiAgICAgICAgcHVibGljIGRlZmF1bHRDYWNoZTogSUNhY2hlO1xyXG4gICAgICAgIHB1YmxpYyBjdXN0b21DYWNoZTogSUNhY2hlO1xyXG4gICAgICAgIHB1YmxpYyBsb2NhbFN0b3JhZ2U6IFN0b3JhZ2U7XHJcbiAgICAgICAgcHVibGljIHNlc3Npb25TdG9yYWdlOiBTdG9yYWdlO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGluc3RhbmNlKCk6IE9yY2tlc3RyYS5Db21wb3Nlci5JQ2FjaGVQcm92aWRlciB7XHJcbiAgICAgICAgICAgIHJldHVybiBDYWNoZVByb3ZpZGVyLl9pbnN0YW5jZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgICAgICBpZiAoQ2FjaGVQcm92aWRlci5faW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3I6IEluc3RhbnRpYXRpb24gZmFpbGVkOiBVc2UgQ2FjaGVQcm92aWRlci5pbnN0YW5jZSgpIGluc3RlYWQgb2YgbmV3LicpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmRlZmF1bHRDYWNoZSA9IHRoaXMuZ2V0RGVmYXVsdENhY2hlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuY3VzdG9tQ2FjaGUgPSB0aGlzLmdldEN1c3RvbUNhY2hlKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmxvY2FsU3RvcmFnZSA9IHRoaXMuZ2V0TG9jYWxTdG9yYWdlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2Vzc2lvblN0b3JhZ2UgPSB0aGlzLmdldFNlc3Npb25TdG9yYWdlKCk7XHJcblxyXG4gICAgICAgICAgICBDYWNoZVByb3ZpZGVyLl9pbnN0YW5jZSA9IHRoaXM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZ2V0Q2FjaGUoY2FjaGVLZXk6IHN0cmluZykge1xyXG4gICAgICAgICAgICB2YXIgYmFja2luZ1N0b3JhZ2UgPSB0aGlzLmdldExvY2FsU3RvcmFnZSgpO1xyXG4gICAgICAgICAgICByZXR1cm4gbmV3IFN0b3JhZ2VCYXNlZENhY2hlKG5ldyBCYWNraW5nU3RvcmFnZShiYWNraW5nU3RvcmFnZSksIGNhY2hlS2V5KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBnZXREZWZhdWx0Q2FjaGUoKTogSUNhY2hlIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q2FjaGUoQ2FjaGVQcm92aWRlci5kZWZhdWx0Q2FjaGVLZXkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGdldEN1c3RvbUNhY2hlKCk6IElDYWNoZSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldENhY2hlKENhY2hlUHJvdmlkZXIuY3VzdG9tQ2FjaGVLZXkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXRMb2NhbFN0b3JhZ2UoKTogU3RvcmFnZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBTdG9yYWdlRmFjdG9yeS5jcmVhdGUoU3RvcmFnZVR5cGUubG9jYWxTdG9yYWdlLCB3aW5kb3cpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXRTZXNzaW9uU3RvcmFnZSgpOiBTdG9yYWdlIHtcclxuICAgICAgICAgICAgcmV0dXJuIFN0b3JhZ2VGYWN0b3J5LmNyZWF0ZShTdG9yYWdlVHlwZS5zZXNzaW9uU3RvcmFnZSwgd2luZG93KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2VwYXJhdGVzIHRoZSBsb2dpYyB0aGF0IHJldHJpZXZlcyB0aGUgZGF0YSBhbmQgbWFwcyBpdCB0byB0aGUgZW50aXR5IG1vZGVsIGZyb20gdGhlIGFwcGxpY2F0aW9uIHNlcnZpY2VzIHRoYXQgYWN0cyBvbiB0aGUgbW9kZWwuXHJcbiAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJQ2FydFJlcG9zaXRvcnkge1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXQgdGhlIGNhcnQgb2YgdGhlIGN1cnJlbnQgY3VzdG9tZXIuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZ2V0Q2FydCgpOiBRLlByb21pc2U8YW55PjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQWRkIGEgbGluZSBpdGVtIHRvIHRoZSBjYXJ0IG9mIHRoZSBjdXJyZW50IGN1c3RvbWVyLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGFkZExpbmVJdGVtKHByb2R1Y3RJZDogc3RyaW5nLCB2YXJpYW50SWQ6IHN0cmluZywgcXVhbnRpdHk6IG51bWJlcixcclxuICAgICAgICAgICAgcmVjdXJyaW5nT3JkZXJGcmVxdWVuY3lOYW1lPzogc3RyaW5nLFxyXG4gICAgICAgICAgICByZWN1cnJpbmdPcmRlclByb2dyYW1OYW1lPzogc3RyaW5nKTogUS5Qcm9taXNlPGFueT47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFVwZGF0ZSB0aGUgcXVhbnRpdHkgb2YgYSBsaW5lIGl0ZW0gaW4gdGhlIGNhcnQgb2YgdGhlIGN1cnJlbnQgY3VzdG9tZXIuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdXBkYXRlTGluZUl0ZW0obGluZUl0ZW1JZDogc3RyaW5nLCBxdWFudGl0eTogbnVtYmVyLFxyXG4gICAgICAgICAgICByZWN1cnJpbmdPcmRlckZyZXF1ZW5jeU5hbWU/OiBzdHJpbmcsXHJcbiAgICAgICAgICAgIHJlY3VycmluZ09yZGVyUHJvZ3JhbU5hbWU/OiBzdHJpbmcpOiBRLlByb21pc2U8YW55PjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGVsZXRlIGEgbGluZSBpdGVtIGZyb20gdGhlIGNhcnQgb2YgdGhlIGN1cnJlbnQgY3VzdG9tZXIuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZGVsZXRlTGluZUl0ZW0obGluZUl0ZW1JZDogc3RyaW5nKTogUS5Qcm9taXNlPGFueT47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFVwZGF0ZSB0aGUgcG9zdGFsIGNvZGUgb2YgdGhlIGJpbGxpbmcgbWV0aG9kIGluIGNhcnQgb2YgdGhlIGN1cnJlbnQgY3VzdG9tZXIuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdXBkYXRlQmlsbGluZ01ldGhvZFBvc3RhbENvZGUocG9zdGFsQ29kZTogc3RyaW5nKTogUS5Qcm9taXNlPGFueT47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFVwZGF0ZSB0aGUgcG9zdGFsIGNvZGUgb2YgdGhlIHNoaXBwaW5nIG1ldGhvZCBpbiBjYXJ0IG9mIHRoZSBjdXJyZW50IGN1c3RvbWVyLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHVwZGF0ZVNoaXBwaW5nTWV0aG9kUG9zdGFsQ29kZShwb3N0YWxDb2RlOiBzdHJpbmcpOiBRLlByb21pc2U8YW55PjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU2V0IHRoZSBjaGVhcGVzdCBzaGlwcGluZyBtZXRob2QgaW4gY2FydCBvZiB0aGUgY3VycmVudCBjdXN0b21lci5cclxuICAgICAgICAgKi9cclxuICAgICAgICBzZXRDaGVhcGVzdFNoaXBwaW5nTWV0aG9kKCk6IFEuUHJvbWlzZTxhbnk+O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBZGQgYSBjb3Vwb24gdG8gdGhlIGNhcnQgb2YgdGhlIGN1cnJlbnQgY3VzdG9tZXIuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgYWRkQ291cG9uKGNvdXBvbkNvZGU6IHN0cmluZyk6IFEuUHJvbWlzZTxhbnk+O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZW1vdmUgYSBjb3Vwb24gZnJvbSB0aGUgY2FydCBvZiB0aGUgY3VycmVudCBjdXN0b21lci5cclxuICAgICAgICAgKi9cclxuICAgICAgICByZW1vdmVDb3Vwb24oY291cG9uQ29kZTogc3RyaW5nKTogUS5Qcm9taXNlPGFueT47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENsZWFucyB0aGUgY2FydCBvZiBpbnZhbGlkIGxpbmUgaXRlbXMuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY2xlYW4oKTogUS5Qcm9taXNlPGFueT47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFVwZGF0ZSB0aGUgY2FydCBvZiB0aGUgY3VycmVudCBjdXN0b21lci5cclxuICAgICAgICAgKi9cclxuICAgICAgICB1cGRhdGVDYXJ0KHBhcmFtOiBhbnkpOiBRLlByb21pc2U8SVVwZGF0ZUNhcnRSZXN1bHQ+O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBDb21wbGV0ZSB0aGUgY2hlY2tvdXQsIHRoZXJlYnkgY2xlYXJpbmcgZXZlcnkgaXRlbSBpbiB0aGUgY2FydCBvZiB0aGUgY3VycmVudCBjdXN0b21lci5cclxuICAgICAgICAgKi9cclxuICAgICAgICBjb21wbGV0ZUNoZWNrb3V0KGN1cnJlbnRTdGVwOiBudW1iZXIpOiBRLlByb21pc2U8SUNvbXBsZXRlQ2hlY2tvdXRSZXN1bHQ+O1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSVVwZGF0ZUNhcnRSZXN1bHQge1xyXG5cclxuICAgICAgICBIYXNFcnJvcnM6IGJvb2xlYW47XHJcblxyXG4gICAgICAgIE5leHRTdGVwVXJsOiBzdHJpbmc7XHJcblxyXG4gICAgICAgIENhcnQ6IGFueTtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElDb21wbGV0ZUNoZWNrb3V0UmVzdWx0IHtcclxuXHJcbiAgICAgICAgT3JkZXJOdW1iZXI6IHN0cmluZztcclxuXHJcbiAgICAgICAgQ3VzdG9tZXJFbWFpbDogc3RyaW5nO1xyXG5cclxuICAgICAgICBOZXh0U3RlcFVybDogc3RyaW5nO1xyXG4gICAgfVxyXG59XHJcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuLy4uL012Yy9Db21wb3NlckNsaWVudC50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi9JQ2FydFJlcG9zaXRvcnkudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgQ2FydFJlcG9zaXRvcnkgaW1wbGVtZW50cyBJQ2FydFJlcG9zaXRvcnkge1xyXG5cclxuICAgICAgICBwdWJsaWMgZ2V0Q2FydCgpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gQ29tcG9zZXJDbGllbnQuZ2V0KCcvYXBpL2NhcnQvZ2V0Y2FydCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGFkZExpbmVJdGVtKHByb2R1Y3RJZDogc3RyaW5nLCB2YXJpYW50SWQ6IHN0cmluZywgcXVhbnRpdHk6IG51bWJlcixcclxuICAgICAgICAgICAgcmVjdXJyaW5nT3JkZXJGcmVxdWVuY3lOYW1lPzogc3RyaW5nLFxyXG4gICAgICAgICAgICByZWN1cnJpbmdPcmRlclByb2dyYW1OYW1lPzogc3RyaW5nKTogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgaWYgKCFwcm9kdWN0SWQpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIHByb2R1Y3QgaWQgaXMgcmVxdWlyZWQnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHF1YW50aXR5IDw9IDApIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIHF1YW50aXR5IG11c3QgYmUgZ3JlYXRlciB0aGFuIHplcm8nKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBQcm9kdWN0SWQ6IHByb2R1Y3RJZCxcclxuICAgICAgICAgICAgICAgIFZhcmlhbnRJZDogdmFyaWFudElkLFxyXG4gICAgICAgICAgICAgICAgUXVhbnRpdHk6IHF1YW50aXR5LFxyXG4gICAgICAgICAgICAgICAgUmVjdXJyaW5nT3JkZXJGcmVxdWVuY3lOYW1lOiByZWN1cnJpbmdPcmRlckZyZXF1ZW5jeU5hbWUsXHJcbiAgICAgICAgICAgICAgICBSZWN1cnJpbmdPcmRlclByb2dyYW1OYW1lOiByZWN1cnJpbmdPcmRlclByb2dyYW1OYW1lXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gQ29tcG9zZXJDbGllbnQucG9zdCgnL2FwaS9jYXJ0L2xpbmVpdGVtJywgZGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdXBkYXRlTGluZUl0ZW0obGluZUl0ZW1JZDogc3RyaW5nLCBxdWFudGl0eTogbnVtYmVyLFxyXG4gICAgICAgICAgICByZWN1cnJpbmdPcmRlckZyZXF1ZW5jeU5hbWU/OiBzdHJpbmcsXHJcbiAgICAgICAgICAgIHJlY3VycmluZ09yZGVyUHJvZ3JhbU5hbWU/OiBzdHJpbmcpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWxpbmVJdGVtSWQpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIGxpbmUgaXRlbSBpZCBpcyByZXF1aXJlZCcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAocXVhbnRpdHkgPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgcXVhbnRpdHkgbXVzdCBiZSBncmVhdGVyIHRoYW4gemVybycpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIExpbmVJdGVtSWQ6IGxpbmVJdGVtSWQsXHJcbiAgICAgICAgICAgICAgICBRdWFudGl0eTogcXVhbnRpdHksXHJcbiAgICAgICAgICAgICAgICBSZWN1cnJpbmdPcmRlckZyZXF1ZW5jeU5hbWU6IHJlY3VycmluZ09yZGVyRnJlcXVlbmN5TmFtZSxcclxuICAgICAgICAgICAgICAgIFJlY3VycmluZ09yZGVyUHJvZ3JhbU5hbWU6IHJlY3VycmluZ09yZGVyUHJvZ3JhbU5hbWVcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBDb21wb3NlckNsaWVudC5wdXQoJy9hcGkvY2FydC9saW5laXRlbScsIGRhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGRlbGV0ZUxpbmVJdGVtKGxpbmVJdGVtSWQ6IHN0cmluZyk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIGlmICghbGluZUl0ZW1JZCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgbGluZSBpdGVtIGlkIGlzIHJlcXVpcmVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgTGluZUl0ZW1JZDogbGluZUl0ZW1JZFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIENvbXBvc2VyQ2xpZW50LnJlbW92ZSgnL2FwaS9jYXJ0L2xpbmVpdGVtJywgZGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdXBkYXRlQmlsbGluZ01ldGhvZFBvc3RhbENvZGUocG9zdGFsQ29kZTogc3RyaW5nKTogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgaWYgKCFwb3N0YWxDb2RlKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBwb3N0YWwgY29kZSBpcyByZXF1aXJlZCcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIFBvc3RhbENvZGU6IHBvc3RhbENvZGVcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBDb21wb3NlckNsaWVudC5wb3N0KCcvYXBpL2NhcnQvYmlsbGluZ2FkZHJlc3MnLCBkYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB1cGRhdGVTaGlwcGluZ01ldGhvZFBvc3RhbENvZGUocG9zdGFsQ29kZTogc3RyaW5nKTogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgaWYgKCFwb3N0YWxDb2RlKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBwb3N0YWwgY29kZSBpcyByZXF1aXJlZCcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIFBvc3RhbENvZGU6IHBvc3RhbENvZGVcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBDb21wb3NlckNsaWVudC5wb3N0KCcvYXBpL2NhcnQvc2hpcHBpbmdhZGRyZXNzJywgZGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc2V0Q2hlYXBlc3RTaGlwcGluZ01ldGhvZCgpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIFVzZUNoZWFwZXN0OiB0cnVlXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gQ29tcG9zZXJDbGllbnQucG9zdCgnL2FwaS9jYXJ0L3NoaXBwaW5nbWV0aG9kJywgZGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYWRkQ291cG9uKGNvdXBvbkNvZGU6IHN0cmluZyk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIGlmICghY291cG9uQ29kZSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgY291cG9uIGNvZGUgaXMgcmVxdWlyZWQnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBDb3Vwb25Db2RlOiBjb3Vwb25Db2RlXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gQ29tcG9zZXJDbGllbnQucG9zdCgnL2FwaS9jYXJ0L2NvdXBvbicsIGRhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHJlbW92ZUNvdXBvbihjb3Vwb25Db2RlOiBzdHJpbmcpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWNvdXBvbkNvZGUpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIGNvdXBvbiBjb2RlIGlzIHJlcXVpcmVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgQ291cG9uQ29kZTogY291cG9uQ29kZVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIENvbXBvc2VyQ2xpZW50LnJlbW92ZSgnL2FwaS9jYXJ0L2NvdXBvbicsIGRhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGNsZWFuKCk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhID0geyB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIENvbXBvc2VyQ2xpZW50LnJlbW92ZSgnL2FwaS9jYXJ0L2NsZWFuJywgZGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdXBkYXRlQ2FydChwYXJhbTogYW55KTogUS5Qcm9taXNlPElVcGRhdGVDYXJ0UmVzdWx0PiB7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXBhcmFtKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBwYXJhbSBpcyByZXF1aXJlZCcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gQ29tcG9zZXJDbGllbnQucG9zdCgnL2FwaS9jYXJ0L3VwZGF0ZUNhcnQnLCBwYXJhbSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgY29tcGxldGVDaGVja291dChjdXJyZW50U3RlcDogbnVtYmVyKTogUS5Qcm9taXNlPElDb21wbGV0ZUNoZWNrb3V0UmVzdWx0PiB7XHJcblxyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIEN1cnJlbnRTdGVwOiBjdXJyZW50U3RlcFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIENvbXBvc2VyQ2xpZW50LnBvc3QoJy9hcGkvY2FydC9jb21wbGV0ZWNoZWNrb3V0JywgZGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXBhcmF0ZXMgdGhlIGxvZ2ljIHRoYXQgcmV0cmlldmVzIHRoZSBkYXRhIGFuZCBtYXBzIGl0IHRvIHRoZSBlbnRpdHkgbW9kZWwgZnJvbSB0aGUgYXBwbGljYXRpb24gc2VydmljZXMgdGhhdCBhY3RzIG9uIHRoZSBtb2RlbC5cclxuICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElDYXJ0U2VydmljZSB7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldCB0aGUgY2FydCBvZiB0aGUgY3VycmVudCBjdXN0b21lci5cclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXRDYXJ0KCk6IFEuUHJvbWlzZTxhbnk+O1xyXG5cclxuICAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0IHRoZSBjYXJ0IG9mIHRoZSBjdXJyZW50IGN1c3RvbWVyLlxyXG4gICAgICAgICAqIFRoaXMgZm9yY2VzIHRoZSByZXBvc2l0b3J5IHRvIGdldCBhIGZyZXNoIGNhcnQgZnJvbSBDb21wb3NlcixcclxuICAgICAgICAgKiBiZWNhdXNlIHRoZSBjYXJ0IHdpbGwgY29udGFpbiBkaWZmZXJlbnQgcHJvcGVydHkgdmFsdWVzIGZvciBlYWNoIGNoZWNrb3V0IHN0ZXAuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZ2V0RnJlc2hDYXJ0KCk6IFEuUHJvbWlzZTxhbnk+O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBZGQgYSBsaW5lIGl0ZW0gdG8gdGhlIGNhcnQgb2YgdGhlIGN1cnJlbnQgY3VzdG9tZXIuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgYWRkTGluZUl0ZW0ocHJvZHVjdElkOiBzdHJpbmcsIHByaWNlOiBzdHJpbmcsIHZhcmlhbnRJZDogc3RyaW5nLCBxdWFudGl0eTogbnVtYmVyLFxyXG4gICAgICAgICAgICByZWN1cnJpbmdPcmRlckZyZXF1ZW5jeU5hbWU/OiBzdHJpbmcsXHJcbiAgICAgICAgICAgIHJlY3VycmluZ09yZGVyUHJvZ3JhbU5hbWU/OiBzdHJpbmcpOiBRLlByb21pc2U8YW55PjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVXBkYXRlIHRoZSBxdWFudGl0eSBvZiBhIGxpbmUgaXRlbSBpbiB0aGUgY2FydCBvZiB0aGUgY3VycmVudCBjdXN0b21lci5cclxuICAgICAgICAgKi9cclxuICAgICAgICB1cGRhdGVMaW5lSXRlbShsaW5lSXRlbUlkOiBzdHJpbmcsIHF1YW50aXR5OiBudW1iZXIsIHByb2R1Y3RJZDogc3RyaW5nLFxyXG4gICAgICAgICAgICByZWN1cnJpbmdPcmRlckZyZXF1ZW5jeU5hbWU/OiBzdHJpbmcsXHJcbiAgICAgICAgICAgIHJlY3VycmluZ09yZGVyUHJvZ3JhbU5hbWU/OiBzdHJpbmcpOiBRLlByb21pc2U8YW55PjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGVsZXRlIGEgbGluZSBpdGVtIGZyb20gdGhlIGNhcnQgb2YgdGhlIGN1cnJlbnQgY3VzdG9tZXIuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZGVsZXRlTGluZUl0ZW0obGluZUl0ZW1JZDogc3RyaW5nLCBwcm9kdWN0SWQ6IHN0cmluZyk6IFEuUHJvbWlzZTxhbnk+O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBVcGRhdGUgdGhlIHBvc3RhbCBjb2RlIG9mIHRoZSBiaWxsaW5nIG1ldGhvZCBpbiBjYXJ0IG9mIHRoZSBjdXJyZW50IGN1c3RvbWVyLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHVwZGF0ZUJpbGxpbmdNZXRob2RQb3N0YWxDb2RlKHBvc3RhbENvZGU6IHN0cmluZyk6IFEuUHJvbWlzZTx2b2lkPjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVXBkYXRlIHRoZSBwb3N0YWwgY29kZSBvZiB0aGUgc2hpcHBpbmcgbWV0aG9kIGluIGNhcnQgb2YgdGhlIGN1cnJlbnQgY3VzdG9tZXIuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdXBkYXRlU2hpcHBpbmdNZXRob2RQb3N0YWxDb2RlKHBvc3RhbENvZGU6IHN0cmluZyk6IFEuUHJvbWlzZTx2b2lkPjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogU2V0IHRoZSBjaGVhcGVzdCBzaGlwcGluZyBtZXRob2QgaW4gY2FydCBvZiB0aGUgY3VycmVudCBjdXN0b21lci5cclxuICAgICAgICAgKi9cclxuICAgICAgICBzZXRDaGVhcGVzdFNoaXBwaW5nTWV0aG9kKCk6IFEuUHJvbWlzZTx2b2lkPjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQWRkIGEgY291cG9uIHRvIHRoZSBjYXJ0IG9mIHRoZSBjdXJyZW50IGN1c3RvbWVyLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGFkZENvdXBvbihjb3Vwb25Db2RlOiBzdHJpbmcpOiBRLlByb21pc2U8dm9pZD47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJlbW92ZSBhIGNvdXBvbiBmcm9tIHRoZSBjYXJ0IG9mIHRoZSBjdXJyZW50IGN1c3RvbWVyLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHJlbW92ZUNvdXBvbihjb3Vwb25Db2RlOiBzdHJpbmcpOiBRLlByb21pc2U8dm9pZD47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENsZWFucyB0aGUgY2FydCBvZiBpbnZhbGlkIGxpbmUgaXRlbXMuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY2xlYW4oKTogUS5Qcm9taXNlPHZvaWQ+O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBVcGRhdGUgdGhlIGNhcnQgb2YgdGhlIGN1cnJlbnQgY3VzdG9tZXIuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgdXBkYXRlQ2FydChwYXJhbTogYW55KTogUS5Qcm9taXNlPElVcGRhdGVDYXJ0UmVzdWx0PjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ29tcGxldGUgdGhlIGNoZWNrb3V0LCB0aGVyZWJ5IGNsZWFyaW5nIGV2ZXJ5IGl0ZW0gaW4gdGhlIGNhcnQgb2YgdGhlIGN1cnJlbnQgY3VzdG9tZXIuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgY29tcGxldGVDaGVja291dChjdXJyZW50U3RlcDogbnVtYmVyKTogUS5Qcm9taXNlPElDb21wbGV0ZUNoZWNrb3V0UmVzdWx0PjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQ2xlYXIgdGhlIENhcnQgY2FjaGVcclxuICAgICAgICAgKi9cclxuICAgICAgICBpbnZhbGlkYXRlQ2FjaGUoKTogUS5Qcm9taXNlPHZvaWQ+O1xyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvQ2FjaGUvQ2FjaGVQcm92aWRlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9DYWNoZS9DYWNoZUVycm9yLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L1JlcG9zaXRvcmllcy9DYXJ0UmVwb3NpdG9yeS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9FdmVudHMvRXZlbnRIdWIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9JQ2FydFNlcnZpY2UudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgQ2FydFNlcnZpY2UgaW1wbGVtZW50cyBJQ2FydFNlcnZpY2Uge1xyXG5cclxuICAgICAgICBwcml2YXRlIHN0YXRpYyBHZXR0aW5nRnJlc2hDYXJ0OiBRLlByb21pc2U8YW55PjtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBjYWNoZUtleTogc3RyaW5nID0gJ0NhcnRWaWV3TW9kZWwnO1xyXG4gICAgICAgIHByaXZhdGUgY2FjaGVQb2xpY3k6IElDYWNoZVBvbGljeSA9IHsgc2xpZGluZ0V4cGlyYXRpb246IDMwMCB9OyAvLyA1bWluXHJcbiAgICAgICAgcHJpdmF0ZSBjYWNoZVByb3ZpZGVyOiBJQ2FjaGVQcm92aWRlcjtcclxuICAgICAgICBwcml2YXRlIGNhcnRSZXBvc2l0b3J5OiBJQ2FydFJlcG9zaXRvcnk7XHJcbiAgICAgICAgcHJpdmF0ZSBldmVudEh1YjogSUV2ZW50SHViO1xyXG5cclxuICAgICAgICBjb25zdHJ1Y3RvcihjYXJ0UmVwb3NpdG9yeTogSUNhcnRSZXBvc2l0b3J5LCBldmVudEh1YjogSUV2ZW50SHViKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWNhcnRSZXBvc2l0b3J5KSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Vycm9yOiBjYXJ0UmVwb3NpdG9yeSBpcyByZXF1aXJlZCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghZXZlbnRIdWIpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3I6IGV2ZW50SHViIGlzIHJlcXVpcmVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuY2FjaGVQcm92aWRlciA9IENhY2hlUHJvdmlkZXIuaW5zdGFuY2UoKTtcclxuICAgICAgICAgICAgdGhpcy5jYXJ0UmVwb3NpdG9yeSA9IGNhcnRSZXBvc2l0b3J5O1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViID0gZXZlbnRIdWI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZ2V0Q2FydCgpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDYWNoZUNhcnQoKVxyXG4gICAgICAgICAgICAgICAgLmZhaWwocmVhc29uID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY2FuSGFuZGxlKHJlYXNvbikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RnJlc2hDYXJ0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdBbiBlcnJvciBvY2N1cmVkIHdoaWxlIGdldHRpbmcgdGhlIGNhcnQgZnJvbSBjYWNoZS4nLCByZWFzb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IHJlYXNvbjtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBjYW5IYW5kbGUocmVhc29uOiBhbnkpOiBib29sZWFuIHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiByZWFzb24gPT09IENhY2hlRXJyb3IuRXhwaXJlZCB8fCByZWFzb24gPT09IENhY2hlRXJyb3IuTm90Rm91bmQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZ2V0RnJlc2hDYXJ0KCk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIGlmICghQ2FydFNlcnZpY2UuR2V0dGluZ0ZyZXNoQ2FydCkge1xyXG4gICAgICAgICAgICAgICAgQ2FydFNlcnZpY2UuR2V0dGluZ0ZyZXNoQ2FydCA9IHRoaXMuY2FydFJlcG9zaXRvcnkuZ2V0Q2FydCgpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oY2FydCA9PiB0aGlzLnNldENhcnRUb0NhY2hlKGNhcnQpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gdG8gYXZvaWQgZ2V0dGluZyBhIGZyZXNoIGNhcnQgbXVsdGlwbGUgdGltZXMgd2l0aGluIGEgcGFnZSBzZXNzaW9uXHJcbiAgICAgICAgICAgIHJldHVybiBDYXJ0U2VydmljZS5HZXR0aW5nRnJlc2hDYXJ0XHJcbiAgICAgICAgICAgICAgICAuZmFpbCgocmVhc29uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignQW4gZXJyb3Igb2NjdXJlZCB3aGlsZSBnZXR0aW5nIGEgZnJlc2ggY2FydC4nLCByZWFzb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IHJlYXNvbjtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGFkZExpbmVJdGVtKHByb2R1Y3RJZDogc3RyaW5nLCBwcmljZTogc3RyaW5nLCB2YXJpYW50SWQ/OiBzdHJpbmcsXHJcbiAgICAgICAgICAgICBxdWFudGl0eTogbnVtYmVyID0gMSxcclxuICAgICAgICAgICAgIHJlY3VycmluZ09yZGVyRnJlcXVlbmN5TmFtZT86IHN0cmluZyxcclxuICAgICAgICAgICAgIHJlY3VycmluZ09yZGVyUHJvZ3JhbU5hbWU/OiBzdHJpbmcpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIFByb2R1Y3RJZDogcHJvZHVjdElkLFxyXG4gICAgICAgICAgICAgICAgVmFyaWFudElkOiB2YXJpYW50SWQsXHJcbiAgICAgICAgICAgICAgICBRdWFudGl0eTogcXVhbnRpdHksXHJcbiAgICAgICAgICAgICAgICBQcmljZTogcHJpY2VcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaCgnY2FydFVwZGF0aW5nJywgeyBkYXRhOiBkYXRhIH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FydFJlcG9zaXRvcnkuYWRkTGluZUl0ZW0ocHJvZHVjdElkLCB2YXJpYW50SWQsIHF1YW50aXR5LCByZWN1cnJpbmdPcmRlckZyZXF1ZW5jeU5hbWUsIHJlY3VycmluZ09yZGVyUHJvZ3JhbU5hbWUpXHJcbiAgICAgICAgICAgICAgICAudGhlbihjYXJ0ID0+IHRoaXMuc2V0Q2FydFRvQ2FjaGUoY2FydCkpXHJcbiAgICAgICAgICAgICAgICAudGhlbihjYXJ0ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgYWRkZWRUb0NhcnREYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBDYXJ0OiBjYXJ0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBQcm9kdWN0SWQ6IHByb2R1Y3RJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgVmFyaWFudElkOiB2YXJpYW50SWRcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goJ2NhcnRVcGRhdGVkJywgeyBkYXRhOiBjYXJ0IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaCgnbGluZUl0ZW1BZGRlZFRvQ2FydCcsIHsgZGF0YTogYWRkZWRUb0NhcnREYXRhIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdXBkYXRlTGluZUl0ZW0obGluZUl0ZW1JZDogc3RyaW5nLCBxdWFudGl0eTogbnVtYmVyLCBwcm9kdWN0SWQ6IHN0cmluZyxcclxuICAgICAgICAgICAgcmVjdXJyaW5nT3JkZXJGcmVxdWVuY3lOYW1lPzogc3RyaW5nLFxyXG4gICAgICAgICAgICByZWN1cnJpbmdPcmRlclByb2dyYW1OYW1lPzogc3RyaW5nKTogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBMaW5lSXRlbUlkOiBsaW5lSXRlbUlkLFxyXG4gICAgICAgICAgICAgICAgUXVhbnRpdHk6IHF1YW50aXR5LFxyXG4gICAgICAgICAgICAgICAgUHJvZHVjdElkOiBwcm9kdWN0SWRcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaCgnY2FydFVwZGF0aW5nJywgeyBkYXRhOiBkYXRhIH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FydFJlcG9zaXRvcnkudXBkYXRlTGluZUl0ZW0obGluZUl0ZW1JZCwgcXVhbnRpdHksIHJlY3VycmluZ09yZGVyRnJlcXVlbmN5TmFtZSwgcmVjdXJyaW5nT3JkZXJQcm9ncmFtTmFtZSlcclxuICAgICAgICAgICAgICAgIC50aGVuKGNhcnQgPT4gdGhpcy5zZXRDYXJ0VG9DYWNoZShjYXJ0KSlcclxuICAgICAgICAgICAgICAgIC50aGVuKGNhcnQgPT4gdGhpcy5ldmVudEh1Yi5wdWJsaXNoKCdjYXJ0VXBkYXRlZCcsIHsgZGF0YTogY2FydCB9KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZGVsZXRlTGluZUl0ZW0obGluZUl0ZW1JZDogc3RyaW5nLCBwcm9kdWN0SWQ6IHN0cmluZyk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgTGluZUl0ZW1JZDogbGluZUl0ZW1JZCxcclxuICAgICAgICAgICAgICAgIFByb2R1Y3RJZDogcHJvZHVjdElkXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goJ2NhcnRVcGRhdGluZycsIHsgZGF0YTogZGF0YSB9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNhcnRSZXBvc2l0b3J5LmRlbGV0ZUxpbmVJdGVtKGxpbmVJdGVtSWQpXHJcbiAgICAgICAgICAgICAgICAudGhlbihjYXJ0ID0+IHRoaXMuc2V0Q2FydFRvQ2FjaGUoY2FydCkpXHJcbiAgICAgICAgICAgICAgICAudGhlbihjYXJ0ID0+IHRoaXMuZXZlbnRIdWIucHVibGlzaCgnY2FydFVwZGF0ZWQnLCB7IGRhdGE6IGNhcnQgfSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHVwZGF0ZUJpbGxpbmdNZXRob2RQb3N0YWxDb2RlKHBvc3RhbENvZGU6IHN0cmluZyk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNhcnRSZXBvc2l0b3J5LnVwZGF0ZUJpbGxpbmdNZXRob2RQb3N0YWxDb2RlKHBvc3RhbENvZGUpXHJcbiAgICAgICAgICAgICAgICAudGhlbihjYXJ0ID0+IHRoaXMuc2V0Q2FydFRvQ2FjaGUoY2FydCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHVwZGF0ZVNoaXBwaW5nTWV0aG9kUG9zdGFsQ29kZShwb3N0YWxDb2RlOiBzdHJpbmcpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jYXJ0UmVwb3NpdG9yeS51cGRhdGVTaGlwcGluZ01ldGhvZFBvc3RhbENvZGUocG9zdGFsQ29kZSlcclxuICAgICAgICAgICAgICAgIC50aGVuKGNhcnQgPT4gdGhpcy5zZXRDYXJ0VG9DYWNoZShjYXJ0KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc2V0Q2hlYXBlc3RTaGlwcGluZ01ldGhvZCgpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jYXJ0UmVwb3NpdG9yeS5zZXRDaGVhcGVzdFNoaXBwaW5nTWV0aG9kKClcclxuICAgICAgICAgICAgICAgIC50aGVuKGNhcnQgPT4gdGhpcy5zZXRDYXJ0VG9DYWNoZShjYXJ0KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYWRkQ291cG9uKGNvdXBvbkNvZGU6IHN0cmluZyk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNhcnRSZXBvc2l0b3J5LmFkZENvdXBvbihjb3Vwb25Db2RlKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oY2FydCA9PiB0aGlzLnNldENhcnRUb0NhY2hlKGNhcnQpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyByZW1vdmVDb3Vwb24oY291cG9uQ29kZTogc3RyaW5nKTogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FydFJlcG9zaXRvcnkucmVtb3ZlQ291cG9uKGNvdXBvbkNvZGUpXHJcbiAgICAgICAgICAgICAgICAudGhlbihjYXJ0ID0+IHRoaXMuc2V0Q2FydFRvQ2FjaGUoY2FydCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGNsZWFuKCk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNhcnRSZXBvc2l0b3J5LmNsZWFuKClcclxuICAgICAgICAgICAgICAgIC50aGVuKGNhcnQgPT4gdGhpcy5zZXRDYXJ0VG9DYWNoZShjYXJ0KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdXBkYXRlQ2FydChwYXJhbTogYW55KTogUS5Qcm9taXNlPElVcGRhdGVDYXJ0UmVzdWx0PiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jYXJ0UmVwb3NpdG9yeS51cGRhdGVDYXJ0KHBhcmFtKVxyXG4gICAgICAgICAgICAgICAgIC50aGVuKChyZXN1bHQ6IElVcGRhdGVDYXJ0UmVzdWx0KSA9PiB0aGlzLnNldENhcnRUb0NhY2hlKHJlc3VsdC5DYXJ0KS50aGVuKCgpID0+IHJlc3VsdCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGNvbXBsZXRlQ2hlY2tvdXQoY3VycmVudFN0ZXA6IG51bWJlcik6IFEuUHJvbWlzZTxJQ29tcGxldGVDaGVja291dFJlc3VsdD4ge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FydFJlcG9zaXRvcnkuY29tcGxldGVDaGVja291dChjdXJyZW50U3RlcClcclxuICAgICAgICAgICAgICAgICAudGhlbigocmVzdWx0OiBJQ29tcGxldGVDaGVja291dFJlc3VsdCkgPT4gdGhpcy5zZXRDYXJ0VG9DYWNoZShudWxsKS50aGVuKCgpID0+IHJlc3VsdCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGludmFsaWRhdGVDYWNoZSgpOiBRLlByb21pc2U8dm9pZD4ge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGVQcm92aWRlci5kZWZhdWx0Q2FjaGUuY2xlYXIodGhpcy5jYWNoZUtleSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgZ2V0Q2FjaGVDYXJ0KCk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNhY2hlUHJvdmlkZXIuZGVmYXVsdENhY2hlLmdldDxhbnk+KHRoaXMuY2FjaGVLZXkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHNldENhcnRUb0NhY2hlKGNhcnQ6IGFueSk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNhY2hlUHJvdmlkZXIuZGVmYXVsdENhY2hlLnNldCh0aGlzLmNhY2hlS2V5LCBjYXJ0LCB0aGlzLmNhY2hlUG9saWN5KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSUVycm9yIHtcclxuICAgICAgICBFcnJvckNvZGU6IHN0cmluZztcclxuICAgICAgICBMb2NhbGl6ZWRFcnJvck1lc3NhZ2U6IHN0cmluZztcclxuICAgIH1cclxufSIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4vSUVycm9yLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElFcnJvckNvbGxlY3Rpb24ge1xyXG4gICAgICAgIEVycm9yczogSUVycm9yW107XHJcbiAgICB9XHJcbn0iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuL0lFcnJvci50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJRXJyb3JIYW5kbGVyIHtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogV2lsbCBvdXRwdXQgdGhlIGVycm9yIHRvIHRoZSB1c2VyLlxyXG4gICAgICAgICAqIEBwYXJhbSB7SUVycm9yfSBlcnJvciBFcnJvciB0byBkaXNwbGF5LlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG91dHB1dEVycm9yKGVycm9yOiBJRXJyb3IpOiB2b2lkO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBXaWxsIGxvY2FsaXplIGFuIGVycm9yIGJhc2VkIG9uIGl0cyBjb2RlIGFuZCB3aWxsIGRpc3BsYXkgaXRcclxuICAgICAgICAgKiB0byB0aGUgdXNlci5cclxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXJyb3JDb2RlIEVycm9yIGNvZGUgdG8gbG9jYWxpemUuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgb3V0cHV0RXJyb3JGcm9tQ29kZShlcnJvckNvZGU6IHN0cmluZyk6IHZvaWQ7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJlbW92ZXMgYWxsIGVycm9ycyBmcm9tIHRoZSBjdXJyZW50IHBhZ2UuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcmVtb3ZlRXJyb3JzKCk6IHZvaWQ7XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi9JRXJyb3JDb2xsZWN0aW9uLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuL0lFcnJvci50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi9JRXJyb3JIYW5kbGVyLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuLi9NdmMvTG9jYWxpemF0aW9uL0xvY2FsaXphdGlvblByb3ZpZGVyLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuLi9FdmVudHMvRXZlbnRIdWIudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIGV4cG9ydCBjbGFzcyBFcnJvckhhbmRsZXIgaW1wbGVtZW50cyBJRXJyb3JIYW5kbGVyIHtcclxuXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnN0YW5jZSgpOiBJRXJyb3JIYW5kbGVyIHtcclxuICAgICAgICAgICAgdmFyIGluc3RhbmNlOiBJRXJyb3JIYW5kbGVyID0gbmV3IEVycm9ySGFuZGxlcigpO1xyXG5cclxuICAgICAgICAgICAgdmFyIG1lbW9pemUgPSAoKSA9PiBpbnN0YW5jZTtcclxuICAgICAgICAgICAgRXJyb3JIYW5kbGVyLmluc3RhbmNlID0gbWVtb2l6ZTtcclxuICAgICAgICAgICAgcmV0dXJuIG1lbW9pemUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFdpbGwgb3V0cHV0IHRoZSBlcnJvciB0byB0aGUgdXNlci5cclxuICAgICAgICAgKiBAcGFyYW0ge0lFcnJvcn0gZXJyb3IgRXJyb3IgdG8gZGlzcGxheS5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgb3V0cHV0RXJyb3IoZXJyb3I6IElFcnJvcik6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLnB1Ymxpc2hHZW5lcmljRXJyb3JFdmVudChlcnJvcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBXaWxsIGxvY2FsaXplIGFuIGVycm9yIGJhc2VkIG9uIGl0cyBjb2RlIGFuZCB3aWxsIGRpc3BsYXkgaXRcclxuICAgICAgICAgKiB0byB0aGUgdXNlci5cclxuICAgICAgICAgKiBAcGFyYW0ge3N0cmluZ30gZXJyb3JDb2RlIEVycm9yIGNvZGUgdG8gbG9jYWxpemUuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIG91dHB1dEVycm9yRnJvbUNvZGUoZXJyb3JDb2RlOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICAgICAgdmFyIGVycm9yID0gdGhpcy5jcmVhdGVFcnJvckZyb21Db2RlKGVycm9yQ29kZSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnB1Ymxpc2hHZW5lcmljRXJyb3JFdmVudChlcnJvcik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgY3JlYXRlRXJyb3JGcm9tQ29kZShlcnJvckNvZGU6IHN0cmluZyk6IElFcnJvciB7XHJcbiAgICAgICAgICAgIHZhciBsb2NhbGl6YXRpb246IHN0cmluZyA9IExvY2FsaXphdGlvblByb3ZpZGVyLmluc3RhbmNlKCkuZ2V0TG9jYWxpemVkU3RyaW5nKCdFcnJvcnMnLCBgTF8ke2Vycm9yQ29kZX1gKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBlcnJvcjogSUVycm9yID0ge1xyXG4gICAgICAgICAgICAgICAgRXJyb3JDb2RlOiBlcnJvckNvZGUsXHJcbiAgICAgICAgICAgICAgICBMb2NhbGl6ZWRFcnJvck1lc3NhZ2U6IGxvY2FsaXphdGlvblxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGVycm9yO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmVtb3ZlcyBhbGwgZXJyb3JzIGZyb20gdGhlIGN1cnJlbnQgcGFnZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgcmVtb3ZlRXJyb3JzKCk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLnB1Ymxpc2hHZW5lcmljRXJyb3JFdmVudCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHB1Ymxpc2hHZW5lcmljRXJyb3JFdmVudChlcnJvcj86IElFcnJvcik6IHZvaWQge1xyXG4gICAgICAgICAgICB2YXIgZXJyb3JDb2xsID0gdGhpcy5jcmVhdGVFcnJvckNvbGxlY3Rpb24oZXJyb3IpO1xyXG5cclxuICAgICAgICAgICAgRXZlbnRIdWIuaW5zdGFuY2UoKS5wdWJsaXNoKCdHZW5lcmFsRXJyb3JPY2N1cmVkJywge1xyXG4gICAgICAgICAgICAgICAgZGF0YTogZXJyb3JDb2xsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGNyZWF0ZUVycm9yQ29sbGVjdGlvbihlcnJvcj86IElFcnJvcik6IElFcnJvckNvbGxlY3Rpb24ge1xyXG4gICAgICAgICAgICB2YXIgZXJyb3JDb2xsZWN0aW9uID0ge1xyXG4gICAgICAgICAgICAgICAgRXJyb3JzOiBbXVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBlcnJvckNvbGxlY3Rpb24uRXJyb3JzLnB1c2goZXJyb3IpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZXJyb3JDb2xsZWN0aW9uO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0NvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0lDb250cm9sbGVyQWN0aW9uQ29udGV4dC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9SZXBvc2l0b3JpZXMvQ2FydFJlcG9zaXRvcnkudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvRXJyb3JIYW5kbGluZy9FcnJvckhhbmRsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nQ2FydFNlcnZpY2UudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgRnVsbENhcnRDb250cm9sbGVyIGV4dGVuZHMgT3Jja2VzdHJhLkNvbXBvc2VyLkNvbnRyb2xsZXIge1xyXG4gICAgICAgIHByb3RlY3RlZCBzb3VyY2U6IHN0cmluZyA9ICdDaGVja291dCc7XHJcbiAgICAgICAgcHJpdmF0ZSBkZWJvdW5jZVVwZGF0ZUxpbmVJdGVtOiAoYXJnczogYW55KSA9PiB2b2lkO1xyXG5cclxuICAgICAgICBwcml2YXRlIGxvYWRlZDogYm9vbGVhbiA9IGZhbHNlO1xyXG4gICAgICAgIHByaXZhdGUgY2FydFNlcnZpY2U6IENhcnRTZXJ2aWNlID0gbmV3IENhcnRTZXJ2aWNlKG5ldyBDYXJ0UmVwb3NpdG9yeSgpLCB0aGlzLmV2ZW50SHViKTtcclxuXHJcbiAgICAgICAgcHVibGljIGluaXRpYWxpemUoKSB7XHJcblxyXG4gICAgICAgICAgICBzdXBlci5pbml0aWFsaXplKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyU3Vic2NyaXB0aW9ucygpO1xyXG4gICAgICAgICAgICB0aGlzLmxvYWRDYXJ0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHJlZ2lzdGVyU3Vic2NyaXB0aW9ucygpIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIuc3Vic2NyaWJlKCdjYXJ0VXBkYXRlZCcsIGUgPT4gdGhpcy5vbkNhcnRVcGRhdGVkKGUuZGF0YSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uQ2FydFVwZGF0ZWQoY2FydDogYW55KTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKCdDYXJ0Q29udGVudCcsIGNhcnQpO1xyXG4gICAgICAgICAgICBFcnJvckhhbmRsZXIuaW5zdGFuY2UoKS5yZW1vdmVFcnJvcnMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgbG9hZENhcnQoKSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNhcnRTZXJ2aWNlLmdldEZyZXNoQ2FydCgpXHJcbiAgICAgICAgICAgICAgICAudGhlbihjYXJ0ID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMubG9hZGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjYXJ0O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGU6IElFdmVudEluZm9ybWF0aW9uID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBDYXJ0OiBjYXJ0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgU3RlcE51bWJlcjogdGhpcy5jb250ZXh0LnZpZXdNb2RlbC5DdXJyZW50U3RlcFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKCdjaGVja291dFN0ZXBSZW5kZXJlZCcsIGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBjYXJ0O1xyXG5cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuZG9uZShjYXJ0ID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKCdjYXJ0VXBkYXRlZCcsIHsgZGF0YTogY2FydCB9KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmxvYWRlZCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgfSwgcmVhc29uID0+IHRoaXMubG9hZENhcnRGYWlsZWQocmVhc29uKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgbG9hZENhcnRGYWlsZWQocmVhc29uOiBhbnkpOiB2b2lkIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igd2hpbGUgbG9hZGluZyB0aGUgY2FydC4nLCByZWFzb24pO1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRleHQuY29udGFpbmVyLmZpbmQoJy5qcy1sb2FkaW5nJykuaGlkZSgpO1xyXG5cclxuICAgICAgICAgICAgRXJyb3JIYW5kbGVyLmluc3RhbmNlKCkub3V0cHV0RXJyb3JGcm9tQ29kZSgnTG9hZENhcnRGYWlsZWQnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB1cGRhdGVMaW5lSXRlbShhY3Rpb25Db250ZXh0OiBJQ29udHJvbGxlckFjdGlvbkNvbnRleHQpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmRlYm91bmNlVXBkYXRlTGluZUl0ZW0pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGVib3VuY2VVcGRhdGVMaW5lSXRlbSA9XHJcbiAgICAgICAgICAgICAgICAgICAgXy5kZWJvdW5jZSgoYXJncykgPT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5leGVjdXRlTGluZUl0ZW1VcGRhdGUoYXJncyksIDMwMCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBjb250ZXh0OiBKUXVlcnkgPSBhY3Rpb25Db250ZXh0LmVsZW1lbnRDb250ZXh0O1xyXG4gICAgICAgICAgICBjb250ZXh0LmNsb3Nlc3QoJy5jYXJ0LXJvdycpLmFkZENsYXNzKCdpcy1sb2FkaW5nJyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgbGluZUl0ZW1JZDogc3RyaW5nID0gPGFueT5jb250ZXh0LmRhdGEoJ2xpbmVpdGVtaWQnKTtcclxuICAgICAgICAgICAgdmFyIHByb2R1Y3RJZDogc3RyaW5nID0gY29udGV4dC5hdHRyKCdkYXRhLXByb2R1Y3RpZCcpO1xyXG4gICAgICAgICAgICB2YXIgYWN0aW9uOiBzdHJpbmcgPSA8YW55PmNvbnRleHQuZGF0YSgnYWN0aW9uJyk7XHJcbiAgICAgICAgICAgIHZhciBxdWFudGl0eTogbnVtYmVyID0gcGFyc2VJbnQoPGFueT5jb250ZXh0LmRhdGEoJ3F1YW50aXR5JyksIDEwKTtcclxuICAgICAgICAgICAgdmFyIHRtcFF1YW50aXR5OiBudW1iZXIgPSBjb250ZXh0LmRhdGEoJ3RtcC1xdGUnKSA/IHBhcnNlSW50KDxhbnk+Y29udGV4dC5kYXRhKCd0bXAtcXRlJyksIDEwKSA6IG51bGw7XHJcbiAgICAgICAgICAgIHZhciB1cGRhdGVkUXVhbnRpdHk6IG51bWJlciA9IHRoaXMudXBkYXRlUXVhbnRpdHkoYWN0aW9uLCB0bXBRdWFudGl0eSA/IHRtcFF1YW50aXR5IDogcXVhbnRpdHkpO1xyXG4gICAgICAgICAgICB2YXIgcmVjdXJyaW5nT3JkZXJGcmVxdWVuY3lOYW1lOiBzdHJpbmcgPSA8YW55PmNvbnRleHQuZGF0YSgncmVjdXJyaW5nb3JkZXJmcmVxdWVuY3luYW1lJyk7XHJcbiAgICAgICAgICAgIHZhciByZWN1cnJpbmdPcmRlclByb2dyYW1OYW1lOiBzdHJpbmcgPSA8YW55PmNvbnRleHQuZGF0YSgncmVjdXJyaW5nb3JkZXJwcm9ncmFtbmFtZScpO1xyXG5cclxuICAgICAgICAgICAgY29udGV4dC5kYXRhKCd0bXAtcXRlJywgdXBkYXRlZFF1YW50aXR5KTtcclxuXHJcbiAgICAgICAgICAgIHZhciBhcmdzOiBhbnkgPSB7XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0OiBjb250ZXh0LFxyXG4gICAgICAgICAgICAgICAgbGluZUl0ZW1JZDogbGluZUl0ZW1JZCxcclxuICAgICAgICAgICAgICAgIG9yaWdpbmFsUXVhbnRpdHk6IHF1YW50aXR5LFxyXG4gICAgICAgICAgICAgICAgdXBkYXRlZFF1YW50aXR5OiB1cGRhdGVkUXVhbnRpdHksXHJcbiAgICAgICAgICAgICAgICBwcm9kdWN0SWQ6IHByb2R1Y3RJZCxcclxuICAgICAgICAgICAgICAgIHJlY3VycmluZ09yZGVyRnJlcXVlbmN5TmFtZTogcmVjdXJyaW5nT3JkZXJGcmVxdWVuY3lOYW1lLFxyXG4gICAgICAgICAgICAgICAgcmVjdXJyaW5nT3JkZXJQcm9ncmFtTmFtZTogcmVjdXJyaW5nT3JkZXJQcm9ncmFtTmFtZVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgaWYgKHF1YW50aXR5ICE9PSB1cGRhdGVkUXVhbnRpdHkpIHtcclxuICAgICAgICAgICAgICAgIC8vdXNlIG9ubHkgZGVib3VjZWQgZnVuY3Rpb24gd2hlbiBpbmNyZW1lbnRpbmcvZGVjcmVtZW50aW5nIHF1YW50aXR5XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRlYm91bmNlVXBkYXRlTGluZUl0ZW0oYXJncyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV4ZWN1dGVMaW5lSXRlbVVwZGF0ZShhcmdzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGV4ZWN1dGVMaW5lSXRlbVVwZGF0ZShhcmdzOiBhbnkpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5jYXJ0U2VydmljZS5nZXRDYXJ0KCkudGhlbigoY2FydDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsZXQgbGluZUl0ZW0gPSBfLmZpbmQoY2FydC5MaW5lSXRlbURldGFpbFZpZXdNb2RlbHMsIChsaTogYW55KSA9PiBsaS5JZCA9PT0gYXJncy5saW5lSXRlbUlkKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pc1VwZGF0ZVJlcXVpcmVkKGFyZ3MsIGxpbmVJdGVtKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBkZWx0YSA9IGFyZ3MudXBkYXRlZFF1YW50aXR5IC0gbGluZUl0ZW0uUXVhbnRpdHk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHBvc2l0aXZlRGVsdGE6IG51bWJlciA9IGRlbHRhIDwgMCA/IGRlbHRhICogLTEgOiBkZWx0YTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZGF0YSA9IHRoaXMuZ2V0TGluZUl0ZW1EYXRhRm9yQW5hbHl0aWNzKGxpbmVJdGVtLCBwb3NpdGl2ZURlbHRhKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRlbHRhICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBldmVudE5hbWUgPSAoZGVsdGEgPiAwKSA/ICdsaW5lSXRlbUFkZGluZycgOiAnbGluZUl0ZW1SZW1vdmluZyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaChldmVudE5hbWUsIHsgZGF0YTogZGF0YSB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGFyZ3MuY29udGV4dC5yZW1vdmVEYXRhKCd0bXAtcXRlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXJncy5jb250ZXh0LmRhdGEoJ3F1YW50aXR5JywgYXJncy51cGRhdGVkUXVhbnRpdHkpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jYXJ0U2VydmljZS51cGRhdGVMaW5lSXRlbShhcmdzLmxpbmVJdGVtSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyZ3MudXBkYXRlZFF1YW50aXR5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzLnByb2R1Y3RJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXJncy5yZWN1cnJpbmdPcmRlckZyZXF1ZW5jeU5hbWUgPT09ICcnID8gbnVsbCA6IGFyZ3MucmVjdXJyaW5nT3JkZXJGcmVxdWVuY3lOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhcmdzLnJlY3VycmluZ09yZGVyUHJvZ3JhbU5hbWUpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcignQ2FydENvbnRlbnQnLCBjYXJ0KTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FydDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSkuZmFpbCgocmVhc29uOiBhbnkpID0+IHRoaXMubGluZUl0ZW1VcGRhdGVGYWlsZWQoYXJncy5jb250ZXh0LCByZWFzb24pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBpc1VwZGF0ZVJlcXVpcmVkKHVwZGF0ZUxpbmVJdGVtQXJncywgbGluZUl0ZW0pOiBib29sZWFuIHtcclxuICAgICAgICAgICAgaWYgKCFsaW5lSXRlbSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgc2hvdWxkVXBkYXRlUXVhbnRpdHkgPSB1cGRhdGVMaW5lSXRlbUFyZ3MudXBkYXRlZFF1YW50aXR5IC0gbGluZUl0ZW0uUXVhbnRpdHkgIT09IDA7XHJcbiAgICAgICAgICAgIHZhciBzaG91bGRVcGRhdGVSZWN1cnJpbmdGcmVxdWVuY3kgPSB1cGRhdGVMaW5lSXRlbUFyZ3MucmVjdXJyaW5nT3JkZXJGcmVxdWVuY3lOYW1lICE9PSBsaW5lSXRlbS5SZWN1cnJpbmdPcmRlckZyZXF1ZW5jeU5hbWU7XHJcbiAgICAgICAgICAgIHZhciBzaG91bGRVcGRhdGVSZWN1cnJpbmdQcm9ncmFtID0gdXBkYXRlTGluZUl0ZW1BcmdzLnJlY3VycmluZ09yZGVyUHJvZ3JhbU5hbWUgIT09IGxpbmVJdGVtLlJlY3VycmluZ09yZGVyUHJvZ3JhbU5hbWU7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gc2hvdWxkVXBkYXRlUXVhbnRpdHkgfHwgc2hvdWxkVXBkYXRlUmVjdXJyaW5nRnJlcXVlbmN5IHx8IHNob3VsZFVwZGF0ZVJlY3VycmluZ1Byb2dyYW07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgbGluZUl0ZW1VcGRhdGVGYWlsZWQoY29udGV4dDogSlF1ZXJ5LCByZWFzb246IGFueSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB3aGlsZSB1cGRhdGluZyBsaW5lIGl0ZW0gcXVhbnRpdHkuJywgcmVhc29uKTtcclxuICAgICAgICAgICAgY29udGV4dC5jbG9zZXN0KCcuY2FydC1yb3cnKS5yZW1vdmVDbGFzcygnaXMtbG9hZGluZycpO1xyXG5cclxuICAgICAgICAgICAgRXJyb3JIYW5kbGVyLmluc3RhbmNlKCkub3V0cHV0RXJyb3JGcm9tQ29kZSgnTGluZUl0ZW1VcGRhdGVGYWlsZWQnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBnZXRMaW5lSXRlbURhdGFGb3JBbmFseXRpY3MobGluZUl0ZW06IGFueSwgcXVhbnRpdHk6IG51bWJlcikgOiBhbnkge1xyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIExpc3Q6IHRoaXMuc291cmNlLFxyXG4gICAgICAgICAgICAgICAgRGlzcGxheU5hbWU6IGxpbmVJdGVtLlByb2R1Y3RTdW1tYXJ5LkRpc3BsYXlOYW1lLFxyXG4gICAgICAgICAgICAgICAgUHJvZHVjdElkOiBsaW5lSXRlbS5Qcm9kdWN0SWQsXHJcbiAgICAgICAgICAgICAgICBMaXN0UHJpY2U6IGxpbmVJdGVtLkxpc3RQcmljZSxcclxuICAgICAgICAgICAgICAgIEJyYW5kOiBsaW5lSXRlbS5Qcm9kdWN0U3VtbWFyeS5CcmFuZCxcclxuICAgICAgICAgICAgICAgIENhdGVnb3J5SWQ6IGxpbmVJdGVtLlByb2R1Y3RTdW1tYXJ5LkNhdGVnb3J5SWQsXHJcbiAgICAgICAgICAgICAgICBWYXJpYW50OiB1bmRlZmluZWQsXHJcbiAgICAgICAgICAgICAgICBRdWFudGl0eTogcXVhbnRpdHlcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGlmIChsaW5lSXRlbS5WYXJpYW50SWQgJiYgbGluZUl0ZW0uS2V5VmFyaWFudEF0dHJpYnV0ZXNMaXN0KSB7XHJcbiAgICAgICAgICAgICAgICBkYXRhLlZhcmlhbnQgPSB0aGlzLmJ1aWxkVmFyaWFudE5hbWUobGluZUl0ZW0uS2V5VmFyaWFudEF0dHJpYnV0ZXNMaXN0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZGF0YTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB1cGRhdGVRdWFudGl0eShhY3Rpb246IHN0cmluZywgcXVhbnRpdHk6IG51bWJlcik6IG51bWJlciB7XHJcbiAgICAgICAgICAgIGlmICghYWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gcXVhbnRpdHk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHN3aXRjaCAoYWN0aW9uLnRvVXBwZXJDYXNlKCkpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ0lOQ1JFTUVOVCc6XHJcbiAgICAgICAgICAgICAgICAgICAgcXVhbnRpdHkrKztcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBjYXNlICdERUNSRU1FTlQnOlxyXG4gICAgICAgICAgICAgICAgICAgIHF1YW50aXR5LS07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHF1YW50aXR5IDwgMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBxdWFudGl0eSA9IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcXVhbnRpdHk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZGVsZXRlTGluZUl0ZW0oYWN0aW9uQ29udGV4dDogSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0KSB7XHJcbiAgICAgICAgICAgIHZhciBjb250ZXh0OiBKUXVlcnkgPSBhY3Rpb25Db250ZXh0LmVsZW1lbnRDb250ZXh0O1xyXG4gICAgICAgICAgICB2YXIgbGluZUl0ZW1JZDogc3RyaW5nID0gPGFueT5jb250ZXh0LmRhdGEoJ2xpbmVpdGVtaWQnKTtcclxuICAgICAgICAgICAgdmFyIHByb2R1Y3RJZDogc3RyaW5nID0gY29udGV4dC5hdHRyKCdkYXRhLXByb2R1Y3RpZCcpO1xyXG5cclxuICAgICAgICAgICAgY29udGV4dC5jbG9zZXN0KCcuY2FydC1yb3cnKS5hZGRDbGFzcygnaXMtbG9hZGluZycpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jYXJ0U2VydmljZS5nZXRDYXJ0KClcclxuICAgICAgICAgICAgICAgIC50aGVuKChjYXJ0OiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbGluZUl0ZW0gPSBfLmZpbmQoY2FydC5MaW5lSXRlbURldGFpbFZpZXdNb2RlbHMsIChsaTogYW55KSA9PiBsaS5JZCA9PT0gbGluZUl0ZW1JZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkYXRhID0gdGhpcy5nZXRMaW5lSXRlbURhdGFGb3JBbmFseXRpY3MobGluZUl0ZW0sIGxpbmVJdGVtLlF1YW50aXR5KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKCdsaW5lSXRlbVJlbW92aW5nJywgeyBkYXRhOiBkYXRhIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jYXJ0U2VydmljZS5kZWxldGVMaW5lSXRlbShsaW5lSXRlbUlkLCBwcm9kdWN0SWQpO1xyXG4gICAgICAgICAgICAgICAgfSkuZmFpbCgocmVhc29uOiBhbnkpID0+IHRoaXMub25MaW5lSXRlbURlbGV0ZUZhaWxlZChjb250ZXh0LCByZWFzb24pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvbkxpbmVJdGVtRGVsZXRlRmFpbGVkKGNvbnRleHQ6IEpRdWVyeSwgcmVhc29uOiBhbnkpOiB2b2lkIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igd2hpbGUgZGVsZXRpbmcgbGluZSBpdGVtLicsIHJlYXNvbik7XHJcbiAgICAgICAgICAgIGNvbnRleHQuY2xvc2VzdCgnLmNhcnQtcm93JykucmVtb3ZlQ2xhc3MoJ2lzLWxvYWRpbmcnKTtcclxuXHJcbiAgICAgICAgICAgIEVycm9ySGFuZGxlci5pbnN0YW5jZSgpLm91dHB1dEVycm9yRnJvbUNvZGUoJ0xpbmVJdGVtRGVsZXRlRmFpbGVkJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgYnVpbGRWYXJpYW50TmFtZShrdmFzOiBhbnlbXSk6IHN0cmluZyB7XHJcbiAgICAgICAgICAgIHZhciBuYW1lUGFydHM6IHN0cmluZ1tdID0gW107XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBpOiBudW1iZXIgPSAwOyBpIDwga3Zhcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlOiBhbnkgPSBrdmFzW2ldLk9yaWdpbmFsVmFsdWU7XHJcblxyXG4gICAgICAgICAgICAgICAgbmFtZVBhcnRzLnB1c2godmFsdWUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbmFtZVBhcnRzLmpvaW4oJyAnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9NdmMvQ29tcG9zZXJDbGllbnQudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgU2hpcHBpbmdNZXRob2RTZXJ2aWNlIHtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgKiBSZXR1cm4gYSBQcm9taXNlIHdoaWNoIHJldHVybnMgdGhlIFNoaXBwaW5nTWV0aG9kcyBhdmFpbGFibGUgZm9yIHRoZSBjYXJ0LlxyXG4gICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGdldFNoaXBwaW5nTWV0aG9kcygpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gQ29tcG9zZXJDbGllbnQuZ2V0KCcvYXBpL2NhcnQvc2hpcHBpbmdtZXRob2RzJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0NvbnRyb2xsZXIudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSUJhc2VDaGVja291dENvbnRyb2xsZXIgZXh0ZW5kcyBJQ29udHJvbGxlciB7XHJcblxyXG4gICAgICAgIHZpZXdNb2RlbE5hbWU6IHN0cmluZztcclxuXHJcbiAgICAgICAgdW5yZWdpc3RlckNvbnRyb2xsZXIoKTtcclxuXHJcbiAgICAgICAgcmVuZGVyRGF0YShjaGVja291dENvbnRleHQ6IElDaGVja291dENvbnRleHQpOiBRLlByb21pc2U8dm9pZD47XHJcblxyXG4gICAgICAgIGdldFZhbGlkYXRpb25Qcm9taXNlKCk6IFEuUHJvbWlzZTxib29sZWFuPjtcclxuXHJcbiAgICAgICAgZ2V0VXBkYXRlTW9kZWxQcm9taXNlKCk6IFEuUHJvbWlzZTxhbnk+O1xyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElSZWdpb25TZXJ2aWNlIHtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmV0dXJuIGEgUHJvbWlzZSB3aGljaCByZXR1cm5zIGFuIGFycmF5IG9mIHJlZ2lvbi5cclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXRSZWdpb25zKCk6IFEuUHJvbWlzZTxhbnk+O1xyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvTXZjL0NvbXBvc2VyQ2xpZW50LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vSVJlZ2lvblNlcnZpY2UudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbmV4cG9ydCBjbGFzcyBSZWdpb25TZXJ2aWNlIGltcGxlbWVudHMgSVJlZ2lvblNlcnZpY2Uge1xyXG5cclxuICAgICAgICBwcml2YXRlIF9tZW1vaXplR2V0UmVnaW9uczogRnVuY3Rpb247XHJcblxyXG4gICAgICAgIHB1YmxpYyBnZXRSZWdpb25zKCk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgICBpZiAoXy5pc1VuZGVmaW5lZCh0aGlzLl9tZW1vaXplR2V0UmVnaW9ucykpIHtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tZW1vaXplR2V0UmVnaW9ucyA9IF8ubWVtb2l6ZShhcmcgPT4gdGhpcy5nZXRSZWdpb25zSW1wbCgpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX21lbW9pemVHZXRSZWdpb25zKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAgcHJpdmF0ZSBnZXRSZWdpb25zSW1wbCgpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gQ29tcG9zZXJDbGllbnQuZ2V0KCcvYXBpL2FkZHJlc3MvcmVnaW9ucycpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcblxyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJQ2hlY2tvdXRTZXJ2aWNlIHtcclxuXHJcbiAgICAgICAgcmVnaXN0ZXJDb250cm9sbGVyKGNvbnRyb2xsZXI6IElDb250cm9sbGVyKTtcclxuXHJcbiAgICAgICAgdW5yZWdpc3RlckNvbnRyb2xsZXIoY29udHJvbGxlck5hbWU6IHN0cmluZyk7XHJcblxyXG4gICAgICAgIGdldENhcnQoKTogUS5Qcm9taXNlPGFueT47XHJcblxyXG4gICAgICAgIHVwZGF0ZUNhcnQoKTogUS5Qcm9taXNlPElVcGRhdGVDYXJ0UmVzdWx0PjtcclxuXHJcbiAgICAgICAgY29tcGxldGVDaGVja291dCgpOiBRLlByb21pc2U8SUNvbXBsZXRlQ2hlY2tvdXRSZXN1bHQ+O1xyXG5cclxuICAgICAgICB1cGRhdGVQb3N0YWxDb2RlKHBvc3RhbENvZGU6IHN0cmluZyk6IFEuUHJvbWlzZTx2b2lkPjtcclxuXHJcbiAgICAgICAgaW52YWxpZGF0ZUNhY2hlKCk6IFEuUHJvbWlzZTx2b2lkPjtcclxuXHJcbiAgICAgICAgc2V0T3JkZXJDb25maXJtYXRpb25Ub0NhY2hlKG9yZGVyQ29uZmlybWF0aW9udmlld01vZGVsIDogYW55KSA6IHZvaWQ7XHJcblxyXG4gICAgICAgIGdldE9yZGVyQ29uZmlybWF0aW9uRnJvbUNhY2hlKCk6IFEuUHJvbWlzZTxhbnk+O1xyXG5cclxuICAgICAgICBjbGVhck9yZGVyQ29uZmlybWF0aW9uRnJvbUNhY2hlKCk6IHZvaWQ7XHJcblxyXG4gICAgICAgIHNldE9yZGVyVG9DYWNoZShvcmRlckNvbmZpcm1hdGlvbnZpZXdNb2RlbCA6IGFueSkgOiB2b2lkO1xyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSUNoZWNrb3V0Q29udGV4dCB7XHJcbiAgICAgICAgYXV0aGVudGljYXRpb25WaWV3TW9kZWw6IElBdXRoZW50aWNhdGlvblZpZXdNb2RlbDtcclxuICAgICAgICBjYXJ0Vmlld01vZGVsOiBhbnk7XHJcbiAgICAgICAgcmVnaW9uc1ZpZXdNb2RlbDogYW55O1xyXG4gICAgICAgIHNoaXBwaW5nTWV0aG9kc1ZpZXdNb2RlbDogYW55O1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSUF1dGhlbnRpY2F0aW9uVmlld01vZGVsIHtcclxuICAgICAgICBJc0F1dGhlbnRpY2F0ZWQ6IGJvb2xlYW47XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJQ2FydFZpZXdNb2RlbCB7XHJcbiAgICAgICAgSXNBdXRoZW50aWNhdGVkOiBib29sZWFuO1xyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElWYWxpZGF0aW9uQ2FsbGJhY2sge1xyXG4gICAgICAgICgpOiBRLlByb21pc2U8Ym9vbGVhbj47XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJVXBkYXRlQ2FsbGJhY2sge1xyXG4gICAgICAgICgpOiBRLlByb21pc2U8YW55PjtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElSZWdpc3Rlck9wdGlvbnMge1xyXG4gICAgICAgIHZhbGlkYXRpb25DYWxsYmFjazogRnVuY3Rpb247XHJcbiAgICAgICAgdXBkYXRlQ2FsbGJhY2s6IEZ1bmN0aW9uO1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSVJlZ2lzdGVyQ29udHJvbE9wdGlvbnMgZXh0ZW5kcyBJUmVnaXN0ZXJPcHRpb25zIHtcclxuICAgICAgICBpc1JlYWR5OiBib29sZWFuO1xyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuTXlBY2NvdW50LlVJL0NvbW1vbi9Tb3VyY2UvVHlwZXNjcmlwdC9NZW1iZXJzaGlwU2VydmljZS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9FcnJvckhhbmRsaW5nL0Vycm9ySGFuZGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9SZXBvc2l0b3JpZXMvQ2FydFJlcG9zaXRvcnkudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ2hlY2tvdXRTaGlwcGluZ01ldGhvZC9zb3VyY2UvVHlwZXNjcmlwdC9TaGlwcGluZ01ldGhvZFNlcnZpY2UudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ2FydFN1bW1hcnkvU291cmNlL1R5cGVzY3JpcHQvQ2FydFNlcnZpY2UudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9JQmFzZUNoZWNrb3V0Q29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL1JlZ2lvblNlcnZpY2UudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9JQ2hlY2tvdXRTZXJ2aWNlLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vSUNoZWNrb3V0Q29udGV4dC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL0lSZWdpc3Rlck9wdGlvbnMudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgQ2hlY2tvdXRTZXJ2aWNlIGltcGxlbWVudHMgSUNoZWNrb3V0U2VydmljZSB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGluc3RhbmNlOiBJQ2hlY2tvdXRTZXJ2aWNlO1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIGNoZWNrb3V0U3RlcDogbnVtYmVyO1xyXG5cclxuICAgICAgICBwcml2YXRlIG9yZGVyQ29uZmlybWF0aW9uQ2FjaGVLZXkgPSAnb3JkZXJDb25maXJtYXRpb25DYWNoZUtleSc7XHJcbiAgICAgICAgcHJpdmF0ZSBvcmRlckNhY2hlS2V5ID0gJ29yZGVyQ2FjaGVLZXknO1xyXG5cclxuICAgICAgICBwcml2YXRlIHdpbmRvdzogV2luZG93O1xyXG4gICAgICAgIHByaXZhdGUgZXZlbnRIdWI6IElFdmVudEh1YjtcclxuICAgICAgICBwcml2YXRlIHJlZ2lzdGVyZWRDb250cm9sbGVyczogYW55ID0ge307XHJcbiAgICAgICAgcHJpdmF0ZSBhbGxDb250cm9sbGVyc1JlYWR5OiBRLkRlZmVycmVkPGJvb2xlYW4+O1xyXG4gICAgICAgIHByaXZhdGUgY2FjaGVQcm92aWRlcjogSUNhY2hlUHJvdmlkZXI7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBjYXJ0U2VydmljZTogSUNhcnRTZXJ2aWNlO1xyXG4gICAgICAgIHByb3RlY3RlZCBtZW1iZXJzaGlwU2VydmljZTogSU1lbWJlcnNoaXBTZXJ2aWNlO1xyXG4gICAgICAgIHByb3RlY3RlZCByZWdpb25TZXJ2aWNlOiBJUmVnaW9uU2VydmljZTtcclxuICAgICAgICBwcm90ZWN0ZWQgc2hpcHBpbmdNZXRob2RTZXJ2aWNlOiBTaGlwcGluZ01ldGhvZFNlcnZpY2U7XHJcblxyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgZ2V0SW5zdGFuY2UoKTogSUNoZWNrb3V0U2VydmljZSB7XHJcblxyXG4gICAgICAgICAgICBpZiAoIUNoZWNrb3V0U2VydmljZS5pbnN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgQ2hlY2tvdXRTZXJ2aWNlLmluc3RhbmNlID0gbmV3IENoZWNrb3V0U2VydmljZSgpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIENoZWNrb3V0U2VydmljZS5pbnN0YW5jZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHtcclxuXHJcbiAgICAgICAgICAgIGlmIChDaGVja291dFNlcnZpY2UuaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW5zdGFudGlhdGlvbiBmYWlsZWQ6IFVzZSBDaGVja291dFNlcnZpY2UuaW5zdGFuY2UoKSBpbnN0ZWFkIG9mIG5ldy4nKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1YiA9IEV2ZW50SHViLmluc3RhbmNlKCk7XHJcbiAgICAgICAgICAgIHRoaXMud2luZG93ID0gd2luZG93O1xyXG4gICAgICAgICAgICB0aGlzLmFsbENvbnRyb2xsZXJzUmVhZHkgPSBRLmRlZmVyPGJvb2xlYW4+KCk7XHJcbiAgICAgICAgICAgIHRoaXMuY2FjaGVQcm92aWRlciA9IENhY2hlUHJvdmlkZXIuaW5zdGFuY2UoKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY2FydFNlcnZpY2UgPSBuZXcgQ2FydFNlcnZpY2UobmV3IENhcnRSZXBvc2l0b3J5KCksIHRoaXMuZXZlbnRIdWIpO1xyXG4gICAgICAgICAgICB0aGlzLm1lbWJlcnNoaXBTZXJ2aWNlID0gbmV3IE1lbWJlcnNoaXBTZXJ2aWNlKG5ldyBNZW1iZXJzaGlwUmVwb3NpdG9yeSgpKTtcclxuICAgICAgICAgICAgdGhpcy5yZWdpb25TZXJ2aWNlID0gbmV3IFJlZ2lvblNlcnZpY2UoKTtcclxuICAgICAgICAgICAgdGhpcy5zaGlwcGluZ01ldGhvZFNlcnZpY2UgPSBuZXcgU2hpcHBpbmdNZXRob2RTZXJ2aWNlKCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJBbGxDb250cm9sbGVyc0luaXRpYWxpemVkKCk7XHJcblxyXG4gICAgICAgICAgICBDaGVja291dFNlcnZpY2UuaW5zdGFuY2UgPSB0aGlzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHJlZ2lzdGVyQWxsQ29udHJvbGxlcnNJbml0aWFsaXplZCgpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIuc3Vic2NyaWJlKCdhbGxDb250cm9sbGVyc0luaXRpYWxpemVkJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBpbml0aWFsaXplKCkge1xyXG5cclxuICAgICAgICAgICAgdmFyIGF1dGhlbnRpY2F0ZWRQcm9taXNlID0gdGhpcy5tZW1iZXJzaGlwU2VydmljZS5pc0F1dGhlbnRpY2F0ZWQoKTtcclxuICAgICAgICAgICAgdmFyIGdldENhcnRQcm9taXNlID0gdGhpcy5nZXRDYXJ0KCk7XHJcbiAgICAgICAgICAgIHZhciByZWdpb25zUHJvbWlzZTogUS5Qcm9taXNlPGFueT4gPSB0aGlzLnJlZ2lvblNlcnZpY2UuZ2V0UmVnaW9ucygpO1xyXG4gICAgICAgICAgICB2YXIgc2hpcHBpbmdNZXRob2RzUHJvbWlzZTogUS5Qcm9taXNlPGFueT4gPSB0aGlzLnNoaXBwaW5nTWV0aG9kU2VydmljZS5nZXRTaGlwcGluZ01ldGhvZHMoKTtcclxuXHJcbiAgICAgICAgICAgIFEuYWxsKFthdXRoZW50aWNhdGVkUHJvbWlzZSwgZ2V0Q2FydFByb21pc2UsIHJlZ2lvbnNQcm9taXNlLCBzaGlwcGluZ01ldGhvZHNQcm9taXNlXSlcclxuICAgICAgICAgICAgICAgIC5zcHJlYWQoKGF1dGhWbSwgY2FydFZtLCByZWdpb25zVm0sIHNoaXBwaW5nTWV0aG9kc1ZtKSA9PiB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHRzOiBJQ2hlY2tvdXRDb250ZXh0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhdXRoZW50aWNhdGlvblZpZXdNb2RlbDogYXV0aFZtLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXJ0Vmlld01vZGVsOiBjYXJ0Vm0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlZ2lvbnNWaWV3TW9kZWw6IHJlZ2lvbnNWbSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2hpcHBpbmdNZXRob2RzVmlld01vZGVsOiBzaGlwcGluZ01ldGhvZHNWbVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnJlbmRlckNvbnRyb2xsZXJzKHJlc3VsdHMpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFsbENvbnRyb2xsZXJzUmVhZHkucmVzb2x2ZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuZmFpbCgocmVhc29uOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB3aGlsZSBpbml0aWFsaXppbmcgQ2hlY2tvdXRTZXJ2aWNlLicsIHJlYXNvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgRXJyb3JIYW5kbGVyLmluc3RhbmNlKCkub3V0cHV0RXJyb3JGcm9tQ29kZSgnQ2hlY2tvdXRSZW5kZXJGYWlsZWQnKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHJlZ2lzdGVyQ29udHJvbGxlcihjb250cm9sbGVyOiBJQmFzZUNoZWNrb3V0Q29udHJvbGxlcikge1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuYWxsQ29udHJvbGxlcnNSZWFkeS5wcm9taXNlLmlzUGVuZGluZygpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFsbENvbnRyb2xsZXJzUmVhZHkucmVzb2x2ZShmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuYWxsQ29udHJvbGxlcnNSZWFkeS5wcm9taXNlXHJcbiAgICAgICAgICAgICAgICAudGhlbihhbGxDb250cm9sbGVyc1JlYWR5ID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGFsbENvbnRyb2xsZXJzUmVhZHkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUb28gbGF0ZSB0byByZWdpc3RlciBhbGwgY29udHJvbGxlcnMgYXJlIHJlYWR5LicpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb250cm9sbGVyTmFtZSA9IGNvbnRyb2xsZXIudmlld01vZGVsTmFtZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWdpc3RlcmVkQ29udHJvbGxlcnNbY29udHJvbGxlck5hbWVdID0gY29udHJvbGxlcjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHVucmVnaXN0ZXJDb250cm9sbGVyKGNvbnRyb2xsZXJOYW1lOiBzdHJpbmcpIHtcclxuXHJcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnJlZ2lzdGVyZWRDb250cm9sbGVyc1tjb250cm9sbGVyTmFtZV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgcmVuZGVyQ29udHJvbGxlcnMoY2hlY2tvdXRDb250ZXh0OiBJQ2hlY2tvdXRDb250ZXh0KTogUS5Qcm9taXNlPHZvaWRbXT4ge1xyXG5cclxuICAgICAgICAgICAgdmFyIGNvbnRyb2xsZXJJbnN0YW5jZTogSUJhc2VDaGVja291dENvbnRyb2xsZXIsXHJcbiAgICAgICAgICAgICAgICByZW5kZXJEYXRhUHJvbWlzZXM6IFEuUHJvbWlzZTx2b2lkPltdID0gW107XHJcblxyXG4gICAgICAgICAgICAgZm9yICh2YXIgY29udHJvbGxlck5hbWUgaW4gdGhpcy5yZWdpc3RlcmVkQ29udHJvbGxlcnMpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnJlZ2lzdGVyZWRDb250cm9sbGVycy5oYXNPd25Qcm9wZXJ0eShjb250cm9sbGVyTmFtZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVySW5zdGFuY2UgPSA8SUJhc2VDaGVja291dENvbnRyb2xsZXI+dGhpcy5yZWdpc3RlcmVkQ29udHJvbGxlcnNbY29udHJvbGxlck5hbWVdO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZW5kZXJEYXRhUHJvbWlzZXMucHVzaChjb250cm9sbGVySW5zdGFuY2UucmVuZGVyRGF0YShjaGVja291dENvbnRleHQpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFEuYWxsKHJlbmRlckRhdGFQcm9taXNlcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdXBkYXRlUG9zdGFsQ29kZShwb3N0YWxDb2RlOiBzdHJpbmcpOiBRLlByb21pc2U8dm9pZD4ge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FydFNlcnZpY2UudXBkYXRlQmlsbGluZ01ldGhvZFBvc3RhbENvZGUocG9zdGFsQ29kZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgaW52YWxpZGF0ZUNhY2hlKCk6IFEuUHJvbWlzZTx2b2lkPiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jYXJ0U2VydmljZS5pbnZhbGlkYXRlQ2FjaGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBnZXRDYXJ0KCk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIGlmICghXy5pc051bWJlcihDaGVja291dFNlcnZpY2UuY2hlY2tvdXRTdGVwKSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDaGVja291dFNlcnZpY2UuY2hlY2tvdXRTdGVwIGhhcyBub3QgYmVlbiBzZXQgb3IgaXMgbm90IGEgbnVtYmVyLicpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbnZhbGlkYXRlQ2FjaGUoKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gdGhpcy5jYXJ0U2VydmljZS5nZXRDYXJ0KCkpXHJcbiAgICAgICAgICAgICAgICAudGhlbihjYXJ0ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5oYW5kbGVDaGVja291dFNlY3VyaXR5KGNhcnQsIENoZWNrb3V0U2VydmljZS5jaGVja291dFN0ZXApO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5mYWlsKHJlYXNvbiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVFcnJvcihyZWFzb24pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdXBkYXRlQ2FydCgpOiBRLlByb21pc2U8SVVwZGF0ZUNhcnRSZXN1bHQ+IHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuYWxsQ29udHJvbGxlcnNSZWFkeS5wcm9taXNlXHJcbiAgICAgICAgICAgIC50aGVuKGFsbENvbnRyb2xsZXJzUmVhZHkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFhbGxDb250cm9sbGVyc1JlYWR5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBbGwgcmVnaXN0ZXJlZCBjb250cm9sbGVycyBhcmUgbm90IHJlYWR5LicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmICghXy5pc051bWJlcihDaGVja291dFNlcnZpY2UuY2hlY2tvdXRTdGVwKSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDaGVja291dFNlcnZpY2UuY2hlY2tvdXRTdGVwIGhhcyBub3QgYmVlbiBzZXQgb3IgaXMgbm90IGEgbnVtYmVyLicpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZW1wdHlWbSA9IHtcclxuICAgICAgICAgICAgICAgIEN1cnJlbnRTdGVwOiBDaGVja291dFNlcnZpY2UuY2hlY2tvdXRTdGVwLFxyXG4gICAgICAgICAgICAgICAgVXBkYXRlZENhcnQ6IHt9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5idWlsZENhcnRVcGRhdGVWaWV3TW9kZWwoZW1wdHlWbSlcclxuICAgICAgICAgICAgICAgIC50aGVuKHZtID0+IHRoaXMuY2FydFNlcnZpY2UudXBkYXRlQ2FydCh2bSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGNvbXBsZXRlQ2hlY2tvdXQoKTogUS5Qcm9taXNlPElDb21wbGV0ZUNoZWNrb3V0UmVzdWx0PiB7XHJcblxyXG4gICAgICAgICAgICBpZiAoIV8uaXNOdW1iZXIoQ2hlY2tvdXRTZXJ2aWNlLmNoZWNrb3V0U3RlcCkpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2hlY2tvdXRTZXJ2aWNlLmNoZWNrb3V0U3RlcCBoYXMgbm90IGJlZW4gc2V0IG9yIGlzIG5vdCBhIG51bWJlci4nKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGVtcHR5Vm0gPSB7XHJcbiAgICAgICAgICAgICAgICBDdXJyZW50U3RlcDogQ2hlY2tvdXRTZXJ2aWNlLmNoZWNrb3V0U3RlcCxcclxuICAgICAgICAgICAgICAgIFVwZGF0ZWRDYXJ0OiB7fVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYnVpbGRDYXJ0VXBkYXRlVmlld01vZGVsKGVtcHR5Vm0pXHJcbiAgICAgICAgICAgICAgICAudGhlbih2bSA9PiB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfLmlzRW1wdHkodm0uVXBkYXRlZENhcnQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdObyBtb2RpZmljYXRpb24gcmVxdWlyZWQgdG8gdGhlIGNhcnQuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2bTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNhcnRTZXJ2aWNlLnVwZGF0ZUNhcnQodm0pO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC50aGVuKHJlc3VsdCA9PiB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgJiYgcmVzdWx0Lkhhc0Vycm9ycykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Vycm9yIHdoaWxlIHVwZGF0aW5nIHRoZSBjYXJ0LiBDb21wbGV0ZSBDaGVja291dCB3aWxsIG5vdCBjb21wbGV0ZS4nKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdQdWJsaXNoaW5nIHRoZSBjYXJ0IScpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jYXJ0U2VydmljZS5jb21wbGV0ZUNoZWNrb3V0KENoZWNrb3V0U2VydmljZS5jaGVja291dFN0ZXApO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGJ1aWxkQ2FydFVwZGF0ZVZpZXdNb2RlbCh2bTogYW55KTogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgdmFyIHZhbGlkYXRpb25Qcm9taXNlOiBRLlByb21pc2U8YW55PjtcclxuICAgICAgICAgICAgdmFyIHZpZXdNb2RlbFVwZGF0ZVByb21pc2U6IFEuUHJvbWlzZTxhbnk+O1xyXG5cclxuICAgICAgICAgICAgdmFsaWRhdGlvblByb21pc2UgPSBRKHZtKS50aGVuKHZtID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldENhcnRWYWxpZGF0aW9uKHZtKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB2aWV3TW9kZWxVcGRhdGVQcm9taXNlID0gdmFsaWRhdGlvblByb21pc2UudGhlbih2bSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDYXJ0VXBkYXRlVmlld01vZGVsKHZtKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdmlld01vZGVsVXBkYXRlUHJvbWlzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgZ2V0Q2FydFZhbGlkYXRpb24odm0gOiBhbnkpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICB2YXIgdmFsaWRhdGlvblByb21pc2UgPSB0aGlzLmNvbGxlY3RWYWxpZGF0aW9uUHJvbWlzZXMoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBwcm9taXNlID0gdmFsaWRhdGlvblByb21pc2UudGhlbigocmVzdWx0cyA6IEFycmF5PGJvb2xlYW4+KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnQWdncmVncmF0aW5nIGFsbCB2YWxpZGF0aW9uIHJlc3VsdHMnKTtcclxuICAgICAgICAgICAgICAgIHZhciBoYXNGYWlsZWRWYWxpZGF0aW9uID0gXy5hbnkocmVzdWx0cywgciA9PiAhcik7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGhhc0ZhaWxlZFZhbGlkYXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZXJlIHdlcmUgdmFsaWRhdGlvbiBlcnJvcnMuJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHZtO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXRDYXJ0VXBkYXRlVmlld01vZGVsKHZtOiBhbnkpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICB2YXIgdXBkYXRlTW9kZWxQcm9taXNlID0gdGhpcy5jb2xsZWN0VXBkYXRlTW9kZWxQcm9taXNlcygpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHByb21pc2UgPSB1cGRhdGVNb2RlbFByb21pc2UudGhlbigodXBkYXRlczogQXJyYXk8YW55PikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0FnZ3JlZ2F0aW5nIGFsbCBWaWV3TW9kZWwgdXBkYXRlcy4nKTtcclxuXHJcbiAgICAgICAgICAgICAgICBfLmVhY2godXBkYXRlcywgdXBkYXRlID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHVwZGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIHZhciBrZXlzID0gXy5rZXlzKHVwZGF0ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF8uZWFjaChrZXlzLCBrZXkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdm0uVXBkYXRlZENhcnRba2V5XSA9IHVwZGF0ZVtrZXldO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdm07XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGNvbGxlY3RWYWxpZGF0aW9uUHJvbWlzZXMoKTogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgdmFyIHByb21pc2VzOiBRLlByb21pc2U8YW55PltdID0gW107XHJcbiAgICAgICAgICAgIHZhciBjb250cm9sbGVySW5zdGFuY2U6IElCYXNlQ2hlY2tvdXRDb250cm9sbGVyO1xyXG4gICAgICAgICAgICB2YXIgY29udHJvbGxlck9wdGlvbnM6IElSZWdpc3RlckNvbnRyb2xPcHRpb25zO1xyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgY29udHJvbGxlck5hbWUgaW4gdGhpcy5yZWdpc3RlcmVkQ29udHJvbGxlcnMpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5yZWdpc3RlcmVkQ29udHJvbGxlcnMuaGFzT3duUHJvcGVydHkoY29udHJvbGxlck5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlckluc3RhbmNlID0gPElCYXNlQ2hlY2tvdXRDb250cm9sbGVyPnRoaXMucmVnaXN0ZXJlZENvbnRyb2xsZXJzW2NvbnRyb2xsZXJOYW1lXTtcclxuICAgICAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKGNvbnRyb2xsZXJJbnN0YW5jZS5nZXRWYWxpZGF0aW9uUHJvbWlzZSgpKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFEuYWxsKHByb21pc2VzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgY29sbGVjdFVwZGF0ZU1vZGVsUHJvbWlzZXMoKTogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgdmFyIHByb21pc2VzOiBRLlByb21pc2U8YW55PltdID0gW107XHJcbiAgICAgICAgICAgIHZhciBjb250cm9sbGVySW5zdGFuY2U6IElCYXNlQ2hlY2tvdXRDb250cm9sbGVyO1xyXG4gICAgICAgICAgICB2YXIgY29udHJvbGxlck9wdGlvbnM6IElSZWdpc3RlckNvbnRyb2xPcHRpb25zO1xyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgY29udHJvbGxlck5hbWUgaW4gdGhpcy5yZWdpc3RlcmVkQ29udHJvbGxlcnMpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5yZWdpc3RlcmVkQ29udHJvbGxlcnMuaGFzT3duUHJvcGVydHkoY29udHJvbGxlck5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlckluc3RhbmNlID0gPElCYXNlQ2hlY2tvdXRDb250cm9sbGVyPnRoaXMucmVnaXN0ZXJlZENvbnRyb2xsZXJzW2NvbnRyb2xsZXJOYW1lXTtcclxuICAgICAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKGNvbnRyb2xsZXJJbnN0YW5jZS5nZXRVcGRhdGVNb2RlbFByb21pc2UoKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBRLmFsbChwcm9taXNlcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGhhbmRsZUNoZWNrb3V0U2VjdXJpdHkoY2FydDogYW55LCB0YXJnZXRlZFN0ZXA6IG51bWJlcik6IGFueSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgbGFzdFN0ZXA6IG51bWJlciA9IGNhcnQuT3JkZXJTdW1tYXJ5LkNoZWNrb3V0UmVkaXJlY3RBY3Rpb24uTGFzdENoZWNrb3V0U3RlcDtcclxuICAgICAgICAgICAgdmFyIHJlZGlyZWN0VXJsOiBzdHJpbmcgPSBjYXJ0Lk9yZGVyU3VtbWFyeS5DaGVja291dFJlZGlyZWN0QWN0aW9uLlJlZGlyZWN0VXJsO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRhcmdldGVkU3RlcCA+IGxhc3RTdGVwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLndpbmRvdy5sb2NhdGlvbi5ocmVmID0gcmVkaXJlY3RVcmw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBjYXJ0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBoYW5kbGVFcnJvcihyZWFzb246IGFueSk6IHZvaWQge1xyXG5cclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignVW5hYmxlIHRvIHJldHJpZXZlIHRoZSBjYXJ0IGZvciB0aGUgY2hlY2tvdXQnLCByZWFzb24pO1xyXG5cclxuICAgICAgICAgICAgdGhyb3cgcmVhc29uO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHNldE9yZGVyQ29uZmlybWF0aW9uVG9DYWNoZShvcmRlckNvbmZpcm1hdGlvbnZpZXdNb2RlbCA6IGFueSkgOiB2b2lkIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY2FjaGVQcm92aWRlci5kZWZhdWx0Q2FjaGUuc2V0KHRoaXMub3JkZXJDb25maXJtYXRpb25DYWNoZUtleSwgb3JkZXJDb25maXJtYXRpb252aWV3TW9kZWwpLmRvbmUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBnZXRPcmRlckNvbmZpcm1hdGlvbkZyb21DYWNoZSgpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jYWNoZVByb3ZpZGVyLmRlZmF1bHRDYWNoZS5nZXQ8YW55Pih0aGlzLm9yZGVyQ29uZmlybWF0aW9uQ2FjaGVLZXkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGNsZWFyT3JkZXJDb25maXJtYXRpb25Gcm9tQ2FjaGUoKTogdm9pZCB7XHJcblxyXG4gICAgICAgICAgICAgdGhpcy5jYWNoZVByb3ZpZGVyLmRlZmF1bHRDYWNoZS5jbGVhcih0aGlzLm9yZGVyQ29uZmlybWF0aW9uQ2FjaGVLZXkpLmRvbmUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzZXRPcmRlclRvQ2FjaGUob3JkZXJDb25maXJtYXRpb252aWV3TW9kZWwgOiBhbnkpIDogdm9pZCB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNhY2hlUHJvdmlkZXIuZGVmYXVsdENhY2hlLnNldCh0aGlzLm9yZGVyQ2FjaGVLZXksIG9yZGVyQ29uZmlybWF0aW9udmlld01vZGVsKS5kb25lKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvSlF1ZXJ5UGx1Z2lucy9JU2VyaWFsaXplT2JqZWN0SnF1ZXJ5UGx1Z2luLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0Vycm9ySGFuZGxpbmcvRXJyb3JIYW5kbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9J0NoZWNrb3V0U2VydmljZS50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBCYXNlQ2hlY2tvdXRDb250cm9sbGVyIGV4dGVuZHMgT3Jja2VzdHJhLkNvbXBvc2VyLkNvbnRyb2xsZXIgaW1wbGVtZW50cyBPcmNrZXN0cmEuQ29tcG9zZXIuSUJhc2VDaGVja291dENvbnRyb2xsZXIge1xyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgZGVib3VuY2VIYW5kbGU7XHJcbiAgICAgICAgcHJvdGVjdGVkIGRlYm91bmNlVGltZW91dDogbnVtYmVyID0gMzAwO1xyXG4gICAgICAgIHByb3RlY3RlZCBmb3JtSW5zdGFuY2VzOiBJUGFyc2xleVtdO1xyXG4gICAgICAgIHByb3RlY3RlZCBjaGVja291dFNlcnZpY2U6IElDaGVja291dFNlcnZpY2U7XHJcblxyXG4gICAgICAgIHB1YmxpYyB2aWV3TW9kZWxOYW1lOiBzdHJpbmc7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKCkge1xyXG5cclxuICAgICAgICAgICAgc3VwZXIuaW5pdGlhbGl6ZSgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jaGVja291dFNlcnZpY2UgPSBDaGVja291dFNlcnZpY2UuZ2V0SW5zdGFuY2UoKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJDb250cm9sbGVyKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgcmVnaXN0ZXJDb250cm9sbGVyKCkge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jaGVja291dFNlcnZpY2UucmVnaXN0ZXJDb250cm9sbGVyKHRoaXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHVucmVnaXN0ZXJDb250cm9sbGVyKCkge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jaGVja291dFNlcnZpY2UudW5yZWdpc3RlckNvbnRyb2xsZXIodGhpcy52aWV3TW9kZWxOYW1lKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyByZW5kZXJEYXRhKGNoZWNrb3V0Q29udGV4dDogSUNoZWNrb3V0Q29udGV4dCk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWV0aG9kIG5vdCBpbXBsZW1lbnRlZCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGdldFZhbGlkYXRpb25Qcm9taXNlKCk6IFEuUHJvbWlzZTxib29sZWFuPiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gUS5mY2FsbCgoKSA9PiB0aGlzLmlzVmFsaWRGb3JVcGRhdGUoKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZ2V0VXBkYXRlTW9kZWxQcm9taXNlKCk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBRLmZjYWxsKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHZhciB2bSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgdm1bdGhpcy52aWV3TW9kZWxOYW1lXSA9IHRoaXMuZ2V0Vmlld01vZGVsVXBkYXRlZCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiB2bTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgcmVnaXN0ZXJTdWJzY3JpcHRpb25zKCk6IHZvaWQge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5zdWJzY3JpYmUoYCR7dGhpcy52aWV3TW9kZWxOYW1lfVJlbmRlcmVkYCwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5mb3JtSW5zdGFuY2VzID0gdGhpcy5yZWdpc3RlckZvcm1zRm9yVmFsaWRhdGlvbigkKCdmb3JtJywgdGhpcy5jb250ZXh0LmNvbnRhaW5lcikpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBnZXRWaWV3TW9kZWxVcGRhdGVkKCk6IHN0cmluZyB7XHJcblxyXG4gICAgICAgICAgICB2YXIgZm9ybUNvbnRleHQgPSAkKCdmb3JtJywgdGhpcy5jb250ZXh0LmNvbnRhaW5lciksXHJcbiAgICAgICAgICAgICAgICB2aWV3TW9kZWwgPSAoPElTZXJpYWxpemVPYmplY3RKcXVlcnlQbHVnaW4+Zm9ybUNvbnRleHQpLnNlcmlhbGl6ZU9iamVjdCgpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHZpZXdNb2RlbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgaXNWYWxpZEZvclVwZGF0ZSgpOiBib29sZWFuIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBpc1ZhbGlkRm9yVXBkYXRlID0gXy5hbGwodGhpcy5mb3JtSW5zdGFuY2VzLCBmb3JtSW5zdGFuY2UgPT4gZm9ybUluc3RhbmNlLnZhbGlkYXRlKHVuZGVmaW5lZCwgdHJ1ZSkpO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGlzVmFsaWRGb3JVcGRhdGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb25SZW5kZXJEYXRhRmFpbGVkKHJlYXNvbjogYW55KTogdm9pZCB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnJlbW92ZUxvYWRpbmcoKTtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHJlbmRlcmluZyB0aGUgY29udHJvbCBpbiBjaGFyZ2Ugb2YgJyR7dGhpcy52aWV3TW9kZWxOYW1lfScuYCwgcmVhc29uKTtcclxuICAgICAgICAgICAgRXJyb3JIYW5kbGVyLmluc3RhbmNlKCkub3V0cHV0RXJyb3JGcm9tQ29kZSgnQ2hlY2tvdXRSZW5kZXJGYWlsZWQnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCByZW1vdmVMb2FkaW5nKCk6IHZvaWQge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jb250ZXh0LmNvbnRhaW5lci5maW5kKCcuanMtbG9hZGluZycpLmhpZGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9DaGVja291dENvbW1vbi9zb3VyY2UvVHlwZXNjcmlwdC9CYXNlQ2hlY2tvdXRDb250cm9sbGVyLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIEJpbGxpbmdBZGRyZXNzQ2hlY2tvdXRDb250cm9sbGVyIGV4dGVuZHMgT3Jja2VzdHJhLkNvbXBvc2VyLkJhc2VDaGVja291dENvbnRyb2xsZXIge1xyXG5cclxuICAgICAgICBwdWJsaWMgaW5pdGlhbGl6ZSgpIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMudmlld01vZGVsTmFtZSA9ICdCaWxsaW5nQWRkcmVzcyc7XHJcblxyXG4gICAgICAgICAgICBzdXBlci5pbml0aWFsaXplKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAgcHVibGljIGNoYW5nZVVzZVNoaXBwaW5nQWRkcmVzcygpIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2V0QmlsbGluZ0FkZHJlc3NGb3JtVmlzaWJpbGl0eSgpO1xyXG4gICAgICAgICAgICB0aGlzLnNldEJpbGxpbmdBZGRyZXNzRm9ybVZhbGlkYXRpb24oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyByZW5kZXJEYXRhKGNoZWNrb3V0Q29udGV4dDogSUNoZWNrb3V0Q29udGV4dCk6IFEuUHJvbWlzZTx2b2lkPiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gUS5mY2FsbCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2hlY2tvdXRDb250ZXh0LmF1dGhlbnRpY2F0aW9uVmlld01vZGVsLklzQXV0aGVudGljYXRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQXV0aGVudGljYXRlZChjaGVja291dENvbnRleHQpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclVuYXV0aGVudGljYXRlZChjaGVja291dENvbnRleHQpO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgcmVuZGVyQXV0aGVudGljYXRlZChjaGVja291dENvbnRleHQ6IElDaGVja291dENvbnRleHQpIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMudW5yZWdpc3RlckNvbnRyb2xsZXIoKTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXIodGhpcy52aWV3TW9kZWxOYW1lLCBjaGVja291dENvbnRleHQuYXV0aGVudGljYXRpb25WaWV3TW9kZWwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHJlbmRlclVuYXV0aGVudGljYXRlZChjaGVja291dENvbnRleHQ6IElDaGVja291dENvbnRleHQpIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJTdWJzY3JpcHRpb25zKCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKHRoaXMudmlld01vZGVsTmFtZSwgY2hlY2tvdXRDb250ZXh0LmNhcnRWaWV3TW9kZWwpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcignQWRkcmVzc1JlZ2lvblBpY2tlcicsIHtcclxuICAgICAgICAgICAgICAgIFJlZ2lvbnM6IGNoZWNrb3V0Q29udGV4dC5yZWdpb25zVmlld01vZGVsLFxyXG4gICAgICAgICAgICAgICAgU2VsZWN0ZWRSZWdpb24gOiB0aGlzLmdldFJlZ2lvbkNvZGUoY2hlY2tvdXRDb250ZXh0LmNhcnRWaWV3TW9kZWwpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goYCR7dGhpcy52aWV3TW9kZWxOYW1lfVJlbmRlcmVkYCwgY2hlY2tvdXRDb250ZXh0LmNhcnRWaWV3TW9kZWwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHJlZ2lzdGVyU3Vic2NyaXB0aW9ucygpIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIuc3Vic2NyaWJlKGAke3RoaXMudmlld01vZGVsTmFtZX1SZW5kZXJlZGAsICgpID0+IHRoaXMub25SZW5kZXJlZCgpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCByZW5kZXJEYXRhRmFpbGVkKHJlYXNvbjogYW55KTogdm9pZCB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byByZW5kZXIgQmlsbGluZyBBZGRyZXNzIGNvbnRyb2wnLCByZWFzb24pO1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRleHQuY29udGFpbmVyLmZpbmQoJy5qcy1sb2FkaW5nJykuaGlkZSgpO1xyXG5cclxuICAgICAgICAgICAgLy9UT0RPOiBFcnJvciBoYW5kbGluZ1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXRSZWdpb25Db2RlKGNhcnQ6IGFueSk6IHN0cmluZyB7XHJcblxyXG4gICAgICAgICAgICBpZiAoY2FydC5QYXltZW50ID09PSB1bmRlZmluZWQgfHxcclxuICAgICAgICAgICAgICAgIGNhcnQuUGF5bWVudC5CaWxsaW5nQWRkcmVzcyA9PT0gdW5kZWZpbmVkIHx8XHJcbiAgICAgICAgICAgICAgICBjYXJ0LlBheW1lbnQuQmlsbGluZ0FkZHJlc3MuUmVnaW9uQ29kZSA9PT0gdW5kZWZpbmVkIHx8XHJcbiAgICAgICAgICAgICAgICBjYXJ0LlBheW1lbnQuQmlsbGluZ0FkZHJlc3MuVXNlU2hpcHBpbmdBZGRyZXNzKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gY2FydC5QYXltZW50LkJpbGxpbmdBZGRyZXNzLlJlZ2lvbkNvZGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIG9uUmVuZGVyZWQoKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgdXNlU2hpcHBpbmdBZGRyZXNzOiBCb29sZWFuID0gdGhpcy51c2VTaGlwcGluZ0FkZHJlc3MoKTtcclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5zdWJzY3JpYmUoJ3Bvc3RhbENvZGVDaGFuZ2VkJywgZSA9PiB0aGlzLm9uUG9zdGFsQ29kZUNoYW5nZWQodXNlU2hpcHBpbmdBZGRyZXNzLCBlLmRhdGEpKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZm9ybUluc3RhbmNlcyA9IHRoaXMucmVnaXN0ZXJGb3Jtc0ZvclZhbGlkYXRpb24odGhpcy5nZXRWaXNpYmxlRm9ybXMoKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHVzZVNoaXBwaW5nQWRkcmVzcygpIDogQm9vbGVhbiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gJCh0aGlzLmNvbnRleHQuY29udGFpbmVyKS5maW5kKCdpbnB1dFtuYW1lPVVzZVNoaXBwaW5nQWRkcmVzc106Y2hlY2tlZCcpLnZhbCgpID09PSAndHJ1ZSc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIG9uUG9zdGFsQ29kZUNoYW5nZWQodXNlU2hpcHBpbmdBZGRyZXNzOiBCb29sZWFuLCBjYXJ0OiBhbnkpIHtcclxuXHJcbiAgICAgICAgICAgIGlmICghdXNlU2hpcHBpbmdBZGRyZXNzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBwb3N0YWxDb2RlOiBzdHJpbmcgPSBjYXJ0LlNoaXBwaW5nQWRkcmVzcy5Qb3N0YWxDb2RlO1xyXG4gICAgICAgICAgICB0aGlzLmNoZWNrb3V0U2VydmljZS51cGRhdGVQb3N0YWxDb2RlKHBvc3RhbENvZGUpLmRvbmUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgZ2V0VmlzaWJsZUZvcm1zKCk6IEpRdWVyeSB7XHJcbiAgICAgICAgICAgIHZhciB2aXNpYmxlRm9ybXMgPSAkKCdmb3JtJywgdGhpcy5jb250ZXh0LmNvbnRhaW5lcikubm90KCdmb3JtOmhhcyguaGlkZSknKTtcclxuICAgICAgICAgICAgcmV0dXJuIHZpc2libGVGb3JtcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc2V0QmlsbGluZ0FkZHJlc3NGb3JtVmlzaWJpbGl0eSgpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciB1c2VTaGlwcGluZ0FkZHJlc3M6IEJvb2xlYW4gPSB0aGlzLnVzZVNoaXBwaW5nQWRkcmVzcygpO1xyXG4gICAgICAgICAgICBpZiAodXNlU2hpcHBpbmdBZGRyZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcjQmlsbGluZ0FkZHJlc3NDb250ZW50JykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICQoJyNCaWxsaW5nQWRkcmVzc0NvbnRlbnQnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHNldEJpbGxpbmdBZGRyZXNzRm9ybVZhbGlkYXRpb24oKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgdXNlU2hpcHBpbmdBZGRyZXNzOiBCb29sZWFuID0gdGhpcy51c2VTaGlwcGluZ0FkZHJlc3MoKTtcclxuICAgICAgICAgICAgdmFyIGlzVmFsaWRhdGlvbkVuYWJsZWQ6IEJvb2xlYW4gPSB0aGlzLmlzQmlsbGluZ0FkZHJlc3NGb3JtVmFsaWRhdGlvbkVuYWJsZWQoKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh1c2VTaGlwcGluZ0FkZHJlc3MpIHtcclxuICAgICAgICAgICAgICAgIGlmIChpc1ZhbGlkYXRpb25FbmFibGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNhYmxlQmlsbGluZ0FkZHJlc3NGb3JtVmFsaWRhdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFpc1ZhbGlkYXRpb25FbmFibGVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbmFibGVCaWxsaW5nQWRkcmVzc0Zvcm1WYWxpZGF0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgaXNCaWxsaW5nQWRkcmVzc0Zvcm1WYWxpZGF0aW9uRW5hYmxlZCgpIDogQm9vbGVhbiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gXy5zb21lKHRoaXMuZm9ybUluc3RhbmNlcywgKGZvcm1JbnN0YW5jZSA6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXNCaWxsaW5nQWRkcmVzc0Zvcm1JbnN0YW5jZShmb3JtSW5zdGFuY2UpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgZGlzYWJsZUJpbGxpbmdBZGRyZXNzRm9ybVZhbGlkYXRpb24oKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgZm9ybUluc3RhbmNlID0gXy5maW5kKHRoaXMuZm9ybUluc3RhbmNlcywgKGZvcm1JbnN0YW5jZSA6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXNCaWxsaW5nQWRkcmVzc0Zvcm1JbnN0YW5jZShmb3JtSW5zdGFuY2UpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGZvcm1JbnN0YW5jZS5kZXN0cm95KCk7XHJcblxyXG4gICAgICAgICAgICBfLnJlbW92ZSh0aGlzLmZvcm1JbnN0YW5jZXMsIChmb3JtSW5zdGFuY2UgOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmlzQmlsbGluZ0FkZHJlc3NGb3JtSW5zdGFuY2UoZm9ybUluc3RhbmNlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGlzQmlsbGluZ0FkZHJlc3NGb3JtSW5zdGFuY2UoZm9ybUluc3RhbmNlIDogYW55KSA6IGJvb2xlYW4ge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZvcm1JbnN0YW5jZS4kZWxlbWVudC5pcygnZm9ybSNCaWxsaW5nQWRkcmVzcycpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBlbmFibGVCaWxsaW5nQWRkcmVzc0Zvcm1WYWxpZGF0aW9uKCkge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5mb3JtSW5zdGFuY2VzID0gdGhpcy5mb3JtSW5zdGFuY2VzLmNvbmNhdCh0aGlzLnJlZ2lzdGVyRm9ybXNGb3JWYWxpZGF0aW9uKCQoJ2Zvcm0jQmlsbGluZ0FkZHJlc3MnKSkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcblxyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJQ3VzdG9tZXJSZXBvc2l0b3J5IHtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgKiBBdHRlbXB0IHRvIHJlZ2lzdGVyIHVzaW5nIENvbXBvc2VyIEFQSS5cclxuICAgICAgICAqIEBwYXJhbVxyXG4gICAgICAgICovXHJcbiAgICAgICAgdXBkYXRlQWNjb3VudChmb3JtRGF0YTogYW55LCByZXR1cm5Vcmw6IHN0cmluZyk6IFEuUHJvbWlzZTxhbnk+O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXQgdGhlIGN1c3RvbWVyIGFkZHJlc3Nlcy5cclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXRBZGRyZXNzZXMoKTogUS5Qcm9taXNlPGFueT47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICogQ3JlYXRlIGEgbmV3IGN1c3RvbWVyIGFkZHJlc3NcclxuICAgICAgICAqIEBwYXJhbVxyXG4gICAgICAgICovXHJcbiAgICAgICAgY3JlYXRlQWRkcmVzcyhmb3JtRGF0YTogYW55LCByZXR1cm5Vcmw6IHN0cmluZyk6IFEuUHJvbWlzZTxhbnk+O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAqIFVwZGF0ZSBhIGN1c3RvbWVyIGFkZHJlc3NcclxuICAgICAgICAqIEBwYXJhbVxyXG4gICAgICAgICovXHJcbiAgICAgICAgdXBkYXRlQWRkcmVzcyhmb3JtRGF0YTogYW55LCBhZGRyZXNzSWQ6IHN0cmluZywgcmV0dXJuVXJsOiBzdHJpbmcpOiBRLlByb21pc2U8YW55PjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgKiBEZWxldGUgYSBjdXN0b21lciBhZGRyZXNzXHJcbiAgICAgICAgKiBAcGFyYW1cclxuICAgICAgICAqL1xyXG4gICAgICAgIGRlbGV0ZUFkZHJlc3MoYWRkcmVzc0lkOiBKUXVlcnksIHJldHVyblVybDogc3RyaW5nKTogUS5Qcm9taXNlPGFueT47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICogU2V0IGRlZmF1bHQgYWRkcmVzcyBmb3IgYSBjdXN0b21lclxyXG4gICAgICAgICogQHBhcmFtXHJcbiAgICAgICAgKi9cclxuICAgICAgICBzZXREZWZhdWx0QWRkcmVzcyhhZGRyZXNzSWQ6IHN0cmluZywgcmV0dXJuVXJsOiBzdHJpbmcpOiBRLlByb21pc2U8YW55PjtcclxuICAgIH1cclxufSIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvTXZjL0NvbXBvc2VyQ2xpZW50LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vSUN1c3RvbWVyUmVwb3NpdG9yeS50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBDdXN0b21lclJlcG9zaXRvcnkgIGltcGxlbWVudHMgSUN1c3RvbWVyUmVwb3NpdG9yeSB7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICogQXR0ZW1wdCB0byByZWdpc3RlciB1c2luZyBDb21wb3NlciBBUEkuXHJcbiAgICAgICAgKiBAcGFyYW1cclxuICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyB1cGRhdGVBY2NvdW50KGZvcm1EYXRhOiBhbnksIHJldHVyblVybDogc3RyaW5nKTogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgdmFyIGRhdGEgPSBfLmV4dGVuZCh7IFJldHVyblVybDogcmV0dXJuVXJsIH0sIGZvcm1EYXRhKTtcclxuICAgICAgICAgICAgcmV0dXJuIENvbXBvc2VyQ2xpZW50LnBvc3QoJy9hcGkvY3VzdG9tZXIvdXBkYXRlJywgZGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0IHRoZSBjdXN0b21lciBhZGRyZXNzZXMuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGdldEFkZHJlc3NlcygpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICAgIHJldHVybiBDb21wb3NlckNsaWVudC5nZXQoJy9hcGkvY3VzdG9tZXIvYWRkcmVzc2VzJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAqIENyZWF0ZSBhIG5ldyBjdXN0b21lciBhZGRyZXNzXHJcbiAgICAgICAgKiBAcGFyYW1cclxuICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBjcmVhdGVBZGRyZXNzKGZvcm1EYXRhOiBhbnksIHJldHVyblVybDogc3RyaW5nKTogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgdmFyIGRhdGEgPSBfLmV4dGVuZCh7IFJldHVyblVybDogcmV0dXJuVXJsIH0sIGZvcm1EYXRhKTtcclxuICAgICAgICAgICAgcmV0dXJuIENvbXBvc2VyQ2xpZW50LnBvc3QoJy9hcGkvY3VzdG9tZXIvYWRkcmVzc2VzJywgZGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAqIFVwZGF0ZSBhIGN1c3RvbWVyIGFkZHJlc3NcclxuICAgICAgICAqIEBwYXJhbVxyXG4gICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHVwZGF0ZUFkZHJlc3MoZm9ybURhdGE6IGFueSwgYWRkcmVzc0lkOiBzdHJpbmcsIHJldHVyblVybDogc3RyaW5nKTogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgdmFyIGRhdGEgPSBfLmV4dGVuZCh7IFJldHVyblVybDogcmV0dXJuVXJsIH0sIGZvcm1EYXRhKTtcclxuICAgICAgICAgICAgcmV0dXJuIENvbXBvc2VyQ2xpZW50LnBvc3QoJy9hcGkvY3VzdG9tZXIvYWRkcmVzc2VzLycgKyBhZGRyZXNzSWQsIGRhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgKiBEZWxldGUgYSBjdXN0b21lciBhZGRyZXNzXHJcbiAgICAgICAgKiBAcGFyYW1cclxuICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBkZWxldGVBZGRyZXNzKGFkZHJlc3NJZDogSlF1ZXJ5LCByZXR1cm5Vcmw6IHN0cmluZyk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhID0geyBSZXR1cm5Vcmw6IHJldHVyblVybCB9O1xyXG4gICAgICAgICAgICByZXR1cm4gQ29tcG9zZXJDbGllbnQucmVtb3ZlKCcvYXBpL2N1c3RvbWVyL2FkZHJlc3Nlcy8nICsgYWRkcmVzc0lkLCBkYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICogU2V0IGRlZmF1bHQgYWRkcmVzcyBmb3IgYSBjdXN0b21lclxyXG4gICAgICAgICogQHBhcmFtXHJcbiAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc2V0RGVmYXVsdEFkZHJlc3MoYWRkcmVzc0lkOiBzdHJpbmcsIHJldHVyblVybDogc3RyaW5nKTogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7IFJldHVyblVybDogcmV0dXJuVXJsIH07XHJcbiAgICAgICAgICAgIHJldHVybiBDb21wb3NlckNsaWVudC5wb3N0KCcvYXBpL2N1c3RvbWVyL3NldGRlZmF1bHRhZGRyZXNzLycgKyBhZGRyZXNzSWQsIGRhdGEpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElDdXN0b21lclNlcnZpY2Uge1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAqIEF0dGVtcHQgdG8gcmVnaXN0ZXIgdXNpbmcgQ29tcG9zZXIgQVBJLlxyXG4gICAgICAgICogQHBhcmFtXHJcbiAgICAgICAgKi9cclxuICAgICAgICB1cGRhdGVBY2NvdW50KGZvcm1EYXRhOiBhbnksIHJldHVyblVybDogc3RyaW5nKTogUS5Qcm9taXNlPGFueT47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldCB0aGUgY3VzdG9tZXIgYWRkcmVzc2VzLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldEFkZHJlc3NlcygpOiBRLlByb21pc2U8YW55PjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgKiBDcmVhdGUgYSBuZXcgY3VzdG9tZXIgYWRkcmVzc1xyXG4gICAgICAgICogQHBhcmFtXHJcbiAgICAgICAgKi9cclxuICAgICAgICBjcmVhdGVBZGRyZXNzKGZvcm1EYXRhOiBhbnksIHJldHVyblVybDogc3RyaW5nKTogUS5Qcm9taXNlPGFueT47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICogVXBkYXRlIGEgY3VzdG9tZXIgYWRkcmVzc1xyXG4gICAgICAgICogQHBhcmFtXHJcbiAgICAgICAgKi9cclxuICAgICAgICB1cGRhdGVBZGRyZXNzKGZvcm1EYXRhOiBhbnksIGFkZHJlc3NJZDogc3RyaW5nLCByZXR1cm5Vcmw6IHN0cmluZyk6IFEuUHJvbWlzZTxhbnk+O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAqIERlbGV0ZSBhIGN1c3RvbWVyIGFkZHJlc3NcclxuICAgICAgICAqIEBwYXJhbVxyXG4gICAgICAgICovXHJcbiAgICAgICAgZGVsZXRlQWRkcmVzcyhhZGRyZXNzSWQ6IEpRdWVyeSwgcmV0dXJuVXJsOiBzdHJpbmcpOiBRLlByb21pc2U8YW55PjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgKiBTZXQgZGVmYXVsdCBhZGRyZXNzIGZvciBhIGN1c3RvbWVyXHJcbiAgICAgICAgKiBAcGFyYW1cclxuICAgICAgICAqL1xyXG4gICAgICAgIHNldERlZmF1bHRBZGRyZXNzKGFkZHJlc3NJZDogc3RyaW5nLCByZXR1cm5Vcmw6IHN0cmluZyk6IFEuUHJvbWlzZTxhbnk+O1xyXG4gICAgfVxyXG59IiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9SZXBvc2l0b3JpZXMvQ3VzdG9tZXJSZXBvc2l0b3J5LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9J0lDdXN0b21lclNlcnZpY2UudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgQ3VzdG9tZXJTZXJ2aWNlICBpbXBsZW1lbnRzIElDdXN0b21lclNlcnZpY2Uge1xyXG5cclxuICAgICAgICBwcml2YXRlIG1lbW9pemVHZXRBZHJlc3NlczogRnVuY3Rpb247XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBjdXN0b21lclJlcG9zaXRvcnk6IElDdXN0b21lclJlcG9zaXRvcnk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihjdXN0b21lclJlcG9zaXRvcnk6IElDdXN0b21lclJlcG9zaXRvcnkpIHtcclxuXHJcbiAgICAgICAgICAgIGlmICghY3VzdG9tZXJSZXBvc2l0b3J5KSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Vycm9yOiBjdXN0b21lclJlcG9zaXRvcnkgaXMgcmVxdWlyZWQnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5jdXN0b21lclJlcG9zaXRvcnkgPSBjdXN0b21lclJlcG9zaXRvcnk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAqIEF0dGVtcHQgdG8gcmVnaXN0ZXIgdXNpbmcgQ29tcG9zZXIgQVBJLlxyXG4gICAgICAgICogQHBhcmFtXHJcbiAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgdXBkYXRlQWNjb3VudChmb3JtRGF0YTogYW55LCByZXR1cm5Vcmw6IHN0cmluZyk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmN1c3RvbWVyUmVwb3NpdG9yeS51cGRhdGVBY2NvdW50KGZvcm1EYXRhLCByZXR1cm5VcmwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldCB0aGUgY3VzdG9tZXIgYWRkcmVzc2VzLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBnZXRBZGRyZXNzZXMoKTogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgIGlmIChfLmlzVW5kZWZpbmVkKHRoaXMubWVtb2l6ZUdldEFkcmVzc2VzKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tZW1vaXplR2V0QWRyZXNzZXMgPSBfLm1lbW9pemUoYXJnID0+IHRoaXMuZ2V0QWRkcmVzc2VzSW1wbCgpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubWVtb2l6ZUdldEFkcmVzc2VzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGdldEFkZHJlc3Nlc0ltcGwoKTogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgIHJldHVybiB0aGlzLmN1c3RvbWVyUmVwb3NpdG9yeS5nZXRBZGRyZXNzZXMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICogQ3JlYXRlIGEgbmV3IGN1c3RvbWVyIGFkZHJlc3NcclxuICAgICAgICAqIEBwYXJhbVxyXG4gICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGNyZWF0ZUFkZHJlc3MoZm9ybURhdGE6IGFueSwgcmV0dXJuVXJsOiBzdHJpbmcpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jdXN0b21lclJlcG9zaXRvcnkuY3JlYXRlQWRkcmVzcyhmb3JtRGF0YSwgcmV0dXJuVXJsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICogVXBkYXRlIGEgY3VzdG9tZXIgYWRkcmVzc1xyXG4gICAgICAgICogQHBhcmFtXHJcbiAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgdXBkYXRlQWRkcmVzcyhmb3JtRGF0YTogYW55LCBhZGRyZXNzSWQ6IHN0cmluZywgcmV0dXJuVXJsOiBzdHJpbmcpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jdXN0b21lclJlcG9zaXRvcnkudXBkYXRlQWRkcmVzcyhmb3JtRGF0YSwgYWRkcmVzc0lkLCByZXR1cm5VcmwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgKiBEZWxldGUgYSBjdXN0b21lciBhZGRyZXNzXHJcbiAgICAgICAgKiBAcGFyYW1cclxuICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBkZWxldGVBZGRyZXNzKGFkZHJlc3NJZDogSlF1ZXJ5LCByZXR1cm5Vcmw6IHN0cmluZyk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmN1c3RvbWVyUmVwb3NpdG9yeS5kZWxldGVBZGRyZXNzKGFkZHJlc3NJZCwgcmV0dXJuVXJsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICogU2V0IGRlZmF1bHQgYWRkcmVzcyBmb3IgYSBjdXN0b21lclxyXG4gICAgICAgICogQHBhcmFtXHJcbiAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc2V0RGVmYXVsdEFkZHJlc3MoYWRkcmVzc0lkOiBzdHJpbmcsIHJldHVyblVybDogc3RyaW5nKTogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VzdG9tZXJSZXBvc2l0b3J5LnNldERlZmF1bHRBZGRyZXNzKGFkZHJlc3NJZCwgcmV0dXJuVXJsKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvQ29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L2pxdWVyeVBsdWdpbnMvSVNlcmlhbGl6ZU9iamVjdEpxdWVyeVBsdWdpbi50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21tb24vU291cmNlL1R5cGVzY3JpcHQvTWVtYmVyc2hpcFNlcnZpY2UudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuXHJcbiAgICBleHBvcnQgZW51bSBNeUFjY291bnRTdGF0dXMge1xyXG4gICAgICAgIFN1Y2Nlc3MsXHJcbiAgICAgICAgSW52YWxpZFRpY2tldCxcclxuICAgICAgICBEdXBsaWNhdGVFbWFpbCxcclxuICAgICAgICBEdXBsaWNhdGVVc2VyTmFtZSxcclxuICAgICAgICBJbnZhbGlkUXVlc3Rpb24sXHJcbiAgICAgICAgSW52YWxpZFBhc3N3b3JkLFxyXG4gICAgICAgIEludmFsaWRQYXNzd29yZEFuc3dlcixcclxuICAgICAgICBJbnZhbGlkRW1haWwsXHJcbiAgICAgICAgRmFpbGVkLFxyXG4gICAgICAgIFVzZXJSZWplY3RlZCxcclxuICAgICAgICBSZXF1aXJlc0FwcHJvdmFsLFxyXG4gICAgICAgIEFqYXhGYWlsZWRcclxuICAgIH07XHJcbn1cclxuIixudWxsLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L012Yy9Db21wb3NlckNsaWVudC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5NeUFjY291bnQuVUkvQ29tbW9uL1NvdXJjZS9UeXBlc2NyaXB0L0N1c3RvbWVyU2VydmljZS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9DaGVja291dENvbW1vbi9Tb3VyY2UvVHlwZXNjcmlwdC9BZGRyZXNzRHRvLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIEJpbGxpbmdBZGRyZXNzUmVnaXN0ZXJlZENoZWNrb3V0U2VydmljZSB7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBjdXN0b21lclNlcnZpY2U6IElDdXN0b21lclNlcnZpY2U7XHJcblxyXG4gICAgICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihjdXN0b21lclNlcnZpY2U6IElDdXN0b21lclNlcnZpY2UpIHtcclxuICAgICAgICAgICAgdGhpcy5jdXN0b21lclNlcnZpY2UgPSBjdXN0b21lclNlcnZpY2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0IHRoZSBjdXN0b21lciBhZGRyZXNzZXMuIFRoZSBzZWxlY3RlZCBiaWxsaW5nIGFkZHJlc3MgaXMgdGFrZW4gZnJvbSB0aGUgY2FydCBieSBkZWZhdWx0LlxyXG4gICAgICAgICAqIElmIG5vIGFkZHJlc3MgaGFzIGJlZW4gc2V0IGluIHRoZSBjYXJ0LCB0aGUgc2VsZWN0ZWQgYmlsbGluZyBhZGRyZXNzIGNvcnJlc3BvbmRzIHRvIHRoZSBwcmVmZXJyZWQgYWRkcmVzcy5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgZ2V0QmlsbGluZ0FkZHJlc3NlcyhjYXJ0OiBhbnkpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWNhcnQpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIGNhcnQgaXMgcmVxdWlyZWQnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VzdG9tZXJTZXJ2aWNlLmdldEFkZHJlc3NlcygpXHJcbiAgICAgICAgICAgICAgICAudGhlbihhZGRyZXNzZXMgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZHJlc3Nlcy5BZGRyZXNzZXNMb2FkZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGFkZHJlc3Nlcy5TZWxlY3RlZEJpbGxpbmdBZGRyZXNzSWQgPSB0aGlzLmdldFNlbGVjdGVkQmlsbGluZ0FkZHJlc3NJZChjYXJ0LCBhZGRyZXNzZXMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWRkcmVzc2VzO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZ2V0U2VsZWN0ZWRCaWxsaW5nQWRkcmVzc0lkKGNhcnQ6IGFueSwgYWRkcmVzc0xpc3Q6IGFueSkgOiBzdHJpbmcge1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNCaWxsaW5nQWRkcmVzc0Zyb21DYXJ0VmFsaWQoY2FydCwgYWRkcmVzc0xpc3QpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gY2FydC5QYXltZW50LkJpbGxpbmdBZGRyZXNzLkFkZHJlc3NCb29rSWQ7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFByZWZlcnJlZEJpbGxpbmdBZGRyZXNzSWQoYWRkcmVzc0xpc3QpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBpc0JpbGxpbmdBZGRyZXNzRnJvbUNhcnRWYWxpZChjYXJ0OiBhbnksIGFkZHJlc3NMaXN0OiBhbnkpIDogYm9vbGVhbiB7XHJcblxyXG4gICAgICAgICAgICBpZiAoY2FydC5QYXltZW50ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGNhcnQuUGF5bWVudC5CaWxsaW5nQWRkcmVzcyA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBfLmFueShhZGRyZXNzTGlzdC5BZGRyZXNzZXMsIChhZGRyZXNzOiBBZGRyZXNzRHRvKSA9PiBhZGRyZXNzLklkID09PSBjYXJ0LlBheW1lbnQuQmlsbGluZ0FkZHJlc3MuQWRkcmVzc0Jvb2tJZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGdldFByZWZlcnJlZEJpbGxpbmdBZGRyZXNzSWQoYWRkcmVzc0xpc3Q6IGFueSkgOiBzdHJpbmcge1xyXG5cclxuICAgICAgICAgICAgdmFyIHByZWZlcnJlZEJpbGxpbmdBZGRyZXNzID0gXy5maW5kKGFkZHJlc3NMaXN0LkFkZHJlc3NlcywgKGFkZHJlc3M6IEFkZHJlc3NEdG8pID0+IGFkZHJlc3MuSXNQcmVmZXJyZWRCaWxsaW5nKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBwcmVmZXJyZWRCaWxsaW5nQWRkcmVzcyA9PT0gdW5kZWZpbmVkID8gdW5kZWZpbmVkIDogcHJlZmVycmVkQmlsbGluZ0FkZHJlc3MuSWQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vVHlwaW5ncy90c2QuZC50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBVSU1vZGFsIHtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBtb2RhbENvbnRleHQ6IEpRdWVyeTtcclxuICAgICAgICBwcml2YXRlIGNvbmZpcm1EZWZlcnJlZDogUS5EZWZlcnJlZDxhbnk+O1xyXG4gICAgICAgIHByaXZhdGUgY29uZmlybUFjdGlvbjogYW55O1xyXG4gICAgICAgIHByaXZhdGUgd2luZG93OiBXaW5kb3c7XHJcbiAgICAgICAgcHJpdmF0ZSBzZW5kZXI6IGFueTtcclxuICAgICAgICBwcml2YXRlIG1vZGFsQ29udGV4dFNlbGVjdG9yOiBzdHJpbmc7XHJcblxyXG4gICAgICAgIHB1YmxpYyBjb25zdHJ1Y3Rvcih3aW5kb3c6IFdpbmRvdywgbW9kYWxDb250ZXh0U2VsZWN0b3I6IHN0cmluZywgY29uZmlybUFjdGlvbiwgc2VuZGVyKSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNvbmZpcm1BY3Rpb24gPSBjb25maXJtQWN0aW9uO1xyXG4gICAgICAgICAgICB0aGlzLm1vZGFsQ29udGV4dFNlbGVjdG9yID0gbW9kYWxDb250ZXh0U2VsZWN0b3I7XHJcbiAgICAgICAgICAgIHRoaXMud2luZG93ID0gd2luZG93O1xyXG4gICAgICAgICAgICB0aGlzLnNlbmRlciA9IHNlbmRlcjtcclxuICAgICAgICAgICAgdGhpcy5yZWdpc3RlckRvbUV2ZW50cygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSByZWdpc3RlckRvbUV2ZW50cygpIDogdm9pZCB7XHJcbiAgICAgICAgICAgICQodGhpcy53aW5kb3cuZG9jdW1lbnQpLm9uKCdjbGljaycsICcubW9kYWwtLWNvbmZpcm0nLCAgdGhpcy5jb25maXJtTW9kYWwuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgICQodGhpcy53aW5kb3cuZG9jdW1lbnQpLm9uKCdjbGljaycsICcubW9kYWwtLWNhbmNlbCcsIHRoaXMuY2FuY2VsTW9kYWwuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHVucmVnaXN0ZXJEb21FdmVudHMoKSA6IHZvaWQge1xyXG4gICAgICAgICAgICAkKHRoaXMud2luZG93LmRvY3VtZW50KS5vZmYoJ2NsaWNrJywgJy5tb2RhbC0tY29uZmlybScsIHRoaXMuY29uZmlybU1vZGFsKTtcclxuICAgICAgICAgICAgJCh0aGlzLndpbmRvdy5kb2N1bWVudCkub2ZmKCdjbGljaycsICcubW9kYWwtLWNhbmNlbCcsIHRoaXMuY2FuY2VsTW9kYWwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG9wZW5Nb2RhbCA9IChldmVudDogSlF1ZXJ5RXZlbnRPYmplY3QpID0+IHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMubW9kYWxDb250ZXh0ID0gJCh0aGlzLm1vZGFsQ29udGV4dFNlbGVjdG9yKTtcclxuICAgICAgICAgICAgdGhpcy5jb25maXJtRGVmZXJyZWQgPSBRLmRlZmVyKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLm1vZGFsQ29udGV4dC5vbignc2hvd24uYnMubW9kYWwnLCAoZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAkKCdbZGF0YS1kaXNtaXNzXScsIGV2ZW50LnRhcmdldCkuZm9jdXMoKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLm1vZGFsQ29udGV4dC5vbignaGlkZS5icy5tb2RhbCcsIChldmVudDogSlF1ZXJ5RXZlbnRPYmplY3QpID0+IHtcclxuICAgICAgICAgICAgICAgICQoZXZlbnQudGFyZ2V0KS5vZmYoJ3Nob3duLmJzLm1vZGFsIGhpZGUuYnMubW9kYWwnKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jb25maXJtRGVmZXJyZWQucHJvbWlzZS5pc1BlbmRpbmcoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY29uZmlybURlZmVycmVkLnJlc29sdmUoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5tb2RhbENvbnRleHQubW9kYWwoJ3Nob3cnKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY29uZmlybURlZmVycmVkLnByb21pc2VcclxuICAgICAgICAgICAgICAgIC50aGVuKCh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubW9kYWxDb250ZXh0Lm1vZGFsKCdoaWRlJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb25maXJtQWN0aW9uLmNhbGwodGhpcy5zZW5kZXIsIGV2ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmRvbmUobnVsbCwgKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcHVibGljIGNvbmZpcm1Nb2RhbCgpIHtcclxuICAgICAgICAgICAgdGhpcy5jb25maXJtRGVmZXJyZWQucmVzb2x2ZSh0cnVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBjYW5jZWxNb2RhbCgpIHtcclxuICAgICAgICAgICAgdGhpcy5jb25maXJtRGVmZXJyZWQucmVzb2x2ZShmYWxzZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZGlzcG9zZSgpOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy51bnJlZ2lzdGVyRG9tRXZlbnRzKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuTXlBY2NvdW50LlVJL0NvbW1vbi9Tb3VyY2UvVHlwZXNjcmlwdC9DdXN0b21lclNlcnZpY2UudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuTXlBY2NvdW50LlVJL0NvbW1vbi9Tb3VyY2UvVHlwZXNjcmlwdC9NeUFjY291bnRFdmVudHMudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuTXlBY2NvdW50LlVJL0NvbW1vbi9Tb3VyY2UvVHlwZXNjcmlwdC9NeUFjY291bnRTdGF0dXMudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ2hlY2tvdXRDb21tb24vc291cmNlL1R5cGVzY3JpcHQvQmFzZUNoZWNrb3V0Q29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL0JpbGxpbmdBZGRyZXNzUmVnaXN0ZXJlZENoZWNrb3V0U2VydmljZS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9VSS9VSU1vZGFsLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIEJpbGxpbmdBZGRyZXNzUmVnaXN0ZXJlZENoZWNrb3V0Q29udHJvbGxlciBleHRlbmRzIE9yY2tlc3RyYS5Db21wb3Nlci5CYXNlQ2hlY2tvdXRDb250cm9sbGVyIHtcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGRlYm91bmNlQ2hhbmdlQmlsbGluZ01ldGhvZDogRnVuY3Rpb24gPSBfLmRlYm91bmNlKHRoaXMuY2hhbmdlQmlsbGluZ0FkZHJlc3NJbXBsLCA1MDAsIHsgJ2xlYWRpbmcnOiB0cnVlIH0pO1xyXG4gICAgICAgIHByb3RlY3RlZCBtb2RhbEVsZW1lbnRTZWxlY3Rvcjogc3RyaW5nID0gJyNjb25maXJtYXRpb25Nb2RhbCc7XHJcbiAgICAgICAgcHJpdmF0ZSB1aU1vZGFsOiBVSU1vZGFsO1xyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgY3VzdG9tZXJTZXJ2aWNlOiBJQ3VzdG9tZXJTZXJ2aWNlID0gbmV3IEN1c3RvbWVyU2VydmljZShuZXcgQ3VzdG9tZXJSZXBvc2l0b3J5KCkpO1xyXG4gICAgICAgIHByb3RlY3RlZCBiaWxsaW5nQWRkcmVzc1JlZ2lzdGVyZWRDaGVja291dFNlcnZpY2U6IEJpbGxpbmdBZGRyZXNzUmVnaXN0ZXJlZENoZWNrb3V0U2VydmljZSA9XHJcbiAgICAgICAgICAgIG5ldyBCaWxsaW5nQWRkcmVzc1JlZ2lzdGVyZWRDaGVja291dFNlcnZpY2UodGhpcy5jdXN0b21lclNlcnZpY2UpO1xyXG5cclxuICAgICAgICBwdWJsaWMgaW5pdGlhbGl6ZSgpIHtcclxuICAgICAgICAgICAgc3VwZXIuaW5pdGlhbGl6ZSgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy52aWV3TW9kZWxOYW1lID0gJ0JpbGxpbmdBZGRyZXNzUmVnaXN0ZXJlZCc7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnVpTW9kYWwgPSBuZXcgVUlNb2RhbCh3aW5kb3csIHRoaXMubW9kYWxFbGVtZW50U2VsZWN0b3IsIHRoaXMuZGVsZXRlQWRkcmVzcywgdGhpcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgcmVnaXN0ZXJTdWJzY3JpcHRpb25zKCkge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5zdWJzY3JpYmUoYCR7dGhpcy52aWV3TW9kZWxOYW1lfVJlbmRlcmVkYCwgZSA9PiB0aGlzLm9uUmVuZGVyZWQoZSkpO1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnN1YnNjcmliZShNeUFjY291bnRFdmVudHNbTXlBY2NvdW50RXZlbnRzLkFkZHJlc3NEZWxldGVkXSwgZSA9PiB0aGlzLm9uQWRkcmVzc0RlbGV0ZWQoZSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHJlbmRlckRhdGEoY2hlY2tvdXRDb250ZXh0OiBJQ2hlY2tvdXRDb250ZXh0KTogUS5Qcm9taXNlPHZvaWQ+IHtcclxuXHJcbiAgICAgICAgICAgIGlmIChjaGVja291dENvbnRleHQuYXV0aGVudGljYXRpb25WaWV3TW9kZWwuSXNBdXRoZW50aWNhdGVkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJBdXRoZW50aWNhdGVkKGNoZWNrb3V0Q29udGV4dCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclVuYXV0aGVudGljYXRlZChjaGVja291dENvbnRleHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgcmVuZGVyVW5hdXRoZW50aWNhdGVkKGNoZWNrb3V0Q29udGV4dDogSUNoZWNrb3V0Q29udGV4dCkge1xyXG5cclxuICAgICAgICAgICAgdGhpcy51bnJlZ2lzdGVyQ29udHJvbGxlcigpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcih0aGlzLnZpZXdNb2RlbE5hbWUsIGNoZWNrb3V0Q29udGV4dC5hdXRoZW50aWNhdGlvblZpZXdNb2RlbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgcmVuZGVyQXV0aGVudGljYXRlZChjaGVja291dENvbnRleHQ6IElDaGVja291dENvbnRleHQpIDogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICB0aGlzLnJlZ2lzdGVyU3Vic2NyaXB0aW9ucygpO1xyXG4gICAgICAgIHRoaXMucmVuZGVyKHRoaXMudmlld01vZGVsTmFtZSwge0lzQXV0aGVudGljYXRlZDogdHJ1ZX0pO1xyXG5cclxuICAgICAgICByZXR1cm4gdGhpcy5iaWxsaW5nQWRkcmVzc1JlZ2lzdGVyZWRDaGVja291dFNlcnZpY2UuZ2V0QmlsbGluZ0FkZHJlc3NlcyhjaGVja291dENvbnRleHQuY2FydFZpZXdNb2RlbClcclxuICAgICAgICAgICAgLnRoZW4oKGJpbGxpbmdBZHJlc3Nlc1ZtKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcih0aGlzLnZpZXdNb2RlbE5hbWUsIGNoZWNrb3V0Q29udGV4dC5jYXJ0Vmlld01vZGVsKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKCdCaWxsaW5nUmVnaXN0ZXJlZEFkZHJlc3NlcycsIGJpbGxpbmdBZHJlc3Nlc1ZtKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmZhaWwocmVhc29uID0+IHRoaXMuaGFuZGxlRXJyb3IocmVhc29uKSlcclxuICAgICAgICAgICAgLmZpbigoKSA9PiB0aGlzLmV2ZW50SHViLnB1Ymxpc2goYCR7dGhpcy52aWV3TW9kZWxOYW1lfVJlbmRlcmVkYCwgY2hlY2tvdXRDb250ZXh0LmNhcnRWaWV3TW9kZWwpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvblJlbmRlcmVkKGU6IElFdmVudEluZm9ybWF0aW9uKSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmZvcm1JbnN0YW5jZXMgPSB0aGlzLnJlZ2lzdGVyRm9ybXNGb3JWYWxpZGF0aW9uKCQoJyNSZWdpc3RlcmVkQmlsbGluZ0FkZHJlc3MnLCB0aGlzLmNvbnRleHQuY29udGFpbmVyKSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRCaWxsaW5nQWRkcmVzc0lkOiBzdHJpbmcgPSAkKHRoaXMuY29udGV4dC5jb250YWluZXIpLmZpbmQoJ2lucHV0W25hbWU9QmlsbGluZ0FkZHJlc3NJZF06Y2hlY2tlZCcpLnZhbCgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFzZWxlY3RlZEJpbGxpbmdBZGRyZXNzSWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5jaGVja291dFNlcnZpY2UuZ2V0Q2FydCgpXHJcbiAgICAgICAgICAgICAgICAudGhlbihjYXJ0ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWRCaWxsaW5nQWRkcmVzc0lkICE9PSBjYXJ0LlBheW1lbnQuQmlsbGluZ0FkZHJlc3MuQWRkcmVzc0Jvb2tJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRlYm91bmNlQ2hhbmdlQmlsbGluZ01ldGhvZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuZmFpbChyZWFzb24gPT4gdGhpcy5oYW5kbGVFcnJvcihyZWFzb24pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBzZXRTZWxlY3RlZEJpbGxpbmdBZGRyZXNzKCkge1xyXG5cclxuICAgICAgICAgICAgdmFyIHNlbGVjdGVkQmlsbGluZ0FkZHJlc3NJZDogc3RyaW5nID0gJCh0aGlzLmNvbnRleHQuY29udGFpbmVyKS5maW5kKCdpbnB1dFtuYW1lPUJpbGxpbmdBZGRyZXNzSWRdOmNoZWNrZWQnKS52YWwoKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghc2VsZWN0ZWRCaWxsaW5nQWRkcmVzc0lkKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tvdXRTZXJ2aWNlLmdldENhcnQoKVxyXG4gICAgICAgICAgICAgICAgLmRvbmUoY2FydCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkQmlsbGluZ0FkZHJlc3NJZCAhPT0gY2FydC5QYXltZW50LkJpbGxpbmdBZGRyZXNzLkFkZHJlc3NCb29rSWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWJvdW5jZUNoYW5nZUJpbGxpbmdNZXRob2QoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBjaGFuZ2VCaWxsaW5nQWRkcmVzcyhhY3Rpb25Db250ZXh0OiBJQ29udHJvbGxlckFjdGlvbkNvbnRleHQpIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZGVib3VuY2VDaGFuZ2VCaWxsaW5nTWV0aG9kKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgY2hhbmdlQmlsbGluZ0FkZHJlc3NJbXBsKCkge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jaGVja291dFNlcnZpY2UudXBkYXRlQ2FydCgpXHJcbiAgICAgICAgICAgICAgICAuZG9uZShyZXN1bHQgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0Lkhhc0Vycm9ycykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSB1cGRhdGVkIGNhcnQgY29udGFpbnMgZXJyb3JzJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0sIHJlYXNvbiA9PiB0aGlzLmhhbmRsZUVycm9yKHJlYXNvbikpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmVxdWlyZXMgdGhlIGVsZW1lbnQgaW4gYWN0aW9uIGNvbnRleHQgdG8gaGF2ZSBhIGRhdGEtYWRkcmVzcy1pZC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwcm90ZWN0ZWQgZGVsZXRlQWRkcmVzcyhldmVudDogSlF1ZXJ5RXZlbnRPYmplY3QpOiBRLlByb21pc2U8dm9pZD4ge1xyXG5cclxuICAgICAgICAgICAgbGV0IGVsZW1lbnQgPSAkKGV2ZW50LnRhcmdldCk7XHJcbiAgICAgICAgICAgIHZhciAkYWRkcmVzc0xpc3RJdGVtID0gZWxlbWVudC5jbG9zZXN0KCdbZGF0YS1hZGRyZXNzLWlkXScpO1xyXG4gICAgICAgICAgICB2YXIgYWRkcmVzc0lkID0gJGFkZHJlc3NMaXN0SXRlbS5kYXRhKCdhZGRyZXNzLWlkJyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgYnVzeSA9IHRoaXMuYXN5bmNCdXN5KHtlbGVtZW50Q29udGV4dDogZWxlbWVudCwgY29udGFpbmVyQ29udGV4dDogJGFkZHJlc3NMaXN0SXRlbSB9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmN1c3RvbWVyU2VydmljZS5kZWxldGVBZGRyZXNzKGFkZHJlc3NJZCwgJycpXHJcbiAgICAgICAgICAgICAgICAudGhlbihyZXN1bHQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaChNeUFjY291bnRFdmVudHNbTXlBY2NvdW50RXZlbnRzLkFkZHJlc3NEZWxldGVkXSwgeyBkYXRhOiBhZGRyZXNzSWQgfSk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmZhaWwoKCkgPT4gdGhpcy5yZW5kZXJGYWlsZWRGb3JtKE15QWNjb3VudFN0YXR1c1tNeUFjY291bnRTdGF0dXMuQWpheEZhaWxlZF0pKVxyXG4gICAgICAgICAgICAgICAgLmZpbigoKSA9PiBidXN5LmRvbmUoKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAgcHVibGljIGRlbGV0ZUFkZHJlc3NDb25maXJtKGFjdGlvbkNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCkge1xyXG4gICAgICAgICAgICAgdGhpcy51aU1vZGFsLm9wZW5Nb2RhbChhY3Rpb25Db250ZXh0LmV2ZW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgb25BZGRyZXNzRGVsZXRlZChlOiBJRXZlbnRJbmZvcm1hdGlvbikge1xyXG4gICAgICAgICAgICB2YXIgYWRkcmVzc0lkID0gZS5kYXRhO1xyXG4gICAgICAgICAgICB2YXIgJGFkZHJlc3NMaXN0SXRlbSA9ICQodGhpcy5jb250ZXh0LmNvbnRhaW5lcikuZmluZCgnW2RhdGEtYWRkcmVzcy1pZD0nICsgYWRkcmVzc0lkICsgJ10nKTtcclxuXHJcbiAgICAgICAgICAgICRhZGRyZXNzTGlzdEl0ZW0ucmVtb3ZlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHVzZVNoaXBwaW5nQWRkcmVzcygpIDogQm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHZhciB1c2VTaGlwcGluZ0FkZHJlc3MgPSAkKHRoaXMuY29udGV4dC5jb250YWluZXIpLmZpbmQoJ2lucHV0W25hbWU9VXNlU2hpcHBpbmdBZGRyZXNzXTpjaGVja2VkJykudmFsKCkgPT09ICd0cnVlJztcclxuICAgICAgICAgICAgcmV0dXJuIHVzZVNoaXBwaW5nQWRkcmVzcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgZ2V0VmlzaWJsZUZvcm1zKCk6IEpRdWVyeSB7XHJcbiAgICAgICAgICAgIHZhciB2aXNpYmxlRm9ybXMgPSAkKCdmb3JtJywgdGhpcy5jb250ZXh0LmNvbnRhaW5lcikubm90KCdmb3JtOmhhcyguaGlkZSknKTtcclxuICAgICAgICAgICAgcmV0dXJuIHZpc2libGVGb3JtcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBjaGFuZ2VVc2VTaGlwcGluZ0FkZHJlc3MoKSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNldEJpbGxpbmdBZGRyZXNzRm9ybVZpc2liaWxpdHkoKTtcclxuICAgICAgICAgICAgdGhpcy5zZXRCaWxsaW5nQWRkcmVzc0Zvcm1WYWxpZGF0aW9uKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U2VsZWN0ZWRCaWxsaW5nQWRkcmVzcygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzZXRCaWxsaW5nQWRkcmVzc0Zvcm1WaXNpYmlsaXR5KCkge1xyXG5cclxuICAgICAgICAgICAgdmFyIHVzZVNoaXBwaW5nQWRkcmVzczogQm9vbGVhbiA9IHRoaXMudXNlU2hpcHBpbmdBZGRyZXNzKCk7XHJcbiAgICAgICAgICAgIGlmICh1c2VTaGlwcGluZ0FkZHJlc3MpIHtcclxuICAgICAgICAgICAgICAgICQoJyNCaWxsaW5nQWRkcmVzc0NvbnRlbnQnKS5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJCgnI0JpbGxpbmdBZGRyZXNzQ29udGVudCcpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc2V0QmlsbGluZ0FkZHJlc3NGb3JtVmFsaWRhdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciB1c2VTaGlwcGluZ0FkZHJlc3M6IEJvb2xlYW4gPSB0aGlzLnVzZVNoaXBwaW5nQWRkcmVzcygpO1xyXG4gICAgICAgICAgICB2YXIgaXNWYWxpZGF0aW9uRW5hYmxlZDogQm9vbGVhbiA9IHRoaXMuaXNCaWxsaW5nQWRkcmVzc0Zvcm1WYWxpZGF0aW9uRW5hYmxlZCgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHVzZVNoaXBwaW5nQWRkcmVzcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzVmFsaWRhdGlvbkVuYWJsZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc2FibGVCaWxsaW5nQWRkcmVzc0Zvcm1WYWxpZGF0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWlzVmFsaWRhdGlvbkVuYWJsZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVuYWJsZUJpbGxpbmdBZGRyZXNzRm9ybVZhbGlkYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBpc0JpbGxpbmdBZGRyZXNzRm9ybVZhbGlkYXRpb25FbmFibGVkKCkgOiBCb29sZWFuIHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBfLnNvbWUodGhpcy5mb3JtSW5zdGFuY2VzLCAoZm9ybUluc3RhbmNlIDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pc0JpbGxpbmdBZGRyZXNzRm9ybUluc3RhbmNlKGZvcm1JbnN0YW5jZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBkaXNhYmxlQmlsbGluZ0FkZHJlc3NGb3JtVmFsaWRhdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBmb3JtSW5zdGFuY2UgPSBfLmZpbmQodGhpcy5mb3JtSW5zdGFuY2VzLCAoZm9ybUluc3RhbmNlIDogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5pc0JpbGxpbmdBZGRyZXNzRm9ybUluc3RhbmNlKGZvcm1JbnN0YW5jZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgZm9ybUluc3RhbmNlLmRlc3Ryb3koKTtcclxuXHJcbiAgICAgICAgICAgIF8ucmVtb3ZlKHRoaXMuZm9ybUluc3RhbmNlcywgKGZvcm1JbnN0YW5jZSA6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuaXNCaWxsaW5nQWRkcmVzc0Zvcm1JbnN0YW5jZShmb3JtSW5zdGFuY2UpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgaXNCaWxsaW5nQWRkcmVzc0Zvcm1JbnN0YW5jZShmb3JtSW5zdGFuY2UgOiBhbnkpIDogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHZhciBpc0JpbGxpbmdBZGRyZXNzRm9ybUluc3RhbmNlID0gZm9ybUluc3RhbmNlLiRlbGVtZW50LmlzKCdmb3JtI0JpbGxpbmdBZGRyZXNzUmVnaXN0ZXJlZCcpO1xyXG4gICAgICAgICAgICByZXR1cm4gaXNCaWxsaW5nQWRkcmVzc0Zvcm1JbnN0YW5jZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgZW5hYmxlQmlsbGluZ0FkZHJlc3NGb3JtVmFsaWRhdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZm9ybUluc3RhbmNlcyA9IHRoaXMuZm9ybUluc3RhbmNlcy5jb25jYXQodGhpcy5yZWdpc3RlckZvcm1zRm9yVmFsaWRhdGlvbigkKCdmb3JtI0JpbGxpbmdBZGRyZXNzUmVnaXN0ZXJlZCcpKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHJlbmRlckZhaWxlZEZvcm0oc3RhdHVzOiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgLy9UT0RPXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgaGFuZGxlRXJyb3IocmVhc29uIDogYW55KSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goJ2NhcnRVcGRhdGluZ0ZhaWxlZCcsIG51bGwpO1xyXG5cclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignVGhlIHVzZXIgY2hhbmdlZCB0aGUgYmlsbGluZyBhZGRyZXNzLCBidXQgYW4gZXJyb3Igb2NjdXJlZCB3aGVuIHVwZGF0aW5nIHRoZSBwcmVmZXJyZWQgYmlsbGluZyBhZGRyZXNzJywgcmVhc29uKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9DaGVja291dENvbW1vbi9zb3VyY2UvVHlwZXNjcmlwdC9CYXNlQ2hlY2tvdXRDb250cm9sbGVyLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIENoZWNrb3V0TmF2aWdhdGlvbkNvbnRyb2xsZXIgZXh0ZW5kcyBPcmNrZXN0cmEuQ29tcG9zZXIuQ29udHJvbGxlciB7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBjdXJyZW50U3RlcDogYW55ID0gbnVsbDtcclxuICAgICAgICBwcm90ZWN0ZWQgdmlld01vZGVsTmFtZTogc3RyaW5nO1xyXG4gICAgICAgIHByb3RlY3RlZCBjaGVja291dFNlcnZpY2U6IElDaGVja291dFNlcnZpY2U7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKCkge1xyXG5cclxuICAgICAgICAgICAgdGhpcy52aWV3TW9kZWxOYW1lID0gJ2NoZWNrb3V0TmF2aWdhdGlvbic7XHJcblxyXG4gICAgICAgICAgICBzdXBlci5pbml0aWFsaXplKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNoZWNrb3V0U2VydmljZSA9IENoZWNrb3V0U2VydmljZS5nZXRJbnN0YW5jZSgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jdXJyZW50U3RlcCA9IF8uZmluZFdoZXJlKHRoaXMuY29udGV4dC52aWV3TW9kZWwuU3RlcHMsIHsgSXNBY3RpdmU6IHRydWUgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnJlbmRlckRhdGEoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyByZW5kZXJEYXRhKCk6IFEuUHJvbWlzZTx2b2lkPiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gUS5mY2FsbCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goJ2NoZWNrb3V0U3RlcFJlbmRlcmVkJyxcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0ZXBOdW1iZXI6IHRoaXMuY3VycmVudFN0ZXAuU3RlcE51bWJlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIENhcnQ6IHRoaXMuY2hlY2tvdXRTZXJ2aWNlLmdldENhcnQoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJtb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNpZ25hdHVyZSBmb3IgZXJyb3IgaGFuZGxlciBvZiB0aGUgY2hlY2tvdXQgZ2V0IGNhcnQgcHJvbWlzZS5cclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJQ2hlY2tvdXRHZXRDYXJ0UHJvbWlzZUZhaWx1cmVIYW5kbGVyIHtcclxuICAgICAgICAoZXJyb3I6IGFueSk6IHZvaWQ7XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuL0lDaGVja291dEdldENhcnRQcm9taXNlRmFpbHVyZUhhbmRsZXIudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICAvKipcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0YXJnZXRlZFN0ZXAgVGhlIGN1cnJlbnQgY2hlY2tvdXQgc3RlcC5cclxuICAgICAqIEBwYXJhbSB7SUNoZWNrb3V0R2V0Q2FydFByb21pc2VGYWlsdXJlSGFuZGxlcn0gZmFpbHVyZUhhbmRsZXIgSGFuZGxlcyBmYWlsdXJlIG9mIHRoZSBBSkFYIHJlcXVlc3QuIFRoaXMgaGFuZGxlciB3aWxsIG9ubHlcclxuICAgICAqIEBwYXJhbSB7Ym9vbGVhbn0gZm9yY2VHZXQgSWYgdHJ1ZSwgZm9yY2VzIHRoZSBnZXQgb2YgYSBuZXcgcHJvbWlzZSBpbnN0ZWFkIG9mIHRoZSBjYWNoZWQgb25lLlxyXG4gICAgICogICAgICAgICAgICAgICAgICAgICAgICAgIGJlIGNhbGxlZCBpZiB0aGlzIGlzIHRoZSBmaXJzdCBjYWxsLlxyXG4gICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElDaGVja291dEdldENhcnRQcm9taXNlUGFyYW0ge1xyXG4gICAgICAgIHRhcmdldGVkU3RlcDogbnVtYmVyO1xyXG4gICAgICAgIGZvcmNlR2V0PzogYm9vbGVhbjtcclxuICAgIH1cclxufVxyXG4iLCJtb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSUdldFBheW1lbnRNZXRob2RzT3B0aW9ucyB7XHJcbiAgICAgICAgUHJvdmlkZXJzOiBzdHJpbmdbXTtcclxuICAgIH1cclxufVxyXG4iLCJtb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElVcGRhdGVQYXltZW50T3B0aW9ucyB7XHJcbiAgICAgICAgUGF5bWVudElkOiBzdHJpbmc7XHJcbiAgICAgICAgUGF5bWVudFByb3ZpZGVyTmFtZTogc3RyaW5nO1xyXG4gICAgICAgIFBheW1lbnRNZXRob2RJZDogc3RyaW5nO1xyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvTXZjL0NvbXBvc2VyQ2xpZW50LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0V2ZW50cy9JRXZlbnRIdWIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ2hlY2tvdXRDb21tb24vc291cmNlL1R5cGVzY3JpcHQvSVVwZGF0ZVBheW1lbnRPcHRpb25zLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vSUdldFBheW1lbnRNZXRob2RzT3B0aW9ucycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBQYXltZW50UHJvdmlkZXIge1xyXG4gICAgICAgIHByb3RlY3RlZCB3aW5kb3c6IFdpbmRvdztcclxuICAgICAgICBwcm90ZWN0ZWQgZXZlbnRIdWI6IElFdmVudEh1YjtcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIF9jdXJyZW50UGF5bWVudE1ldGhvZDogSVVwZGF0ZVBheW1lbnRPcHRpb25zO1xyXG5cclxuICAgICAgICBwdWJsaWMgZ2V0Q3VycmVudFBheW1lbnRNZXRob2QoKTogSVVwZGF0ZVBheW1lbnRPcHRpb25zIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2N1cnJlbnRQYXltZW50TWV0aG9kO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3RydWN0b3Iod2luZG93OiBXaW5kb3csIGV2ZW50SHViOiBJRXZlbnRIdWIpIHtcclxuICAgICAgICAgICAgdGhpcy53aW5kb3cgPSB3aW5kb3c7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIgPSBldmVudEh1YjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICogUmV0dXJuIGEgUHJvbWlzZSB3aGljaCByZXR1cm5zIGFuIGFycmF5IG9mIFBheW1lbnQgTWV0aG9kcy5cclxuICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBnZXRQYXltZW50TWV0aG9kcyhnZXRQYXltZW50TWV0aG9kT3B0aW9uczogSUdldFBheW1lbnRNZXRob2RzT3B0aW9ucyk6IFEuUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICAgICAgcmV0dXJuIENvbXBvc2VyQ2xpZW50LnBvc3QoJy9hcGkvcGF5bWVudC9wYXltZW50bWV0aG9kcycsIGdldFBheW1lbnRNZXRob2RPcHRpb25zKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB1cGRhdGVQYXltZW50TWV0aG9kKHJlcXVlc3Q6IElVcGRhdGVQYXltZW50T3B0aW9ucyk6IFEuUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICAgICAgcmV0dXJuIENvbXBvc2VyQ2xpZW50LnB1dCgnL2FwaS9wYXltZW50L3BheW1lbnRtZXRob2QnLCByZXF1ZXN0KVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKHBheWxvYWQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9jdXJyZW50UGF5bWVudE1ldGhvZCA9IHJlcXVlc3Q7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwYXlsb2FkO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuQ2FydC5VSS9DaGVja291dENvbW1vbi9Tb3VyY2UvVHlwZVNjcmlwdC9CYXNlQ2hlY2tvdXRDb250cm9sbGVyLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIENoZWNrb3V0Q29tcGxldGVDb250cm9sbGVyIGV4dGVuZHMgT3Jja2VzdHJhLkNvbXBvc2VyLkJhc2VDaGVja291dENvbnRyb2xsZXIge1xyXG5cclxuICAgICAgICBwdWJsaWMgaW5pdGlhbGl6ZSgpIHtcclxuXHJcbiAgICAgICAgICAgIHN1cGVyLmluaXRpYWxpemUoKTtcclxuICAgICAgICAgICAgdGhpcy52aWV3TW9kZWxOYW1lID0gJ0NvbXBsZXRlQ2hlY2tvdXQnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHJlbmRlckRhdGEoY2hlY2tvdXRDb250ZXh0OiBJQ2hlY2tvdXRDb250ZXh0KTogUS5Qcm9taXNlPHZvaWQ+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBRKHRoaXMucmVuZGVyKCdDaGVja291dENvbXBsZXRlJywgY2hlY2tvdXRDb250ZXh0LmNhcnRWaWV3TW9kZWwpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9DaGVja291dENvbW1vbi9zb3VyY2UvVHlwZXNjcmlwdC9CYXNlQ2hlY2tvdXRDb250cm9sbGVyLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIEd1ZXN0Q3VzdG9tZXJJbmZvQ2hlY2tvdXRDb250cm9sbGVyIGV4dGVuZHMgT3Jja2VzdHJhLkNvbXBvc2VyLkJhc2VDaGVja291dENvbnRyb2xsZXIge1xyXG5cclxuICAgICAgICBwdWJsaWMgaW5pdGlhbGl6ZSgpIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMudmlld01vZGVsTmFtZSA9ICdHdWVzdEN1c3RvbWVySW5mbyc7XHJcblxyXG4gICAgICAgICAgICBzdXBlci5pbml0aWFsaXplKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgcmVuZGVyRGF0YShjaGVja291dENvbnRleHQ6IElDaGVja291dENvbnRleHQpOiBRLlByb21pc2U8dm9pZD4ge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFEuZmNhbGwoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNoZWNrb3V0Q29udGV4dC5hdXRoZW50aWNhdGlvblZpZXdNb2RlbC5Jc0F1dGhlbnRpY2F0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckF1dGhlbnRpY2F0ZWQoY2hlY2tvdXRDb250ZXh0KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJVbmF1dGhlbnRpY2F0ZWQoY2hlY2tvdXRDb250ZXh0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgcmVuZGVyQXV0aGVudGljYXRlZChjaGVja291dENvbnRleHQ6IElDaGVja291dENvbnRleHQpIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMudW5yZWdpc3RlckNvbnRyb2xsZXIoKTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXIodGhpcy52aWV3TW9kZWxOYW1lLCBjaGVja291dENvbnRleHQuYXV0aGVudGljYXRpb25WaWV3TW9kZWwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHJlbmRlclVuYXV0aGVudGljYXRlZChjaGVja291dENvbnRleHQ6IElDaGVja291dENvbnRleHQpIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJTdWJzY3JpcHRpb25zKCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKHRoaXMudmlld01vZGVsTmFtZSwgY2hlY2tvdXRDb250ZXh0LmNhcnRWaWV3TW9kZWwpO1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goYCR7dGhpcy52aWV3TW9kZWxOYW1lfVJlbmRlcmVkYCwgbnVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ2hlY2tvdXRDb21tb24vc291cmNlL1R5cGVzY3JpcHQvQmFzZUNoZWNrb3V0Q29udHJvbGxlci50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuZXhwb3J0IGNsYXNzIENoZWNrb3V0T3JkZXJDb25maXJtYXRpb25Db250cm9sbGVyIGV4dGVuZHMgT3Jja2VzdHJhLkNvbXBvc2VyLkNvbnRyb2xsZXIge1xyXG5cclxuICAgICAgICBwcml2YXRlIGNhY2hlUHJvdmlkZXI6IElDYWNoZVByb3ZpZGVyO1xyXG4gICAgICAgIHByaXZhdGUgb3JkZXJDb25maXJtYXRpb25DYWNoZUtleSA9ICdvcmRlckNvbmZpcm1hdGlvbkNhY2hlS2V5JztcclxuICAgICAgICBwcml2YXRlIG9yZGVyQ2FjaGVLZXkgPSAnb3JkZXJDYWNoZUtleSc7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKCkge1xyXG5cclxuICAgICAgICAgICAgc3VwZXIuaW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLmNhY2hlUHJvdmlkZXIgPSBDYWNoZVByb3ZpZGVyLmluc3RhbmNlKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNhY2hlUHJvdmlkZXIuZGVmYXVsdENhY2hlLmdldDxhbnk+KHRoaXMub3JkZXJDYWNoZUtleSlcclxuICAgICAgICAgICAgICAgIC50aGVuKChyZXN1bHQ6IElDb21wbGV0ZUNoZWNrb3V0UmVzdWx0KSA9PiB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaCgnQ2hlY2tvdXRDb25maXJtYXRpb24nLCB7IGRhdGE6IHJlc3VsdCB9KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNhY2hlUHJvdmlkZXIuZGVmYXVsdENhY2hlLmNsZWFyKHRoaXMub3JkZXJDYWNoZUtleSkuZG9uZSgpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5mYWlsKChyZWFzb246IGFueSkgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdVbmFibGUgdG8gcmV0cmlldmUgb3JkZXIgbnVtYmVyIGZyb20gY2FjaGUsIGF0dGVtcHQgdG8gcmVkaXJlY3QuJyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY2FjaGVQcm92aWRlci5kZWZhdWx0Q2FjaGUuZ2V0PGFueT4odGhpcy5vcmRlckNvbmZpcm1hdGlvbkNhY2hlS2V5KVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKHJlc3VsdDogSUNvbXBsZXRlQ2hlY2tvdXRSZXN1bHQpID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG9yZGVyQ29uZmlybWF0aW9udmlld01vZGVsID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgIE9yZGVyTnVtYmVyOiByZXN1bHQuT3JkZXJOdW1iZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgQ3VzdG9tZXJFbWFpbDogcmVzdWx0LkN1c3RvbWVyRW1haWxcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAob3JkZXJDb25maXJtYXRpb252aWV3TW9kZWwgIT09IHVuZGVmaW5lZCkge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIoJ0NoZWNrb3V0T3JkZXJDb25maXJtYXRpb24nLCBvcmRlckNvbmZpcm1hdGlvbnZpZXdNb2RlbCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goJ2NoZWNrb3V0U3RlcFJlbmRlcmVkJywge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHsgU3RlcE51bWJlcjogdGhpcy5jb250ZXh0LnZpZXdNb2RlbC5DdXJyZW50U3RlcCB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdPcmRlciB3YXMgcGxhY2VkIGJ1dCBpdCBpcyBub3QgcG9zc2libGUgdG8gcmV0cmlldmUgb3JkZXIgbnVtYmVyIGZyb20gY2FjaGUuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5mYWlsKChyZWFzb246IGFueSkgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdVbmFibGUgdG8gcmV0cmlldmUgb3JkZXIgbnVtYmVyIGZyb20gY2FjaGUsIGF0dGVtcHQgdG8gcmVkaXJlY3QuJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciByZWRpcmVjdFVybDogc3RyaW5nID0gdGhpcy5jb250ZXh0LnZpZXdNb2RlbC5SZWRpcmVjdFVybDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlZGlyZWN0VXJsKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHJlZGlyZWN0VXJsO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdSZWRpcmVjdCB1cmwgd2FzIG5vdCBkZXRlY3RlZC4nKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9DaGVja291dENvbW1vbi9zb3VyY2UvVHlwZXNjcmlwdC9CYXNlQ2hlY2tvdXRDb250cm9sbGVyLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIENoZWNrb3V0T3JkZXJTdW1tYXJ5Q29udHJvbGxlciBleHRlbmRzIE9yY2tlc3RyYS5Db21wb3Nlci5CYXNlQ2hlY2tvdXRDb250cm9sbGVyIHtcclxuXHJcbiAgICAgICAgcHVibGljIGluaXRpYWxpemUoKSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnZpZXdNb2RlbE5hbWUgPSAnQ2hlY2tvdXRPcmRlclN1bW1hcnknO1xyXG5cclxuICAgICAgICAgICAgc3VwZXIuaW5pdGlhbGl6ZSgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5yZWdpc3RlclN1YnNjcmlwdGlvbnMoKTtcclxuXHJcbiAgICAgICAgICAgIENoZWNrb3V0U2VydmljZS5jaGVja291dFN0ZXAgPSB0aGlzLmNvbnRleHQudmlld01vZGVsLkN1cnJlbnRTdGVwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHJlZ2lzdGVyU3Vic2NyaXB0aW9ucygpIHtcclxuXHJcbiAgICAgICAgICAgIHN1cGVyLnJlZ2lzdGVyU3Vic2NyaXB0aW9ucygpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGhhbmRsZTogbnVtYmVyO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5zdWJzY3JpYmUoJ2NhcnRVcGRhdGluZycsICgpID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoaGFuZGxlKTtcclxuICAgICAgICAgICAgICAgIGhhbmRsZSA9IHNldFRpbWVvdXQoKCkgPT4gdGhpcy5yZW5kZXJMb2FkaW5nKCksIDMwMCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5zdWJzY3JpYmUoJ2NhcnRVcGRhdGluZ0ZhaWxlZCcsICgpID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoaGFuZGxlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVSZW5kZXIoKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnN1YnNjcmliZSgnY2FydFVwZGF0ZWQnLCBlID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoaGFuZGxlKTtcclxuICAgICAgICAgICAgICAgIGUuZGF0YS5Mb2FkQ2hlY2tvdXRPcmRlclN1bW1hcnkgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIodGhpcy52aWV3TW9kZWxOYW1lLCBlLmRhdGEpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyByZW5kZXJEYXRhKGNoZWNrb3V0Q29udGV4dDogSUNoZWNrb3V0Q29udGV4dCk6IFEuUHJvbWlzZTx2b2lkPiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gUS5mY2FsbCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjaGVja291dENvbnRleHQuY2FydFZpZXdNb2RlbC5Mb2FkQ2hlY2tvdXRPcmRlclN1bW1hcnkgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIodGhpcy52aWV3TW9kZWxOYW1lLCBjaGVja291dENvbnRleHQuY2FydFZpZXdNb2RlbCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSByZVJlbmRlcigpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyTG9hZGluZygpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jaGVja291dFNlcnZpY2UuZ2V0Q2FydCgpXHJcbiAgICAgICAgICAgICAgICAudGhlbihjYXJ0Vm0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhcnRWbS5Mb2FkQ2hlY2tvdXRPcmRlclN1bW1hcnkgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKHRoaXMudmlld01vZGVsTmFtZSwgY2FydFZtKTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuZmFpbCgocmVhc29uOiBhbnkpID0+IHRoaXMub25SZW5kZXJEYXRhRmFpbGVkKHJlYXNvbikpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSByZW5kZXJMb2FkaW5nKCk6IHZvaWQge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyKHRoaXMudmlld01vZGVsTmFtZSwgeyBMb2FkQ2hlY2tvdXRPcmRlclN1bW1hcnk6IHRydWUsIEdldHRpbmdDYXJ0OiB0cnVlIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogIFVwZGF0ZSB0aGUgY2FydC5cclxuICAgICAgICAgKiAgSWYgZXJyb3JzIGFyZSByZXR1cm5lZCwgaXQgc3RheSBpbiB0aGUgc2FtZSBwYWdlLlxyXG4gICAgICAgICAqICBJZiB0aGVyZSBpcyBubyBlcnJvcnMgaXQgbW92ZXMgdG8gdGhlIG5leHQgc3RlcC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgbmV4dFN0ZXAoYWN0aW9uQ29udGV4dDogSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0KSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgYnVzeTogVUlCdXN5SGFuZGxlID0gdGhpcy5hc3luY0J1c3koe2VsZW1lbnRDb250ZXh0OiBhY3Rpb25Db250ZXh0LmVsZW1lbnRDb250ZXh0fSk7XHJcblxyXG4gICAgICAgICAgICBFcnJvckhhbmRsZXIuaW5zdGFuY2UoKS5yZW1vdmVFcnJvcnMoKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tvdXRTZXJ2aWNlLnVwZGF0ZUNhcnQoKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4ocmVzdWx0ID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5IYXNFcnJvcnMgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gcmVzdWx0Lk5leHRTdGVwVXJsO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHdoaWxlIHVwZGF0aW5nIHRoZSBjYXJ0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1c3kuZG9uZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuZmFpbChyZWFzb24gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIG9uIGNoZWNrb3V0IHN1Ym1pdC4nLCByZWFzb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIEVycm9ySGFuZGxlci5pbnN0YW5jZSgpLm91dHB1dEVycm9yRnJvbUNvZGUoJ0NoZWNrb3V0TmV4dFN0ZXBGYWlsZWQnKTtcclxuICAgICAgICAgICAgICAgICAgICBidXN5LmRvbmUoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NoZWNrb3V0Q29tbW9uL3NvdXJjZS9UeXBlc2NyaXB0L0Jhc2VDaGVja291dENvbnRyb2xsZXIudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgQ29tcGxldGVDaGVja291dE9yZGVyU3VtbWFyeUNvbnRyb2xsZXIgZXh0ZW5kcyBPcmNrZXN0cmEuQ29tcG9zZXIuQmFzZUNoZWNrb3V0Q29udHJvbGxlciB7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKCkge1xyXG4gICAgICAgICAgICBzdXBlci5pbml0aWFsaXplKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnZpZXdNb2RlbE5hbWUgPSAnQ29tcGxldGVDaGVja291dE9yZGVyU3VtbWFyeSc7XHJcblxyXG4gICAgICAgICAgICBDaGVja291dFNlcnZpY2UuY2hlY2tvdXRTdGVwID0gdGhpcy5jb250ZXh0LnZpZXdNb2RlbC5DdXJyZW50U3RlcDtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJTdWJzY3JpcHRpb25zKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgcmVuZGVyRGF0YShjaGVja291dENvbnRleHQ6IElDaGVja291dENvbnRleHQpOiBRLlByb21pc2U8dm9pZD4ge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFEodGhpcy5yZW5kZXIodGhpcy52aWV3TW9kZWxOYW1lLCBjaGVja291dENvbnRleHQuY2FydFZpZXdNb2RlbCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgKiAgY29tcGxldGUgQ2hlY2tvdXRcclxuICAgICAgICAqICBJZiBlcnJvcnMgYXJlIHJldHVybmVkLCBpdCBzdGF5cyBpbiB0aGUgc2FtZSBwYWdlLlxyXG4gICAgICAgICogIElmIHRoZXJlIGlzIG5vIGVycm9ycyBpdCBtb3ZlcyB0byB0aGUgbmV4dCBzdGVwLlxyXG4gICAgICAgICovXHJcbiAgICAgICAgcHVibGljIG5leHRTdGVwKGFjdGlvbkNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCkge1xyXG5cclxuICAgICAgICAgICAgdmFyIGJ1c3k6IFVJQnVzeUhhbmRsZSA9IHRoaXMuYXN5bmNCdXN5KCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNoZWNrb3V0U2VydmljZS5jb21wbGV0ZUNoZWNrb3V0KClcclxuICAgICAgICAgICAgICAgIC50aGVuKChyZXN1bHQ6IElDb21wbGV0ZUNoZWNrb3V0UmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF8uaXNFbXB0eShyZXN1bHQuT3JkZXJOdW1iZXIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdXZSBjb3VsZCBub3QgY29tcGxldGUgdGhlIG9yZGVyIGJlY2F1c2UgdGhlIG9yZGVyIG51bWJlciBpcyBlbXB0eScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiByZXN1bHRcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaCgnY2hlY2tvdXRDb21wbGV0ZWQnLCB7IGRhdGE6IHJlc3VsdCB9KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrb3V0U2VydmljZS5zZXRPcmRlclRvQ2FjaGUocmVzdWx0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAudGhlbigocmVzdWx0OiBJQ29tcGxldGVDaGVja291dFJlc3VsdCkgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB2YXIgb3JkZXJDb25maXJtYXRpb252aWV3TW9kZWwgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIE9yZGVyTnVtYmVyOiByZXN1bHQuT3JkZXJOdW1iZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEN1c3RvbWVyRW1haWw6IHJlc3VsdC5DdXN0b21lckVtYWlsXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmNoZWNrb3V0U2VydmljZS5zZXRPcmRlckNvbmZpcm1hdGlvblRvQ2FjaGUob3JkZXJDb25maXJtYXRpb252aWV3TW9kZWwpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0Lk5leHRTdGVwVXJsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gcmVzdWx0Lk5leHRTdGVwVXJsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuZmFpbChyZWFzb24gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0FuIGVycm9yIG9jY3VycmVkIHdoaWxlIGNvbXBsZXRpbmcgdGhlIGNoZWNrb3V0LicsIHJlYXNvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgRXJyb3JIYW5kbGVyLmluc3RhbmNlKCkub3V0cHV0RXJyb3JGcm9tQ29kZSgnQ29tcGxldGVDaGVja291dEZhaWxlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1c3kuZG9uZSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgcmVnaXN0ZXJTdWJzY3JpcHRpb25zKCkge1xyXG5cclxuICAgICAgICAgICAgc3VwZXIucmVnaXN0ZXJTdWJzY3JpcHRpb25zKCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgaGFuZGxlOiBudW1iZXI7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnN1YnNjcmliZSgnY2FydFVwZGF0aW5nJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KGhhbmRsZSk7XHJcbiAgICAgICAgICAgICAgICBoYW5kbGUgPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMucmVuZGVyTG9hZGluZygpLCAzMDApO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIuc3Vic2NyaWJlKCdjYXJ0VXBkYXRpbmdGYWlsZWQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoaGFuZGxlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVSZW5kZXIoKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnN1YnNjcmliZSgnY2FydFVwZGF0ZWQnLCBlID0+IHtcclxuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChoYW5kbGUpO1xyXG4gICAgICAgICAgICAgICAgZS5kYXRhLkdldHRpbmdDYXJ0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcih0aGlzLnZpZXdNb2RlbE5hbWUsIGUuZGF0YSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSByZW5kZXJMb2FkaW5nKCk6IHZvaWQge1xyXG4gICAgICAgICAgICBjb25zdCBsb2FkaW5nVmlld01vZGVsID0geyBHZXR0aW5nQ2FydDogdHJ1ZSB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyKHRoaXMudmlld01vZGVsTmFtZSwgbG9hZGluZ1ZpZXdNb2RlbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHJlUmVuZGVyKCk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlckxvYWRpbmcoKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY2hlY2tvdXRTZXJ2aWNlXHJcbiAgICAgICAgICAgICAgICAuZ2V0Q2FydCgpXHJcbiAgICAgICAgICAgICAgICAudGhlbihjYXJ0Vm0gPT4gdGhpcy5yZW5kZXIodGhpcy52aWV3TW9kZWxOYW1lLCBjYXJ0Vm0pKVxyXG4gICAgICAgICAgICAgICAgLmZhaWwoKHJlYXNvbjogYW55KSA9PiB0aGlzLm9uUmVuZGVyRGF0YUZhaWxlZChyZWFzb24pKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJUGF5bWVudFNlcnZpY2Uge1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZXR1cm4gYSBsaXN0IG9mIHNhdmVkIHBheW1lbnQgbWV0aG9kcyBmb3IgYSBzcGVjaWZpZWQgYXJyYXkgb2YgcGF5bWVudCBwcm92aWRlciBuYW1lc1xyXG4gICAgICAgICAqIEBwYXJhbSAge3Byb3ZpZGVyczogQXJyYXk8c3RyaW5nPn0gICAgICAgQXJyYXkgb2YgcHJvdmlkZXIgbmFtZXMuXHJcbiAgICAgICAgICogQHJldHVybiB7QXJyYXk8SVBheW1lbnRNZXRob2RWaWV3TW9kZWw+fSBJbnN0YW5jZSBvZiB0aGUgcHJvdmlkZXIuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZ2V0UGF5bWVudE1ldGhvZHMocHJvdmlkZXJzOiBBcnJheTxzdHJpbmc+KSA6IFEuUHJvbWlzZTxJUGF5bWVudFZpZXdNb2RlbD47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJldHVybiB0aGUgYWN0aXZlIHBheW1lbnQgZm9yIHRoZSBhY3RpdmUgY2FydFxyXG4gICAgICAgICAqIEByZXR1cm4ge0lBY3RpdmVQYXltZW50Vmlld01vZGVsfSBBY3RpdmUgcGF5bWVudCBmb3IgdGhlIGFjdGl2ZSBjYXJ0LlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldEFjdGl2ZVBheW1lbnQoKSA6IFEuUHJvbWlzZTxJQWN0aXZlUGF5bWVudFZpZXdNb2RlbD47XHJcblxyXG4gICAgICAgIHJlbW92ZVBheW1lbnRNZXRob2QocGF5bWVudE1ldGhvZElkOiBzdHJpbmcsIHBheW1lbnRQcm92aWRlck5hbWU6IHN0cmluZyk6IFEuUHJvbWlzZTx2b2lkPjtcclxuXHJcbiAgICAgICAgc2V0UGF5bWVudE1ldGhvZChyZXF1ZXN0IDogYW55KSA6IFEuUHJvbWlzZTxJUGF5bWVudFZpZXdNb2RlbD47XHJcbiAgICB9XHJcbn1cclxuIiwibW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElBY3RpdmVQYXltZW50Vmlld01vZGVsIHtcclxuICAgICAgICBJZDogc3RyaW5nO1xyXG4gICAgICAgIFBheW1lbnRNZXRob2RUeXBlOiBzdHJpbmc7XHJcbiAgICAgICAgU2hvdWxkQ2FwdHVyZVBheW1lbnQ6IGJvb2xlYW47XHJcbiAgICAgICAgQ2FwdHVyZVBheW1lbnRVcmw6IHN0cmluZztcclxuICAgICAgICBQYXltZW50U3RhdHVzOiBzdHJpbmc7XHJcbiAgICAgICAgUHJvdmlkZXJUeXBlOiBzdHJpbmc7XHJcbiAgICAgICAgUHJvdmlkZXJOYW1lOiBzdHJpbmc7XHJcbiAgICAgICAgQ2FuU2F2ZVBheW1lbnRNZXRob2Q6IGJvb2xlYW47XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9TeXN0ZW0vSURpc3Bvc2FibGUudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vVmlld01vZGVscy9JQWN0aXZlUGF5bWVudFZpZXdNb2RlbC50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBCYXNlQ2hlY2tvdXRQYXltZW50UHJvdmlkZXIgaW1wbGVtZW50cyBPcmNrZXN0cmEuQ29tcG9zZXIuSURpc3Bvc2FibGUge1xyXG4gICAgICAgIHByb3RlY3RlZCBfcHJvdmlkZXJUeXBlOiBzdHJpbmc7XHJcbiAgICAgICAgcHJvdGVjdGVkIF9wcm92aWRlck5hbWU6IHN0cmluZztcclxuICAgICAgICBwcm90ZWN0ZWQgX2V2ZW50SHViOiBJRXZlbnRIdWI7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFRoaXMgcHJvcGVydHkgaXMgaW5qZWN0ZWQgZm9yIHVuaXQgdGVzdCBwdXJwb3Nlc1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgX3dpbmRvdzogV2luZG93O1xyXG5cclxuICAgICAgICBjb25zdHJ1Y3Rvcih3aW5kb3c6IFdpbmRvdywgZXZlbnRIdWI6IElFdmVudEh1YiwgcHJvdmlkZXJUeXBlOiBzdHJpbmcsIHByb3ZpZGVyTmFtZTogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Byb3ZpZGVyVHlwZSA9IHByb3ZpZGVyVHlwZTtcclxuICAgICAgICAgICAgdGhpcy5fcHJvdmlkZXJOYW1lID0gcHJvdmlkZXJOYW1lO1xyXG4gICAgICAgICAgICB0aGlzLl93aW5kb3cgPSB3aW5kb3c7XHJcbiAgICAgICAgICAgIHRoaXMuX2V2ZW50SHViID0gZXZlbnRIdWI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBPYnRhaW5zIHRoZSB1bmRlcmx5aW5nIHR5cGUgb2YgdGhlIFBheW1lbnQgUHJvdmlkZXIuXHJcbiAgICAgICAgICogQHJldHVybiB7c3RyaW5nfSBUeXBlIG9mIHRoZSBQYXltZW50IFByb3ZpZGVyLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBnZXQgcHJvdmlkZXJUeXBlKCk6IHN0cmluZyB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9wcm92aWRlclR5cGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBPYnRhaW5zIHRoZSBuYW1lIG9mIHRoZSBQYXltZW50IFByb3ZpZGVyLlxyXG4gICAgICAgICAqIEByZXR1cm4ge3N0cmluZ30gTmFtZSBvZiB0aGUgUGF5bWVudCBwcm92aWRlci5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgZ2V0IHByb3ZpZGVyTmFtZSgpOiBzdHJpbmcge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fcHJvdmlkZXJOYW1lO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGdldCB3aW5kb3coKTogV2luZG93IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3dpbmRvdztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIE1ldGhvZCBjYWxsZWQgdG8gZ2V0IGEgcHJvbWlzZSBmb3IgcGF5bWVudCB2YWxpZGF0aW9uLlxyXG4gICAgICAgICAqIFJldHVybnMgYSBwcm9taXNlIG9mIGJvb2xlYW4uIFRoZSByZXR1cm4gYm9vbGVhbiBuZWVkcyB0byBiZSBmYWxzZSBmb3IgdmFsaWRhdGlvbiBlcnJvcixcclxuICAgICAgICAgKiBvciB0cnVlIGlmIHZhbGlkLlxyXG4gICAgICAgICAqIEByZXR1cm4ge1EuUHJvbWlzZTxib29sZWFuPn0gUHJvbWlzZSB0aGF0IHdpbGwgYmUgZXhlY3V0ZWQgd2hlbiB3ZSB2YWxpZGF0ZSB0aGUgcGF5bWVudCBjb250cm9sLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyB2YWxpZGF0ZVBheW1lbnQoYWN0aXZlUGF5bWVudFZNOiBJQWN0aXZlUGF5bWVudFZpZXdNb2RlbCk6IFEuUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhpcyBQYXltZW50IFByb3ZpZGVyIGRvZXMgbm90IGltcGxlbWVudCB0aGUgXCJ2YWxpZGF0ZVBheW1lbnRcIiBtZXRob2QuJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBNZXRob2QgY2FsbGVkIHRvIGdldCBhIHByb21pc2Ugd2hlbiBwYXltZW50IHdpbGwgc3VibWl0LlxyXG4gICAgICAgICAqIEByZXR1cm4ge1EuUHJvbWlzZTxhbnk+fSBQcm9taXNlIHRoYXQgd2lsbCBiZSBleGVjdXRlZCB3aGVuIHRvIGNhcnQgaXMgYWJvdXQgdGhlIGJlIHVwZGF0ZWQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN1Ym1pdFBheW1lbnQoYWN0aXZlUGF5bWVudFZNOiBJQWN0aXZlUGF5bWVudFZpZXdNb2RlbCk6IFEuUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGlzIFBheW1lbnQgUHJvdmlkZXIgZG9lcyBub3QgaW1wbGVtZW50IHRoZSBcInN1Ym1pdFBheW1lbnRcIiBtZXRob2QuJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXRzIHRoZSBjb250YWluZXIgZm9yIHRoZSBQYXltZW50IFByb3ZpZGVyLlxyXG4gICAgICAgICAqIEByZXR1cm4ge0pRdWVyeX0galF1ZXJ5IG9iamVjdC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwcm90ZWN0ZWQgZ2V0Rm9ybSgpOiBKUXVlcnkge1xyXG4gICAgICAgICAgICB2YXIgZm9ybSA9ICQoJyNQYXltZW50Rm9ybScpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFmb3JtIHx8IF8uaXNFbXB0eShmb3JtKSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb3VsZCBub3QgZmluZCB0aGUgZWxlbWVudCBQYXltZW50Rm9ybSBvbiB0aGlzIHBhZ2UuJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmb3JtO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGRpc3Bvc2UoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIC8vTm90aGluZyB0byBkbyBoZXJlLlxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJtb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElQYXltZW50TWV0aG9kVmlld01vZGVsIHtcclxuICAgICAgICBJZDogc3RyaW5nO1xyXG4gICAgICAgIFBheW1lbnRQcm92aWRlck5hbWU6IHN0cmluZztcclxuICAgICAgICBEaXNwbGF5TmFtZTogc3RyaW5nO1xyXG4gICAgICAgIElzU2VsZWN0ZWQ6IGJvb2xlYW47XHJcbiAgICAgICAgSnNvbkNvbnRleHQ6IGFueTtcclxuICAgICAgICBQYXltZW50VHlwZTogc3RyaW5nO1xyXG4gICAgICAgIERlZmF1bHQ6IGJvb2xlYW47XHJcbiAgICAgICAgSXNWYWxpZDogYm9vbGVhbjtcclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uL1ZpZXdNb2RlbHMvSVBheW1lbnRNZXRob2RWaWV3TW9kZWwudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSVBheW1lbnRSZXBvc2l0b3J5IHtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmV0dXJuIGEgbGlzdCBvZiBzYXZlZCBwYXltZW50IG1ldGhvZHMgZm9yIGEgc3BlY2lmaWVkIGFycmF5IG9mIHBheW1lbnQgcHJvdmlkZXIgbmFtZXNcclxuICAgICAgICAgKiBAcGFyYW0gIHtwcm92aWRlcnM6IEFycmF5PHN0cmluZz59ICAgICAgIEFycmF5IG9mIHByb3ZpZGVyIG5hbWVzLlxyXG4gICAgICAgICAqIEByZXR1cm4ge0FycmF5PElQYXltZW50TWV0aG9kVmlld01vZGVsPn0gSW5zdGFuY2Ugb2YgdGhlIHByb3ZpZGVyLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGdldFBheW1lbnRNZXRob2RzKHByb3ZpZGVyczogQXJyYXk8c3RyaW5nPikgOiBRLlByb21pc2U8SVBheW1lbnRWaWV3TW9kZWw+O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZXR1cm4gdGhlIGFjdGl2ZSBwYXltZW50IGZvciB0aGUgYWN0aXZlIGNhcnRcclxuICAgICAgICAgKiBAcmV0dXJuIHtJQWN0aXZlUGF5bWVudFZpZXdNb2RlbH0gQWN0aXZlIHBheW1lbnQgZm9yIHRoZSBhY3RpdmUgY2FydC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXRBY3RpdmVQYXltZW50KCkgOiBRLlByb21pc2U8SUFjdGl2ZVBheW1lbnRWaWV3TW9kZWw+O1xyXG5cclxuICAgICAgICByZW1vdmVQYXltZW50TWV0aG9kKHBheW1lbnRNZXRob2RJZDogc3RyaW5nLCBwYXltZW50UHJvdmlkZXJOYW1lOiBzdHJpbmcpOiBRLlByb21pc2U8dm9pZD47XHJcblxyXG4gICAgICAgIHNldFBheW1lbnRNZXRob2QocmVxdWVzdCA6IGFueSkgOiBRLlByb21pc2U8SVBheW1lbnRWaWV3TW9kZWw+O1xyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvTXZjL0NvbXBvc2VyQ2xpZW50LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0V2ZW50cy9FdmVudEh1Yi50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi9Qcm92aWRlcnMvQmFzZUNoZWNrb3V0UGF5bWVudFByb3ZpZGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uL1JlcG9zaXRvcmllcy9JUGF5bWVudFJlcG9zaXRvcnkudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9JUGF5bWVudFNlcnZpY2UudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgUGF5bWVudFNlcnZpY2UgaW1wbGVtZW50cyBJUGF5bWVudFNlcnZpY2Uge1xyXG4gICAgICAgIHByaXZhdGUgZXZlbnRIdWI6IElFdmVudEh1YjtcclxuICAgICAgICBwcml2YXRlIHBheW1lbnRSZXBvc2l0b3J5OiBJUGF5bWVudFJlcG9zaXRvcnk7XHJcblxyXG4gICAgICAgIGNvbnN0cnVjdG9yKGV2ZW50SHViIDogSUV2ZW50SHViLCBwYXltZW50UmVwb3NpdG9yeTogSVBheW1lbnRSZXBvc2l0b3J5KSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIgPSBldmVudEh1YjtcclxuICAgICAgICAgICAgdGhpcy5wYXltZW50UmVwb3NpdG9yeSA9IHBheW1lbnRSZXBvc2l0b3J5O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmV0dXJuIGEgbGlzdCBvZiBhY2NlcHRhYmxlIHBheW1lbnQgcHJvdmlkZXJzIGRldGFpbHMgd2l0aCBsYWJlbHNcclxuICAgICAgICAgKiBAcGFyYW0gIHtwcm92aWRlcnM6IEFycmF5PHN0cmluZz59ICAgICAgQXJyYXkgb2YgcHJvdmlkZXIgbmFtZXMuXHJcbiAgICAgICAgICogQHJldHVybiB7QXJyYXk8SVBheW1lbnRNZXRob2RWaWV3TW9kZWx9IExpc3Qgb2YgcGF5bWVudCBwcm92aWRlciBkZXRhaWxzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGdldFBheW1lbnRNZXRob2RzKHByb3ZpZGVyczogQXJyYXk8c3RyaW5nPikgOiBRLlByb21pc2U8SVBheW1lbnRWaWV3TW9kZWw+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGF5bWVudFJlcG9zaXRvcnkuZ2V0UGF5bWVudE1ldGhvZHMocHJvdmlkZXJzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJldHVybiB0aGUgYWN0aXZlIHBheW1lbnQgZm9yIHRoZSBhY3RpdmUgY2FydFxyXG4gICAgICAgICAqIEByZXR1cm4ge0lBY3RpdmVQYXltZW50Vmlld01vZGVsfSBBY3RpdmUgcGF5bWVudCBmb3IgdGhlIGFjdGl2ZSBjYXJ0LlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBnZXRBY3RpdmVQYXltZW50KCkgOiBRLlByb21pc2U8SUFjdGl2ZVBheW1lbnRWaWV3TW9kZWw+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGF5bWVudFJlcG9zaXRvcnkuZ2V0QWN0aXZlUGF5bWVudCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHJlbW92ZVBheW1lbnRNZXRob2QocGF5bWVudE1ldGhvZElkOiBzdHJpbmcsIHBheW1lbnRQcm92aWRlck5hbWU6IHN0cmluZyk6IFEuUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBheW1lbnRSZXBvc2l0b3J5LnJlbW92ZVBheW1lbnRNZXRob2QocGF5bWVudE1ldGhvZElkLCBwYXltZW50UHJvdmlkZXJOYW1lKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzZXRQYXltZW50TWV0aG9kKHJlcXVlc3QgOiBhbnkpIDogUS5Qcm9taXNlPElQYXltZW50Vmlld01vZGVsPiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBheW1lbnRSZXBvc2l0b3J5LnNldFBheW1lbnRNZXRob2QocmVxdWVzdCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9JUGF5bWVudE1ldGhvZFZpZXdNb2RlbC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL0lBY3RpdmVQYXltZW50Vmlld01vZGVsLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJUGF5bWVudFZpZXdNb2RlbCB7XHJcbiAgICAgICAgUGF5bWVudElkOiBzdHJpbmc7XHJcbiAgICAgICAgUGF5bWVudE1ldGhvZHM6IEFycmF5PElQYXltZW50TWV0aG9kVmlld01vZGVsPjtcclxuICAgICAgICBVcG9uUmVjZXB0aW9uUGF5bWVudE1ldGhvZFZpZXdNb2RlbHM6IEFycmF5PElQYXltZW50TWV0aG9kVmlld01vZGVsPjtcclxuICAgICAgICBPbmxpbmVQYXltZW50TWV0aG9kVmlld01vZGVsczogQXJyYXk8SVBheW1lbnRNZXRob2RWaWV3TW9kZWw+O1xyXG4gICAgICAgIENyZWRpdENhcmRQYXltZW50TWV0aG9kOiBJUGF5bWVudE1ldGhvZFZpZXdNb2RlbDtcclxuICAgICAgICBTYXZlZENyZWRpdENhcmRzOiBBcnJheTxJUGF5bWVudE1ldGhvZFZpZXdNb2RlbD47XHJcbiAgICAgICAgSXNTYXZlZENyZWRpdENhcmRTZWxlY3RlZDogYm9vbGVhbjtcclxuICAgICAgICBJc0xvYWRpbmc6IGJvb2xlYW47XHJcbiAgICAgICAgSXNQcm92aWRlckxvYWRpbmc6IGJvb2xlYW47XHJcbiAgICAgICAgQWN0aXZlUGF5bWVudFZpZXdNb2RlbDogSUFjdGl2ZVBheW1lbnRWaWV3TW9kZWw7XHJcbiAgICB9XHJcbn1cclxuIiwibW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElQYXltZW50UHJvZmlsZUxpc3RJdGVtVmlld01vZGVsIHtcclxuICAgICAgICBTY29wZUlkOiBzdHJpbmc7XHJcblxyXG4gICAgICAgIFByb3ZpZGVyTmFtZTogc3RyaW5nO1xyXG5cclxuICAgICAgICBQYXltZW50UHJvZmlsZUlkOiBzdHJpbmc7XHJcblxyXG4gICAgICAgIEV4dGVybmFsSWRzOiBzdHJpbmc7XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPSdJUGF5bWVudFByb2ZpbGVMaXN0SXRlbVZpZXdNb2RlbC50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJUGF5bWVudFByb2ZpbGVMaXN0Vmlld01vZGVsIHtcclxuICAgICAgICBQYXltZW50UHJvZmlsZXM6IEFycmF5PElQYXltZW50UHJvZmlsZUxpc3RJdGVtVmlld01vZGVsPjtcclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L012Yy9Db21wb3NlckNsaWVudC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPVwiSVBheW1lbnRSZXBvc2l0b3J5LnRzXCIgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPVwiLi4vVmlld01vZGVscy9JUGF5bWVudFZpZXdNb2RlbC50c1wiIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD1cIi4uL1ZpZXdNb2RlbHMvSUFjdGl2ZVBheW1lbnRWaWV3TW9kZWwudHNcIiAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9XCIuLi9WaWV3TW9kZWxzL0lQYXltZW50UHJvZmlsZUxpc3RWaWV3TW9kZWwudHNcIiAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgY2xhc3MgUGF5bWVudFJlcG9zaXRvcnkgaW1wbGVtZW50cyBJUGF5bWVudFJlcG9zaXRvcnkge1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZXR1cm4gYSBsaXN0IG9mIHNhdmVkIHBheW1lbnQgbWV0aG9kcyBmb3IgYSBzcGVjaWZpZWQgYXJyYXkgb2YgcGF5bWVudCBwcm92aWRlciBuYW1lc1xyXG4gICAgICAgICAqIEBwYXJhbSAge3Byb3ZpZGVyczogQXJyYXk8c3RyaW5nPn0gICAgICAgQXJyYXkgb2YgcHJvdmlkZXIgbmFtZXMuXHJcbiAgICAgICAgICogQHJldHVybiB7QXJyYXk8SVBheW1lbnRNZXRob2RWaWV3TW9kZWw+fSBJbnN0YW5jZSBvZiB0aGUgcHJvdmlkZXIuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGdldFBheW1lbnRNZXRob2RzKHByb3ZpZGVyczogQXJyYXk8c3RyaW5nPik6IFEuUHJvbWlzZTxJUGF5bWVudFZpZXdNb2RlbD4ge1xyXG4gICAgICAgICAgICByZXR1cm4gPFEuUHJvbWlzZTxJUGF5bWVudFZpZXdNb2RlbD4+XHJcbiAgICAgICAgICAgICAgICBDb21wb3NlckNsaWVudC5wb3N0KCcvYXBpL3BheW1lbnQvcGF5bWVudG1ldGhvZHMnLCB7IFByb3ZpZGVycyA6IHByb3ZpZGVyc30pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmV0dXJuIHRoZSBhY3RpdmUgcGF5bWVudCBmb3IgdGhlIGFjdGl2ZSBjYXJ0XHJcbiAgICAgICAgICogQHJldHVybiB7SUFjdGl2ZVBheW1lbnRWaWV3TW9kZWx9IEFjdGl2ZSBwYXltZW50IGZvciB0aGUgYWN0aXZlIGNhcnQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGdldEFjdGl2ZVBheW1lbnQoKSA6IFEuUHJvbWlzZTxJQWN0aXZlUGF5bWVudFZpZXdNb2RlbD4ge1xyXG4gICAgICAgICAgICByZXR1cm4gPFEuUHJvbWlzZTxJQWN0aXZlUGF5bWVudFZpZXdNb2RlbD4+XHJcbiAgICAgICAgICAgICAgICBDb21wb3NlckNsaWVudC5nZXQoJy9hcGkvcGF5bWVudC9hY3RpdmVwYXltZW50Jyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgcmVtb3ZlUGF5bWVudE1ldGhvZChwYXltZW50TWV0aG9kSWQ6IHN0cmluZywgcGF5bWVudFByb3ZpZGVyTmFtZTogc3RyaW5nKTogUS5Qcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICAgICAgcmV0dXJuIDxRLlByb21pc2U8dm9pZD4+XHJcbiAgICAgICAgICAgICAgICBDb21wb3NlckNsaWVudC5yZW1vdmUoJy9hcGkvcGF5bWVudC9yZW1vdmVtZXRob2QnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBheW1lbnRNZXRob2RJZDogcGF5bWVudE1ldGhvZElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBheW1lbnRQcm92aWRlck5hbWU6IHBheW1lbnRQcm92aWRlck5hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHNldFBheW1lbnRNZXRob2QocmVxdWVzdCA6IGFueSkgOiBRLlByb21pc2U8SVBheW1lbnRWaWV3TW9kZWw+IHtcclxuICAgICAgICAgICAgcmV0dXJuIDxRLlByb21pc2U8SVBheW1lbnRWaWV3TW9kZWw+PlxyXG4gICAgICAgICAgICAgICAgQ29tcG9zZXJDbGllbnQucHV0KCcvYXBpL3BheW1lbnQvcGF5bWVudE1ldGhvZCcsIHJlcXVlc3QpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvRXZlbnRzL0lFdmVudEh1Yi50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi9CYXNlQ2hlY2tvdXRQYXltZW50UHJvdmlkZXIudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgQ2hlY2tvdXRQYXltZW50UHJvdmlkZXJGYWN0b3J5IHtcclxuICAgICAgICBwcml2YXRlIF9ldmVudEh1YjogSUV2ZW50SHViO1xyXG4gICAgICAgIHByaXZhdGUgX3dpbmRvdzogV2luZG93O1xyXG5cclxuICAgICAgICBwdWJsaWMgY29uc3RydWN0b3Iod2luZG93OiBXaW5kb3csIGV2ZW50SHViOiBJRXZlbnRIdWIpIHtcclxuICAgICAgICAgICAgdGhpcy5fZXZlbnRIdWIgPSBldmVudEh1YjtcclxuICAgICAgICAgICAgdGhpcy5fd2luZG93ID0gd2luZG93O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRGV0ZXJtaW5lcyBpZiB0aGUgQ2hlY2tvdXQgUGF5bWVudCBQcm92aWRlciBleGlzdHMgb3Igbm90LlxyXG4gICAgICAgICAqIEBwYXJhbSAge3N0cmluZ30gIHByb3ZpZGVyVHlwZSBUeXBlIG9mIHRoZSBwcm92aWRlci5cclxuICAgICAgICAgKiBAcmV0dXJuIHtib29sZWFufSAgICAgICAgICAgICAgVHJ1ZSBpZiB0aGUgcHJvdmlkZXIgZXhpc3RzIGluIHRoZSBPcmNrZXN0cmEuQ29tcG9zZXIgbmFtZXNwYWNlLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBoYXNQcm92aWRlcihwcm92aWRlclR5cGU6IHN0cmluZykgOiBib29sZWFuIHtcclxuICAgICAgICAgICAgaWYgKE9yY2tlc3RyYS5Db21wb3Nlcltwcm92aWRlclR5cGVdKSB7XHJcbiAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldHMgYW4gaW5zdGFuY2Ugb2YgYSBDaGVja291dCBQYXltZW50IHByb3ZpZGVyLiBJZiB0aGUgcHJvdmlkZXIgZG9lcyBub3QgZXhpc3RzLCB0aHJvd3MgYW5cclxuICAgICAgICAgKiBlcnJvci5cclxuICAgICAgICAgKiBAcGFyYW0gIHtzdHJpbmd9ICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyVHlwZSAgICAgICAgICAgICAgICAgIFR5cGUgb2YgdGhlIHByb3ZpZGVyLlxyXG4gICAgICAgICAqIEBwYXJhbSAge3N0cmluZ30gICAgICAgICAgICAgICAgICAgcHJvdmlkZXJOYW1lICAgICAgICAgICAgICAgICAgTmFtZSBvZiB0aGUgcHJvdmlkZXIuXHJcbiAgICAgICAgICogQHJldHVybiB7SUNoZWNrb3V0UGF5bWVudFByb3ZpZGVyfSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBJbnN0YW5jZSBvZiB0aGUgcHJvdmlkZXIuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGdldEluc3RhbmNlKHByb3ZpZGVyVHlwZTogc3RyaW5nLCBwcm92aWRlck5hbWU6IHN0cmluZylcclxuICAgICAgICAgICAgOiBCYXNlQ2hlY2tvdXRQYXltZW50UHJvdmlkZXIge1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuaGFzUHJvdmlkZXIocHJvdmlkZXJUeXBlKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIENsYXp6ID0gT3Jja2VzdHJhLkNvbXBvc2VyW3Byb3ZpZGVyVHlwZV07XHJcbiAgICAgICAgICAgICAgICB2YXIgaW5zdGFuY2UgPSBuZXcgQ2xhenoodGhpcy5fd2luZG93LCBwcm92aWRlck5hbWUsIHRoaXMuX2V2ZW50SHViKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpbnN0YW5jZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmFibGUgdG8gZmluZCBhIGNsYXNzIG5hbWVkIFwiJyArIHByb3ZpZGVyVHlwZSArICdcIi4nKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPSdTZXJ2aWNlcy9JUGF5bWVudFNlcnZpY2UudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nU2VydmljZXMvUGF5bWVudFNlcnZpY2UudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nUmVwb3NpdG9yaWVzL1BheW1lbnRSZXBvc2l0b3J5LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9J1Byb3ZpZGVycy9CYXNlQ2hlY2tvdXRQYXltZW50UHJvdmlkZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nUHJvdmlkZXJzL0NoZWNrb3V0UGF5bWVudFByb3ZpZGVyRmFjdG9yeS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPSdWaWV3TW9kZWxzL0lQYXltZW50Vmlld01vZGVsLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9J1ZpZXdNb2RlbHMvSUFjdGl2ZVBheW1lbnRWaWV3TW9kZWwudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0NvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvRXJyb3JIYW5kbGluZy9FcnJvckhhbmRsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuQ2FydC5VSS9DaGVja291dENvbW1vbi9Tb3VyY2UvVHlwZVNjcmlwdC9DaGVja291dFNlcnZpY2UudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuQ2FydC5VSS9DaGVja291dENvbW1vbi9Tb3VyY2UvVHlwZVNjcmlwdC9CYXNlQ2hlY2tvdXRDb250cm9sbGVyLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIENoZWNrb3V0UGF5bWVudENvbnRyb2xsZXIgZXh0ZW5kcyBPcmNrZXN0cmEuQ29tcG9zZXIuQmFzZUNoZWNrb3V0Q29udHJvbGxlciB7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBwYXltZW50UHJvdmlkZXJzOiBBcnJheTxCYXNlQ2hlY2tvdXRQYXltZW50UHJvdmlkZXI+O1xyXG4gICAgICAgIHByb3RlY3RlZCBhY3RpdmVQYXltZW50UHJvdmlkZXI6IEJhc2VDaGVja291dFBheW1lbnRQcm92aWRlcjtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogdGhpcyBwcmV2ZW50cyBjaGFuZ2luZyBwYXltZW50IG1ldGhvZCBtb3JlIHRoYW4gb25jZSBwZXIgY2xpY2tcclxuICAgICAgICAgKiB0aGlzIGhhcHBlbnMgd2hlbiBcIm5ldyBjcmVkaXQgY2FyZFwiIGlzIHNlbGVjdGVkIHNpbmNlIHdlIG5lZWQgdG9cclxuICAgICAgICAgKiBsaXN0ZW4gZm9yIGJvdGggY2xpY2sgYW5kIGNoYW5nZSBldmVudHMgdG8gaGFuZGxlIGJvdGggd2hlbiB3ZVxyXG4gICAgICAgICAqIGNoYW5nZSB0byBuZXcgY3JlZGl0IGNhcmQgb3Igd2hlbiBuZXcgQ0MgaXMgYWxyZWFkeSBzZWxlY3RlZCBhbmRcclxuICAgICAgICAgKiB3ZSB3YW50IHRvIGNvbWUgYmFjayB0byB0aGUgbmV3IENDIHNjcmVlblxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByb3RlY3RlZCBkZWJvdW5jZUNoYW5nZVBheW1lbnRNZXRob2QgPSBfLmRlYm91bmNlKHRoaXMuZXhlY3V0ZUNoYW5nZVBheW1lbnRNZXRob2QsIDMwMCk7XHJcblxyXG4gICAgICAgIC8qIFB1YmxpYyB0byBlbmFibGUgbW9ja2luZyBmb3IgVVQgKi9cclxuICAgICAgICBwdWJsaWMgcGF5bWVudFNlcnZpY2U6IElQYXltZW50U2VydmljZTtcclxuICAgICAgICBwcm90ZWN0ZWQgdmlld01vZGVsOiBJUGF5bWVudFZpZXdNb2RlbDtcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIF93aW5kb3c6IFdpbmRvdztcclxuICAgICAgICBwcm90ZWN0ZWQgX2J1c3lIYW5kbGVyOiBVSUJ1c3lIYW5kbGU7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKCkge1xyXG4gICAgICAgICAgICBzdXBlci5pbml0aWFsaXplKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl93aW5kb3cgPSB3aW5kb3c7XHJcbiAgICAgICAgICAgIHRoaXMudmlld01vZGVsTmFtZSA9ICdDaGVja291dFBheW1lbnQnO1xyXG4gICAgICAgICAgICB0aGlzLnBheW1lbnRTZXJ2aWNlID0gbmV3IFBheW1lbnRTZXJ2aWNlKHRoaXMuZXZlbnRIdWIsIG5ldyBQYXltZW50UmVwb3NpdG9yeSgpKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucGF5bWVudFByb3ZpZGVycyA9IHRoaXMuZ2V0UGF5bWVudFByb3ZpZGVycygpO1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnN1YnNjcmliZSgncGF5bWVudE1ldGhvZHNVcGRhdGVkJywgXyA9PiB0aGlzLnJlbmRlckRhdGEoKSk7XHJcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJTdWJzY3JpcHRpb25zKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc2VsZWN0Q3JlZGl0Q2FyZFBheW1lbnRNZXRob2QoKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnZpZXdNb2RlbC5DcmVkaXRDYXJkUGF5bWVudE1ldGhvZCkge1xyXG4gICAgICAgICAgICAgICAgLy8gSWYgYSBzYXZlZCBjcmVkaXQgY2FyZCBpcyBhdmFpbGFibGUgc2VsZWN0IHRoZSBmaXJzdCBvbmVcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnZpZXdNb2RlbC5TYXZlZENyZWRpdENhcmRzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBheVdpdGhTYXZlZENyZWRpdENhcmQoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wYXlXaXRoQ3JlZGl0Q2FyZCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL1RPRE8gaXMgaXQgdXNlZCA/XHJcbiAgICAgICAgcHVibGljIHBheVdpdGhTYXZlZENyZWRpdENhcmQoKSB7XHJcbiAgICAgICAgICAgIGxldCBwcm92aWRlciA9IF8uZmlyc3QodGhpcy52aWV3TW9kZWwuU2F2ZWRDcmVkaXRDYXJkcyk7XHJcbiAgICAgICAgICAgIHRoaXMuY2hhbmdlUGF5bWVudE1ldGhvZEludGVybmFsKHByb3ZpZGVyLklkLCBwcm92aWRlci5QYXltZW50UHJvdmlkZXJOYW1lKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vVE9ETyBpcyBpdCB1c2VkID9cclxuICAgICAgICBwdWJsaWMgcGF5V2l0aENyZWRpdENhcmQoKSB7XHJcbiAgICAgICAgICAgIGxldCBwcm92aWRlciA9IHRoaXMudmlld01vZGVsLkNyZWRpdENhcmRQYXltZW50TWV0aG9kO1xyXG4gICAgICAgICAgICB0aGlzLmNoYW5nZVBheW1lbnRNZXRob2RJbnRlcm5hbChwcm92aWRlci5JZCwgcHJvdmlkZXIuUGF5bWVudFByb3ZpZGVyTmFtZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgY2hhbmdlUGF5bWVudE1ldGhvZEludGVybmFsKGFjdGl2ZU1ldGhvZElkOiBzdHJpbmcsIHBheW1lbnRQcm92aWRlck5hbWU6IHN0cmluZywgcGF5bWVudFR5cGU/OiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy52aWV3TW9kZWwuSXNQcm92aWRlckxvYWRpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLl9idXN5SGFuZGxlciA9IHN1cGVyLmFzeW5jQnVzeSh7IGVsZW1lbnRDb250ZXh0OiAkKGRvY3VtZW50KSwgY29udGFpbmVyQ29udGV4dDogJChkb2N1bWVudCkgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmRlYm91bmNlQ2hhbmdlUGF5bWVudE1ldGhvZCh7IGFjdGl2ZU1ldGhvZElkLCBwYXltZW50UHJvdmlkZXJOYW1lLCBwYXltZW50VHlwZSB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBjaGFuZ2VQYXltZW50TWV0aG9kKGFjdGlvbkNvbnRleHQgOiBJQ29udHJvbGxlckFjdGlvbkNvbnRleHQpIHtcclxuICAgICAgICAgICAgdmFyIGFjdGl2ZU1ldGhvZElkIDogc3RyaW5nID0gYWN0aW9uQ29udGV4dC5lbGVtZW50Q29udGV4dC5kYXRhKCdwYXltZW50LWlkJyk7XHJcbiAgICAgICAgICAgIHZhciBwYXltZW50UHJvdmlkZXJOYW1lOiBzdHJpbmcgPSBhY3Rpb25Db250ZXh0LmVsZW1lbnRDb250ZXh0LmRhdGEoJ3BheW1lbnQtcHJvdmlkZXInKTtcclxuICAgICAgICAgICAgdmFyIHBheW1lbnRUeXBlOiBzdHJpbmcgPSBhY3Rpb25Db250ZXh0LmVsZW1lbnRDb250ZXh0LmRhdGEoJ3BheW1lbnQtdHlwZScpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jaGFuZ2VQYXltZW50TWV0aG9kSW50ZXJuYWwoYWN0aXZlTWV0aG9kSWQsIHBheW1lbnRQcm92aWRlck5hbWUsIHBheW1lbnRUeXBlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBleGVjdXRlQ2hhbmdlUGF5bWVudE1ldGhvZChhcmdzOiB7IGFjdGl2ZU1ldGhvZElkOiBzdHJpbmcsIHBheW1lbnRQcm92aWRlck5hbWU6IHN0cmluZywgcGF5bWVudFR5cGU6IHN0cmluZyB9KSB7XHJcbiAgICAgICAgICAgIGxldCB7IGFjdGl2ZU1ldGhvZElkLCBwYXltZW50UHJvdmlkZXJOYW1lLCBwYXltZW50VHlwZSB9ID0gYXJncztcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2V0UGF5bWVudE1ldGhvZCh0aGlzLnZpZXdNb2RlbC5QYXltZW50SWQsIGFjdGl2ZU1ldGhvZElkLCBwYXltZW50UHJvdmlkZXJOYW1lLCBwYXltZW50VHlwZSlcclxuICAgICAgICAgICAgICAgIC50aGVuKF8gPT4gdGhpcy5jaGVja291dFNlcnZpY2UuZ2V0Q2FydCgpKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oY2FydCA9PiB0aGlzLmV2ZW50SHViLnB1Ymxpc2goJ2NhcnRVcGRhdGVkJywgeyBkYXRhOiBjYXJ0IH0pKVxyXG4gICAgICAgICAgICAgICAgLmZpbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aWV3TW9kZWwuSXNQcm92aWRlckxvYWRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbGVhc2VCdXN5SGFuZGxlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyVmlldygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybUluc3RhbmNlcyA9IHRoaXMucmVnaXN0ZXJGb3Jtc0ZvclZhbGlkYXRpb24odGhpcy5jb250ZXh0LmNvbnRhaW5lci5maW5kKCdmb3JtJykpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgcmVuZGVyRGF0YSgpOiBRLlByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wYXltZW50U2VydmljZVxyXG4gICAgICAgICAgICAgICAgLmdldFBheW1lbnRNZXRob2RzKF8ubWFwKHRoaXMucGF5bWVudFByb3ZpZGVycywgcCA9PiBwLnByb3ZpZGVyTmFtZSkpXHJcbiAgICAgICAgICAgICAgICAudGhlbigodm06IElQYXltZW50Vmlld01vZGVsKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF2bSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIHZpZXdNb2RlbCByZWNlaXZlZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF8uaXNFbXB0eSh2bS5QYXltZW50TWV0aG9kcykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBwYXltZW50IG1ldGhvZCB3YXMgZm91bmQuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZXdNb2RlbCA9IHZtO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy52aWV3TW9kZWwuQWN0aXZlUGF5bWVudFZpZXdNb2RlbCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZVBheW1lbnRQcm92aWRlciA9IHRoaXMuZmluZFBheW1lbnRQcm92aWRlckJ5VHlwZSh2bS5BY3RpdmVQYXltZW50Vmlld01vZGVsLlByb3ZpZGVyVHlwZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy52aWV3TW9kZWw7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IGRlZmF1bHRQYXltZW50TWV0aG9kID0gdGhpcy5maW5kRGVmYXVsdFBheW1lbnRNZXRob2Qodm0uUGF5bWVudE1ldGhvZHMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gb25seSBzZXQgdGhlIHBheW1lbnQgbWV0aG9kIGlmIHdlIGZvdW5kIGFuIGFwcHJvcHJpYXRlIGRlZmF1bHQgcGF5bWVudCBtZXRob2RcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEhZGVmYXVsdFBheW1lbnRNZXRob2QpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElmIHdlIGRvbid0IGFscmVhZHkgaGF2ZSBhbiBhY3RpdmUgcGF5bWVudCBzZWxlY3RlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd2UgZm91bmQgYSBkZWZhdWx0UGF5bWVudE1ldGhvZCAoZWl0aGVyIHRoZSBkZWZhdWx0IG9yIHRoZSBvbmx5IG9uZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHRoZXJlIGlzIGFsd2F5cyBnb2luZyB0byBiZSBhdCBsZWFzdCBvbmUgKGRlZmF1bHQgcHJvdmlkZXIgKyBzYXZlZCBwYXltZW50IG1ldGhvZHMpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zZXRQYXltZW50TWV0aG9kKHZtLlBheW1lbnRJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRQYXltZW50TWV0aG9kLklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdFBheW1lbnRNZXRob2QuUGF5bWVudFByb3ZpZGVyTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRlZmF1bHRQYXltZW50TWV0aG9kLlBheW1lbnRUeXBlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAudGhlbigodm06IElQYXltZW50Vmlld01vZGVsKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJWaWV3KCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZm9ybUluc3RhbmNlcyA9IHRoaXMucmVnaXN0ZXJGb3Jtc0ZvclZhbGlkYXRpb24odGhpcy5jb250ZXh0LmNvbnRhaW5lci5maW5kKCdmb3JtJykpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5mYWlsKChyZWFzb24pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uSW5pdGlhbGl6ZVBheW1lbnRNZXRob2RGYWlsZWQocmVhc29uKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGdldFZhbGlkYXRpb25Qcm9taXNlKCkgOiBRLlByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuYWN0aXZlUGF5bWVudFByb3ZpZGVyIHx8ICF0aGlzLnZpZXdNb2RlbC5BY3RpdmVQYXltZW50Vmlld01vZGVsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUShmYWxzZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5pc1ZhbGlkRm9yVXBkYXRlKCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBRKGZhbHNlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWN0aXZlUGF5bWVudFByb3ZpZGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLnZhbGlkYXRlUGF5bWVudCh0aGlzLnZpZXdNb2RlbC5BY3RpdmVQYXltZW50Vmlld01vZGVsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBnZXRVcGRhdGVNb2RlbFByb21pc2UoKTogUS5Qcm9taXNlPGFueT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gUS5mY2FsbCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnQ29tbWl0dGluZyBwYXltZW50IGluZm9ybWF0aW9uLicpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmFjdGl2ZVBheW1lbnRQcm92aWRlci5zdWJtaXRQYXltZW50KHRoaXMudmlld01vZGVsLkFjdGl2ZVBheW1lbnRWaWV3TW9kZWwpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBkaXNwb3NlKCkge1xyXG4gICAgICAgICAgICBzdXBlci5kaXNwb3NlKCk7XHJcbiAgICAgICAgICAgIF8uZWFjaCh0aGlzLnBheW1lbnRQcm92aWRlcnMsIHAgPT4gcC5kaXNwb3NlKCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGZpbmREZWZhdWx0UGF5bWVudE1ldGhvZChwYXltZW50TWV0aG9kczogQXJyYXk8SVBheW1lbnRNZXRob2RWaWV3TW9kZWw+KTogSVBheW1lbnRNZXRob2RWaWV3TW9kZWwge1xyXG4gICAgICAgICAgICBsZXQgZGVmYXVsdFBheW1lbnRNZXRob2QgPSBfLmZpbmQocGF5bWVudE1ldGhvZHMsIChwYXltZW50TWV0aG9kKSA9PiBwYXltZW50TWV0aG9kLkRlZmF1bHQgJiYgcGF5bWVudE1ldGhvZC5Jc1ZhbGlkKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghIWRlZmF1bHRQYXltZW50TWV0aG9kKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZGVmYXVsdFBheW1lbnRNZXRob2Q7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gXy5maW5kKHBheW1lbnRNZXRob2RzLCAocGF5bWVudE1ldGhvZCkgPT4gcGF5bWVudE1ldGhvZC5Jc1ZhbGlkKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy9yZXR1cm4gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvbkluaXRpYWxpemVQYXltZW50TWV0aG9kRmFpbGVkKHJlYXNvbjogYW55KSB7XHJcbiAgICAgICAgICAgIHN1cGVyLnJlbW92ZUxvYWRpbmcoKTtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igd2hpbGUgcmV0cmlldmluZyBwYXltZW50IG1ldGhvZHMnLCByZWFzb24pO1xyXG5cclxuICAgICAgICAgICAgRXJyb3JIYW5kbGVyLmluc3RhbmNlKCkub3V0cHV0RXJyb3JGcm9tQ29kZSgnQ2hlY2tvdXRSZW5kZXJGYWlsZWQnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCByZW5kZXJWaWV3KCk6IHZvaWQge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5yZW5kZXIodGhpcy52aWV3TW9kZWxOYW1lLCB0aGlzLnZpZXdNb2RlbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgc2V0UGF5bWVudE1ldGhvZChcclxuICAgICAgICAgICAgcGF5bWVudElkOiBzdHJpbmcsXHJcbiAgICAgICAgICAgIGFjdGl2ZU1ldGhvZElkOiBzdHJpbmcsXHJcbiAgICAgICAgICAgIHBheW1lbnRQcm92aWRlck5hbWU6IHN0cmluZyxcclxuICAgICAgICAgICAgcGF5bWVudFR5cGU6IHN0cmluZyk6IFEuUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucGF5bWVudFNlcnZpY2Uuc2V0UGF5bWVudE1ldGhvZCh7XHJcbiAgICAgICAgICAgICAgICBQYXltZW50SWQ6IHBheW1lbnRJZCxcclxuICAgICAgICAgICAgICAgIFBheW1lbnRQcm92aWRlck5hbWU6IHBheW1lbnRQcm92aWRlck5hbWUsXHJcbiAgICAgICAgICAgICAgICBQYXltZW50TWV0aG9kSWQ6IGFjdGl2ZU1ldGhvZElkLFxyXG4gICAgICAgICAgICAgICAgUGF5bWVudFR5cGU6IHBheW1lbnRUeXBlLFxyXG4gICAgICAgICAgICAgICAgUHJvdmlkZXJzOiBfLm1hcCh0aGlzLnBheW1lbnRQcm92aWRlcnMsIHAgPT4gcC5wcm92aWRlck5hbWUpXHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC50aGVuKChwYXltZW50Vmlld01vZGVsOiBJUGF5bWVudFZpZXdNb2RlbCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVQYXltZW50UHJvdmlkZXIgPSB0aGlzLmZpbmRQYXltZW50UHJvdmlkZXJCeVR5cGUocGF5bWVudFZpZXdNb2RlbC5BY3RpdmVQYXltZW50Vmlld01vZGVsLlByb3ZpZGVyVHlwZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy52aWV3TW9kZWwgPSBwYXltZW50Vmlld01vZGVsO1xyXG5cclxuICAgICAgICAgICAgICAgIEVycm9ySGFuZGxlci5pbnN0YW5jZSgpLnJlbW92ZUVycm9ycygpO1xyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiBwYXltZW50Vmlld01vZGVsO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAuZmFpbChyZWFzb24gPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkNoYW5nZVBheW1lbnRNZXRob2RGYWlsZWQocmVhc29uKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb25DaGFuZ2VQYXltZW50TWV0aG9kRmFpbGVkKHJlYXNvbjogYW55KSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnZpZXdNb2RlbCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy52aWV3TW9kZWwuQWN0aXZlUGF5bWVudFZpZXdNb2RlbCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnZpZXdNb2RlbC5Jc0xvYWRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igd2hpbGUgY2hhbmdpbmcgdGhlIHBheW1lbnQgbWV0aG9kLicsIHJlYXNvbik7XHJcbiAgICAgICAgICAgIEVycm9ySGFuZGxlci5pbnN0YW5jZSgpLm91dHB1dEVycm9yRnJvbUNvZGUoJ1BheW1lbnRNZXRob2RDaGFuZ2VGYWlsZWQnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBmaW5kUGF5bWVudFByb3ZpZGVyQnlUeXBlKHByb3ZpZGVyVHlwZTogc3RyaW5nKSA6IEJhc2VDaGVja291dFBheW1lbnRQcm92aWRlciB7XHJcbiAgICAgICAgICAgIHZhciBwcm92aWRlciA6IEJhc2VDaGVja291dFBheW1lbnRQcm92aWRlciA9IF8uZmluZCh0aGlzLnBheW1lbnRQcm92aWRlcnMsIHByb3ZpZGVyID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwcm92aWRlci5wcm92aWRlclR5cGUgPT09IHByb3ZpZGVyVHlwZTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXByb3ZpZGVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuYWJsZSB0byByZXNvdmUgYW55IHBheW1lbnQgcHJvdmlkZXIgbmFtZWQgXCInICsgcHJvdmlkZXJUeXBlICsgJ1wiJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBwcm92aWRlcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBnZXRQYXltZW50UHJvdmlkZXJzKCkgOiBBcnJheTxCYXNlQ2hlY2tvdXRQYXltZW50UHJvdmlkZXI+IHtcclxuICAgICAgICAgICAgaWYgKF8uaXNFbXB0eSh0aGlzLmNvbnRleHQudmlld01vZGVsLlBheW1lbnRQcm92aWRlcnMpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdObyBwYXltZW50IHByb3ZpZGVyIHdhcyBmb3VuZCBpbiB0aGUgQ29udGV4dC4nKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGZhY3RvcnkgPSBuZXcgQ2hlY2tvdXRQYXltZW50UHJvdmlkZXJGYWN0b3J5KHRoaXMuX3dpbmRvdywgdGhpcy5ldmVudEh1Yik7XHJcbiAgICAgICAgICAgIHZhciBwcm92aWRlcnMgOiBBcnJheTxCYXNlQ2hlY2tvdXRQYXltZW50UHJvdmlkZXI+ID0gW107XHJcblxyXG4gICAgICAgICAgICBfLmVhY2godGhpcy5jb250ZXh0LnZpZXdNb2RlbC5QYXltZW50UHJvdmlkZXJzLCAodm06IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdmFyIHByb3ZpZGVyID0gZmFjdG9yeS5nZXRJbnN0YW5jZSh2bS5Qcm92aWRlclR5cGUsIHZtLlByb3ZpZGVyTmFtZSk7XHJcbiAgICAgICAgICAgICAgICBwcm92aWRlcnMucHVzaChwcm92aWRlcik7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHByb3ZpZGVycztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCByZWxlYXNlQnVzeUhhbmRsZXIoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9idXN5SGFuZGxlcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fYnVzeUhhbmRsZXIuZG9uZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fYnVzeUhhbmRsZXIgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvTXZjL0NvbXBvc2VyQ2xpZW50LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLk15QWNjb3VudC5VSS9Db21tb24vU291cmNlL1R5cGVzY3JpcHQvQ3VzdG9tZXJTZXJ2aWNlLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NoZWNrb3V0Q29tbW9uL1NvdXJjZS9UeXBlc2NyaXB0L0FkZHJlc3NEdG8udHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuICAgIGV4cG9ydCBjbGFzcyBTaGlwcGluZ0FkZHJlc3NSZWdpc3RlcmVkU2VydmljZSB7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBjdXN0b21lclNlcnZpY2U6IElDdXN0b21lclNlcnZpY2U7XHJcblxyXG4gICAgICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihjdXN0b21lclNlcnZpY2U6IElDdXN0b21lclNlcnZpY2UpIHtcclxuICAgICAgICAgICAgdGhpcy5jdXN0b21lclNlcnZpY2UgPSBjdXN0b21lclNlcnZpY2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAgIC8qKlxyXG4gICAgICAgICAqIEdldCB0aGUgY3VzdG9tZXIgYWRkcmVzc2VzLiBUaGUgc2VsZWN0ZWQgc2hpcHBpbmcgYWRkcmVzcyBpcyB0YWtlbiBmcm9tIHRoZSBjYXJ0IGJ5IGRlZmF1bHQuXHJcbiAgICAgICAgICogSWYgbm8gYWRkcmVzcyBoYXMgYmVlbiBzZXQgaW4gdGhlIGNhcnQsIHRoZSBzZWxlY3RlZCBzaGlwcGluZyBhZGRyZXNzIGNvcnJlc3BvbmRzIHRvIHRoZSBwcmVmZXJyZWQgYWRkcmVzcy5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgZ2V0U2hpcHBpbmdBZGRyZXNzZXMoY2FydDogYW55KTogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgaWYgKCFjYXJ0KSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBjYXJ0IGlzIHJlcXVpcmVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmN1c3RvbWVyU2VydmljZS5nZXRBZGRyZXNzZXMoKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oYWRkcmVzc2VzID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBhZGRyZXNzZXMuQWRkcmVzc2VzTG9hZGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhZGRyZXNzZXMuU2VsZWN0ZWRTaGlwcGluZ0FkZHJlc3NJZCA9IHRoaXMuZ2V0U2VsZWN0ZWRTaGlwcGluZ0FkZHJlc3NJZChjYXJ0LCBhZGRyZXNzZXMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gYWRkcmVzc2VzO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZ2V0U2VsZWN0ZWRTaGlwcGluZ0FkZHJlc3NJZChjYXJ0OiBhbnksIGFkZHJlc3NMaXN0OiBhbnkpIDogc3RyaW5nIHtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzU2hpcHBpbmdBZGRyZXNzRnJvbUNhcnRWYWxpZChjYXJ0LCBhZGRyZXNzTGlzdCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjYXJ0LlNoaXBwaW5nQWRkcmVzcy5BZGRyZXNzQm9va0lkO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRQcmVmZXJyZWRTaGlwcGluZ0FkZHJlc3NJZChhZGRyZXNzTGlzdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGlzU2hpcHBpbmdBZGRyZXNzRnJvbUNhcnRWYWxpZChjYXJ0OiBhbnksIGFkZHJlc3NMaXN0OiBhbnkpIDogYm9vbGVhbiB7XHJcblxyXG4gICAgICAgICAgICBpZiAoY2FydC5TaGlwcGluZ0FkZHJlc3MgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gXy5hbnkoYWRkcmVzc0xpc3QuQWRkcmVzc2VzLCAoYWRkcmVzczogQWRkcmVzc0R0bykgPT4gYWRkcmVzcy5JZCA9PT0gY2FydC5TaGlwcGluZ0FkZHJlc3MuQWRkcmVzc0Jvb2tJZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGdldFByZWZlcnJlZFNoaXBwaW5nQWRkcmVzc0lkKGFkZHJlc3NMaXN0OiBhbnkpIDogc3RyaW5nIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBwcmVmZXJyZWRTaGlwcGluZ0FkZHJlc3MgPSBfLmZpbmQoYWRkcmVzc0xpc3QuQWRkcmVzc2VzLCAoYWRkcmVzczogQWRkcmVzc0R0bykgPT4gYWRkcmVzcy5Jc1ByZWZlcnJlZFNoaXBwaW5nKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBwcmVmZXJyZWRTaGlwcGluZ0FkZHJlc3MgPT09IHVuZGVmaW5lZCA/IHVuZGVmaW5lZCA6IHByZWZlcnJlZFNoaXBwaW5nQWRkcmVzcy5JZDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9SZXBvc2l0b3JpZXMvQ3VzdG9tZXJSZXBvc2l0b3J5LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLk15QWNjb3VudC5VSS9Db21tb24vU291cmNlL1R5cGVzY3JpcHQvQ3VzdG9tZXJTZXJ2aWNlLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLk15QWNjb3VudC5VSS9Db21tb24vU291cmNlL1R5cGVzY3JpcHQvTXlBY2NvdW50RXZlbnRzLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLk15QWNjb3VudC5VSS9Db21tb24vU291cmNlL1R5cGVzY3JpcHQvTXlBY2NvdW50U3RhdHVzLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NoZWNrb3V0Q29tbW9uL3NvdXJjZS9UeXBlc2NyaXB0L0Jhc2VDaGVja291dENvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nU2hpcHBpbmdBZGRyZXNzUmVnaXN0ZXJlZFNlcnZpY2UudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvVUkvVUlNb2RhbC50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBTaGlwcGluZ0FkZHJlc3NSZWdpc3RlcmVkQ29udHJvbGxlciBleHRlbmRzIE9yY2tlc3RyYS5Db21wb3Nlci5CYXNlQ2hlY2tvdXRDb250cm9sbGVyIHtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSB1aU1vZGFsOiBVSU1vZGFsO1xyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgZGVib3VuY2VDaGFuZ2VTaGlwcGluZ01ldGhvZDogRnVuY3Rpb24gPSBfLmRlYm91bmNlKHRoaXMuY2hhbmdlU2hpcHBpbmdBZGRyZXNzSW1wbCwgNTAwLCB7ICdsZWFkaW5nJzogdHJ1ZSB9KTtcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGRlbGV0ZU1vZGFsRWxlbWVudFNlbGVjdG9yOiBzdHJpbmc7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBjdXN0b21lclNlcnZpY2U6IElDdXN0b21lclNlcnZpY2UgPSBuZXcgQ3VzdG9tZXJTZXJ2aWNlKG5ldyBDdXN0b21lclJlcG9zaXRvcnkoKSk7XHJcbiAgICAgICAgcHJvdGVjdGVkIHNoaXBwaW5nQWRkcmVzc1JlZ2lzdGVyZWRTZXJ2aWNlOiBTaGlwcGluZ0FkZHJlc3NSZWdpc3RlcmVkU2VydmljZSA9XHJcbiAgICAgICAgICAgIG5ldyBTaGlwcGluZ0FkZHJlc3NSZWdpc3RlcmVkU2VydmljZSh0aGlzLmN1c3RvbWVyU2VydmljZSk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKCkge1xyXG4gICAgICAgICAgICBzdXBlci5pbml0aWFsaXplKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnZpZXdNb2RlbE5hbWUgPSAnU2hpcHBpbmdBZGRyZXNzUmVnaXN0ZXJlZCc7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmRlbGV0ZU1vZGFsRWxlbWVudFNlbGVjdG9yID0gJyNjb25maXJtYXRpb25Nb2RhbCc7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnVpTW9kYWwgPSBuZXcgVUlNb2RhbCh3aW5kb3csIHRoaXMuZGVsZXRlTW9kYWxFbGVtZW50U2VsZWN0b3IsIHRoaXMuZGVsZXRlQWRkcmVzcywgdGhpcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgcmVnaXN0ZXJTdWJzY3JpcHRpb25zKCkge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5zdWJzY3JpYmUoYCR7dGhpcy52aWV3TW9kZWxOYW1lfVJlbmRlcmVkYCwgZSA9PiB0aGlzLm9uUmVuZGVyZWQoZSkpO1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnN1YnNjcmliZShNeUFjY291bnRFdmVudHNbTXlBY2NvdW50RXZlbnRzLkFkZHJlc3NEZWxldGVkXSwgZSA9PiB0aGlzLm9uQWRkcmVzc0RlbGV0ZWQoZSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHJlbmRlckRhdGEoY2hlY2tvdXRDb250ZXh0OiBJQ2hlY2tvdXRDb250ZXh0KTogUS5Qcm9taXNlPHZvaWQ+IHtcclxuXHJcbiAgICAgICAgICAgIGlmIChjaGVja291dENvbnRleHQuYXV0aGVudGljYXRpb25WaWV3TW9kZWwuSXNBdXRoZW50aWNhdGVkKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWdpc3RlclN1YnNjcmlwdGlvbnMoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKHRoaXMudmlld01vZGVsTmFtZSwge0lzQXV0aGVudGljYXRlZDogdHJ1ZSwgR2V0dGluZ0NhcnQ6IHRydWV9KTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5zaGlwcGluZ0FkZHJlc3NSZWdpc3RlcmVkU2VydmljZS5nZXRTaGlwcGluZ0FkZHJlc3NlcyhjaGVja291dENvbnRleHQuY2FydFZpZXdNb2RlbClcclxuICAgICAgICAgICAgICAgICAgICAudGhlbigoc2hpcHBpbmdBZHJlc3Nlc1ZtKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKHRoaXMudmlld01vZGVsTmFtZSwgY2hlY2tvdXRDb250ZXh0LmNhcnRWaWV3TW9kZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcignUmVnaXN0ZXJlZEFkZHJlc3NlcycsIHNoaXBwaW5nQWRyZXNzZXNWbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAuZmFpbChyZWFzb24gPT4gdGhpcy5oYW5kbGVFcnJvcihyZWFzb24pKVxyXG4gICAgICAgICAgICAgICAgICAgIC5maW4oKCkgPT4gdGhpcy5ldmVudEh1Yi5wdWJsaXNoKGAke3RoaXMudmlld01vZGVsTmFtZX1SZW5kZXJlZGAsIGNoZWNrb3V0Q29udGV4dC5jYXJ0Vmlld01vZGVsKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnVucmVnaXN0ZXJDb250cm9sbGVyKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcih0aGlzLnZpZXdNb2RlbE5hbWUsIGNoZWNrb3V0Q29udGV4dC5hdXRoZW50aWNhdGlvblZpZXdNb2RlbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgb25SZW5kZXJlZChlOiBJRXZlbnRJbmZvcm1hdGlvbikge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5mb3JtSW5zdGFuY2VzID0gdGhpcy5yZWdpc3RlckZvcm1zRm9yVmFsaWRhdGlvbigkKCcjUmVnaXN0ZXJlZFNoaXBwaW5nQWRkcmVzcycsIHRoaXMuY29udGV4dC5jb250YWluZXIpKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZFNoaXBwaW5nQWRkcmVzc0lkOiBzdHJpbmcgPSAkKHRoaXMuY29udGV4dC5jb250YWluZXIpLmZpbmQoJ2lucHV0W25hbWU9U2hpcHBpbmdBZGRyZXNzSWRdOmNoZWNrZWQnKS52YWwoKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghc2VsZWN0ZWRTaGlwcGluZ0FkZHJlc3NJZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNoZWNrb3V0U2VydmljZS5nZXRDYXJ0KClcclxuICAgICAgICAgICAgICAgIC5kb25lKGNhcnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzZWxlY3RlZFNoaXBwaW5nQWRkcmVzc0lkICE9PSBjYXJ0LlNoaXBwaW5nQWRkcmVzcy5BZGRyZXNzQm9va0lkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGVib3VuY2VDaGFuZ2VTaGlwcGluZ01ldGhvZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBvbkFkZHJlc3NEZWxldGVkKGU6IElFdmVudEluZm9ybWF0aW9uKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgYWRkcmVzc0lkID0gZS5kYXRhO1xyXG4gICAgICAgICAgICB2YXIgJGFkZHJlc3NMaXN0SXRlbSA9ICQodGhpcy5jb250ZXh0LmNvbnRhaW5lcikuZmluZCgnW2RhdGEtYWRkcmVzcy1pZD0nICsgYWRkcmVzc0lkICsgJ10nKTtcclxuXHJcbiAgICAgICAgICAgICRhZGRyZXNzTGlzdEl0ZW0ucmVtb3ZlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgY2hhbmdlU2hpcHBpbmdBZGRyZXNzKGFjdGlvbkNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCkge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5kZWJvdW5jZUNoYW5nZVNoaXBwaW5nTWV0aG9kKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGNoYW5nZVNoaXBwaW5nQWRkcmVzc0ltcGwoKSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goJ2NhcnRVcGRhdGluZycsIG51bGwpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jaGVja291dFNlcnZpY2UudXBkYXRlQ2FydCgpXHJcbiAgICAgICAgICAgICAgICAuZG9uZShyZXN1bHQgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0Lkhhc0Vycm9ycykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSB1cGRhdGVkIGNhcnQgY29udGFpbnMgZXJyb3JzJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goJ2NhcnRVcGRhdGVkJywgeyBkYXRhOiByZXN1bHQuQ2FydCB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICB9LCByZWFzb24gPT4gdGhpcy5oYW5kbGVFcnJvcihyZWFzb24pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBkZWxldGVBZGRyZXNzQ29uZmlybShhY3Rpb25Db250ZXh0OiBJQ29udHJvbGxlckFjdGlvbkNvbnRleHQpIHtcclxuICAgICAgICAgICAgdGhpcy51aU1vZGFsLm9wZW5Nb2RhbChhY3Rpb25Db250ZXh0LmV2ZW50KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgZGVsZXRlQWRkcmVzcyhldmVudDogSlF1ZXJ5RXZlbnRPYmplY3QpOiBRLlByb21pc2U8dm9pZD4ge1xyXG5cclxuICAgICAgICAgICAgbGV0IGVsZW1lbnQgPSAkKGV2ZW50LnRhcmdldCk7XHJcbiAgICAgICAgICAgIHZhciAkYWRkcmVzc0xpc3RJdGVtID0gZWxlbWVudC5jbG9zZXN0KCdbZGF0YS1hZGRyZXNzLWlkXScpO1xyXG4gICAgICAgICAgICB2YXIgYWRkcmVzc0lkID0gJGFkZHJlc3NMaXN0SXRlbS5kYXRhKCdhZGRyZXNzLWlkJyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgYnVzeSA9IHRoaXMuYXN5bmNCdXN5KHtlbGVtZW50Q29udGV4dDogZWxlbWVudCwgY29udGFpbmVyQ29udGV4dDogJGFkZHJlc3NMaXN0SXRlbSB9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmN1c3RvbWVyU2VydmljZS5kZWxldGVBZGRyZXNzKGFkZHJlc3NJZCwgJycpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4ocmVzdWx0ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKE15QWNjb3VudEV2ZW50c1tNeUFjY291bnRFdmVudHMuQWRkcmVzc0RlbGV0ZWRdLCB7IGRhdGE6IGFkZHJlc3NJZCB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5mYWlsKCgpID0+IHRoaXMucmVuZGVyRmFpbGVkRm9ybShNeUFjY291bnRTdGF0dXNbTXlBY2NvdW50U3RhdHVzLkFqYXhGYWlsZWRdKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAuZmluKCgpID0+IGJ1c3kuZG9uZSgpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgcmVuZGVyRmFpbGVkRm9ybShzdGF0dXM6IHN0cmluZykge1xyXG4gICAgICAgICAgICAvL1RPRE9cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgaGFuZGxlRXJyb3IocmVhc29uIDogYW55KSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goJ2NhcnRVcGRhdGluZ0ZhaWxlZCcsIG51bGwpO1xyXG5cclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignVGhlIHVzZXIgY2hhbmdlZCB0aGUgc2hpcHBpbmcgYWRkcmVzcywgYnV0IHdlIHdlcmUgdW5hYmxlIHRvIGVzdGltYXRlIHNoaXBwaW5nIGR5bmFtaWNhbGx5JywgcmVhc29uKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9FdmVudHMvSUV2ZW50SHViLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLkNhcnQuVUkvQ2FydFN1bW1hcnkvU291cmNlL1R5cGVzY3JpcHQvQ2FydFNlcnZpY2UudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgU2hpcHBpbmdBZGRyZXNzQ2hlY2tvdXRTZXJ2aWNlIHtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBjYXJ0U2VydmljZTogSUNhcnRTZXJ2aWNlO1xyXG4gICAgICAgIHByaXZhdGUgZXZlbnRIdWI6IElFdmVudEh1YjtcclxuXHJcbiAgICAgICAgY29uc3RydWN0b3IoY2FydFNlcnZpY2U6IElDYXJ0U2VydmljZSwgZXZlbnRIdWI6IElFdmVudEh1Yikge1xyXG5cclxuICAgICAgICAgICAgaWYgKCFjYXJ0U2VydmljZSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvcjogY2FydFNlcnZpY2UgaXMgcmVxdWlyZWQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIWV2ZW50SHViKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Vycm9yOiBldmVudEh1YiBpcyByZXF1aXJlZCcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNhcnRTZXJ2aWNlID0gY2FydFNlcnZpY2U7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIgPSBldmVudEh1YjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzZXRDaGVhcGVzdFNoaXBwaW5nTWV0aG9kVXNpbmcocG9zdGFsQ29kZTogc3RyaW5nKTogUS5Qcm9taXNlPHZvaWQ+IHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaCgnY2FydFVwZGF0aW5nJywgbnVsbCk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jYXJ0U2VydmljZS51cGRhdGVTaGlwcGluZ01ldGhvZFBvc3RhbENvZGUocG9zdGFsQ29kZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB0aGlzLmNhcnRTZXJ2aWNlLnNldENoZWFwZXN0U2hpcHBpbmdNZXRob2QoKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAudGhlbigoKSA9PiB0aGlzLmNhcnRTZXJ2aWNlLmdldENhcnQoKSlcclxuICAgICAgICAgICAgICAgICAgICAgICAudGhlbihjYXJ0ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKCdjYXJ0VXBkYXRlZCcsIHsgZGF0YTogY2FydCB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKCdwb3N0YWxDb2RlQ2hhbmdlZCcsIHsgZGF0YTogY2FydCB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5mYWlsKHJlYXNvbiA9PiB0aGlzLmhhbmRsZUVycm9yKHJlYXNvbikpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBoYW5kbGVFcnJvcihyZWFzb24gOiBhbnkpIHtcclxuXHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1RoZSB1c2VyIGNoYW5nZWQgdGhlIHBvc3RhbCBjb2RlLCAnICtcclxuICAgICAgICAgICAgICAgICdidXQgd2Ugd2VyZSB1bmFibGUgdG8gdXBkYXRlIHRoZSBjYXJ0IGR5bmFtaWNhbGx5IGFuZCBlc3RpbWF0ZSBzaGlwcGluZyBmZWVzJywgcmVhc29uKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaCgnY2FydFVwZGF0aW5nRmFpbGVkJywgbnVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ2hlY2tvdXRDb21tb24vc291cmNlL1R5cGVzY3JpcHQvQmFzZUNoZWNrb3V0Q29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9DYXJ0U3VtbWFyeS9Tb3VyY2UvVHlwZXNjcmlwdC9DYXJ0U2VydmljZS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPSdTaGlwcGluZ0FkZHJlc3NDaGVja291dFNlcnZpY2UudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIGV4cG9ydCBjbGFzcyBTaGlwcGluZ0FkZHJlc3NDaGVja291dENvbnRyb2xsZXIgZXh0ZW5kcyBPcmNrZXN0cmEuQ29tcG9zZXIuQmFzZUNoZWNrb3V0Q29udHJvbGxlciB7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBzaGlwcGluZ0FkZHJlc3NDaGVja291dFNlcnZpY2U6IFNoaXBwaW5nQWRkcmVzc0NoZWNrb3V0U2VydmljZSA9XHJcbiAgICAgICAgICAgIG5ldyBTaGlwcGluZ0FkZHJlc3NDaGVja291dFNlcnZpY2UobmV3IENhcnRTZXJ2aWNlKG5ldyBDYXJ0UmVwb3NpdG9yeSgpLCB0aGlzLmV2ZW50SHViKSwgdGhpcy5ldmVudEh1Yik7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKCkge1xyXG5cclxuICAgICAgICAgICAgdGhpcy52aWV3TW9kZWxOYW1lID0gJ1NoaXBwaW5nQWRkcmVzcyc7XHJcblxyXG4gICAgICAgICAgICBzdXBlci5pbml0aWFsaXplKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgcmVuZGVyRGF0YShjaGVja291dENvbnRleHQ6IElDaGVja291dENvbnRleHQpOiBRLlByb21pc2U8dm9pZD4ge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFEuZmNhbGwoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNoZWNrb3V0Q29udGV4dC5hdXRoZW50aWNhdGlvblZpZXdNb2RlbC5Jc0F1dGhlbnRpY2F0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnVucmVnaXN0ZXJDb250cm9sbGVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIodGhpcy52aWV3TW9kZWxOYW1lLCBjaGVja291dENvbnRleHQuYXV0aGVudGljYXRpb25WaWV3TW9kZWwpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZ2lzdGVyU3Vic2NyaXB0aW9ucygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKHRoaXMudmlld01vZGVsTmFtZSwgY2hlY2tvdXRDb250ZXh0LmNhcnRWaWV3TW9kZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKCdBZGRyZXNzUmVnaW9uUGlja2VyJywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBSZWdpb25zOiBjaGVja291dENvbnRleHQucmVnaW9uc1ZpZXdNb2RlbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgU2VsZWN0ZWRSZWdpb24gOiB0aGlzLmdldFJlZ2lvbkNvZGUoY2hlY2tvdXRDb250ZXh0LmNhcnRWaWV3TW9kZWwpXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaChgJHt0aGlzLnZpZXdNb2RlbE5hbWV9UmVuZGVyZWRgLCBjaGVja291dENvbnRleHQuY2FydFZpZXdNb2RlbCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXRSZWdpb25Db2RlKGNhcnQ6IGFueSk6IHN0cmluZyB7XHJcblxyXG4gICAgICAgICAgICBpZiAoY2FydC5TaGlwcGluZ0FkZHJlc3MgPT09IHVuZGVmaW5lZCB8fCBjYXJ0LlNoaXBwaW5nQWRkcmVzcy5SZWdpb25Db2RlID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGNhcnQuU2hpcHBpbmdBZGRyZXNzLlJlZ2lvbkNvZGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgY2hhbmdlUG9zdGFsQ29kZShhY3Rpb25Db250ZXh0OiBJQ29udHJvbGxlckFjdGlvbkNvbnRleHQpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBjb250ZXh0OiBKUXVlcnkgPSBhY3Rpb25Db250ZXh0LmVsZW1lbnRDb250ZXh0O1xyXG4gICAgICAgICAgICBjb250ZXh0LnZhbChjb250ZXh0LnZhbCgpLnRvVXBwZXJDYXNlKCkpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLmlzVmFsaWRGb3JVcGRhdGUoKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgcG9zdGFsQ29kZTogc3RyaW5nID0gY29udGV4dC52YWwoKTtcclxuICAgICAgICAgICAgdGhpcy5zaGlwcGluZ0FkZHJlc3NDaGVja291dFNlcnZpY2Uuc2V0Q2hlYXBlc3RTaGlwcGluZ01ldGhvZFVzaW5nKHBvc3RhbENvZGUpLmRvbmUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9DaGVja291dENvbW1vbi9zb3VyY2UvVHlwZXNjcmlwdC9CYXNlQ2hlY2tvdXRDb250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9J1NoaXBwaW5nTWV0aG9kU2VydmljZS50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgZXhwb3J0IGNsYXNzIFNoaXBwaW5nTWV0aG9kQ2hlY2tvdXRDb250cm9sbGVyIGV4dGVuZHMgT3Jja2VzdHJhLkNvbXBvc2VyLkJhc2VDaGVja291dENvbnRyb2xsZXIge1xyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgZGVib3VuY2VNZXRob2RTZWxlY3RlZDogRnVuY3Rpb24gPSBfLmRlYm91bmNlKHRoaXMubWV0aG9kU2VsZWN0ZWRJbXBsLCA1MDAsIHsgJ2xlYWRpbmcnOiB0cnVlIH0pO1xyXG5cclxuICAgICAgICBwdWJsaWMgaW5pdGlhbGl6ZSgpIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMudmlld01vZGVsTmFtZSA9ICdTaGlwcGluZ01ldGhvZCc7XHJcblxyXG4gICAgICAgICAgICBzdXBlci5pbml0aWFsaXplKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgcmVuZGVyRGF0YShjaGVja291dENvbnRleHQ6IElDaGVja291dENvbnRleHQpOiBRLlByb21pc2U8dm9pZD4ge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFEuZmNhbGwoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdmFyIHNlbGVjdGVkU2hpcHBpbmdNZXRob2ROYW1lOiBzdHJpbmcgPSAnJztcclxuXHJcbiAgICAgICAgICAgIGlmICghXy5pc1VuZGVmaW5lZChjaGVja291dENvbnRleHQuY2FydFZpZXdNb2RlbC5TaGlwcGluZ01ldGhvZCkpIHtcclxuXHJcbiAgICAgICAgICAgICAgICBzZWxlY3RlZFNoaXBwaW5nTWV0aG9kTmFtZSA9IGNoZWNrb3V0Q29udGV4dC5jYXJ0Vmlld01vZGVsLlNoaXBwaW5nTWV0aG9kLk5hbWU7XHJcbiAgICAgICAgICAgICAgICBjaGVja291dENvbnRleHQuc2hpcHBpbmdNZXRob2RzVmlld01vZGVsLlNoaXBwaW5nTWV0aG9kcy5mb3JFYWNoKHNoaXBwaW5nTWV0aG9kID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNoaXBwaW5nTWV0aG9kLk5hbWUgPT09IHNlbGVjdGVkU2hpcHBpbmdNZXRob2ROYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoZWNrb3V0Q29udGV4dC5zaGlwcGluZ01ldGhvZHNWaWV3TW9kZWwuU2VsZWN0ZWRTaGlwcGluZ1Byb3ZpZGVySWQgPSBzaGlwcGluZ01ldGhvZC5TaGlwcGluZ1Byb3ZpZGVySWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKHRoaXMudmlld01vZGVsTmFtZSwge1xyXG4gICAgICAgICAgICAgICAgTWV0aG9kcyA6IGNoZWNrb3V0Q29udGV4dC5zaGlwcGluZ01ldGhvZHNWaWV3TW9kZWwsXHJcbiAgICAgICAgICAgICAgICBTZWxlY3RlZE1ldGhvZCA6IHNlbGVjdGVkU2hpcHBpbmdNZXRob2ROYW1lLFxyXG4gICAgICAgICAgICAgICAgSGFzTWV0aG9kcyA6ICFfLmlzRW1wdHkoY2hlY2tvdXRDb250ZXh0LnNoaXBwaW5nTWV0aG9kc1ZpZXdNb2RlbC5TaGlwcGluZ01ldGhvZHMpXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKGAke3RoaXMudmlld01vZGVsTmFtZX1SZW5kZXJlZGAsIG51bGwpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBtZXRob2RTZWxlY3RlZChhY3Rpb25Db250ZXh0OiBJQ29udHJvbGxlckFjdGlvbkNvbnRleHQpIHtcclxuXHJcbiAgICAgICAgICAgIEVycm9ySGFuZGxlci5pbnN0YW5jZSgpLnJlbW92ZUVycm9ycygpO1xyXG4gICAgICAgICAgICB0aGlzLmRlYm91bmNlTWV0aG9kU2VsZWN0ZWQoYWN0aW9uQ29udGV4dCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIG1ldGhvZFNlbGVjdGVkSW1wbChhY3Rpb25Db250ZXh0OiBJQ29udHJvbGxlckFjdGlvbkNvbnRleHQpIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaCgnY2FydFVwZGF0aW5nJywgbnVsbCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVNoaXBwaW5nUHJvdmlkZXJJZChhY3Rpb25Db250ZXh0KVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4gdGhpcy5jaGVja291dFNlcnZpY2UudXBkYXRlQ2FydCgpKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4ocmVzdWx0ID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5IYXNFcnJvcnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgdXBkYXRlZCBjYXJ0IGNvbnRhaW5zIGVycm9ycycpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKCdjYXJ0VXBkYXRlZCcsIHsgZGF0YTogcmVzdWx0LkNhcnQgfSk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmZhaWwoKHJlYXNvbikgPT4gdGhpcy5oYW5kbGVFcnJvcihyZWFzb24pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgdXBkYXRlU2hpcHBpbmdQcm92aWRlcklkKGFjdGlvbkNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCk6IFEuUHJvbWlzZTx2b2lkPiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gUS5mY2FsbCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2hpcHBpbmdQcm92aWRlcklkID0gYWN0aW9uQ29udGV4dC5lbGVtZW50Q29udGV4dC5kYXRhKCdzaGlwcGluZy1wcm92aWRlci1pZCcpO1xyXG4gICAgICAgICAgICAgICAgJCgnI1NoaXBwaW5nUHJvdmlkZXJJZCcpLnZhbChzaGlwcGluZ1Byb3ZpZGVySWQudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGhhbmRsZUVycm9yKHJlYXNvbiA6IGFueSkge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKCdjYXJ0VXBkYXRpbmdGYWlsZWQnLCBudWxsKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1RoZSB1c2VyIGNoYW5nZWQgdGhlIHNoaXBwaW5nIG1ldGhvZCwgYnV0IHdlIHdlcmUgdW5hYmxlIHRvIHVwZGF0ZSB0aGUgY2FydCBkeW5hbWljYWxseScsIHJlYXNvbik7XHJcblxyXG4gICAgICAgICAgICBFcnJvckhhbmRsZXIuaW5zdGFuY2UoKS5vdXRwdXRFcnJvckZyb21Db2RlKCdTaGlwcGluZ01ldGhvZFVwZGF0ZUZhaWxlZCcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0V2ZW50cy9FdmVudEh1Yi50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5DYXJ0LlVJL0NhcnRTdW1tYXJ5L1NvdXJjZS9UeXBlc2NyaXB0L0NhcnRTZXJ2aWNlLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIENvdXBvblNlcnZpY2Uge1xyXG5cclxuICAgICAgICBwcml2YXRlIGNhcnRTZXJ2aWNlOiBJQ2FydFNlcnZpY2U7XHJcbiAgICAgICAgcHJpdmF0ZSBldmVudEh1YjogSUV2ZW50SHViO1xyXG5cclxuICAgICAgICBjb25zdHJ1Y3RvcihjYXJ0U2VydmljZTogSUNhcnRTZXJ2aWNlLCBldmVudEh1YjogSUV2ZW50SHViKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWNhcnRTZXJ2aWNlKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Vycm9yOiBjYXJ0U2VydmljZSBpcyByZXF1aXJlZCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghZXZlbnRIdWIpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3I6IGV2ZW50SHViIGlzIHJlcXVpcmVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuY2FydFNlcnZpY2UgPSBjYXJ0U2VydmljZTtcclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1YiA9IGV2ZW50SHViO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgKiBBZGRzIGEgY291cG9uIHVzaW5nIHRoZSBDb21wb3NlciBBUEkuXHJcbiAgICAgICAgKiBAcGFyYW0gY291cG9uQ29kZSBDb2RlIG9mIHRoZSBDb3Vwb24gdG8gYWRkIHRocm91Z2ggdGhlIEFQSS5cclxuICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBhZGRDb3Vwb24oY291cG9uQ29kZTogc3RyaW5nKTogUS5Qcm9taXNlPHZvaWQ+IHtcclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgQ291cG9uQ29kZTogY291cG9uQ29kZVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKCdjb3Vwb25VcGRhdGluZycsIHsgZGF0YTogZGF0YSB9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNhcnRTZXJ2aWNlLmFkZENvdXBvbihjb3Vwb25Db2RlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHRoaXMuY2FydFNlcnZpY2UuZ2V0Q2FydCgpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGNhcnQgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKCdjYXJ0VXBkYXRlZCcsIHsgZGF0YTogY2FydCB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wdWJsaXNoQ291cG9uVXBkYXRlZEV2ZW50KGNhcnQsIHRydWUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgcmVhc29uID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB3aGlsZSBhZGRpbmcgY291cG9uJywgcmVhc29uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnB1Ymxpc2hDb3Vwb25VcGRhdGVkRXZlbnQodW5kZWZpbmVkLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmVtb3ZlcyBhIGNvdXBvbiB1c2luZyB0aGUgQ29tcG9zZXIgQVBJXHJcbiAgICAgICAgICogQHBhcmFtIHtTdHJpbmd9IGNvdXBvbkNvZGUgQ29kZSBvZiB0aGUgY291cG9uIHRvIHJlbW92ZS5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgcmVtb3ZlQ291cG9uKGNvdXBvbkNvZGU6IHN0cmluZyk6IFEuUHJvbWlzZTx2b2lkPiB7XHJcblxyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIENvdXBvbkNvZGU6IGNvdXBvbkNvZGVcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNhcnRTZXJ2aWNlLnJlbW92ZUNvdXBvbihjb3Vwb25Db2RlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHRoaXMuY2FydFNlcnZpY2UuZ2V0Q2FydCgpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGNhcnQgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKCdjYXJ0VXBkYXRlZCcsIHsgZGF0YTogY2FydCB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wdWJsaXNoQ291cG9uVXBkYXRlZEV2ZW50KGNhcnQsIHRydWUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICB9LCByZWFzb24gPT4gdGhpcy5wdWJsaXNoQ291cG9uVXBkYXRlZEV2ZW50KHVuZGVmaW5lZCwgZmFsc2UpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgcHVibGlzaENvdXBvblVwZGF0ZWRFdmVudChyZXN1bHQ6IGFueSwgaXNTdWNjZXNzOiBib29sZWFuKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaCgnY291cG9uVXBkYXRlZCcsIHsgZGF0YTogcmVzdWx0IH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9Db250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9JQ29udHJvbGxlckFjdGlvbkNvbnRleHQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvUmVwb3NpdG9yaWVzL0NhcnRSZXBvc2l0b3J5LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L0pRdWVyeVBsdWdpbnMvSVNlcmlhbGl6ZU9iamVjdEpxdWVyeVBsdWdpbi50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL0NvdXBvblNlcnZpY2UudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIC8qKlxyXG4gICAgICogQ29udHJvbGxlciBmb3IgdGhlIENvdXBvbnMgc2VjdGlvbi5cclxuICAgICAqL1xyXG4gICAgZXhwb3J0IGNsYXNzIENvdXBvbkNvbnRyb2xsZXIgZXh0ZW5kcyBPcmNrZXN0cmEuQ29tcG9zZXIuQ29udHJvbGxlciB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgY291cG9uU2VydmljZTogQ291cG9uU2VydmljZSA9IG5ldyBDb3Vwb25TZXJ2aWNlKG5ldyBDYXJ0U2VydmljZShuZXcgQ2FydFJlcG9zaXRvcnkoKSwgdGhpcy5ldmVudEh1YiksIHRoaXMuZXZlbnRIdWIpO1xyXG4gICAgICAgIHByaXZhdGUgaXNGaXJzdExvYWQ6IGJvb2xlYW4gPSB0cnVlO1xyXG5cclxuICAgICAgICBwdWJsaWMgaW5pdGlhbGl6ZSgpIHtcclxuXHJcbiAgICAgICAgICAgIHN1cGVyLmluaXRpYWxpemUoKTtcclxuICAgICAgICAgICAgdGhpcy5yZWdpc3RlclN1YnNjcmlwdGlvbnMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJlZ2lzdGVycyBldmVudHMgb24gdGhlIGV2ZW50SHViLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgcmVnaXN0ZXJTdWJzY3JpcHRpb25zKCkge1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnN1YnNjcmliZSgnY2FydFVwZGF0ZWQnLCAoZXZlbnRJbmZvOiBJRXZlbnRJbmZvcm1hdGlvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNhcnQgPSBldmVudEluZm8uZGF0YTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcih0aGlzLmlzRmlyc3RMb2FkIHx8IF8uaXNFbXB0eShjYXJ0KSB8fCBjYXJ0LklzQ2FydEVtcHR5ID8gJ0NvdXBvbnNTdW1tYXJ5JyA6ICdDb3Vwb25zJywgY2FydCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmlzRmlyc3RMb2FkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5zdWJzY3JpYmUoJ2NvdXBvblVwZGF0ZWQnLCAoZTogSUV2ZW50SW5mb3JtYXRpb24pID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25Db3Vwb25VcGRhdGVkKGUuZGF0YSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRXZlbnQgdHJpZ2dlcmVkIHdoZW4gYWRkaW5nIGEgY291cG9uLlxyXG4gICAgICAgICAqIEBwYXJhbSB7SUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0fSBhY3Rpb25Db250ZXh0IC0gRXZlbnQgY29udGV4dC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgYXBwbHlDb3Vwb24oYWN0aW9uQ29udGV4dDogSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0KSB7XHJcbiAgICAgICAgICAgIGFjdGlvbkNvbnRleHQuZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBmb3JtRGF0YSA9ICg8SVNlcmlhbGl6ZU9iamVjdEpxdWVyeVBsdWdpbj5hY3Rpb25Db250ZXh0LmVsZW1lbnRDb250ZXh0KS5zZXJpYWxpemVPYmplY3QoKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChfLmlzRW1wdHkoZm9ybURhdGEuY291cG9uQ29kZSkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdUaGUgY291cG9uIGNvZGUgbWF5IG5vdCBiZSBudWxsJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBidXN5ID0gdGhpcy5hc3luY0J1c3koe2VsZW1lbnRDb250ZXh0OiBhY3Rpb25Db250ZXh0LmVsZW1lbnRDb250ZXh0LCBtc0RlbGF5OiAzMDB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY291cG9uU2VydmljZS5hZGRDb3Vwb24oZm9ybURhdGEuY291cG9uQ29kZSlcclxuICAgICAgICAgICAgICAgIC5kb25lKCgpID0+IGJ1c3kuZG9uZSgpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEV2ZW50IHRyaWdnZXJlZCB3aGVuIHJlbW92aW5nIGEgY291cG9uLlxyXG4gICAgICAgICAqIEBwYXJhbSB7SUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0fSBhY3Rpb25Db250ZXh0IC0gRXZlbnQgY29udGV4dC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgcmVtb3ZlQ291cG9uKGFjdGlvbkNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCkge1xyXG5cclxuICAgICAgICAgICAgdmFyIGNvdXBvbkNvZGUgPSBhY3Rpb25Db250ZXh0LmVsZW1lbnRDb250ZXh0LmRhdGEoJ2NvdXBvbmNvZGUnKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChfLmlzRW1wdHkoY291cG9uQ29kZSkpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdUaGUgY291cG9uIGNvZGUgbWF5IG5vdCBiZSBudWxsJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBidXN5ID0gdGhpcy5hc3luY0J1c3koe2VsZW1lbnRDb250ZXh0OiBhY3Rpb25Db250ZXh0LmVsZW1lbnRDb250ZXh0fSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNvdXBvblNlcnZpY2UucmVtb3ZlQ291cG9uKGNvdXBvbkNvZGUudG9TdHJpbmcoKSlcclxuICAgICAgICAgICAgICAgIC5kb25lKCgpID0+IGJ1c3kuZG9uZSgpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEV2ZW50IGhhbmRsZXIgZm9yIGNvdXBvbiB1cGRhdGVkLiBGaXJlcyBldmVuIGlmIHJlcXVlc3QgZmFpbHMuXHJcbiAgICAgICAgICogQHBhcmFtIHthbnl9IHZpZXdNb2RlbCAtIFZpZXdNb2RlbCByZWNlaXZlZCBieSB0aGUgcmVxdWVzdC4gTWF5IGJlIHVuZGVmaW5lZCBpZiB0aGUgcmVxdWVzdCBmYWlsZWQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJpdmF0ZSBvbkNvdXBvblVwZGF0ZWQodmlld01vZGVsOiBhbnkpIHtcclxuICAgICAgICAgICAgdmFyIGZvcm1FbGVtZW50ID0gdGhpcy5nZXRDb3Vwb25Gb3JtKCk7XHJcbiAgICAgICAgICAgIHZhciBoYXNFcnJvck1lc3NhZ2UgPSAoIXZpZXdNb2RlbCkgfHwgXy5zb21lKHZpZXdNb2RlbC5Db3Vwb25zLk1lc3NhZ2VzLCBtID0+IHsgcmV0dXJuICg8YW55Pm0pLkxldmVsID09PSAnZGFuZ2VyJzsgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWhhc0Vycm9yTWVzc2FnZSkge1xyXG4gICAgICAgICAgICAgICAgZm9ybUVsZW1lbnQudHJpZ2dlcigncmVzZXQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0cyB0aGUgY291cG9uIGZvcm0gaGFuZGxlZCBieSB0aGlzIENvbnRyb2xsZXIuXHJcbiAgICAgICAgICogQHJldHVybiB7SlF1ZXJ5fSBKUXVlcnkgZWxlbWVudCBtYXRjaGluZyB0aGUgZmlyc3QgZm9ybS5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIGdldENvdXBvbkZvcm0oKSA6IEpRdWVyeSB7XHJcbiAgICAgICAgICAgIHZhciBmb3JtcyA9ICQodGhpcy5jb250ZXh0LmNvbnRhaW5lcikuZmluZCgnZm9ybTpmaXJzdCcpO1xyXG4gICAgICAgICAgICByZXR1cm4gZm9ybXM7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSUdldE9yZGVyRGV0YWlsc1VybFJlcXVlc3Qge1xyXG4gICAgICAgIE9yZGVyTnVtYmVyOiBzdHJpbmc7XHJcbiAgICAgICAgRW1haWw6IHN0cmluZztcclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElHdWVzdE9yZGVyRGV0YWlsc1ZpZXdNb2RlbCB7XHJcbiAgICAgICAgVXJsOiBzdHJpbmc7XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL0lHZXRPcmRlckRldGFpbHNVcmxSZXF1ZXN0LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vSUd1ZXN0T3JkZXJEZXRhaWxzVmlld01vZGVsLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElGaW5kT3JkZXJTZXJ2aWNlIHtcclxuICAgICAgICBnZXRPcmRlckRldGFpbHNVcmwocmVxOiBJR2V0T3JkZXJEZXRhaWxzVXJsUmVxdWVzdCk6IFEuUHJvbWlzZTxJR3Vlc3RPcmRlckRldGFpbHNWaWV3TW9kZWw+O1xyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvRXZlbnRzL0lFdmVudEh1Yi50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvQ29tcG9zZXJDbGllbnQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9JRmluZE9yZGVyU2VydmljZS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL0lHZXRPcmRlckRldGFpbHNVcmxSZXF1ZXN0LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vSUd1ZXN0T3JkZXJEZXRhaWxzVmlld01vZGVsLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgY2xhc3MgRmluZE9yZGVyU2VydmljZSBpbXBsZW1lbnRzIElGaW5kT3JkZXJTZXJ2aWNlIHtcclxuICAgICAgICBwcml2YXRlIGV2ZW50SHViOiBJRXZlbnRIdWI7XHJcblxyXG4gICAgICAgIHB1YmxpYyBjb25zdHJ1Y3RvcihldmVudEh1YjogSUV2ZW50SHViKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIgPSBldmVudEh1YjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBnZXRPcmRlckRldGFpbHNVcmwocmVxOiBJR2V0T3JkZXJEZXRhaWxzVXJsUmVxdWVzdCk6IFEuUHJvbWlzZTxJR3Vlc3RPcmRlckRldGFpbHNWaWV3TW9kZWw+IHtcclxuICAgICAgICAgICAgdmFyIHByb21pc2UgPSBDb21wb3NlckNsaWVudC5wb3N0KCcvYXBpL29yZGVyL3VybCcsIHJlcSlcclxuICAgICAgICAgICAgICAgIC50aGVuKCh2bTogSUd1ZXN0T3JkZXJEZXRhaWxzVmlld01vZGVsKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKCdvcmRlckRldGFpbHNVcmxVcGRhdGVkJywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB2bVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdm07XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElGaW5kTXlPcmRlclZpZXdNb2RlbCB7XHJcbiAgICAgICAgT3JkZXJOdW1iZXI6IHN0cmluZztcclxuICAgICAgICBFbWFpbDogc3RyaW5nO1xyXG4gICAgICAgIE9yZGVyTm90Rm91bmQ6IGJvb2xlYW47XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvQ29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L2pxdWVyeVBsdWdpbnMvSVNlcmlhbGl6ZU9iamVjdEpxdWVyeVBsdWdpbi50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL0lGaW5kT3JkZXJTZXJ2aWNlLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vRmluZE9yZGVyU2VydmljZS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL0lHZXRPcmRlckRldGFpbHNVcmxSZXF1ZXN0LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vSUd1ZXN0T3JkZXJEZXRhaWxzVmlld01vZGVsLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vSUZpbmRNeU9yZGVyVmlld01vZGVsLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIEZpbmRNeU9yZGVyQ29udHJvbGxlciBleHRlbmRzIE9yY2tlc3RyYS5Db21wb3Nlci5Db250cm9sbGVyIHtcclxuICAgICAgICBwcml2YXRlIGZpbmRPcmRlclNlcnZpY2U6IElGaW5kT3JkZXJTZXJ2aWNlO1xyXG5cclxuICAgICAgICBwdWJsaWMgaW5pdGlhbGl6ZSgpIHtcclxuXHJcbiAgICAgICAgICAgc3VwZXIuaW5pdGlhbGl6ZSgpO1xyXG5cclxuICAgICAgICAgICB0aGlzLnJlZ2lzdGVyRm9ybXNGb3JWYWxpZGF0aW9uKHRoaXMuY29udGV4dC5jb250YWluZXIuZmluZCgnZm9ybScpKTtcclxuXHJcbiAgICAgICAgICAgdGhpcy5maW5kT3JkZXJTZXJ2aWNlID0gbmV3IEZpbmRPcmRlclNlcnZpY2UodGhpcy5ldmVudEh1Yik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZ2V0V2luZG93KCk6IFdpbmRvdyB7XHJcbiAgICAgICAgICAgIHJldHVybiB3aW5kb3c7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb25GaW5kTXlPcmRlcihhY3Rpb25Db250ZXh0OiBJQ29udHJvbGxlckFjdGlvbkNvbnRleHQpOiB2b2lkIHtcclxuICAgICAgICAgICAgYWN0aW9uQ29udGV4dC5ldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGJ1c3k6IFVJQnVzeUhhbmRsZSA9IHRoaXMuYXN5bmNCdXN5KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgcmVxdWVzdCA9IDxJR2V0T3JkZXJEZXRhaWxzVXJsUmVxdWVzdD4oPElTZXJpYWxpemVPYmplY3RKcXVlcnlQbHVnaW4+YWN0aW9uQ29udGV4dC5lbGVtZW50Q29udGV4dCkuc2VyaWFsaXplT2JqZWN0KCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmZpbmRPcmRlckFzeW5jKHJlcXVlc3QpXHJcbiAgICAgICAgICAgICAgICAudGhlbigodm06IElHdWVzdE9yZGVyRGV0YWlsc1ZpZXdNb2RlbCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0V2luZG93KCkubG9jYXRpb24uaHJlZiA9IHZtLlVybDtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuZmFpbChyZWFzb24gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1c3kuZG9uZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVhc29uLnN0YXR1cyAmJiByZWFzb24uc3RhdHVzID09PSA0MDQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5oYW5kbGVPcmRlck5vdEZvdW5kKHJlYXNvbiwgcmVxdWVzdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihyZWFzb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBmaW5kT3JkZXJBc3luYyhyZXF1ZXN0OiBJR2V0T3JkZXJEZXRhaWxzVXJsUmVxdWVzdCk6IFEuUHJvbWlzZTxJR3Vlc3RPcmRlckRldGFpbHNWaWV3TW9kZWw+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmluZE9yZGVyU2VydmljZS5nZXRPcmRlckRldGFpbHNVcmwocmVxdWVzdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGhhbmRsZU9yZGVyTm90Rm91bmQocmVhc29uOiBhbnksIHJlcXVlc3Q6IElHZXRPcmRlckRldGFpbHNVcmxSZXF1ZXN0KTogdm9pZCB7XHJcbiAgICAgICAgICAgIHZhciB2bTogSUZpbmRNeU9yZGVyVmlld01vZGVsID0ge1xyXG4gICAgICAgICAgICAgICAgRW1haWw6IHJlcXVlc3QuRW1haWwsXHJcbiAgICAgICAgICAgICAgICBPcmRlck51bWJlcjogcmVxdWVzdC5PcmRlck51bWJlcixcclxuICAgICAgICAgICAgICAgIE9yZGVyTm90Rm91bmQ6IHRydWVcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKCdGaW5kTXlPcmRlcicsIHZtKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcblxyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJU2NoZWR1bGVkQ2FsbGJhY2sge1xyXG5cclxuICAgICAgICAoZGF0YTogYW55KTogUS5Qcm9taXNlPGFueT47XHJcbiAgICB9XHJcbn0iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9JU2NoZWR1bGVkQ2FsbGJhY2sudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9FdmVudEh1Yi50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKiBDbGFzcyBpbiBjaGFyZ2Ugb2Ygc2NoZWR1bGluZyBtdWx0aXBsZSBjYWxscyB0byBhbiBldmVudC5cclxuICAgICAqIFRoaXMgY2xhc3MgaXMgYSBtdWx0aXRvbi4gUGxlYXNlIHVzZSB0aGUgaW5zdGFuY2UoKSBtZXRob2QgdG8gZ2V0IGFuIGluc3RhbmNlLlxyXG4gICAgICovXHJcbiAgICBleHBvcnQgY2xhc3MgRXZlbnRTY2hlZHVsZXIge1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGluc3RhbmNlczogSUhhc2hUYWJsZTxFdmVudFNjaGVkdWxlcj4gPSB7fTtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBldmVudE5hbWU6IHN0cmluZztcclxuICAgICAgICBwcml2YXRlIG9uRXZlbnRDYWxsYmFja3M6IElTY2hlZHVsZWRDYWxsYmFja1tdO1xyXG4gICAgICAgIHByaXZhdGUgcG9zdEV2ZW50Q2FsbGJhY2s6IElTY2hlZHVsZWRDYWxsYmFjaztcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0IGFuIGluc3RhbmNlIG9mIHRoZSBFdmVudFNjaGVkdWxlciBmb3IgYSBzcGVjaWZpYyBldmVudC5cclxuICAgICAgICAgKiBAcGFyYW0gZXZlbnROYW1lIFRoZSBuYW1lIG9mIHRoZSBldmVudCB0byBsaXN0ZW4gdG8uXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHN0YXRpYyBpbnN0YW5jZShldmVudE5hbWU6IHN0cmluZyk6IEV2ZW50U2NoZWR1bGVyIHtcclxuICAgICAgICAgICAgdmFyIGluc3RhbmNlOiBFdmVudFNjaGVkdWxlciA9IEV2ZW50U2NoZWR1bGVyLmluc3RhbmNlc1tldmVudE5hbWVdO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFpbnN0YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgaW5zdGFuY2UgPSBuZXcgRXZlbnRTY2hlZHVsZXIoZXZlbnROYW1lKTtcclxuICAgICAgICAgICAgICAgIEV2ZW50U2NoZWR1bGVyLmluc3RhbmNlc1tldmVudE5hbWVdID0gaW5zdGFuY2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBpbnN0YW5jZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENvbnN0cnVjdG9yLiBTaG91bGQgYmUgdXNlZCBmb3IgdGVzdGluZyBwdXJwb3NlcyBhbmQgaW5zaWRlIHRoZSBtdWx0aXRvbiBvbmx5LlxyXG4gICAgICAgICAqIEBwYXJhbSBldmVudE5hbWUgVGhlIG5hbWUgb2YgdGhlIGV2ZW50IHRvIHN1YnNjcmliZSB0by5cclxuICAgICAgICAgKi9cclxuICAgICAgICBjb25zdHJ1Y3RvcihldmVudE5hbWU6IHN0cmluZykge1xyXG4gICAgICAgICAgICB2YXIgaW5zdGFuY2U6IEV2ZW50U2NoZWR1bGVyID0gRXZlbnRTY2hlZHVsZXIuaW5zdGFuY2VzW2V2ZW50TmFtZV07XHJcblxyXG4gICAgICAgICAgICBpZiAoaW5zdGFuY2UpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3I6IEluc3RhbnRpYXRpb24gZmFpbGVkOiBVc2UgRXZlbnRTY2hlZHVsZXIuaW5zdGFuY2UoZXZlbnROYW1lOiBzdHJpbmcpIGluc3RlYWQgb2YgbmV3LicpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50TmFtZSA9IGV2ZW50TmFtZTtcclxuICAgICAgICAgICAgdGhpcy5vbkV2ZW50Q2FsbGJhY2tzID0gW107XHJcblxyXG4gICAgICAgICAgICBFdmVudEh1Yi5pbnN0YW5jZSgpLnN1YnNjcmliZSh0aGlzLmV2ZW50TmFtZSwgKGU6IElFdmVudEluZm9ybWF0aW9uKSA9PiB0aGlzLnRyaWdnZXIoZS5kYXRhKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTdWJzY3JpYmVzIGEgY2FsbGJhY2sgdG8gdGhlIEV2ZW50U2NoZWR1bGVyLlxyXG4gICAgICAgICAqIEBwYXJhbSBjYWxsYmFjayBGdW5jdGlvbiB0byBjYWxsIHdoZW4gdGhlIGV2ZW50IGFyaXNlcy4gTXVzdCByZXR1cm4gYSBwcm9taXNlLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdWJzY3JpYmUoY2FsbGJhY2s6IElTY2hlZHVsZWRDYWxsYmFjayk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLm9uRXZlbnRDYWxsYmFja3MucHVzaChjYWxsYmFjayk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBTZXRzIHRoZSBjYWxsYmFjayBtZXRob2QgdGhhdCB3aWxsIGJlIGludm9rZWQgYWZ0ZXIgYWxsIHRoZSBvdGhlcnMgYXJlIGRvbmUgZXhlY3V0aW5nLlxyXG4gICAgICAgICAqIEBwYXJhbSBwb3N0RXZlbnRDYWxsYmFjayBGdW5jdGlvbiB0byBjYWxsIHdoZW4gYWxsIG90aGVyIGNhbGxiYWNrcyBoYXZlIGJlZW4gZXhlY3V0ZWQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHNldFBvc3RFdmVudENhbGxiYWNrKHBvc3RFdmVudENhbGxiYWNrOiBJU2NoZWR1bGVkQ2FsbGJhY2spOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5wb3N0RXZlbnRDYWxsYmFjayA9IHBvc3RFdmVudENhbGxiYWNrO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSB0cmlnZ2VyKGRhdGE6IGFueSk6IHZvaWQge1xyXG4gICAgICAgICAgICB2YXIgcHJvbWlzZTogUS5Qcm9taXNlPGFueT4gPSB0aGlzLnRyaWdnZXJDYWxsYmFja3MoZGF0YSk7XHJcblxyXG4gICAgICAgICAgICBwcm9taXNlXHJcbiAgICAgICAgICAgICAgICAudGhlbigoZGF0YTogYW55KSA9PiB0aGlzLnRyaWdnZXJQb3N0RXZlbnQoZGF0YSkpXHJcbiAgICAgICAgICAgICAgICAuZG9uZSgoKSA9PiBjb25zb2xlLmxvZyhgRXZlbnQgJyR7dGhpcy5ldmVudE5hbWV9JyBmdWxmaWxsZWQgYnkgdGhlIEV2ZW50IFNjaGVkdWxlIHN1Y2Nlc3NmdWxseS5gKSxcclxuICAgICAgICAgICAgICAgICAgICAocmVhc29uOiBhbnkpID0+IHRoaXMub25FcnJvcihyZWFzb24pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgdHJpZ2dlckNhbGxiYWNrcyhkYXRhOiBhbnkpOiBRLlByb21pc2U8YW55PiB7XHJcbiAgICAgICAgICAgIHZhciBwcm9taXNlOiBRLlByb21pc2U8YW55PjtcclxuXHJcbiAgICAgICAgICAgIGlmIChfLmlzRW1wdHkodGhpcy5vbkV2ZW50Q2FsbGJhY2tzKSkge1xyXG4gICAgICAgICAgICAgICAgcHJvbWlzZSA9IFEoZGF0YSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgIHZhciBwcm9taXNlczogUS5Qcm9taXNlPGFueT5bXSA9IF8ubWFwKHRoaXMub25FdmVudENhbGxiYWNrcywgKGNhbGxiYWNrOiBJU2NoZWR1bGVkQ2FsbGJhY2spID0+IGNhbGxiYWNrKGRhdGEpKTtcclxuXHJcbiAgICAgICAgICAgICAgIHByb21pc2UgPSBRLmFsbChwcm9taXNlcylcclxuICAgICAgICAgICAgICAgIC50aGVuKCh2YWx1ZXM6IGFueVtdKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHRyaWdnZXJQb3N0RXZlbnQoZGF0YTogYW55KTogUS5Qcm9taXNlPGFueT4ge1xyXG4gICAgICAgICAgICB2YXIgcHJvbWlzZTogUS5Qcm9taXNlPGFueT47XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5wb3N0RXZlbnRDYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgcHJvbWlzZSA9IHRoaXMucG9zdEV2ZW50Q2FsbGJhY2soZGF0YSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBwcm9taXNlID0gUShkYXRhKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXRzIGludm9rZWQgd2hlbiBhbiBlcnJvciBvY2N1cnMgd2hpbGUgZXhlY3V0aW5nIHRoZSBwcm9taXNlcyBjaGFpbi5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwcm90ZWN0ZWQgb25FcnJvcihyZWFzb246IGFueSk6IHZvaWQge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBBbiBlcnJvciBvY2N1cmVkIHdoaWxlIHByb2Nlc3NpbmcgdGhlIGV2ZW50ICcke3RoaXMuZXZlbnROYW1lfScgd2l0aCB0aGUgRXZlbnRTY2hlZHVsZXIuYCwgcmVhc29uKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvQ29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9FdmVudHMvRXZlbnRTY2hlZHVsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvUmVwb3NpdG9yaWVzL0NhcnRSZXBvc2l0b3J5LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L0V2ZW50cy9FdmVudEh1Yi50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9FdmVudHMvSUV2ZW50SW5mb3JtYXRpb24udHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ2FydFN1bW1hcnkvU291cmNlL1R5cGVzY3JpcHQvQ2FydFNlcnZpY2UudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuTXlBY2NvdW50LlVJL0NvbW1vbi9Tb3VyY2UvVHlwZXNjcmlwdC9NeUFjY291bnRFdmVudHMudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgTWluaUNhcnRDb250cm9sbGVyIGV4dGVuZHMgT3Jja2VzdHJhLkNvbXBvc2VyLkNvbnRyb2xsZXIge1xyXG5cclxuICAgICAgICBwcml2YXRlIGNhcnRTZXJ2aWNlOiBDYXJ0U2VydmljZSA9IG5ldyBDYXJ0U2VydmljZShuZXcgQ2FydFJlcG9zaXRvcnkoKSwgdGhpcy5ldmVudEh1Yik7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKCkge1xyXG5cclxuICAgICAgICAgICAgc3VwZXIuaW5pdGlhbGl6ZSgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplTWluaUNhcnRRdWFudGl0eSgpO1xyXG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyU3Vic2NyaXB0aW9ucygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBpbml0aWFsaXplTWluaUNhcnRRdWFudGl0eSgpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY2FydFNlcnZpY2UuZ2V0Q2FydCgpXHJcbiAgICAgICAgICAgICAgICAuZG9uZShjYXJ0ID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFfLmlzRW1wdHkoY2FydCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJDYXJ0KGNhcnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHJlZ2lzdGVyU3Vic2NyaXB0aW9ucygpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBsb2dnZWRJblNjaGVkdWxlciA9IEV2ZW50U2NoZWR1bGVyLmluc3RhbmNlKE15QWNjb3VudEV2ZW50c1tNeUFjY291bnRFdmVudHMuTG9nZ2VkSW5dKTtcclxuICAgICAgICAgICAgdmFyIGxvZ2dlZE91dFNjaGVkdWxlciA9IEV2ZW50U2NoZWR1bGVyLmluc3RhbmNlKE15QWNjb3VudEV2ZW50c1tNeUFjY291bnRFdmVudHMuTG9nZ2VkT3V0XSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnN1YnNjcmliZSgnY2FydFVwZGF0ZWQnLCAoZTogSUV2ZW50SW5mb3JtYXRpb24pID0+IHRoaXMub25DYXJ0VXBkYXRlZChlKSk7XHJcblxyXG4gICAgICAgICAgICBsb2dnZWRPdXRTY2hlZHVsZXIuc3Vic2NyaWJlKChlOiBJRXZlbnRJbmZvcm1hdGlvbikgPT4gdGhpcy5vblJlZnJlc2hVc2VyKGUpKTtcclxuICAgICAgICAgICAgbG9nZ2VkSW5TY2hlZHVsZXIuc3Vic2NyaWJlKChlOiBJRXZlbnRJbmZvcm1hdGlvbikgPT4gdGhpcy5vblJlZnJlc2hVc2VyKGUpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvbkNhcnRVcGRhdGVkKGU6IElFdmVudEluZm9ybWF0aW9uKTogdm9pZCB7XHJcblxyXG4gICAgICAgICAgICB2YXIgY2FydCA9IGUuZGF0YTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJDYXJ0KGNhcnQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uUmVmcmVzaFVzZXIoZTogSUV2ZW50SW5mb3JtYXRpb24pOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jYXJ0U2VydmljZS5pbnZhbGlkYXRlQ2FjaGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCByZW5kZXJDYXJ0KGNhcnQ6IGFueSk6IHZvaWQge1xyXG5cclxuICAgICAgICAgICAgdmFyIHZpZXdNb2RlbDogYW55ID0gKF8uaXNFbXB0eShjYXJ0KSB8fCBjYXJ0LlRvdGFsUXVhbnRpdHkgPT09IDApID8ge30gOiBjYXJ0O1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcignTWluaWNhcnRRdWFudGl0eScsIHZpZXdNb2RlbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb25FcnJvcihyZWFzb246IGFueSk6IHZvaWQge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBBbiBlcnJvciBvY2N1cmVkIHdoaWxlIHJlbmRlcmluZyB0aGUgY2FydCB3aXRoIHRoZSBNaW5pQ2FydENvbnRyb2xsZXIuYCwgcmVhc29uKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvQ29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9FdmVudHMvRXZlbnRTY2hlZHVsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvUmVwb3NpdG9yaWVzL0NhcnRSZXBvc2l0b3J5LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L0V2ZW50cy9FdmVudEh1Yi50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9FdmVudHMvSUV2ZW50SW5mb3JtYXRpb24udHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuQW5hbHl0aWNzLlVJL0FuYWx5dGljcy9Tb3VyY2UvVHlwZXNjcmlwdC9Hb29nbGVBbmFseXRpY3NQbHVnaW4udHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ2FydFN1bW1hcnkvU291cmNlL1R5cGVzY3JpcHQvQ2FydFNlcnZpY2UudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgTWluaUNhcnRTdW1tYXJ5Q29udHJvbGxlciBleHRlbmRzIE9yY2tlc3RyYS5Db21wb3Nlci5Db250cm9sbGVyIHtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBjYXJ0U2VydmljZTogQ2FydFNlcnZpY2UgPSBuZXcgQ2FydFNlcnZpY2UobmV3IENhcnRSZXBvc2l0b3J5KCksIHRoaXMuZXZlbnRIdWIpO1xyXG4gICAgICAgIHByaXZhdGUgY2FjaGVQcm92aWRlcjogSUNhY2hlUHJvdmlkZXIgPSBDYWNoZVByb3ZpZGVyLmluc3RhbmNlKCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKCkge1xyXG4gICAgICAgICAgICBzdXBlci5pbml0aWFsaXplKCk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZU1pbmlDYXJ0U3VtbWFyeSgpO1xyXG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyU3Vic2NyaXB0aW9ucygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSByZWdpc3RlclN1YnNjcmlwdGlvbnMoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIuc3Vic2NyaWJlKCdjYXJ0VXBkYXRlZCcsIChlOiBJRXZlbnRJbmZvcm1hdGlvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJNaW5pQ2FydChlLmRhdGEpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5zdWJzY3JpYmUoJ2xpbmVJdGVtQWRkZWRUb0NhcnQnLCAoZTogSUV2ZW50SW5mb3JtYXRpb24pID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheU1pbmlDYXJ0KGUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5zdWJzY3JpYmUoJ2xhbmd1YWdlU3dpdGNoZWQnLCAoZTogSUV2ZW50SW5mb3JtYXRpb24pID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW52YWxpZGF0ZUNhcnQoZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBpbnZhbGlkYXRlQ2FydChlOiBJRXZlbnRJbmZvcm1hdGlvbik6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLmNhcnRTZXJ2aWNlLmludmFsaWRhdGVDYWNoZSgpO1xyXG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVNaW5pQ2FydFN1bW1hcnkoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgZGlzcGxheU1pbmlDYXJ0KGU6IElFdmVudEluZm9ybWF0aW9uKTogdm9pZCB7XHJcbiAgICAgICAgICAgIGxldCBtaW5pQ2FydENvbnRhaW5lciA9ICQodGhpcy5jb250ZXh0LmNvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIGxldCBub3RpZmljYXRpb25UaW1lID0gIHBhcnNlSW50KG1pbmlDYXJ0Q29udGFpbmVyLmRhdGEoJ25vdGlmaWNhdGlvblRpbWUnKSwgMTApO1xyXG4gICAgICAgICAgICBsZXQgc2Nyb2xsVG9MaW5lSXRlbUtleSA9IGUuZGF0YS5Qcm9kdWN0SWQgKyAnLScgKyAoZS5kYXRhLlZhcmlhbnRJZCB8fCAnJyk7XHJcblxyXG4gICAgICAgICAgICBpZiAobm90aWZpY2F0aW9uVGltZSA+IDApIHtcclxuICAgICAgICAgICAgICAgIG1pbmlDYXJ0Q29udGFpbmVyLmFkZENsYXNzKCdkaXNwbGF5TWluaUNhcnQnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBTY3JvbGwgdG8gYWRkZWQgaXRlbVxyXG4gICAgICAgICAgICAgICAgJCgnLm1pbmljYXJ0LXN1bW1hcnktcHJvZHVjdHMnLCBtaW5pQ2FydENvbnRhaW5lcikuc3RvcCgpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvcDogJCgnW2RhdGEtbGluZWl0ZW0taWQ9XCInICsgc2Nyb2xsVG9MaW5lSXRlbUtleSArICdcIl0nLCBtaW5pQ2FydENvbnRhaW5lcikucG9zaXRpb24oKS50b3BcclxuICAgICAgICAgICAgICAgIH0sIDEwMDApO1xyXG5cclxuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICBtaW5pQ2FydENvbnRhaW5lci5yZW1vdmVDbGFzcygnZGlzcGxheU1pbmlDYXJ0Jyk7XHJcbiAgICAgICAgICAgICAgICB9LCBub3RpZmljYXRpb25UaW1lKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBvbkNsb3NlTWluaUNhcnQoZTogSUV2ZW50SW5mb3JtYXRpb24pOiB2b2lkIHtcclxuICAgICAgICAgICAgbGV0IG1pbmlDYXJ0Q29udGFpbmVyID0gJCh0aGlzLmNvbnRleHQuY29udGFpbmVyKTtcclxuICAgICAgICAgICAgbWluaUNhcnRDb250YWluZXIuYWRkQ2xhc3MoJ2hpZGRlbicpO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBtaW5pQ2FydENvbnRhaW5lci5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XHJcbiAgICAgICAgICAgIH0sIDUwMCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb25DaGVja291dChhY3Rpb25Db250ZXh0OiBJQ29udHJvbGxlckFjdGlvbkNvbnRleHQpOiB2b2lkIHtcclxuICAgICAgICAgICAgLy8gU2V0IG9yaWdpbiBvZiBjaGVja291dCB0aGF0IHdlIHdpbGwgYmUgdXNlZCBpbiBBbmFseXRpY3NQbHVnaW5cclxuICAgICAgICAgICAgQW5hbHl0aWNzUGx1Z2luLnNldENoZWNrb3V0T3JpZ2luKCdNaW5pIENhcnQgQ2hlY2tvdXQnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBpbml0aWFsaXplTWluaUNhcnRTdW1tYXJ5KCk6IHZvaWQge1xyXG4gICAgICAgICAgICB2YXIgYnVzeSA9IHRoaXMuYXN5bmNCdXN5KHtjb250YWluZXJDb250ZXh0OiB0aGlzLmNvbnRleHQuY29udGFpbmVyIH0pO1xyXG4gICAgICAgICAgICB0aGlzLmNhcnRTZXJ2aWNlLmdldENhcnQoKS5kb25lKGNhcnQgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFfLmlzRW1wdHkoY2FydCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlck1pbmlDYXJ0KGNhcnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnVzeS5kb25lKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHJlbmRlck1pbmlDYXJ0KGNhcnQ6IGFueSk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcignTWluaWNhcnRTdW1tYXJ5JywgY2FydCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSUNyZWF0ZVZhdWx0VG9rZW5PcHRpb25zIHtcclxuICAgICAgICBDYXJkSG9sZGVyTmFtZTogc3RyaW5nO1xyXG4gICAgICAgIFZhdWx0VG9rZW5JZDogc3RyaW5nO1xyXG4gICAgICAgIFBheW1lbnRJZDogc3RyaW5nO1xyXG4gICAgICAgIENyZWF0ZVBheW1lbnRQcm9maWxlOiBib29sZWFuO1xyXG4gICAgICAgIFBheW1lbnRQcm92aWRlck5hbWU6IHN0cmluZztcclxuICAgIH1cclxufVxyXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vLi4vLi4vQ2hlY2tvdXRQYXltZW50L3NvdXJjZS9UeXBlc2NyaXB0L1ZpZXdNb2RlbHMvSUFjdGl2ZVBheW1lbnRWaWV3TW9kZWwudHNcIiAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElNb25lcmlzQWRkVmF1bHRQcm9maWxlVmlld01vZGVsIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEZXRlcm1pbmVzIGlmIHRoZSByZXF1ZXN0IHdhcyBzdWNjZXNzZnVsLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIFN1Y2Nlc3M6IGJvb2xlYW47XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIENvZGUgb2YgdGhlIGVycm9yLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIEVycm9yQ29kZTogc3RyaW5nO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBNZXNzYWdlIGdpdmVuIHdpdGggdGhlIGVycm9yLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIEVycm9yTWVzc2FnZTogc3RyaW5nO1xyXG5cclxuICAgICAgICAvKiogXHJcbiAgICAgICAgICogQWN0aXZlIFBheW1lbnQgVmlld01vZGVsLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIEFjdGl2ZVBheW1lbnRWaWV3TW9kZWw6IElBY3RpdmVQYXltZW50Vmlld01vZGVsO1xyXG4gICAgfVxyXG59XHJcbiIsIm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJTW9uZXJpc1Jlc3BvbnNlRGF0YSB7XHJcbiAgICAgICAgcmVzcG9uc2VDb2RlOiBzdHJpbmdbXTtcclxuICAgICAgICBkYXRhS2V5OiBzdHJpbmc7XHJcbiAgICAgICAgZXJyb3JNZXNzYWdlOiBzdHJpbmc7XHJcbiAgICB9XHJcbn1cclxuIiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElTZXREZWZhdWx0Q3VzdG9tZXJQYXltZW50TWV0aG9kVmlld01vZGVsIHtcclxuICAgICAgICBQYXltZW50UHJvdmlkZXJOYW1lOiBzdHJpbmc7XHJcblxyXG4gICAgICAgIFBheW1lbnRNZXRob2RJZDogc3RyaW5nO1xyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9JQ3JlYXRlVmF1bHRUb2tlbk9wdGlvbnMudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9JU2V0RGVmYXVsdEN1c3RvbWVyUGF5bWVudE1ldGhvZFZpZXdNb2RlbC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL0lNb25lcmlzQWRkVmF1bHRQcm9maWxlVmlld01vZGVsLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NoZWNrb3V0UGF5bWVudC9zb3VyY2UvVHlwZXNjcmlwdC9WaWV3TW9kZWxzL0lQYXltZW50TWV0aG9kVmlld01vZGVsLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L012Yy9Db21wb3NlckNsaWVudC50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgZXhwb3J0IGNsYXNzIE1vbmVyaXNQYXltZW50U2VydmljZSB7XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFkZHMgYSB0b2tlbiBmcm9tIE1vbmVyaXMgdG8gdGhlIGN1cnJlbnQgcGF5bWVudC5cclxuICAgICAgICAgKiBAcGFyYW0gIHtJQ3JlYXRlVmF1bHRUb2tlbk9wdGlvbnN9IHJlcXVlc3QgUmVxdWVzdCB0byBhZGQgdGhlIFZhdWx0IFRva2VuLlxyXG4gICAgICAgICAqIEByZXR1cm4ge1EuUHJvbWlzZTxhbnk+fSAgICAgICAgICAgICAgICAgICBQcm9taXNlIG9mIHRoZSBBSkFYIHJlcXVlc3QuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGFkZENyZWRpdENhcmQocmVxdWVzdDogSUNyZWF0ZVZhdWx0VG9rZW5PcHRpb25zKTogUS5Qcm9taXNlPElNb25lcmlzQWRkVmF1bHRQcm9maWxlVmlld01vZGVsPiB7XHJcbiAgICAgICAgICAgIHJldHVybiBDb21wb3NlckNsaWVudC5wb3N0KCcvYXBpL3ZhdWx0cHJvZmlsZS9hZGRwcm9maWxlJywgcmVxdWVzdCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc2V0RGVmYXVsdEN1c3RvbWVyUGF5bWVudE1ldGhvZChyZXF1ZXN0OiBJU2V0RGVmYXVsdEN1c3RvbWVyUGF5bWVudE1ldGhvZFZpZXdNb2RlbCk6IFEuUHJvbWlzZTxJUGF5bWVudE1ldGhvZFZpZXdNb2RlbD4ge1xyXG4gICAgICAgICAgICByZXR1cm4gQ29tcG9zZXJDbGllbnQucHV0KCcvYXBpL2NhcnQvc2V0ZGVmYXVsdHBheW1lbnRtZXRob2QnLCByZXF1ZXN0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyByZW1vdmVQYXltZW50TWV0aG9kKHBheW1lbnRNZXRob2RJZDogc3RyaW5nLCBwYXltZW50UHJvdmlkZXJOYW1lOiBzdHJpbmcpOiBRLlByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgICAgICByZXR1cm4gPFEuUHJvbWlzZTx2b2lkPj5cclxuICAgICAgICAgICAgICAgIENvbXBvc2VyQ2xpZW50LnJlbW92ZSgnL2FwaS9wYXltZW50L3JlbW92ZW1ldGhvZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGF5bWVudE1ldGhvZElkOiBwYXltZW50TWV0aG9kSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUGF5bWVudFByb3ZpZGVyTmFtZTogcGF5bWVudFByb3ZpZGVyTmFtZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vTW9uZXJpc1BheW1lbnRTZXJ2aWNlLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uLy4uL0NvbXBvc2VyLkNhcnQuVUkvQ2hlY2tvdXRQYXltZW50L1NvdXJjZS9UeXBlc2NyaXB0L1ZpZXdNb2RlbHMvSUFjdGl2ZVBheW1lbnRWaWV3TW9kZWwudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBleHBvcnQgdHlwZSBCYXNlTW9uZXJpc0NhbmFkYVBheW1lbnRQcm92aWRlckNvbGxlY3Rpb24gPSB7IFt0eXBlOiBzdHJpbmddIDogQmFzZVNwZWNpYWxpemVkTW9uZXJpc0NhbmFkYVBheW1lbnRQcm92aWRlciB9O1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBCYXNlU3BlY2lhbGl6ZWRNb25lcmlzQ2FuYWRhUGF5bWVudFByb3ZpZGVyIHtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogSW5qZWN0ZWQgcHJvcGVydHkgZm9yIHNwZWNzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJvdGVjdGVkIF93aW5kb3c6IFdpbmRvdztcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIF9wYXltZW50U2VydmljZTogTW9uZXJpc1BheW1lbnRTZXJ2aWNlO1xyXG4gICAgICAgIHByb3RlY3RlZCBfZXZlbnRIdWI6IElFdmVudEh1YjtcclxuXHJcbiAgICAgICAgY29uc3RydWN0b3Iod2luZG93OiBXaW5kb3csIHBheW1lbnRTZXJ2aWNlOiBNb25lcmlzUGF5bWVudFNlcnZpY2UsIGV2ZW50SHViOiBJRXZlbnRIdWIpIHtcclxuICAgICAgICAgICAgdGhpcy5fd2luZG93ID0gd2luZG93O1xyXG4gICAgICAgICAgICB0aGlzLl9wYXltZW50U2VydmljZSA9IHBheW1lbnRTZXJ2aWNlO1xyXG4gICAgICAgICAgICB0aGlzLl9ldmVudEh1YiA9IGV2ZW50SHViO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJlZ2lzdGVyIGV2ZW50IGhhbmRsZXJzIGZvciBkb20gZXZlbnRzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHJlZ2lzdGVyRG9tRXZlbnRzKCk6IHZvaWQge1xyXG4gICAgICAgICAgICAvLyBkbyBub3RoaW5nXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBVbnJlZ2lzdGVyIGV2ZW50IGhhbmRsZXJzIGZvciBkb20gZXZlbnRzXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHVucmVnaXN0ZXJEb21FdmVudHMoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIC8vIGRvIG5vdGhpbmdcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIE1ldGhvZCBjYWxsZWQgdG8gZ2V0IGEgcHJvbWlzZSBmb3IgcGF5bWVudCB2YWxpZGF0aW9uLlxyXG4gICAgICAgICAqIFJldHVybnMgYSBwcm9taXNlIG9mIGJvb2xlYW4uIFRoZSByZXR1cm4gYm9vbGVhbiBuZWVkcyB0byBiZSBmYWxzZSBmb3IgdmFsaWRhdGlvbiBlcnJvcixcclxuICAgICAgICAgKiBvciB0cnVlIGlmIHZhbGlkLlxyXG4gICAgICAgICAqIEBwYXJhbSAgIHtJQWN0aXZlUGF5bWVudFZpZXdNb2RlbH0gICBUaGUgY3VycmVudCBhY3RpdmUgcGF5bWVudCB2aWV3IG1vZGVsXHJcbiAgICAgICAgICogQHJldHVybiAge1EuUHJvbWlzZTxib29sZWFuPn0gICAgICAgIFByb21pc2UgdGhhdCB3aWxsIGJlIGV4ZWN1dGVkIHdoZW4gd2UgdmFsaWRhdGUgdGhlIHBheW1lbnQgY29udHJvbC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgdmFsaWRhdGVQYXltZW50KGFjdGl2ZVBheW1lbnRWTTogSUFjdGl2ZVBheW1lbnRWaWV3TW9kZWwpOiBRLlByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgICAgICAgICByZXR1cm4gUSh0cnVlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEFkZCB0aGUgdGVtcG9yYXJ5IHRva2VuIHRvIHRoZSB2YXVsdCBwcm9maWxlIG9mIHRoZSB1c2VyXHJcbiAgICAgICAgICogQHBhcmFtICAge0lBY3RpdmVQYXltZW50Vmlld01vZGVsfSAgIFRoZSBjdXJyZW50IGFjdGl2ZSBwYXltZW50IHZpZXcgbW9kZWxcclxuICAgICAgICAgKiBAcmV0dXJuICB7US5Qcm9taXNlPGFueT59ICAgICAgICAgICAgVGhlIG9iamVjdCBpcyB0aGUgdXBkYXRlZCBwcm9wZXJ0aWVzIG9mIHRoZSBjYXJ0IHVzZWQgaW4gQ2hlY2tvdXRTZXJ2aWNlLnVwZGF0ZUNhcnQoKVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBhZGRWYXVsdFByb2ZpbGVUb2tlbihhY3RpdmVQYXltZW50Vk0gOiBJQWN0aXZlUGF5bWVudFZpZXdNb2RlbCk6IFEuUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICAgICAgcmV0dXJuIFEoe30pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9J0Jhc2VTcGVjaWFsaXplZE1vbmVyaXNDYW5hZGFQYXltZW50UHJvdmlkZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vTW9uZXJpc1BheW1lbnRTZXJ2aWNlLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uL0lNb25lcmlzUmVzcG9uc2VEYXRhLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0pRdWVyeVBsdWdpbnMvSVNlcmlhbGl6ZU9iamVjdEpxdWVyeVBsdWdpbi50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9FcnJvckhhbmRsaW5nL0Vycm9ySGFuZGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi8uLi9Db21wb3Nlci5DYXJ0LlVJL0NoZWNrb3V0UGF5bWVudC9Tb3VyY2UvVHlwZXNjcmlwdC9WaWV3TW9kZWxzL0lBY3RpdmVQYXltZW50Vmlld01vZGVsLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIENyZWRpdENhcmRNb25lcmlzQ2FuYWRhUGF5bWVudFByb3ZpZGVyIGV4dGVuZHMgQmFzZVNwZWNpYWxpemVkTW9uZXJpc0NhbmFkYVBheW1lbnRQcm92aWRlciB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgX3ZhbGlkYXRpb25EZWZlcjogUS5EZWZlcnJlZDxhbnk+O1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBUaGlzIHByb3BlcnR5IGhhcyB0byBiZSBwdWJsaWMgZm9yIHRoZSBzcGVjcyB0byB3b3JrXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIF9tb25lcmlzUmVzcG9uc2VEYXRhOiBJTW9uZXJpc1Jlc3BvbnNlRGF0YTtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVGhpcyBwcm9wZXJ0eSBpcyBvbmx5IHRoZXJlIHRvIGluamVjdCB0ZXN0IGRhdGEgYnkgdGhlIHNwZWNzXHJcbiAgICAgICAgICogaXQgaGFzIHRvIGJlIHB1YmxpY1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBfZm9ybURhdGE6IGFueTtcclxuXHJcbiAgICAgICAgY29uc3RydWN0b3Iod2luZG93OiBXaW5kb3csIHBheW1lbnRTZXJ2aWNlOiBNb25lcmlzUGF5bWVudFNlcnZpY2UsIGV2ZW50SHViOiBJRXZlbnRIdWIpIHtcclxuICAgICAgICAgICAgc3VwZXIod2luZG93LCBwYXltZW50U2VydmljZSwgZXZlbnRIdWIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmVnaXN0ZXIgZXZlbnQgaGFuZGxlcnMgZm9yIGRvbSBldmVudHNcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgcmVnaXN0ZXJEb21FdmVudHMoKTogdm9pZCB7XHJcbiAgICAgICAgICAgICQodGhpcy5fd2luZG93KS5vbignbWVzc2FnZS5jb21wb3NlcicsIHRoaXMuaGFuZGxlTWVzc2FnZVJlc3BvbnNlLmJpbmQodGhpcykpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogVW5yZWdpc3RlciBldmVudCBoYW5kbGVycyBmb3IgZG9tIGV2ZW50c1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyB1bnJlZ2lzdGVyRG9tRXZlbnRzKCk6IHZvaWQge1xyXG4gICAgICAgICAgICAkKHRoaXMuX3dpbmRvdykub2ZmKCdtZXNzYWdlLmNvbXBvc2VyJywgdGhpcy5oYW5kbGVNZXNzYWdlUmVzcG9uc2UpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogTWV0aG9kIGNhbGxlZCB0byBnZXQgYSBwcm9taXNlIGZvciBwYXltZW50IHZhbGlkYXRpb24uXHJcbiAgICAgICAgICogUmV0dXJucyBhIHByb21pc2Ugb2YgYm9vbGVhbi4gVGhlIHJldHVybiBib29sZWFuIG5lZWRzIHRvIGJlIGZhbHNlIGZvciB2YWxpZGF0aW9uIGVycm9yLFxyXG4gICAgICAgICAqIG9yIHRydWUgaWYgdmFsaWQuXHJcbiAgICAgICAgICogQHBhcmFtICAge0lBY3RpdmVQYXltZW50Vmlld01vZGVsfSAgIFRoZSBjdXJyZW50IGFjdGl2ZSBwYXltZW50IHZpZXcgbW9kZWxcclxuICAgICAgICAgKiBAcmV0dXJuICB7US5Qcm9taXNlPGJvb2xlYW4+fSAgICAgICAgUHJvbWlzZSB0aGF0IHdpbGwgYmUgZXhlY3V0ZWQgd2hlbiB3ZSB2YWxpZGF0ZSB0aGUgcGF5bWVudCBjb250cm9sLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyB2YWxpZGF0ZVBheW1lbnQoYWN0aXZlUGF5bWVudFZNOiBJQWN0aXZlUGF5bWVudFZpZXdNb2RlbCk6IFEuUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICAgICAgICAgIHJldHVybiBRXHJcbiAgICAgICAgICAgICAgICAuZmNhbGwoKCkgPT4gdGhpcy5jb2xsZWN0QW5kVmFsaWRhdGVGb3JtRGF0YSgpKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oXyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5oaWRlQWxsTW9uZXJpc0Vycm9ycygpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl92YWxpZGF0aW9uRGVmZXIgPSBRLmRlZmVyKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdmFsaWRhdGlvbkRlZmVyLnByb21pc2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKG1vbmVyaXNSZXM6IElNb25lcmlzUmVzcG9uc2VEYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl92YWxpZGF0aW9uRGVmZXIgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghbW9uZXJpc1Jlcy5kYXRhS2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNb25lcmlzIGRpZCBub3QgcmV0dXJuIGEgZGF0YUtleS4nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9tb25lcmlzUmVzcG9uc2VEYXRhID0gbW9uZXJpc1JlcztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9tb25lcmlzUmVzcG9uc2VEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3ZhbGlkYXRpb25EZWZlci5yZXNvbHZlKHRoaXMuX21vbmVyaXNSZXNwb25zZURhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0TW9uZXJpc0lGcmFtZSgpLmNvbnRlbnRXaW5kb3cucG9zdE1lc3NhZ2UoJycsIGFjdGl2ZVBheW1lbnRWTS5DYXB0dXJlUGF5bWVudFVybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fdmFsaWRhdGlvbkRlZmVyLnByb21pc2U7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgdmFsaWRhdGVNb25lcmlzSUZyYW1lKHZtOiBJQWN0aXZlUGF5bWVudFZpZXdNb2RlbCk6IFEuUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICAgICAgICAgIHZhciBtb25lcmlzRnJhbWU6IEhUTUxJRnJhbWVFbGVtZW50ID0gdGhpcy5nZXRNb25lcmlzSUZyYW1lKCk7XHJcbiAgICAgICAgICAgIHZhciBtb25lcmlzQ29udGVudFdpbmRvdzogV2luZG93ID0gbW9uZXJpc0ZyYW1lLmNvbnRlbnRXaW5kb3c7XHJcbiAgICAgICAgICAgIHZhciBwcm9taXNlOiBRLlByb21pc2U8Ym9vbGVhbj47XHJcbiAgICAgICAgICAgIHRoaXMuaGlkZUFsbE1vbmVyaXNFcnJvcnMoKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3ZhbGlkYXRpb25EZWZlciA9IFEuZGVmZXIoKTtcclxuICAgICAgICAgICAgcHJvbWlzZSA9IHRoaXMuX3ZhbGlkYXRpb25EZWZlci5wcm9taXNlXHJcbiAgICAgICAgICAgICAgICAudGhlbigobW9uZXJpc1JlczogSU1vbmVyaXNSZXNwb25zZURhdGEpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl92YWxpZGF0aW9uRGVmZXIgPSBudWxsO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIW1vbmVyaXNSZXMuZGF0YUtleSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01vbmVyaXMgZGlkIG5vdCByZXR1cm4gYSBkYXRhS2V5LicpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbW9uZXJpc1Jlc3BvbnNlRGF0YSA9IG1vbmVyaXNSZXM7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5fbW9uZXJpc1Jlc3BvbnNlRGF0YSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fdmFsaWRhdGlvbkRlZmVyLnJlc29sdmUodGhpcy5fbW9uZXJpc1Jlc3BvbnNlRGF0YSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBtb25lcmlzQ29udGVudFdpbmRvdy5wb3N0TWVzc2FnZSgnJywgdm0uQ2FwdHVyZVBheW1lbnRVcmwpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdmFsaWRhdGlvbkRlZmVyLnByb21pc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBZGQgdGhlIHRlbXBvcmFyeSB0b2tlbiB0byB0aGUgdmF1bHQgcHJvZmlsZSBvZiB0aGUgdXNlclxyXG4gICAgICAgICAqIEBwYXJhbSAgIHtJQWN0aXZlUGF5bWVudFZpZXdNb2RlbH0gICBUaGUgY3VycmVudCBhY3RpdmUgcGF5bWVudCB2aWV3IG1vZGVsXHJcbiAgICAgICAgICogQHJldHVybiAge1EuUHJvbWlzZTxhbnk+fSAgICAgICAgICAgIFRoZSBvYmplY3QgaXMgdGhlIHVwZGF0ZWQgcHJvcGVydGllcyBvZiB0aGUgY2FydCB1c2VkIGluIENoZWNrb3V0U2VydmljZS51cGRhdGVDYXJ0KClcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgYWRkVmF1bHRQcm9maWxlVG9rZW4oYWN0aXZlUGF5bWVudFZNIDogSUFjdGl2ZVBheW1lbnRWaWV3TW9kZWwpOiBRLlByb21pc2U8YW55PiB7XHJcbiAgICAgICAgICAgIGlmICghYWN0aXZlUGF5bWVudFZNLlNob3VsZENhcHR1cmVQYXltZW50KSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gUSh7fSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGxldCBmb3JtRGF0YSA9IHRoaXMuY29sbGVjdEFuZFZhbGlkYXRlRm9ybURhdGEoKTtcclxuXHJcbiAgICAgICAgICAgIGxldCByZXF1ZXN0OiBJQ3JlYXRlVmF1bHRUb2tlbk9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICBDYXJkSG9sZGVyTmFtZTogZm9ybURhdGEuY2FyZGhvbGRlcixcclxuICAgICAgICAgICAgICAgIENyZWF0ZVBheW1lbnRQcm9maWxlOiBmb3JtRGF0YS5jcmVhdGVQYXltZW50UHJvZmlsZSxcclxuICAgICAgICAgICAgICAgIFZhdWx0VG9rZW5JZDogdGhpcy5fbW9uZXJpc1Jlc3BvbnNlRGF0YS5kYXRhS2V5LFxyXG4gICAgICAgICAgICAgICAgUGF5bWVudElkOiBhY3RpdmVQYXltZW50Vk0uSWQsXHJcbiAgICAgICAgICAgICAgICBQYXltZW50UHJvdmlkZXJOYW1lOiBhY3RpdmVQYXltZW50Vk0uUHJvdmlkZXJOYW1lXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnQWRkaW5nIE1vbmVyaXMgcGF5bWVudCBpbmZvcm1hdGlvbi4nKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9wYXltZW50U2VydmljZVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5hZGRDcmVkaXRDYXJkKHJlcXVlc3QpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHJlc3VsdDogSU1vbmVyaXNBZGRWYXVsdFByb2ZpbGVWaWV3TW9kZWwpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghcmVzdWx0LlN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9tb25lcmlzUmVzcG9uc2VEYXRhID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE1vbmVyaXM6IENvdWxkIG5vdCBhZGQgdGhlIGNyZWRpdCBjYXJkIHRvIHRoZSBwYXltZW50OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAoJHtyZXN1bHQuRXJyb3JDb2RlfSkgJHtyZXN1bHQuRXJyb3JNZXNzYWdlfWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZVBheW1lbnRWTS5TaG91bGRDYXB0dXJlUGF5bWVudCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7fTtcclxuICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgaGFuZGxlTWVzc2FnZVJlc3BvbnNlKGU6IEpRdWVyeUV2ZW50T2JqZWN0KSB7XHJcbiAgICAgICAgICAgIGxldCBtb25lcmlzRXZlbnQgPSA8TWVzc2FnZUV2ZW50PiBlLm9yaWdpbmFsRXZlbnQ7XHJcbiAgICAgICAgICAgIGxldCBtc2dEYXRhID0gbW9uZXJpc0V2ZW50LmRhdGE7XHJcbiAgICAgICAgICAgIGxldCByZXNwb25zZURhdGE6IElNb25lcmlzUmVzcG9uc2VEYXRhID0gSlNPTi5wYXJzZShtb25lcmlzRXZlbnQuZGF0YSk7XHJcblxyXG4gICAgICAgICAgICBpZiAocmVzcG9uc2VEYXRhLmVycm9yTWVzc2FnZSAmJiAhXy5pc0VtcHR5KHJlc3BvbnNlRGF0YS5lcnJvck1lc3NhZ2UpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZU1vbmVyaXNFcnJvcihtb25lcmlzRXZlbnQsIHJlc3BvbnNlRGF0YSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmhhbmRsZU1vbmVyaXNTdWNjZXNzKHJlc3BvbnNlRGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgaGFuZGxlTW9uZXJpc1N1Y2Nlc3MocmVzcG9uc2VEYXRhOiBJTW9uZXJpc1Jlc3BvbnNlRGF0YSk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuX3ZhbGlkYXRpb25EZWZlcikge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZWNlaXZlZCBNb25lcmlzIHN1Y2Nlc3MgcmVzcG9uc2UsIGJ1dCBubyB2YWxpZGF0aW9uIGRlZmVyIHdhcyBmb3VuZC4nKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5fdmFsaWRhdGlvbkRlZmVyLnJlc29sdmUocmVzcG9uc2VEYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgaGFuZGxlTW9uZXJpc0Vycm9yKG1vbmVyaXNFdmVudDogTWVzc2FnZUV2ZW50LCByZXNwb25zZURhdGE6IElNb25lcmlzUmVzcG9uc2VEYXRhKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHZhciBlcnJvck1zZzogc3RyaW5nID0gYCR7bW9uZXJpc0V2ZW50Lm9yaWdpbn0gU0VOVCAoJHtyZXNwb25zZURhdGEucmVzcG9uc2VDb2RlfSkgJHtyZXNwb25zZURhdGEuZGF0YUtleX1cclxuICAgICAgICAgICAgLSAke3Jlc3BvbnNlRGF0YS5lcnJvck1lc3NhZ2V9YDtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2hvd01vbmVyaXNFcnJvcnMocmVzcG9uc2VEYXRhLnJlc3BvbnNlQ29kZSk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5fdmFsaWRhdGlvbkRlZmVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl92YWxpZGF0aW9uRGVmZXIucmVqZWN0KG5ldyBFcnJvcihlcnJvck1zZykpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvck1zZywgcmVzcG9uc2VEYXRhKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzaG93TW9uZXJpc0Vycm9ycyhlcnJvckNvZGVzOiBzdHJpbmdbXSk6IHZvaWQge1xyXG4gICAgICAgICAgICB2YXIgc2hvdWxkU2hvd0dlbmVyYWw6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgIF8uZWFjaChlcnJvckNvZGVzLCAoY29kZTogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB2YXIgZXJyb3JOb2RlID0gJChgI21vbmVyaXNFcnJvciR7Y29kZX1gKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoXy5pc0VtcHR5KGVycm9yTm9kZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICBzaG91bGRTaG93R2VuZXJhbCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgZXJyb3JOb2RlLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKHNob3VsZFNob3dHZW5lcmFsKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcjbW9uZXJpc0Vycm9yR2VuZXJhbCcpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgY29sbGVjdEFuZFZhbGlkYXRlRm9ybURhdGEoKTogYW55IHtcclxuICAgICAgICAgICAgbGV0IGZvcm0gPSA8SVNlcmlhbGl6ZU9iamVjdEpxdWVyeVBsdWdpbj4gdGhpcy5nZXRGb3JtKCk7XHJcbiAgICAgICAgICAgIGxldCBmb3JtRGF0YSA9IHRoaXMuX2Zvcm1EYXRhIHx8IGZvcm0uc2VyaWFsaXplT2JqZWN0KCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWZvcm1EYXRhLmNhcmRob2xkZXIpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIGZvcm0gZG9lcyBub3QgY29udGFpbiBhIGZpZWxkIG5hbWVkIFwiY2FyZGhvbGRlclwiLiBUaGlzIGlzIHJlcXVpcmVkLicpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZm9ybURhdGE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGdldE1vbmVyaXNJRnJhbWUoKSA6IEhUTUxJRnJhbWVFbGVtZW50IHtcclxuICAgICAgICAgICAgbGV0IGZyYW1lczogSlF1ZXJ5ID0gJCgnI21vbmVyaXNGcmFtZScpO1xyXG5cclxuICAgICAgICAgICAgaWYgKF8uaXNFbXB0eShmcmFtZXMpKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBmaW5kIG1vbmVyaXNGcmFtZSBET00gZWxlbWVudCcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gPEhUTUxJRnJhbWVFbGVtZW50PmZyYW1lc1swXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgaGlkZUFsbE1vbmVyaXNFcnJvcnMoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2V0Rm9ybSgpXHJcbiAgICAgICAgICAgICAgICAuZmluZCgnLnBhcnNsZXktZXJyb3JzLWxpc3Q+LnBhcnNsZXktcmVxdWlyZWQnKVxyXG4gICAgICAgICAgICAgICAgLmFkZENsYXNzKCdoaWRlJyk7XHJcblxyXG4gICAgICAgICAgICAkKCcjbW9uZXJpc0Vycm9yR2VuZXJhbCcpLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBHZXRzIHRoZSBjb250YWluZXIgZm9yIHRoZSBQYXltZW50IFByb3ZpZGVyLlxyXG4gICAgICAgICAqIEByZXR1cm4ge0pRdWVyeX0galF1ZXJ5IG9iamVjdC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwcml2YXRlIGdldEZvcm0oKTogSlF1ZXJ5IHtcclxuICAgICAgICAgICAgdmFyIGZvcm0gPSAkKCcjUGF5bWVudEZvcm0nKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghZm9ybSB8fCBfLmlzRW1wdHkoZm9ybSkpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IGZpbmQgdGhlIGVsZW1lbnQgUGF5bWVudEZvcm0gb24gdGhpcyBwYWdlLicpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZm9ybTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPSdCYXNlU3BlY2lhbGl6ZWRNb25lcmlzQ2FuYWRhUGF5bWVudFByb3ZpZGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uL01vbmVyaXNQYXltZW50U2VydmljZS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9FcnJvckhhbmRsaW5nL0Vycm9ySGFuZGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9VSS9VSU1vZGFsLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uLy4uL0NvbXBvc2VyLkNhcnQuVUkvQ2hlY2tvdXRQYXltZW50L1NvdXJjZS9UeXBlc2NyaXB0L1ZpZXdNb2RlbHMvSUFjdGl2ZVBheW1lbnRWaWV3TW9kZWwudHMnIC8+XHJcblxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIFNhdmVkQ3JlZGl0Q2FyZE1vbmVyaXNDYW5hZGFQYXltZW50UHJvdmlkZXIgZXh0ZW5kcyBCYXNlU3BlY2lhbGl6ZWRNb25lcmlzQ2FuYWRhUGF5bWVudFByb3ZpZGVyIHtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBfZGVsZXRlTW9kYWxFbGVtZW50U2VsZWN0b3I6IHN0cmluZyA9ICcjY29uZmlybWF0aW9uTW9kYWwnO1xyXG4gICAgICAgIHByaXZhdGUgX2J1c3lIYW5kbGVyOiBVSUJ1c3lIYW5kbGU7XHJcbiAgICAgICAgcHJpdmF0ZSBfdWlNb2RhbDogVUlNb2RhbDtcclxuXHJcbiAgICAgICAgY29uc3RydWN0b3Iod2luZG93OiBXaW5kb3csIHBheW1lbnRTZXJ2aWNlOiBNb25lcmlzUGF5bWVudFNlcnZpY2UsIGV2ZW50SHViOiBJRXZlbnRIdWIpIHtcclxuICAgICAgICAgICAgc3VwZXIod2luZG93LCBwYXltZW50U2VydmljZSwgZXZlbnRIdWIpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fdWlNb2RhbCA9IG5ldyBVSU1vZGFsKHdpbmRvdywgdGhpcy5fZGVsZXRlTW9kYWxFbGVtZW50U2VsZWN0b3IsIHRoaXMuZGVsZXRlQ2FydCwgdGhpcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBSZWdpc3RlciBldmVudCBoYW5kbGVycyBmb3IgZG9tIGV2ZW50c1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyByZWdpc3RlckRvbUV2ZW50cygpOiB2b2lkIHtcclxuICAgICAgICAgICAgJCh0aGlzLl93aW5kb3cuZG9jdW1lbnQpLm9uKCdjbGljaycsICcubW9uZXJpcy0tZGVsZXRlY2FyZCcsIHRoaXMuX3VpTW9kYWwub3Blbk1vZGFsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFVucmVnaXN0ZXIgZXZlbnQgaGFuZGxlcnMgZm9yIGRvbSBldmVudHNcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgdW5yZWdpc3RlckRvbUV2ZW50cygpOiB2b2lkIHtcclxuICAgICAgICAgICAgJCh0aGlzLl93aW5kb3cuZG9jdW1lbnQpLm9mZignY2xpY2snLCAnLm1vbmVyaXMtLWRlbGV0ZWNhcmQnLCB0aGlzLl91aU1vZGFsLm9wZW5Nb2RhbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBNZXRob2QgY2FsbGVkIHRvIGdldCBhIHByb21pc2UgZm9yIHBheW1lbnQgdmFsaWRhdGlvbi5cclxuICAgICAgICAgKiBSZXR1cm5zIGEgcHJvbWlzZSBvZiBib29sZWFuLiBUaGUgcmV0dXJuIGJvb2xlYW4gbmVlZHMgdG8gYmUgZmFsc2UgZm9yIHZhbGlkYXRpb24gZXJyb3IsXHJcbiAgICAgICAgICogb3IgdHJ1ZSBpZiB2YWxpZC5cclxuICAgICAgICAgKiBAcGFyYW0gICB7SUFjdGl2ZVBheW1lbnRWaWV3TW9kZWx9ICAgVGhlIGN1cnJlbnQgYWN0aXZlIHBheW1lbnQgdmlldyBtb2RlbFxyXG4gICAgICAgICAqIEByZXR1cm4gIHtRLlByb21pc2U8Ym9vbGVhbj59ICAgICAgICBQcm9taXNlIHRoYXQgd2lsbCBiZSBleGVjdXRlZCB3aGVuIHdlIHZhbGlkYXRlIHRoZSBwYXltZW50IGNvbnRyb2wuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIHZhbGlkYXRlUGF5bWVudChhY3RpdmVQYXltZW50Vk06IElBY3RpdmVQYXltZW50Vmlld01vZGVsKTogUS5Qcm9taXNlPGJvb2xlYW4+IHtcclxuICAgICAgICAgICAgLy8gQ29uc2lkZXJpbmcgdGhlIGNyZWRpdCBjYXJkIHdhcyBhbHJlYWR5IGFkZGVkIHdlIGRvIG5vdCBuZWVkIHRvIHJ1biBhZGRpdGlvbmFsIHZhbGlkYXRpb25zXHJcbiAgICAgICAgICAgIHJldHVybiBRKHRydWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogQWRkIHRoZSB0ZW1wb3JhcnkgdG9rZW4gdG8gdGhlIHZhdWx0IHByb2ZpbGUgb2YgdGhlIHVzZXJcclxuICAgICAgICAgKiBAcGFyYW0gICB7SUFjdGl2ZVBheW1lbnRWaWV3TW9kZWx9ICAgVGhlIGN1cnJlbnQgYWN0aXZlIHBheW1lbnQgdmlldyBtb2RlbFxyXG4gICAgICAgICAqIEByZXR1cm4gIHtRLlByb21pc2U8YW55Pn0gICAgICAgICAgICBUaGUgb2JqZWN0IGlzIHRoZSB1cGRhdGVkIHByb3BlcnRpZXMgb2YgdGhlIGNhcnQgdXNlZCBpbiBDaGVja291dFNlcnZpY2UudXBkYXRlQ2FydCgpXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGFkZFZhdWx0UHJvZmlsZVRva2VuKGFjdGl2ZVBheW1lbnRWTSA6IElBY3RpdmVQYXltZW50Vmlld01vZGVsKTogUS5Qcm9taXNlPGFueT4ge1xyXG4gICAgICAgICAgICAvLyBubyBuZWVkIHRvIGFkZCB0aGUgcGF5bWVudCBtZXRob2QgdG8gdGhlIHZhdWx0XHJcbiAgICAgICAgICAgIHJldHVybiBRKHt9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBkZWxldGVDYXJ0KGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCkgOiBRLlByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgICAgICBsZXQgZWxlbWVudCA9ICQoZXZlbnQudGFyZ2V0KTtcclxuICAgICAgICAgICAgbGV0IHBheW1lbnRNZXRob2RJZDogc3RyaW5nID0gZWxlbWVudC5kYXRhKCdwYXltZW50LWlkJyk7XHJcbiAgICAgICAgICAgIGxldCBwYXltZW50UHJvdmlkZXJOYW1lOiBzdHJpbmcgPSBlbGVtZW50LmRhdGEoJ3BheW1lbnQtcHJvdmlkZXInKTtcclxuXHJcbiAgICAgICAgICAgIC8vVE9ETyA6IFRvIHJlcGxhY2Ugd2l0aCBhc3luYyBidXN5IGZyb20gY29udHJvbGxlciB3aGVuIGNoYW5nZSBpbmhlcml0YW5jZSB3aXRoIGNvbnRyb2xsZXIuXHJcbiAgICAgICAgICAgIHRoaXMuX2J1c3lIYW5kbGVyID0gbmV3IFVJQnVzeUhhbmRsZSgkKGRvY3VtZW50KSwgJChkb2N1bWVudCksIDApO1xyXG5cclxuXHJcbiAgICAgICAgICAgIC8vIFRPRE86IHB1Ymxpc2ggdmFsaWQgZXZlbnRcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3BheW1lbnRTZXJ2aWNlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZVBheW1lbnRNZXRob2QocGF5bWVudE1ldGhvZElkLCBwYXltZW50UHJvdmlkZXJOYW1lKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHRoaXMuX2V2ZW50SHViLnB1Ymxpc2goJ3BheW1lbnRNZXRob2RzVXBkYXRlZCcsIG51bGwpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5mYWlsKHJlYXNvbiA9PiBFcnJvckhhbmRsZXIuaW5zdGFuY2UoKS5vdXRwdXRFcnJvcihyZWFzb24pKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5maW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbGVhc2VCdXN5SGFuZGxlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHJlbGVhc2VCdXN5SGFuZGxlcigpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2J1c3lIYW5kbGVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9idXN5SGFuZGxlci5kb25lKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9idXN5SGFuZGxlciA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuL0lDcmVhdGVWYXVsdFRva2VuT3B0aW9ucy50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL0lNb25lcmlzUmVzcG9uc2VEYXRhLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vTW9uZXJpc1BheW1lbnRTZXJ2aWNlLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vUHJvdmlkZXJzL0Jhc2VTcGVjaWFsaXplZE1vbmVyaXNDYW5hZGFQYXltZW50UHJvdmlkZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9Qcm92aWRlcnMvQ3JlZGl0Q2FyZE1vbmVyaXNDYW5hZGFQYXltZW50UHJvdmlkZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9Qcm92aWRlcnMvU2F2ZWRDcmVkaXRDYXJkTW9uZXJpc0NhbmFkYVBheW1lbnRQcm92aWRlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9DaGVja291dFBheW1lbnQvU291cmNlL1R5cGVzY3JpcHQvUHJvdmlkZXJzL0Jhc2VDaGVja291dFBheW1lbnRQcm92aWRlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9FdmVudHMvSUV2ZW50SHViLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L0pRdWVyeVBsdWdpbnMvSVNlcmlhbGl6ZU9iamVjdEpxdWVyeVBsdWdpbi50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBNb25lcmlzQ2FuYWRhUGF5bWVudFByb3ZpZGVyIGV4dGVuZHMgQmFzZUNoZWNrb3V0UGF5bWVudFByb3ZpZGVyIHtcclxuICAgICAgICBwcml2YXRlIF92YWxpZGF0aW9uRGVmZXI6IFEuRGVmZXJyZWQ8YW55PjtcclxuICAgICAgICBwcml2YXRlIF9tb25lcmlzUGF5bWVudFNlcnZpY2U6IE1vbmVyaXNQYXltZW50U2VydmljZTtcclxuICAgICAgICBwcml2YXRlIF9wcm92aWRlcnM6IEJhc2VNb25lcmlzQ2FuYWRhUGF5bWVudFByb3ZpZGVyQ29sbGVjdGlvbjtcclxuXHJcbiAgICAgICAgY29uc3RydWN0b3Iod2luZG93OiBXaW5kb3csIHByb3ZpZGVyTmFtZTogc3RyaW5nLCBldmVudEh1YjogSUV2ZW50SHViKSB7XHJcbiAgICAgICAgICAgIHN1cGVyKHdpbmRvdywgZXZlbnRIdWIsICdNb25lcmlzQ2FuYWRhUGF5bWVudFByb3ZpZGVyJywgcHJvdmlkZXJOYW1lKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX21vbmVyaXNQYXltZW50U2VydmljZSA9IG5ldyBNb25lcmlzUGF5bWVudFNlcnZpY2UoKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJTcGVjaWFsaXplZFByb3ZpZGVycygpO1xyXG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyRG9tRXZlbnRzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBnZXQgcHJvdmlkZXJzKCk6IEJhc2VNb25lcmlzQ2FuYWRhUGF5bWVudFByb3ZpZGVyQ29sbGVjdGlvbiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9wcm92aWRlcnM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBNZXRob2QgY2FsbGVkIHRvIGdldCBhIHByb21pc2UgZm9yIHBheW1lbnQgdmFsaWRhdGlvbi5cclxuICAgICAgICAgKiBSZXR1cm5zIGEgcHJvbWlzZSBvZiBib29sZWFuLiBUaGUgcmV0dXJuIGJvb2xlYW4gbmVlZHMgdG8gYmUgZmFsc2UgZm9yIHZhbGlkYXRpb24gZXJyb3IsXHJcbiAgICAgICAgICogb3IgdHJ1ZSBpZiB2YWxpZC5cclxuICAgICAgICAgKiBAcmV0dXJuIHtRLlByb21pc2U8Ym9vbGVhbj59IFByb21pc2UgdGhhdCB3aWxsIGJlIGV4ZWN1dGVkIHdoZW4gd2UgdmFsaWRhdGUgdGhlIHBheW1lbnQgY29udHJvbC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgdmFsaWRhdGVQYXltZW50KGFjdGl2ZVBheW1lbnRWTTogSUFjdGl2ZVBheW1lbnRWaWV3TW9kZWwpOiBRLlByb21pc2U8Ym9vbGVhbj4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRQcm92aWRlcihhY3RpdmVQYXltZW50Vk0uUGF5bWVudE1ldGhvZFR5cGUpLnZhbGlkYXRlUGF5bWVudChhY3RpdmVQYXltZW50Vk0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHN1Ym1pdFBheW1lbnQoYWN0aXZlUGF5bWVudFZNIDogSUFjdGl2ZVBheW1lbnRWaWV3TW9kZWwpOiBRLlByb21pc2U8YW55PiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFByb3ZpZGVyKGFjdGl2ZVBheW1lbnRWTS5QYXltZW50TWV0aG9kVHlwZSlcclxuICAgICAgICAgICAgICAgICAgICAgICAuYWRkVmF1bHRQcm9maWxlVG9rZW4oYWN0aXZlUGF5bWVudFZNKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBkaXNwb3NlKCk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLnVucmVnaXN0ZXJEb21FdmVudHMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBzZXREZWZhdWx0Q3VzdG9tZXJQYXltZW50TWV0aG9kKGFjdGl2ZVBheW1lbnRWTTogSUFjdGl2ZVBheW1lbnRWaWV3TW9kZWwpOiBRLlByb21pc2U8SVBheW1lbnRNZXRob2RWaWV3TW9kZWw+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX21vbmVyaXNQYXltZW50U2VydmljZVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5zZXREZWZhdWx0Q3VzdG9tZXJQYXltZW50TWV0aG9kKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgUGF5bWVudE1ldGhvZElkOiBhY3RpdmVQYXltZW50Vk0uSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIFBheW1lbnRQcm92aWRlck5hbWU6IGFjdGl2ZVBheW1lbnRWTS5Qcm92aWRlck5hbWVcclxuICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCByZWdpc3RlclNwZWNpYWxpemVkUHJvdmlkZXJzKCk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLl9wcm92aWRlcnMgPSB7XHJcbiAgICAgICAgICAgICAgICAnU2F2ZWRDcmVkaXRDYXJkJzogbmV3IFNhdmVkQ3JlZGl0Q2FyZE1vbmVyaXNDYW5hZGFQYXltZW50UHJvdmlkZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMud2luZG93LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9tb25lcmlzUGF5bWVudFNlcnZpY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2V2ZW50SHViKSxcclxuXHJcbiAgICAgICAgICAgICAgICAnQ3JlZGl0Q2FyZCc6IG5ldyBDcmVkaXRDYXJkTW9uZXJpc0NhbmFkYVBheW1lbnRQcm92aWRlcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy53aW5kb3csXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX21vbmVyaXNQYXltZW50U2VydmljZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fZXZlbnRIdWIpXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgcmVnaXN0ZXJEb21FdmVudHMoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIF8uZm9yRWFjaCh0aGlzLnByb3ZpZGVycywgcCA9PiBwLnJlZ2lzdGVyRG9tRXZlbnRzKCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHVucmVnaXN0ZXJEb21FdmVudHMoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIF8uZm9yRWFjaCh0aGlzLnByb3ZpZGVycywgcCA9PiBwLnVucmVnaXN0ZXJEb21FdmVudHMoKSk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGdldFByb3ZpZGVyKHByb3ZpZGVyTmFtZTogc3RyaW5nKTogQmFzZVNwZWNpYWxpemVkTW9uZXJpc0NhbmFkYVBheW1lbnRQcm92aWRlciB7XHJcbiAgICAgICAgICAgIGlmICghdGhpcy5wcm92aWRlcnNbcHJvdmlkZXJOYW1lXSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQcm92aWRlciBub3QgZm91bmQnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvdmlkZXJzW3Byb3ZpZGVyTmFtZV07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvRXZlbnRzL0lFdmVudEh1Yi50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9DaGVja291dFBheW1lbnQvU291cmNlL1R5cGVzY3JpcHQvVmlld01vZGVscy9JQWN0aXZlUGF5bWVudFZpZXdNb2RlbC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9DaGVja291dFBheW1lbnQvc291cmNlL1R5cGVzY3JpcHQvUHJvdmlkZXJzL0Jhc2VDaGVja291dFBheW1lbnRQcm92aWRlci50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBPblNpdGVQT1NQYXltZW50UHJvdmlkZXIgZXh0ZW5kcyBCYXNlQ2hlY2tvdXRQYXltZW50UHJvdmlkZXIge1xyXG5cclxuICAgICAgICBjb25zdHJ1Y3Rvcih3aW5kb3c6IFdpbmRvdywgcHJvdmlkZXJOYW1lOiBzdHJpbmcsIGV2ZW50SHViOiBJRXZlbnRIdWIpIHtcclxuICAgICAgICAgICAgc3VwZXIod2luZG93LCBldmVudEh1YiwgJ09uU2l0ZVBPU1BheW1lbnRQcm92aWRlcicsIHByb3ZpZGVyTmFtZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBNZXRob2QgY2FsbGVkIHRvIGdldCBhIHByb21pc2UgZm9yIHBheW1lbnQgdmFsaWRhdGlvbi5cclxuICAgICAgICAgKiBSZXR1cm5zIGEgcHJvbWlzZSBvZiBib29sZWFuLiBUaGUgcmV0dXJuIGJvb2xlYW4gbmVlZHMgdG8gYmUgZmFsc2UgZm9yIHZhbGlkYXRpb24gZXJyb3IsXHJcbiAgICAgICAgICogb3IgdHJ1ZSBpZiB2YWxpZC5cclxuICAgICAgICAgKiBAcmV0dXJuIHtRLlByb21pc2U8Ym9vbGVhbj59IFByb21pc2UgdGhhdCB3aWxsIGJlIGV4ZWN1dGVkIHdoZW4gd2UgdmFsaWRhdGUgdGhlIHBheW1lbnQgY29udHJvbC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgdmFsaWRhdGVQYXltZW50KGFjdGl2ZVZNOiBJQWN0aXZlUGF5bWVudFZpZXdNb2RlbCk6IFEuUHJvbWlzZTxib29sZWFuPiB7XHJcbiAgICAgICAgICAgIHJldHVybiBRKHRydWUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogTWV0aG9kIGNhbGxlZCB0byBnZXQgYSBwcm9taXNlIHdoZW4gcGF5bWVudCB3aWxsIHN1Ym1pdC5cclxuICAgICAgICAgKiBAcmV0dXJuIHtRLlByb21pc2U8YW55Pn0gUHJvbWlzZSB0aGF0IHdpbGwgYmUgZXhlY3V0ZWQgd2hlbiB0byBjYXJ0IGlzIGFib3V0IHRoZSBiZSB1cGRhdGVkLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBzdWJtaXRQYXltZW50KGFjdGl2ZVZNOiBJQWN0aXZlUGF5bWVudFZpZXdNb2RlbCk6IFEuUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICAgICAgcmV0dXJuIFEoe30pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvSnF1ZXJ5UGx1Z2lucy9JU2VyaWFsaXplT2JqZWN0SnF1ZXJ5UGx1Z2luLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvQ29udHJvbGxlci50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0lDb250cm9sbGVyQ29udGV4dC50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0lDb250cm9sbGVyQWN0aW9uQ29udGV4dC50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBPcmRlckRldGFpbHNDb250cm9sbGVyIGV4dGVuZHMgQ29udHJvbGxlciB7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKCkge1xyXG4gICAgICAgICAgICBzdXBlci5pbml0aWFsaXplKCk7XHJcblxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJtb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSUdldE9yZGVyUGFyYW1ldGVycyB7XHJcbiAgICAgICAgcGFnZTogbnVtYmVyO1xyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvTXZjL0NvbXBvc2VyQ2xpZW50LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uL1BhcmFtZXRlcnMvSUdldE9yZGVyUGFyYW1ldGVycycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBPcmRlclNlcnZpY2Uge1xyXG4gICAgICAgIHB1YmxpYyBnZXRQYXN0T3JkZXJzKG9wdGlvbnM6IElHZXRPcmRlclBhcmFtZXRlcnMgPSB7IHBhZ2U6IDEgfSkge1xyXG4gICAgICAgICAgICByZXR1cm4gQ29tcG9zZXJDbGllbnQucG9zdCgnL2FwaS9vcmRlci9wYXN0LW9yZGVycycsIG9wdGlvbnMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGdldEN1cnJlbnRPcmRlcnMob3B0aW9uczogSUdldE9yZGVyUGFyYW1ldGVycyA9IHsgcGFnZTogMSB9KSB7XHJcbiAgICAgICAgICAgIHJldHVybiBDb21wb3NlckNsaWVudC5wb3N0KCcvYXBpL29yZGVyL2N1cnJlbnQtb3JkZXJzJywgb3B0aW9ucyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9KcXVlcnlQbHVnaW5zL0lTZXJpYWxpemVPYmplY3RKcXVlcnlQbHVnaW4udHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9Db250cm9sbGVyLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvSUNvbnRyb2xsZXJDb250ZXh0LnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vU2VydmljZXMvT3JkZXJTZXJ2aWNlJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIEN1cnJlbnRPcmRlcnNDb250cm9sbGVyIGV4dGVuZHMgQ29udHJvbGxlciB7XHJcbiAgICAgICAgcHJvdGVjdGVkIG9yZGVyU2VydmljZSA9IG5ldyBPcmRlclNlcnZpY2UoKTtcclxuXHJcbiAgICAgICAgcHVibGljIGluaXRpYWxpemUoKSB7XHJcbiAgICAgICAgICAgIHN1cGVyLmluaXRpYWxpemUoKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZ2V0Q3VycmVudE9yZGVycygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGdldE9yZGVycyhjb250ZXh0OiBJQ29udHJvbGxlckFjdGlvbkNvbnRleHQpIHtcclxuICAgICAgICAgICAgdmFyIHBhZ2U6IG51bWJlciA9IGNvbnRleHQuZWxlbWVudENvbnRleHQuZGF0YSgncGFnZScpO1xyXG5cclxuICAgICAgICAgICAgY29udGV4dC5ldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5nZXRDdXJyZW50T3JkZXJzKHtcclxuICAgICAgICAgICAgICAgIHBhZ2U6IHBhZ2VcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGdldEN1cnJlbnRPcmRlcnMocGFyYW0/OiBJR2V0T3JkZXJQYXJhbWV0ZXJzKSB7XHJcbiAgICAgICAgICAgIHZhciBidXN5SGFuZGxlID0gdGhpcy5hc3luY0J1c3koKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMub3JkZXJTZXJ2aWNlLmdldEN1cnJlbnRPcmRlcnMocGFyYW0pXHJcbiAgICAgICAgICAgICAgICAuZG9uZSgodmlld01vZGVsKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIoJ0N1cnJlbnRPcmRlcnMnLCB2aWV3TW9kZWwpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoIV8uaXNFbXB0eSh2aWV3TW9kZWwpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKCdPcmRlckhpc3RvcnlQYWdpbmF0aW9uJywgdmlld01vZGVsLlBhZ2luYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYnVzeUhhbmRsZS5kb25lKCk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIChyZWFzb24pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihyZWFzb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidXN5SGFuZGxlLmRvbmUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L0pxdWVyeVBsdWdpbnMvSVNlcmlhbGl6ZU9iamVjdEpxdWVyeVBsdWdpbi50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0NvbnRyb2xsZXIudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9JQ29udHJvbGxlckNvbnRleHQudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9JQ29udHJvbGxlckFjdGlvbkNvbnRleHQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9TZXJ2aWNlcy9PcmRlclNlcnZpY2UnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgUGFzdE9yZGVyc0NvbnRyb2xsZXIgZXh0ZW5kcyBDb250cm9sbGVyIHtcclxuICAgICAgICBwcm90ZWN0ZWQgb3JkZXJTZXJ2aWNlID0gbmV3IE9yZGVyU2VydmljZSgpO1xyXG5cclxuICAgICAgICBwdWJsaWMgaW5pdGlhbGl6ZSgpIHtcclxuICAgICAgICAgICAgc3VwZXIuaW5pdGlhbGl6ZSgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5nZXRQYXN0T3JkZXJzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZ2V0T3JkZXJzKGNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCkge1xyXG4gICAgICAgICAgICB2YXIgcGFnZTogbnVtYmVyID0gY29udGV4dC5lbGVtZW50Q29udGV4dC5kYXRhKCdwYWdlJyk7XHJcblxyXG4gICAgICAgICAgICBjb250ZXh0LmV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuZ2V0UGFzdE9yZGVycyh7IHBhZ2U6IHBhZ2UgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGdldFBhc3RPcmRlcnMocGFyYW0/IDogSUdldE9yZGVyUGFyYW1ldGVycykge1xyXG4gICAgICAgICAgICB2YXIgYnVzeUhhbmRsZSA9IHRoaXMuYXN5bmNCdXN5KCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLm9yZGVyU2VydmljZS5nZXRQYXN0T3JkZXJzKHBhcmFtKVxyXG4gICAgICAgICAgICAgICAgLmRvbmUoKHZpZXdNb2RlbCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKCdQYXN0T3JkZXJzJywgdmlld01vZGVsKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFfLmlzRW1wdHkodmlld01vZGVsKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcignT3JkZXJIaXN0b3J5UGFnaW5hdGlvbicsIHZpZXdNb2RlbC5QYWdpbmF0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGJ1c3lIYW5kbGUuZG9uZSgpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIChyZWFzb24pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKHJlYXNvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgYnVzeUhhbmRsZS5kb25lKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9FdmVudHMvRXZlbnRIdWIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuQ2FydC5VSS9DYXJ0U3VtbWFyeS9Tb3VyY2UvVHlwZXNjcmlwdC9DYXJ0U2VydmljZS50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBPcmRlclN1bW1hcnlTZXJ2aWNlIHtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBjYXJ0U2VydmljZTogSUNhcnRTZXJ2aWNlO1xyXG4gICAgICAgIHByaXZhdGUgZXZlbnRIdWI6IElFdmVudEh1YjtcclxuXHJcbiAgICAgICAgY29uc3RydWN0b3IoY2FydFNlcnZpY2U6IElDYXJ0U2VydmljZSwgZXZlbnRIdWI6IElFdmVudEh1Yikge1xyXG5cclxuICAgICAgICAgICAgaWYgKCFjYXJ0U2VydmljZSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvcjogY2FydFNlcnZpY2UgaXMgcmVxdWlyZWQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIWV2ZW50SHViKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Vycm9yOiBldmVudEh1YiBpcyByZXF1aXJlZCcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNhcnRTZXJ2aWNlID0gY2FydFNlcnZpY2U7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIgPSBldmVudEh1YjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzZXRDaGVhcGVzdFNoaXBwaW5nTWV0aG9kVXNpbmcocG9zdGFsQ29kZTogc3RyaW5nKTogUS5Qcm9taXNlPHZvaWQ+IHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaCgnY2FydFVwZGF0aW5nJywgeyBkYXRhOiB7IFBvc3RhbENvZGU6IHBvc3RhbENvZGUgfSB9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNhcnRTZXJ2aWNlLnVwZGF0ZVNoaXBwaW5nTWV0aG9kUG9zdGFsQ29kZShwb3N0YWxDb2RlKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHRoaXMuY2FydFNlcnZpY2Uuc2V0Q2hlYXBlc3RTaGlwcGluZ01ldGhvZCgpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHRoaXMuY2FydFNlcnZpY2UuZ2V0Q2FydCgpKVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGNhcnQgPT4gdGhpcy5ldmVudEh1Yi5wdWJsaXNoKCdjYXJ0VXBkYXRlZCcsIHsgZGF0YTogY2FydCB9KSlcclxuICAgICAgICAgICAgICAgICAgICAgICAuZmFpbCgocmVhc29uOiBhbnkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igd2hpbGUgdXBkYXRpbmcgdGhlIHNoaXBwaW5nIG1ldGhvZCB1c2luZyB0aGUgcG9zdGFsIGNvZGUnLCByZWFzb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyByZWFzb247XHJcbiAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgY2xlYW5DYXJ0KCk6IFEuUHJvbWlzZTx2b2lkPiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jYXJ0U2VydmljZS5jbGVhbigpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9Db250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9JQ29udHJvbGxlckFjdGlvbkNvbnRleHQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvUmVwb3NpdG9yaWVzL0NhcnRSZXBvc2l0b3J5LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L0pRdWVyeVBsdWdpbnMvSVNlcmlhbGl6ZU9iamVjdEpxdWVyeVBsdWdpbi50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9FcnJvckhhbmRsaW5nL0Vycm9ySGFuZGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5BbmFseXRpY3MuVUkvQW5hbHl0aWNzL1NvdXJjZS9UeXBlc2NyaXB0L0dvb2dsZUFuYWx5dGljc1BsdWdpbi50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9DYXJ0U3VtbWFyeS9Tb3VyY2UvVHlwZXNjcmlwdC9DYXJ0U2VydmljZS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPSdPcmRlclN1bW1hcnlTZXJ2aWNlLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIE9yZGVyU3VtbWFyeUNvbnRyb2xsZXIgZXh0ZW5kcyBPcmNrZXN0cmEuQ29tcG9zZXIuQ29udHJvbGxlciB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgY2FjaGVQcm92aWRlcjogSUNhY2hlUHJvdmlkZXIgPSBDYWNoZVByb3ZpZGVyLmluc3RhbmNlKCk7XHJcbiAgICAgICAgcHJpdmF0ZSBjYXJ0U2VydmljZTogSUNhcnRTZXJ2aWNlID0gbmV3IENhcnRTZXJ2aWNlKG5ldyBDYXJ0UmVwb3NpdG9yeSgpLCB0aGlzLmV2ZW50SHViKTtcclxuICAgICAgICBwcml2YXRlIG9yZGVyU3VtbWFyeVNlcnZpY2U6IE9yZGVyU3VtbWFyeVNlcnZpY2UgPSBuZXcgT3JkZXJTdW1tYXJ5U2VydmljZSh0aGlzLmNhcnRTZXJ2aWNlLCB0aGlzLmV2ZW50SHViKTtcclxuICAgICAgICBwcml2YXRlIHBvc3RhbENvZGVNb2RhbCA6IGFueTtcclxuICAgICAgICBwcml2YXRlIHBvc3RhbENvZGVJbnB1dCA6IGFueTtcclxuXHJcbiAgICAgICAgcHVibGljIGluaXRpYWxpemUoKSB7XHJcbiAgICAgICAgICAgIHN1cGVyLmluaXRpYWxpemUoKTtcclxuICAgICAgICAgICAgdGhpcy5yZWdpc3RlclN1YnNjcmlwdGlvbnMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgcmVnaXN0ZXJTdWJzY3JpcHRpb25zKCkge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5zdWJzY3JpYmUoJ2NhcnRVcGRhdGVkJywgZSA9PiB0aGlzLnJlbmRlcignT3JkZXJTdW1tYXJ5JywgZS5kYXRhKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgb3Blbk1vZGFsKGFjdGlvbkNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCkge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5wb3N0YWxDb2RlTW9kYWwgPSAkKCcjcG9zdGFsQ29kZU1vZGFsJyk7XHJcbiAgICAgICAgICAgIHRoaXMucG9zdGFsQ29kZUlucHV0ID0gJCgnI3Bvc3RhbENvZGUnKTtcclxuICAgICAgICAgICAgdGhpcy5jbGVhckZvcm0oKTtcclxuXHJcbiAgICAgICAgICAgIC8vRHVlIHRvIGhvdyBIVE1MNSBkZWZpbmVzIGl0cyBzZW1hbnRpY3MsIHRoZSBhdXRvZm9jdXMgSFRNTCBhdHRyaWJ1dGUgaGFzIG5vIGVmZmVjdCBpbiBCb290c3RyYXAgbW9kYWxzXHJcbiAgICAgICAgICAgIC8vaHR0cDovL2dldGJvb3RzdHJhcC5jb20vamF2YXNjcmlwdC8jbW9kYWxzXHJcbiAgICAgICAgICAgIHRoaXMucG9zdGFsQ29kZU1vZGFsLm9uKCdzaG93bi5icy5tb2RhbCcsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMucG9zdGFsQ29kZUlucHV0LmZvY3VzKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5wb3N0YWxDb2RlTW9kYWwubW9kYWwoJ3Nob3cnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgY2xlYXJGb3JtKCkge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5wb3N0YWxDb2RlSW5wdXQudmFsKCcnKTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXIoJ0VzdGltYXRlU2hpcHBpbmdWYWxpZGF0aW9uRm9ybScsIHsgUG9zdGFsQ29kZU1hbGZvcm1lZDogZmFsc2UsIFBvc3RhbENvZGVFbXB0eTogZmFsc2UgfSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgY2xvc2VNb2RhbChhY3Rpb25Db250ZXh0OiBJQ29udHJvbGxlckFjdGlvbkNvbnRleHQpIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucG9zdGFsQ29kZU1vZGFsLm1vZGFsKCdoaWRlJyk7XHJcbiAgICAgICAgICAgIHRoaXMucG9zdGFsQ29kZU1vZGFsLm9mZignc2hvd24uYnMubW9kYWwnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBlc3RpbWF0ZVNoaXBwaW5nKGFjdGlvbkNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCkge1xyXG5cclxuICAgICAgICAgICAgdmFyIGZvcm1Db250ZXh0ID0gYWN0aW9uQ29udGV4dC5lbGVtZW50Q29udGV4dCxcclxuICAgICAgICAgICAgICAgIGZvcm1WYWx1ZXMgPSAoPElTZXJpYWxpemVPYmplY3RKcXVlcnlQbHVnaW4+Zm9ybUNvbnRleHQpLnNlcmlhbGl6ZU9iamVjdCgpLFxyXG4gICAgICAgICAgICAgICAgcG9zdGFsQ29kZSA9IGZvcm1WYWx1ZXMucG9zdGFsQ29kZS50b1VwcGVyQ2FzZSgpLFxyXG4gICAgICAgICAgICAgICAgcG9zdGFsQ29kZVBhdHRlcm4gPSBmb3JtQ29udGV4dC5kYXRhKCdyZWdleCcpLFxyXG4gICAgICAgICAgICAgICAgcG9zdGFsQ29kZVJlZ2V4UGF0dGVybiA9IG5ldyBSZWdFeHAocG9zdGFsQ29kZVBhdHRlcm4udG9TdHJpbmcoKSksXHJcbiAgICAgICAgICAgICAgICByZXN1bHQgPSBwb3N0YWxDb2RlUmVnZXhQYXR0ZXJuLnRlc3QocG9zdGFsQ29kZSksXHJcbiAgICAgICAgICAgICAgICBidXN5SGFuZGxlOiBVSUJ1c3lIYW5kbGU7XHJcblxyXG4gICAgICAgICAgICBhY3Rpb25Db250ZXh0LmV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHBvc3RhbENvZGUgPT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyKCdFc3RpbWF0ZVNoaXBwaW5nVmFsaWRhdGlvbkZvcm0nLCB7IFBvc3RhbENvZGVFbXB0eTogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyKCdFc3RpbWF0ZVNoaXBwaW5nVmFsaWRhdGlvbkZvcm0nLCB7IFBvc3RhbENvZGVNYWxmb3JtZWQ6IHRydWUsIFBvc3RhbENvZGU6IGZvcm1WYWx1ZXMucG9zdGFsQ29kZSB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYnVzeUhhbmRsZSA9IHRoaXMuYXN5bmNCdXN5KCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLm9yZGVyU3VtbWFyeVNlcnZpY2Uuc2V0Q2hlYXBlc3RTaGlwcGluZ01ldGhvZFVzaW5nKHBvc3RhbENvZGUpXHJcbiAgICAgICAgICAgICAgICAudGhlbigoZGF0YTogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZU1vZGFsKGFjdGlvbkNvbnRleHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICAgICAgICAgICAgfSwgKHJlYXNvbjogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgRXJyb3JIYW5kbGVyLmluc3RhbmNlKCkub3V0cHV0RXJyb3JGcm9tQ29kZSgnUG9zdGFsQ29kZVVwZGF0ZUZhaWxlZCcpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5maW4oKCkgPT4gYnVzeUhhbmRsZS5kb25lKCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHByb2NlZWRUb0NoZWNrb3V0KGFjdGlvbkNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCk6IHZvaWQge1xyXG5cclxuICAgICAgICAgICAgdmFyIG5leHRTdGVwVXJsOiBzdHJpbmcgPSBhY3Rpb25Db250ZXh0LmVsZW1lbnRDb250ZXh0LmRhdGEoJ25leHRzdGVwdXJsJykudG9TdHJpbmcoKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghbmV4dFN0ZXBVcmwpIHtcclxuICAgICAgICAgICAgICAgIHRocm93ICdObyBuZXh0IHN0ZXAgVXJsIHdhcyBkZWZpbmVkLic7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIEFuYWx5dGljc1BsdWdpbi5zZXRDaGVja291dE9yaWdpbignQ2hlY2tvdXQnKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBidXN5OiBVSUJ1c3lIYW5kbGUgPSB0aGlzLmFzeW5jQnVzeSgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5vcmRlclN1bW1hcnlTZXJ2aWNlLmNsZWFuQ2FydCgpLmRvbmUoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBuZXh0U3RlcFVybDtcclxuICAgICAgICAgICAgfSwgcmVhc29uID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHdoaWxlIHByb2NlZWRpbmcgdG8gQ2hlY2tvdXQnLCByZWFzb24pO1xyXG4gICAgICAgICAgICAgICAgRXJyb3JIYW5kbGVyLmluc3RhbmNlKCkub3V0cHV0RXJyb3JGcm9tQ29kZSgnUHJvY2VlZFRvQ2hlY2tvdXRGYWlsZWQnKTtcclxuICAgICAgICAgICAgICAgIGJ1c3kuZG9uZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFNlcGFyYXRlcyB0aGUgbG9naWMgdGhhdCByZXRyaWV2ZXMgdGhlIGRhdGEgYW5kIG1hcHMgaXQgdG8gdGhlIGVudGl0eSBtb2RlbCBmcm9tIHRoZSBhcHBsaWNhdGlvbiBzZXJ2aWNlcyB0aGF0IGFjdHMgb24gdGhlIG1vZGVsLlxyXG4gICAgKi9cclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSVdpc2hMaXN0UmVwb3NpdG9yeSB7XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0IHRoZSBsaWdodHdlaWdodCB3aXNoTGlzdCBvZiB0aGUgY3VycmVudCBjdXN0b21lci5cclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXRXaXNoTGlzdFN1bW1hcnkoKTogUS5Qcm9taXNlPGFueT47XHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0IHRoZSB3aXNoTGlzdCBvZiB0aGUgY3VycmVudCBjdXN0b21lci5cclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXRXaXNoTGlzdCgpOiBRLlByb21pc2U8YW55PjtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBBZGQgYSBsaW5lIGl0ZW0gdG8gdGhlIHdpc2hMaXN0IG9mIHRoZSBjdXJyZW50IGN1c3RvbWVyLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIGFkZExpbmVJdGVtKHByb2R1Y3RJZDogc3RyaW5nLCB2YXJpYW50SWQ6IHN0cmluZywgcXVhbnRpdHk6IG51bWJlcik6IFEuUHJvbWlzZTx2b2lkPjtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEZWxldGUgYSBsaW5lIGl0ZW0gZnJvbSB0aGUgd2lzaExpc3Qgb2YgdGhlIGN1cnJlbnQgY3VzdG9tZXIuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgZGVsZXRlTGluZUl0ZW0obGluZUl0ZW1JZDogc3RyaW5nKTogUS5Qcm9taXNlPHZvaWQ+O1xyXG5cclxuICAgIH1cclxufVxyXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvQ2FjaGUvQ2FjaGVFcnJvci50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvQ2FjaGUvSUNhY2hlLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9DYWNoZS9JQ2FjaGVQb2xpY3kudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L012Yy9Db21wb3NlckNsaWVudC50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi9JV2lzaExpc3RSZXBvc2l0b3J5LnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIFdpc2hMaXN0UmVwb3NpdG9yeSBpbXBsZW1lbnRzIE9yY2tlc3RyYS5Db21wb3Nlci5JV2lzaExpc3RSZXBvc2l0b3J5IHtcclxuXHJcblxyXG4gICAgICAgIHB1YmxpYyBnZXRXaXNoTGlzdCgpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gQ29tcG9zZXJDbGllbnQuZ2V0KCcvYXBpL3dpc2hsaXN0L2dldHdpc2hsaXN0Jyk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGdldFdpc2hMaXN0U3VtbWFyeSgpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgIHJldHVybiBDb21wb3NlckNsaWVudC5nZXQoJy9hcGkvd2lzaGxpc3QvZ2V0d2lzaGxpc3RzdW1tYXJ5Jyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYWRkTGluZUl0ZW0ocHJvZHVjdElkOiBzdHJpbmcsIHZhcmlhbnRJZDogc3RyaW5nLCBxdWFudGl0eTogbnVtYmVyKTogUS5Qcm9taXNlPHZvaWQ+IHtcclxuXHJcbiAgICAgICAgICAgIGlmICghcHJvZHVjdElkKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBwcm9kdWN0IGlkIGlzIHJlcXVpcmVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChxdWFudGl0eSA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBxdWFudGl0eSBtdXN0IGJlIGdyZWF0ZXIgdGhhbiB6ZXJvJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgUHJvZHVjdElkOiBwcm9kdWN0SWQsXHJcbiAgICAgICAgICAgICAgICBWYXJpYW50SWQ6IHZhcmlhbnRJZCxcclxuICAgICAgICAgICAgICAgIFF1YW50aXR5OiBxdWFudGl0eVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIENvbXBvc2VyQ2xpZW50LnBvc3QoJy9hcGkvd2lzaGxpc3QvbGluZWl0ZW0nLCBkYXRhKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBkZWxldGVMaW5lSXRlbShsaW5lSXRlbUlkOiBzdHJpbmcpOiBRLlByb21pc2U8dm9pZD4ge1xyXG5cclxuICAgICAgICAgICAgaWYgKCFsaW5lSXRlbUlkKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1RoZSBsaW5lIGl0ZW0gaWQgaXMgcmVxdWlyZWQnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBMaW5lSXRlbUlkOiBsaW5lSXRlbUlkXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gQ29tcG9zZXJDbGllbnQucmVtb3ZlKCcvYXBpL3dpc2hsaXN0L2xpbmVpdGVtJywgZGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9Db250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L0V2ZW50cy9FdmVudFNjaGVkdWxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L2pxdWVyeVBsdWdpbnMvSVNlcmlhbGl6ZU9iamVjdEpxdWVyeVBsdWdpbi50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21tb24vU291cmNlL1R5cGVzY3JpcHQvTXlBY2NvdW50RXZlbnRzLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NvbW1vbi9Tb3VyY2UvVHlwZXNjcmlwdC9NZW1iZXJzaGlwU2VydmljZS50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBBY2NvdW50SGVhZGVyQ29udHJvbGxlciBleHRlbmRzIE9yY2tlc3RyYS5Db21wb3Nlci5Db250cm9sbGVyIHtcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG1lbWJlcnNoaXBTZXJ2aWNlOiBJTWVtYmVyc2hpcFNlcnZpY2UgPSBuZXcgTWVtYmVyc2hpcFNlcnZpY2UobmV3IE1lbWJlcnNoaXBSZXBvc2l0b3J5KCkpO1xyXG5cclxuICAgICAgICBwdWJsaWMgaW5pdGlhbGl6ZSgpIHtcclxuXHJcbiAgICAgICAgICAgIHN1cGVyLmluaXRpYWxpemUoKTtcclxuICAgICAgICAgICAgdGhpcy5yZWdpc3RlclN1YnNjcmlwdGlvbnMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCByZWdpc3RlclN1YnNjcmlwdGlvbnMoKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgc2NoZWR1bGVyID0gRXZlbnRTY2hlZHVsZXIuaW5zdGFuY2UoTXlBY2NvdW50RXZlbnRzW015QWNjb3VudEV2ZW50cy5Mb2dnZWRPdXRdKTtcclxuICAgICAgICAgICAgc2NoZWR1bGVyLnNldFBvc3RFdmVudENhbGxiYWNrKChkYXRhOiBhbnkpID0+IHRoaXMub25Mb2dnZWRPdXQoZGF0YSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBvbkxvZ2dlZE91dChkYXRhOiBhbnkpOiBRLlByb21pc2U8YW55PiB7XHJcbiAgICAgICAgICAgIHZhciBwcm9taXNlOiBRLlByb21pc2U8YW55PiA9IFEuZmNhbGwoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdmFyIG5ld0xvY2F0aW9uID0gZGVjb2RlVVJJQ29tcG9uZW50KGRhdGEuUmV0dXJuVXJsKSB8fCB3aW5kb3cubG9jYXRpb24uaHJlZjtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKG5ld0xvY2F0aW9uKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBmdWxsTG9nb3V0KGFjdGlvbkNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCkge1xyXG5cclxuICAgICAgICAgICAgdmFyIHJldHVyblVybFF1ZXJ5U3RyaW5nOiBzdHJpbmcgPSAnUmV0dXJuVXJsPSc7XHJcbiAgICAgICAgICAgIHZhciByZXR1cm5Vcmw6IHN0cmluZyA9ICcnO1xyXG5cclxuICAgICAgICAgICAgYWN0aW9uQ29udGV4dC5ldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluZGV4T2YocmV0dXJuVXJsUXVlcnlTdHJpbmcpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgIHJldHVyblVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmLnN1YnN0cmluZyh3aW5kb3cubG9jYXRpb24uaHJlZi5pbmRleE9mKHJldHVyblVybFF1ZXJ5U3RyaW5nKVxyXG4gICAgICAgICAgICAgICAgICAgICsgcmV0dXJuVXJsUXVlcnlTdHJpbmcubGVuZ3RoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGJ1c3kgPSB0aGlzLmFzeW5jQnVzeSh7ZWxlbWVudENvbnRleHQ6IGFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHR9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMubWVtYmVyc2hpcFNlcnZpY2UubG9nb3V0KHJldHVyblVybCwgZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAudGhlbihyZXN1bHQgPT4gdGhpcy5ldmVudEh1Yi5wdWJsaXNoKE15QWNjb3VudEV2ZW50c1tNeUFjY291bnRFdmVudHMuTG9nZ2VkT3V0XSwgeyBkYXRhOiByZXN1bHQgfSkpXHJcbiAgICAgICAgICAgICAgICAuZmluKCgpID0+IGJ1c3kuZG9uZSgpKVxyXG4gICAgICAgICAgICAgICAgLmRvbmUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvQ29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9qcXVlcnlQbHVnaW5zL0lTZXJpYWxpemVPYmplY3RKcXVlcnlQbHVnaW4udHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgTXlBY2NvdW50Q29udHJvbGxlciBleHRlbmRzIE9yY2tlc3RyYS5Db21wb3Nlci5Db250cm9sbGVyIHtcclxuXHJcbiAgICAgICAgcHVibGljIGluaXRpYWxpemUoKSB7XHJcbiAgICAgICAgICAgIHN1cGVyLmluaXRpYWxpemUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBnZXRGb3JtRGF0YShhY3Rpb25Db250ZXh0OiBJQ29udHJvbGxlckFjdGlvbkNvbnRleHQpOiBhbnkge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuICg8SVNlcmlhbGl6ZU9iamVjdEpxdWVyeVBsdWdpbj5hY3Rpb25Db250ZXh0LmVsZW1lbnRDb250ZXh0KS5zZXJpYWxpemVPYmplY3QoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCByZW5kZXJGb3JtRXJyb3JNZXNzYWdlcyhyZWFzb246IGFueSk6IHZvaWQge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5yZW5kZXIoJ0Zvcm1FcnJvck1lc3NhZ2VzJywgcmVhc29uKTtcclxuICAgICAgICAgICAgdGhpcy5jb250ZXh0LmNvbnRhaW5lci5maW5kKCdpbnB1dFt0eXBlPVwicGFzc3dvcmRcIl0nKS52YWwoJycpO1xyXG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyRm9ybXNGb3JWYWxpZGF0aW9uKHRoaXMuY29udGV4dC5jb250YWluZXIuZmluZCgnZm9ybScpLCB7XHJcbiAgICAgICAgICAgICAgICBzZXJ2ZXJWYWxpZGF0aW9uQ29udGFpbmVyOiAnW2RhdGEtdGVtcGxhdGVpZD1cIkZvcm1FcnJvck1lc3NhZ2VzXCJdJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvQ29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L2pxdWVyeVBsdWdpbnMvSVNlcmlhbGl6ZU9iamVjdEpxdWVyeVBsdWdpbi50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21tb24vU291cmNlL1R5cGVzY3JpcHQvQ3VzdG9tZXJTZXJ2aWNlLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NvbW1vbi9Tb3VyY2UvVHlwZXNjcmlwdC9NeUFjY291bnRFdmVudHMudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ29tbW9uL1NvdXJjZS9UeXBlc2NyaXB0L015QWNjb3VudFN0YXR1cy50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9NeUFjY291bnQvU291cmNlL1R5cGVzY3JpcHQvTXlBY2NvdW50Q29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9VSS9VSU1vZGFsLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcblxyXG4gICAgLy9UT0RPIHJlZmFjdG9yIG1vZGFsIDogY3JlYXRlIGEgZ2VuZXJpYyBtb2RhbCBzZXJ2aWNlXHJcbiAgICBleHBvcnQgY2xhc3MgQWRkcmVzc0xpc3RDb250cm9sbGVyIGV4dGVuZHMgT3Jja2VzdHJhLkNvbXBvc2VyLk15QWNjb3VudENvbnRyb2xsZXIge1xyXG5cclxuICAgICAgICBwcml2YXRlIGRlbGV0ZU1vZGFsRWxlbWVudFNlbGVjdG9yOiBzdHJpbmc9ICcjY29uZmlybWF0aW9uTW9kYWwnO1xyXG4gICAgICAgIHByaXZhdGUgdWlNb2RhbDogVUlNb2RhbDtcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGN1c3RvbWVyU2VydmljZTogSUN1c3RvbWVyU2VydmljZSA9IG5ldyBDdXN0b21lclNlcnZpY2UobmV3IEN1c3RvbWVyUmVwb3NpdG9yeSgpKTtcclxuXHJcbiAgICAgICAgcHVibGljIGluaXRpYWxpemUoKSB7XHJcblxyXG4gICAgICAgICAgICBzdXBlci5pbml0aWFsaXplKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnVpTW9kYWwgPSBuZXcgVUlNb2RhbCh3aW5kb3csIHRoaXMuZGVsZXRlTW9kYWxFbGVtZW50U2VsZWN0b3IsIHRoaXMuZGVsZXRlQWRkcmVzcywgdGhpcyk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyU3Vic2NyaXB0aW9ucygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHJlZ2lzdGVyU3Vic2NyaXB0aW9ucygpIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIuc3Vic2NyaWJlKE15QWNjb3VudEV2ZW50c1tNeUFjY291bnRFdmVudHMuQWRkcmVzc0RlbGV0ZWRdLCBlID0+IHRoaXMub25BZGRyZXNzRGVsZXRlZChlKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIG9uQWRkcmVzc0RlbGV0ZWQoZTogSUV2ZW50SW5mb3JtYXRpb24pIHtcclxuXHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBlLmRhdGE7XHJcbiAgICAgICAgICAgIHZhciAkY29udGFpbmVyID0gcmVzdWx0LiRjb250YWluZXI7XHJcbiAgICAgICAgICAgICRjb250YWluZXIucmVtb3ZlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAqIFJlcXVpcmVzIHRoZSBlbGVtZW50IGluIGFjdGlvbiBjb250ZXh0IHRvIGhhdmUgYSBkYXRhLWFkZHJlc3MtaWQuXHJcbiAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgc2V0RGVmYXVsdEFkZHJlc3MoYWN0aW9uQ29udGV4dDogSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0KTogdm9pZCB7XHJcblxyXG4gICAgICAgICAgICB2YXIgJGFkZHJlc3NMaXN0SXRlbTogSlF1ZXJ5ID0gJChhY3Rpb25Db250ZXh0LmVsZW1lbnRDb250ZXh0KS5jbG9zZXN0KCdbZGF0YS1hZGRyZXNzLWlkXScpO1xyXG4gICAgICAgICAgICB2YXIgYWRkcmVzc0lkID0gJGFkZHJlc3NMaXN0SXRlbS5kYXRhKCdhZGRyZXNzLWlkJyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgYnVzeSA9IHRoaXMuYXN5bmNCdXN5KHsgZWxlbWVudENvbnRleHQ6IGFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHQsIGNvbnRhaW5lckNvbnRleHQ6ICRhZGRyZXNzTGlzdEl0ZW0gfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmN1c3RvbWVyU2VydmljZS5zZXREZWZhdWx0QWRkcmVzcyhhZGRyZXNzSWQudG9TdHJpbmcoKSwgJycpXHJcbiAgICAgICAgICAgICAgICAudGhlbihyZXN1bHQgPT4gbG9jYXRpb24ucmVsb2FkKCksIHJlYXNvbiA9PiBjb25zb2xlLmVycm9yKHJlYXNvbikpXHJcbiAgICAgICAgICAgICAgICAuZmluKCgpID0+IGJ1c3kuZG9uZSgpKVxyXG4gICAgICAgICAgICAgICAgLmRvbmUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICogUmVxdWlyZXMgdGhlIGVsZW1lbnQgaW4gYWN0aW9uIGNvbnRleHQgdG8gaGF2ZSBhIGRhdGEtYWRkcmVzcy1pZC5cclxuICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBkZWxldGVBZGRyZXNzKGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCk6IHZvaWQge1xyXG4gICAgICAgICAgICBsZXQgZWxlbWVudCA9ICQoZXZlbnQudGFyZ2V0KTtcclxuICAgICAgICAgICAgdmFyICRhZGRyZXNzTGlzdEl0ZW06IEpRdWVyeSA9IGVsZW1lbnQuY2xvc2VzdCgnW2RhdGEtYWRkcmVzcy1pZF0nKTtcclxuICAgICAgICAgICAgdmFyIGFkZHJlc3NJZCA9ICRhZGRyZXNzTGlzdEl0ZW0uZGF0YSgnYWRkcmVzcy1pZCcpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGJ1c3kgPSB0aGlzLmFzeW5jQnVzeSh7IGVsZW1lbnRDb250ZXh0OiBlbGVtZW50LCBjb250YWluZXJDb250ZXh0OiAkYWRkcmVzc0xpc3RJdGVtIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jdXN0b21lclNlcnZpY2UuZGVsZXRlQWRkcmVzcyhhZGRyZXNzSWQsICcnKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4ocmVzdWx0ID0+IHRoaXMub25EZWxldGVBZGRyZXNzRnVsZmlsbGVkKHJlc3VsdCwgJGFkZHJlc3NMaXN0SXRlbSksIHJlYXNvbiA9PiBjb25zb2xlLmVycm9yKHJlYXNvbikpXHJcbiAgICAgICAgICAgICAgICAuZmluKCgpID0+IGJ1c3kuZG9uZSgpKVxyXG4gICAgICAgICAgICAgICAgLmRvbmUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgb25EZWxldGVBZGRyZXNzRnVsZmlsbGVkKHJlc3VsdDogYW55LCAkYWRkcmVzc0xpc3RJdGVtOiBKUXVlcnkpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0OiByZXN1bHQsXHJcbiAgICAgICAgICAgICAgICAkY29udGFpbmVyOiAkYWRkcmVzc0xpc3RJdGVtXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goTXlBY2NvdW50RXZlbnRzW015QWNjb3VudEV2ZW50cy5BZGRyZXNzRGVsZXRlZF0sIHsgZGF0YTogZGF0YSB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBkZWxldGVBZGRyZXNzQ29uZmlybShhY3Rpb25Db250ZXh0OiBJQ29udHJvbGxlckFjdGlvbkNvbnRleHQpIHtcclxuICAgICAgICAgICAgIHRoaXMudWlNb2RhbC5vcGVuTW9kYWwoYWN0aW9uQ29udGV4dC5ldmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0NvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0lDb250cm9sbGVyQWN0aW9uQ29udGV4dC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21tb24vU291cmNlL1R5cGVzY3JpcHQvTWVtYmVyc2hpcFNlcnZpY2UudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ29tbW9uL1NvdXJjZS9UeXBlc2NyaXB0L015QWNjb3VudEV2ZW50cy50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9NeUFjY291bnQvU291cmNlL1R5cGVzY3JpcHQvTXlBY2NvdW50Q29udHJvbGxlci50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBDaGFuZ2VQYXNzd29yZENvbnRyb2xsZXIgZXh0ZW5kcyBPcmNrZXN0cmEuQ29tcG9zZXIuTXlBY2NvdW50Q29udHJvbGxlciB7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBtZW1iZXJzaGlwU2VydmljZTogSU1lbWJlcnNoaXBTZXJ2aWNlID0gbmV3IE1lbWJlcnNoaXBTZXJ2aWNlKG5ldyBNZW1iZXJzaGlwUmVwb3NpdG9yeSgpKTtcclxuXHJcbiAgICAgICAgcHVibGljIGluaXRpYWxpemUoKSB7XHJcblxyXG4gICAgICAgICAgICBzdXBlci5pbml0aWFsaXplKCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJTdWJzY3JpcHRpb25zKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgcmVnaXN0ZXJTdWJzY3JpcHRpb25zKCkge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5yZWdpc3RlckZvcm1zRm9yVmFsaWRhdGlvbih0aGlzLmNvbnRleHQuY29udGFpbmVyLmZpbmQoJ2Zvcm0nKSk7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIuc3Vic2NyaWJlKE15QWNjb3VudEV2ZW50c1tNeUFjY291bnRFdmVudHMuUGFzc3dvcmRDaGFuZ2VkXSwgZSA9PiB0aGlzLm9uUGFzc3dvcmRDaGFuZ2VkKGUpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgb25QYXNzd29yZENoYW5nZWQoZTogSUV2ZW50SW5mb3JtYXRpb24pOiB2b2lkIHtcclxuXHJcbiAgICAgICAgICAgIHZhciByZXN1bHQgPSBlLmRhdGE7XHJcblxyXG4gICAgICAgICAgICBpZiAocmVzdWx0LlJldHVyblVybCkge1xyXG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2UoZGVjb2RlVVJJQ29tcG9uZW50KHJlc3VsdC5SZXR1cm5VcmwpKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcignQ2hhbmdlUGFzc3dvcmQnLCByZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWdpc3RlckZvcm1zRm9yVmFsaWRhdGlvbih0aGlzLmNvbnRleHQuY29udGFpbmVyLmZpbmQoJ2Zvcm0nKSwge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlcnZlclZhbGlkYXRpb25Db250YWluZXI6ICdbZGF0YS10ZW1wbGF0ZWlkPVwiQ2hhbmdlUGFzc3dvcmRTdWNjZXNzZnVsXCJdJ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEV2ZW50IHRyaWdnZXJlZCB3aGVuIHN1Ym1pdHRpbmcgdGhlIGNoYW5nZSBwYXNzd29yZCBmb3JtLlxyXG4gICAgICAgICAqIEBwYXJhbSB7SUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0fSBhY3Rpb25Db250ZXh0IC0gRXZlbnQgY29udGV4dC5cclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgY2hhbmdlUGFzc3dvcmQoYWN0aW9uQ29udGV4dDogSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0KTogdm9pZCB7XHJcblxyXG4gICAgICAgICAgICBhY3Rpb25Db250ZXh0LmV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgZm9ybURhdGE6IGFueSA9IHRoaXMuZ2V0Rm9ybURhdGEoYWN0aW9uQ29udGV4dCk7XHJcbiAgICAgICAgICAgIHZhciByZXR1cm5VcmxRdWVyeVN0cmluZzogc3RyaW5nID0gJ1JldHVyblVybD0nO1xyXG4gICAgICAgICAgICB2YXIgcmV0dXJuVXJsOiBzdHJpbmcgPSAnJztcclxuXHJcbiAgICAgICAgICAgIGlmICh3aW5kb3cubG9jYXRpb24uaHJlZi5pbmRleE9mKHJldHVyblVybFF1ZXJ5U3RyaW5nKSA+IC0xKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuVXJsID0gd2luZG93LmxvY2F0aW9uLmhyZWYuc3Vic3RyaW5nKHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluZGV4T2YocmV0dXJuVXJsUXVlcnlTdHJpbmcpXHJcbiAgICAgICAgICAgICAgICAgICAgKyByZXR1cm5VcmxRdWVyeVN0cmluZy5sZW5ndGgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgYnVzeSA9IHRoaXMuYXN5bmNCdXN5KHtlbGVtZW50Q29udGV4dDogYWN0aW9uQ29udGV4dC5lbGVtZW50Q29udGV4dH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5tZW1iZXJzaGlwU2VydmljZS5jaGFuZ2VQYXNzd29yZChmb3JtRGF0YSwgcmV0dXJuVXJsKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4ocmVzdWx0ID0+IHRoaXMub25DaGFuZ2VQYXNzd29yZEZ1bGZpbGxlZChyZXN1bHQpLCByZWFzb24gPT4gdGhpcy5yZW5kZXJGb3JtRXJyb3JNZXNzYWdlcyhyZWFzb24pKVxyXG4gICAgICAgICAgICAgICAgLmZpbigoKSA9PiBidXN5LmRvbmUoKSlcclxuICAgICAgICAgICAgICAgIC5kb25lKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIG9uQ2hhbmdlUGFzc3dvcmRGdWxmaWxsZWQocmVzdWx0OiBhbnkpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaChNeUFjY291bnRFdmVudHNbTXlBY2NvdW50RXZlbnRzLlBhc3N3b3JkQ2hhbmdlZF0sIHsgZGF0YTogcmVzdWx0IH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCJtb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuXHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgZXhwb3J0IHZhciB1cmxIZWxwZXIgPSB7XHJcbiAgICAgICBnZXRVUkxQYXJhbWV0ZXI6IGZ1bmN0aW9uKHVybCwgbmFtZSkgOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQoKG5ldyBSZWdFeHAoJ1s/fCZdJyArIG5hbWVcclxuICAgICAgICAgICAgKyAnPScgKyAnKFteJjtdKz8pKCZ8I3w7fCQpJykuZXhlYyh1cmwpIHx8IFssICcnXSlbMV0ucmVwbGFjZSgvXFwrL2csICclMjAnKSkgfHwgbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0NvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0lDb250cm9sbGVyQWN0aW9uQ29udGV4dC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9VdGlscy9VcmxIZWxwZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ29tbW9uL1NvdXJjZS9UeXBlc2NyaXB0L01lbWJlcnNoaXBTZXJ2aWNlLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NvbW1vbi9Tb3VyY2UvVHlwZXNjcmlwdC9NeUFjY291bnRFdmVudHMudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ29tbW9uL1NvdXJjZS9UeXBlc2NyaXB0L015QWNjb3VudFN0YXR1cy50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9NeUFjY291bnQvU291cmNlL1R5cGVzY3JpcHQvTXlBY2NvdW50Q29udHJvbGxlci50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBDcmVhdGVBY2NvdW50Q29udHJvbGxlciBleHRlbmRzIE9yY2tlc3RyYS5Db21wb3Nlci5NeUFjY291bnRDb250cm9sbGVyIHtcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG1lbWJlcnNoaXBTZXJ2aWNlOiBJTWVtYmVyc2hpcFNlcnZpY2UgPSBuZXcgTWVtYmVyc2hpcFNlcnZpY2UobmV3IE1lbWJlcnNoaXBSZXBvc2l0b3J5KCkpO1xyXG5cclxuICAgICAgICBwdWJsaWMgaW5pdGlhbGl6ZSgpIHtcclxuXHJcbiAgICAgICAgICAgIHN1cGVyLmluaXRpYWxpemUoKTtcclxuICAgICAgICAgICAgdGhpcy5yZWdpc3RlclN1YnNjcmlwdGlvbnMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCByZWdpc3RlclN1YnNjcmlwdGlvbnMoKSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyRm9ybXNGb3JWYWxpZGF0aW9uKHRoaXMuY29udGV4dC5jb250YWluZXIuZmluZCgnZm9ybScpKTtcclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5zdWJzY3JpYmUoTXlBY2NvdW50RXZlbnRzW015QWNjb3VudEV2ZW50cy5BY2NvdW50Q3JlYXRlZF0sIGUgPT4gdGhpcy5vbkFjY291bnRDcmVhdGVkKGUpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgb25BY2NvdW50Q3JlYXRlZChlOiBJRXZlbnRJbmZvcm1hdGlvbik6IHZvaWQge1xyXG5cclxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGUuZGF0YTtcclxuXHJcbiAgICAgICAgICAgIGlmIChyZXN1bHQuUmV0dXJuVXJsKSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZShkZWNvZGVVUklDb21wb25lbnQocmVzdWx0LlJldHVyblVybCkpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIoJ0NyZWF0ZUFjY291bnQnLCByZXN1bHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgY3JlYXRlQWNjb3VudChhY3Rpb25Db250ZXh0OiBJQ29udHJvbGxlckFjdGlvbkNvbnRleHQpIHtcclxuXHJcbiAgICAgICAgICAgIGFjdGlvbkNvbnRleHQuZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBmb3JtRGF0YTogYW55ID0gdGhpcy5nZXRGb3JtRGF0YShhY3Rpb25Db250ZXh0KTtcclxuICAgICAgICAgICAgdmFyIHJldHVyblVybFF1ZXJ5U3RyaW5nOiBzdHJpbmcgPSAnUmV0dXJuVXJsPSc7XHJcbiAgICAgICAgICAgIHZhciByZXR1cm5Vcmw6IHN0cmluZyA9ICcnO1xyXG5cclxuICAgICAgICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluZGV4T2YocmV0dXJuVXJsUXVlcnlTdHJpbmcpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgIHJldHVyblVybCA9IHVybEhlbHBlci5nZXRVUkxQYXJhbWV0ZXIobG9jYXRpb24uc2VhcmNoLCAnUmV0dXJuVXJsJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBidXN5ID0gdGhpcy5hc3luY0J1c3koeyBlbGVtZW50Q29udGV4dDogYWN0aW9uQ29udGV4dC5lbGVtZW50Q29udGV4dCB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMubWVtYmVyc2hpcFNlcnZpY2UucmVnaXN0ZXIoZm9ybURhdGEsIHJldHVyblVybClcclxuICAgICAgICAgICAgICAgIC50aGVuKHJlc3VsdCA9PiB0aGlzLm9uUmVnaXN0ZXJGdWxmaWxsZWQocmVzdWx0KSwgcmVhc29uID0+IHRoaXMucmVuZGVyRm9ybUVycm9yTWVzc2FnZXMocmVhc29uKSlcclxuICAgICAgICAgICAgICAgIC5maW4oKCkgPT4gYnVzeS5kb25lKCkpXHJcbiAgICAgICAgICAgICAgICAuZG9uZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBvblJlZ2lzdGVyRnVsZmlsbGVkKHJlc3VsdDogYW55KTogdm9pZCB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goTXlBY2NvdW50RXZlbnRzW015QWNjb3VudEV2ZW50cy5BY2NvdW50Q3JlYXRlZF0sIHsgZGF0YTogcmVzdWx0IH0pO1xyXG4gICAgICAgICAgICBpZiAocmVzdWx0LlN0YXR1cyA9PT0gTXlBY2NvdW50U3RhdHVzW015QWNjb3VudFN0YXR1cy5TdWNjZXNzXSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKE15QWNjb3VudEV2ZW50c1tNeUFjY291bnRFdmVudHMuTG9nZ2VkSW5dLCB7IGRhdGE6IHJlc3VsdCB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9Db250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9JQ29udHJvbGxlckFjdGlvbkNvbnRleHQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvanF1ZXJ5UGx1Z2lucy9JU2VyaWFsaXplT2JqZWN0SnF1ZXJ5UGx1Z2luLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L1V0aWxzL1VybEhlbHBlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9KUXVlcnlQbHVnaW5zL0lQYXJzbGV5SnF1ZXJ5UGx1Z2luLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L1ZhbGlkYXRpb24vSVBhcnNsZXkudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ29tbW9uL1NvdXJjZS9UeXBlc2NyaXB0L0N1c3RvbWVyU2VydmljZS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21tb24vU291cmNlL1R5cGVzY3JpcHQvTXlBY2NvdW50RXZlbnRzLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL015QWNjb3VudC9Tb3VyY2UvVHlwZXNjcmlwdC9NeUFjY291bnRDb250cm9sbGVyLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIEVkaXRBZGRyZXNzQ29udHJvbGxlciBleHRlbmRzIE9yY2tlc3RyYS5Db21wb3Nlci5NeUFjY291bnRDb250cm9sbGVyIHtcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIF9mb3JtSW5zdGFuY2VzOiBJUGFyc2xleVtdO1xyXG4gICAgICAgIHByb3RlY3RlZCBjdXN0b21lclNlcnZpY2U6IElDdXN0b21lclNlcnZpY2UgPSBuZXcgQ3VzdG9tZXJTZXJ2aWNlKG5ldyBDdXN0b21lclJlcG9zaXRvcnkoKSk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKCkge1xyXG5cclxuICAgICAgICAgICAgc3VwZXIuaW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyU3Vic2NyaXB0aW9ucygpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGJ1c3kgPSB0aGlzLmFzeW5jQnVzeSh7IG1zRGVsYXk6IDMwMCwgbG9hZGluZ0luZGljYXRvclNlbGVjdG9yOiAnLmxvYWRpbmctaW5kaWNhdG9yLXJlZ2lvbnMnIH0pO1xyXG5cclxuICAgICAgICAgICAgQ29tcG9zZXJDbGllbnQuZ2V0KCcvYXBpL2FkZHJlc3MvcmVnaW9ucycpXHJcbiAgICAgICAgICAgICAgICAudGhlbihyZWdpb25zID0+IHRoaXMucmVidWlsZFJlZ2lvblNlbGVjdG9yKHJlZ2lvbnMpKVxyXG4gICAgICAgICAgICAgICAgLmRvbmUoKCkgPT4gYnVzeS5kb25lKCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHJlZ2lzdGVyU3Vic2NyaXB0aW9ucygpIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJGb3Jtc0ZvclZhbGlkYXRpb24odGhpcy5jb250ZXh0LmNvbnRhaW5lci5maW5kKCdmb3JtJykpO1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnN1YnNjcmliZShNeUFjY291bnRFdmVudHNbTXlBY2NvdW50RXZlbnRzLkFkZHJlc3NDcmVhdGVkXSwgZSA9PiB0aGlzLm9uQWRkcmVzc0NyZWF0ZWRPclVwZGF0ZWQoZSkpO1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnN1YnNjcmliZShNeUFjY291bnRFdmVudHNbTXlBY2NvdW50RXZlbnRzLkFkZHJlc3NVcGRhdGVkXSwgZSA9PiB0aGlzLm9uQWRkcmVzc0NyZWF0ZWRPclVwZGF0ZWQoZSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBvbkFkZHJlc3NDcmVhdGVkT3JVcGRhdGVkKGU6IElFdmVudEluZm9ybWF0aW9uKSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gZS5kYXRhO1xyXG5cclxuICAgICAgICAgICAgaWYgKHJlc3VsdC5SZXR1cm5VcmwpIHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKGRlY29kZVVSSUNvbXBvbmVudChyZXN1bHQuUmV0dXJuVXJsKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIoJ0VkaXRBZGRyZXNzJywgcmVzdWx0KTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJGb3Jtc0ZvclZhbGlkYXRpb24odGhpcy5jb250ZXh0LmNvbnRhaW5lci5maW5kKCdmb3JtJyksIHtcclxuICAgICAgICAgICAgICAgICAgICBzZXJ2ZXJWYWxpZGF0aW9uQ29udGFpbmVyOiAnW2RhdGEtdGVtcGxhdGVpZD1cIkZvcm1FcnJvck1lc3NhZ2VzXCJdJ1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIFJlcmVuZGVyIHRoZSByZWdpb24gc2VsZWN0b3IsIGtlZXBpbmcgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCB2YWx1ZVxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgcmVidWlsZFJlZ2lvblNlbGVjdG9yKHJlZ2lvbnM6IGFueSkge1xyXG5cclxuICAgICAgICAgICAgdmFyIHNlbGVjdGVkUmVnaW9uOiBzdHJpbmcgPSB0aGlzLmNvbnRleHQuY29udGFpbmVyLmZpbmQoJ1tkYXRhLXRlbXBsYXRlaWQ9XCJBZGRyZXNzUmVnaW9uUGlja2VyXCJdJykudmFsKCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKCdBZGRyZXNzUmVnaW9uUGlja2VyJywgeyBSZWdpb25zOiByZWdpb25zLCBTZWxlY3RlZFJlZ2lvbiA6IHNlbGVjdGVkUmVnaW9ufSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYWRqdXN0UG9zdGFsQ29kZShhY3Rpb25Db250ZXh0OiBJQ29udHJvbGxlckFjdGlvbkNvbnRleHQpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgICAgIGFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHQudmFsKGFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHQudmFsKCkudG9VcHBlckNhc2UoKSk7XHJcbiAgICAgICAgICAgIF8uYWxsKHRoaXMuX2Zvcm1JbnN0YW5jZXMsIGZvcm1JbnN0YW5jZSA9PiBmb3JtSW5zdGFuY2UudmFsaWRhdGUoJ3NoaXBwaW5nLWJhc2VkLW9uJywgdHJ1ZSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGNyZWF0ZUFkZHJlc3MoYWN0aW9uQ29udGV4dDogSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0KTogdm9pZCB7XHJcblxyXG4gICAgICAgICAgICBhY3Rpb25Db250ZXh0LmV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgZm9ybURhdGE6IGFueSA9IHRoaXMuZ2V0Rm9ybURhdGEoYWN0aW9uQ29udGV4dCk7XHJcbiAgICAgICAgICAgIHZhciByZXR1cm5VcmxRdWVyeVN0cmluZzogc3RyaW5nID0gJ1JldHVyblVybD0nO1xyXG4gICAgICAgICAgICB2YXIgcmV0dXJuVXJsOiBzdHJpbmcgPSAnJztcclxuXHJcbiAgICAgICAgICAgIGlmICh3aW5kb3cubG9jYXRpb24uaHJlZi5pbmRleE9mKHJldHVyblVybFF1ZXJ5U3RyaW5nKSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm5VcmwgPSB1cmxIZWxwZXIuZ2V0VVJMUGFyYW1ldGVyKGxvY2F0aW9uLnNlYXJjaCwgJ1JldHVyblVybCcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgYnVzeSA9IHRoaXMuYXN5bmNCdXN5KHtlbGVtZW50Q29udGV4dDogYWN0aW9uQ29udGV4dC5lbGVtZW50Q29udGV4dH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jdXN0b21lclNlcnZpY2UuY3JlYXRlQWRkcmVzcyhmb3JtRGF0YSwgcmV0dXJuVXJsKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4ocmVzdWx0ID0+IHRoaXMub25DcmVhdGVBZGRyZXNzRnVsZmlsbGVkKHJlc3VsdCksIHJlYXNvbiA9PiB0aGlzLnJlbmRlckZvcm1FcnJvck1lc3NhZ2VzKHJlYXNvbikpXHJcbiAgICAgICAgICAgICAgICAuZmluKCgpID0+IGJ1c3kuZG9uZSgpKVxyXG4gICAgICAgICAgICAgICAgLmRvbmUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgb25DcmVhdGVBZGRyZXNzRnVsZmlsbGVkKHJlc3VsdDogYW55KTogdm9pZCB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goTXlBY2NvdW50RXZlbnRzW015QWNjb3VudEV2ZW50cy5BZGRyZXNzQ3JlYXRlZF0sIHsgZGF0YTogcmVzdWx0IH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHVwZGF0ZUFkZHJlc3MoYWN0aW9uQ29udGV4dDogSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0KTogdm9pZCB7XHJcblxyXG4gICAgICAgICAgICBhY3Rpb25Db250ZXh0LmV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgZm9ybURhdGE6IGFueSA9IHRoaXMuZ2V0Rm9ybURhdGEoYWN0aW9uQ29udGV4dCk7XHJcbiAgICAgICAgICAgIHZhciBhZGRyZXNzSWQ6IHN0cmluZyA9IHRoaXMuY29udGV4dC5jb250YWluZXIuZmluZCgnW2RhdGEtYWRkcmVzcy1pZF0nKS5kYXRhKCdhZGRyZXNzLWlkJykudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgdmFyIHJldHVyblVybFF1ZXJ5U3RyaW5nOiBzdHJpbmcgPSAnUmV0dXJuVXJsPSc7XHJcbiAgICAgICAgICAgIHZhciByZXR1cm5Vcmw6IHN0cmluZyA9ICcnO1xyXG5cclxuICAgICAgICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluZGV4T2YocmV0dXJuVXJsUXVlcnlTdHJpbmcpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgIHJldHVyblVybCA9IHVybEhlbHBlci5nZXRVUkxQYXJhbWV0ZXIobG9jYXRpb24uc2VhcmNoLCAnUmV0dXJuVXJsJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBidXN5ID0gdGhpcy5hc3luY0J1c3koe2VsZW1lbnRDb250ZXh0OiBhY3Rpb25Db250ZXh0LmVsZW1lbnRDb250ZXh0fSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmN1c3RvbWVyU2VydmljZS51cGRhdGVBZGRyZXNzKGZvcm1EYXRhLCBhZGRyZXNzSWQsIHJldHVyblVybClcclxuICAgICAgICAgICAgICAgIC50aGVuKHJlc3VsdCA9PiB0aGlzLm9uVXBkYXRlQWRkcmVzc0Z1bGZpbGxlZChyZXN1bHQpLCByZWFzb24gPT4gdGhpcy5yZW5kZXJGb3JtRXJyb3JNZXNzYWdlcyhyZWFzb24pKVxyXG4gICAgICAgICAgICAgICAgLmZpbigoKSA9PiBidXN5LmRvbmUoKSlcclxuICAgICAgICAgICAgICAgIC5kb25lKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIG9uVXBkYXRlQWRkcmVzc0Z1bGZpbGxlZChyZXN1bHQ6IGFueSk6IHZvaWQge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKE15QWNjb3VudEV2ZW50c1tNeUFjY291bnRFdmVudHMuQWRkcmVzc1VwZGF0ZWRdLCB7IGRhdGE6IHJlc3VsdCB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvQ29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NvbW1vbi9Tb3VyY2UvVHlwZXNjcmlwdC9NZW1iZXJzaGlwU2VydmljZS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21tb24vU291cmNlL1R5cGVzY3JpcHQvTXlBY2NvdW50RXZlbnRzLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NvbW1vbi9Tb3VyY2UvVHlwZXNjcmlwdC9NeUFjY291bnRTdGF0dXMudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vTXlBY2NvdW50L1NvdXJjZS9UeXBlc2NyaXB0L015QWNjb3VudENvbnRyb2xsZXIudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgRm9yZ290UGFzc3dvcmRDb250cm9sbGVyIGV4dGVuZHMgT3Jja2VzdHJhLkNvbXBvc2VyLk15QWNjb3VudENvbnRyb2xsZXIge1xyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgbWVtYmVyc2hpcFNlcnZpY2U6IElNZW1iZXJzaGlwU2VydmljZSA9IG5ldyBNZW1iZXJzaGlwU2VydmljZShuZXcgTWVtYmVyc2hpcFJlcG9zaXRvcnkoKSk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKCkge1xyXG5cclxuICAgICAgICAgICAgc3VwZXIuaW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyU3Vic2NyaXB0aW9ucygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHJlZ2lzdGVyU3Vic2NyaXB0aW9ucygpIHtcclxuXHJcbiAgICAgICAgICAgdGhpcy5yZWdpc3RlckZvcm1zRm9yVmFsaWRhdGlvbih0aGlzLmNvbnRleHQuY29udGFpbmVyLmZpbmQoJ2Zvcm0nKSk7XHJcbiAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5zdWJzY3JpYmUoTXlBY2NvdW50RXZlbnRzW015QWNjb3VudEV2ZW50cy5Gb3Jnb3RQYXNzd29yZEluc3RydWN0aW9uU2VudF0sIGUgPT4gdGhpcy5vbkZvcmdvdFBhc3N3b3JkSW5zdHJ1Y3Rpb25TZW50KGUpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgb25Gb3Jnb3RQYXNzd29yZEluc3RydWN0aW9uU2VudChlOiBJRXZlbnRJbmZvcm1hdGlvbikge1xyXG5cclxuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IGUuZGF0YTtcclxuXHJcbiAgICAgICAgICAgIGlmIChyZXN1bHQuUmV0dXJuVXJsKSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZShkZWNvZGVVUklDb21wb25lbnQocmVzdWx0LlJldHVyblVybCkpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIoJ0ZvcmdvdFBhc3N3b3JkJywgcmVzdWx0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRXZlbnQgdHJpZ2dlcmVkIHdoZW4gc3VibWl0dGluZyB0aGUgZm9yZ290IHBhc3N3b3JkIGZvcm0uXHJcbiAgICAgICAgICogQHBhcmFtIHtJQ29udHJvbGxlckFjdGlvbkNvbnRleHR9IGFjdGlvbkNvbnRleHQgLSBFdmVudCBjb250ZXh0LlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBmb3Jnb3RQYXNzd29yZChhY3Rpb25Db250ZXh0OiBJQ29udHJvbGxlckFjdGlvbkNvbnRleHQpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgICAgIGFjdGlvbkNvbnRleHQuZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBmb3JtRGF0YTogYW55ID0gdGhpcy5nZXRGb3JtRGF0YShhY3Rpb25Db250ZXh0KTtcclxuICAgICAgICAgICAgdmFyIGJ1c3kgPSB0aGlzLmFzeW5jQnVzeSh7ZWxlbWVudENvbnRleHQ6IGFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHR9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMubWVtYmVyc2hpcFNlcnZpY2UuZm9yZ290UGFzc3dvcmQoZm9ybURhdGEpXHJcbiAgICAgICAgICAgICAgICAudGhlbihyZXN1bHQgPT4gdGhpcy5vbkZvcmdvdFBhc3N3b3JkRnVsZmlsbGVkKHJlc3VsdCksIHJlYXNvbiA9PiB0aGlzLnJlbmRlckZvcm1FcnJvck1lc3NhZ2VzKHJlYXNvbikpXHJcbiAgICAgICAgICAgICAgICAuZmluKCgpID0+IGJ1c3kuZG9uZSgpKVxyXG4gICAgICAgICAgICAgICAgLmRvbmUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgb25Gb3Jnb3RQYXNzd29yZEZ1bGZpbGxlZChyZXN1bHQ6IGFueSk6IHZvaWQge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKE15QWNjb3VudEV2ZW50c1tNeUFjY291bnRFdmVudHMuRm9yZ290UGFzc3dvcmRJbnN0cnVjdGlvblNlbnRdLCB7IGRhdGE6IHJlc3VsdCB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvQ29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L2pxdWVyeVBsdWdpbnMvSVNlcmlhbGl6ZU9iamVjdEpxdWVyeVBsdWdpbi50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21tb24vU291cmNlL1R5cGVzY3JpcHQvTWVtYmVyc2hpcFNlcnZpY2UudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ29tbW9uL1NvdXJjZS9UeXBlc2NyaXB0L015QWNjb3VudEV2ZW50cy50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9NeUFjY291bnQvU291cmNlL1R5cGVzY3JpcHQvTXlBY2NvdW50Q29udHJvbGxlci50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBOZXdQYXNzd29yZENvbnRyb2xsZXIgZXh0ZW5kcyBPcmNrZXN0cmEuQ29tcG9zZXIuTXlBY2NvdW50Q29udHJvbGxlciB7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBtZW1iZXJzaGlwU2VydmljZTogSU1lbWJlcnNoaXBTZXJ2aWNlID0gbmV3IE1lbWJlcnNoaXBTZXJ2aWNlKG5ldyBNZW1iZXJzaGlwUmVwb3NpdG9yeSgpKTtcclxuXHJcbiAgICAgICAgcHVibGljIGluaXRpYWxpemUoKSB7XHJcblxyXG4gICAgICAgICAgICBzdXBlci5pbml0aWFsaXplKCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJTdWJzY3JpcHRpb25zKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgcmVnaXN0ZXJTdWJzY3JpcHRpb25zKCkge1xyXG5cclxuICAgICAgICAgICB0aGlzLnJlZ2lzdGVyRm9ybXNGb3JWYWxpZGF0aW9uKHRoaXMuY29udGV4dC5jb250YWluZXIuZmluZCgnZm9ybScpKTtcclxuICAgICAgICAgICB0aGlzLmV2ZW50SHViLnN1YnNjcmliZShNeUFjY291bnRFdmVudHNbTXlBY2NvdW50RXZlbnRzLlBhc3N3b3JkQ2hhbmdlZF0sIGUgPT4gdGhpcy5vblBhc3N3b3JkQ2hhbmdlZChlKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIG9uUGFzc3dvcmRDaGFuZ2VkKGU6IElFdmVudEluZm9ybWF0aW9uKTogdm9pZCB7XHJcblxyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gZS5kYXRhO1xyXG5cclxuICAgICAgICAgICAgaWYgKHJlc3VsdC5SZXR1cm5VcmwpIHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKGRlY29kZVVSSUNvbXBvbmVudChyZXN1bHQuUmV0dXJuVXJsKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcignTmV3UGFzc3dvcmQnLCByZXN1bHQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBFdmVudCB0cmlnZ2VyZWQgd2hlbiBzdWJtaXR0aW5nIHRoZSBuZXcgcGFzc3dvcmQgZm9ybS5cclxuICAgICAgICAgKiBAcGFyYW0ge0lDb250cm9sbGVyQWN0aW9uQ29udGV4dH0gYWN0aW9uQ29udGV4dCAtIEV2ZW50IGNvbnRleHQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIG5ld1Bhc3N3b3JkKGFjdGlvbkNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCk6IHZvaWQge1xyXG5cclxuICAgICAgICAgICAgYWN0aW9uQ29udGV4dC5ldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGZvcm1EYXRhOiBhbnkgPSB0aGlzLmdldEZvcm1EYXRhKGFjdGlvbkNvbnRleHQpO1xyXG4gICAgICAgICAgICB2YXIgcmV0dXJuVXJsUXVlcnlTdHJpbmc6IHN0cmluZyA9ICdSZXR1cm5Vcmw9JztcclxuICAgICAgICAgICAgdmFyIHRpY2tldFF1ZXJ5U3RyaW5nOiBzdHJpbmcgPSAndGlja2V0PSc7XHJcbiAgICAgICAgICAgIHZhciByZXR1cm5Vcmw6IHN0cmluZyA9ICcnO1xyXG4gICAgICAgICAgICB2YXIgdGlja2V0OiBzdHJpbmcgPSAnJztcclxuXHJcbiAgICAgICAgICAgIGlmICh3aW5kb3cubG9jYXRpb24uaHJlZi5pbmRleE9mKHJldHVyblVybFF1ZXJ5U3RyaW5nKSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm5VcmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZi5zdWJzdHJpbmcod2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZihyZXR1cm5VcmxRdWVyeVN0cmluZylcclxuICAgICAgICAgICAgICAgICAgICArIHJldHVyblVybFF1ZXJ5U3RyaW5nLmxlbmd0aCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh3aW5kb3cubG9jYXRpb24uaHJlZi5pbmRleE9mKHRpY2tldFF1ZXJ5U3RyaW5nKSA+IC0xKSB7XHJcbiAgICAgICAgICAgICAgICB0aWNrZXQgPSB3aW5kb3cubG9jYXRpb24uaHJlZi5zdWJzdHJpbmcod2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZih0aWNrZXRRdWVyeVN0cmluZylcclxuICAgICAgICAgICAgICAgICAgICArIHRpY2tldFF1ZXJ5U3RyaW5nLmxlbmd0aCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBidXN5ID0gdGhpcy5hc3luY0J1c3koe2VsZW1lbnRDb250ZXh0OiBhY3Rpb25Db250ZXh0LmVsZW1lbnRDb250ZXh0fSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLm1lbWJlcnNoaXBTZXJ2aWNlLnJlc2V0UGFzc3dvcmQoZm9ybURhdGEsIHRpY2tldCwgcmV0dXJuVXJsKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4ocmVzdWx0ID0+IHRoaXMub25SZXNldFBhc3N3b3JkRnVsZmlsbGVkKHJlc3VsdCksIHJlYXNvbiA9PiB0aGlzLnJlbmRlckZvcm1FcnJvck1lc3NhZ2VzKHJlYXNvbikpXHJcbiAgICAgICAgICAgICAgICAuZmluKCgpID0+IGJ1c3kuZG9uZSgpKVxyXG4gICAgICAgICAgICAgICAgLmRvbmUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgb25SZXNldFBhc3N3b3JkRnVsZmlsbGVkKHJlc3VsdDogYW55KTogdm9pZCB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goTXlBY2NvdW50RXZlbnRzW015QWNjb3VudEV2ZW50cy5QYXNzd29yZENoYW5nZWRdLCB7IGRhdGE6IHJlc3VsdCB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvQ29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9FdmVudHMvRXZlbnRTY2hlZHVsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvQ2FjaGUvQ2FjaGVQcm92aWRlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21tb24vU291cmNlL1R5cGVzY3JpcHQvTWVtYmVyc2hpcFNlcnZpY2UudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ29tbW9uL1NvdXJjZS9UeXBlc2NyaXB0L015QWNjb3VudEV2ZW50cy50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21tb24vU291cmNlL1R5cGVzY3JpcHQvTXlBY2NvdW50U3RhdHVzLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAvKipcclxuICAgICAqIENvbnRyb2xsZXIgZm9yIHRoZSBDb3Vwb25zIHNlY3Rpb24uXHJcbiAgICAgKi9cclxuICAgIGV4cG9ydCBjbGFzcyBSZXR1cm5pbmdDdXN0b21lckNvbnRyb2xsZXIgZXh0ZW5kcyBPcmNrZXN0cmEuQ29tcG9zZXIuQ29udHJvbGxlciB7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBtZW1iZXJzaGlwU2VydmljZTogSU1lbWJlcnNoaXBTZXJ2aWNlID0gbmV3IE1lbWJlcnNoaXBTZXJ2aWNlKG5ldyBNZW1iZXJzaGlwUmVwb3NpdG9yeSgpKTtcclxuICAgICAgICBwcm90ZWN0ZWQgY2FjaGVQcm92aWRlcjogSUNhY2hlUHJvdmlkZXIgPSBDYWNoZVByb3ZpZGVyLmluc3RhbmNlKCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKCkge1xyXG5cclxuICAgICAgICAgICAgc3VwZXIuaW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyU3Vic2NyaXB0aW9ucygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHJlZ2lzdGVyU3Vic2NyaXB0aW9ucygpIHtcclxuXHJcbiAgICAgICAgICAgdGhpcy5yZWdpc3RlckZvcm1zRm9yVmFsaWRhdGlvbih0aGlzLmNvbnRleHQuY29udGFpbmVyLmZpbmQoJ2Zvcm0nKSk7XHJcblxyXG4gICAgICAgICAgIHZhciBzY2hlZHVsZXIgPSBFdmVudFNjaGVkdWxlci5pbnN0YW5jZShNeUFjY291bnRFdmVudHNbTXlBY2NvdW50RXZlbnRzLkxvZ2dlZEluXSk7XHJcbiAgICAgICAgICAgIHNjaGVkdWxlci5zZXRQb3N0RXZlbnRDYWxsYmFjaygoZGF0YTogYW55KSA9PiB0aGlzLm9uTG9nZ2VkSW4oZGF0YSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBvbkxvZ2dlZEluKGRhdGE6IGFueSk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIHZhciBwcm9taXNlOiBRLlByb21pc2U8YW55PiA9IFEuZmNhbGwoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuUmV0dXJuVXJsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2UoZGVjb2RlVVJJQ29tcG9uZW50KGRhdGEuUmV0dXJuVXJsKSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKCdSZXR1cm5pbmdDdXN0b21lcicsIGRhdGEpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZ2lzdGVyRm9ybXNGb3JWYWxpZGF0aW9uKHRoaXMuY29udGV4dC5jb250YWluZXIuZmluZCgnZm9ybScpLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlcnZlclZhbGlkYXRpb25Db250YWluZXI6ICdbZGF0YS10ZW1wbGF0ZWlkPVwiUmV0dXJuaW5nQ3VzdG9tZXJGb3Jtc1NlcnZlclZhbGlkYXRpb25zXCJdJ1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRXZlbnQgdHJpZ2dlcmVkIHdoZW4gc3VibWl0dGluZyB0aGUgbG9naW4gZm9ybS5cclxuICAgICAgICAgKiBAcGFyYW0ge0lDb250cm9sbGVyQWN0aW9uQ29udGV4dH0gYWN0aW9uQ29udGV4dCAtIEV2ZW50IGNvbnRleHQuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGxvZ2luKGFjdGlvbkNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCkge1xyXG5cclxuICAgICAgICAgICAgYWN0aW9uQ29udGV4dC5ldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGJ1c3k6IFVJQnVzeUhhbmRsZSA9IHRoaXMuYXN5bmNCdXN5KCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmxvZ2luSW1wbChhY3Rpb25Db250ZXh0KVxyXG4gICAgICAgICAgICAgICAgLnRoZW4ocmVzdWx0ID0+IHRoaXMub25Mb2dpbkZ1bGZpbGxlZChyZXN1bHQsIGJ1c3kpKVxyXG4gICAgICAgICAgICAgICAgLmZhaWwocmVhc29uID0+IHRoaXMub25Mb2dpblJlamVjdGVkKHJlYXNvbiwgYnVzeSkpXHJcbiAgICAgICAgICAgICAgICAuZG9uZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBsb2dpbkltcGwoYWN0aW9uQ29udGV4dDogSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0KTogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgdmFyIGZvcm1EYXRhOiBhbnkgPSAoPElTZXJpYWxpemVPYmplY3RKcXVlcnlQbHVnaW4+YWN0aW9uQ29udGV4dC5lbGVtZW50Q29udGV4dCkuc2VyaWFsaXplT2JqZWN0KCk7XHJcbiAgICAgICAgICAgIHZhciBocmVmOiBzdHJpbmcgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcclxuICAgICAgICAgICAgdmFyIHJldHVyblVybEtleTogc3RyaW5nID0gJ1JldHVyblVybD0nO1xyXG4gICAgICAgICAgICB2YXIgcmV0dXJuVXJsOiBzdHJpbmcgPSBocmVmLmluZGV4T2YocmV0dXJuVXJsS2V5KSA+IC0xID8gaHJlZi5zdWJzdHJpbmcoaHJlZi5pbmRleE9mKHJldHVyblVybEtleSkgKyByZXR1cm5VcmxLZXkubGVuZ3RoKSA6ICcnO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubWVtYmVyc2hpcFNlcnZpY2UubG9naW4oZm9ybURhdGEsIHJldHVyblVybCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIG9uTG9naW5GdWxmaWxsZWQocmVzdWx0OiBhbnksIGJ1c3k6IFVJQnVzeUhhbmRsZSkge1xyXG5cclxuICAgICAgICAgICAgaWYgKHJlc3VsdC5TdGF0dXMgPT09IE15QWNjb3VudFN0YXR1c1tNeUFjY291bnRTdGF0dXMuU3VjY2Vzc10pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaChNeUFjY291bnRFdmVudHNbTXlBY2NvdW50RXZlbnRzLkxvZ2dlZEluXSwgeyBkYXRhOiByZXN1bHQgfSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhY2hlUHJvdmlkZXIuZGVmYXVsdENhY2hlLnNldCgnY3VzdG9tZXJJZCcsIG51bGwpLmRvbmUoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyRmFpbGVkRm9ybShyZXN1bHQuU3RhdHVzKTtcclxuICAgICAgICAgICAgICAgIGJ1c3kuZG9uZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIG9uTG9naW5SZWplY3RlZChyZWFzb246IGFueSwgYnVzeTogVUlCdXN5SGFuZGxlKSB7XHJcbiAgICAgICAgICAgIGxldCBlcnJvckNvZGUgPSBNeUFjY291bnRTdGF0dXNbTXlBY2NvdW50U3RhdHVzLkFqYXhGYWlsZWRdO1xyXG4gICAgICAgICAgICBpZiAocmVhc29uICYmIHJlYXNvbi5FcnJvcnMgJiYgcmVhc29uLkVycm9yc1swXSAmJiByZWFzb24uRXJyb3JzWzBdLkVycm9yQ29kZSkge1xyXG4gICAgICAgICAgICAgICAgZXJyb3JDb2RlID0gcmVhc29uLkVycm9yc1swXS5FcnJvckNvZGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJGYWlsZWRGb3JtKGVycm9yQ29kZSk7XHJcbiAgICAgICAgICAgIGJ1c3kuZG9uZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogUmVuZGVyIHRoZSB0ZW1wbGF0ZSBmb3IgbWVzc2FnZSBmYWlsdXJlc1xyXG4gICAgICAgICAqIFJlZ2lzdGVyIEZvcm1hdCB2YWxpZGF0aW9uIHRvIGhpZGUgdGhvc2Ugc2VydmVyIG1lc3NhZ2Ugb24gY2xpZW50IGludGVyYWN0aW9uXHJcbiAgICAgICAgICogUmVzZXQgcG90ZW50aWFsbHkgdW5zYWZlIGZpZWxkc1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByaXZhdGUgcmVuZGVyRmFpbGVkRm9ybShzdGF0dXM6IHN0cmluZykge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5yZW5kZXIoJ1JldHVybmluZ0N1c3RvbWVyRm9ybXNTZXJ2ZXJWYWxpZGF0aW9ucycsIHsgU3RhdHVzOiBzdGF0dXMgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNvbnRleHQuY29udGFpbmVyLmZpbmQoJ2lucHV0W3R5cGU9XCJwYXNzd29yZFwiXScpLnZhbCgnJyk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyRm9ybXNGb3JWYWxpZGF0aW9uKHRoaXMuY29udGV4dC5jb250YWluZXIuZmluZCgnZm9ybScpLCB7XHJcbiAgICAgICAgICAgICAgICBzZXJ2ZXJWYWxpZGF0aW9uQ29udGFpbmVyOiAnW2RhdGEtdGVtcGxhdGVpZD1cIlJldHVybmluZ0N1c3RvbWVyRm9ybXNTZXJ2ZXJWYWxpZGF0aW9uc1wiXSdcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXBhcmF0ZXMgdGhlIGxvZ2ljIHRoYXQgcmV0cmlldmVzIHRoZSBkYXRhIGFuZCBtYXBzIGl0IHRvIHRoZSBlbnRpdHkgbW9kZWwgZnJvbSB0aGUgYXBwbGljYXRpb24gc2VydmljZXMgdGhhdCBhY3RzIG9uIHRoZSBtb2RlbC5cclxuICAgICovXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElTaWduSW5IZWFkZXJSZXBvc2l0b3J5IHtcclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogR2V0IHRoZSBTaWduSW5IZWFkZXJcclxuICAgICAgICAgKi9cclxuICAgICAgICBnZXRTaWduSW5IZWFkZXIocGFyYW06IGFueSk6IFEuUHJvbWlzZTxhbnk+O1xyXG4gICAgfVxyXG59IiwiLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4vLi4vTXZjL0NvbXBvc2VyQ2xpZW50LnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuL0lTaWduSW5IZWFkZXJSZXBvc2l0b3J5LnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIFNpZ25JbkhlYWRlclJlcG9zaXRvcnkgaW1wbGVtZW50cyBPcmNrZXN0cmEuQ29tcG9zZXIuSVNpZ25JbkhlYWRlclJlcG9zaXRvcnkge1xyXG5cclxuICAgICAgICBwdWJsaWMgZ2V0U2lnbkluSGVhZGVyKHBhcmFtOiBhbnkpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gQ29tcG9zZXJDbGllbnQuZ2V0KCcvYXBpL21lbWJlcnNoaXAvc2lnbmluJyk7XHJcbiAgICAgICAgfSAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9SZXBvc2l0b3JpZXMvU2lnbkluSGVhZGVyUmVwb3NpdG9yeS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9DYWNoZS9DYWNoZVByb3ZpZGVyLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIFNpZ25JbkhlYWRlclNlcnZpY2Uge1xyXG5cclxuICAgICAgICBwcml2YXRlIGNhY2hlS2V5OiBzdHJpbmcgPSAnU2lnbkluSGVhZGVyVmlld01vZGVsJztcclxuICAgICAgICBwcml2YXRlIGNhY2hlUG9saWN5OiBJQ2FjaGVQb2xpY3kgPSB7IHNsaWRpbmdFeHBpcmF0aW9uOiAzMDAgfTsgLy8gNW1pblxyXG4gICAgICAgIHByaXZhdGUgY2FjaGVQcm92aWRlcjogSUNhY2hlUHJvdmlkZXI7XHJcbiAgICAgICAgcHJpdmF0ZSBzaWduSW5IZWFkZXJSZXBvc2l0b3J5OiBJU2lnbkluSGVhZGVyUmVwb3NpdG9yeTtcclxuXHJcbiAgICAgICAgY29uc3RydWN0b3Ioc2lnbkluSGVhZGVyUmVwb3NpdG9yeTogSVNpZ25JbkhlYWRlclJlcG9zaXRvcnkpIHtcclxuXHJcbiAgICAgICAgICAgIGlmICghc2lnbkluSGVhZGVyUmVwb3NpdG9yeSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvcjogc2lnbkluSGVhZGVyUmVwb3NpdG9yeSBpcyByZXF1aXJlZCcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNhY2hlUHJvdmlkZXIgPSBDYWNoZVByb3ZpZGVyLmluc3RhbmNlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2lnbkluSGVhZGVyUmVwb3NpdG9yeSA9IHNpZ25JbkhlYWRlclJlcG9zaXRvcnk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZ2V0U2lnbkluSGVhZGVyKHBhcmFtOiBhbnkpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRTaWduSW5IZWFkZXJGcm9tQ2FjaGUocGFyYW0pXHJcbiAgICAgICAgICAgICAgICAuZmFpbChyZWFzb24gPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5jYW5IYW5kbGUocmVhc29uKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRGcmVzaFNpZ25JbkhlYWRlcihwYXJhbSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyByZWFzb247XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgY2FuSGFuZGxlKHJlYXNvbjogYW55KTogYm9vbGVhbiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcmVhc29uID09PSBDYWNoZUVycm9yLkV4cGlyZWQgfHwgcmVhc29uID09PSBDYWNoZUVycm9yLk5vdEZvdW5kO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGdldEZyZXNoU2lnbkluSGVhZGVyKHBhcmFtOiBhbnkpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zaWduSW5IZWFkZXJSZXBvc2l0b3J5LmdldFNpZ25JbkhlYWRlcihwYXJhbSlcclxuICAgICAgICAgICAgICAgIC50aGVuKGNhcnQgPT4gdGhpcy5zZXRTaWduSW5IZWFkZXJUb0NhY2hlKHBhcmFtLCBjYXJ0KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYnVpbGRTaWduZWRJbkNhY2hlS2V5KHBhcmFtOiBhbnkpOiBzdHJpbmcge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGVLZXkgKyAnLicgKyBwYXJhbS5jdWx0dXJlSW5mbyArICcuJyArIHBhcmFtLmlzQXV0aGVudGljYXRlZCArICcuJyArIHBhcmFtLmVuY3J5cHRlZEN1c3RvbWVySWQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgaW52YWxpZGF0ZUNhY2hlKCk6IFEuUHJvbWlzZTx2b2lkPiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jYWNoZVByb3ZpZGVyLmN1c3RvbUNhY2hlLmZ1bGxDbGVhcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXRTaWduSW5IZWFkZXJGcm9tQ2FjaGUocGFyYW06IGFueSk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIHZhciBjb21wb3NlZEtleSA9IHRoaXMuYnVpbGRTaWduZWRJbkNhY2hlS2V5KHBhcmFtKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNhY2hlUHJvdmlkZXIuY3VzdG9tQ2FjaGUuZ2V0PGFueT4oY29tcG9zZWRLZXkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzZXRTaWduSW5IZWFkZXJUb0NhY2hlKHBhcmFtOiBhbnksIGNhcnQ6IGFueSk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIHZhciBjb21wb3NlZEtleSA9IHRoaXMuYnVpbGRTaWduZWRJbkNhY2hlS2V5KHBhcmFtKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNhY2hlUHJvdmlkZXIuY3VzdG9tQ2FjaGUuc2V0KGNvbXBvc2VkS2V5LCBjYXJ0LCB0aGlzLmNhY2hlUG9saWN5KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9Db250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L0V2ZW50cy9FdmVudFNjaGVkdWxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21tb24vU291cmNlL1R5cGVzY3JpcHQvTXlBY2NvdW50RXZlbnRzLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vU2lnbkluSGVhZGVyU2VydmljZS50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBTaWduSW5IZWFkZXJDb250cm9sbGVyIGV4dGVuZHMgT3Jja2VzdHJhLkNvbXBvc2VyLkNvbnRyb2xsZXIge1xyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgc2lnbkluSGVhZGVyU2VydmljZTogU2lnbkluSGVhZGVyU2VydmljZSA9IG5ldyBTaWduSW5IZWFkZXJTZXJ2aWNlKG5ldyBTaWduSW5IZWFkZXJSZXBvc2l0b3J5KCkpO1xyXG5cclxuICAgICAgICBwdWJsaWMgaW5pdGlhbGl6ZSgpIHtcclxuXHJcbiAgICAgICAgICAgIHN1cGVyLmluaXRpYWxpemUoKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZVNpZ25JbkhlYWRlcigpO1xyXG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyU3Vic2NyaXB0aW9ucygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBpbml0aWFsaXplU2lnbkluSGVhZGVyKCkge1xyXG4gICAgICAgICAgICB2YXIgY3VsdHVyZUluZm8gPSAkKCdodG1sJykuYXR0cignbGFuZycpO1xyXG4gICAgICAgICAgICB2YXIgcGFyYW0gPSB7IGN1bHR1cmVJbmZvIH07XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNpZ25JbkhlYWRlclNlcnZpY2UuZ2V0U2lnbkluSGVhZGVyKHBhcmFtKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oc2lnbkluSGVhZGVyID0+IHRoaXMucmVuZGVyKCdTaWduSW5IZWFkZXInLCBzaWduSW5IZWFkZXIpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCByZWdpc3RlclN1YnNjcmlwdGlvbnMoKSB7XHJcbiAgICAgICAgICAgIHZhciBsb2dnZWRJblNjaGVkdWxlciA9IEV2ZW50U2NoZWR1bGVyLmluc3RhbmNlKE15QWNjb3VudEV2ZW50c1tNeUFjY291bnRFdmVudHMuTG9nZ2VkSW5dKTtcclxuICAgICAgICAgICAgdmFyIGxvZ2dlZE91dFNjaGVkdWxlciA9IEV2ZW50U2NoZWR1bGVyLmluc3RhbmNlKE15QWNjb3VudEV2ZW50c1tNeUFjY291bnRFdmVudHMuTG9nZ2VkT3V0XSk7XHJcblxyXG4gICAgICAgICAgICBsb2dnZWRPdXRTY2hlZHVsZXIuc3Vic2NyaWJlKCBlID0+IHRoaXMub25Mb2dnZWRPdXQoZSkpO1xyXG4gICAgICAgICAgICBsb2dnZWRJblNjaGVkdWxlci5zdWJzY3JpYmUoIGUgPT4gdGhpcy5vbkxvZ2dlZEluKGUpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvbkxvZ2dlZE91dChlOiBJRXZlbnRJbmZvcm1hdGlvbik6IFEuUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2lnbkluSGVhZGVyU2VydmljZS5pbnZhbGlkYXRlQ2FjaGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvbkxvZ2dlZEluKGU6IElFdmVudEluZm9ybWF0aW9uKTogUS5Qcm9taXNlPGFueT4ge1xyXG4gICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2lnbkluSGVhZGVyU2VydmljZS5pbnZhbGlkYXRlQ2FjaGUoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0NvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0lDb250cm9sbGVyQWN0aW9uQ29udGV4dC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9VdGlscy9VcmxIZWxwZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ29tbW9uL1NvdXJjZS9UeXBlc2NyaXB0L0N1c3RvbWVyU2VydmljZS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9TaWduSW5IZWFkZXIvU291cmNlL1R5cGVzY3JpcHQvU2lnbkluSGVhZGVyU2VydmljZS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21tb24vU291cmNlL1R5cGVzY3JpcHQvTXlBY2NvdW50RXZlbnRzLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL015QWNjb3VudC9Tb3VyY2UvVHlwZXNjcmlwdC9NeUFjY291bnRDb250cm9sbGVyLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIFVwZGF0ZUFjY291bnRDb250cm9sbGVyIGV4dGVuZHMgT3Jja2VzdHJhLkNvbXBvc2VyLk15QWNjb3VudENvbnRyb2xsZXIge1xyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgY3VzdG9tZXJTZXJ2aWNlOiBJQ3VzdG9tZXJTZXJ2aWNlID0gbmV3IEN1c3RvbWVyU2VydmljZShuZXcgQ3VzdG9tZXJSZXBvc2l0b3J5KCkpO1xyXG4gICAgICAgIHByb3RlY3RlZCBzaWduSW5IZWFkZXJTZXJ2aWNlOiBTaWduSW5IZWFkZXJTZXJ2aWNlID0gbmV3IFNpZ25JbkhlYWRlclNlcnZpY2UobmV3IFNpZ25JbkhlYWRlclJlcG9zaXRvcnkoKSk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKCkge1xyXG5cclxuICAgICAgICAgICAgc3VwZXIuaW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyU3Vic2NyaXB0aW9ucygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHJlZ2lzdGVyU3Vic2NyaXB0aW9ucygpIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJGb3Jtc0ZvclZhbGlkYXRpb24odGhpcy5jb250ZXh0LmNvbnRhaW5lci5maW5kKCdmb3JtJykpO1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnN1YnNjcmliZShNeUFjY291bnRFdmVudHNbTXlBY2NvdW50RXZlbnRzLkFjY291bnRVcGRhdGVkXSwgZSA9PiB0aGlzLm9uQWNjb3VudFVwZGF0ZWQoZSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBvbkFjY291bnRVcGRhdGVkKGU6IElFdmVudEluZm9ybWF0aW9uKTogdm9pZCB7XHJcblxyXG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gZS5kYXRhO1xyXG5cclxuICAgICAgICAgICAgaWYgKHJlc3VsdC5SZXR1cm5VcmwpIHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZXBsYWNlKGRlY29kZVVSSUNvbXBvbmVudChyZXN1bHQuUmV0dXJuVXJsKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIoJ1VwZGF0ZUFjY291bnQnLCByZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWdpc3RlckZvcm1zRm9yVmFsaWRhdGlvbih0aGlzLmNvbnRleHQuY29udGFpbmVyLmZpbmQoJ2Zvcm0nKSwge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlcnZlclZhbGlkYXRpb25Db250YWluZXI6ICdbZGF0YS10ZW1wbGF0ZWlkPVwiVXBkYXRlQWNjb3VudFN1Y2Nlc3NmdWxcIl0nXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGVuYWJsZVN1Ym1pdEJ1dHRvbihhY3Rpb25Db250ZXh0OiBJQ29udHJvbGxlckFjdGlvbkNvbnRleHQpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgICAgICQoJyNVcGRhdGVBY2NvdW50U3VibWl0JykucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdXBkYXRlQWNjb3VudChhY3Rpb25Db250ZXh0OiBJQ29udHJvbGxlckFjdGlvbkNvbnRleHQpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgICAgIGFjdGlvbkNvbnRleHQuZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBmb3JtRGF0YTogYW55ID0gdGhpcy5nZXRGb3JtRGF0YShhY3Rpb25Db250ZXh0KTtcclxuICAgICAgICAgICAgdmFyIHJldHVyblVybFF1ZXJ5U3RyaW5nOiBzdHJpbmcgPSAnUmV0dXJuVXJsPSc7XHJcbiAgICAgICAgICAgIHZhciByZXR1cm5Vcmw6IHN0cmluZyA9ICcnO1xyXG5cclxuICAgICAgICAgICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5ocmVmLmluZGV4T2YocmV0dXJuVXJsUXVlcnlTdHJpbmcpID4gLTEpIHtcclxuICAgICAgICAgICAgICAgIHJldHVyblVybCA9IHVybEhlbHBlci5nZXRVUkxQYXJhbWV0ZXIobG9jYXRpb24uc2VhcmNoLCAnUmV0dXJuVXJsJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBidXN5ID0gdGhpcy5hc3luY0J1c3koe2VsZW1lbnRDb250ZXh0OiBhY3Rpb25Db250ZXh0LmVsZW1lbnRDb250ZXh0fSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmN1c3RvbWVyU2VydmljZS51cGRhdGVBY2NvdW50KGZvcm1EYXRhLCByZXR1cm5VcmwpXHJcbiAgICAgICAgICAgICAgICAudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaWduSW5IZWFkZXJTZXJ2aWNlLmludmFsaWRhdGVDYWNoZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLnRoZW4ocmVzdWx0ID0+IHRoaXMub25VcGRhdGVBY2NvdW50RnVsZmlsbGVkKHJlc3VsdCkpXHJcbiAgICAgICAgICAgICAgICAuZmFpbCgocmVhc29uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgdGhlIGFjY291bnQuJywgcmVhc29uKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckZvcm1FcnJvck1lc3NhZ2VzKHJlYXNvbik7XHJcblxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5maW4oKCkgPT4gYnVzeS5kb25lKCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uVXBkYXRlQWNjb3VudEZ1bGZpbGxlZChyZXN1bHQ6IGFueSk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaChNeUFjY291bnRFdmVudHNbTXlBY2NvdW50RXZlbnRzLkFjY291bnRVcGRhdGVkXSwgeyBkYXRhOiByZXN1bHQgfSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gUShyZXN1bHQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElXaXNoTGlzdFNlcnZpY2Uge1xyXG4gICAgICAgIGFkZExpbmVJdGVtKHByb2R1Y3RJZDogc3RyaW5nLCB2YXJpYW50SWQ/OiBzdHJpbmcpOiBRLlByb21pc2U8YW55PjtcclxuXHJcbiAgICAgICAgcmVtb3ZlTGluZUl0ZW0obGluZUl0ZW1JZDogc3RyaW5nKTogUS5Qcm9taXNlPGFueT47XHJcblxyXG4gICAgICAgIGdldFdpc2hMaXN0U3VtbWFyeSgpOiBRLlByb21pc2U8YW55PjtcclxuXHJcbiAgICAgICAgY2xlYXJDYWNoZSgpO1xyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvTXZjL0NvbXBvc2VyQ2xpZW50LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L0NhY2hlL0NhY2hlUHJvdmlkZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvQ2FjaGUvQ2FjaGVFcnJvci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi9JV2lzaExpc3RSZXBvc2l0b3J5LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vSVdpc2hMaXN0U2VydmljZS50cycgLz5cclxuXHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgV2lzaExpc3RTZXJ2aWNlIGltcGxlbWVudHMgSVdpc2hMaXN0U2VydmljZSB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIEdldHRpbmdGcmVzaFdpc2hMaXN0U3VtbWFyeTogUS5Qcm9taXNlPGFueT47XHJcblxyXG4gICAgICAgIHByaXZhdGUgd2lzaExpc3RSZXBvc2l0b3J5OiBJV2lzaExpc3RSZXBvc2l0b3J5O1xyXG4gICAgICAgIHByaXZhdGUgY2FjaGVLZXk6IHN0cmluZyA9ICdXaXNoTGlzdFN1bW1hcnlWaWV3TW9kZWwnO1xyXG4gICAgICAgIHByaXZhdGUgY2FjaGVQb2xpY3k6IElDYWNoZVBvbGljeSA9IHsgc2xpZGluZ0V4cGlyYXRpb246IDMwMCB9OyAvLyA1bWluXHJcbiAgICAgICAgcHJpdmF0ZSBjYWNoZVByb3ZpZGVyOiBJQ2FjaGVQcm92aWRlcjtcclxuICAgICAgICBwcml2YXRlIGV2ZW50SHViOiBJRXZlbnRIdWI7XHJcblxyXG4gICAgICAgIGNvbnN0cnVjdG9yKHdpc2hMaXN0UmVwb3NpdG9yeTogSVdpc2hMaXN0UmVwb3NpdG9yeSwgZXZlbnRIdWI6IElFdmVudEh1Yikge1xyXG5cclxuICAgICAgICAgICAgaWYgKCF3aXNoTGlzdFJlcG9zaXRvcnkpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3I6IHdpc2hMaXN0UmVwb3NpdG9yeSBpcyByZXF1aXJlZCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghZXZlbnRIdWIpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3I6IGV2ZW50SHViIGlzIHJlcXVpcmVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMud2lzaExpc3RSZXBvc2l0b3J5ID0gd2lzaExpc3RSZXBvc2l0b3J5O1xyXG4gICAgICAgICAgICB0aGlzLmNhY2hlUHJvdmlkZXIgPSBDYWNoZVByb3ZpZGVyLmluc3RhbmNlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIgPSBldmVudEh1YjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBnZXRXaXNoTGlzdFN1bW1hcnkoKTogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q2FjaGVXaXNoTGlzdFN1bW1hcnkoKVxyXG4gICAgICAgICAgICAgICAgLmZhaWwocmVhc29uID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuY2FuSGFuZGxlKHJlYXNvbikpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0RnJlc2hXaXNoTGlzdFN1bW1hcnkoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0FuIGVycm9yIG9jY3VyZWQgd2hpbGUgZ2V0dGluZyB0aGUgd2lzaExpc3QgZnJvbSBjYWNoZS4nLCByZWFzb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IHJlYXNvbjtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGdldEZyZXNoV2lzaExpc3RTdW1tYXJ5KCk6IFEuUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICAgICAgaWYgKCFXaXNoTGlzdFNlcnZpY2UuR2V0dGluZ0ZyZXNoV2lzaExpc3RTdW1tYXJ5KSB7XHJcbiAgICAgICAgICAgICAgICBXaXNoTGlzdFNlcnZpY2UuR2V0dGluZ0ZyZXNoV2lzaExpc3RTdW1tYXJ5ID1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLndpc2hMaXN0UmVwb3NpdG9yeS5nZXRXaXNoTGlzdFN1bW1hcnkoKS50aGVuKHdpc2hMaXN0ID0+IHRoaXMuc2V0V2lzaExpc3RUb0NhY2hlKHdpc2hMaXN0KSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIHRvIGF2b2lkIGdldHRpbmcgYSBmcmVzaCB3aXNobGlzdCBtdWx0aXBsZSB0aW1lcyB3aXRoaW4gYSBwYWdlIHNlc3Npb25cclxuICAgICAgICAgICAgcmV0dXJuIFdpc2hMaXN0U2VydmljZS5HZXR0aW5nRnJlc2hXaXNoTGlzdFN1bW1hcnlcclxuICAgICAgICAgICAgICAgIC5mYWlsKChyZWFzb24pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdBbiBlcnJvciBvY2N1cmVkIHdoaWxlIGdldHRpbmcgYSBmcmVzaCB3aXNoIGxpc3QuJywgcmVhc29uKTtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyByZWFzb247XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBnZXRTaWduSW5VcmwoKTogUS5Qcm9taXNlPGFueT4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRXaXNoTGlzdFN1bW1hcnkoKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4od2lzaExpc3QgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3aXNoTGlzdC5TaWduSW5Vcmw7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBnZXRMaW5lSXRlbShwcm9kdWN0SWQ6IHN0cmluZywgdmFyaWFudElkPzogc3RyaW5nKTogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0V2lzaExpc3RTdW1tYXJ5KCkudGhlbih3aXNoTGlzdCA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAod2lzaExpc3QgJiYgd2lzaExpc3QuSXRlbXMpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gd2lzaExpc3QuSXRlbXMuZmlsdGVyKGl0ID0+IGl0LlByb2R1Y3RJZCA9PT0gcHJvZHVjdElkICYmIGl0LlZhcmlhbnRJZCA9PT0gdmFyaWFudElkKVswXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYWRkTGluZUl0ZW0ocHJvZHVjdElkOiBzdHJpbmcsIHZhcmlhbnRJZD86IHN0cmluZywgcXVhbnRpdHk6IG51bWJlciA9IDEpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIFByb2R1Y3RJZDogcHJvZHVjdElkLFxyXG4gICAgICAgICAgICAgICAgVmFyaWFudElkOiB2YXJpYW50SWQsXHJcbiAgICAgICAgICAgICAgICBRdWFudGl0eTogcXVhbnRpdHlcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaCgnd2lzaExpc3RVcGRhdGluZycsIHsgZGF0YTogZGF0YSB9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLndpc2hMaXN0UmVwb3NpdG9yeS5hZGRMaW5lSXRlbShwcm9kdWN0SWQsIHZhcmlhbnRJZCwgcXVhbnRpdHkpXHJcbiAgICAgICAgICAgICAgICAudGhlbih3aXNoTGlzdCA9PiB0aGlzLnNldFdpc2hMaXN0VG9DYWNoZSh3aXNoTGlzdCkpXHJcbiAgICAgICAgICAgICAgICAudGhlbih3aXNoTGlzdCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKCd3aXNoTGlzdFVwZGF0ZWQnLCB7IGRhdGE6IHdpc2hMaXN0IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3aXNoTGlzdDtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuZmFpbChyZWFzb24gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2xlYXJDYWNoZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IHJlYXNvbjtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHJlbW92ZUxpbmVJdGVtKGxpbmVJdGVtSWQ6IHN0cmluZyk6IFEuUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBMaW5lSXRlbUlkOiBsaW5lSXRlbUlkXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goJ3dpc2hMaXN0VXBkYXRpbmcnLCB7IGRhdGE6IGRhdGEgfSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy53aXNoTGlzdFJlcG9zaXRvcnkuZGVsZXRlTGluZUl0ZW0obGluZUl0ZW1JZClcclxuICAgICAgICAgICAgICAgIC50aGVuKHdpc2hMaXN0ID0+IHRoaXMuc2V0V2lzaExpc3RUb0NhY2hlKHdpc2hMaXN0KSlcclxuICAgICAgICAgICAgICAgIC50aGVuKHdpc2hMaXN0ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goJ3dpc2hMaXN0VXBkYXRlZCcsIHsgZGF0YTogd2lzaExpc3QgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHdpc2hMaXN0O1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5mYWlsKHJlYXNvbiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbGVhckNhY2hlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgcmVhc29uO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgY2xlYXJDYWNoZSgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGVQcm92aWRlci5kZWZhdWx0Q2FjaGUuY2xlYXIodGhpcy5jYWNoZUtleSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgZ2V0Q2FjaGVXaXNoTGlzdFN1bW1hcnkoKTogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FjaGVQcm92aWRlci5kZWZhdWx0Q2FjaGUuZ2V0PGFueT4odGhpcy5jYWNoZUtleSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgc2V0V2lzaExpc3RUb0NhY2hlKHdpc2hMaXN0OiBhbnkpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jYWNoZVByb3ZpZGVyLmRlZmF1bHRDYWNoZS5zZXQodGhpcy5jYWNoZUtleSwgd2lzaExpc3QsIHRoaXMuY2FjaGVQb2xpY3kpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBjYW5IYW5kbGUocmVhc29uOiBhbnkpOiBib29sZWFuIHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiByZWFzb24gPT09IENhY2hlRXJyb3IuRXhwaXJlZCB8fCByZWFzb24gPT09IENhY2hlRXJyb3IuTm90Rm91bmQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0NvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0lDb250cm9sbGVyQWN0aW9uQ29udGV4dC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5DYXJ0LlVJL1dpc2hMaXN0L1NvdXJjZS9UeXBlc2NyaXB0L1dpc2hMaXN0UmVwb3NpdG9yeS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5DYXJ0LlVJL1dpc2hMaXN0L1NvdXJjZS9UeXBlc2NyaXB0L1NlcnZpY2VzL1dpc2hMaXN0U2VydmljZS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5DYXJ0LlVJL0NhcnRTdW1tYXJ5L1NvdXJjZS9UeXBlc2NyaXB0L0NhcnRTZXJ2aWNlLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L1JlcG9zaXRvcmllcy9DYXJ0UmVwb3NpdG9yeS50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBXaXNoTGlzdENvbnRyb2xsZXIgZXh0ZW5kcyBPcmNrZXN0cmEuQ29tcG9zZXIuQ29udHJvbGxlciB7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBfd2lzaExpc3RTZXJ2aWNlOiBJV2lzaExpc3RTZXJ2aWNlID0gbmV3IFdpc2hMaXN0U2VydmljZShuZXcgV2lzaExpc3RSZXBvc2l0b3J5KCksIHRoaXMuZXZlbnRIdWIpO1xyXG4gICAgICAgIHByb3RlY3RlZCBfY2FydFNlcnZpY2U6IENhcnRTZXJ2aWNlID0gbmV3IENhcnRTZXJ2aWNlKG5ldyBDYXJ0UmVwb3NpdG9yeSgpLCB0aGlzLmV2ZW50SHViKTtcclxuXHJcbiAgICAgICAgcHVibGljIGluaXRpYWxpemUoKSB7XHJcblxyXG4gICAgICAgICAgICBzdXBlci5pbml0aWFsaXplKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgYWRkVG9DYXJ0KGFjdGlvbkNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCkge1xyXG4gICAgICAgICAgICB2YXIgY29udGV4dDogSlF1ZXJ5ID0gYWN0aW9uQ29udGV4dC5lbGVtZW50Q29udGV4dDtcclxuICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IGNvbnRleHQuY2xvc2VzdCgnLndpc2hsaXN0LXRpbGUnKTtcclxuICAgICAgICAgICAgdmFyIHByb2R1Y3RJZDogc3RyaW5nID0gPGFueT5jb250ZXh0LmRhdGEoJ3Byb2R1Y3RpZCcpO1xyXG4gICAgICAgICAgICB2YXIgcHJpY2U6IHN0cmluZyA9IDxhbnk+Y29udGV4dC5kYXRhKCdwcmljZScpO1xyXG4gICAgICAgICAgICB2YXIgYnJhbmQ6IHN0cmluZyA9IDxhbnk+Y29udGV4dC5kYXRhKCdicmFuZCcpO1xyXG4gICAgICAgICAgICB2YXIgdmFyaWFudElkOiBzdHJpbmcgPSA8YW55PmNvbnRleHQuZGF0YSgndmFyaWFudGlkJyk7XHJcbiAgICAgICAgICAgIHZhciB2YXJpYW50OiBzdHJpbmcgPSA8YW55PmNvbnRleHQuZGF0YSgndmFyaWFudCcpO1xyXG4gICAgICAgICAgICB2YXIgbmFtZTogc3RyaW5nID0gPGFueT5jb250ZXh0LmRhdGEoJ25hbWUnKTtcclxuICAgICAgICAgICAgdmFyIGNhdGVnb3J5OiBzdHJpbmcgPSA8YW55PmNvbnRleHQuZGF0YSgnY2F0ZWdvcnknKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaCgnd2lzaExpc3RMaW5lSXRlbUFkZGluZ1RvQ2FydCcsIHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IHRoaXMuZ2V0UHJvZHVjdERhdGFGb3JBbmFseXRpY3MocHJvZHVjdElkLCB2YXJpYW50LCBuYW1lLCBwcmljZSwgYnJhbmQsIGNhdGVnb3J5KVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGNvbnRhaW5lci5hZGRDbGFzcygnaXMtbG9hZGluZycpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fY2FydFNlcnZpY2UuYWRkTGluZUl0ZW0ocHJvZHVjdElkLCBwcmljZSwgdmFyaWFudElkLCAxKVxyXG4gICAgICAgICAgICAgICAgLmZpbigoKSA9PiBjb250YWluZXIucmVtb3ZlQ2xhc3MoJ2lzLWxvYWRpbmcnKSk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBnZXRMaXN0TmFtZUZvckFuYWx5dGljcygpOiBzdHJpbmcge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0xpc3ROYW1lIG5vdCBkZWZpbmVkIGZvciB0aGlzIGNvbnRyb2xsZXInKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBnZXRQcm9kdWN0RGF0YUZvckFuYWx5dGljcyhwcm9kdWN0SWQsIHZhcmlhbnQsIGRpc3BsYXlOYW1lLCBwcmljZSwgYnJhbmQsIGNhdGVnb3J5KTogYW55IHtcclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgTGlzdDogdGhpcy5nZXRMaXN0TmFtZUZvckFuYWx5dGljcygpLFxyXG4gICAgICAgICAgICAgICAgUHJvZHVjdElkOiBwcm9kdWN0SWQsXHJcbiAgICAgICAgICAgICAgICBWYXJpYW50OiB2YXJpYW50LFxyXG4gICAgICAgICAgICAgICAgRGlzcGxheU5hbWU6IGRpc3BsYXlOYW1lLFxyXG4gICAgICAgICAgICAgICAgTGlzdFByaWNlOiBwcmljZSxcclxuICAgICAgICAgICAgICAgIEJyYW5kOiBicmFuZCxcclxuICAgICAgICAgICAgICAgIENhdGVnb3J5SWQ6IGNhdGVnb3J5LFxyXG4gICAgICAgICAgICAgICAgUXVhbnRpdHk6IDFcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9Db250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9JQ29udHJvbGxlckFjdGlvbkNvbnRleHQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9XaXNoTGlzdENvbnRyb2xsZXIudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgTXlXaXNoTGlzdENvbnRyb2xsZXIgZXh0ZW5kcyBPcmNrZXN0cmEuQ29tcG9zZXIuV2lzaExpc3RDb250cm9sbGVyIHtcclxuXHJcbiAgICAgICAgcHVibGljIGluaXRpYWxpemUoKSB7XHJcblxyXG4gICAgICAgICAgICBzdXBlci5pbml0aWFsaXplKCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJTdWJzY3JpcHRpb25zKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgcmVnaXN0ZXJTdWJzY3JpcHRpb25zKCk6IHZvaWQge1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnN1YnNjcmliZSgnd2lzaExpc3RVcGRhdGVkJywgKGU6IElFdmVudEluZm9ybWF0aW9uKSA9PiB0aGlzLm9uV2lzaExpc3RVcGRhdGVkKGUpKTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBwdWJsaWMgY29weVNoYXJlVXJsKGFjdGlvbkNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCkge1xyXG4gICAgICAgICAgICB2YXIgc2hhcmVVcmwgPSAkKCcjdHh0U2hhcmVVcmwnKTtcclxuICAgICAgICAgICAgdmFyIHN1Y2NlZWQ7XHJcblxyXG4gICAgICAgICAgICBzaGFyZVVybC5mb2N1cygpLnNlbGVjdCgpO1xyXG5cclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHN1Y2NlZWQgPSBkb2N1bWVudC5leGVjQ29tbWFuZCgnY29weScpO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICBzdWNjZWVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaCgnd2lzaExpc3RDb3B5aW5nU2hhcmVVcmwnLCB7XHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7fVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBzdWNjZWVkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGRlbGV0ZUxpbmVJdGVtKGFjdGlvbkNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCkge1xyXG4gICAgICAgICAgICB2YXIgY29udGV4dDogSlF1ZXJ5ID0gYWN0aW9uQ29udGV4dC5lbGVtZW50Q29udGV4dDtcclxuICAgICAgICAgICAgdmFyIGxpbmVJdGVtSWQ6IHN0cmluZyA9IDxhbnk+Y29udGV4dC5kYXRhKCdsaW5laXRlbWlkJyk7XHJcbiAgICAgICAgICAgIHZhciBjb250YWluZXIgPSBjb250ZXh0LmNsb3Nlc3QoJy53aXNobGlzdC10aWxlJyk7XHJcblxyXG4gICAgICAgICAgICBjb250YWluZXIuYWRkQ2xhc3MoJ2lzLWxvYWRpbmcnKTtcclxuICAgICAgICAgICAgdGhpcy5fd2lzaExpc3RTZXJ2aWNlLnJlbW92ZUxpbmVJdGVtKGxpbmVJdGVtSWQpXHJcbiAgICAgICAgICAgICAgICAudGhlbih3aXNoTGlzdCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLnBhcmVudCgpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5maW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRhaW5lci5yZW1vdmVDbGFzcygnaXMtbG9hZGluZycpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb25XaXNoTGlzdFVwZGF0ZWQoZTogSUV2ZW50SW5mb3JtYXRpb24pOiB2b2lkIHtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJXaXNoTGlzdFF1YW50aXR5KGUuZGF0YSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZS5kYXRhLlRvdGFsUXVhbnRpdHkgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dC53aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCByZW5kZXJXaXNoTGlzdFF1YW50aXR5KHdpc2hMaXN0KTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKCdXaXNoTGlzdFF1YW50aXR5Jywgd2lzaExpc3QpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGdldExpc3ROYW1lRm9yQW5hbHl0aWNzKCk6IHN0cmluZyB7XHJcbiAgICAgICAgICAgIHJldHVybiAnTXkgV2lzaCBMaXN0JztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvQ29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9FdmVudHMvRXZlbnRTY2hlZHVsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuQ2FydC5VSS9XaXNoTGlzdC9Tb3VyY2UvVHlwZVNjcmlwdC9XaXNoTGlzdFJlcG9zaXRvcnkudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvRXZlbnRzL0V2ZW50SHViLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L0V2ZW50cy9JRXZlbnRJbmZvcm1hdGlvbi50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5NeUFjY291bnQuVUkvQ29tbW9uL1NvdXJjZS9UeXBlc2NyaXB0L015QWNjb3VudEV2ZW50cy50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5DYXJ0LlVJL1dpc2hMaXN0L1NvdXJjZS9UeXBlc2NyaXB0L1NlcnZpY2VzL1dpc2hMaXN0U2VydmljZS50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBXaXNoTGlzdEluSGVhZGVyQ29udHJvbGxlciBleHRlbmRzIE9yY2tlc3RyYS5Db21wb3Nlci5Db250cm9sbGVyIHtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBfd2lzaExpc3RTZXJ2aWNlOiBJV2lzaExpc3RTZXJ2aWNlID0gbmV3IFdpc2hMaXN0U2VydmljZShuZXcgV2lzaExpc3RSZXBvc2l0b3J5KCksIHRoaXMuZXZlbnRIdWIpO1xyXG5cclxuICAgICAgICBwdWJsaWMgaW5pdGlhbGl6ZSgpIHtcclxuXHJcbiAgICAgICAgICAgIHN1cGVyLmluaXRpYWxpemUoKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZVdpc2hMaXN0UXVhbnRpdHkoKTtcclxuICAgICAgICAgICAgdGhpcy5yZWdpc3RlclN1YnNjcmlwdGlvbnMoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgaW5pdGlhbGl6ZVdpc2hMaXN0UXVhbnRpdHkoKTogdm9pZCB7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuY29udGV4dC52aWV3TW9kZWwuSXNBdXRoZW50aWNhdGVkKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl93aXNoTGlzdFNlcnZpY2UuY2xlYXJDYWNoZSgpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLl93aXNoTGlzdFNlcnZpY2UuZ2V0V2lzaExpc3RTdW1tYXJ5KClcclxuICAgICAgICAgICAgICAgIC5kb25lKHdpc2hMaXN0ID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFfLmlzRW1wdHkod2lzaExpc3QpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyV2lzaExpc3Qod2lzaExpc3QpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHJlZ2lzdGVyU3Vic2NyaXB0aW9ucygpOiB2b2lkIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBsb2dnZWRJblNjaGVkdWxlciA9IEV2ZW50U2NoZWR1bGVyLmluc3RhbmNlKE15QWNjb3VudEV2ZW50c1tNeUFjY291bnRFdmVudHMuTG9nZ2VkSW5dKTtcclxuICAgICAgICAgICAgdmFyIGxvZ2dlZE91dFNjaGVkdWxlciA9IEV2ZW50U2NoZWR1bGVyLmluc3RhbmNlKE15QWNjb3VudEV2ZW50c1tNeUFjY291bnRFdmVudHMuTG9nZ2VkT3V0XSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnN1YnNjcmliZSgnd2lzaExpc3RVcGRhdGVkJywgKGU6IElFdmVudEluZm9ybWF0aW9uKSA9PiB0aGlzLm9uV2lzaExpc3RVcGRhdGVkKGUpKTtcclxuXHJcbiAgICAgICAgICAgIGxvZ2dlZE91dFNjaGVkdWxlci5zdWJzY3JpYmUoKGU6IElFdmVudEluZm9ybWF0aW9uKSA9PiB0aGlzLm9uUmVmcmVzaFVzZXIoZSkpO1xyXG4gICAgICAgICAgICBsb2dnZWRJblNjaGVkdWxlci5zdWJzY3JpYmUoKGU6IElFdmVudEluZm9ybWF0aW9uKSA9PiB0aGlzLm9uUmVmcmVzaFVzZXIoZSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uV2lzaExpc3RVcGRhdGVkKGU6IElFdmVudEluZm9ybWF0aW9uKTogdm9pZCB7XHJcblxyXG4gICAgICAgICAgICB2YXIgd2lzaExpc3QgPSBlLmRhdGE7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyV2lzaExpc3Qod2lzaExpc3QpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uUmVmcmVzaFVzZXIoZTogSUV2ZW50SW5mb3JtYXRpb24pOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fd2lzaExpc3RTZXJ2aWNlLmNsZWFyQ2FjaGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCByZW5kZXJXaXNoTGlzdCh3aXNoTGlzdDogYW55KTogdm9pZCB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcignV2lzaExpc3RRdWFudGl0eScsIHdpc2hMaXN0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvbkVycm9yKHJlYXNvbjogYW55KTogdm9pZCB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEFuIGVycm9yIG9jY3VyZWQgd2hpbGUgcmVuZGVyaW5nIHRoZSB3aXNoTGlzdCB3aXRoIHRoZSBXaXNoTGlzdEluSGVhZGVyLmAsIHJlYXNvbik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0NvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0lDb250cm9sbGVyQWN0aW9uQ29udGV4dC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5DYXJ0LlVJL1dpc2hMaXN0L1NvdXJjZS9UeXBlc2NyaXB0L1dpc2hMaXN0UmVwb3NpdG9yeS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5DYXJ0LlVJL1dpc2hMaXN0L1NvdXJjZS9UeXBlc2NyaXB0L1NlcnZpY2VzL1dpc2hMaXN0U2VydmljZS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5DYXJ0LlVJL0NhcnRTdW1tYXJ5L1NvdXJjZS9UeXBlc2NyaXB0L0NhcnRTZXJ2aWNlLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L1JlcG9zaXRvcmllcy9DYXJ0UmVwb3NpdG9yeS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9XaXNoTGlzdC9Tb3VyY2UvVHlwZXNjcmlwdC9XaXNoTGlzdENvbnRyb2xsZXIudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgU2hhcmVkV2lzaExpc3RDb250cm9sbGVyIGV4dGVuZHMgT3Jja2VzdHJhLkNvbXBvc2VyLldpc2hMaXN0Q29udHJvbGxlciB7XHJcblxyXG5cclxuICAgICAgICBwdWJsaWMgaW5pdGlhbGl6ZSgpIHtcclxuXHJcbiAgICAgICAgICAgIHN1cGVyLmluaXRpYWxpemUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBnZXRMaXN0TmFtZUZvckFuYWx5dGljcygpOiBzdHJpbmcge1xyXG4gICAgICAgICAgICByZXR1cm4gJ1NoYXJlZCBXaXNoIExpc3QnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBQcm9kdWN0SWRlbnRpZmllckR0byB7XHJcbiAgICAgICAgY29uc3RydWN0b3IocHVibGljIFByb2R1Y3RJZDogc3RyaW5nLCBwdWJsaWMgVmFyaWFudElkOiBzdHJpbmcpIHt9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9SZWxhdGVkUHJvZHVjdHMvU291cmNlL1R5cGVTY3JpcHQvUHJvZHVjdElkZW50aWZpZXJEdG8udHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElJbnZlbnRvcnlTZXJ2aWNlIHtcclxuXHJcbiAgICAgICAgaXNBdmFpbGFibGVUb1NlbGwoc2t1OiBzdHJpbmcpOiBRLlByb21pc2U8Ym9vbGVhbj47XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9NdmMvQ29tcG9zZXJDbGllbnQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9JSW52ZW50b3J5U2VydmljZS50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBJbnZlbnRvcnlTZXJ2aWNlIGltcGxlbWVudHMgSUludmVudG9yeVNlcnZpY2Uge1xyXG5cclxuICAgICAgICBwcml2YXRlIF9tZW1vaXplSXNBdmFpbGFibGVUb1NlbGw6IEZ1bmN0aW9uO1xyXG5cclxuICAgICAgICBwdWJsaWMgaXNBdmFpbGFibGVUb1NlbGwoc2t1OiBzdHJpbmcpOiBRLlByb21pc2U8Ym9vbGVhbj4ge1xyXG5cclxuICAgICAgICAgICAgaWYgKCFza3UpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIHNrdSBpcyByZXF1aXJlZCcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuX21lbW9pemVJc0F2YWlsYWJsZVRvU2VsbCkge1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuX21lbW9pemVJc0F2YWlsYWJsZVRvU2VsbCA9IF8ubWVtb2l6ZShhcmcgPT4gdGhpcy5pc0F2YWlsYWJsZVRvU2VsbEltcGwoYXJnKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9tZW1vaXplSXNBdmFpbGFibGVUb1NlbGwoc2t1KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgaXNBdmFpbGFibGVUb1NlbGxJbXBsKHNrdTogc3RyaW5nKTogUS5Qcm9taXNlPGJvb2xlYW4+IHtcclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhID0geyBza3VzOiBbc2t1XSB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIENvbXBvc2VyQ2xpZW50LnBvc3QoJy9hcGkvaW52ZW50b3J5L2ZpbmRJbnZlbnRvcnlJdGVtcycsIGRhdGEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGF2YWlsYWJsZVNrdXMgPT4gXy5jb250YWlucyhhdmFpbGFibGVTa3VzLCBza3UpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9SZWxhdGVkUHJvZHVjdHMvU291cmNlL1R5cGVTY3JpcHQvUHJvZHVjdElkZW50aWZpZXJEdG8udHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSVByb2R1Y3RTZXJ2aWNlIHtcclxuICAgICAgICBjYWxjdWxhdGVQcmljZShwcm9kdWN0SWQ6IHN0cmluZywgY29uY2Vybjogc3RyaW5nKTtcclxuXHJcbiAgICAgICAgZ2V0U2VsZWN0ZWRWYXJpYW50Vmlld01vZGVsKCk7XHJcblxyXG4gICAgICAgIGdldFZhcmlhbnQodmFyaWFudElkOiBzdHJpbmcpO1xyXG5cclxuICAgICAgICB1cGRhdGVTZWxlY3RlZEt2YXNXaXRoKHNlbGVjdGlvbnNUb0FkZDogYW55LCBjb25jZXJuOiBzdHJpbmcpO1xyXG5cclxuICAgICAgICBnZXRSZWxhdGVkUHJvZHVjdHMocmVsYXRlZFByb2R1Y3RJZGVudGlmaWVyczogUHJvZHVjdElkZW50aWZpZXJEdG9bXSk7XHJcblxyXG4gICAgICAgIGxvYWRRdWlja0J1eVByb2R1Y3QocHJvZHVjdElkOiBzdHJpbmcsIHZhcmlhbnRJZDogc3RyaW5nLCBjb25jZXJuOiBzdHJpbmcsIHNvdXJjZTogc3RyaW5nKTtcclxuXHJcbiAgICAgICAgZmluZEludmVudG9yeUl0ZW1zKHZpZXdNb2RlbDogYW55LCBjb25jZXJuOiBzdHJpbmcpO1xyXG5cclxuICAgICAgICBidWlsZFVybFBhdGgocGF0aEFycmF5OiBzdHJpbmdbXSk6IHN0cmluZztcclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L012Yy9JQ29udHJvbGxlckNvbnRleHQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvTXZjL0NvbXBvc2VyQ2xpZW50LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0V2ZW50cy9FdmVudEh1Yi50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIC8vXHJcbiAgICAvL0lzb2xhdGVkIGxvZ2ljLCB0aGlzIGNsYXNzIHJlYnVpbGQgdGhlIGtleVZhcmlhbnRBdHRyaWJ1dGVJdGVtcyBhcnJheVxyXG4gICAgLy9hcyBleHBlY3RlZCBieSBLdmFJdGVtcy5oYnNcclxuICAgIC8vVE9ETzogSW5zdGFuY2llciBkYW5zIHByb2R1Y3RTZXJ2aWNlIChwYXNzZXIgZGFucyBsZSBjb25zdHJ1Y3RldXIpXHJcbiAgICBleHBvcnQgY2xhc3MgS2V5VmFyaWFudEF0dHJpYnV0ZUl0ZW1zQnVpbGRlciB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgY29udGV4dDogT3Jja2VzdHJhLkNvbXBvc2VyLklDb250cm9sbGVyQ29udGV4dDtcclxuXHJcbiAgICAgICAgLy9QYXNzZXIgdmlld01vZGVsXHJcbiAgICAgICAgY29uc3RydWN0b3IoY29udGV4dDogT3Jja2VzdHJhLkNvbXBvc2VyLklDb250cm9sbGVyQ29udGV4dCkge1xyXG4gICAgICAgICAgICBpZiAoIWNvbnRleHQpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3I6IGNvbnRleHQgaXMgcmVxdWlyZWQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoIWNvbnRleHQudmlld01vZGVsKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Vycm9yOiBjb250ZXh0LnZpZXdNb2RlbCBpcyByZXF1aXJlZCcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy9GaW5kIHBvc3NpYmxlIGt2YSB2YWx1ZSBzdGF0ZXMgYmFzZXMgb24gdGhlIGdpdmVuIHNlbGVjdGlvblxyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy88cmV0dXJucz5cclxuICAgICAgICAvLyBLZXlWYXJpYW50QXR0cmlidXRlSXRlbSBWaWV3TW9kZWwgcmVhZHkgZm9yIHJlbmRlclxyXG4gICAgICAgIC8vPC9yZXR1cm5zPlxyXG4gICAgICAgIHB1YmxpYyBCdWlsZEtleVZhcmlhbnRBdHRyaWJ1dGVJdGVtc0ZvcihzZWxlY3RlZEt2YXM6IGFueSkge1xyXG4gICAgICAgICAgICBzZWxlY3RlZEt2YXMgPSBzZWxlY3RlZEt2YXMgfHwge307XHJcblxyXG4gICAgICAgICAgICAvL0dldCB0aGUgbGFzdCBrbm93biBLdmFTdGF0ZSBhbmQgdXNlIGl0IGFzIGEgc3RhcnRpbmcgcG9pbnRcclxuICAgICAgICAgICAgdmFyIGtleVZhcmlhbnRBdHRyaWJ1dGVJdGVtcyA9IHRoaXMuY29udGV4dC52aWV3TW9kZWwua2V5VmFyaWFudEF0dHJpYnV0ZUl0ZW1zIHx8IFtdO1xyXG5cclxuICAgICAgICAgICAgLy9Jbml0aWF0ZVxyXG4gICAgICAgICAgICB2YXIgcmV2ZXJzZUt2YUxvb2t1cCAgPSB0aGlzLkluaXRpYXRlS1ZBU3RhdGVGb3Ioa2V5VmFyaWFudEF0dHJpYnV0ZUl0ZW1zLCBzZWxlY3RlZEt2YXMpO1xyXG5cclxuICAgICAgICAgICAgLy9GaW5kXHJcbiAgICAgICAgICAgIHZhciByZWFjaGFibGVWYXJpYW50cyA9IHRoaXMuRmluZFJlYWNoYWJsZVZhcmlhbnRzRnJvbShrZXlWYXJpYW50QXR0cmlidXRlSXRlbXMsIHNlbGVjdGVkS3Zhcyk7XHJcblxyXG4gICAgICAgICAgICAvL0VuYWJsZVxyXG4gICAgICAgICAgICB0aGlzLkVuYWJsZUtWQVN0YXRlKHJldmVyc2VLdmFMb29rdXAsIHJlYWNoYWJsZVZhcmlhbnRzLCBzZWxlY3RlZEt2YXMpO1xyXG5cclxuICAgICAgICAgICAgLy9NZW1vaXplIHRoZSBLdmFTdGF0ZSBmb3IgbGF0ZXJcclxuICAgICAgICAgICAgdGhpcy5jb250ZXh0LnZpZXdNb2RlbC5rZXlWYXJpYW50QXR0cmlidXRlSXRlbXMgPSBrZXlWYXJpYW50QXR0cmlidXRlSXRlbXM7XHJcbiAgICAgICAgICAgIC8vXHJcblxyXG4gICAgICAgICAgICByZXR1cm4ga2V5VmFyaWFudEF0dHJpYnV0ZUl0ZW1zO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy9Ub2dnbGUgdGhlIFNlbGVjdGVkIHN0YXRlIGFuZCBEaXNhYmxlIGV2ZXJ5dGhpbmdcclxuICAgICAgICAvL0FmdGVyIHRoaXMgaW5pdGlhbCBzdGF0ZSwgdGhlIEtWQXMgd2lsbCBlaXRoZXIgYmVcclxuICAgICAgICAvLyBTZWxlY3RlZCBvciBEaXNhYmxlXHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLzxyZXR1cm5zPlxyXG4gICAgICAgIC8vICBBIExvb2t1cCBvZiBhbGwgS1ZBIGZvciBsYXRlciBlYXN5IGFjY2VzcyB1c2luZ1xyXG4gICAgICAgIC8vICBsb29rdXBbcHJvcGVydHlOYW1lXVt2YWx1ZV1cclxuICAgICAgICAvLzwvcmV0dXJucz5cclxuICAgICAgICBwcml2YXRlIEluaXRpYXRlS1ZBU3RhdGVGb3Ioa2V5VmFyaWFudEF0dHJpYnV0ZUl0ZW1zOiBhbnksIHNlbGVjdGVkS3ZhczogYW55KTogYW55IHtcclxuICAgICAgICAgICAgdmFyIHJldmVyc2VMb29rdXAgPSB7fTtcclxuXHJcbiAgICAgICAgICAgICBfLmVhY2goa2V5VmFyaWFudEF0dHJpYnV0ZUl0ZW1zLCBmdW5jdGlvbihrdmE6IGFueSkge1xyXG4gICAgICAgICAgICAgICAgIHZhciBwcm9wZXJ0eU5hbWUgPSBrdmEuUHJvcGVydHlOYW1lO1xyXG4gICAgICAgICAgICAgICAgIHZhciBzZWxlY3RlZFZhbHVlID0gc2VsZWN0ZWRLdmFzW3Byb3BlcnR5TmFtZV07XHJcblxyXG4gICAgICAgICAgICAgICAgIHJldmVyc2VMb29rdXBbcHJvcGVydHlOYW1lXSA9IHt9O1xyXG4gICAgICAgICAgICAgICAgIF8uZWFjaChrdmEuVmFsdWVzLCBmdW5jdGlvbih2YWw6IGFueSkge1xyXG4gICAgICAgICAgICAgICAgICAgICB2YWwuU2VsZWN0ZWQgPSB2YWwuVmFsdWUgPT09IHNlbGVjdGVkVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgIHZhbC5EaXNhYmxlZCA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICByZXZlcnNlTG9va3VwW3Byb3BlcnR5TmFtZV1bdmFsLlZhbHVlXSA9IHZhbDtcclxuICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHJldmVyc2VMb29rdXA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL0ZpbmQgYWxsIHJlYWNoYWJsZSB2YXJpYW50cyBmcm9tIHRoZSBnaXZlbiBjb25maWd1cmF0aW9uXHJcbiAgICAgICAgLy9UaG9zZSBhcmUgdmFyaWFudCB0aGF0IGNvdWxkIHBvc3NpYmx5IGJlIHJlYWNoIGJ5IGNoYW5naW5nXHJcbiAgICAgICAgLy9vbmUgYW5kIG9ubHkgb25lIEtWQSB2YWx1ZVxyXG4gICAgICAgIC8vPHJldHVybnM+XHJcbiAgICAgICAgLy8gIEFuIGFycmF5IG9mIFZhcmlhbnRzIHdpdGggYWxsIHRoZWlyIHByb3BlcnRpZXNcclxuICAgICAgICAvLzwvcmV0dXJucz5cclxuICAgICAgICBwcml2YXRlIEZpbmRSZWFjaGFibGVWYXJpYW50c0Zyb20oa2V5VmFyaWFudEF0dHJpYnV0ZUl0ZW1zOiBhbnksIHNlbGVjdGVkS3ZhczogYW55KTogYW55IHtcclxuICAgICAgICAgICAgdmFyIGFsbFZhcmlhbnRzID0gKHRoaXMuY29udGV4dC52aWV3TW9kZWwuYWxsVmFyaWFudHMgfHwge30pO1xyXG5cclxuICAgICAgICAgICAgdmFyIHBvc3NpYmxlVmFyaWFudHNMb29rdXAgPSB7fTtcclxuXHJcbiAgICAgICAgICAgIC8vQ2hhbmdpbmcgU2VsZWN0aW9uXHJcbiAgICAgICAgICAgICBfLmVhY2goc2VsZWN0ZWRLdmFzLCBmdW5jdGlvbih2YWx1ZTogc3RyaW5nLCBwcm9wZXJ0eU5hbWU6IHN0cmluZykge1xyXG4gICAgICAgICAgICAgICAgIHZhciBwb3NzaWJsZU1vdmUgPSBfLm9taXQoc2VsZWN0ZWRLdmFzLCBwcm9wZXJ0eU5hbWUpO1xyXG5cclxuICAgICAgICAgICAgICAgICB2YXIgdiA9IF8uZWFjaChfLmZpbHRlcihhbGxWYXJpYW50cywgeyBLdmFzOiBwb3NzaWJsZU1vdmUgfSksIGZ1bmN0aW9uKHZhcmlhbnQ6IGFueSkge1xyXG4gICAgICAgICAgICAgICAgICAgICBwb3NzaWJsZVZhcmlhbnRzTG9va3VwW3ZhcmlhbnQuSWRdID0gdmFyaWFudDtcclxuICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgdmFyIHZhcmlhbnRzID0gXy5tYXBWYWx1ZXMocG9zc2libGVWYXJpYW50c0xvb2t1cCwgXy5pZGVudGl0eSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdmFyaWFudHM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL0VuYWJsZSB0aGUgS1ZBcyBiYXNlZCBvbiB0aGUgcmVhY2hhYmxlIHZhcmlhbnRzXHJcbiAgICAgICAgLy9Vc2luZyB0aGUgcmV2ZXJzZSBsb29ra3VwIGZvciBmYXN0ZXIgYWNjZXNzXHJcbiAgICAgICAgcHJpdmF0ZSBFbmFibGVLVkFTdGF0ZShyZXZlcnNlS3ZhTG9va3VwOiBhbnksIHJlYWNoYWJsZVZhcmlhbnRzOiBhbnksIHNlbGVjdGVkS3ZhczogYW55KTogYW55IHtcclxuICAgICAgICAgICAgLy9FbmFibGUgcmVhY2hhYmxlIHN0YXRlc1xyXG4gICAgICAgICAgICBfLmVhY2gocmVhY2hhYmxlVmFyaWFudHMsIGZ1bmN0aW9uKHZhcmlhbnQ6IGFueSwgdmFyaWFudElkOiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgICAgIF8uZWFjaCh2YXJpYW50Lkt2YXMsIGZ1bmN0aW9uKHZhbHVlOiBzdHJpbmcsIHByb3BlcnR5TmFtZTogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGt2YSA9IHJldmVyc2VLdmFMb29rdXBbcHJvcGVydHlOYW1lXSB8fCBbXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdmFsID0ga3ZhW3ZhbHVlXSB8fCB7fTtcclxuICAgICAgICAgICAgICAgICAgICB2YWwuRGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vSWYgdGhlIGN1cnJlbnQgc2VsZWN0aW9uIG1hdGNoIG5vdGhpbmcsIGRpc2FibGUgaXQuXHJcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZFZhcmlhbnQgPSBfLmZpbmQocmVhY2hhYmxlVmFyaWFudHMsIHsgS3Zhczogc2VsZWN0ZWRLdmFzIH0pO1xyXG4gICAgICAgICAgICBpZiAoIXNlbGVjdGVkVmFyaWFudCkge1xyXG4gICAgICAgICAgICAgICAgXy5lYWNoKHNlbGVjdGVkS3ZhcywgZnVuY3Rpb24odmFsdWU6IHN0cmluZywgcHJvcGVydHlOYW1lOiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIga3ZhID0gcmV2ZXJzZUt2YUxvb2t1cFtwcm9wZXJ0eU5hbWVdIHx8IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2YWwgPSBrdmFbdmFsdWVdIHx8IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgIHZhbC5EaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L012Yy9JQ29udHJvbGxlckNvbnRleHQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvTXZjL0NvbXBvc2VyQ2xpZW50LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0V2ZW50cy9FdmVudEh1Yi50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9SZWxhdGVkUHJvZHVjdHMvU291cmNlL1R5cGVTY3JpcHQvUHJvZHVjdElkZW50aWZpZXJEdG8udHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9JUHJvZHVjdFNlcnZpY2UudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgUHJvZHVjdFNlcnZpY2UgaW1wbGVtZW50cyBJUHJvZHVjdFNlcnZpY2Uge1xyXG5cclxuICAgICAgICBwcml2YXRlIGV2ZW50SHViOiBJRXZlbnRIdWI7XHJcbiAgICAgICAgcHJpdmF0ZSBjb250ZXh0OiBPcmNrZXN0cmEuQ29tcG9zZXIuSUNvbnRyb2xsZXJDb250ZXh0O1xyXG5cclxuICAgICAgICBjb25zdHJ1Y3RvcihldmVudEh1YjogSUV2ZW50SHViLCBjb250ZXh0OiBPcmNrZXN0cmEuQ29tcG9zZXIuSUNvbnRyb2xsZXJDb250ZXh0KSB7XHJcbiAgICAgICAgICAgIGlmICghZXZlbnRIdWIpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRXJyb3I6IGV2ZW50SHViIGlzIHJlcXVpcmVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCFjb250ZXh0KSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Vycm9yOiBjb250ZXh0IGlzIHJlcXVpcmVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCFjb250ZXh0LnZpZXdNb2RlbCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFcnJvcjogY29udGV4dC52aWV3TW9kZWwgaXMgcmVxdWlyZWQnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1YiA9IGV2ZW50SHViO1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRleHQgPSBjb250ZXh0O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHNob3dRdWlja1ZpZXcoKSB7XHJcbiAgICAgICAgICAgICQoJyNhZGRUb0NhcnRNb2RhbCcpLm1vZGFsKCdzaG93Jyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgY2xvc2VRdWlja1ZpZXcoKSB7XHJcbiAgICAgICAgICAgICQoJyNhZGRUb0NhcnRNb2RhbCcpLm1vZGFsKCdoaWRlJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc2VsZWN0SW1hZ2UoY2xpY2tlZEltYWdlSW5kZXg6IG51bWJlciwgY29uY2Vybjogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIC8vIGZpbmQgY3VycmVudGx5IHNlbGVjdGVkIGltYWdlIGFuZCBzZXQgc2VsZWN0ZWQgdG8gZmFsc2VcclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gXy5maW5kSW5kZXgodGhpcy5jb250ZXh0LnZpZXdNb2RlbC5JbWFnZXMsIHsgU2VsZWN0ZWQ6IHRydWUgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0LnZpZXdNb2RlbC5JbWFnZXNbaW5kZXhdLlNlbGVjdGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuY29udGV4dC52aWV3TW9kZWwuSW1hZ2VzW2NsaWNrZWRJbWFnZUluZGV4XS5TZWxlY3RlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGV4dC52aWV3TW9kZWwuU2VsZWN0ZWRJbWFnZS5JbWFnZVVybCA9IHRoaXMuY29udGV4dC52aWV3TW9kZWwuSW1hZ2VzW2NsaWNrZWRJbWFnZUluZGV4XS5JbWFnZVVybDtcclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKGNvbmNlcm4gKyAnSW1hZ2VzQ2hhbmdlZCcsIHsgZGF0YTogdGhpcy5jb250ZXh0LnZpZXdNb2RlbCB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBjYWxjdWxhdGVQcmljZShwcm9kdWN0SWQ6IHN0cmluZywgY29uY2Vybjogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIHZhciBkYXRhID0geyBwcm9kdWN0czogW3Byb2R1Y3RJZF0gfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBDb21wb3NlckNsaWVudC5wb3N0KCcvYXBpL3Byb2R1Y3QvY2FsY3VsYXRlUHJpY2VzJywgZGF0YSlcclxuICAgICAgICAgICAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGRldGFpbHMgPSB0aGlzLmNvbnRleHQudmlld01vZGVsO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBtYWluUmVzdWx0ID0gPGFueT5fLmZpbmQocmVzdWx0LlByb2R1Y3RQcmljZXMsIHsgUHJvZHVjdElkOiBwcm9kdWN0SWQgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vVE9ETyBleHRlbmQgYWxsIG90aGVyIHByb2R1Y3RzIG9uIHRoZSBwYWdlIChpZiBhbnkpXHJcbiAgICAgICAgICAgICAgICAgICAgLy9FeHRlbmQgdGhlIHByb2R1Y3QgZGV0YWlsc1xyXG4gICAgICAgICAgICAgICAgICAgIF8uZXh0ZW5kKGRldGFpbHMsIG1haW5SZXN1bHQpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0ICYmIHJlc3VsdC5DdXJyZW5jeSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgIGRldGFpbHMuQ3VycmVuY3kgPSByZXN1bHQuQ3VycmVuY3k7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvL0V4dGVuZCB0aGUgdmFyaWFudHNcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYWxsVmFyaWFudHMgPSB0aGlzLmNvbnRleHQudmlld01vZGVsLmFsbFZhcmlhbnRzO1xyXG4gICAgICAgICAgICAgICAgICAgIF8uZWFjaChtYWluUmVzdWx0LlZhcmlhbnRQcmljZXMsICh2YXJpYW50UHJpY2U6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmFyaWFudCA9IDxhbnk+Xy5maW5kKGFsbFZhcmlhbnRzLCB7IElkOiB2YXJpYW50UHJpY2UuVmFyaWFudElkIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfLmV4dGVuZCh2YXJpYW50LCB2YXJpYW50UHJpY2UpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHZhcmlhbnQgIT09IHVuZGVmaW5lZCAmJiB2YXJpYW50LklkID09PSBkZXRhaWxzLmRpc3BsYXllZFZhcmlhbnRJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXy5leHRlbmQoZGV0YWlscywgdmFyaWFudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKGNvbmNlcm4gKyAnUHJpY2VzQ2hhbmdlZCcsIHsgZGF0YTogZGV0YWlscyB9KTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goY29uY2VybiArICdQcmljZUNhbGN1bGF0ZWQnLCB7IGRhdGE6IGRldGFpbHMgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qXHJcbiAgICAgICAgICogUmV0dXJuIHRoZSBWaWV3TW9kZWwgb2YgdGhlIFNlbGVjdGVkIFZhcmlhbnQuXHJcbiAgICAgICAgICogSWYgbm8gdmFyaWFudHMgYXJlIGF2YWlsYWJsZSxcclxuICAgICAgICAgKiAgICBpdCByZXR1cm5zIHRoZSBWaWV3TW9kZWwgb2YgdGhlIFByb2R1Y3RcclxuICAgICAgICAgKiBJZiBubyB2YXJpYW50IGlzIHNlbGVjdGVkIChha2EgdGhlIEtWQSBzZWxlY3Rpb24gYmluZHMgdG8gYW4gdW5hdmFpbGFibGUgdmFyaWFudClcclxuICAgICAgICAgKiAgICBpdCByZXR1cm5zIGEgTm9uZSBCdXlhYmxlIFZpZXdNb2RlbFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBnZXRTZWxlY3RlZFZhcmlhbnRWaWV3TW9kZWwoKSB7XHJcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZFZhcmlhbnRJZCAgPSB0aGlzLmNvbnRleHQudmlld01vZGVsLnNlbGVjdGVkVmFyaWFudElkO1xyXG4gICAgICAgICAgICB2YXIgZGlzcGxheWVkVmFyaWFudElkID0gdGhpcy5jb250ZXh0LnZpZXdNb2RlbC5kaXNwbGF5ZWRWYXJpYW50SWQ7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWRpc3BsYXllZFZhcmlhbnRJZCkge1xyXG4gICAgICAgICAgICAgICAgLy9UaGlzIGlzIG1vc3RsaWtlbHkgYSBwcm9kdWN0XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5jb250ZXh0LnZpZXdNb2RlbDtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChzZWxlY3RlZFZhcmlhbnRJZCA9PT0gZGlzcGxheWVkVmFyaWFudElkKSB7XHJcbiAgICAgICAgICAgICAgICAvL1RoaXMgaXMgbW9zdGxpa2VseSBhIHZhcmlhbnRcclxuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFZhcmlhbnQoc2VsZWN0ZWRWYXJpYW50SWQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgJ0lzQXZhaWxhYmxlVG9TZWxsJzogZmFsc2VcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFRPRE8gKFNBTSkgOiBnZXRWYXJpYW50IGFuZCB1cGRhdGVTZWxlY3RlZEt2YXNXaXRoIHNob3VsZG4ndCBiZSBpbiB0aGlzIGZpbGUuXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgIFRoZXkncmUgbW9yZSBzdWl0ZWQgdG8gYSBDb250cm9sbGVyIG9yIGEgaGVscGVyIGNsYXNzLlxyXG5cclxuICAgICAgICAvL0dldCB0aGUgVmFyaWFudCBmb3IgdGhlIGdpdmVuIGlkXHJcbiAgICAgICAgLy88cGFyYW0gbmFtZT1cInZhcmlhbnRJZFwiPlRoZSB2YXJpYW50IGlkIHRvIGZpbmQ8L3BhcmFtPlxyXG4gICAgICAgIC8vPHJldHVybnM+S2V5VmFyaWFudEF0dHJpYnV0ZUl0ZW0gVmlld01vZGVsIHJlYWR5IGZvciByZW5kZXI8L3JldHVybnM+XHJcbiAgICAgICAgcHVibGljIGdldFZhcmlhbnQodmFyaWFudElkOiBzdHJpbmcpOiBhbnkge1xyXG4gICAgICAgICAgICB2YXIgYWxsVmFyaWFudHMgPSB0aGlzLmNvbnRleHQudmlld01vZGVsLmFsbFZhcmlhbnRzO1xyXG4gICAgICAgICAgICB2YXIgdmFyaWFudCA9IF8uZmluZChhbGxWYXJpYW50cywge0lkOiB2YXJpYW50SWR9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB2YXJpYW50O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHVwZGF0ZVNlbGVjdGVkS3Zhc1dpdGgoc2VsZWN0aW9uc1RvQWRkOiBhbnksIGNvbmNlcm46IHN0cmluZykge1xyXG4gICAgICAgICAgICB2YXIgYWxsVmFyaWFudHMgPSB0aGlzLmNvbnRleHQudmlld01vZGVsLmFsbFZhcmlhbnRzO1xyXG4gICAgICAgICAgICB2YXIgaW5pdGlhbFNlbGVjdGVkS3ZhcyA9IHRoaXMuY29udGV4dC52aWV3TW9kZWwuc2VsZWN0ZWRLdmFzIHx8IHt9O1xyXG4gICAgICAgICAgICB2YXIgaW5pdGlhbFNlbGVjdGVkVmFyaWFudElkID0gdGhpcy5jb250ZXh0LnZpZXdNb2RlbC5zZWxlY3RlZFZhcmlhbnRJZDtcclxuICAgICAgICAgICAgdmFyIGluaXRpYWxEaXNwbGF5ZWRWYXJpYW50SWQgPSB0aGlzLmNvbnRleHQudmlld01vZGVsLmRpc3BsYXllZFZhcmlhbnRJZDtcclxuXHJcbiAgICAgICAgICAgIC8vVXBkYXRlIGN1cnJlbnQgc2VsZWN0aW9uXHJcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZEt2YXMgPSBfLm1lcmdlKGluaXRpYWxTZWxlY3RlZEt2YXMsIHNlbGVjdGlvbnNUb0FkZCk7XHJcblxyXG4gICAgICAgICAgICAvL0ZpbmQgcG9zc2libGUgbWF0Y2hlc1xyXG4gICAgICAgICAgICB2YXIgdmFyaWFudHMgPSBfLmZpbHRlcihhbGxWYXJpYW50cywgeyBLdmFzOiBzZWxlY3RlZEt2YXMgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAodmFyaWFudHMgJiYgdmFyaWFudHMubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAvL0V4YWN0bHkgb25lIHZhcmlhbnQgZm91bmQsIGxldCdzIHVwZGF0ZSB0aGUgZGV0YWlsIHRvIGRpc3BsYXkgaXQuXHJcbiAgICAgICAgICAgICAgICB2YXIgdmFyaWFudCA9IDxhbnk+dmFyaWFudHNbMF07XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0LnZpZXdNb2RlbC5zZWxlY3RlZEt2YXMgPSBfLmNsb25lKHZhcmlhbnQuS3Zhcyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQudmlld01vZGVsLnNlbGVjdGVkVmFyaWFudElkICA9IHZhcmlhbnQuSWQ7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQudmlld01vZGVsLmRpc3BsYXllZFZhcmlhbnRJZCA9IHZhcmlhbnQuSWQ7XHJcblxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy9Nb3JlIHRoYW4gb25lIHBvc3NpYmlsZSB2YXJpYW50cywgbGV0J3Mgbm90IGFzc3VtZSBhbnkgc2VsZWN0ZWQgb25lcy5cclxuICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dC52aWV3TW9kZWwuc2VsZWN0ZWRLdmFzID0gc2VsZWN0ZWRLdmFzO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0LnZpZXdNb2RlbC5zZWxlY3RlZFZhcmlhbnRJZCA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vU3VwZXJzZWVkIHRoZSBwcm9kdWN0IGRldGFpbHMgd2l0aCB0aGUgc2VsZWN0aW9uIHZhcmlhbnQgZGV0YWlsc1xyXG4gICAgICAgICAgICBfLmV4dGVuZCh0aGlzLmNvbnRleHQudmlld01vZGVsLCB0aGlzLmdldFNlbGVjdGVkVmFyaWFudFZpZXdNb2RlbCgpKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuYnVpbGRLZXlWYXJpYW50QXR0cmlidXRlSXRlbXMoY29uY2Vybik7XHJcblxyXG4gICAgICAgICAgICBpZiAoaW5pdGlhbERpc3BsYXllZFZhcmlhbnRJZCAhPT0gdGhpcy5jb250ZXh0LnZpZXdNb2RlbC5kaXNwbGF5ZWRWYXJpYW50SWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaChjb25jZXJuICsgJ0Rpc3BsYXllZFZhcmlhbnRJZENoYW5nZWQnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpbml0aWFsRGlzcGxheWVkVmFyaWFudElkOiBpbml0aWFsRGlzcGxheWVkVmFyaWFudElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5VmFyaWFudElkOiB0aGlzLmNvbnRleHQudmlld01vZGVsLmRpc3BsYXllZFZhcmlhbnRJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRTa3U6IHRoaXMuY29udGV4dC52aWV3TW9kZWwuU2t1XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChpbml0aWFsU2VsZWN0ZWRWYXJpYW50SWQgIT09IHRoaXMuY29udGV4dC52aWV3TW9kZWwuc2VsZWN0ZWRWYXJpYW50SWQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaChjb25jZXJuICsgJ1NlbGVjdGVkVmFyaWFudElkQ2hhbmdlZCcsIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGluaXRpYWxTZWxlY3RlZFZhcmlhbnRJZDogaW5pdGlhbFNlbGVjdGVkVmFyaWFudElkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RlZFZhcmlhbnRJZDogdGhpcy5jb250ZXh0LnZpZXdNb2RlbC5zZWxlY3RlZFZhcmlhbnRJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRTa3U6IHRoaXMuY29udGV4dC52aWV3TW9kZWwuU2t1XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaChjb25jZXJuICsgJ0ltYWdlc0NoYW5nZWQnLCB7IGRhdGE6IHRoaXMuY29udGV4dC52aWV3TW9kZWwgfSk7XHJcbiAgICAgICAgICAgIC8vSSB0aGluayB0aGlzIHB1Ymxpc2ggaXMgdW5uZWNlc3NhcnkgYmVjYXVzZSBpdCBjYWxjdWxhdGUgdGhlIHByaWNlIGFmdGVyIG9uIGEgQVBJIHNlcnZlciBjYWxsXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaChjb25jZXJuICsgJ1ByaWNlc0NoYW5nZWQnLCB7IGRhdGE6IHRoaXMuY29udGV4dC52aWV3TW9kZWwgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZ2V0UmVsYXRlZFByb2R1Y3RzKHJlbGF0ZWRQcm9kdWN0SWRlbnRpZmllcnM6IFByb2R1Y3RJZGVudGlmaWVyRHRvW10pOiBRLlByb21pc2U8YW55PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBDb21wb3NlckNsaWVudC5wb3N0KCcvYXBpL3Byb2R1Y3QvcmVsYXRlZFByb2R1Y3RzJywgcmVsYXRlZFByb2R1Y3RJZGVudGlmaWVycyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgbG9hZFF1aWNrQnV5UHJvZHVjdChwcm9kdWN0SWQ6IHN0cmluZywgdmFyaWFudElkOiBzdHJpbmcsIGNvbmNlcm46IHN0cmluZywgc291cmNlOiBzdHJpbmcpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHtcclxuICAgICAgICAgICAgICAgIFByb2R1Y3RJZDogcHJvZHVjdElkLFxyXG4gICAgICAgICAgICAgICAgVmFyaWFudElkOiB2YXJpYW50SWRcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBDb21wb3NlckNsaWVudC5wb3N0KCcvYXBpL3Byb2R1Y3QvdmFyaWFudFNlbGVjdGlvbicsIGRhdGEpXHJcbiAgICAgICAgICAgICAgICAudGhlbigocXVpY2tCdXlQcm9kdWN0Vmlld01vZGVsKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKGNvbmNlcm4gKyAnUXVpY2tCdXlMb2FkZWQnLCB7IGRhdGE6IHF1aWNrQnV5UHJvZHVjdFZpZXdNb2RlbCwgc291cmNlOiBzb3VyY2UgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHF1aWNrQnV5UHJvZHVjdFZpZXdNb2RlbDtcclxuICAgICAgICAgICAgICAgIH0pLmZhaWwoKHJlYXNvbjogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIGxvYWRpbmcgdGhlIFByb2R1Y3RRdWlja1ZpZXcnLCByZWFzb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IHJlYXNvbjtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGZpbmRJbnZlbnRvcnlJdGVtcyh2aWV3TW9kZWw6IGFueSwgY29uY2Vybjogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZFNrdTogc3RyaW5nICA9IHZpZXdNb2RlbC5Ta3UsXHJcbiAgICAgICAgICAgICAgICBza3VzOiBzdHJpbmdbXTtcclxuXHJcbiAgICAgICAgICAgIGlmIChfLmlzRW1wdHkodmlld01vZGVsLmFsbFZhcmlhbnRzKSkge1xyXG4gICAgICAgICAgICAgICAgc2t1cyA9IFt2aWV3TW9kZWwuU2t1XTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNrdXMgPSBfLnBsdWNrKHZpZXdNb2RlbC5hbGxWYXJpYW50cywgJ1NrdScpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHsgc2t1czogc2t1cyB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIENvbXBvc2VyQ2xpZW50LnBvc3QoJy9hcGkvaW52ZW50b3J5L2ZpbmRJbnZlbnRvcnlJdGVtcycsIGRhdGEpXHJcbiAgICAgICAgICAgICAgICAudGhlbigoc2t1c0F2YWlsYWJsZVRvU2VsbCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpc0F2YWlsYWJsZVRvU2VsbCA9IF8uaW5jbHVkZShza3VzQXZhaWxhYmxlVG9TZWxsLCBzZWxlY3RlZFNrdSkgJiYgdmlld01vZGVsLklzQXZhaWxhYmxlVG9TZWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaChjb25jZXJuICsgJ0ludmVudG9yeVJldHJpZXZlZCcsIHsgZGF0YTogaXNBdmFpbGFibGVUb1NlbGwgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICBwdWJsaWMgcHJvZHVjdEF2YWlsYWJsZVRvU2VsbChzZWxlY3RlZFNrdTogc3RyaW5nLCBwcm9kdWN0QXZhaWxhYmxlVG9TZWxsOiBzdHJpbmdbXSwgcHJvZHVjdElzQXZhaWxhYmxlVG9TZWxsOiBib29sZWFuKSA6IGJvb2xlYW4ge1xyXG4gICAgICAgICAgICByZXR1cm4gXy5pbmNsdWRlKHByb2R1Y3RBdmFpbGFibGVUb1NlbGwsIHNlbGVjdGVkU2t1KSAmJiBwcm9kdWN0SXNBdmFpbGFibGVUb1NlbGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGJ1aWxkS2V5VmFyaWFudEF0dHJpYnV0ZUl0ZW1zKGNvbmNlcm46IHN0cmluZykge1xyXG4gICAgICAgICAgICB2YXIgc2VsZWN0ZWRLdmFzID0gdGhpcy5jb250ZXh0LnZpZXdNb2RlbC5zZWxlY3RlZEt2YXM7XHJcbiAgICAgICAgICAgIHZhciBidWlsZGVyID0gbmV3IE9yY2tlc3RyYS5Db21wb3Nlci5LZXlWYXJpYW50QXR0cmlidXRlSXRlbXNCdWlsZGVyKHRoaXMuY29udGV4dCk7XHJcbiAgICAgICAgICAgIHZhciBrZXlWYXJpYW50QXR0cmlidXRlSXRlbXMgPSBidWlsZGVyLkJ1aWxkS2V5VmFyaWFudEF0dHJpYnV0ZUl0ZW1zRm9yKHNlbGVjdGVkS3Zhcyk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goY29uY2VybiArICdTZWxlY3RlZEt2YXNDaGFuZ2VkJywgeyBkYXRhOiBrZXlWYXJpYW50QXR0cmlidXRlSXRlbXMgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAgcHVibGljIHJlcGxhY2VIaXN0b3J5KCkge1xyXG4gICAgICAgICAgICB2YXIgdmFyaWFudElkID0gdGhpcy5jb250ZXh0LnZpZXdNb2RlbC5zZWxlY3RlZFZhcmlhbnRJZDtcclxuXHJcbiAgICAgICAgICAgIC8vVmFyaWFudCBzZWxlY3Rpb24gaXMgbm90IHZhbGlkIHVzZSBsYXN0IHZhbGlkXHJcbiAgICAgICAgICAgIGlmICh2YXJpYW50SWQgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGZ1bGxQYXRoQXJyYXkgPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUuc3BsaXQoJy8nKS5maWx0ZXIoQm9vbGVhbik7XHJcbiAgICAgICAgICAgIHZhciBzaG9ydFBhdGhBcnJheSA9IGZ1bGxQYXRoQXJyYXkuc2xpY2UoMCwgMyk7XHJcbiAgICAgICAgICAgIHNob3J0UGF0aEFycmF5LnB1c2godmFyaWFudElkKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBidWlsdFBhdGggPSB3aW5kb3cubG9jYXRpb24ucHJvdG9jb2xcclxuICAgICAgICAgICAgKyAnLy8nXHJcbiAgICAgICAgICAgICsgd2luZG93LmxvY2F0aW9uLmhvc3RcclxuICAgICAgICAgICAgKyB0aGlzLmJ1aWxkVXJsUGF0aChzaG9ydFBhdGhBcnJheSk7XHJcblxyXG4gICAgICAgICAgICBoaXN0b3J5LnJlcGxhY2VTdGF0ZSgge30gLCBudWxsLCBidWlsdFBhdGgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGJ1aWxkVXJsUGF0aChwYXRoQXJyYXk6IHN0cmluZ1tdKSA6IHN0cmluZyB7XHJcbiAgICAgICAgICAgIHZhciBuZXdQYXRobmFtZSA9ICcnO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhdGhBcnJheS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgIG5ld1BhdGhuYW1lICs9ICcvJztcclxuICAgICAgICAgICAgICBuZXdQYXRobmFtZSArPSBwYXRoQXJyYXlbaV07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBuZXdQYXRobmFtZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9NdmMvQ29tcG9zZXJDbGllbnQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvRXZlbnRzL0V2ZW50SHViLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgICogTW9kdWxlIGhlbHBlciB0byBmb3JtYXQgc3RyaW5nIHZhbHVlIHVzaW5nIHRoZSBPdmVydHVyZSBjb252ZXJ0aW9uIHJ1bGVzLlxyXG4gICAgICAqL1xyXG4gICAgZXhwb3J0IGNsYXNzIFByb2R1Y3RGb3JtYXR0ZXIge1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBjb252ZXJ0IGEgUHJvZHVjdFByb3BlcnR5IHN0cmluZyB2YWx1ZSBpbnRvIHRoZSByaWdodCBzdHJvbmdseSB0eXBlZCB2YXJpYWJsZS5cclxuICAgICAgICAgKlxyXG4gICAgICAgICAqICAgICBmb3JtYXR0ZXIuY29udmVydFRvU3Ryb25nbHlUeXBlZChhY3Rpb25Db250ZXh0LmVsZW1lbnRDb250ZXh0LnZhbCgpLCAnRGVjaW1hbCcpO1xyXG4gICAgICAgICAqXHJcbiAgICAgICAgICogQHBhcmFtIHN0clZhbHVlICAgICAgICAgVGhlIFByb2R1Y3RQcm9wZXJ0eSB2YWx1ZSB0byBjb252ZXJ0XHJcbiAgICAgICAgICogQHBhcmFtIHByb3BlcnR5RGF0YVR5cGUgdGhlIFByb2R1Y3RQcm9wZXJ0eS5EYXRhVHlwZSB0byBpbmR1Y2UgdGhlIHR5cGVcclxuICAgICAgICAgKi9cclxuICAgICAgICBwdWJsaWMgY29udmVydFRvU3Ryb25nbHlUeXBlZChzdHJWYWx1ZTogc3RyaW5nLCBwcm9wZXJ0eURhdGFUeXBlOiBzdHJpbmcpOiBhbnkge1xyXG4gICAgICAgICAgICB2YXIgdmFsdWU6IGFueTtcclxuXHJcbiAgICAgICAgICAgIGlmIChwcm9wZXJ0eURhdGFUeXBlID09PSAnRGVjaW1hbCcpIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gcGFyc2VGbG9hdChzdHJWYWx1ZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocHJvcGVydHlEYXRhVHlwZSA9PT0gJ051bWJlcicpIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gcGFyc2VJbnQoc3RyVmFsdWUsIDEwKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChwcm9wZXJ0eURhdGFUeXBlID09PSAnQm9vbGVhbicpIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gKHN0clZhbHVlID09PSAndHJ1ZScpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHByb3BlcnR5RGF0YVR5cGUgPT09ICdUZXh0Jykge1xyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSBzdHJWYWx1ZSArICcnO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHByb3BlcnR5RGF0YVR5cGUgPT09ICdMb29rdXAnKSB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHN0clZhbHVlICsgJyc7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHN0clZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuQ2FydC5VSS9DYXJ0U3VtbWFyeS9Tb3VyY2UvVHlwZXNjcmlwdC9DYXJ0U2VydmljZS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5DYXJ0LlVJL1dpc2hMaXN0L1NvdXJjZS9UeXBlc2NyaXB0L1NlcnZpY2VzL1dpc2hMaXN0U2VydmljZS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5DYXJ0LlVJL1dpc2hMaXN0L1NvdXJjZS9UeXBlU2NyaXB0L1dpc2hMaXN0UmVwb3NpdG9yeS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5NeUFjY291bnQuVUkvQ29tbW9uL1NvdXJjZS9UeXBlU2NyaXB0L01lbWJlcnNoaXBTZXJ2aWNlLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L1JlcG9zaXRvcmllcy9DYXJ0UmVwb3NpdG9yeS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvQ29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L0V2ZW50cy9JRXZlbnRJbmZvcm1hdGlvbi50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9VSS9VSUJ1c3lIYW5kbGUudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvRXJyb3JIYW5kbGluZy9FcnJvckhhbmRsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nSW52ZW50b3J5U2VydmljZS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPSdQcm9kdWN0U2VydmljZS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPSdQcm9kdWN0Rm9ybWF0dGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9J0tleVZhcmlhbnRBdHRyaWJ1dGVJdGVtc0J1aWxkZXIudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgUHJvZHVjdENvbnRyb2xsZXIgZXh0ZW5kcyBPcmNrZXN0cmEuQ29tcG9zZXIuQ29udHJvbGxlciB7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBpbnZlbnRvcnlTZXJ2aWNlID0gbmV3IEludmVudG9yeVNlcnZpY2UoKTtcclxuICAgICAgICBwcm90ZWN0ZWQgcHJvZHVjdFNlcnZpY2U6IFByb2R1Y3RTZXJ2aWNlID0gbmV3IFByb2R1Y3RTZXJ2aWNlKHRoaXMuZXZlbnRIdWIsIHRoaXMuY29udGV4dCk7XHJcbiAgICAgICAgcHJvdGVjdGVkIGNhcnRTZXJ2aWNlOiBDYXJ0U2VydmljZSA9IG5ldyBDYXJ0U2VydmljZShuZXcgQ2FydFJlcG9zaXRvcnkoKSwgdGhpcy5ldmVudEh1Yik7XHJcbiAgICAgICAgcHJvdGVjdGVkIF93aXNoTGlzdFNlcnZpY2U6IFdpc2hMaXN0U2VydmljZSA9IG5ldyBXaXNoTGlzdFNlcnZpY2UobmV3IFdpc2hMaXN0UmVwb3NpdG9yeSgpLCB0aGlzLmV2ZW50SHViKTtcclxuICAgICAgICBwcm90ZWN0ZWQgX21lbWJlcnNoaXBTZXJ2aWNlOiBJTWVtYmVyc2hpcFNlcnZpY2UgPSBuZXcgTWVtYmVyc2hpcFNlcnZpY2UobmV3IE1lbWJlcnNoaXBSZXBvc2l0b3J5KCkpO1xyXG5cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGNvbmNlcm46IHN0cmluZztcclxuXHJcbiAgICAgICAgcHVibGljIGluaXRpYWxpemUoKSB7XHJcblxyXG4gICAgICAgICAgICBzdXBlci5pbml0aWFsaXplKCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJTdWJzY3JpcHRpb25zKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgcmVnaXN0ZXJTdWJzY3JpcHRpb25zKCkge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5zdWJzY3JpYmUodGhpcy5jb25jZXJuICsgJ1NlbGVjdGVkVmFyaWFudElkQ2hhbmdlZCcsIGUgPT4gdGhpcy5vblNlbGVjdGVkVmFyaWFudElkQ2hhbmdlZChlKSk7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIuc3Vic2NyaWJlKHRoaXMuY29uY2VybiArICdTZWxlY3RlZEt2YXNDaGFuZ2VkJywgZSA9PiB0aGlzLm9uU2VsZWN0ZWRLdmFzQ2hhbmdlZChlKSk7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIuc3Vic2NyaWJlKHRoaXMuY29uY2VybiArICdJbWFnZXNDaGFuZ2VkJywgZSA9PiB0aGlzLm9uSW1hZ2VzQ2hhbmdlZChlKSk7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIuc3Vic2NyaWJlKHRoaXMuY29uY2VybiArICdQcmljZXNDaGFuZ2VkJywgZSA9PiB0aGlzLm9uUHJpY2VzQ2hhbmdlZChlKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb25TZWxlY3RlZFZhcmlhbnRJZENoYW5nZWQoZTogSUV2ZW50SW5mb3JtYXRpb24pIHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvblNlbGVjdGVkS3Zhc0NoYW5nZWQoZTogSUV2ZW50SW5mb3JtYXRpb24pIHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvbkltYWdlc0NoYW5nZWQoZTogSUV2ZW50SW5mb3JtYXRpb24pIHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvblByaWNlc0NoYW5nZWQoZTogSUV2ZW50SW5mb3JtYXRpb24pIHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCByZW5kZXJEYXRhKCk6IFEuUHJvbWlzZTx2b2lkW10+IHtcclxuXHJcbiAgICAgICAgICAgIHZhciBxdWFudGl0eSA9IHRoaXMuZ2V0Q3VycmVudFF1YW50aXR5KCk7XHJcbiAgICAgICAgICAgIHZhciByZW5kZXJUYXNrczogQXJyYXk8US5Qcm9taXNlPGFueT4+ID0gW107XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5pc1Byb2R1Y3RXaXRoVmFyaWFudHMoKSAmJiB0aGlzLmlzU2VsZWN0ZWRWYXJpYW50VW5hdmFpbGFibGUoKSkge1xyXG5cclxuICAgICAgICAgICAgICAgIHJlbmRlclRhc2tzLnB1c2godGhpcy5yZW5kZXJVbmF2YWlsYWJsZVF1YW50aXR5KHF1YW50aXR5KSk7XHJcbiAgICAgICAgICAgICAgICByZW5kZXJUYXNrcy5wdXNoKHRoaXMucmVuZGVyVW5hdmFpbGFibGVBZGRUb0NhcnQoKSk7XHJcblxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgICAgICAgICAgIHJlbmRlclRhc2tzLnB1c2godGhpcy5yZW5kZXJBdmFpbGFibGVRdWFudGl0eShxdWFudGl0eSkpO1xyXG4gICAgICAgICAgICAgICAgcmVuZGVyVGFza3MucHVzaCh0aGlzLnJlbmRlckF2YWlsYWJsZUFkZFRvQ2FydCgpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZW5kZXJUYXNrcy5wdXNoKHRoaXMucmVuZGVyQWRkVG9XaXNoTGlzdCgpKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBRLmFsbChyZW5kZXJUYXNrcyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgaXNQcm9kdWN0V2l0aFZhcmlhbnRzKCk6IGJvb2xlYW4ge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuICQuaXNBcnJheSh0aGlzLmNvbnRleHQudmlld01vZGVsLmFsbFZhcmlhbnRzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBpc1NlbGVjdGVkVmFyaWFudFVuYXZhaWxhYmxlKCk6IGJvb2xlYW4ge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuICF0aGlzLmNvbnRleHQudmlld01vZGVsLnNlbGVjdGVkVmFyaWFudElkO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHJlbmRlclVuYXZhaWxhYmxlUXVhbnRpdHkocXVhbnRpdHk6IGFueSk6IFEuUHJvbWlzZTx2b2lkPiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gUS5mY2FsbCgoKSA9PiB0aGlzLnJlbmRlcignUHJvZHVjdFF1YW50aXR5JywgeyBRdWFudGl0eTogcXVhbnRpdHksIERpc2FibGVkOiB0cnVlIH0pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCByZW5kZXJBdmFpbGFibGVRdWFudGl0eShxdWFudGl0eTogYW55KTogUS5Qcm9taXNlPHZvaWQ+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmludmVudG9yeVNlcnZpY2VcclxuICAgICAgICAgICAgICAgIC5pc0F2YWlsYWJsZVRvU2VsbCh0aGlzLmNvbnRleHQudmlld01vZGVsLlNrdSlcclxuICAgICAgICAgICAgICAgIC50aGVuKHJlc3VsdCA9PiB0aGlzLnJlbmRlcignUHJvZHVjdFF1YW50aXR5JywgeyBRdWFudGl0eTogcXVhbnRpdHksIERpc2FibGVkOiAhcmVzdWx0IH0pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCByZW5kZXJBZGRUb1dpc2hMaXN0KCk6IFEuUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgICAgIHZhciB2bSA9IHRoaXMuY29udGV4dC52aWV3TW9kZWw7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKCdBZGRUb1dpc2hMaXN0JywgeyBMb2FkZWQ6IGZhbHNlIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNQcm9kdWN0V2l0aFZhcmlhbnRzKCkgJiYgdGhpcy5pc1NlbGVjdGVkVmFyaWFudFVuYXZhaWxhYmxlKCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3dpc2hMaXN0U2VydmljZS5nZXRMaW5lSXRlbSh2bS5wcm9kdWN0SWQsIHZtLnNlbGVjdGVkVmFyaWFudElkKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4ocmVzdWx0ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKCdBZGRUb1dpc2hMaXN0JywgeyBMb2FkZWQ6IHRydWUsIElzSW5XaXNoTGlzdDogdHJ1ZSwgSWQ6IHJlc3VsdC5JZCB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcignQWRkVG9XaXNoTGlzdCcsIHsgTG9hZGVkOiB0cnVlLCBJc0luV2lzaExpc3Q6IGZhbHNlIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHJlbmRlclVuYXZhaWxhYmxlQWRkVG9DYXJ0KCk6IFEuUHJvbWlzZTx2b2lkPiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgcmVuZGVyQXZhaWxhYmxlQWRkVG9DYXJ0KCk6IFEuUHJvbWlzZTx2b2lkPiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZGVjcmVtZW50UXVhbnRpdHkoYWN0aW9uQ29udGV4dDogSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0KSB7XHJcbiAgICAgICAgICAgIHZhciBxdWFudGl0eSA9IHRoaXMuZ2V0Q3VycmVudFF1YW50aXR5KCk7XHJcbiAgICAgICAgICAgIHF1YW50aXR5LlZhbHVlLS07XHJcblxyXG4gICAgICAgICAgICBhY3Rpb25Db250ZXh0LmV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyQXZhaWxhYmxlUXVhbnRpdHkocXVhbnRpdHkpLmRvbmUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbmNyZW1lbnRRdWFudGl0eShhY3Rpb25Db250ZXh0OiBJQ29udHJvbGxlckFjdGlvbkNvbnRleHQpIHtcclxuICAgICAgICAgICAgdmFyIHF1YW50aXR5ID0gdGhpcy5nZXRDdXJyZW50UXVhbnRpdHkoKTtcclxuICAgICAgICAgICAgcXVhbnRpdHkuVmFsdWUrKztcclxuXHJcbiAgICAgICAgICAgIGFjdGlvbkNvbnRleHQuZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJBdmFpbGFibGVRdWFudGl0eShxdWFudGl0eSkuZG9uZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGNoYW5nZVF1YW50aXR5KGFjdGlvbkNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCkge1xyXG4gICAgICAgICAgICB2YXIgcXVhbnRpdHkgPSB0aGlzLmdldEN1cnJlbnRRdWFudGl0eSgpO1xyXG4gICAgICAgICAgICB2YXIgbmV3VmFsdWU6IG51bWJlciA9IHBhcnNlSW50KGFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHQudmFsKCksIDEwKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChpc0Zpbml0ZShuZXdWYWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgIHF1YW50aXR5LlZhbHVlID0gTWF0aC5tYXgoTWF0aC5taW4obmV3VmFsdWUsIHF1YW50aXR5Lk1heCksIHF1YW50aXR5Lk1pbik7IC8vIGNvbnN0cmFpbnQgbmV3dmFsdWUgdG8gbWF4IGFuZCBtaW4uXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyQXZhaWxhYmxlUXVhbnRpdHkocXVhbnRpdHkpLmRvbmUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBhZGRMaW5lSXRlbVRvV2lzaExpc3QoYWN0aW9uQ29udGV4dDogSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0KSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9tZW1iZXJzaGlwU2VydmljZS5pc0F1dGhlbnRpY2F0ZWQoKS50aGVuKHJlc3VsdCA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LklzQXV0aGVudGljYXRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB2bSA9IHRoaXMuY29udGV4dC52aWV3TW9kZWw7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJ1c3kgPSB0aGlzLmFzeW5jQnVzeSh7IGVsZW1lbnRDb250ZXh0OiBhY3Rpb25Db250ZXh0LmVsZW1lbnRDb250ZXh0IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhbmFseXRpY0RhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIERpc3BsYXlOYW1lOiB2bS5EaXNwbGF5TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgTGlzdFByaWNlOiB2bS5MaXN0UHJpY2VcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goJ3dpc2hMaXN0TGluZUl0ZW1BZGRpbmcnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGFuYWx5dGljRGF0YVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl93aXNoTGlzdFNlcnZpY2UuYWRkTGluZUl0ZW0odm0ucHJvZHVjdElkLCB2bS5zZWxlY3RlZFZhcmlhbnRJZCkudGhlbihkYXRhID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGxpbmVJdGVtID0gZGF0YS5JdGVtcy5maWx0ZXIoaXQgPT4gaXQuUHJvZHVjdElkID09PSB2bS5wcm9kdWN0SWQgJiYgaXQuVmFyaWFudElkID09PSB2bS5zZWxlY3RlZFZhcmlhbnRJZClbMF07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKCdBZGRUb1dpc2hMaXN0JywgeyBMb2FkZWQ6IHRydWUsIElzSW5XaXNoTGlzdDogdHJ1ZSwgSWQ6IGxpbmVJdGVtLklkIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pLmZpbigoKSA9PiBidXN5LmRvbmUoKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlZGlyZWN0VG9TaWduSW5CZWZvcmVBZGRUb1dpc2hMaXN0KCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyByZW1vdmVMaW5lSXRlbVRvV2lzaExpc3QoYWN0aW9uQ29udGV4dDogSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0KSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9tZW1iZXJzaGlwU2VydmljZS5pc0F1dGhlbnRpY2F0ZWQoKS50aGVuKHJlc3VsdCA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LklzQXV0aGVudGljYXRlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpZCA9IGFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHQuZGF0YSgnaWQnKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYnVzeSA9IHRoaXMuYXN5bmNCdXN5KHsgZWxlbWVudENvbnRleHQ6IGFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHQgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fd2lzaExpc3RTZXJ2aWNlLnJlbW92ZUxpbmVJdGVtKGlkKS50aGVuKGRhdGEgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcignQWRkVG9XaXNoTGlzdCcsIHsgTG9hZGVkOiB0cnVlLCBJc0luV2lzaExpc3Q6IGZhbHNlIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pLmZpbigoKSA9PiBidXN5LmRvbmUoKSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVkaXJlY3RUb1NpZ25JbkJlZm9yZUFkZFRvV2lzaExpc3QoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHJlZGlyZWN0VG9TaWduSW5CZWZvcmVBZGRUb1dpc2hMaXN0KCkge1xyXG4gICAgICAgICAgICB0aGlzLl93aXNoTGlzdFNlcnZpY2UuZ2V0U2lnbkluVXJsKCkudGhlbihzaWduSW5VcmwgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fd2lzaExpc3RTZXJ2aWNlLmNsZWFyQ2FjaGUoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29udGV4dC53aW5kb3cubG9jYXRpb24uaHJlZiA9IHNpZ25JblVybCArICc/UmV0dXJuVXJsPScgKyB0aGlzLmNvbnRleHQud2luZG93LmxvY2F0aW9uLmhyZWY7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGFkZExpbmVJdGVtKGFjdGlvbkNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCkge1xyXG4gICAgICAgICAgICB2YXIgYnVzeSA9IHRoaXMuYXN5bmNCdXN5KHsgZWxlbWVudENvbnRleHQ6IGFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHQgfSk7XHJcbiAgICAgICAgICAgIHZhciBxdWFudGl0eSA9IHRoaXMuZ2V0Q3VycmVudFF1YW50aXR5KCk7XHJcbiAgICAgICAgICAgIHZhciB2bSA9IHRoaXMuY29udGV4dC52aWV3TW9kZWw7XHJcbiAgICAgICAgICAgIHZhciB2YXJpYW50OiBhbnkgPSBfLmZpbmQodm0uYWxsVmFyaWFudHMsICh2OiBhbnkpID0+IHYuSWQgPT09IHZtLnNlbGVjdGVkVmFyaWFudElkKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhOiBhbnkgPSB0aGlzLmdldFByb2R1Y3REYXRhRm9yQW5hbHl0aWNzKHZtKTtcclxuICAgICAgICAgICAgZGF0YS5RdWFudGl0eSA9IHF1YW50aXR5LlZhbHVlID8gcXVhbnRpdHkuVmFsdWUgOiAxO1xyXG4gICAgICAgICAgICBpZiAodmFyaWFudCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHZhcmlhbnREYXRhOiBhbnkgPSB0aGlzLmdldFZhcmlhbnREYXRhRm9yQW5hbHl0aWNzKHZhcmlhbnQpO1xyXG5cclxuICAgICAgICAgICAgICAgIF8uZXh0ZW5kKGRhdGEsIHZhcmlhbnREYXRhKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKCdsaW5lSXRlbUFkZGluZycsXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTogZGF0YVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmFkZExpbmVJdGVtSW1wbCh2bS5wcm9kdWN0SWQsIHZtLkxpc3RQcmljZSwgdm0uc2VsZWN0ZWRWYXJpYW50SWQsIHF1YW50aXR5KVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKGRhdGE6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25BZGRMaW5lSXRlbVN1Y2Nlc3MoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uQ29udGV4dC5lbGVtZW50Q29udGV4dC5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhO1xyXG4gICAgICAgICAgICAgICAgfSwgKHJlYXNvbjogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkFkZExpbmVJdGVtRmFpbGVkKHJlYXNvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgYWN0aW9uQ29udGV4dC5lbGVtZW50Q29udGV4dC5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IHJlYXNvbjtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAudGhlbigoZGF0YTogYW55KSA9PiB0aGlzLmNvbXBsZXRlQWRkTGluZUl0ZW0ocXVhbnRpdHkpKVxyXG4gICAgICAgICAgICAgICAgLmZpbigoKSA9PiBidXN5LmRvbmUoKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb25BZGRMaW5lSXRlbVN1Y2Nlc3MoZGF0YTogYW55KTogdm9pZCB7XHJcbiAgICAgICAgICAgIEVycm9ySGFuZGxlci5pbnN0YW5jZSgpLnJlbW92ZUVycm9ycygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uQWRkTGluZUl0ZW1GYWlsZWQocmVhc29uOiBhbnkpOiB2b2lkIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igb24gYWRkaW5nIGxpbmUgaXRlbScsIHJlYXNvbik7XHJcbiAgICAgICAgICAgIEVycm9ySGFuZGxlci5pbnN0YW5jZSgpLm91dHB1dEVycm9yRnJvbUNvZGUoJ0FkZFRvQ2FydEZhaWxlZCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGdldEN1cnJlbnRRdWFudGl0eSgpIHtcclxuICAgICAgICAgICAgdmFyIGVsZW1lbnQ6IEpRdWVyeSA9ICQodGhpcy5jb250ZXh0LmNvbnRhaW5lcikuZmluZCgnW25hbWU9XCJwcm9kdWN0LXF1YW50aXR5XCJdJyk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgTWluOiBwYXJzZUludChlbGVtZW50LmRhdGEoJ3F1YW50aXR5TWluJyksIDEwKSxcclxuICAgICAgICAgICAgICAgIE1heDogcGFyc2VJbnQoZWxlbWVudC5kYXRhKCdxdWFudGl0eU1heCcpLCAxMCksXHJcbiAgICAgICAgICAgICAgICBWYWx1ZTogcGFyc2VJbnQoZWxlbWVudC5kYXRhKCdxdWFudGl0eScpLCAxMClcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgYWRkTGluZUl0ZW1JbXBsKHByb2R1Y3RJZDogc3RyaW5nLCBwcmljZTogc3RyaW5nLCB2YXJpYW50SWQ6IHN0cmluZywgcXVhbnRpdHk6IGFueSk6IFEuUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY2FydFNlcnZpY2UuYWRkTGluZUl0ZW0ocHJvZHVjdElkLCBwcmljZSwgdmFyaWFudElkLCBxdWFudGl0eS5WYWx1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgY29tcGxldGVBZGRMaW5lSXRlbShxdWFudGl0eUFkZGVkOiBhbnkpOiBRLlByb21pc2U8dm9pZD4ge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHNlbGVjdEltYWdlKGFjdGlvbkNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCkge1xyXG5cclxuICAgICAgICAgICAgYWN0aW9uQ29udGV4dC5ldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNsaWNrZWRJbWFnZUluZGV4OiBhbnkgPSBhY3Rpb25Db250ZXh0LmVsZW1lbnRDb250ZXh0LmRhdGEoJ2luZGV4Jyk7XHJcbiAgICAgICAgICAgIHRoaXMucHJvZHVjdFNlcnZpY2Uuc2VsZWN0SW1hZ2UoY2xpY2tlZEltYWdlSW5kZXgsIHRoaXMuY29uY2Vybik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc2VsZWN0S3ZhKGFjdGlvbkNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCkge1xyXG5cclxuICAgICAgICAgICAgdmFyIHNlbGVjdGlvbnNUb0FkZCA9IHt9O1xyXG4gICAgICAgICAgICB2YXIgcHJvcGVydHlOYW1lOiBhbnkgPSBhY3Rpb25Db250ZXh0LmVsZW1lbnRDb250ZXh0LnBhcmVudHMoJ1tkYXRhLXByb3BlcnR5bmFtZV0nKS5kYXRhKCdwcm9wZXJ0eW5hbWUnKTtcclxuICAgICAgICAgICAgdmFyIHByb3BlcnR5RGF0YVR5cGU6IGFueSA9IGFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHQucGFyZW50cygnW2RhdGEtcHJvcGVydHlkYXRhdHlwZV0nKS5kYXRhKCdwcm9wZXJ0eWRhdGF0eXBlJyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgZm9ybWF0dGVyID0gbmV3IE9yY2tlc3RyYS5Db21wb3Nlci5Qcm9kdWN0Rm9ybWF0dGVyKCk7XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGZvcm1hdHRlci5jb252ZXJ0VG9TdHJvbmdseVR5cGVkKGFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHQudmFsKCksIHByb3BlcnR5RGF0YVR5cGUpO1xyXG5cclxuICAgICAgICAgICAgc2VsZWN0aW9uc1RvQWRkW3Byb3BlcnR5TmFtZV0gPSB2YWx1ZTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucHJvZHVjdFNlcnZpY2UudXBkYXRlU2VsZWN0ZWRLdmFzV2l0aChzZWxlY3Rpb25zVG9BZGQsIHRoaXMuY29uY2Vybik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgY2FsY3VsYXRlUHJpY2UoKTogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJvZHVjdFNlcnZpY2UuY2FsY3VsYXRlUHJpY2UodGhpcy5jb250ZXh0LnZpZXdNb2RlbC5wcm9kdWN0SWQsIHRoaXMuY29uY2Vybik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgZ2V0UHJvZHVjdERhdGFGb3JBbmFseXRpY3Modm06IGFueSk6IGFueSB7XHJcbiAgICAgICAgICAgIHZhciBwcm9kdWN0SWQ6IHN0cmluZyA9ICh2bS5wcm9kdWN0SWQpID8gdm0ucHJvZHVjdElkIDogdm0uUHJvZHVjdElkO1xyXG5cclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBMaXN0OiB0aGlzLmdldExpc3ROYW1lRm9yQW5hbHl0aWNzKCksXHJcbiAgICAgICAgICAgICAgICBQcm9kdWN0SWQ6IHByb2R1Y3RJZCxcclxuICAgICAgICAgICAgICAgIERpc3BsYXlOYW1lOiB2bS5EaXNwbGF5TmFtZSxcclxuICAgICAgICAgICAgICAgIExpc3RQcmljZTogdm0uTGlzdFByaWNlLFxyXG4gICAgICAgICAgICAgICAgQnJhbmQ6IHZtLkJyYW5kLFxyXG4gICAgICAgICAgICAgICAgQ2F0ZWdvcnlJZDogdm0uQ2F0ZWdvcnlJZFxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgZ2V0TGlzdE5hbWVGb3JBbmFseXRpY3MoKTogc3RyaW5nIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdMaXN0TmFtZSBub3QgZGVmaW5lZCBmb3IgdGhpcyBjb250cm9sbGVyJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgZ2V0VmFyaWFudERhdGFGb3JBbmFseXRpY3ModmFyaWFudDogYW55KTogYW55IHtcclxuICAgICAgICAgICAgdmFyIHZhcmlhbnROYW1lOiBzdHJpbmcgPSB0aGlzLmJ1aWxkVmFyaWFudE5hbWUodmFyaWFudC5LdmFzKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhOiBhbnkgPSB7XHJcbiAgICAgICAgICAgICAgICBWYXJpYW50OiB2YXJpYW50TmFtZSxcclxuICAgICAgICAgICAgICAgIE5hbWU6IHZhcmlhbnQuRGlzcGxheU5hbWUgPyB2YXJpYW50LkRpc3BsYXlOYW1lIDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICAgICAgTGlzdFByaWNlOiB2YXJpYW50Lkxpc3RQcmljZVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgYnVpbGRWYXJpYW50TmFtZShrdmFzOiBhbnkpOiBzdHJpbmcge1xyXG4gICAgICAgICAgICB2YXIga2V5czogc3RyaW5nW10gPSBPYmplY3Qua2V5cyhrdmFzKS5zb3J0KCk7XHJcbiAgICAgICAgICAgIHZhciBuYW1lUGFydHM6IHN0cmluZ1tdID0gW107XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBpOiBudW1iZXIgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIGtleTogc3RyaW5nID0ga2V5c1tpXTtcclxuICAgICAgICAgICAgICAgIHZhciB2YWx1ZTogYW55ID0ga3Zhc1trZXldO1xyXG5cclxuICAgICAgICAgICAgICAgIG5hbWVQYXJ0cy5wdXNoKHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5hbWVQYXJ0cy5qb2luKCcgJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vUHJvZHVjdC9Tb3VyY2UvVHlwZXNjcmlwdC9Qcm9kdWN0Q29udHJvbGxlci50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgZXhwb3J0IGNsYXNzIFByb2R1Y3REZXRhaWxDb250cm9sbGVyIGV4dGVuZHMgT3Jja2VzdHJhLkNvbXBvc2VyLlByb2R1Y3RDb250cm9sbGVyIHtcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIF9jb25jZXJuOiBzdHJpbmcgPSAncHJvZHVjdERldGFpbCc7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKCkge1xyXG5cclxuICAgICAgICAgICAgc3VwZXIuaW5pdGlhbGl6ZSgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5wcm9kdWN0U2VydmljZS51cGRhdGVTZWxlY3RlZEt2YXNXaXRoKHRoaXMuY29udGV4dC52aWV3TW9kZWwuc2VsZWN0ZWRLdmFzLCB0aGlzLl9jb25jZXJuKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBwcmljZURpc3BsYXlCdXN5OiBVSUJ1c3lIYW5kbGUgPSB0aGlzLmFzeW5jQnVzeSh7XHJcbiAgICAgICAgICAgICAgICBtc0RlbGF5OiAzMDAsXHJcbiAgICAgICAgICAgICAgICBsb2FkaW5nSW5kaWNhdG9yU2VsZWN0b3I6ICcubG9hZGluZy1pbmRpY2F0b3ItcHJpY2VkaXNjb3VudCdcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgYWRkVG9DYXJ0QnVzeTogVUlCdXN5SGFuZGxlID0gdGhpcy5hc3luY0J1c3koe1xyXG4gICAgICAgICAgICAgICAgbXNEZWxheTogMzAwLFxyXG4gICAgICAgICAgICAgICAgbG9hZGluZ0luZGljYXRvclNlbGVjdG9yOiAnLmxvYWRpbmctaW5kaWNhdG9yLWludmVudG9yeSdcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBRLndoZW4odGhpcy5jYWxjdWxhdGVQcmljZSgpKS5kb25lKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHByaWNlRGlzcGxheUJ1c3kuZG9uZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMubm90aWZ5QW5hbHl0aWNzT2ZQcm9kdWN0RGV0YWlsc0ltcHJlc3Npb24oKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIFEud2hlbih0aGlzLnJlbmRlckRhdGEoKSkuZG9uZSgoKSA9PiBhZGRUb0NhcnRCdXN5LmRvbmUoKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgZ2V0TGlzdE5hbWVGb3JBbmFseXRpY3MoKTogc3RyaW5nIHtcclxuICAgICAgICAgICAgcmV0dXJuICdEZXRhaWwnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG5vdGlmeUFuYWx5dGljc09mUHJvZHVjdERldGFpbHNJbXByZXNzaW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgdm0gPSB0aGlzLmNvbnRleHQudmlld01vZGVsO1xyXG4gICAgICAgICAgICB2YXIgdmFyaWFudDogYW55ID0gXy5maW5kKHZtLmFsbFZhcmlhbnRzLCAodjogYW55KSA9PiB2LklkID09PSB2bS5zZWxlY3RlZFZhcmlhbnRJZCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgZGF0YTogYW55ID0gdGhpcy5nZXRQcm9kdWN0RGF0YUZvckFuYWx5dGljcyh2bSk7XHJcbiAgICAgICAgICAgIGlmICh2YXJpYW50KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdmFyaWFudERhdGE6IGFueSA9IHRoaXMuZ2V0VmFyaWFudERhdGFGb3JBbmFseXRpY3ModmFyaWFudCk7XHJcblxyXG4gICAgICAgICAgICAgICAgXy5leHRlbmQoZGF0YSwgdmFyaWFudERhdGEpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnB1Ymxpc2hQcm9kdWN0SW1wcmVzc2lvbkV2ZW50KGRhdGEpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHB1Ymxpc2hQcm9kdWN0SW1wcmVzc2lvbkV2ZW50KGRhdGE6IGFueSkge1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goJ3Byb2R1Y3REZXRhaWxzUmVuZGVyZWQnLFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IGRhdGFcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uU2VsZWN0ZWRWYXJpYW50SWRDaGFuZ2VkKGU6IElFdmVudEluZm9ybWF0aW9uKSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnJlbmRlckRhdGEoKS5kb25lKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb25TZWxlY3RlZEt2YXNDaGFuZ2VkKGU6IElFdmVudEluZm9ybWF0aW9uKSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcignS3ZhSXRlbXMnLCB7IEtleVZhcmlhbnRBdHRyaWJ1dGVJdGVtczogZS5kYXRhIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uSW1hZ2VzQ2hhbmdlZChlOiBJRXZlbnRJbmZvcm1hdGlvbikge1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNQcm9kdWN0V2l0aFZhcmlhbnRzKCkgJiYgdGhpcy5pc1NlbGVjdGVkVmFyaWFudFVuYXZhaWxhYmxlKCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKCdQcm9kdWN0SW1hZ2VzJywgdGhpcy5nZXRVbmF2YWlsYWJsZVByb2R1Y3RJbWFnZXMoZSkpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIoJ1Byb2R1Y3RJbWFnZXMnLCBlLmRhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGdldFVuYXZhaWxhYmxlUHJvZHVjdEltYWdlcyhlOiBJRXZlbnRJbmZvcm1hdGlvbik6IGFueSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgZmFsbGJhY2tJbWFnZVVybDogc3RyaW5nID0gZS5kYXRhLkZhbGxiYWNrSW1hZ2VVcmw7XHJcblxyXG4gICAgICAgICAgICB2YXIgaW1hZ2U6IGFueSA9IHtcclxuICAgICAgICAgICAgICAgIFRodW1ibmFpbFVybDogZmFsbGJhY2tJbWFnZVVybCxcclxuICAgICAgICAgICAgICAgIEltYWdlVXJsOiBmYWxsYmFja0ltYWdlVXJsLFxyXG4gICAgICAgICAgICAgICAgU2VsZWN0ZWQ6IHRydWVcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHZhciB2bTogYW55ID0ge1xyXG4gICAgICAgICAgICAgICAgRGlzcGxheU5hbWU6IGUuZGF0YS5EaXNwbGF5TmFtZSxcclxuICAgICAgICAgICAgICAgIEltYWdlczogW2ltYWdlXSxcclxuICAgICAgICAgICAgICAgIFNlbGVjdGVkSW1hZ2U6IHtcclxuICAgICAgICAgICAgICAgICAgICBJbWFnZVVybDogZmFsbGJhY2tJbWFnZVVybFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHZtO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uUHJpY2VzQ2hhbmdlZChlOiBJRXZlbnRJbmZvcm1hdGlvbikge1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNQcm9kdWN0V2l0aFZhcmlhbnRzKCkgJiYgdGhpcy5pc1NlbGVjdGVkVmFyaWFudFVuYXZhaWxhYmxlKCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKCdQcmljZURpc2NvdW50JywgbnVsbCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcignUHJpY2VEaXNjb3VudCcsIGUuZGF0YSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCByZW5kZXJVbmF2YWlsYWJsZUFkZFRvQ2FydCgpOiBRLlByb21pc2U8dm9pZD4ge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFEuZmNhbGwoKCkgPT4gdGhpcy5yZW5kZXIoJ0FkZFRvQ2FydFByb2R1Y3REZXRhaWwnLCB7IElzVW5hdmFpbGFibGU6IHRydWUgfSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHJlbmRlckF2YWlsYWJsZUFkZFRvQ2FydCgpOiBRLlByb21pc2U8dm9pZD4ge1xyXG5cclxuICAgICAgICAgICAgdmFyIHNrdTogc3RyaW5nID0gdGhpcy5jb250ZXh0LnZpZXdNb2RlbC5Ta3U7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5pbnZlbnRvcnlTZXJ2aWNlLmlzQXZhaWxhYmxlVG9TZWxsKHNrdSlcclxuICAgICAgICAgICAgICAgICAgICAgICAudGhlbihyZXN1bHQgPT4gdGhpcy5yZW5kZXIoJ0FkZFRvQ2FydFByb2R1Y3REZXRhaWwnLCB7IElzQXZhaWxhYmxlVG9TZWxsOiByZXN1bHQgfSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHNlbGVjdEt2YShhY3Rpb25Db250ZXh0OiBJQ29udHJvbGxlckFjdGlvbkNvbnRleHQpIHtcclxuXHJcbiAgICAgICAgICAgIHN1cGVyLnNlbGVjdEt2YShhY3Rpb25Db250ZXh0KTtcclxuXHJcbiAgICAgICAgICAgIC8vSUU4IGNoZWNrXHJcbiAgICAgICAgICAgIGlmIChoaXN0b3J5KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnByb2R1Y3RTZXJ2aWNlLnJlcGxhY2VIaXN0b3J5KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBjb21wbGV0ZUFkZExpbmVJdGVtKHF1YW50aXR5QWRkZWQ6IGFueSk6IFEuUHJvbWlzZTx2b2lkPiB7XHJcblxyXG4gICAgICAgICAgICB2YXIgcXVhbnRpdHkgPSB7XHJcbiAgICAgICAgICAgICAgICBNaW46IHF1YW50aXR5QWRkZWQuTWluLFxyXG4gICAgICAgICAgICAgICAgTWF4OiBxdWFudGl0eUFkZGVkLk1heCxcclxuICAgICAgICAgICAgICAgIFZhbHVlOiBxdWFudGl0eUFkZGVkLk1pblxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMucmVuZGVyQXZhaWxhYmxlUXVhbnRpdHkocXVhbnRpdHkpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL1Byb2R1Y3QvU291cmNlL1R5cGVzY3JpcHQvUHJvZHVjdENvbnRyb2xsZXIudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIGV4cG9ydCBjbGFzcyBQcm9kdWN0Wm9vbUNvbnRyb2xsZXIgZXh0ZW5kcyBPcmNrZXN0cmEuQ29tcG9zZXIuUHJvZHVjdENvbnRyb2xsZXIge1xyXG5cclxuICAgICAgICBwdWJsaWMgaW5pdGlhbGl6ZSgpIHtcclxuXHJcbiAgICAgICAgICAgIHN1cGVyLmluaXRpYWxpemUoKTtcclxuICAgICAgICAgICAgdGhpcy5pbml0Wm9vbSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG9wZW5ab29tKGV2ZW50OiBKUXVlcnlFdmVudE9iamVjdCkge1xyXG4gICAgICAgICAgICBsZXQgY29udGV4dCQ6IEpRdWVyeSA9ICQoZXZlbnQudGFyZ2V0KSxcclxuICAgICAgICAgICAgICAgIGluZGV4OiBudW1iZXIgPSBwYXJzZUludCgkKCcuanMtdGh1bWJuYWlsLmFjdGl2ZScpLmF0dHIoJ2RhdGEtaW5kZXgnKSwgMTApO1xyXG5cclxuICAgICAgICAgICAgJCgnLmpzLXpvb20tdGh1bWJuYWlsJykuZXEoaW5kZXgpLmNsaWNrKCk7XHJcbiAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICQoJy5tb2RhbC1mdWxsc2NyZWVuJykubW9kYWwoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBjaGFuZ2Vab29tZWRJbWFnZShldmVudDogSlF1ZXJ5RXZlbnRPYmplY3QpIHtcclxuICAgICAgICAgICAgbGV0IGNvbnRleHQkOiBKUXVlcnkgPSAkKGV2ZW50LnRhcmdldCksXHJcbiAgICAgICAgICAgICAgICBsYXJnZUltYWdlOiBIVE1MSW1hZ2VFbGVtZW50ID0gPEhUTUxJbWFnZUVsZW1lbnQ+ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmpzLXpvb20taW1hZ2UnKSxcclxuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiBzdHJpbmcgPSBldmVudC50YXJnZXQudGFnTmFtZSwgLy8gQ2xpY2tlZCBIVE1MIGVsZW1lbnRcclxuICAgICAgICAgICAgICAgICRsYXJnZUltYWdlOiBKUXVlcnkgPSAkKGxhcmdlSW1hZ2UpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHNlbGVjdG9yLnRvTG9jYWxlTG93ZXJDYXNlKCkgIT09ICdhJykge1xyXG4gICAgICAgICAgICAgICAgY29udGV4dCQgPSBjb250ZXh0JC5wYXJlbnQoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJCgnLmpzLXpvb20tdGh1bWJuYWlsJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG5cclxuICAgICAgICAgICAgY29udGV4dCQuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAkbGFyZ2VJbWFnZS5hdHRyKCdzcmMnLCBjb250ZXh0JC5hdHRyKCdkYXRhLWltYWdlJykpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGVycm9yWm9vbWVkSW1hZ2UoZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0KSB7XHJcbiAgICAgICAgICAgIHZhciAkZWxlbWVudCA9ICQoZXZlbnQudGFyZ2V0KSxcclxuICAgICAgICAgICAgICAgIGZhbGxiYWNrSW1hZ2VVcmwgPSAkZWxlbWVudC5hdHRyKCdkYXRhLWZhbGxiYWNrLWltYWdlLXVybCcpO1xyXG5cclxuICAgICAgICAgICAgJGVsZW1lbnQuYXR0cignc3JjJywgZmFsbGJhY2tJbWFnZVVybCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgaW5pdFpvb20oKSB7XHJcbiAgICAgICAgICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuanMtem9vbScsIChldmVudDogSlF1ZXJ5RXZlbnRPYmplY3QpID0+IHRoaXMub3Blblpvb20oZXZlbnQpKTtcclxuICAgICAgICAgICAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5qcy16b29tLXRodW1ibmFpbCcsIChldmVudDogSlF1ZXJ5RXZlbnRPYmplY3QpID0+IHRoaXMuY2hhbmdlWm9vbWVkSW1hZ2UoZXZlbnQpKTtcclxuICAgICAgICAgICAgJCgnLmpzLXpvb20taW1hZ2UnKS5vbignZXJyb3InLCAoZXZlbnQ6IEpRdWVyeUV2ZW50T2JqZWN0KSA9PiB0aGlzLmVycm9yWm9vbWVkSW1hZ2UoZXZlbnQpKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFNlbGVjdCBmaXJzdCB0aHVtYm5haWxcclxuICAgICAgICAgICAgJCgnLmpzLXpvb20tdGh1bWJuYWlsJykuZXEoMCkuY2xpY2soKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwibW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElGYWNldCB7XHJcbiAgICAgICAgaXNBcnJheTogYm9vbGVhbjtcclxuICAgICAgICBmYWNldEZpZWxkTmFtZTogc3RyaW5nO1xyXG4gICAgICAgIGZhY2V0VmFsdWU6IHN0cmluZztcclxuICAgICAgICBmYWNldFR5cGU6IHN0cmluZztcclxuICAgICAgICBmYWNldExhbmRpbmdQYWdlVXJsOiBzdHJpbmc7XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuL0lGYWNldC50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJU2VsZWN0ZWRGYWNldCB7XHJcbiAgICAgICAgZmFjZXRGaWVsZE5hbWU6IHN0cmluZztcclxuICAgICAgICBzZWxlY3RlZFZhbHVlczogc3RyaW5nW107XHJcbiAgICAgICAgaXNGYWNldEFycmF5OiBib29sZWFuO1xyXG4gICAgfVxyXG59XHJcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElTZWFyY2hDcml0ZXJpYU9wdGlvbnMge1xyXG4gICAgICAgIGZhY2V0UmVnaXN0cnk6IElIYXNoVGFibGU8c3RyaW5nPjtcclxuICAgICAgICBjb3JyZWN0ZWRTZWFyY2hUZXJtPzogc3RyaW5nO1xyXG4gICAgfVxyXG59XHJcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuL0lGYWNldC50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi9JU2VsZWN0ZWRGYWNldC50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvR2VuZXJpY3MvQ29sbGVjdGlvbnMvSUhhc2h0YWJsZS50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi9JU2VhcmNoQ3JpdGVyaWFPcHRpb25zLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgY2xhc3MgU2VhcmNoQ3JpdGVyaWEge1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGZhY2V0RmllbGROYW1lS2V5UHJlZml4OiBzdHJpbmcgPSAnZm4nO1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIGZhY2V0VmFsdWVLZXlQcmVmaXg6IHN0cmluZyA9ICdmdic7XHJcblxyXG4gICAgICAgIHByaXZhdGUgX2ZhY2V0UmVnaXN0cnk6IElIYXNoVGFibGU8c3RyaW5nPiA9IHt9O1xyXG4gICAgICAgIHB1YmxpYyBrZXl3b3Jkczogc3RyaW5nID0gJyc7XHJcbiAgICAgICAgcHVibGljIGNvcnJlY3RlZFNlYXJjaFRlcm06IHN0cmluZztcclxuICAgICAgICBwdWJsaWMgcGFnZTogbnVtYmVyID0gMTtcclxuICAgICAgICBwdWJsaWMgc29ydEJ5OiBzdHJpbmcgPSAnJztcclxuICAgICAgICBwdWJsaWMgc29ydERpcmVjdGlvbjogc3RyaW5nID0gJyc7XHJcbiAgICAgICAgcHVibGljIHNlbGVjdGVkRmFjZXRzOiBJSGFzaFRhYmxlPHN0cmluZ3xzdHJpbmdbXT4gPSB7fTtcclxuXHJcbiAgICAgICAgY29uc3RydWN0b3IocHJpdmF0ZSBldmVudEh1YiwgcHJpdmF0ZSBfd2luZG93OiBXaW5kb3cpIHtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKG9wdGlvbnM6IElTZWFyY2hDcml0ZXJpYU9wdGlvbnMpIHtcclxuICAgICAgICAgICAgdGhpcy5fZmFjZXRSZWdpc3RyeSA9IG9wdGlvbnMuZmFjZXRSZWdpc3RyeTtcclxuICAgICAgICAgICAgdGhpcy5jb3JyZWN0ZWRTZWFyY2hUZXJtID0gb3B0aW9ucy5jb3JyZWN0ZWRTZWFyY2hUZXJtO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5sb2FkRnJvbVF1ZXJ5c3RyaW5nKHRoaXMuX3dpbmRvdy5sb2NhdGlvbi5zZWFyY2gpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGxvYWRGcm9tUXVlcnlzdHJpbmcocXVlcnlzdHJpbmc6IHN0cmluZykge1xyXG4gICAgICAgICAgICB0aGlzLmxvYWROb25GYWNldENyaXRlcmlhKHF1ZXJ5c3RyaW5nKTtcclxuICAgICAgICAgICAgdGhpcy5sb2FkRmFjZXRDcml0ZXJpYShxdWVyeXN0cmluZyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdG9RdWVyeXN0cmluZygpOiBzdHJpbmcge1xyXG4gICAgICAgICAgICB2YXIgcXVlcnlCdWlsZGVyOiBzdHJpbmdbXSA9IFtdLFxyXG4gICAgICAgICAgICAgICAgZmFjZXRLZXk6IHN0cmluZyxcclxuICAgICAgICAgICAgICAgIGZhY2V0SW5kZXg6IG51bWJlciA9IDEsXHJcbiAgICAgICAgICAgICAgICBmYWNldFZhbHVlOiBhbnksXHJcbiAgICAgICAgICAgICAgICBzZWxlY3RlZEZhY2V0czogSUhhc2hUYWJsZTxzdHJpbmd8c3RyaW5nW10+ID0gdGhpcy5zZWxlY3RlZEZhY2V0cztcclxuXHJcbiAgICAgICAgICAgIGlmICghXy5pc0VtcHR5KHRoaXMua2V5d29yZHMpIHx8XHJcbiAgICAgICAgICAgICAgICAhXy5pc0VtcHR5KHRoaXMuc29ydEJ5KSB8fFxyXG4gICAgICAgICAgICAgICAgIV8uaXNFbXB0eSh0aGlzLnNvcnREaXJlY3Rpb24pIHx8XHJcbiAgICAgICAgICAgICAgICAhXy5pc0VtcHR5KHRoaXMucGFnZSkgJiYgdGhpcy5wYWdlID4gMSB8fFxyXG4gICAgICAgICAgICAgICAgIV8uaXNFbXB0eSh0aGlzLnNlbGVjdGVkRmFjZXRzKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5QnVpbGRlci5wdXNoKCc/Jyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIV8uaXNFbXB0eSh0aGlzLmtleXdvcmRzKSB8fCAhXy5pc0VtcHR5KHRoaXMuY29ycmVjdGVkU2VhcmNoVGVybSkpIHtcclxuICAgICAgICAgICAgICAgIHF1ZXJ5QnVpbGRlci5wdXNoKCdrZXl3b3Jkcz0nKTtcclxuICAgICAgICAgICAgICAgIHZhciBrZXl3b3JkID0gXy5pc0VtcHR5KHRoaXMuY29ycmVjdGVkU2VhcmNoVGVybSkgPyB0aGlzLmtleXdvcmRzIDogdGhpcy5jb3JyZWN0ZWRTZWFyY2hUZXJtO1xyXG4gICAgICAgICAgICAgICAgcXVlcnlCdWlsZGVyLnB1c2godGhpcy5lbmNvZGVRdWVyeXN0cmluZ1ZhbHVlKGtleXdvcmQpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKCFfLmlzRW1wdHkodGhpcy5zb3J0QnkpKSB7XHJcbiAgICAgICAgICAgICAgICBxdWVyeUJ1aWxkZXIucHVzaCgnJnNvcnRCeT0nKTtcclxuICAgICAgICAgICAgICAgIHF1ZXJ5QnVpbGRlci5wdXNoKHRoaXMuZW5jb2RlUXVlcnlzdHJpbmdWYWx1ZSh0aGlzLnNvcnRCeSkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIV8uaXNFbXB0eSh0aGlzLnNvcnREaXJlY3Rpb24pKSB7XHJcbiAgICAgICAgICAgICAgICBxdWVyeUJ1aWxkZXIucHVzaCgnJnNvcnREaXJlY3Rpb249Jyk7XHJcbiAgICAgICAgICAgICAgICBxdWVyeUJ1aWxkZXIucHVzaCh0aGlzLmVuY29kZVF1ZXJ5c3RyaW5nVmFsdWUodGhpcy5zb3J0RGlyZWN0aW9uKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghXy5pc0VtcHR5KHRoaXMucGFnZSkgJiYgdGhpcy5wYWdlID4gMSkge1xyXG4gICAgICAgICAgICAgICAgcXVlcnlCdWlsZGVyLnB1c2goJyZwYWdlPScpO1xyXG4gICAgICAgICAgICAgICAgcXVlcnlCdWlsZGVyLnB1c2godGhpcy5wYWdlLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmb3IgKGZhY2V0S2V5IGluIHNlbGVjdGVkRmFjZXRzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWRGYWNldHMuaGFzT3duUHJvcGVydHkoZmFjZXRLZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmFjZXRWYWx1ZSA9IHNlbGVjdGVkRmFjZXRzW2ZhY2V0S2V5XTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcXVlcnlCdWlsZGVyLnB1c2goJyYnKTtcclxuICAgICAgICAgICAgICAgICAgICBxdWVyeUJ1aWxkZXIucHVzaChTZWFyY2hDcml0ZXJpYS5mYWNldEZpZWxkTmFtZUtleVByZWZpeCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcXVlcnlCdWlsZGVyLnB1c2goZmFjZXRJbmRleC50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAgICAgICBxdWVyeUJ1aWxkZXIucHVzaCgnPScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5QnVpbGRlci5wdXNoKHRoaXMuZW5jb2RlUXVlcnlzdHJpbmdWYWx1ZShmYWNldEtleSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5QnVpbGRlci5wdXNoKCcmJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcXVlcnlCdWlsZGVyLnB1c2goU2VhcmNoQ3JpdGVyaWEuZmFjZXRWYWx1ZUtleVByZWZpeCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcXVlcnlCdWlsZGVyLnB1c2goZmFjZXRJbmRleC50b1N0cmluZygpKTtcclxuICAgICAgICAgICAgICAgICAgICBxdWVyeUJ1aWxkZXIucHVzaCgnPScpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBxdWVyeUJ1aWxkZXIucHVzaCh0aGlzLmVuY29kZVF1ZXJ5c3RyaW5nVmFsdWUoXy5pc0FycmF5KGZhY2V0VmFsdWUpID8gZmFjZXRWYWx1ZS5qb2luKCd8JykgOiBmYWNldFZhbHVlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZmFjZXRJbmRleCsrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcXVlcnlCdWlsZGVyLmpvaW4oJycpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGNsZWFyRmFjZXRzKCkge1xyXG4gICAgICAgICAgICB0aGlzLnJlc2V0UGFnaW5nKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRGYWNldHMgPSB7fTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBhZGRTaW5nbGVGYWNldChmYWNldEtleTogc3RyaW5nLCBmYWNldFZhbHVlOiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEZhY2V0c1tmYWNldEtleV0gPSBmYWNldFZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHVwZGF0ZU11bHRpRmFjZXRzKGZhY2V0czogSUhhc2hUYWJsZTxzdHJpbmd8c3RyaW5nW10+KSB7XHJcbiAgICAgICAgICAgIHZhciBmYWNldEtleTogc3RyaW5nLFxyXG4gICAgICAgICAgICAgICAgZmFjZXRWYWx1ZXM6IHN0cmluZ1tdO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5yZXNldFBhZ2luZygpO1xyXG4gICAgICAgICAgICB0aGlzLmNsZWFyU2VsZWN0ZWRNdWx0aUZhY2V0cygpO1xyXG5cclxuICAgICAgICAgICAgZm9yIChmYWNldEtleSBpbiBmYWNldHMpIHtcclxuICAgICAgICAgICAgICAgIGlmIChmYWNldHMuaGFzT3duUHJvcGVydHkoZmFjZXRLZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEZhY2V0c1tmYWNldEtleV0gPSBbXTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZmFjZXRWYWx1ZXMgPSAodHlwZW9mIGZhY2V0c1tmYWNldEtleV0gPT09ICdzdHJpbmcnID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgWzxzdHJpbmc+ZmFjZXRzW2ZhY2V0S2V5XV0gOiA8c3RyaW5nW10+ZmFjZXRzW2ZhY2V0S2V5XSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZhY2V0VmFsdWVzLmZvckVhY2goKHZhbHVlOiBzdHJpbmcsIGluZGV4OiBudW1iZXIsIGFycmF5OiBzdHJpbmdbXSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAoPHN0cmluZ1tdPnRoaXMuc2VsZWN0ZWRGYWNldHNbZmFjZXRLZXldKS5wdXNoKHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHJlbW92ZUZhY2V0KGZhY2V0VG9SZW1vdmU6IE9yY2tlc3RyYS5Db21wb3Nlci5JRmFjZXQpIHtcclxuICAgICAgICAgICAgdmFyIGZhY2V0OiBJU2VsZWN0ZWRGYWNldDtcclxuICAgICAgICAgICAgdGhpcy5yZXNldFBhZ2luZygpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuc2VsZWN0ZWRGYWNldHMuaGFzT3duUHJvcGVydHkoZmFjZXRUb1JlbW92ZS5mYWNldEZpZWxkTmFtZSkpIHtcclxuICAgICAgICAgICAgICAgIGZhY2V0ID0gdGhpcy5nZXRTZWxlY3RlZEZhY2V0c0FycmF5KGZhY2V0VG9SZW1vdmUuZmFjZXRGaWVsZE5hbWUpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChmYWNldFRvUmVtb3ZlLmZhY2V0VHlwZS50b0xvd2VyQ2FzZSgpID09PSAncmFuZ2UnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmFjZXQuc2VsZWN0ZWRWYWx1ZXMgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHRvIHN0cmluZyBpbiBjYXNlIGZhY2V0VmFsdWUgaXMgYSBudW1iZXJcclxuICAgICAgICAgICAgICAgICAgICBmYWNldC5zZWxlY3RlZFZhbHVlcyA9IF8ud2l0aG91dChmYWNldC5zZWxlY3RlZFZhbHVlcywgZmFjZXRUb1JlbW92ZS5mYWNldFZhbHVlLnRvU3RyaW5nKCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRTZWxlY3RlZEZhY2V0KGZhY2V0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXRTZWxlY3RlZEZhY2V0c0FycmF5KGZhY2V0RmllbGROYW1lOiBzdHJpbmcpIDogSVNlbGVjdGVkRmFjZXQge1xyXG4gICAgICAgICAgICB2YXIgaXNTZWxlY3RlZEZhY2V0QXJyYXk6IGJvb2xlYW47XHJcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZEZhY2V0OiBhbnkgPSB0aGlzLnNlbGVjdGVkRmFjZXRzW2ZhY2V0RmllbGROYW1lXTtcclxuICAgICAgICAgICAgdmFyIHNlbGVjdGVkRmFjZXRBcnJheTogQXJyYXk8c3RyaW5nPjtcclxuXHJcbiAgICAgICAgICAgIGlmIChfLmlzQXJyYXkoc2VsZWN0ZWRGYWNldCkpIHtcclxuICAgICAgICAgICAgICAgIGlzU2VsZWN0ZWRGYWNldEFycmF5ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkRmFjZXRBcnJheSA9IHNlbGVjdGVkRmFjZXQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoXy5pc1N0cmluZyhzZWxlY3RlZEZhY2V0KSkge1xyXG4gICAgICAgICAgICAgICAgaXNTZWxlY3RlZEZhY2V0QXJyYXkgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkRmFjZXRBcnJheSA9ICg8c3RyaW5nPnNlbGVjdGVkRmFjZXQpLnNwbGl0KCd8Jyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFRoZSBzZWxlY3RlZCBmYWNldCAke2ZhY2V0RmllbGROYW1lfSBpcyBub3QgYW4gYXJyYXkgb3IgYSBzdHJpbmdgKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIGZhY2V0RmllbGROYW1lOiBmYWNldEZpZWxkTmFtZSxcclxuICAgICAgICAgICAgICAgIHNlbGVjdGVkVmFsdWVzOiBzZWxlY3RlZEZhY2V0QXJyYXksXHJcbiAgICAgICAgICAgICAgICBpc0ZhY2V0QXJyYXk6IGlzU2VsZWN0ZWRGYWNldEFycmF5XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHNldFNlbGVjdGVkRmFjZXQoc2VsZWN0ZWRGYWNldDogSVNlbGVjdGVkRmFjZXQpOiB2b2lkIHtcclxuICAgICAgICAgICAgdmFyIGZhY2V0U3RyOiBzdHJpbmcgPSAnJztcclxuXHJcbiAgICAgICAgICAgIGlmIChfLmlzRW1wdHkoc2VsZWN0ZWRGYWNldC5zZWxlY3RlZFZhbHVlcykpIHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnNlbGVjdGVkRmFjZXRzW3NlbGVjdGVkRmFjZXQuZmFjZXRGaWVsZE5hbWVdO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNlbGVjdGVkRmFjZXQuaXNGYWNldEFycmF5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWxlY3RlZEZhY2V0c1tzZWxlY3RlZEZhY2V0LmZhY2V0RmllbGROYW1lXSA9IHNlbGVjdGVkRmFjZXQuc2VsZWN0ZWRWYWx1ZXM7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIF8uZWFjaChzZWxlY3RlZEZhY2V0LnNlbGVjdGVkVmFsdWVzLCAodjogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghXy5pc0VtcHR5KGZhY2V0U3RyKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFjZXRTdHIgPSBmYWNldFN0ciArICd8JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgZmFjZXRTdHIgPSBmYWNldFN0ciArIHY7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRGYWNldHNbc2VsZWN0ZWRGYWNldC5mYWNldEZpZWxkTmFtZV0gPSBmYWNldFN0cjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBjbGVhclNlbGVjdGVkTXVsdGlGYWNldHMoKSB7XHJcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZEZhY2V0cyA9IHRoaXMuc2VsZWN0ZWRGYWNldHMsXHJcbiAgICAgICAgICAgICAgICBmYWNldEtleTogc3RyaW5nLFxyXG4gICAgICAgICAgICAgICAgZmFjZXRLZXlzVG9EZWxldGU6IHN0cmluZ1tdID0gW107XHJcblxyXG4gICAgICAgICAgICBmb3IgKGZhY2V0S2V5IGluIHNlbGVjdGVkRmFjZXRzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc2VsZWN0ZWRGYWNldHMuaGFzT3duUHJvcGVydHkoZmFjZXRLZXkpICYmIHRoaXMuX2ZhY2V0UmVnaXN0cnlbZmFjZXRLZXldID09PSAnbXVsdGlzZWxlY3QnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmFjZXRLZXlzVG9EZWxldGUucHVzaChmYWNldEtleSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZhY2V0S2V5c1RvRGVsZXRlLmZvckVhY2goKGZhY2V0S2V5OiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSB0aGlzLnNlbGVjdGVkRmFjZXRzW2ZhY2V0S2V5XTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHJlc2V0UGFnaW5nKCkge1xyXG4gICAgICAgICAgICB0aGlzLnBhZ2UgPSAxO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBsb2FkRmFjZXRDcml0ZXJpYShxdWVyeXN0cmluZzogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIC8vIFRPRE86IERvbid0IG5lZWQgdG8gbG9vcCBvdmVyIHF1ZXJ5c3RyaW5nIGFnYWluLiBTaG91bGRcclxuICAgICAgICAgICAgLy8gYmUgcHJvY2Vzc2luZyB0aGlzIGluIHRoZSBzYW1lIGxvb3AgYXMgdGhlIG5vbi1mYWNldCBjcml0ZXJpYS5cclxuICAgICAgICAgICAgdmFyIGZhY2V0RmllbGROYW1lOiBzdHJpbmcsXHJcbiAgICAgICAgICAgICAgICBmYWNldFZhbHVlOiBzdHJpbmcsXHJcbiAgICAgICAgICAgICAgICBrZXk6IHN0cmluZyxcclxuICAgICAgICAgICAgICAgIGtleXM6IGFueSA9IHt9LFxyXG4gICAgICAgICAgICAgICAga2V5VmFsdWVzOiBhbnkgPSB7fTtcclxuXHJcbiAgICAgICAgICAgIGlmIChxdWVyeXN0cmluZy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcXVlcnlzdHJpbmcuc3Vic3RyaW5nKDEpLnNwbGl0KCcmJykuZm9yRWFjaCgodmFsdWUsIGluZGV4LCBhcnJheSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdmFyIGtleVZhbHVlOiBzdHJpbmdbXSA9IHZhbHVlLnNwbGl0KCc9JyksXHJcbiAgICAgICAgICAgICAgICAgICAga2V5Rm91bmQ6IHN0cmluZyxcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZUZvdW5kOiBzdHJpbmc7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGtleVZhbHVlLmxlbmd0aCA9PT0gMikge1xyXG4gICAgICAgICAgICAgICAgICAgIGtleUZvdW5kID0ga2V5VmFsdWVbMF0udG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZUZvdW5kID0gdGhpcy5kZWNvZGVRdWVyeXN0cmluZ1ZhbHVlKGtleVZhbHVlWzFdKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGtleUZvdW5kLmluZGV4T2YoU2VhcmNoQ3JpdGVyaWEuZmFjZXRGaWVsZE5hbWVLZXlQcmVmaXgpID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleXNba2V5Rm91bmQucmVwbGFjZShTZWFyY2hDcml0ZXJpYS5mYWNldEZpZWxkTmFtZUtleVByZWZpeCwgJycpXSA9IHZhbHVlRm91bmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAoa2V5Rm91bmQuaW5kZXhPZihTZWFyY2hDcml0ZXJpYS5mYWNldFZhbHVlS2V5UHJlZml4KSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBrZXlWYWx1ZXNba2V5Rm91bmQucmVwbGFjZShTZWFyY2hDcml0ZXJpYS5mYWNldFZhbHVlS2V5UHJlZml4LCAnJyldID0gdmFsdWVGb3VuZDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgZm9yIChrZXkgaW4ga2V5cykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGtleXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZhY2V0RmllbGROYW1lID0gdGhpcy5kZWNvZGVRdWVyeXN0cmluZ1ZhbHVlKGtleXNba2V5XSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChrZXlWYWx1ZXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmYWNldFZhbHVlID0gdGhpcy5kZWNvZGVRdWVyeXN0cmluZ1ZhbHVlKGtleVZhbHVlc1trZXldKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAodGhpcy5fZmFjZXRSZWdpc3RyeVtmYWNldEZpZWxkTmFtZV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ211bHRpc2VsZWN0JzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNlbGVjdGVkRmFjZXRzW2ZhY2V0RmllbGROYW1lXSA9IGZhY2V0VmFsdWUuc3BsaXQoJ3wnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2VsZWN0ZWRGYWNldHNbZmFjZXRGaWVsZE5hbWVdID0gZmFjZXRWYWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBsb2FkTm9uRmFjZXRDcml0ZXJpYShxdWVyeXN0cmluZzogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIGlmIChxdWVyeXN0cmluZy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcXVlcnlzdHJpbmcuc3Vic3RyaW5nKDEpLnNwbGl0KCcmJykuZm9yRWFjaCgodmFsdWUsIGluZGV4LCBhcnJheSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdmFyIGtleVZhbHVlOiBzdHJpbmdbXSA9IHZhbHVlLnNwbGl0KCc9JyksXHJcbiAgICAgICAgICAgICAgICAgICAga2V5Rm91bmQ6IHN0cmluZyxcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZUZvdW5kOiBzdHJpbmc7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGtleVZhbHVlLmxlbmd0aCA9PT0gMikge1xyXG4gICAgICAgICAgICAgICAgICAgIGtleUZvdW5kID0ga2V5VmFsdWVbMF0udG9VcHBlckNhc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZUZvdW5kID0gdGhpcy5kZWNvZGVRdWVyeXN0cmluZ1ZhbHVlKChrZXlWYWx1ZVsxXSArICcnKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoa2V5Rm91bmQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnS0VZV09SRFMnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5rZXl3b3JkcyA9IHZhbHVlRm91bmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ1NPUlRCWSc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNvcnRCeSA9IHZhbHVlRm91bmQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ1NPUlRESVJFQ1RJT04nOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zb3J0RGlyZWN0aW9uID0gdmFsdWVGb3VuZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdQQUdFJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGFnZSA9IHBhcnNlSW50KHZhbHVlRm91bmQsIDEwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgZW5jb2RlUXVlcnlzdHJpbmdWYWx1ZSh2YWx1ZVRvRW5jb2RlOiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZVRvRW5jb2RlKS5yZXBsYWNlKC8lMjAvZywgJysnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgZGVjb2RlUXVlcnlzdHJpbmdWYWx1ZSh2YWx1ZVRvRGVjb2RlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBkZWNvZGVVUklDb21wb25lbnQodmFsdWVUb0RlY29kZSkucmVwbGFjZSgvXFwrL2csICcgJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L0V2ZW50cy9JRXZlbnRJbmZvcm1hdGlvbi50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvR2VuZXJpY3MvQ29sbGVjdGlvbnMvSUhhc2h0YWJsZS50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vSVNlYXJjaENyaXRlcmlhT3B0aW9ucy50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJU2VhcmNoU2VydmljZSB7XHJcbiAgICAgICAgaW5pdGlhbGl6ZShvcHRpb25zOiBJU2VhcmNoQ3JpdGVyaWFPcHRpb25zKTtcclxuXHJcbiAgICAgICAgc2luZ2xlRmFjZXRzQ2hhbmdlZChldmVudEluZm9ybWF0aW9uOiBJRXZlbnRJbmZvcm1hdGlvbik7XHJcblxyXG4gICAgICAgIG11bHRpRmFjZXRDaGFuZ2VkKGV2ZW50SW5mb3JtYXRpb246IElFdmVudEluZm9ybWF0aW9uKTtcclxuXHJcbiAgICAgICAgY2xlYXJGYWNldHMoZXZlbnRJbmZvcm1hdGlvbjogSUV2ZW50SW5mb3JtYXRpb24pO1xyXG5cclxuICAgICAgICByZW1vdmVGYWNldChldmVudEluZm9ybWF0aW9uOiBJRXZlbnRJbmZvcm1hdGlvbik7XHJcblxyXG4gICAgICAgIGdldFNlbGVjdGVkRmFjZXRzKCk6IElIYXNoVGFibGU8c3RyaW5nfHN0cmluZ1tdPjtcclxuICAgIH1cclxufVxyXG4iLCJtb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSVNpbmdsZVNlbGVjdENhdGVnb3J5IHtcclxuICAgICAgICBpc0FycmF5OiBib29sZWFuO1xyXG4gICAgICAgIGNhdGVnb3J5VXJsOiBzdHJpbmc7XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L0V2ZW50cy9JRXZlbnRIdWIudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L0V2ZW50cy9JRXZlbnRJbmZvcm1hdGlvbi50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vU2VhcmNoQ3JpdGVyaWEudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4vSVNlYXJjaFNlcnZpY2UudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uL0lGYWNldC50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vSVNpbmdsZVNlbGVjdENhdGVnb3J5LnRzJyAvPlxyXG4vLy9cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgLy8gVE9ETzogRGVjb3VwbGUgd2luZG93IG9iamVjdCBmcm9tIHNlYXJjaCBzZXJ2aWNlLlxyXG4gICAgZXhwb3J0IGNsYXNzIFNlYXJjaFNlcnZpY2UgaW1wbGVtZW50cyBJU2VhcmNoU2VydmljZSB7XHJcbiAgICAgICAgcHJpdmF0ZSBfc2VhcmNoQ3JpdGVyaWE6IFNlYXJjaENyaXRlcmlhO1xyXG4gICAgICAgIHByaXZhdGUgX2Jhc2VTZWFyY2hVcmw6IHN0cmluZyA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmLnJlcGxhY2Uod2luZG93LmxvY2F0aW9uLnNlYXJjaCwgJycpO1xyXG4gICAgICAgIHByaXZhdGUgX2Jhc2VVcmw6IHN0cmluZyA9IHRoaXMuX2Jhc2VTZWFyY2hVcmwucmVwbGFjZSh3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUsICcnKTtcclxuICAgICAgICBwcml2YXRlIF9mYWNldFJlZ2lzdHJ5OiBJSGFzaFRhYmxlPHN0cmluZz4gPSB7fTtcclxuXHJcbiAgICAgICAgY29uc3RydWN0b3IocHJpdmF0ZSBfZXZlbnRIdWI6IElFdmVudEh1YiwgcHJpdmF0ZSBfd2luZG93OiBXaW5kb3cpIHtcclxuICAgICAgICAgICAgIHRoaXMuX3NlYXJjaENyaXRlcmlhID0gbmV3IFNlYXJjaENyaXRlcmlhKF9ldmVudEh1YiwgX3dpbmRvdyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBJbml0aWFsaXplcyB0aGUgc2VhcmNoIHNlcnZpY2UuXHJcbiAgICAgICAgICpcclxuICAgICAgICAgKiBwYXJhbSBmYWNldFJlZ2lzdHJ5IEZhY2V0cyBhdmFpbGFibGUgdG8gdGhlIHNlYXJjaCBzZXJ2aWNlLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKG9wdGlvbnM6IElTZWFyY2hDcml0ZXJpYU9wdGlvbnMpIHtcclxuICAgICAgICAgICAgdGhpcy5yZWdpc3RlclN1YnNjcmlwdGlvbnMoKTtcclxuICAgICAgICAgICAgdGhpcy5fc2VhcmNoQ3JpdGVyaWEuaW5pdGlhbGl6ZShvcHRpb25zKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzaW5nbGVGYWNldHNDaGFuZ2VkKGV2ZW50SW5mb3JtYXRpb246IElFdmVudEluZm9ybWF0aW9uKSB7XHJcbiAgICAgICAgICAgIHZhciBmYWNldEtleTogc3RyaW5nID0gZXZlbnRJbmZvcm1hdGlvbi5kYXRhLmZhY2V0S2V5LFxyXG4gICAgICAgICAgICAgICAgZmFjZXRWYWx1ZTogc3RyaW5nID0gZXZlbnRJbmZvcm1hdGlvbi5kYXRhLmZhY2V0VmFsdWU7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9zZWFyY2hDcml0ZXJpYS5hZGRTaW5nbGVGYWNldChmYWNldEtleSwgZmFjZXRWYWx1ZSk7XHJcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc29ydGluZ0NoYW5nZWQoZXZlbnRJbmZvcm1hdGlvbjogSUV2ZW50SW5mb3JtYXRpb24pIHtcclxuICAgICAgICAgICAgdmFyIGRhdGFVcmwgPSBldmVudEluZm9ybWF0aW9uLmRhdGEudXJsO1xyXG4gICAgICAgICAgICB0aGlzLl93aW5kb3cubG9jYXRpb24uaHJlZiA9IGRhdGFVcmw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZ2V0U2VsZWN0ZWRGYWNldHMoKTogSUhhc2hUYWJsZTxzdHJpbmd8c3RyaW5nW10+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3NlYXJjaENyaXRlcmlhLnNlbGVjdGVkRmFjZXRzO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG11bHRpRmFjZXRDaGFuZ2VkKGV2ZW50SW5mb3JtYXRpb246IElFdmVudEluZm9ybWF0aW9uKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3NlYXJjaENyaXRlcmlhLnVwZGF0ZU11bHRpRmFjZXRzKGV2ZW50SW5mb3JtYXRpb24uZGF0YS5maWx0ZXIpO1xyXG4gICAgICAgICAgICB0aGlzLnNlYXJjaCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGNsZWFyRmFjZXRzKGV2ZW50SW5mb3JtYXRpb246IElFdmVudEluZm9ybWF0aW9uKSB7XHJcbiAgICAgICAgICAgIHZhciBsYW5kaW5nUGFnZVVybDogc3RyaW5nID0gZXZlbnRJbmZvcm1hdGlvbi5kYXRhLmxhbmRpbmdQYWdlVXJsO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fc2VhcmNoQ3JpdGVyaWEuY2xlYXJGYWNldHMoKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChsYW5kaW5nUGFnZVVybCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fYmFzZVNlYXJjaFVybCA9IGxhbmRpbmdQYWdlVXJsO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNlYXJjaCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHJlbW92ZUZhY2V0KGV2ZW50SW5mb3JtYXRpb246IElFdmVudEluZm9ybWF0aW9uKSB7XHJcbiAgICAgICAgICAgIHZhciBmYWNldDogSUZhY2V0ID0gPElGYWNldD5ldmVudEluZm9ybWF0aW9uLmRhdGE7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9zZWFyY2hDcml0ZXJpYS5yZW1vdmVGYWNldChmYWNldCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoZmFjZXQuZmFjZXRMYW5kaW5nUGFnZVVybCAmJiBmYWNldC5mYWNldFR5cGUgPT09ICdTaW5nbGVTZWxlY3QnKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9iYXNlU2VhcmNoVXJsID0gZmFjZXQuZmFjZXRMYW5kaW5nUGFnZVVybDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5zZWFyY2goKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBhZGRTaW5nbGVTZWxlY3RDYXRlZ29yeShldmVudEluZm9ybWF0aW9uOiBJRXZlbnRJbmZvcm1hdGlvbikge1xyXG4gICAgICAgICAgICB2YXIgc2luZ2xlU2VsZWN0Q2F0ZWdvcnk6IElTaW5nbGVTZWxlY3RDYXRlZ29yeSA9IDxJU2luZ2xlU2VsZWN0Q2F0ZWdvcnk+ZXZlbnRJbmZvcm1hdGlvbi5kYXRhO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fYmFzZVNlYXJjaFVybCA9IHNpbmdsZVNlbGVjdENhdGVnb3J5LmNhdGVnb3J5VXJsO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zZWFyY2goKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgcmVnaXN0ZXJTdWJzY3JpcHRpb25zKCkge1xyXG4gICAgICAgICAgICB0aGlzLl9ldmVudEh1Yi5zdWJzY3JpYmUoJ3NvcnRpbmdDaGFuZ2VkJywgdGhpcy5zb3J0aW5nQ2hhbmdlZC5iaW5kKHRoaXMpKTtcclxuICAgICAgICAgICAgdGhpcy5fZXZlbnRIdWIuc3Vic2NyaWJlKCdzaW5nbGVGYWNldHNDaGFuZ2VkJywgdGhpcy5zaW5nbGVGYWNldHNDaGFuZ2VkLmJpbmQodGhpcykpO1xyXG4gICAgICAgICAgICB0aGlzLl9ldmVudEh1Yi5zdWJzY3JpYmUoJ211bHRpRmFjZXRDaGFuZ2VkJywgdGhpcy5tdWx0aUZhY2V0Q2hhbmdlZC5iaW5kKHRoaXMpKTtcclxuICAgICAgICAgICAgdGhpcy5fZXZlbnRIdWIuc3Vic2NyaWJlKCdmYWNldHNDbGVhcmVkJywgdGhpcy5jbGVhckZhY2V0cy5iaW5kKHRoaXMpKTtcclxuICAgICAgICAgICAgdGhpcy5fZXZlbnRIdWIuc3Vic2NyaWJlKCdmYWNldFJlbW92ZWQnLCB0aGlzLnJlbW92ZUZhY2V0LmJpbmQodGhpcykpO1xyXG4gICAgICAgICAgICB0aGlzLl9ldmVudEh1Yi5zdWJzY3JpYmUoJ3NpbmdsZUNhdGVnb3J5QWRkZWQnLCB0aGlzLmFkZFNpbmdsZVNlbGVjdENhdGVnb3J5LmJpbmQodGhpcykpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzZWFyY2goKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3dpbmRvdy5sb2NhdGlvbi5ocmVmID0gdGhpcy5fYmFzZVNlYXJjaFVybCArIHRoaXMuX3NlYXJjaENyaXRlcmlhLnRvUXVlcnlzdHJpbmcoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L0pxdWVyeVBsdWdpbnMvSVNlcmlhbGl6ZU9iamVjdEpxdWVyeVBsdWdpbi50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0NvbnRyb2xsZXIudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9JQ29udHJvbGxlckFjdGlvbkNvbnRleHQudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9JQ29udHJvbGxlckNvbnRleHQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0lDb250cm9sbGVyQWN0aW9uQ29udGV4dC50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvRXZlbnRzL0lFdmVudEh1Yi50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvU3lzdGVtL0lEaXNwb3NhYmxlLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIFNsaWRlclNlcnZpY2UgaW1wbGVtZW50cyBJRGlzcG9zYWJsZSB7XHJcbiAgICAgICAgcHJpdmF0ZSBzbGlkZXJJbnN0YW5jZTogbm9VaVNsaWRlci5ub1VpU2xpZGVyO1xyXG4gICAgICAgIHByaXZhdGUgZmFjZXRGaWVsZE5hbWU6IHN0cmluZztcclxuICAgICAgICBwcml2YXRlIG1heExhYmVsOiBzdHJpbmc7XHJcbiAgICAgICAgcHJpdmF0ZSBtYXhWYWx1ZTogc3RyaW5nO1xyXG4gICAgICAgIHByaXZhdGUgbWluVmFsdWU6IHN0cmluZztcclxuICAgICAgICBwcml2YXRlIHN0ZXA7XHJcbiAgICAgICAgcHJpdmF0ZSBhcHBseUJ1dHRvbkNvbnRleHQ6IEpRdWVyeTtcclxuXHJcbiAgICAgICAgY29uc3RydWN0b3IocHJpdmF0ZSBjb250ZXh0OiBKUXVlcnksIHByb3RlY3RlZCBldmVudEh1YjogSUV2ZW50SHViKSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGV4dCA9IGNvbnRleHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgaW5pdGlhbGl6ZShzZWxlY3RlZFZhbHVlcykge1xyXG4gICAgICAgICAgICB0aGlzLmFwcGx5QnV0dG9uQ29udGV4dCA9IHRoaXMuY29udGV4dC5maW5kKCc6c3VibWl0Jyk7XHJcbiAgICAgICAgICAgIHRoaXMubWFwRGF0YSh0aGlzLmNvbnRleHQuZGF0YSgpKTtcclxuICAgICAgICAgICAgdGhpcy5pbml0aWFsaXplU2xpZGVyKHNlbGVjdGVkVmFsdWVzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBkaXNwb3NlKCkge1xyXG4gICAgICAgICAgICB0aGlzLnNsaWRlckluc3RhbmNlLmRlc3Ryb3koKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBtYXBEYXRhKGNvbnRhaW5lckRhdGEpIHtcclxuICAgICAgICAgICAgdGhpcy5zdGVwID0gY29udGFpbmVyRGF0YS5zdGVwIHx8IDE7XHJcbiAgICAgICAgICAgIHRoaXMubWF4TGFiZWwgPSBjb250YWluZXJEYXRhLm1heExhYmVsO1xyXG4gICAgICAgICAgICB0aGlzLm1heFZhbHVlID0gY29udGFpbmVyRGF0YS5tYXg7XHJcbiAgICAgICAgICAgIHRoaXMubWluVmFsdWUgPSBjb250YWluZXJEYXRhLm1pbjtcclxuICAgICAgICAgICAgdGhpcy5mYWNldEZpZWxkTmFtZSA9IGNvbnRhaW5lckRhdGEuZmFjZXRmaWVsZG5hbWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZGlydGllZCgpIHtcclxuICAgICAgICAgICAgdGhpcy5hcHBseUJ1dHRvbkNvbnRleHQucHJvcCgnZGlzYWJsZWQnLCBmYWxzZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBGb3JtYXR0aW5nIGZvciB0aGUgZm9ybWF0dGVkIHZhbHVlcyBvZiB0aGUgc2xpZGVyLiBXaGVuIGdldHRpbmcuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHVibGljIGZvcm1hdEZyb20odmFsdWUpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMubWF4TGFiZWwgJiYgdmFsdWUgPT09IHRoaXMubWF4TGFiZWwpIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gdGhpcy5tYXhWYWx1ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogRm9ybWF0dGluZyBmb3IgdGhlIGZvcm1hdHRlZCB2YWx1ZXMgb2YgdGhlIHNsaWRlci4gV2hlbiBzZXR0aW5nLlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHB1YmxpYyBmb3JtYXRUbyh2YWx1ZSkge1xyXG4gICAgICAgICAgICB2YWx1ZSA9IHBhcnNlSW50KHZhbHVlLCAxMCkgfHwgMDtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLm1heExhYmVsICYmIHZhbHVlID09PSB0aGlzLm1heFZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZSA9IHRoaXMubWF4TGFiZWw7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgaW5pdGlhbGl6ZVNsaWRlcihmYWNldERhdGEpIHtcclxuICAgICAgICAgICAgdmFyIHNsaWRlckVsZW1lbnQgPSB0aGlzLmNvbnRleHQuZmluZCgnLnJhbmdlJykuZ2V0KDApO1xyXG4gICAgICAgICAgICB2YXIgZGVmYXVsdFJhbmdlID0gW3RoaXMubWluVmFsdWUsIHRoaXMubWF4VmFsdWVdO1xyXG4gICAgICAgICAgICB2YXIgc3RhcnRSYW5nZSA9IGRlZmF1bHRSYW5nZTtcclxuICAgICAgICAgICAgdmFyIHNlbGVjdGVkUmFuZ2U7XHJcbiAgICAgICAgICAgIHZhciBsb3dlclJhbmdlQ29udGV4dDogSlF1ZXJ5ICA9IHRoaXMuY29udGV4dC5maW5kKCcuanMtbG93ZXJWYWx1ZScpO1xyXG4gICAgICAgICAgICB2YXIgdXBwZXJSYW5nZUNvbnRleHQ6IEpRdWVyeSA9IHRoaXMuY29udGV4dC5maW5kKCcuanMtaGlnaGVyVmFsdWUnKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFRPRE8gaGFuZGxlIGFycmF5IG9yIG5vdCBhcnJheVxyXG4gICAgICAgICAgICBpZiAoZmFjZXREYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxlY3RlZFJhbmdlID0gZmFjZXREYXRhLnNwbGl0KCd8Jyk7XHJcbiAgICAgICAgICAgICAgICBzdGFydFJhbmdlID0gZGVmYXVsdFJhbmdlLm1hcCgodmFsdWUsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbGVjdGVkUmFuZ2VbaW5kZXhdID8gc2VsZWN0ZWRSYW5nZVtpbmRleF0gOiBkZWZhdWx0UmFuZ2VbaW5kZXhdO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2xpZGVySW5zdGFuY2UgPSB0aGlzLmNyZWF0ZVNsaWRlcihzdGFydFJhbmdlLCBzbGlkZXJFbGVtZW50KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2xpZGVySW5zdGFuY2Uub24oJ3NldCcsICh2YWx1ZXMsIGhhbmRsZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXJ0aWVkKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zbGlkZXJJbnN0YW5jZS5vbigndXBkYXRlJywgKHZhbHVlczogQXJyYXk8c3RyaW5nPiwgaGFuZGxlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBsb3dlclJhbmdlQ29udGV4dC52YWwodmFsdWVzWzBdKTtcclxuICAgICAgICAgICAgICAgIHVwcGVyUmFuZ2VDb250ZXh0LnZhbCh2YWx1ZXNbMV0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGxvd2VyUmFuZ2VDb250ZXh0Lm9uKCdrZXl1cCcsIGV2ZW50ID0+IHRoaXMuZGlydGllZCgpKTtcclxuICAgICAgICAgICAgdXBwZXJSYW5nZUNvbnRleHQub24oJ2tleXVwJywgZXZlbnQgPT4gdGhpcy5kaXJ0aWVkKCkpO1xyXG4gICAgICAgICAgICBsb3dlclJhbmdlQ29udGV4dC5vbignYmx1cicsIGV2ZW50ID0+IHRoaXMuc2xpZGVySW5zdGFuY2Uuc2V0KFskKGV2ZW50LnRhcmdldCkudmFsKCksIG51bGxdKSk7XHJcbiAgICAgICAgICAgIHVwcGVyUmFuZ2VDb250ZXh0Lm9uKCdibHVyJywgZXZlbnQgPT4gdGhpcy5zbGlkZXJJbnN0YW5jZS5zZXQoW251bGwsICQoZXZlbnQudGFyZ2V0KS52YWwoKV0pKTtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGNyZWF0ZVNsaWRlcihzdGFydFJhbmdlLCBzbGlkZXJFbGVtZW50KTogbm9VaVNsaWRlci5ub1VpU2xpZGVyIHtcclxuICAgICAgICAgICBub1VpU2xpZGVyLmNyZWF0ZShzbGlkZXJFbGVtZW50LCB7XHJcbiAgICAgICAgICAgICAgICBzdGFydDogc3RhcnRSYW5nZSxcclxuICAgICAgICAgICAgICAgIGNvbm5lY3Q6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBtYXJnaW46IHRoaXMuc3RlcCxcclxuICAgICAgICAgICAgICAgIHN0ZXA6IHRoaXMuc3RlcCxcclxuICAgICAgICAgICAgICAgIHJhbmdlOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ21pbic6IHRoaXMubWluVmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgJ21heCc6IHRoaXMubWF4VmFsdWVcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBmb3JtYXQ6IHtcclxuICAgICAgICAgICAgICAgICAgICB0bzogdmFsdWUgPT4gdGhpcy5mb3JtYXRUbyh2YWx1ZSksXHJcbiAgICAgICAgICAgICAgICAgICAgZnJvbTogdmFsdWUgPT4gdGhpcy5mb3JtYXRGcm9tKHZhbHVlKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiAoPG5vVWlTbGlkZXIuSW5zdGFuY2U+c2xpZGVyRWxlbWVudCkubm9VaVNsaWRlcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBnZXRLZXkoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmZhY2V0RmllbGROYW1lO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGdldFZhbHVlcygpIHtcclxuICAgICAgICAgICAgdmFyIHZhbHVlcyA9IDxhbnlbXT50aGlzLnNsaWRlckluc3RhbmNlLmdldCgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHZhbHVlc1sxXSA9PT0gdGhpcy5tYXhMYWJlbCkge1xyXG4gICAgICAgICAgICAgICAgdmFsdWVzWzFdID0gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdmFsdWVzO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBVcmxIZWxwZXIge1xyXG5cclxuICAgICAgICBwdWJsaWMgc3RhdGljIHJlc29sdmVQYWdlVHlwZSgpIHtcclxuICAgICAgICAgICBpZiAod2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZigna2V5d29yZHMnKSAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnc2VhcmNoJztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnYnJvd3NlJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvSnF1ZXJ5UGx1Z2lucy9JU2VyaWFsaXplT2JqZWN0SnF1ZXJ5UGx1Z2luLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvQ29udHJvbGxlci50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0lDb250cm9sbGVyQWN0aW9uQ29udGV4dC50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0lDb250cm9sbGVyQ29udGV4dC50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi9TZXJ2aWNlcy9TZWFyY2hTZXJ2aWNlLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuL1NlcnZpY2VzL0lTZWFyY2hTZXJ2aWNlLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuL1NlcnZpY2VzL1NsaWRlclNlcnZpY2UudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0lDb250cm9sbGVyQWN0aW9uQ29udGV4dC50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi9VcmxIZWxwZXIudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBpbnRlcmZhY2UgU2VyaWFsaXplT2JqZWN0IGV4dGVuZHMgSlF1ZXJ5IHtcclxuICAgICAgICBzZXJpYWxpemVPYmplY3QoKTogYW55O1xyXG4gICAgfVxyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBGYWNldFNlYXJjaENvbnRyb2xsZXIgZXh0ZW5kcyBPcmNrZXN0cmEuQ29tcG9zZXIuQ29udHJvbGxlciB7XHJcbiAgICAgICAgcHJpdmF0ZSBfZGVib3VuY2VIYW5kbGU7IC8vIG5lZWQgdG8gc2VlIGhvdyB0byBmaXggdGhlIGFueSBmb3IgdGhpcy5cclxuICAgICAgICBwcml2YXRlIF9kZWJvdW5jZVRpbWVvdXQ6IG51bWJlciA9IDUwMDtcclxuICAgICAgICBwcml2YXRlIF9zZWFyY2hTZXJ2aWNlOiBJU2VhcmNoU2VydmljZTsgLy8gVE9ETzogREkgdGhpcywgY29uc3RydWN0b3IgaW5qZWN0aW9uIHZpYSBjb250cm9sbGVyIGZhY3Rvcnk/XHJcbiAgICAgICAgcHJpdmF0ZSBzbGlkZXJTZXJ2aWNlOiBTbGlkZXJTZXJ2aWNlOyAvLyBUT0RPOiBESSB0aGlzLCBjb25zdHJ1Y3RvciBpbmplY3Rpb24gdmlhIGNvbnRyb2xsZXIgZmFjdG9yeT9cclxuICAgICAgICBwcml2YXRlIHNsaWRlclNlcnZpY2VzSW5zdGFuY2VzOiBJSGFzaFRhYmxlPFNsaWRlclNlcnZpY2U+ID0ge307XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKCkge1xyXG4gICAgICAgICAgICBzdXBlci5pbml0aWFsaXplKCk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZVNlcnZpY2VzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgbXVsdGlGYWNldENoYW5nZWQoYWN0aW9uQ29udGV4dDogSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0KSB7XHJcbiAgICAgICAgICAgIGlmICghXy5pc0VtcHR5KHRoaXMuX2RlYm91bmNlSGFuZGxlKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZGVib3VuY2VIYW5kbGUuY2FuY2VsKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBhbmNob3JDb250ZXh0ID0gYWN0aW9uQ29udGV4dC5lbGVtZW50Q29udGV4dCxcclxuICAgICAgICAgICAgICAgIGZhY2V0RmllbGROYW1lID0gYW5jaG9yQ29udGV4dC5hdHRyKCduYW1lJyksXHJcbiAgICAgICAgICAgICAgICBmYWNldFZhbHVlID0gYW5jaG9yQ29udGV4dC5hdHRyKCd2YWx1ZScpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fZGVib3VuY2VIYW5kbGUgPSBfLmRlYm91bmNlKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaCgnbXVsdGlGYWNldENoYW5nZWQnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmYWNldEtleTogZmFjZXRGaWVsZE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhY2V0VmFsdWU6IGZhY2V0VmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VUeXBlOiBVcmxIZWxwZXIucmVzb2x2ZVBhZ2VUeXBlKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbHRlcjogKDxJU2VyaWFsaXplT2JqZWN0SnF1ZXJ5UGx1Z2luPiQoJ2Zvcm1bbmFtZT1cInNlYXJjaEZhY2V0c1wiXScsIHRoaXMuY29udGV4dC5jb250YWluZXIpKS5zZXJpYWxpemVPYmplY3QoKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9LCAyNTApO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fZGVib3VuY2VIYW5kbGUoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBkaXNwb3NlKCkge1xyXG4gICAgICAgICAgICBzdXBlci5kaXNwb3NlKCk7XHJcbiAgICAgICAgICAgIE9iamVjdC5rZXlzKHRoaXMuc2xpZGVyU2VydmljZXNJbnN0YW5jZXMpLmZvckVhY2goc2xpZGVyU2VydmljZUtleSA9PiB0aGlzLnNsaWRlclNlcnZpY2VzSW5zdGFuY2VzW3NsaWRlclNlcnZpY2VLZXldLmRpc3Bvc2UoKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc2luZ2xlRmFjZXRDaGFuZ2VkKGFjdGlvbkNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCkge1xyXG4gICAgICAgICAgICB2YXIgYW5jaG9yQ29udGV4dCA9IGFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHQsXHJcbiAgICAgICAgICAgICAgICBmYWNldEZpZWxkTmFtZSA9IGFuY2hvckNvbnRleHQuZGF0YSgnZmFjZXRmaWVsZG5hbWUnKSxcclxuICAgICAgICAgICAgICAgIGZhY2V0VmFsdWUgPSBhbmNob3JDb250ZXh0LmRhdGEoJ2ZhY2V0dmFsdWUnKSxcclxuICAgICAgICAgICAgICAgIGZhY2V0cyA9IHt9O1xyXG5cclxuICAgICAgICAgICAgYWN0aW9uQ29udGV4dC5ldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICBhY3Rpb25Db250ZXh0LmV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKCdzaW5nbGVGYWNldHNDaGFuZ2VkJywge1xyXG4gICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgIGZhY2V0S2V5OiBmYWNldEZpZWxkTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBmYWNldFZhbHVlOiBmYWNldFZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgIHBhZ2VUeXBlOiBVcmxIZWxwZXIucmVzb2x2ZVBhZ2VUeXBlKClcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgdG9nZ2xlRmFjZXRMaXN0KGFjdGlvbkNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCkge1xyXG4gICAgICAgICAgICBhY3Rpb25Db250ZXh0LmV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgYnV0dG9uQ29udGV4dCA9IGFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHQsXHJcbiAgICAgICAgICAgICAgICBsYWJlbDogc3RyaW5nID0gYnV0dG9uQ29udGV4dC5odG1sKCksXHJcbiAgICAgICAgICAgICAgICBzaG93TW9yZUxhYmVsOiBzdHJpbmcgPSBidXR0b25Db250ZXh0LmRhdGEoJ2xhYmVsLXNob3dtb3JlJyksXHJcbiAgICAgICAgICAgICAgICBzaG93TGVzc0xhYmVsOiBzdHJpbmcgPSBidXR0b25Db250ZXh0LmRhdGEoJ2xhYmVsLXNob3dsZXNzJyk7XHJcblxyXG4gICAgICAgICAgICBidXR0b25Db250ZXh0Lmh0bWwobGFiZWwgPT09IHNob3dNb3JlTGFiZWwgPyBzaG93TGVzc0xhYmVsIDogc2hvd01vcmVMYWJlbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgcmVmaW5lQnlSYW5nZShhY3Rpb25Db250ZXh0OiBJQ29udHJvbGxlckFjdGlvbkNvbnRleHQpIHtcclxuICAgICAgICAgICAgYWN0aW9uQ29udGV4dC5ldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB2YXIgY29udGFpbmVyID0gYWN0aW9uQ29udGV4dC5lbGVtZW50Q29udGV4dC5jbG9zZXN0KCdbZGF0YS1mYWNldGZpZWxkbmFtZV0nKTtcclxuICAgICAgICAgICAgdmFyIHNsaWRlclNlcnZpY2VJbnN0YW5jZSA9IHRoaXMuc2xpZGVyU2VydmljZXNJbnN0YW5jZXNbY29udGFpbmVyLmRhdGEoJ2ZhY2V0ZmllbGRuYW1lJyldO1xyXG5cclxuICAgICAgICAgICAgdmFyIHZhbHVlcyA9IHNsaWRlclNlcnZpY2VJbnN0YW5jZS5nZXRWYWx1ZXMoKTtcclxuICAgICAgICAgICAgdmFyIGtleSA9IHNsaWRlclNlcnZpY2VJbnN0YW5jZS5nZXRLZXkoKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaCgnc2luZ2xlRmFjZXRzQ2hhbmdlZCcsIHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICBmYWNldEtleToga2V5LFxyXG4gICAgICAgICAgICAgICAgICAgIGZhY2V0VmFsdWU6IHZhbHVlcy5qb2luKCd8JylcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGluaXRpYWxpemVTZXJ2aWNlcygpIHtcclxuICAgICAgICAgICAgdmFyIHNlbGVjdGVkRmFjZXRzOiBJSGFzaFRhYmxlPHN0cmluZ3xzdHJpbmdbXT47XHJcbiAgICAgICAgICAgIHZhciBjb3JyZWN0ZWRTZWFyY2hUZXJtOiBzdHJpbmcgPSB0aGlzLmNvbnRleHQuY29udGFpbmVyLmF0dHIoJ2RhdGEtY29ycmVjdGVkLXNlYXJjaC10ZXJtJyk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9zZWFyY2hTZXJ2aWNlID0gbmV3IFNlYXJjaFNlcnZpY2UodGhpcy5ldmVudEh1Yiwgd2luZG93KTtcclxuICAgICAgICAgICAgdGhpcy5fc2VhcmNoU2VydmljZS5pbml0aWFsaXplKHtcclxuICAgICAgICAgICAgICAgIGZhY2V0UmVnaXN0cnk6IHRoaXMuYnVpbGRGYWNldFJlZ2lzdHJ5KCksXHJcbiAgICAgICAgICAgICAgICBjb3JyZWN0ZWRTZWFyY2hUZXJtOiBjb3JyZWN0ZWRTZWFyY2hUZXJtXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBzZWxlY3RlZEZhY2V0cyA9IHRoaXMuX3NlYXJjaFNlcnZpY2UuZ2V0U2VsZWN0ZWRGYWNldHMoKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY29udGV4dC5jb250YWluZXIuZmluZCgnW2RhdGEtZmFjZXR0eXBlPVwiUmFuZ2VcIl0nKS5lYWNoKChpbmRleCwgZWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdmFyIGZhY2V0RmllbGROYW1lID0gJChlbGVtZW50KS5kYXRhKCdmYWNldGZpZWxkbmFtZScpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHNlcnZpY2VJbnN0YW5jZSA9IG5ldyBTbGlkZXJTZXJ2aWNlKCQoZWxlbWVudCksIHRoaXMuZXZlbnRIdWIpO1xyXG5cclxuICAgICAgICAgICAgICAgIHNlcnZpY2VJbnN0YW5jZS5pbml0aWFsaXplKHNlbGVjdGVkRmFjZXRzW2ZhY2V0RmllbGROYW1lXSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNsaWRlclNlcnZpY2VzSW5zdGFuY2VzW2ZhY2V0RmllbGROYW1lXSA9IHNlcnZpY2VJbnN0YW5jZTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGJ1aWxkRmFjZXRSZWdpc3RyeSgpOiBJSGFzaFRhYmxlPHN0cmluZz4ge1xyXG4gICAgICAgICAgICB2YXIgZmFjZXRSZWdpc3RyeTogSUhhc2hUYWJsZTxzdHJpbmc+ID0ge307XHJcblxyXG4gICAgICAgICAgICAkKCdbZGF0YS1mYWNldHR5cGVdJywgdGhpcy5jb250ZXh0LmNvbnRhaW5lcilcclxuICAgICAgICAgICAgICAgIC5hZGQoJCgnI3NlbGVjdGVkRmFjZXRzIFtkYXRhLWZhY2V0ZmllbGRuYW1lXScsIHRoaXMuY29udGV4dC5jb250YWluZXIpKVxyXG4gICAgICAgICAgICAgICAgLmVhY2goKGluZGV4OiBudW1iZXIsIGl0ZW06IEhUTUxFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGZhY2V0VHlwZTogc3RyaW5nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmYWNldEZpZWxkTmFtZTogc3RyaW5nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmYWNldEdyb3VwOiBKUXVlcnkgPSAkKGl0ZW0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBmYWNldEZpZWxkTmFtZSA9IGZhY2V0R3JvdXAuZGF0YSgnZmFjZXRmaWVsZG5hbWUnKTtcclxuICAgICAgICAgICAgICAgICAgICBmYWNldFR5cGUgPSAoPHN0cmluZz5mYWNldEdyb3VwLmRhdGEoJ2ZhY2V0dHlwZScpKS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZhY2V0UmVnaXN0cnlbZmFjZXRGaWVsZE5hbWVdID0gZmFjZXRUeXBlO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmFjZXRSZWdpc3RyeTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJUXVpY2tWaWV3Q29udHJvbGxlciB7XHJcbiAgICAgICAgc2VsZWN0SW1hZ2UoYWN0aW9uQ29udGV4dDogSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0KTogdm9pZDtcclxuICAgICAgICBhZGRMaW5lSXRlbShhY3Rpb25Db250ZXh0OiBJQ29udHJvbGxlckFjdGlvbkNvbnRleHQpOiB2b2lkO1xyXG4gICAgICAgIHNlbGVjdEt2YShhY3Rpb25Db250ZXh0OiBJQ29udHJvbGxlckFjdGlvbkNvbnRleHQpOiB2b2lkO1xyXG4gICAgfVxyXG59XHJcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9KcXVlcnlQbHVnaW5zL0lTZXJpYWxpemVPYmplY3RKcXVlcnlQbHVnaW4udHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9Db250cm9sbGVyLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0LnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvSUNvbnRyb2xsZXJDb250ZXh0LnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuL1NlcnZpY2VzL1NlYXJjaFNlcnZpY2UudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4vU2VydmljZXMvSVNlYXJjaFNlcnZpY2UudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0lDb250cm9sbGVyQWN0aW9uQ29udGV4dC50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGludGVyZmFjZSBTZXJpYWxpemVPYmplY3QgZXh0ZW5kcyBKUXVlcnkge1xyXG4gICAgICAgIHNlcmlhbGl6ZU9iamVjdCgpOiBhbnk7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIFByb2R1Y3RTZWFyY2hDb250cm9sbGVyIGV4dGVuZHMgT3Jja2VzdHJhLkNvbXBvc2VyLkNvbnRyb2xsZXIge1xyXG4gICAgICAgIHByaXZhdGUgX2RlYm91bmNlSGFuZGxlOyAvLyBuZWVkIHRvIHNlZSBob3cgdG8gZml4IHRoZSBhbnkgZm9yIHRoaXMuXHJcbiAgICAgICAgcHJpdmF0ZSBfZGVib3VuY2VUaW1lb3V0OiBudW1iZXIgPSA1MDA7XHJcbiAgICAgICAgcHJpdmF0ZSBfc2VhcmNoU2VydmljZTogSVNlYXJjaFNlcnZpY2U7IC8vIFRPRE86IERJIHRoaXMsIGNvbnN0cnVjdG9yIGluamVjdGlvbiB2aWEgY29udHJvbGxlciBmYWN0b3J5P1xyXG5cclxuICAgICAgICBwdWJsaWMgaW5pdGlhbGl6ZSgpIHtcclxuICAgICAgICAgICAgc3VwZXIuaW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLmluaXRpYWxpemVTZWFyY2hTZXJ2aWNlKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgbXVsdGlGYWNldENoYW5nZWQoYWN0aW9uQ29udGV4dDogSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0KSB7XHJcbiAgICAgICAgICAgIGlmICghXy5pc0VtcHR5KHRoaXMuX2RlYm91bmNlSGFuZGxlKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZGVib3VuY2VIYW5kbGUuY2FuY2VsKCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBhbmNob3JDb250ZXh0ID0gYWN0aW9uQ29udGV4dC5lbGVtZW50Q29udGV4dCxcclxuICAgICAgICAgICAgICAgIGZhY2V0RmllbGROYW1lID0gYW5jaG9yQ29udGV4dC5hdHRyKCduYW1lJyksXHJcbiAgICAgICAgICAgICAgICBmYWNldFZhbHVlID0gYW5jaG9yQ29udGV4dC5hdHRyKCd2YWx1ZScpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fZGVib3VuY2VIYW5kbGUgPSBfLmRlYm91bmNlKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaCgnbXVsdGlGYWNldENoYW5nZWQnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmYWNldEtleTogZmFjZXRGaWVsZE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhY2V0VmFsdWU6IGZhY2V0VmFsdWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZ2VUeXBlOiAnYnJvd3NlJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsdGVyOiAoPElTZXJpYWxpemVPYmplY3RKcXVlcnlQbHVnaW4+JCgnZm9ybVtuYW1lPVwic2VhcmNoRmFjZXRzXCJdJywgdGhpcy5jb250ZXh0LmNvbnRhaW5lcikpLnNlcmlhbGl6ZU9iamVjdCgpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sIDI1MCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9kZWJvdW5jZUhhbmRsZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHNpbmdsZUZhY2V0Q2hhbmdlZChhY3Rpb25Db250ZXh0OiBJQ29udHJvbGxlckFjdGlvbkNvbnRleHQpIHtcclxuICAgICAgICAgICAgdmFyIGFuY2hvckNvbnRleHQgPSBhY3Rpb25Db250ZXh0LmVsZW1lbnRDb250ZXh0LFxyXG4gICAgICAgICAgICAgICAgZmFjZXRGaWVsZE5hbWUgPSBhbmNob3JDb250ZXh0LmRhdGEoJ2ZhY2V0ZmllbGRuYW1lJyksXHJcbiAgICAgICAgICAgICAgICBmYWNldFZhbHVlID0gYW5jaG9yQ29udGV4dC5kYXRhKCdmYWNldHZhbHVlJyksXHJcbiAgICAgICAgICAgICAgICBmYWNldHMgPSB7fTtcclxuXHJcbiAgICAgICAgICAgIGFjdGlvbkNvbnRleHQuZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgYWN0aW9uQ29udGV4dC5ldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaCgnc2luZ2xlRmFjZXRzQ2hhbmdlZCcsIHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICBmYWNldEtleTogZmFjZXRGaWVsZE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZmFjZXRWYWx1ZTogZmFjZXRWYWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICBwYWdlVHlwZTogJ2Jyb3dzZSdcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgcmVtb3ZlU2VsZWN0ZWRGYWNldChhY3Rpb25Db250ZXh0OiBJQ29udHJvbGxlckFjdGlvbkNvbnRleHQpIHtcclxuICAgICAgICAgICAgdmFyIHJlbW92ZUZhY2V0QnV0dG9uID0gYWN0aW9uQ29udGV4dC5lbGVtZW50Q29udGV4dDtcclxuXHJcbiAgICAgICAgICAgIGFjdGlvbkNvbnRleHQuZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgYWN0aW9uQ29udGV4dC5ldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaCgnZmFjZXRSZW1vdmVkJywge1xyXG4gICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgIGZhY2V0RmllbGROYW1lOiByZW1vdmVGYWNldEJ1dHRvbi5kYXRhKCdmYWNldGZpZWxkbmFtZScpLFxyXG4gICAgICAgICAgICAgICAgICAgIGZhY2V0VmFsdWU6IHJlbW92ZUZhY2V0QnV0dG9uLmRhdGEoJ2ZhY2V0dmFsdWUnKSxcclxuICAgICAgICAgICAgICAgICAgICBmYWNldFR5cGU6IHJlbW92ZUZhY2V0QnV0dG9uLmRhdGEoJ2ZhY2V0dHlwZScpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGNsZWFyU2VsZWN0ZWRGYWNldHMoYWN0aW9uQ29udGV4dDogSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0KSB7XHJcbiAgICAgICAgICAgIGFjdGlvbkNvbnRleHQuZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgYWN0aW9uQ29udGV4dC5ldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaCgnZmFjZXRzQ2xlYXJlZCcsIG51bGwpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBpbml0aWFsaXplU2VhcmNoU2VydmljZSgpIHtcclxuICAgICAgICAgICAgdGhpcy5fc2VhcmNoU2VydmljZSA9IG5ldyBTZWFyY2hTZXJ2aWNlKHRoaXMuZXZlbnRIdWIsIHdpbmRvdyk7XHJcbiAgICAgICAgICAgIHRoaXMuX3NlYXJjaFNlcnZpY2UuaW5pdGlhbGl6ZSh7XHJcbiAgICAgICAgICAgICAgICBmYWNldFJlZ2lzdHJ5OiB0aGlzLmJ1aWxkRmFjZXRSZWdpc3RyeSgpXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBidWlsZEZhY2V0UmVnaXN0cnkoKTogSUhhc2hUYWJsZTxzdHJpbmc+IHtcclxuICAgICAgICAgICAgdmFyIGZhY2V0UmVnaXN0cnk6IElIYXNoVGFibGU8c3RyaW5nPiA9IHt9O1xyXG5cclxuICAgICAgICAgICAgJCgnW2RhdGEtZmFjZXR0eXBlXScsIHRoaXMuY29udGV4dC5jb250YWluZXIpXHJcbiAgICAgICAgICAgICAgICAuYWRkKCQoJyNzZWxlY3RlZEZhY2V0cyBbZGF0YS1mYWNldGZpZWxkbmFtZV0nLCB0aGlzLmNvbnRleHQuY29udGFpbmVyKSlcclxuICAgICAgICAgICAgICAgIC5lYWNoKChpbmRleDogbnVtYmVyLCBpdGVtOiBIVE1MRWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBmYWNldFR5cGU6IHN0cmluZyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmFjZXRGaWVsZE5hbWU6IHN0cmluZyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmFjZXRHcm91cDogSlF1ZXJ5ID0gJChpdGVtKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgZmFjZXRGaWVsZE5hbWUgPSBmYWNldEdyb3VwLmRhdGEoJ2ZhY2V0ZmllbGRuYW1lJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZmFjZXRUeXBlID0gKDxzdHJpbmc+ZmFjZXRHcm91cC5kYXRhKCdmYWNldHR5cGUnKSkudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICBmYWNldFJlZ2lzdHJ5W2ZhY2V0RmllbGROYW1lXSA9IGZhY2V0VHlwZTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGZhY2V0UmVnaXN0cnk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlByb2R1Y3QuVUkvUHJvZHVjdC9Tb3VyY2UvVHlwZVNjcmlwdC9Qcm9kdWN0Q29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPSdJUXVpY2tWaWV3Q29udHJvbGxlci50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBRdWlja1ZpZXdDb250cm9sbGVyICBleHRlbmRzIE9yY2tlc3RyYS5Db21wb3Nlci5Qcm9kdWN0Q29udHJvbGxlciBpbXBsZW1lbnRzIE9yY2tlc3RyYS5Db21wb3Nlci5JUXVpY2tWaWV3Q29udHJvbGxlciB7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBjb25jZXJuOiBzdHJpbmcgPSAncHJvZHVjdFNlYXJjaCc7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKCkge1xyXG4gICAgICAgICAgICB0aGlzLnNldENvbmNlcm5XaXRoQ29udGV4dCgpO1xyXG4gICAgICAgICAgICBzdXBlci5pbml0aWFsaXplKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgc2V0Q29uY2VybldpdGhDb250ZXh0KCk6IHZvaWQge1xyXG4gICAgICAgICAgICB2YXIgY29udGV4dHVhbENvbmNlcm46IHN0cmluZyA9IHRoaXMuY29udGV4dC5jb250YWluZXIuY2xvc2VzdCgnW2RhdGEtY29uY2Vybl0nKS5kYXRhKCdjb25jZXJuJyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoY29udGV4dHVhbENvbmNlcm4pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29uY2VybiA9IGNvbnRleHR1YWxDb25jZXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgcmVnaXN0ZXJTdWJzY3JpcHRpb25zKCkge1xyXG5cclxuICAgICAgICAgICAgc3VwZXIucmVnaXN0ZXJTdWJzY3JpcHRpb25zKCk7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIuc3Vic2NyaWJlKHRoaXMuY29uY2VybiArICdRdWlja0J1eUxvYWRlZCcsIGUgPT4gdGhpcy5vblF1aWNrQnV5TG9hZGVkKGUpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvblF1aWNrQnV5TG9hZGVkKGU6IElFdmVudEluZm9ybWF0aW9uKSB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnJlbmRlcignUHJvZHVjdFF1aWNrVmlldycsIGUuZGF0YSk7XHJcbiAgICAgICAgICAgIHRoaXMucHJvZHVjdFNlcnZpY2Uuc2hvd1F1aWNrVmlldygpO1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRleHQudmlld01vZGVsID0gSlNPTi5wYXJzZShlLmRhdGFbJ0pzb25Db250ZXh0J10gfHwgJ3t9Jyk7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGV4dC52aWV3TW9kZWwuc291cmNlID0gZS5zb3VyY2U7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNldFZhcmlhbnRJZCh0aGlzLmNvbnRleHQudmlld01vZGVsLmRpc3BsYXllZFZhcmlhbnRJZCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgcHJpY2VEaXNwbGF5QnVzeTogVUlCdXN5SGFuZGxlID0gdGhpcy5hc3luY0J1c3koe1xyXG4gICAgICAgICAgICAgICAgbXNEZWxheTogMzAwLFxyXG4gICAgICAgICAgICAgICAgbG9hZGluZ0luZGljYXRvclNlbGVjdG9yOiAnLmxvYWRpbmctaW5kaWNhdG9yLXByaWNlZGlzY291bnQnXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdmFyIGFkZFRvQ2FydEJ1c3k6IFVJQnVzeUhhbmRsZSA9IHRoaXMuYXN5bmNCdXN5KHtcclxuICAgICAgICAgICAgICAgIG1zRGVsYXk6IDMwMCxcclxuICAgICAgICAgICAgICAgIGxvYWRpbmdJbmRpY2F0b3JTZWxlY3RvcjogJy5sb2FkaW5nLWluZGljYXRvci1pbnZlbnRvcnknXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdmFyIHByb21pc2U6IFEuUHJvbWlzZTxhbnk+ID0gUS5hbGwoW3RoaXMuY2FsY3VsYXRlUHJpY2UoKSwgdGhpcy5yZW5kZXJEYXRhKCldKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIEVycm9ySGFuZGxlci5pbnN0YW5jZSgpLnJlbW92ZUVycm9ycygpO1xyXG4gICAgICAgICAgICAgICAgfSwgKHJlYXNvbjogYW55KSA9PiB0aGlzLm9uTG9hZGluZ0ZhaWxlZChyZWFzb24pKVxyXG4gICAgICAgICAgICAgICAgLmZpbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJpY2VEaXNwbGF5QnVzeS5kb25lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYWRkVG9DYXJ0QnVzeS5kb25lKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvbkxvYWRpbmdGYWlsZWQocmVhc29uOiBhbnkpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIGxvYWRpbmcgdGhlIFByb2R1Y3QgUXVpY2sgVmlldycpO1xyXG5cclxuICAgICAgICAgICAgRXJyb3JIYW5kbGVyLmluc3RhbmNlKCkub3V0cHV0RXJyb3JGcm9tQ29kZSgnUXVpY2tWaWV3TG9hZEZhaWxlZCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzZXRWYXJpYW50SWQodmFyaWFudElkOiBzdHJpbmcpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciB2YXJpYW50ID0gKHRoaXMucHJvZHVjdFNlcnZpY2UuZ2V0VmFyaWFudCh2YXJpYW50SWQpIHx8IHt9KTtcclxuICAgICAgICAgICAgdGhpcy5wcm9kdWN0U2VydmljZS51cGRhdGVTZWxlY3RlZEt2YXNXaXRoKHZhcmlhbnQuS3ZhcywgdGhpcy5jb25jZXJuKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvblNlbGVjdGVkVmFyaWFudElkQ2hhbmdlZChlOiBJRXZlbnRJbmZvcm1hdGlvbikge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJEYXRhKClcclxuICAgICAgICAgICAgICAgIC50aGVuKCgpID0+IHRoaXMub25TZWxlY3RlZFZhcmlhbnRJZENoYW5nZWRTdWNjZXNzKCksXHJcbiAgICAgICAgICAgICAgICAgICAgKHJlYXNvbjogYW55KSA9PiB0aGlzLm9uU2VsZWN0ZWRWYXJpYW50SWRDaGFuZ2VkRmFpbGVkKHJlYXNvbikpXHJcbiAgICAgICAgICAgICAgICAuZG9uZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uU2VsZWN0ZWRWYXJpYW50SWRDaGFuZ2VkU3VjY2VzcygpOiB2b2lkIHtcclxuICAgICAgICAgICAgRXJyb3JIYW5kbGVyLmluc3RhbmNlKCkucmVtb3ZlRXJyb3JzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb25TZWxlY3RlZFZhcmlhbnRJZENoYW5nZWRGYWlsZWQocmVhc29uOiBhbnkpOiB2b2lkIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3Igd2hpbGUgY2hhbmdpbmcgdGhlIHNlbGVjdGVkIHZhcmlhbnQuJywgcmVhc29uKTtcclxuICAgICAgICAgICAgdGhpcy5yZW5kZXJVbmF2YWlsYWJsZUFkZFRvQ2FydCgpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlclVuYXZhaWxhYmxlUXVhbnRpdHkodGhpcy5nZXRDdXJyZW50UXVhbnRpdHkoKSk7XHJcblxyXG4gICAgICAgICAgICBFcnJvckhhbmRsZXIuaW5zdGFuY2UoKS5vdXRwdXRFcnJvckZyb21Db2RlKCdTZWxlY3RlZFZhcmlhbnRDaGFuZ2VGYWlsZWQnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvblNlbGVjdGVkS3Zhc0NoYW5nZWQoZTogSUV2ZW50SW5mb3JtYXRpb24pIHtcclxuXHJcbiAgICAgICAgICAgIHRoaXMucmVuZGVyKCdQcm9kdWN0UXVpY2tWaWV3S3ZhSXRlbXMnLCB7IEtleVZhcmlhbnRBdHRyaWJ1dGVJdGVtczogZS5kYXRhIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uSW1hZ2VzQ2hhbmdlZChlOiBJRXZlbnRJbmZvcm1hdGlvbikge1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuaXNQcm9kdWN0V2l0aFZhcmlhbnRzKCkgJiYgdGhpcy5pc1NlbGVjdGVkVmFyaWFudFVuYXZhaWxhYmxlKCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKCdNYWluSW1hZ2VDb250ZW50JywgdGhpcy5nZXRVbmF2YWlsYWJsZU1haW5JbWFnZUNvbnRlbnQoZSkpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIoJ01haW5JbWFnZUNvbnRlbnQnLCBlLmRhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGdldFVuYXZhaWxhYmxlTWFpbkltYWdlQ29udGVudChlOiBJRXZlbnRJbmZvcm1hdGlvbik6IGFueSB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgRGlzcGxheU5hbWU6IGUuZGF0YS5EaXNwbGF5TmFtZSxcclxuICAgICAgICAgICAgICAgIFNlbGVjdGVkSW1hZ2U6IHtcclxuICAgICAgICAgICAgICAgICAgICBJbWFnZVVybDogZS5kYXRhLkZhbGxiYWNrSW1hZ2VVcmxcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvblByaWNlc0NoYW5nZWQoZTogSUV2ZW50SW5mb3JtYXRpb24pIHtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzUHJvZHVjdFdpdGhWYXJpYW50cygpICYmIHRoaXMuaXNTZWxlY3RlZFZhcmlhbnRVbmF2YWlsYWJsZSgpKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcignUHJpY2VEaXNjb3VudCcsIG51bGwpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIoJ1ByaWNlRGlzY291bnQnLCBlLmRhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgcmVuZGVyVW5hdmFpbGFibGVBZGRUb0NhcnQoKTogUS5Qcm9taXNlPHZvaWQ+IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBRLmZjYWxsKCgpID0+IHRoaXMucmVuZGVyKCdBZGRUb0NhcnRRdWlja1ZpZXcnLCB7IElzVW5hdmFpbGFibGU6IHRydWUgfSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIHJlbmRlckF2YWlsYWJsZUFkZFRvQ2FydCgpOiBRLlByb21pc2U8dm9pZD4ge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuaW52ZW50b3J5U2VydmljZVxyXG4gICAgICAgICAgICAgICAgICAgICAgIC5pc0F2YWlsYWJsZVRvU2VsbCh0aGlzLmNvbnRleHQudmlld01vZGVsLlNrdSlcclxuICAgICAgICAgICAgICAgICAgICAgICAudGhlbihyZXN1bHQgPT4gdGhpcy5yZW5kZXIoJ0FkZFRvQ2FydFF1aWNrVmlldycsIHsgSXNBdmFpbGFibGVUb1NlbGw6IHJlc3VsdCB9KSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgY29tcGxldGVBZGRMaW5lSXRlbShxdWFudGl0eUFkZGVkOiBhbnkpOiBRLlByb21pc2U8dm9pZD4ge1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFEuZmNhbGwoKCkgPT4gdGhpcy5wcm9kdWN0U2VydmljZS5jbG9zZVF1aWNrVmlldygpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBnZXRMaXN0TmFtZUZvckFuYWx5dGljcygpOiBzdHJpbmcge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jb250ZXh0LnZpZXdNb2RlbC5zb3VyY2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9KcXVlcnlQbHVnaW5zL0lTZXJpYWxpemVPYmplY3RKcXVlcnlQbHVnaW4udHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9Db250cm9sbGVyLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9FcnJvckhhbmRsaW5nL0Vycm9ySGFuZGxlci50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0lDb250cm9sbGVyQWN0aW9uQ29udGV4dC50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0lDb250cm9sbGVyQ29udGV4dC50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvUmVwb3NpdG9yaWVzL0NhcnRSZXBvc2l0b3J5LnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5DYXJ0LlVJL0NhcnRTdW1tYXJ5L1NvdXJjZS9UeXBlU2NyaXB0L0NhcnRTZXJ2aWNlLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Qcm9kdWN0L1NvdXJjZS9UeXBlU2NyaXB0L1Byb2R1Y3RTZXJ2aWNlLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIFNlYXJjaFJlc3VsdHNDb250cm9sbGVyIGV4dGVuZHMgT3Jja2VzdHJhLkNvbXBvc2VyLkNvbnRyb2xsZXIge1xyXG4gICAgICAgIHByb3RlY3RlZCBjYXJ0U2VydmljZTogQ2FydFNlcnZpY2UgPSBuZXcgQ2FydFNlcnZpY2UobmV3IENhcnRSZXBvc2l0b3J5KCksIHRoaXMuZXZlbnRIdWIpO1xyXG4gICAgICAgIHByb3RlY3RlZCBwcm9kdWN0U2VydmljZTogUHJvZHVjdFNlcnZpY2UgPSBuZXcgUHJvZHVjdFNlcnZpY2UodGhpcy5ldmVudEh1YiwgdGhpcy5jb250ZXh0KTtcclxuICAgICAgICBwcm90ZWN0ZWQgY3VycmVudFBhZ2U6IGFueTtcclxuXHJcbiAgICAgICAgcHVibGljIGluaXRpYWxpemUoKSB7XHJcblxyXG4gICAgICAgICAgICBzdXBlci5pbml0aWFsaXplKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRQYWdlID0gdGhpcy5nZXRDdXJyZW50UGFnZSgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKCdzZWFyY2hSZXN1bHRSZW5kZXJlZCcsIHtcclxuICAgICAgICAgICAgICAgIGRhdGEgOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgUHJvZHVjdFNlYXJjaFJlc3VsdHMgOiB0aGlzLmNvbnRleHQudmlld01vZGVsLlByb2R1Y3RTZWFyY2hSZXN1bHRzLFxyXG4gICAgICAgICAgICAgICAgICAgIExpc3ROYW1lIDogdGhpcy5jb250ZXh0LnZpZXdNb2RlbC5MaXN0TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBQYWdlTnVtYmVyIDogdGhpcy5jdXJyZW50UGFnZS5EaXNwbGF5TmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBNYXhJdGVtc1BlclBhZ2UgOiB0aGlzLmNvbnRleHQudmlld01vZGVsLk1heEl0ZW1zUGVyUGFnZVxyXG4gICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgZ2V0Q3VycmVudFBhZ2UoKTogYW55IHtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiA8YW55PiBfLmZpbmQodGhpcy5jb250ZXh0LnZpZXdNb2RlbC5Qcm9kdWN0U2VhcmNoUmVzdWx0cy5QYWdpbmF0aW9uLlBhZ2VzLCB7SXNDdXJyZW50UGFnZSA6IHRydWV9KSB8fCB7fTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBhZGRUb0NhcnQoYWN0aW9uQ29udGV4dDogSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0KSB7XHJcblxyXG4gICAgICAgICAgICB2YXIgcHJvZHVjdENvbnRleHQ6IEpRdWVyeSA9ICQoYWN0aW9uQ29udGV4dC5lbGVtZW50Q29udGV4dCkuY2xvc2VzdCgnW2RhdGEtcHJvZHVjdC1pZF0nKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBoYXNWYXJpYW50czogc3RyaW5nID0gPGFueT5wcm9kdWN0Q29udGV4dC5kYXRhKCdoYXNWYXJpYW50cycpO1xyXG5cclxuICAgICAgICAgICAgLy9EbyBub3QgdXNlIC5kYXRhIHNpbmNlIGl0IG1heSBwYXJzZSB0aGUgaWQgYXMgYSBudW1iZXIuXHJcbiAgICAgICAgICAgIHZhciBwcm9kdWN0SWQ6IHN0cmluZyA9IHByb2R1Y3RDb250ZXh0LmF0dHIoJ2RhdGEtcHJvZHVjdC1pZCcpO1xyXG4gICAgICAgICAgICB2YXIgdmFyaWFudElkOiBzdHJpbmcgPSBwcm9kdWN0Q29udGV4dC5hdHRyKCdkYXRhLXByb2R1Y3QtdmFyaWFudC1pZCcpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHByb2R1Y3QgPSBfLmZpbmQodGhpcy5jb250ZXh0LnZpZXdNb2RlbC5Qcm9kdWN0U2VhcmNoUmVzdWx0cy5TZWFyY2hSZXN1bHRzLCBmdW5jdGlvbihwcm9kdWN0OiBhbnkpIHtcclxuICAgICAgICAgICAgICAgIGlmIChfLmlzRW1wdHkodmFyaWFudElkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBwcm9kdWN0LlByb2R1Y3RJZCA9PT0gcHJvZHVjdElkO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJvZHVjdC5Qcm9kdWN0SWQgPT09IHByb2R1Y3RJZCAmJiBwcm9kdWN0LlZhcmlhbnRJZCA9PT0gdmFyaWFudElkO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdmFyIHByaWNlOiBudW1iZXIgPSBwcm9kdWN0LlByaWNpbmcuSXNPblNhbGUgPyBwcm9kdWN0LlByaWNpbmcuUHJpY2UgOiBwcm9kdWN0LlByaWNpbmcuTGlzdFByaWNlO1xyXG5cclxuICAgICAgICAgICAgdmFyIGJ1c3kgPSB0aGlzLmFzeW5jQnVzeSh7IGVsZW1lbnRDb250ZXh0OiBhY3Rpb25Db250ZXh0LmVsZW1lbnRDb250ZXh0LCBjb250YWluZXJDb250ZXh0OiBwcm9kdWN0Q29udGV4dCB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmIChoYXNWYXJpYW50cyA9PT0gJ1RydWUnKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9kdWN0U2VydmljZS5sb2FkUXVpY2tCdXlQcm9kdWN0KHByb2R1Y3RJZCwgdmFyaWFudElkLCAncHJvZHVjdFNlYXJjaCcsIHRoaXMuY29udGV4dC52aWV3TW9kZWwuTGlzdE5hbWUpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKGRhdGE6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBFcnJvckhhbmRsZXIuaW5zdGFuY2UoKS5yZW1vdmVFcnJvcnMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgKHJlYXNvbjogYW55KSA9PiB0aGlzLm9uQWRkVG9DYXJ0RmFpbGVkKHJlYXNvbikpXHJcbiAgICAgICAgICAgICAgICAgICAgLmZpbigoKSA9PiBidXN5LmRvbmUoKSk7XHJcblxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdmFyIHByb2R1Y3REYXRhOiBhbnkgPSB0aGlzLmdldFByb2R1Y3REYXRhRm9yQW5hbHl0aWNzKHByb2R1Y3RJZCwgcHJpY2UpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKCdsaW5lSXRlbUFkZGluZycsIHsgZGF0YTogcHJvZHVjdERhdGEgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5jYXJ0U2VydmljZS5hZGRMaW5lSXRlbShwcm9kdWN0SWQsICcnICsgcHJpY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKGRhdGE6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBFcnJvckhhbmRsZXIuaW5zdGFuY2UoKS5yZW1vdmVFcnJvcnMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgKHJlYXNvbjogYW55KSA9PiB0aGlzLm9uQWRkVG9DYXJ0RmFpbGVkKHJlYXNvbikpXHJcbiAgICAgICAgICAgICAgICAgICAgLmZpbigoKSA9PiBidXN5LmRvbmUoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvbkFkZFRvQ2FydEZhaWxlZChyZWFzb246IGFueSk6IHZvaWQge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBvbiBhZGRpbmcgaXRlbSB0byBjYXJ0JywgcmVhc29uKTtcclxuXHJcbiAgICAgICAgICAgIEVycm9ySGFuZGxlci5pbnN0YW5jZSgpLm91dHB1dEVycm9yRnJvbUNvZGUoJ0FkZFRvQ2FydEZhaWxlZCcpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHNlYXJjaFByb2R1Y3RDbGljayhhY3Rpb25Db250ZXh0OiBJQ29udHJvbGxlckFjdGlvbkNvbnRleHQpIHtcclxuICAgICAgICAgICAgdmFyIGluZGV4OiBudW1iZXIgPSA8YW55PmFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHQuZGF0YSgnaW5kZXgnKTtcclxuICAgICAgICAgICAgdmFyIHByb2R1Y3RJZDogc3RyaW5nID0gYWN0aW9uQ29udGV4dC5lbGVtZW50Q29udGV4dC5kYXRhKCdwcm9kdWN0aWQnKS50b1N0cmluZygpO1xyXG4gICAgICAgICAgICB2YXIgcHJvZHVjdDogYW55ID0gXy5maW5kKHRoaXMuY29udGV4dC52aWV3TW9kZWwuUHJvZHVjdFNlYXJjaFJlc3VsdHMuU2VhcmNoUmVzdWx0cywge1Byb2R1Y3RJZCA6IHByb2R1Y3RJZH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKCdwcm9kdWN0Q2xpY2snLCB7ZGF0YSA6IHtcclxuICAgICAgICAgICAgICAgIFByb2R1Y3QgOiBwcm9kdWN0LFxyXG4gICAgICAgICAgICAgICAgTGlzdE5hbWUgOiB0aGlzLmNvbnRleHQudmlld01vZGVsLkxpc3ROYW1lLFxyXG4gICAgICAgICAgICAgICAgSW5kZXggOiBpbmRleCxcclxuICAgICAgICAgICAgICAgIFBhZ2VOdW1iZXIgOiB0aGlzLmN1cnJlbnRQYWdlLkRpc3BsYXlOYW1lLFxyXG4gICAgICAgICAgICAgICAgTWF4SXRlbXNQZXJQYWdlIDogdGhpcy5jb250ZXh0LnZpZXdNb2RlbC5NYXhJdGVtc1BlclBhZ2VcclxuICAgICAgICAgICAgfX0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHBhZ2VyUGFnZUNoYW5nZWQoYWN0aW9uQ29udGV4dDogSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0KSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGV4dC53aW5kb3cubG9jYXRpb24uaHJlZiA9IGFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHQudmFsKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgZ2V0UHJvZHVjdERhdGFGb3JBbmFseXRpY3MocHJvZHVjdElkOiBzdHJpbmcsIHByaWNlOiBhbnkpOiBhbnkge1xyXG4gICAgICAgICAgICB2YXIgcmVzdWx0cyA9IHRoaXMuY29udGV4dC52aWV3TW9kZWwuUHJvZHVjdFNlYXJjaFJlc3VsdHMuU2VhcmNoUmVzdWx0cztcclxuICAgICAgICAgICAgdmFyIHZtID0gXy5maW5kKHJlc3VsdHMsIChyOiBhbnkpID0+IHIuUHJvZHVjdElkID09PSBwcm9kdWN0SWQpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCF2bSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgZmluZCBhIHByb2R1Y3Qgd2l0aCB0aGUgSUQgJyR7cHJvZHVjdElkfScuYCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgTGlzdDogdGhpcy5jb250ZXh0LnZpZXdNb2RlbC5MaXN0TmFtZSxcclxuICAgICAgICAgICAgICAgIFByb2R1Y3RJZDogdm0uUHJvZHVjdElkLFxyXG4gICAgICAgICAgICAgICAgRGlzcGxheU5hbWU6IHZtLkRpc3BsYXlOYW1lLFxyXG4gICAgICAgICAgICAgICAgTGlzdFByaWNlOiBwcmljZSxcclxuICAgICAgICAgICAgICAgIEJyYW5kOiB2bS5CcmFuZCxcclxuICAgICAgICAgICAgICAgIENhdGVnb3J5SWQ6IHZtLkNhdGVnb3J5SWQsXHJcbiAgICAgICAgICAgICAgICBRdWFudGl0eTogMVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGRhdGE7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvQ29udHJvbGxlci50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0lDb250cm9sbGVyQWN0aW9uQ29udGV4dC50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0lDb250cm9sbGVyQ29udGV4dC50cycgLz5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIFNlYXJjaFN1bW1hcnlDb250cm9sbGVyIGV4dGVuZHMgT3Jja2VzdHJhLkNvbXBvc2VyLkNvbnRyb2xsZXIge1xyXG5cclxuICAgICAgICBwdWJsaWMgaW5pdGlhbGl6ZSgpIHtcclxuXHJcbiAgICAgICAgICAgIHN1cGVyLmluaXRpYWxpemUoKTtcclxuICAgICAgICAgICAgY29uc3QgcHJvZHVjdFNlYXJjaFJlc3VsdHMgPSB0aGlzLmNvbnRleHQudmlld01vZGVsLlByb2R1Y3RTZWFyY2hSZXN1bHRzO1xyXG5cclxuICAgICAgICAgICAgaWYgKHByb2R1Y3RTZWFyY2hSZXN1bHRzLlRvdGFsQ291bnQgPT09IDAgJiYgcHJvZHVjdFNlYXJjaFJlc3VsdHMuS2V5d29yZHMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaCgnbm9SZXN1bHRzRm91bmQnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YSA6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgS2V5d29yZCA6IHByb2R1Y3RTZWFyY2hSZXN1bHRzLktleXdvcmRzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBMaXN0TmFtZSA6IHRoaXMuY29udGV4dC52aWV3TW9kZWwuTGlzdE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghXy5pc0VtcHR5KHByb2R1Y3RTZWFyY2hSZXN1bHRzLkNvcnJlY3RlZFNlYXJjaFRlcm1zKVxyXG4gICAgICAgICAgICAmJiBwcm9kdWN0U2VhcmNoUmVzdWx0cy5LZXl3b3Jkc1xyXG4gICAgICAgICAgICAmJiBwcm9kdWN0U2VhcmNoUmVzdWx0cy5Ub3RhbENvdW50ICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goJ3NlYXJjaFRlcm1Db3JyZWN0ZWQnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YSA6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgUHJvZHVjdFNlYXJjaFJlc3VsdHMgOiBwcm9kdWN0U2VhcmNoUmVzdWx0cyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgS2V5d29yZEVudGVyZWQgOiBwcm9kdWN0U2VhcmNoUmVzdWx0cy5LZXl3b3JkcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgS2V5d29yZENvcnJlY3RlZCA6IHByb2R1Y3RTZWFyY2hSZXN1bHRzLkNvcnJlY3RlZFNlYXJjaFRlcm1zLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBMaXN0TmFtZSA6IHRoaXMuY29udGV4dC52aWV3TW9kZWwuTGlzdE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgfX1cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L0pxdWVyeVBsdWdpbnMvSVNlcmlhbGl6ZU9iamVjdEpxdWVyeVBsdWdpbi50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0NvbnRyb2xsZXIudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9JQ29udHJvbGxlckFjdGlvbkNvbnRleHQudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9JQ29udHJvbGxlckNvbnRleHQudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4vU2VydmljZXMvU2VhcmNoU2VydmljZS50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi9TZXJ2aWNlcy9JU2VhcmNoU2VydmljZS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0LnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuL1VybEhlbHBlci50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGludGVyZmFjZSBTZXJpYWxpemVPYmplY3QgZXh0ZW5kcyBKUXVlcnkge1xyXG4gICAgICAgIHNlcmlhbGl6ZU9iamVjdCgpOiBhbnk7XHJcbiAgICB9XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIFNlbGVjdGVkRmFjZXRTZWFyY2hDb250cm9sbGVyIGV4dGVuZHMgT3Jja2VzdHJhLkNvbXBvc2VyLkNvbnRyb2xsZXIge1xyXG5cclxuICAgICAgICBwdWJsaWMgaW5pdGlhbGl6ZSgpIHtcclxuICAgICAgICAgICAgc3VwZXIuaW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHJlbW92ZVNlbGVjdGVkRmFjZXQoYWN0aW9uQ29udGV4dDogSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0KSB7XHJcbiAgICAgICAgICAgIHZhciByZW1vdmVGYWNldEJ1dHRvbiA9IGFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHQ7XHJcblxyXG4gICAgICAgICAgICBhY3Rpb25Db250ZXh0LmV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGFjdGlvbkNvbnRleHQuZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goJ2ZhY2V0UmVtb3ZlZCcsIHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICBmYWNldEZpZWxkTmFtZTogcmVtb3ZlRmFjZXRCdXR0b24uZGF0YSgnZmFjZXRmaWVsZG5hbWUnKSxcclxuICAgICAgICAgICAgICAgICAgICBmYWNldFZhbHVlOiByZW1vdmVGYWNldEJ1dHRvbi5kYXRhKCdmYWNldHZhbHVlJyksXHJcbiAgICAgICAgICAgICAgICAgICAgZmFjZXRUeXBlOiByZW1vdmVGYWNldEJ1dHRvbi5kYXRhKCdmYWNldHR5cGUnKSxcclxuICAgICAgICAgICAgICAgICAgICBmYWNldExhbmRpbmdQYWdlVXJsOiByZW1vdmVGYWNldEJ1dHRvbi5kYXRhKCdmYWNldGxhbmRpbmdwYWdldXJsJylcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgY2xlYXJTZWxlY3RlZEZhY2V0cyhhY3Rpb25Db250ZXh0OiBJQ29udHJvbGxlckFjdGlvbkNvbnRleHQpIHtcclxuICAgICAgICAgICAgdmFyIGNsZWFyRmFjZXRzQnV0dG9uID0gYWN0aW9uQ29udGV4dC5lbGVtZW50Q29udGV4dDtcclxuXHJcbiAgICAgICAgICAgIGFjdGlvbkNvbnRleHQuZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgYWN0aW9uQ29udGV4dC5ldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaCgnZmFjZXRzQ2xlYXJlZCcsIHtcclxuICAgICAgICAgICAgICAgZGF0YTogeyBsYW5kaW5nUGFnZVVybDogY2xlYXJGYWNldHNCdXR0b24uZGF0YSgnbGFuZGluZ3BhZ2V1cmwnKSB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGFkZFNpbmdsZVNlbGVjdENhdGVnb3J5KGFjdGlvbkNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCkge1xyXG4gICAgICAgICAgICB2YXIgc2luZ2xlU2VsZWN0Q2F0ZWdvcnkgPSBhY3Rpb25Db250ZXh0LmVsZW1lbnRDb250ZXh0LFxyXG4gICAgICAgICAgICAgICAgYW5jaG9yQ29udGV4dCA9IGFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHQsXHJcbiAgICAgICAgICAgICAgICBmYWNldEZpZWxkTmFtZSA9IGFuY2hvckNvbnRleHQuZGF0YSgnZmFjZXRmaWVsZG5hbWUnKSxcclxuICAgICAgICAgICAgICAgIGZhY2V0VmFsdWUgPSBhbmNob3JDb250ZXh0LmRhdGEoJ2ZhY2V0dmFsdWUnKTtcclxuXHJcbiAgICAgICAgICAgIGFjdGlvbkNvbnRleHQuZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgYWN0aW9uQ29udGV4dC5ldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaCgnc2luZ2xlQ2F0ZWdvcnlBZGRlZCcsIHtcclxuICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeVVybDogc2luZ2xlU2VsZWN0Q2F0ZWdvcnkuZGF0YSgnY2F0ZWdvcnl1cmwnKSxcclxuICAgICAgICAgICAgICAgICAgICBmYWNldEtleTogZmFjZXRGaWVsZE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZmFjZXRWYWx1ZTogZmFjZXRWYWx1ZSxcclxuICAgICAgICAgICAgICAgICAgICBwYWdlVHlwZTogVXJsSGVscGVyLnJlc29sdmVQYWdlVHlwZSgpXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvSnF1ZXJ5UGx1Z2lucy9JU2VyaWFsaXplT2JqZWN0SnF1ZXJ5UGx1Z2luLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvQ29udHJvbGxlci50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0lDb250cm9sbGVyQWN0aW9uQ29udGV4dC50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0lDb250cm9sbGVyQ29udGV4dC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0LnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuL1VybEhlbHBlci50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBTb3J0QnlTZWFyY2hDb250cm9sbGVyIGV4dGVuZHMgT3Jja2VzdHJhLkNvbXBvc2VyLkNvbnRyb2xsZXIge1xyXG5cclxuICAgICAgICBwdWJsaWMgc29ydGluZ0NoYW5nZWQoYWN0aW9uQ29udGV4dDogSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0KSB7XHJcbiAgICAgICAgICAgIHZhciBhbmNob3JDb250ZXh0ID0gYWN0aW9uQ29udGV4dC5lbGVtZW50Q29udGV4dCxcclxuICAgICAgICAgICAgICAgIGRhdGFTb3J0aW5nVHlwZSA9IGFuY2hvckNvbnRleHQuZGF0YSgnc29ydGluZycpLFxyXG4gICAgICAgICAgICAgICAgZGF0YVVybCA9IGFuY2hvckNvbnRleHQuZGF0YSgndXJsJyksXHJcbiAgICAgICAgICAgICAgICByZXNvbHZlUGFnZVR5cGUgPSBVcmxIZWxwZXIucmVzb2x2ZVBhZ2VUeXBlKCk7XHJcblxyXG4gICAgICAgICAgICBhY3Rpb25Db250ZXh0LmV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIGFjdGlvbkNvbnRleHQuZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goJ3NvcnRpbmdDaGFuZ2VkJywge1xyXG4gICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgIHNvcnRpbmdUeXBlOiBkYXRhU29ydGluZ1R5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgcGFnZVR5cGU6IHJlc29sdmVQYWdlVHlwZSxcclxuICAgICAgICAgICAgICAgICAgICB1cmw6IGRhdGFVcmxcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvTXZjL0NvbXBvc2VyQ2xpZW50LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0V2ZW50cy9FdmVudEh1Yi50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBQcm9kdWN0U3BlY2lmaWNhdGlvbnNTZXJ2aWNlIHtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBtZW1vaXplUHJvZHVjdFNwZWNpZmljYXRpb25zOiBGdW5jdGlvbjtcclxuXHJcbiAgICAgICAgcHVibGljIGdldFByb2R1Y3RTcGVjaWZpY2F0aW9ucyhwcm9kdWN0SWQ6IHN0cmluZywgdmFyaWFudElkOiBzdHJpbmcpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXByb2R1Y3RJZCkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgcHJvZHVjdCBpZCBpcyByZXF1aXJlZCcpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMubWVtb2l6ZVByb2R1Y3RTcGVjaWZpY2F0aW9ucykge1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMubWVtb2l6ZVByb2R1Y3RTcGVjaWZpY2F0aW9ucyA9XHJcbiAgICAgICAgICAgICAgICAgICAgXy5tZW1vaXplKHRoaXMuZ2V0UHJvZHVjdFNwZWNpZmljYXRpb25zSW1wbCwgKHByb2R1Y3RJZCwgdmFyaWFudElkKSA9PiB2YXJpYW50SWQpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tZW1vaXplUHJvZHVjdFNwZWNpZmljYXRpb25zKHByb2R1Y3RJZCwgdmFyaWFudElkKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgZ2V0UHJvZHVjdFNwZWNpZmljYXRpb25zSW1wbChwcm9kdWN0SWQ6IHN0cmluZywgdmFyaWFudElkOiBzdHJpbmcpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IHsgcHJvZHVjdElkOiBwcm9kdWN0SWQsIHZhcmlhbnRJZDogdmFyaWFudElkIH07XHJcbiAgICAgICAgICAgIHJldHVybiBDb21wb3NlckNsaWVudC5wb3N0KCcvYXBpL3Byb2R1Y3Qvc3BlY2lmaWNhdGlvbnMnLCBkYXRhKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvQ29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9FdmVudHMvSUV2ZW50SW5mb3JtYXRpb24udHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nUHJvZHVjdFNwZWNpZmljYXRpb25zU2VydmljZS50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgZXhwb3J0IGNsYXNzIFByb2R1Y3RTcGVjaWZpY2F0aW9uc0NvbnRyb2xsZXIgZXh0ZW5kcyBPcmNrZXN0cmEuQ29tcG9zZXIuQ29udHJvbGxlciB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgc2VydmljZTogUHJvZHVjdFNwZWNpZmljYXRpb25zU2VydmljZSA9IG5ldyBQcm9kdWN0U3BlY2lmaWNhdGlvbnNTZXJ2aWNlKCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKCkge1xyXG5cclxuICAgICAgICAgICAgc3VwZXIuaW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLnJlZ2lzdGVyU3Vic2NyaXB0aW9ucygpO1xyXG4gICAgICAgICAgICB0aGlzLnJlbmRlckRhdGEodGhpcy5jb250ZXh0LnZpZXdNb2RlbC52YXJpYW50SWQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSByZWdpc3RlclN1YnNjcmlwdGlvbnMoKTogdm9pZCB7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnN1YnNjcmliZSgncHJvZHVjdERldGFpbFNlbGVjdGVkVmFyaWFudElkQ2hhbmdlZCcsIGUgPT4gdGhpcy5yZW5kZXJEYXRhKGUuZGF0YS5zZWxlY3RlZFZhcmlhbnRJZCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSByZW5kZXJEYXRhKHZhcmlhbnRJZDogc3RyaW5nKTogdm9pZCB7XHJcblxyXG4gICAgICAgICAgICB2YXIgaGFuZGxlOiBudW1iZXIgPSBzZXRUaW1lb3V0KCgpID0+IHRoaXMucmVuZGVyKCdBdHRyaWJ1dGVzJywgeyBJc0xvYWRpbmc6IHRydWUgfSksIDMwMCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmdldFByb2R1Y3RTcGVjaWZpY2F0aW9ucyh2YXJpYW50SWQpXHJcbiAgICAgICAgICAgICAgICAuZG9uZShyZXN1bHQgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoaGFuZGxlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIoJ0F0dHJpYnV0ZXMnLCByZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaCgncHJvZHVjdFNwZWNpZmljYXRpb25zQ2hhbmdlZCcsIHJlc3VsdCk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSwgcmVhc29uID0+IHRoaXMuaGFuZGxlRXJyb3IocmVhc29uKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGdldFByb2R1Y3RTcGVjaWZpY2F0aW9ucyh2YXJpYW50SWQ6IHN0cmluZyk6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIHZhciBwcm9kdWN0SWQ6IHN0cmluZyA9IHRoaXMuY29udGV4dC52aWV3TW9kZWwucHJvZHVjdElkO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zZXJ2aWNlLmdldFByb2R1Y3RTcGVjaWZpY2F0aW9ucyhwcm9kdWN0SWQsIHZhcmlhbnRJZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGhhbmRsZUVycm9yKHJlYXNvbiA6IGFueSkge1xyXG5cclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignVGhlIHNlbGVjdGVkIHZhcmlhbnQgY2hhbmdlZCwgJyArXHJcbiAgICAgICAgICAgICAgICAnYnV0IHdlIHdlcmUgdW5hYmxlIHRvIGdldCB0aGUgcHJvZHVjdCBzcGVjaWZpY2F0aW9ucyBhc3NvY2lhdGVkIHdpdGggdGhhdCB2YXJpYW50JywgcmVhc29uKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIixudWxsLCIvLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuL0lQbHVnaW4udHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvRXZlbnRzL0V2ZW50SHViLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgY2xhc3MgU2xpY2tDYXJvdXNlbFBsdWdpbiBpbXBsZW1lbnRzIElQbHVnaW4ge1xyXG5cclxuICAgICAgICBwdWJsaWMgaW5pdGlhbGl6ZSh3aW5kb3c6IFdpbmRvdywgZG9jdW1lbnQ6IEhUTUxEb2N1bWVudCkge1xyXG4gICAgICAgICAgICB0aGlzLnN1YnNjcmlwdEV2ZW50cygpO1xyXG4gICAgICAgICAgICB0aGlzLmluaXRTbGljaygpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbml0U2xpY2soKTogdm9pZCB7XHJcblxyXG4gICAgICAgICAgICAkLmVhY2goJCgnLmpzLXNsaWNrLWNhcm91c2VsJyksIChpbmRleCwgZWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IHNsaWNrSW5zdGFuY2UgPSAkKGVsZW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgbGV0IHNsaWNrT3B0aW9uczogYW55ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGFycm93czogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICByZXNwb25zaXZlOiBbe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb3RzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtwb2ludDogMTAyNCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3M6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogMyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluZmluaXRlOiB0cnVlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGlmICghJChzbGlja0luc3RhbmNlKS5oYXNDbGFzcygnc2xpY2staW5pdGlhbGl6ZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChzbGlja0luc3RhbmNlLmRhdGEoJ3NsaWNrJykubW9iaWxlQ2Fyb3VzZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5iU2xpZGVUb1Nob3cgPSBzbGlja0luc3RhbmNlLmRhdGEoJ3NsaWNrJykubW9iaWxlU2xpZGVzVG9TaG93O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuYlNsaWRlVG9TaG93ID0gKCBuYlNsaWRlVG9TaG93ICkgPyBuYlNsaWRlVG9TaG93IDogMjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IG5iU2xpZGVUb1Njcm9sbCA9IHNsaWNrSW5zdGFuY2UuZGF0YSgnc2xpY2snKS5tb2JpbGVTbGlkZXNUb1Njcm9sbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmJTbGlkZVRvU2Nyb2xsID0gKCBuYlNsaWRlVG9TY3JvbGwgKSA/IG5iU2xpZGVUb1Njcm9sbCA6IDI7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzbGlja09wdGlvbnMucmVzcG9uc2l2ZS5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrcG9pbnQ6IDc2OCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFycm93czogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5nczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogbmJTbGlkZVRvU2hvdyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzbGlkZXNUb1Njcm9sbDogbmJTbGlkZVRvU2Nyb2xsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvdHM6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5maW5pdGU6IHRydWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2xpY2tPcHRpb25zLnJlc3BvbnNpdmUucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVha3BvaW50OiA3NjgsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhcnJvd3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3M6ICd1bnNsaWNrJyAvLyBkZXN0cm95cyBzbGlja1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHNsaWNrSW5zdGFuY2Uuc2xpY2soc2xpY2tPcHRpb25zKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBzdWJzY3JpcHRFdmVudHMoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgICQod2luZG93KS5vbigncmVzaXplJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKCQod2luZG93KS53aWR0aCgpID4gNzY4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbml0U2xpY2soKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBFdmVudEh1Yi5pbnN0YW5jZSgpLnN1YnNjcmliZSgnaW5pQ2Fyb3VzZWwnLCAoZGF0YSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5pbml0U2xpY2soKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxufVxyXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5Qcm9kdWN0LlVJL1Byb2R1Y3QvU291cmNlL1R5cGVTY3JpcHQvUHJvZHVjdENvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvUGx1Z2lucy9TbGlja0Nhcm91c2VsUGx1Z2luLnRzJyAvPlxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIGV4cG9ydCBjbGFzcyBSZWxhdGVkUHJvZHVjdENvbnRyb2xsZXIgZXh0ZW5kcyBPcmNrZXN0cmEuQ29tcG9zZXIuUHJvZHVjdENvbnRyb2xsZXIgIHtcclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGNvbmNlcm46IHN0cmluZyA9ICdyZWxhdGVkUHJvZHVjdCc7XHJcbiAgICAgICAgcHJpdmF0ZSBzb3VyY2U6IHN0cmluZyA9ICdSZWxhdGVkIFByb2R1Y3RzJztcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBwcm9kdWN0czogYW55W107XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKCkge1xyXG5cclxuICAgICAgICAgICAgc3VwZXIuaW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgICAgICB0aGlzLmdldFJlbGF0ZWRQcm9kdWN0cygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXRSZWxhdGVkUHJvZHVjdHMoKSB7XHJcbiAgICAgICAgICAgIGxldCB2bSA9IHRoaXMuY29udGV4dC52aWV3TW9kZWw7XHJcbiAgICAgICAgICAgIGxldCBpZGVudGlmaWVycyA9IHZtLlByb2R1Y3RJZGVudGlmaWVycztcclxuICAgICAgICAgICAgdGhpcy5wcm9kdWN0U2VydmljZS5nZXRSZWxhdGVkUHJvZHVjdHMoaWRlbnRpZmllcnMpXHJcbiAgICAgICAgICAgICAgICAudGhlbihkYXRhID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb2R1Y3RzID0gZGF0YS5Qcm9kdWN0cztcclxuICAgICAgICAgICAgICAgICAgICAvL05lZWQgdG8gbWFwIHBhcmVudCBpdGVtcyB0byBjaGlsZCBpdGVtIHNpbmNlIGhhbmRsZWJhciBkb2VzbnQgc2VlbSB0byBzdXBwb3J0XHJcbiAgICAgICAgICAgICAgICAgICAgLy9wYXJ0aWFsIHBhcmFtZXRlcnMgb3IgcGF0aCBwcm9wZXJseSB3aGlsZSBpdCBzdXBwb3NlIHRvLiBNYXliZSBhbiB1cGRhdGUgb2YgaGFuZGxlYmFyIGNvdWxkIHNvbHZlIHRoZSBpc3N1ZVxyXG4gICAgICAgICAgICAgICAgICAgIC8vKDMuMDEgcmlnaHQgbm93KS5cclxuICAgICAgICAgICAgICAgICAgICB2bS5Qcm9kdWN0cyA9IF8uZWFjaChkYXRhLlByb2R1Y3RzLCAobGluZUl0ZW06IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5lSXRlbS5EaXNwbGF5QWRkVG9DYXJ0ID0gdm0uRGlzcGxheUFkZFRvQ2FydDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGluZUl0ZW0uRGlzcGxheVByaWNlcyA9IHZtLkRpc3BsYXlQcmljZXM7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyKCdSZWxhdGVkUHJvZHVjdHMnLCB2bSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKCdpbmlDYXJvdXNlbCcsIHZtKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdm07XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLnRoZW4odm0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh2bSAmJiB2bS5Qcm9kdWN0cyAmJiB2bS5Qcm9kdWN0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIucHVibGlzaCgncmVsYXRlZFByb2R1Y3RzTG9hZGVkJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIExpc3ROYW1lOiB0aGlzLmdldFBhZ2VTb3VyY2UoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUHJvZHVjdHM6IHZtLlByb2R1Y3RzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC50aGVuKCh2bTogYW55KSA9PiB0aGlzLm9uR2V0UmVsYXRlZFByb2R1Y3RzU3VjY2Vzcyh2bSksXHJcbiAgICAgICAgICAgICAgICAgICAgKHJlYXNvbjogYW55KSA9PiB0aGlzLm9uR2V0UmVsYXRlZFByb2R1Y3RzRmFpbGVkKHJlYXNvbikpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uR2V0UmVsYXRlZFByb2R1Y3RzU3VjY2Vzcyh2bTogYW55KTogdm9pZCB7XHJcbiAgICAgICAgICAgIC8vSG9vayBmb3Igb3RoZXIgcHJvamVjdHNcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBvbkdldFJlbGF0ZWRQcm9kdWN0c0ZhaWxlZChyZWFzb246IGFueSk6IHZvaWQge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgbG9hZGluZyB0aGUgcmVsYXRlZCBwcm9kdWN0cycsIHJlYXNvbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgZ2V0UGFnZVNvdXJjZSgpOiBzdHJpbmcge1xyXG4gICAgICAgICAgICByZXR1cm4gJ1JlbGF0ZWQgUHJvZHVjdHMnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGdldExpc3ROYW1lRm9yQW5hbHl0aWNzKCk6IHN0cmluZyB7XHJcbiAgICAgICAgICAgIHJldHVybiAnUmVsYXRlZCBQcm9kdWN0cyc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb25Mb2FkaW5nRmFpbGVkKHJlYXNvbjogYW55KSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCBsb2FkaW5nIHRoZSBSZWxhdGVkIFByb2R1Y3QgVmlldycpO1xyXG5cclxuICAgICAgICAgICAgRXJyb3JIYW5kbGVyLmluc3RhbmNlKCkub3V0cHV0RXJyb3JGcm9tQ29kZSgnUmVsYXRlZFByb2R1Y3RMb2FkRmFpbGVkJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAgcHVibGljIGFkZFRvQ2FydChhY3Rpb25Db250ZXh0OiBJQ29udHJvbGxlckFjdGlvbkNvbnRleHQpIHtcclxuICAgICAgICAgICAgdmFyIHByb2R1Y3RDb250ZXh0OiBKUXVlcnkgPSAkKGFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHQpLmNsb3Nlc3QoJ1tkYXRhLXByb2R1Y3QtaWRdJyk7XHJcblxyXG4gICAgICAgICAgICB2YXIgaGFzVmFyaWFudHM6IGJvb2xlYW4gPSBwcm9kdWN0Q29udGV4dC5kYXRhKCdoYXNWYXJpYW50cycpO1xyXG4gICAgICAgICAgICB2YXIgcHJvZHVjdElkOiBzdHJpbmcgPSBwcm9kdWN0Q29udGV4dC5hdHRyKCdkYXRhLXByb2R1Y3QtaWQnKTtcclxuICAgICAgICAgICAgdmFyIHZhcmlhbnRJZDogc3RyaW5nID0gcHJvZHVjdENvbnRleHQuYXR0cignZGF0YS1wcm9kdWN0LXZhcmlhbnQtaWQnKTtcclxuICAgICAgICAgICAgdmFyIHByaWNlOiBzdHJpbmcgPSBwcm9kdWN0Q29udGV4dC5kYXRhKCdwcmljZScpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGJ1c3kgPSB0aGlzLmFzeW5jQnVzeSh7IGVsZW1lbnRDb250ZXh0OiBhY3Rpb25Db250ZXh0LmVsZW1lbnRDb250ZXh0LCBjb250YWluZXJDb250ZXh0OiBwcm9kdWN0Q29udGV4dCB9KTtcclxuICAgICAgICAgICAgdmFyIHByb21pc2U6IFEuUHJvbWlzZTxhbnk+O1xyXG5cclxuICAgICAgICAgICAgaWYgKGhhc1ZhcmlhbnRzKSB7XHJcbiAgICAgICAgICAgICAgICBwcm9taXNlID0gdGhpcy5hZGRWYXJpYW50UHJvZHVjdFRvQ2FydChwcm9kdWN0SWQsIHZhcmlhbnRJZCwgcHJpY2UpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcHJvbWlzZSA9IHRoaXMuYWRkTm9uVmFyaWFudFByb2R1Y3RUb0NhcnQocHJvZHVjdElkLCBwcmljZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHByb21pc2UuZmluKCgpID0+IGJ1c3kuZG9uZSgpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIE9jY3VycyB3aGVuIGFkZGluZyBhIHByb2R1Y3QgdG8gdGhlIGNhcnQgdGhhdCBoYXBwZW5zIHRvIGhhdmUgdmFyaWFudHMuXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgcHJvdGVjdGVkIGFkZFZhcmlhbnRQcm9kdWN0VG9DYXJ0KHByb2R1Y3RJZDogc3RyaW5nLCB2YXJpYW50SWQ6IHN0cmluZywgcHJpY2U6IHN0cmluZyk6IFEuUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICAgICAgdmFyIHByb21pc2UgPSB0aGlzLnByb2R1Y3RTZXJ2aWNlLmxvYWRRdWlja0J1eVByb2R1Y3QocHJvZHVjdElkLCB2YXJpYW50SWQsIHRoaXMuY29uY2VybiwgdGhpcy5zb3VyY2UpO1xyXG4gICAgICAgICAgICBwcm9taXNlLmZhaWwoKHJlYXNvbjogYW55KSA9PiB0aGlzLm9uTG9hZGluZ0ZhaWxlZChyZWFzb24pKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICogT2NjdXJzIHdoZW4gYWRkaW5nIGEgcHJvZHVjdCB0byB0aGUgY2FydCB0aGF0IGhhcyBubyB2YXJpYW50LlxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIHByb3RlY3RlZCBhZGROb25WYXJpYW50UHJvZHVjdFRvQ2FydChwcm9kdWN0SWQ6IHN0cmluZywgcHJpY2U6IHN0cmluZyk6IFEuUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICAgICAgdmFyIHZtID0gdGhpcy5nZXRQcm9kdWN0Vmlld01vZGVsKHByb2R1Y3RJZCk7XHJcbiAgICAgICAgICAgIGlmICh2bSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHF1YW50aXR5ID0gdGhpcy5nZXRDdXJyZW50UXVhbnRpdHkoKTtcclxuICAgICAgICAgICAgICAgIHZhciBkYXRhOiBhbnkgPSB0aGlzLmdldFByb2R1Y3REYXRhRm9yQW5hbHl0aWNzKHZtKTtcclxuICAgICAgICAgICAgICAgIGRhdGEuUXVhbnRpdHkgPSBxdWFudGl0eS5WYWx1ZSA/IHF1YW50aXR5LlZhbHVlIDogMTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goJ2xpbmVJdGVtQWRkaW5nJyxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiBkYXRhXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIHByb21pc2UgPSB0aGlzLmNhcnRTZXJ2aWNlLmFkZExpbmVJdGVtKHByb2R1Y3RJZCwgcHJpY2UpXHJcbiAgICAgICAgICAgICAgICAudGhlbigodm06IGFueSkgPT4gdGhpcy5vbkFkZExpbmVJdGVtU3VjY2Vzcyh2bSksXHJcbiAgICAgICAgICAgICAgICAgICAgKHJlYXNvbjogYW55KSA9PiB0aGlzLm9uQWRkTGluZUl0ZW1GYWlsZWQocmVhc29uKSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcHJvbWlzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBnZXRQcm9kdWN0Vmlld01vZGVsKHByb2R1Y3RJZDogc3RyaW5nKTogYW55IHtcclxuICAgICAgICAgICAgdmFyIHByb2R1Y3RWTSA9IF8uZmluZCh0aGlzLnByb2R1Y3RzLCBwID0+IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwLlByb2R1Y3RJZCA9PT0gcHJvZHVjdElkO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmICghcHJvZHVjdFZNKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYENvdWxkIG5vdCBmaW5kIHRoZSBwcm9kdWN0IHdpdGggSUQgb2YgJHtwcm9kdWN0SWR9IHdpdGhpbiByZWxhdGVkIHByb2R1Y3RzLlxyXG4gICAgICAgICAgICAgICAgICAgIFRoaXMgd2lsbCBjYXVzZSB0aGUgcHJvZHVjdCB0byBub3QgYmUgcmVwb3J0ZWQgdG8gQW5hbHl0aWNzLmApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcHJvZHVjdFZNO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGdldEN1cnJlbnRRdWFudGl0eSgpOiBhbnkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgTWluOiAxLFxyXG4gICAgICAgICAgICAgICAgTWF4OiAxLFxyXG4gICAgICAgICAgICAgICAgVmFsdWU6IDFcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyByZWxhdGVkUHJvZHVjdHNDbGljayhhY3Rpb25Db250ZXh0OiBJQ29udHJvbGxlckFjdGlvbkNvbnRleHQpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBpbmRleDogbnVtYmVyID0gPGFueT5hY3Rpb25Db250ZXh0LmVsZW1lbnRDb250ZXh0LmRhdGEoJ2luZGV4Jyk7XHJcbiAgICAgICAgICAgIHZhciBwcm9kdWN0SWQ6IHN0cmluZyA9IGFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHQuZGF0YSgncHJvZHVjdGlkJykudG9TdHJpbmcoKTtcclxuICAgICAgICAgICAgdmFyIHByb2R1Y3Q6IGFueSA9IF8uZmluZCh0aGlzLnByb2R1Y3RzLCB7UHJvZHVjdElkIDogcHJvZHVjdElkfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goJ3Byb2R1Y3RDbGljaycsIHsgZGF0YSA6IHtcclxuICAgICAgICAgICAgICAgIFByb2R1Y3QgOiBwcm9kdWN0LFxyXG4gICAgICAgICAgICAgICAgTGlzdE5hbWUgOiAnUmVsYXRlZCBQcm9kdWN0cycsXHJcbiAgICAgICAgICAgICAgICBJbmRleCA6IGluZGV4XHJcbiAgICAgICAgICAgIH19KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBHZW9Mb2NhdGlvblNlcnZpY2Uge1xyXG4gICAgICAgIHByaXZhdGUgX2Jyb3dzZXJHZW9sb2NhdGlvbjogR2VvbG9jYXRpb24gPSBuYXZpZ2F0b3IuZ2VvbG9jYXRpb247XHJcbiAgICAgICAgcHJpdmF0ZSBfZ2VvY29kZXI6IGdvb2dsZS5tYXBzLkdlb2NvZGVyO1xyXG4gICAgICAgIHByaXZhdGUgX2N1cnJlbmN0TG9jYXRpb246IGdvb2dsZS5tYXBzLkxhdExuZztcclxuXHJcbiAgICAgICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2dlb2NvZGVyID0gbmV3IGdvb2dsZS5tYXBzLkdlb2NvZGVyKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZ2VvbG9jYXRlKCk6IFEuUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX2Jyb3dzZXJHZW9sb2NhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q3VycmVudExvY2F0aW9uKClcclxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKHJlYXNvbikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZWFzb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fY3VycmVuY3RMb2NhdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZ2V0Q3VycmVudExvY2F0aW9uKCk6IFEuUHJvbWlzZTxnb29nbGUubWFwcy5MYXRMbmc+IHtcclxuICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gUS5kZWZlcjxnb29nbGUubWFwcy5MYXRMbmc+KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2Jyb3dzZXJHZW9sb2NhdGlvbi5nZXRDdXJyZW50UG9zaXRpb24oKHBvcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fY3VycmVuY3RMb2NhdGlvbiA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcocG9zLmNvb3Jkcy5sYXRpdHVkZSwgcG9zLmNvb3Jkcy5sb25naXR1ZGUpO1xyXG4gICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSh0aGlzLl9jdXJyZW5jdExvY2F0aW9uKTtcclxuICAgICAgICAgICAgfSwgKCkgPT4geyBkZWZlcnJlZC5yZWplY3QoJ3Byb2JsZW1zIHRvIGdldCBjdXJyZW50IGxvY2F0aW9uJyk7IH0pO1xyXG4gICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBnZXRBZGR0cmVzc0J5TG9jYXRpb24obG9jYXRpb246IGdvb2dsZS5tYXBzLkxhdExuZyk6IFEuUHJvbWlzZTxzdHJpbmc+IHtcclxuICAgICAgICAgICAgdmFyIGRlZmVycmVkID0gUS5kZWZlcjxzdHJpbmc+KCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9nZW9jb2Rlci5nZW9jb2RlKHsgbG9jYXRpb246IGxvY2F0aW9uIH0sXHJcbiAgICAgICAgICAgICAgICBmdW5jdGlvbiAocmVzdWx0cywgc3RhdHVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gZ29vZ2xlLm1hcHMuR2VvY29kZXJTdGF0dXMuT0spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZShyZXN1bHRzWzBdLmZvcm1hdHRlZF9hZGRyZXNzKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKCcnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBnZXRMb2NhdGlvbkJ5QWRkcmVzcyhhZGRyZXNzOiBzdHJpbmcpOiBRLlByb21pc2U8Z29vZ2xlLm1hcHMuTGF0TG5nPiB7XHJcbiAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9IFEuZGVmZXI8Z29vZ2xlLm1hcHMuTGF0TG5nPigpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fZ2VvY29kZXIuZ2VvY29kZSh7IGFkZHJlc3M6IGFkZHJlc3MgfSxcclxuICAgICAgICAgICAgICAgIChyZXN1bHRzLCBzdGF0dXMpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3RhdHVzID09PSBnb29nbGUubWFwcy5HZW9jb2RlclN0YXR1cy5PSykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgbG9jYXRpb24gPSByZXN1bHRzWzBdLmdlb21ldHJ5LmxvY2F0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKGxvY2F0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKG51bGwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnTG9jYXRpb24gbm90IHJlc29sdmVkIGJ5IEdvb2dsZSAnICsgYWRkcmVzcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIGRlZmVycmVkLnByb21pc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLy8gQnkgZGVmYXVsdCByZW5kZXIgd2l0aCBkZWZhdWx0IHZhbHVlIGZvciBWaWV3TW9kZWwuR29vZ2xlRGlyZWN0aW9uc0xpbmsgKGRpcmVjdGlvbiB3aXRoIEVtcHR5IFN0YXJ0IFBvaW50KSwgXHJcbiAgICAgICAgLy8vIGFuZCB3aGVuIFVzZXIgQWNjZXB0IGhpcyBDdXJyZW50IExvY2F0aW9uLCBqdXN0IGluIGFzeW5jIHRhc2sgdXBkYXRlIEhSRUYgYXR0cmlidXRlcyBhbmQgYXR0YWNoIGN1cnJlbnQgbG9jYXRpb24gY29vcmRpbmF0ZXMuXHJcbiAgICAgICAgLy8vIFdlIGRvIG5vdCB1cGRhdGUgdGhlIFZpZXdNb2RlbCBiZWZvcmUgcmVuZGVyaW5nLCBhcyB3ZSBuZWVkIHRvIHdhaXQgZm9yIFVzZXIgSW5wdXRcclxuICAgICAgICBwdWJsaWMgdXBkYXRlRGlyZWN0aW9uTGlua3NXaXRoTGF0TG5nU291cmNlQWRkcmVzcyhjb250YWluZXI6IEpRdWVyeSwgc291cmNlTG9jYXRpb246IGdvb2dsZS5tYXBzLkxhdExuZykge1xyXG5cclxuICAgICAgICAgICAgaWYgKCFzb3VyY2VMb2NhdGlvbikgeyByZXR1cm47IH1cclxuXHJcbiAgICAgICAgICAgIHZhciBjdGFEaXJzID0gY29udGFpbmVyLmZpbmQoJy5jdGFHb29nbGVEaXInKTtcclxuXHJcbiAgICAgICAgICAgIGN0YURpcnMuZWFjaCgoaW5kLCBjdGFEaXIpID0+IHtcclxuICAgICAgICAgICAgICAgIHZhciBocmVmID0gJChjdGFEaXIpLmF0dHIoJ2hyZWYnKTtcclxuICAgICAgICAgICAgICAgIGlmIChocmVmLmluZGV4T2YoJ3NhZGRyJykgPT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJChjdGFEaXIpLmF0dHIoJ2hyZWYnLCB0aGlzLmdldERpcmVjdGlvbkxhdExuZ1NvdXJjZUFkZHJlc3MoaHJlZiwgc291cmNlTG9jYXRpb24pKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZ2V0RGlyZWN0aW9uTGF0TG5nU291cmNlQWRkcmVzcyhiYXNlVXJsOiBzdHJpbmcsIHNvdXJjZUxvY2F0aW9uOiBnb29nbGUubWFwcy5MYXRMbmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGAke2Jhc2VVcmx9JnNhZGRyPSR7c291cmNlTG9jYXRpb24ubGF0KCl9LCR7c291cmNlTG9jYXRpb24ubG5nKCl9YDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L012Yy9Db21wb3NlckNsaWVudC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvQ29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL1N0b3JlTG9jYXRvci9Tb3VyY2UvVHlwZVNjcmlwdC9TZXJ2aWNlcy9HZW9Mb2NhdGlvblNlcnZpY2UudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgU3RvcmVzRGlyZWN0b3J5Q29udHJvbGxlciBleHRlbmRzIENvbnRyb2xsZXIge1xyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgX2dlb1NlcnZpY2U6IEdlb0xvY2F0aW9uU2VydmljZSA9IG5ldyBHZW9Mb2NhdGlvblNlcnZpY2UoKTtcclxuICAgICAgICBwcml2YXRlIF9zZWFyY2hCb3g6IGdvb2dsZS5tYXBzLnBsYWNlcy5TZWFyY2hCb3g7XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKCkge1xyXG4gICAgICAgICAgICBzdXBlci5pbml0aWFsaXplKCk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5pdGlhbGl6ZVNlYXJjaEJveCgpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5zZXRHb29nbGVEaXJlY3Rpb25MaW5rcygpO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBpbml0aWFsaXplU2VhcmNoQm94KCkge1xyXG4gICAgICAgICAgICB2YXIgaW5wdXQgPSA8SFRNTElucHV0RWxlbWVudD50aGlzLmNvbnRleHQuY29udGFpbmVyLmZpbmQoJyNzdG9yZURpcmVjdG9yeVNlYXJjaElucHV0JylbMF07XHJcbiAgICAgICAgICAgIHRoaXMuX3NlYXJjaEJveCA9IG5ldyBnb29nbGUubWFwcy5wbGFjZXMuU2VhcmNoQm94KGlucHV0KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEFjdGlvbiBvbiBDbGljayBvbiBsb2NhdG9yIGljb24gaW4gc2VhcmNoIGJveFxyXG4gICAgICAgIHB1YmxpYyBjdXJyZW50TG9jYXRpb25BY3Rpb24oYWN0aW9uQ29udGV4dDogSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0KSB7XHJcbiAgICAgICAgICAgIGFjdGlvbkNvbnRleHQuZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgdGhpcy5jb250ZXh0LmNvbnRhaW5lci5maW5kKCdmb3JtJykuc3VibWl0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgc2V0R29vZ2xlRGlyZWN0aW9uTGlua3MoKSB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2VvU2VydmljZS5nZW9sb2NhdGUoKS50aGVuKGxvY2F0aW9uID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2dlb1NlcnZpY2UudXBkYXRlRGlyZWN0aW9uTGlua3NXaXRoTGF0TG5nU291cmNlQWRkcmVzcyh0aGlzLmNvbnRleHQuY29udGFpbmVyLCBsb2NhdGlvbik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgR2V0U3RvcmVzSW52ZW50b3J5UGFyYW0ge1xyXG4gICAgICAgIFNrdTogc3RyaW5nO1xyXG4gICAgICAgIFNlYXJjaFBvaW50OiBnb29nbGUubWFwcy5MYXRMbmc7XHJcbiAgICAgICAgUGFnZTogbnVtYmVyO1xyXG4gICAgICAgIFBhZ2VzaXplOiBudW1iZXI7XHJcbiAgICB9XHJcbn0iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vR2V0U3RvcmVzSW52ZW50b3J5UGFyYW0udHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIGV4cG9ydCBpbnRlcmZhY2UgSVN0b3JlSW52ZW50b3J5U2VydmljZSB7XHJcbiAgICAgICAgZ2V0U3RvcmVzSW52ZW50b3J5KHBhcmFtOiBHZXRTdG9yZXNJbnZlbnRvcnlQYXJhbSk6IFEuUHJvbWlzZTxhbnk+O1xyXG5cclxuICAgICAgICBnZXREZWZhdWx0QWRkcmVzcygpOiBRLlByb21pc2U8YW55PjtcclxuXHJcbiAgICAgICAgZ2V0U2t1U2VsZWN0aW9uKHByb2R1Y3RJZDogc3RyaW5nKTogUS5Qcm9taXNlPGFueT47XHJcbiAgICB9XHJcbn0iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L012Yy9JQ29udHJvbGxlckNvbnRleHQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVzY3JpcHQvTXZjL0NvbXBvc2VyQ2xpZW50LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L0V2ZW50cy9FdmVudEh1Yi50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL0lTdG9yZUludmVudG9yeVNlcnZpY2UudHMnIC8+XHJcblxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIFN0b3JlSW52ZW50b3J5U2VydmljZSBpbXBsZW1lbnRzIElTdG9yZUludmVudG9yeVNlcnZpY2Uge1xyXG5cclxuICAgICAgICBwdWJsaWMgZ2V0U3RvcmVzSW52ZW50b3J5KHBhcmFtOiBHZXRTdG9yZXNJbnZlbnRvcnlQYXJhbSk6IFEuUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICAgICAgcmV0dXJuIENvbXBvc2VyQ2xpZW50LnBvc3QoJy9hcGkvc3RvcmVpbnZlbnRvcnkvc3RvcmVzaW52ZW50b3J5JywgcGFyYW0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGdldERlZmF1bHRBZGRyZXNzKCk6IFEuUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICAgICAgcmV0dXJuIENvbXBvc2VyQ2xpZW50LmdldCgnL2FwaS9jdXN0b21lci9nZXRkZWZhdWx0YWRkcmVzcycpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGdldFNrdVNlbGVjdGlvbihwcm9kdWN0SWQ6IHN0cmluZyk6IFEuUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBQcm9kdWN0SWQ6IHByb2R1Y3RJZFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICByZXR1cm4gQ29tcG9zZXJDbGllbnQucG9zdCgnL2FwaS9wcm9kdWN0L3ZhcmlhbnRTZWxlY3Rpb24nLCBkYXRhKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9Db250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L012Yy9JQ29udHJvbGxlckFjdGlvbkNvbnRleHQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9TZXJ2aWNlcy9TdG9yZUludmVudG9yeVNlcnZpY2UudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vU3RvcmVMb2NhdG9yL1NvdXJjZS9UeXBlU2NyaXB0L1NlcnZpY2VzL0dlb0xvY2F0aW9uU2VydmljZS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9DYWNoZS9DYWNoZVByb3ZpZGVyLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIFN0b3JlSW52ZW50b3J5Q29udHJvbGxlciBleHRlbmRzIENvbnRyb2xsZXIge1xyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgX2NvbmNlcm46IHN0cmluZyA9ICdTdG9yZUludmVudG9yeV8nO1xyXG4gICAgICAgIHByb3RlY3RlZCBfc2VydmljZTogSVN0b3JlSW52ZW50b3J5U2VydmljZSA9IG5ldyBTdG9yZUludmVudG9yeVNlcnZpY2UoKTtcclxuICAgICAgICBwcm90ZWN0ZWQgX2dlb1NlcnZpY2U6IEdlb0xvY2F0aW9uU2VydmljZSA9IG5ldyBHZW9Mb2NhdGlvblNlcnZpY2UoKTtcclxuICAgICAgICBwcm90ZWN0ZWQgX3NlYXJjaFBvaW50QWRkcmVzc0NhY2hlS2V5OiBzdHJpbmcgPSAnU3RvcmVMb2NhdG9yU2VhcmNoQWRkcmVzcyc7XHJcbiAgICAgICAgcHJvdGVjdGVkIGNhY2hlID0gQ2FjaGVQcm92aWRlci5pbnN0YW5jZSgpLmRlZmF1bHRDYWNoZTtcclxuICAgICAgICBwcml2YXRlIF9zZWFyY2hCb3g6IGdvb2dsZS5tYXBzLnBsYWNlcy5TZWFyY2hCb3g7XHJcbiAgICAgICAgcHJpdmF0ZSBfc2VhcmNoQm94SlE6IEpRdWVyeTtcclxuICAgICAgICBwcml2YXRlIF9zZWFyY2hQb2ludDogZ29vZ2xlLm1hcHMuTGF0TG5nO1xyXG4gICAgICAgIHByaXZhdGUgX3NlbGVjdGVkU2t1OiBzdHJpbmc7XHJcbiAgICAgICAgcHJpdmF0ZSBfaXNBdXRoZW50aWNhdGVkOiBib29sZWFuO1xyXG4gICAgICAgIHByaXZhdGUgX3BhZ2VTaXplOiBudW1iZXI7XHJcbiAgICAgICAgcHJpdmF0ZSBfcHJvZHVjdElkOiBhbnk7XHJcbiAgICAgICAgcHJpdmF0ZSBfZ2V0Q3VycmVudExvY2F0aW9uOiBRLkRlZmVycmVkPGdvb2dsZS5tYXBzLkxhdExuZz4gPSBRLmRlZmVyPGdvb2dsZS5tYXBzLkxhdExuZz4oKTtcclxuXHJcbiAgICAgICAgcHVibGljIGdldEN1cnJlbnRMb2NhdGlvbigpOiBRLlByb21pc2U8Z29vZ2xlLm1hcHMuTGF0TG5nPiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9nZXRDdXJyZW50TG9jYXRpb24ucHJvbWlzZTtcclxuICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICBwdWJsaWMgaW5pdGlhbGl6ZSgpIHtcclxuICAgICAgICAgICAgdmFyIGdldERlZmF1bHRzVGFza3M6IFEuUHJvbWlzZTxhbnk+W10gPSBbXTtcclxuICAgICAgICAgICAgdmFyIGdldERlZmF1bHRBZGRyZXNzVGFzazogUS5Qcm9taXNlPGFueT47XHJcblxyXG4gICAgICAgICAgICBzdXBlci5pbml0aWFsaXplKCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJTdWJzY3JpcHRpb25zKCk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5pdFNlYXJjaEJveCgpO1xyXG4gICAgICAgICAgICB0aGlzLmdldERhdGFGcm9tQ29udGV4dFZpZXdNb2RlbCgpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCF0aGlzLl9zZWxlY3RlZFNrdSAmJiB0aGlzLl9wcm9kdWN0SWQpIHtcclxuICAgICAgICAgICAgICAgIGdldERlZmF1bHRzVGFza3MucHVzaCh0aGlzLl9zZXJ2aWNlLmdldFNrdVNlbGVjdGlvbih0aGlzLl9wcm9kdWN0SWQpLnRoZW4ocmVzdWx0ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9zZWxlY3RlZFNrdSA9IHJlc3VsdC5Ta3U7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGdldERlZmF1bHRzVGFza3MucHVzaCh0aGlzLmdldERlZmF1bHRBZGRyZXNzKCkpO1xyXG5cclxuICAgICAgICAgICAgUS5hbGwoZ2V0RGVmYXVsdHNUYXNrcykudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmdldFN0b3Jlc0ludmVudG9yeSgpO1xyXG4gICAgICAgICAgICB9KS5mYWlsKHJlYXNvbiA9PiBjb25zb2xlLmxvZyh0aGlzLl9jb25jZXJuICsgcmVhc29uKSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9nZW9TZXJ2aWNlLmdlb2xvY2F0ZSgpLnRoZW4obG9jYXRpb24gPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fZ2V0Q3VycmVudExvY2F0aW9uLnJlc29sdmUobG9jYXRpb24pO1xyXG4gICAgICAgICAgICB9LCByZWFzb24gPT4gdGhpcy5fZ2V0Q3VycmVudExvY2F0aW9uLnJlc29sdmUobnVsbCkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSByZWdpc3RlclN1YnNjcmlwdGlvbnMoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIuc3Vic2NyaWJlKCdwcm9kdWN0RGV0YWlsU2VsZWN0ZWRWYXJpYW50SWRDaGFuZ2VkJywgZSA9PiB0aGlzLm9uU2VsZWN0ZWRWYXJpYW50SWRDaGFuZ2VkKGUpKTtcclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5zdWJzY3JpYmUoJ2ludmVudG9yeVNlYXJjaFBvaW50Q2hhbmdlZCcsIGUgPT4gdGhpcy5zZWFyY2hQb2ludENoYW5nZWQoZSkpO1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRleHQud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2hhc2hjaGFuZ2UnLCAoKSA9PiB0aGlzLm9uSGFzaENoYW5nZWQoKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGdldERhdGFGcm9tQ29udGV4dFZpZXdNb2RlbCgpIHtcclxuICAgICAgICAgICAgdGhpcy5fc2VsZWN0ZWRTa3UgPSB0aGlzLmNvbnRleHQudmlld01vZGVsLnNlbGVjdGVkU2t1O1xyXG4gICAgICAgICAgICB0aGlzLl9pc0F1dGhlbnRpY2F0ZWQgPSB0aGlzLmNvbnRleHQudmlld01vZGVsLmlzQXV0aGVudGljYXRlZDtcclxuICAgICAgICAgICAgdGhpcy5fcGFnZVNpemUgPSB0aGlzLmNvbnRleHQudmlld01vZGVsLnBhZ2VTaXplO1xyXG4gICAgICAgICAgICB0aGlzLl9wcm9kdWN0SWQgPSB0aGlzLmNvbnRleHQudmlld01vZGVsLnByb2R1Y3RJZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBpbml0U2VhcmNoQm94KCkge1xyXG4gICAgICAgICAgICB0aGlzLl9zZWFyY2hCb3hKUSA9IHRoaXMuY29udGV4dC5jb250YWluZXIuZmluZCgnaW5wdXRbbmFtZT1cInN0b3JlSW52ZW50b3J5U2VhcmNoSW5wdXRcIl0nKTtcclxuICAgICAgICAgICAgdGhpcy5fc2VhcmNoQm94ID0gbmV3IGdvb2dsZS5tYXBzLnBsYWNlcy5TZWFyY2hCb3goPEhUTUxJbnB1dEVsZW1lbnQ+dGhpcy5fc2VhcmNoQm94SlFbMF0pO1xyXG4gICAgICAgICAgICB0aGlzLl9zZWFyY2hCb3guYWRkTGlzdGVuZXIoJ3BsYWNlc19jaGFuZ2VkJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdmFyIHBsYWNlcyA9IHRoaXMuX3NlYXJjaEJveC5nZXRQbGFjZXMoKTtcclxuICAgICAgICAgICAgICAgIGlmIChwbGFjZXMgJiYgcGxhY2VzLmxlbmd0aCAmJiBwbGFjZXNbMF0uZ2VvbWV0cnkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goJ2ludmVudG9yeVNlYXJjaFBvaW50Q2hhbmdlZCcsIHsgZGF0YTogcGxhY2VzWzBdLmdlb21ldHJ5LmxvY2F0aW9uIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBzZWFyY2hQb2ludENoYW5nZWQoZTogSUV2ZW50SW5mb3JtYXRpb24pIHtcclxuICAgICAgICAgICAgdGhpcy5fc2VhcmNoUG9pbnQgPSBlLmRhdGE7XHJcbiAgICAgICAgICAgIHRoaXMuY2FjaGUuc2V0KHRoaXMuX3NlYXJjaFBvaW50QWRkcmVzc0NhY2hlS2V5LCB0aGlzLl9zZWFyY2hCb3hKUS52YWwoKSk7XHJcbiAgICAgICAgICAgIHRoaXMuZ2V0U3RvcmVzSW52ZW50b3J5KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb25TZWxlY3RlZFZhcmlhbnRJZENoYW5nZWQoZTogSUV2ZW50SW5mb3JtYXRpb24pIHtcclxuICAgICAgICAgICAgdGhpcy5fc2VsZWN0ZWRTa3UgPSBlLmRhdGEuc2VsZWN0ZWRTa3U7XHJcbiAgICAgICAgICAgIHRoaXMuZ2V0U3RvcmVzSW52ZW50b3J5KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb25IYXNoQ2hhbmdlZCgpIHtcclxuICAgICAgICAgICAgaWYgKGxvY2F0aW9uLmhhc2ggPT09ICcjc3RvcmVpbnZlbnRvcnknICYmICF0aGlzLl9zZWFyY2hQb2ludCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRDdXJyZW50TG9jYXRpb24oKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGN1cnJlbnRMb2NhdGlvbiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50TG9jYXRpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3NlYXJjaFBvaW50ID0gY3VycmVudExvY2F0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5nZXRTdG9yZXNJbnZlbnRvcnkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX2dlb1NlcnZpY2UuZ2V0QWRkdHJlc3NCeUxvY2F0aW9uKGN1cnJlbnRMb2NhdGlvbikudGhlbihyZXN1bHQgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY2FjaGUuc2V0KHRoaXMuX3NlYXJjaFBvaW50QWRkcmVzc0NhY2hlS2V5LCByZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3NlYXJjaEJveEpRLnZhbChyZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGdldFN0b3Jlc0ludmVudG9yeSgpOiBRLlByb21pc2U8YW55PiB7XHJcbiAgICAgICAgICAgIHZhciBkZWJvdW5jZUhhbmRsZTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9zZWxlY3RlZFNrdSkge1xyXG4gICAgICAgICAgICAgICAgZGVib3VuY2VIYW5kbGUgPSBfLmRlYm91bmNlKCgpID0+IHRoaXMucmVuZGVyKCdTdG9yZUludmVudG9yeUxpc3QnLCB7IElzTG9hZGluZzogdHJ1ZSB9KSwgMzAwKTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fc2VydmljZS5nZXRTdG9yZXNJbnZlbnRvcnkodGhpcy5nZXRTdG9yZXNJbnZlbnRvcnlQYXJhbSgpKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKHJlc3VsdCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlYm91bmNlSGFuZGxlLmNhbmNlbCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbmRlcignU3RvcmVJbnZlbnRvcnlMaXN0JywgcmVzdWx0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRHb29nbGVEaXJlY3Rpb25MaW5rcygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgLmZhaWwocmVhc29uID0+IGNvbnNvbGUubG9nKHJlYXNvbikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgbmV4dFBhZ2UoYWN0aW9uQ29udGV4dDogSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0KSB7XHJcblxyXG4gICAgICAgICAgICBhY3Rpb25Db250ZXh0LmV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHZhciBwYWdlOiBudW1iZXIgPSA8YW55PmFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHQuZGF0YSgncGFnZScpO1xyXG4gICAgICAgICAgICB2YXIgYnVzeSA9IHRoaXMuYXN5bmNCdXN5KHsgZWxlbWVudENvbnRleHQ6IGFjdGlvbkNvbnRleHQuZWxlbWVudENvbnRleHQgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9zZXJ2aWNlLmdldFN0b3Jlc0ludmVudG9yeSh0aGlzLmdldFN0b3Jlc0ludmVudG9yeVBhcmFtKHBhZ2UpKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4ocmVzdWx0ID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gYWN0aW9uQ29udGV4dC5lbGVtZW50Q29udGV4dFswXS5wYXJlbnRFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0YXJnZXRIdG1sID0gdGhpcy5nZXRSZW5kZXJlZFRlbXBsYXRlQ29udGVudHMoJ1N0b3JlSW52ZW50b3J5TGlzdCcsIHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnVzeS5kb25lKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0YXJnZXQpLnJlcGxhY2VXaXRoKHRhcmdldEh0bWwpLnN0b3AoKS5mYWRlSW4oKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRHb29nbGVEaXJlY3Rpb25MaW5rcygpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5mYWlsKHJlYXNvbiA9PiBjb25zb2xlLmxvZyhyZWFzb24pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBzZXRHb29nbGVEaXJlY3Rpb25MaW5rcygpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDdXJyZW50TG9jYXRpb24oKS50aGVuKGxvY2F0aW9uID0+IHtcclxuXHJcbiAgICAgICAgICAgICAgICB0aGlzLl9nZW9TZXJ2aWNlLnVwZGF0ZURpcmVjdGlvbkxpbmtzV2l0aExhdExuZ1NvdXJjZUFkZHJlc3ModGhpcy5jb250ZXh0LmNvbnRhaW5lciwgbG9jYXRpb24pO1xyXG5cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgZ2V0U3RvcmVzSW52ZW50b3J5UGFyYW0ocGFnZTogbnVtYmVyID0gMSkge1xyXG4gICAgICAgICAgICB2YXIgcGFyYW0gPSBuZXcgR2V0U3RvcmVzSW52ZW50b3J5UGFyYW0oKTtcclxuICAgICAgICAgICAgcGFyYW0uU2t1ID0gdGhpcy5fc2VsZWN0ZWRTa3U7XHJcbiAgICAgICAgICAgIHBhcmFtLlNlYXJjaFBvaW50ID0gdGhpcy5fc2VhcmNoUG9pbnQ7XHJcbiAgICAgICAgICAgIHBhcmFtLlBhZ2UgPSBwYWdlO1xyXG4gICAgICAgICAgICBwYXJhbS5QYWdlc2l6ZSA9IHRoaXMuX3BhZ2VTaXplO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHBhcmFtO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGdldERlZmF1bHRBZGRyZXNzKCk6IFEuUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICAgICAgLy8gdHJ5IGdldCBhZGRyZXNzIGZyb20gbG9jYWwgc3RvcmFnZVxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jYWNoZS5nZXQ8YW55Pih0aGlzLl9zZWFyY2hQb2ludEFkZHJlc3NDYWNoZUtleSlcclxuICAgICAgICAgICAgICAgIC50aGVuKGNhY2hlZEFkZHIgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3NlYXJjaEJveEpRLnZhbChjYWNoZWRBZGRyKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2VvU2VydmljZS5nZXRMb2NhdGlvbkJ5QWRkcmVzcyhjYWNoZWRBZGRyKTtcclxuICAgICAgICAgICAgICAgIH0sIChyZWFzb24pID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB0cnkgZ2V0IGN1c3RvbWVyIGRlZmF1bHQgZGVsaXZlcnkgYWRkcmVzc1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9pc0F1dGhlbnRpY2F0ZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3NlcnZpY2UuZ2V0RGVmYXVsdEFkZHJlc3MoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnRoZW4oZGVmYXVsdEFkZHIgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmb3JtYXR0ZWRBZGRyZXNzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID0gYCR7ZGVmYXVsdEFkZHIuQ2l0eX0sICR7ZGVmYXVsdEFkZHIuUmVnaW9uQ29kZX0gJHtkZWZhdWx0QWRkci5Qb3N0YWxDb2RlfSwgJHtkZWZhdWx0QWRkci5Db3VudHJ5Q29kZX1gO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX3NlYXJjaEJveEpRLnZhbChmb3JtYXR0ZWRBZGRyZXNzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2VvU2VydmljZS5nZXRMb2NhdGlvbkJ5QWRkcmVzcyhmb3JtYXR0ZWRBZGRyZXNzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAudGhlbihsb2NhdGlvbkJ5QWRkcmVzcyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2VhcmNoUG9pbnQgPSBsb2NhdGlvbkJ5QWRkcmVzcztcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElNYXBPcHRpb25zIHtcclxuICAgICAgICBtYXBDYW52YXM6IEhUTUxFbGVtZW50O1xyXG4gICAgICAgIG9wdGlvbnM6IGdvb2dsZS5tYXBzLk1hcE9wdGlvbnM7XHJcbiAgICAgICAgaW5mb1dpbmRvd01heFdpZHRoPzogbnVtYmVyO1xyXG4gICAgfVxyXG59XHJcbiIsIm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJU3RvcmVMb2NhdG9ySW5pdGlhbGl6YXRpb25PcHRpb25zIHtcclxuICAgICAgICBtYXBJZDogc3RyaW5nO1xyXG4gICAgICAgIGNvb3JkaW5hdGVzOiB7XHJcbiAgICAgICAgICAgIExhdDogbnVtYmVyO1xyXG4gICAgICAgICAgICBMbmc6IG51bWJlcjtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHNob3dOZWFyZXN0U3RvcmVJbmZvOiBib29sZWFuO1xyXG4gICAgICAgIHpvb21MZXZlbD86IG51bWJlcjtcclxuICAgICAgICBtYXJrZXJQYWRkaW5nPzogbnVtYmVyO1xyXG4gICAgfVxyXG59IiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy9nb29nbGVtYXBzL2dvb2dsZS5tYXBzLmQudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgTWFya2VyIHtcclxuICAgICAgICBwcml2YXRlIF9rZXk6IGFueTtcclxuICAgICAgICBwcml2YXRlIF92YWx1ZTogTWFya2VyV2l0aExhYmVsO1xyXG4gICAgICAgIHByaXZhdGUgX3N0b3JlTnVtYmVyOiBzdHJpbmc7XHJcbiAgICAgICAgcHJpdmF0ZSBfaXNDbHVzdGVyOiBib29sZWFuO1xyXG5cclxuICAgICAgICBjb25zdHJ1Y3RvcihtYXJrZXI6IE1hcmtlcldpdGhMYWJlbCkge1xyXG4gICAgICAgICAgICB0aGlzLl92YWx1ZSA9IG1hcmtlcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGdldCBrZXkoKTogYW55IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2tleTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGdldCB2YWx1ZSgpOiBNYXJrZXJXaXRoTGFiZWwge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdmFsdWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBzZXQga2V5KGtleTogYW55KSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2tleSA9IGtleTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNldCB2YWx1ZShtYXJrZXI6IE1hcmtlcldpdGhMYWJlbCkge1xyXG4gICAgICAgICAgICB0aGlzLl92YWx1ZSA9IG1hcmtlcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGdldCBzdG9yZU51bWJlcigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3N0b3JlTnVtYmVyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZXQgc3RvcmVOdW1iZXIodmFsdWU6IHN0cmluZykge1xyXG4gICAgICAgICAgICB0aGlzLl9zdG9yZU51bWJlciA9IHZhbHVlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZ2V0IGlzQ2x1c3RlcigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2lzQ2x1c3RlcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNldCBpc0NsdXN0ZXIodmFsdWU6IGJvb2xlYW4pIHtcclxuICAgICAgICAgICAgdGhpcy5faXNDbHVzdGVyID0gdmFsdWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgc2V0TWFwKG1hcCkge1xyXG4gICAgICAgICAgICB0aGlzLl92YWx1ZS5zZXRNYXAobWFwKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzZXRQb3NpdGlvbihwb3NpdGlvbjogZ29vZ2xlLm1hcHMuTGF0TG5nKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3ZhbHVlLnNldFBvc2l0aW9uKHBvc2l0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vTWFya2VyLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgZXhwb3J0IGNsYXNzIE1hcmtlclBvb2wge1xyXG4gICAgICAgIHByaXZhdGUgbWFya2VyczogTWFya2VyW10gPSBbXTtcclxuICAgICAgICBwcml2YXRlIGluZGV4ZWRNYXJrZXJzQnlLZXkgPSB7fTtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBfbWFwOiBnb29nbGUubWFwcy5NYXA7XHJcbiAgICAgICAgcHJpdmF0ZSBfb25NYXJrZXJDcmVhdGU6IGFueTtcclxuXHJcbiAgICAgICAgY29uc3RydWN0b3IobWFwOiBnb29nbGUubWFwcy5NYXAsIG9uTWFya2VyQ3JlYXRlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX21hcCA9IG1hcDtcclxuICAgICAgICAgICAgdGhpcy5fb25NYXJrZXJDcmVhdGUgPSBvbk1hcmtlckNyZWF0ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBnZXRNYXJrZXJzKCk6IGFueSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLm1hcmtlcnM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZ2V0KGlzQ2x1c3RlcjogYm9vbGVhbiA9IGZhbHNlKTogTWFya2VyIHtcclxuICAgICAgICAgICAgdmFyIG1hcmtlciA9IGlzQ2x1c3RlciA/IHRoaXMuY3JlYXRlQ2x1c3Rlck1hcmtlcigpIDogdGhpcy5jcmVhdGVNYXJrZXIoKTtcclxuICAgICAgICAgICAgbWFya2VyLmlzQ2x1c3RlciA9IGlzQ2x1c3RlcjtcclxuICAgICAgICAgICAgdGhpcy5fb25NYXJrZXJDcmVhdGUobWFya2VyKTtcclxuICAgICAgICAgICAgdGhpcy5tYXJrZXJzLnB1c2gobWFya2VyKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBtYXJrZXI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZ2V0RXhpc3Rpbmcoa2V5KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmluZGV4ZWRNYXJrZXJzQnlLZXlba2V5XTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbmRleChtYXJrZXI6IE1hcmtlcikge1xyXG4gICAgICAgICAgICB0aGlzLmluZGV4ZWRNYXJrZXJzQnlLZXlbbWFya2VyLmtleV0gPSBtYXJrZXI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgaGFzQ2x1c3RlcnMoKSB7XHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5tYXJrZXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5tYXJrZXJzW2ldICYmIHRoaXMubWFya2Vyc1tpXS5pc0NsdXN0ZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgY3JlYXRlTWFya2VyKCkge1xyXG4gICAgICAgICAgICB2YXIgbWFya2VyID0gbmV3IE1hcmtlcldpdGhMYWJlbCh7XHJcbiAgICAgICAgICAgICAgICBtYXA6IHRoaXMuX21hcCxcclxuICAgICAgICAgICAgICAgIGxhYmVsSW5CYWNrZ3JvdW5kOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGxhYmVsQ2xhc3M6ICdzdG9yZS1tYXJrZXInLFxyXG4gICAgICAgICAgICAgICAgaWNvbjogJy9VSS5QYWNrYWdlL0ltYWdlcy9tYXAvbWFya2VyLnBuZycsXHJcbiAgICAgICAgICAgICAgICBsYWJlbEFuY2hvcjogbmV3IGdvb2dsZS5tYXBzLlBvaW50KDEyLCA0MiksXHJcbiAgICAgICAgICAgICAgICBsYWJlbFZpc2libGU6IGZhbHNlXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBNYXJrZXIobWFya2VyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBjcmVhdGVDbHVzdGVyTWFya2VyKCkge1xyXG4gICAgICAgICAgICB2YXIgbWFya2VyID0gbmV3IE1hcmtlcldpdGhMYWJlbCh7XHJcbiAgICAgICAgICAgICAgICBtYXA6IHRoaXMuX21hcCxcclxuICAgICAgICAgICAgICAgIGxhYmVsSW5CYWNrZ3JvdW5kOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGxhYmVsQ2xhc3M6ICdzdG9yZS1jbHVzdGVyLW1hcmtlcicsXHJcbiAgICAgICAgICAgICAgICBpY29uOiAnL1VJLlBhY2thZ2UvSW1hZ2VzL21hcC9jbHVzdGVyLnBuZycsXHJcbiAgICAgICAgICAgICAgICBsYWJlbEFuY2hvcjogbmV3IGdvb2dsZS5tYXBzLlBvaW50KDEyLCAzMCksXHJcbiAgICAgICAgICAgICAgICBsYWJlbFZpc2libGU6IGZhbHNlXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBNYXJrZXIobWFya2VyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyByZWxlYXNlQWxsKCkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMubWFya2Vycy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMubWFya2Vyc1tpXSkgeyB0aGlzLm1hcmtlcnNbaV0uc2V0TWFwKG51bGwpOyB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZGVsZXRlIHRoaXMubWFya2VycztcclxuICAgICAgICAgICAgdGhpcy5tYXJrZXJzID0gW107XHJcbiAgICAgICAgICAgIHRoaXMuaW5kZXhlZE1hcmtlcnNCeUtleSA9IHt9O1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHB1YmxpYyByZWxlYXNlQnlJbmRleChpbmRleDogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIHZhciBtYXJrZXIgPSB0aGlzLmluZGV4ZWRNYXJrZXJzQnlLZXlbaW5kZXhdO1xyXG4gICAgICAgICAgICBpZiAobWFya2VyKSB7XHJcbiAgICAgICAgICAgICAgICBkZWxldGUgdGhpcy5pbmRleGVkTWFya2Vyc0J5S2V5W2luZGV4XTtcclxuICAgICAgICAgICAgICAgIG1hcmtlci5zZXRNYXAobnVsbCk7XHJcblxyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHRoaXMubWFya2Vyc1t0aGlzLm1hcmtlcnMuaW5kZXhPZihtYXJrZXIpXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHJlbGVhc2VDbHVzdGVycygpIHtcclxuICAgICAgICAgICAgdGhpcy5tYXJrZXJzLmZvckVhY2gobXIgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKG1yLmlzQ2x1c3Rlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVsZWFzZUJ5SW5kZXgobXIua2V5KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgcmVsZWFzZU1hcmtlcnNCeUlkcyhpc2NsdXN0ZXI6IGJvb2xlYW4sIGlkOiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgaWYgKCFpc2NsdXN0ZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubWFya2Vycy5mb3JFYWNoKG1yID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobXIgJiYgbXIuaXNDbHVzdGVyICYmIG1yLnN0b3JlTnVtYmVyLmluZGV4T2YoaWQpID49IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWxlYXNlQnlJbmRleChtci5rZXkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1hcmtlcnMuZm9yRWFjaChtciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1yICYmICFtci5pc0NsdXN0ZXIgJiYgaWQuaW5kZXhPZihtci5zdG9yZU51bWJlcikgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlbGVhc2VCeUluZGV4KG1yLmtleSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvR2VuZXJpY3MvQ29sbGVjdGlvbnMvSUhhc2h0YWJsZS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPSdJTWFwT3B0aW9ucy50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL01hcmtlclBvb2wudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgTWFwU2VydmljZSB7XHJcblxyXG4gICAgICAgIHByaXZhdGUgZXZlbnRIdWI6IElFdmVudEh1YjtcclxuICAgICAgICBwcml2YXRlIF9tYXA6IGdvb2dsZS5tYXBzLk1hcDtcclxuICAgICAgICBwcml2YXRlIF9tYXJrZXJQb29sOiBNYXJrZXJQb29sO1xyXG4gICAgICAgIHByaXZhdGUgX3ByZXZab29tOiBudW1iZXI7XHJcbiAgICAgICAgcHJpdmF0ZSBfY3VycmVudExvY2F0aW9uTWFya2VyOiBnb29nbGUubWFwcy5NYXJrZXI7XHJcbiAgICAgICAgcHJpdmF0ZSBfaW5mb3JtYXRpb25XaW5kb3c6IGdvb2dsZS5tYXBzLkluZm9XaW5kb3c7XHJcbiAgICAgICAgcHJpdmF0ZSBfcHJvamVjdGlvbk92ZXJsYXk6IGdvb2dsZS5tYXBzLk92ZXJsYXlWaWV3O1xyXG5cclxuICAgICAgICBwcml2YXRlIF9tYXBJbml0aWFsaXplZDogUS5EZWZlcnJlZDxNYXBTZXJ2aWNlPiA9IFEuZGVmZXI8TWFwU2VydmljZT4oKTtcclxuICAgICAgICBwcml2YXRlIF9tYXBJZGxlOiBRLkRlZmVycmVkPE1hcFNlcnZpY2U+ID0gUS5kZWZlcjxNYXBTZXJ2aWNlPigpO1xyXG4gICAgICAgIHByaXZhdGUgX21hcERyYWdFbmRlZDogUS5EZWZlcnJlZDxNYXBTZXJ2aWNlPiA9IFEuZGVmZXI8TWFwU2VydmljZT4oKTtcclxuXHJcbiAgICAgICAgY29uc3RydWN0b3IoZXZlbnRIdWI6IElFdmVudEh1Yikge1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViID0gZXZlbnRIdWI7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgaW5pdGlhbGl6ZShtYXBPcHRpb25zOiBJTWFwT3B0aW9ucykge1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fbWFwID0gbmV3IGdvb2dsZS5tYXBzLk1hcChtYXBPcHRpb25zLm1hcENhbnZhcywgbWFwT3B0aW9ucy5vcHRpb25zKTtcclxuICAgICAgICAgICAgdGhpcy5faW5mb3JtYXRpb25XaW5kb3cgPSBuZXcgZ29vZ2xlLm1hcHMuSW5mb1dpbmRvdyh7IG1heFdpZHRoOiBtYXBPcHRpb25zLmluZm9XaW5kb3dNYXhXaWR0aCB9KTtcclxuICAgICAgICAgICAgdGhpcy5fbWFya2VyUG9vbCA9IG5ldyBNYXJrZXJQb29sKHRoaXMuX21hcCwgKG1hcmtlcikgPT4geyB0aGlzLm9uTmV3TWFya2VyQ3JlYXRlZChtYXJrZXIpOyB9KTtcclxuICAgICAgICAgICAgdGhpcy5zZXRQcm9qZWN0aW9uT3ZlcmxheSgpO1xyXG5cclxuICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIodGhpcy5fbWFwLCAnY2xpY2snLCAoKSA9PiB0aGlzLl9pbmZvcm1hdGlvbldpbmRvdy5jbG9zZSgpKTtcclxuXHJcbiAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKHRoaXMuX21hcCwgJ3pvb21fY2hhbmdlZCcsICgpID0+IHRoaXMuX21hcmtlclBvb2wucmVsZWFzZUNsdXN0ZXJzKCkpO1xyXG5cclxuICAgICAgICAgICAgZ29vZ2xlLm1hcHMuZXZlbnQuYWRkTGlzdGVuZXIodGhpcy5fbWFwLCAnYm91bmRzX2NoYW5nZWQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1hcERyYWdFbmRlZCgpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goJ21hcEJvdW5kc1VwZGF0ZWQnLCB7IGRhdGE6IHRoaXMuX21hcC5nZXRCb3VuZHMoKSB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcih0aGlzLl9tYXAsICdpZGxlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFwSWRsZS5yZXNvbHZlKHRoaXMpO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKHRoaXMuX21hcCwgJ2RyYWdzdGFydCcsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21hcERyYWdFbmRlZCA9IFEuZGVmZXI8TWFwU2VydmljZT4oKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGdvb2dsZS5tYXBzLmV2ZW50LmFkZExpc3RlbmVyKHRoaXMuX21hcCwgJ2RyYWdlbmQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXBEcmFnRW5kZWQucmVzb2x2ZSh0aGlzKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9tYXBJbml0aWFsaXplZC5yZXNvbHZlKHRoaXMpO1xyXG4gICAgICAgICAgICB0aGlzLl9tYXBEcmFnRW5kZWQucmVzb2x2ZSh0aGlzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc2V0UHJvamVjdGlvbk92ZXJsYXkoKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX3Byb2plY3Rpb25PdmVybGF5ID0gbmV3IGdvb2dsZS5tYXBzLk92ZXJsYXlWaWV3KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3Byb2plY3Rpb25PdmVybGF5LmRyYXcgPSBmdW5jdGlvbiBuYW1lKCkge1xyXG4gICAgICAgICAgICAgICAgLy9cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdGhpcy5fcHJvamVjdGlvbk92ZXJsYXkuc2V0TWFwKHRoaXMuX21hcCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZ2V0TWFwKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbWFwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGdldEluZm9ybWF0aW9uV2luZG93KCk6IGdvb2dsZS5tYXBzLkluZm9XaW5kb3cge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5faW5mb3JtYXRpb25XaW5kb3c7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZ2V0Qm91bmRzKG1hcmtlclBhZGRpbmc/OiBudW1iZXIpOiBnb29nbGUubWFwcy5MYXRMbmdCb3VuZHMge1xyXG4gICAgICAgICAgICB2YXIgYm91bmRzID0gdGhpcy5fbWFwLmdldEJvdW5kcygpO1xyXG5cclxuICAgICAgICAgICAgaWYgKG1hcmtlclBhZGRpbmcpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0ciA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoYm91bmRzLmdldE5vcnRoRWFzdCgpLmxhdCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIGJvdW5kcy5nZXROb3J0aEVhc3QoKS5sbmcoKSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgYmwgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKGJvdW5kcy5nZXRTb3V0aFdlc3QoKS5sYXQoKSxcclxuICAgICAgICAgICAgICAgICAgICBib3VuZHMuZ2V0U291dGhXZXN0KCkubG5nKCkpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHByb2plY3Rpb24gPSB0aGlzLl9wcm9qZWN0aW9uT3ZlcmxheS5nZXRQcm9qZWN0aW9uKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHByb2plY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdHJQaXggPSBwcm9qZWN0aW9uLmZyb21MYXRMbmdUb0RpdlBpeGVsKHRyKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgYmxQaXggPSBwcm9qZWN0aW9uLmZyb21MYXRMbmdUb0RpdlBpeGVsKGJsKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYmxQaXgueSA9IGJsUGl4LnkgKyBtYXJrZXJQYWRkaW5nO1xyXG4gICAgICAgICAgICAgICAgICAgIHRyUGl4LnkgPSB0clBpeC55ICsgbWFya2VyUGFkZGluZztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN3ID0gcHJvamVjdGlvbi5mcm9tRGl2UGl4ZWxUb0xhdExuZyhibFBpeCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5lID0gcHJvamVjdGlvbi5mcm9tRGl2UGl4ZWxUb0xhdExuZyh0clBpeCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nQm91bmRzKHN3LCBuZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBib3VuZHM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZ2V0Wm9vbSgpOiBudW1iZXIge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fbWFwLmdldFpvb20oKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvbk5ld01hcmtlckNyZWF0ZWQobWFya2VyOiBNYXJrZXIpIHtcclxuXHJcbiAgICAgICAgICAgIGlmICghbWFya2VyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChtYXJrZXIuaXNDbHVzdGVyKSB7XHJcbiAgICAgICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXJrZXIudmFsdWUsICdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goJ2NsdXN0ZXJDbGljaycsIHsgZGF0YTogbWFya2VyIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBnb29nbGUubWFwcy5ldmVudC5hZGRMaXN0ZW5lcihtYXJrZXIudmFsdWUsICdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goJ21hcmtlckNsaWNrJywgeyBkYXRhOiBtYXJrZXIgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG1hcEluaXRpYWxpemVkKCk6IFEuUHJvbWlzZTxNYXBTZXJ2aWNlPiB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9tYXBJbml0aWFsaXplZC5wcm9taXNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG1hcElkbGUoKTogUS5Qcm9taXNlPE1hcFNlcnZpY2U+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX21hcElkbGUucHJvbWlzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBtYXBEcmFnRW5kZWQoKTogUS5Qcm9taXNlPE1hcFNlcnZpY2U+IHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX21hcERyYWdFbmRlZC5wcm9taXNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIGNlbnRlck1hcChzdG9yZUJvdW5kczogYW55KTogdm9pZCB7XHJcbiAgICAgICAgICAgIGlmIChzdG9yZUJvdW5kcyAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1hcElkbGUoKS50aGVuKFxyXG4gICAgICAgICAgICAgICAgICAgICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNvdXRoV2VzdCA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoc3RvcmVCb3VuZHMuU291dGhXZXN0LkxhdCwgc3RvcmVCb3VuZHMuU291dGhXZXN0LkxuZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBub3J0aEVhc3QgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKHN0b3JlQm91bmRzLk5vcnRoRWFzdC5MYXQsIHN0b3JlQm91bmRzLk5vcnRoRWFzdC5MbmcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYm91bmRzID0gbmV3IGdvb2dsZS5tYXBzLkxhdExuZ0JvdW5kcyhzb3V0aFdlc3QsIG5vcnRoRWFzdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX21hcC5maXRCb3VuZHMoYm91bmRzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWFwSWRsZSA9IFEuZGVmZXI8TWFwU2VydmljZT4oKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIG9wZW5JbmZvcm1hdGlvbldpbmRvdyhjb250ZW50OiBhbnksIGFuY2hvcj86IGFueSkge1xyXG4gICAgICAgICAgICB0aGlzLl9pbmZvcm1hdGlvbldpbmRvdy5zZXRDb250ZW50KGNvbnRlbnQpO1xyXG4gICAgICAgICAgICB0aGlzLl9pbmZvcm1hdGlvbldpbmRvdy5vcGVuKHRoaXMuX21hcCwgYW5jaG9yKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBzZXRMb2NhdGlvbkluTWFwKHBvaW50OiBnb29nbGUubWFwcy5MYXRMbmcsIHpvb21MZXZlbCA9IDExKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWFwSWRsZSgpLnRoZW4oXHJcbiAgICAgICAgICAgICAgICAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWFwLnNldENlbnRlcihwb2ludCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWFwLnNldFpvb20oem9vbUxldmVsKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9tYXBJZGxlID0gUS5kZWZlcjxNYXBTZXJ2aWNlPigpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZXh0ZW5kQm91bmRzKHBvaW50MTogZ29vZ2xlLm1hcHMuTGF0TG5nLCBwb2ludDI6IGdvb2dsZS5tYXBzLkxhdExuZykge1xyXG4gICAgICAgICAgICB0aGlzLm1hcElkbGUoKS50aGVuKFxyXG4gICAgICAgICAgICAgICAgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBib3VuZHM6IGdvb2dsZS5tYXBzLkxhdExuZ0JvdW5kcyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmdCb3VuZHMoKTtcclxuICAgICAgICAgICAgICAgICAgICBib3VuZHMuZXh0ZW5kKHBvaW50MSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYm91bmRzLmV4dGVuZChwb2ludDIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21hcC5maXRCb3VuZHMoYm91bmRzKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9tYXAuc2V0Q2VudGVyKGJvdW5kcy5nZXRDZW50ZXIoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWFwSWRsZSA9IFEuZGVmZXI8TWFwU2VydmljZT4oKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHB1YmxpYyBjcmVhdGVNYXJrZXJPbk1hcChsb2NhdGlvbjogZ29vZ2xlLm1hcHMuTGF0TG5nLCB0aXRsZTogc3RyaW5nKTogZ29vZ2xlLm1hcHMuTWFya2VyIHtcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBnb29nbGUubWFwcy5NYXJrZXIoe1xyXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IGxvY2F0aW9uLFxyXG4gICAgICAgICAgICAgICAgbWFwOiB0aGlzLl9tYXAsXHJcbiAgICAgICAgICAgICAgICB0aXRsZTogdGl0bGUsXHJcbiAgICAgICAgICAgICAgICBpY29uOiAnaHR0cHM6Ly9tYXBzLmdvb2dsZS5jb20vbWFwZmlsZXMvbWFya2VyX29yYW5nZS5wbmcnXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHVibGljIHNldE1hcmtlcnMobWFya2VySW5mb3M6IGFueVtdLCBpc1NlYXJjaDogYm9vbGVhbiA9IGZhbHNlKTogdm9pZCB7XHJcblxyXG4gICAgICAgICAgICB2YXIgY3VyWm9vbSA9IHRoaXMuZ2V0Wm9vbSgpO1xyXG4gICAgICAgICAgICB2YXIgYWN0aW9uID0gdGhpcy5fcHJldlpvb20gPT09IGN1clpvb20gPyAnUEFOJyA6IHRoaXMuX3ByZXZab29tIDwgY3VyWm9vbSA/ICdaT09NX0lOJyA6ICdaT09NX09VVCc7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXRoaXMuX21hcmtlclBvb2wuaGFzQ2x1c3RlcnMoKSAmJiBhY3Rpb24gPT09ICdaT09NX0lOJykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fbWFya2VyUG9vbC5yZWxlYXNlQWxsKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGlzU2VhcmNoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9tYXJrZXJQb29sLnJlbGVhc2VBbGwoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5fcHJldlpvb20gPSBjdXJab29tO1xyXG5cclxuICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm1SZXN1bHQobWFya2VySW5mb3MsIHRoaXMuX21hcmtlclBvb2wsIGFjdGlvbilcclxuICAgICAgICAgICAgICAgIC50aGVuKChuZXdNYXJrZXJzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3TWFya2Vycy5mb3JFYWNoKG0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtLnZhbHVlLmxhYmVsVmlzaWJsZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgdHJhbnNmb3JtUmVzdWx0KHJlc3VsdCwgbWFya2VyUG9vbDogTWFya2VyUG9vbCwgYWN0aW9uKTogUS5Qcm9taXNlPGFueVtdPiB7XHJcbiAgICAgICAgICAgIHZhciBkZWZlcnJlZCA9IFEuZGVmZXI8TWFya2VyW10+KCk7XHJcbiAgICAgICAgICAgIHZhciBtYXJrZXJzOiBNYXJrZXJbXSA9IFtdO1xyXG5cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGJ1aWxkTWFya2VyKG0pIHtcclxuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBtLkNlbnRlci5MYXQgKyAnLScgKyBtLkNlbnRlci5Mbmc7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWFya2VyOiBNYXJrZXIgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgdmFyIGlzQ2x1c3RlciA9IG0uSXRlbXNDb3VudCA+IDE7XHJcblxyXG4gICAgICAgICAgICAgICAgbWFya2VyUG9vbC5yZWxlYXNlTWFya2Vyc0J5SWRzKGlzQ2x1c3RlciwgbS5TdG9yZU51bWJlcik7XHJcbiAgICAgICAgICAgICAgICBtYXJrZXIgPSBtYXJrZXJQb29sLmdldEV4aXN0aW5nKGtleSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKCFtYXJrZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBtYXJrZXIgPSBtYXJrZXJQb29sLmdldChpc0NsdXN0ZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcobS5DZW50ZXIuTGF0LCBtLkNlbnRlci5MbmcpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcmtlci52YWx1ZS5zZXRQb3NpdGlvbihwb3NpdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFya2VyLnZhbHVlLmxhYmVsQ29udGVudCA9ICghaXNDbHVzdGVyID8gbS5TZWFyY2hJbmRleCA6IG0uSXRlbXNDb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFya2VyLmtleSA9IGtleTtcclxuICAgICAgICAgICAgICAgICAgICBtYXJrZXIuc3RvcmVOdW1iZXIgPSBtLlN0b3JlTnVtYmVyO1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcmtlci5pc0NsdXN0ZXIgPSBpc0NsdXN0ZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFya2VyUG9vbC5pbmRleChtYXJrZXIpO1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcmtlcnMucHVzaChtYXJrZXIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIG1hcmtlci52YWx1ZS5sYWJlbENvbnRlbnQgPSAoIWlzQ2x1c3RlciA/IG0uU2VhcmNoSW5kZXggOiBtLkl0ZW1zQ291bnQpOyAvL3VwZGF0ZSBzZWFyY2ggaW5kZXg7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzdWx0Lmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbWEgPSByZXN1bHRbaV07XHJcbiAgICAgICAgICAgICAgICBidWlsZE1hcmtlcihtYSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUobWFya2Vycyk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZVNjcmlwdC9NdmMvQ29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL1NlcnZpY2VzL0dlb0xvY2F0aW9uU2VydmljZS50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBTdG9yZURldGFpbHNDb250cm9sbGVyIGV4dGVuZHMgQ29udHJvbGxlciB7XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBfZ2VvU2VydmljZTogR2VvTG9jYXRpb25TZXJ2aWNlID0gbmV3IEdlb0xvY2F0aW9uU2VydmljZSgpO1xyXG5cclxuICAgICAgICBwcml2YXRlIF9tYXA6IGdvb2dsZS5tYXBzLk1hcDtcclxuICAgICAgICBwcml2YXRlIF9tYXJrZXI6IGdvb2dsZS5tYXBzLk1hcmtlcjtcclxuXHJcbiAgICAgICAgcHVibGljIGluaXRpYWxpemUoKSB7XHJcbiAgICAgICAgICAgIHN1cGVyLmluaXRpYWxpemUoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBjZW50ZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKHRoaXMuY29udGV4dC52aWV3TW9kZWwubGF0aXR1ZGUsIHRoaXMuY29udGV4dC52aWV3TW9kZWwubG9uZ2l0dWRlKTtcclxuICAgICAgICAgICAgdmFyIG1hcE9wdGlvbnM6IGdvb2dsZS5tYXBzLk1hcE9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICBjZW50ZXI6IGNlbnRlcixcclxuICAgICAgICAgICAgICAgIHpvb206IHRoaXMuY29udGV4dC52aWV3TW9kZWwuem9vbSA/IHRoaXMuY29udGV4dC52aWV3TW9kZWwuem9vbSA6IDE0LFxyXG4gICAgICAgICAgICAgICAgbWFwVHlwZUlkOiBnb29nbGUubWFwcy5NYXBUeXBlSWQuUk9BRE1BUCxcclxuICAgICAgICAgICAgICAgIHBhbkNvbnRyb2w6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAga2V5Ym9hcmRTaG9ydGN1dHM6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgc2NhbGVDb250cm9sOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHNjcm9sbHdoZWVsOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHpvb21Db250cm9sOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGRyYWdnYWJsZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBzdHJlZXRWaWV3Q29udHJvbDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBvdmVydmlld01hcENvbnRyb2w6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgb3ZlcnZpZXdNYXBDb250cm9sT3B0aW9uczogeyBvcGVuZWQ6IGZhbHNlIH0sXHJcbiAgICAgICAgICAgICAgICBkaXNhYmxlRGVmYXVsdFVJOiB0cnVlXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9tYXAgPSBuZXcgZ29vZ2xlLm1hcHMuTWFwKHRoaXMuY29udGV4dC5jb250YWluZXIuZmluZChgI21hcGApWzBdLCBtYXBPcHRpb25zKTtcclxuICAgICAgICAgICAgdGhpcy5fbWFya2VyID0gbmV3IGdvb2dsZS5tYXBzLk1hcmtlcih7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbjogY2VudGVyLFxyXG4gICAgICAgICAgICAgICAgbWFwOiB0aGlzLl9tYXAsXHJcbiAgICAgICAgICAgICAgICBpY29uOiAnL1VJLlBhY2thZ2UvSW1hZ2VzL21hcC9tYXJrZXItZGVmYXVsdC5wbmcnXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5jb250ZXh0LndpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoKSA9PiB0aGlzLl9tYXAuc2V0Q2VudGVyKHRoaXMuX21hcmtlci5nZXRQb3NpdGlvbigpKSk7XHJcblxyXG5cclxuICAgICAgICAgICAgdGhpcy5zZXRHb29nbGVEaXJlY3Rpb25MaW5rKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgc2V0R29vZ2xlRGlyZWN0aW9uTGluaygpIHtcclxuICAgICAgICAgICAgdGhpcy5fZ2VvU2VydmljZS5nZW9sb2NhdGUoKS50aGVuKGxvY2F0aW9uID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2dlb1NlcnZpY2UudXBkYXRlRGlyZWN0aW9uTGlua3NXaXRoTGF0TG5nU291cmNlQWRkcmVzcyh0aGlzLmNvbnRleHQuY29udGFpbmVyLCBsb2NhdGlvbik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJU3RvcmVMb2NhdG9yU2VydmljZSB7XHJcbiAgICAgICAgZ2V0TWFwQ29uZmlndXJhdGlvbigpOiBRLlByb21pc2U8YW55PjtcclxuXHJcbiAgICAgICAgZ2V0U3RvcmUoc3RvcmVOdW1iZXI6IHN0cmluZyk6IFEuUHJvbWlzZTxhbnk+O1xyXG5cclxuICAgICAgICBnZXRTdG9yZXMoc291dGhXZXN0OiBnb29nbGUubWFwcy5MYXRMbmcsIG5vcnRoRWFzdDogZ29vZ2xlLm1hcHMuTGF0TG5nLCBzZWFyY2hQb2ludDogZ29vZ2xlLm1hcHMuTGF0TG5nLFxyXG4gICAgICAgICAgICBwYWdlOiBudW1iZXIsIHBhZ2VTaXplOiBudW1iZXIpOiBRLlByb21pc2U8YW55PjtcclxuXHJcbiAgICAgICAgZ2V0TWFya2Vycyhzb3V0aFdlc3Q6IGdvb2dsZS5tYXBzLkxhdExuZywgbm9ydGhFYXN0OiBnb29nbGUubWFwcy5MYXRMbmcsXHJcbiAgICAgICAgICAgIHpvb21MZXZlbDogbnVtYmVyLCBzZWFyY2hQb2ludDogZ29vZ2xlLm1hcHMuTGF0TG5nLCBpc1NlYXJjaDogYm9vbGVhbiwgcGFnZVNpemU6IG51bWJlcik6IFEuUHJvbWlzZTxhbnk+O1xyXG4gICAgfVxyXG59XHJcbiIsIm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBTdG9yZUxvY2F0b3JFbmRQb2ludFVybHMge1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgR2V0U3RvcmVzRW5kUG9pbnRVcmwgPSAnL2FwaS9zdG9yZWxvY2F0b3Ivc3RvcmVzJztcclxuICAgICAgICBwdWJsaWMgc3RhdGljIEdldFN0b3JlRW5kUG9pbnRVcmwgPSAnL2FwaS9zdG9yZWxvY2F0b3Ivc3RvcmUnO1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgR2V0TWFwQ29uZmlndXJhdGlvbkVuZFBvaW50VXJsID0gJy9hcGkvc3RvcmVsb2NhdG9yL21hcGNvbmZpZ3VyYXRpb24nO1xyXG4gICAgICAgIHB1YmxpYyBzdGF0aWMgR2V0TWFya2Vyc0VuZFBvaW50VXJsID0gJy9hcGkvc3RvcmVsb2NhdG9yL21hcmtlcnMnO1xyXG4gICAgfVxyXG59IiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9NdmMvSUNvbnRyb2xsZXJDb250ZXh0LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlc2NyaXB0L012Yy9Db21wb3NlckNsaWVudC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwZXNjcmlwdC9FdmVudHMvRXZlbnRIdWIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9JU3RvcmVMb2NhdG9yU2VydmljZS50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL1N0b3JlTG9jYXRvckVuZFBvaW50VXJscy50cycgLz5cclxuXHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgU3RvcmVMb2NhdG9yU2VydmljZSBpbXBsZW1lbnRzIElTdG9yZUxvY2F0b3JTZXJ2aWNlIHtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBtZW1vaXplU3RvcmU6IEZ1bmN0aW9uO1xyXG5cclxuICAgICAgICBwdWJsaWMgZ2V0U3RvcmUoc3RvcmVOdW1iZXI6IHN0cmluZyk6IFEuUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICAgICAgaWYgKCFzdG9yZU51bWJlcikge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgU3RvcmUgTnVtYmVyIGlzIHJlcXVpcmVkJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5tZW1vaXplU3RvcmUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubWVtb2l6ZVN0b3JlID1cclxuICAgICAgICAgICAgICAgICAgICBfLm1lbW9pemUodGhpcy5nZXRTdG9yZUltcGwsIChzdG9yZU51bWJlcikgPT4gc3RvcmVOdW1iZXIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5tZW1vaXplU3RvcmUoc3RvcmVOdW1iZXIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXRTdG9yZUltcGwoc3RvcmVOdW1iZXI6IHN0cmluZyk6IFEuUHJvbWlzZTxhbnk+IHtcclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7IFN0b3JlTnVtYmVyOiBzdG9yZU51bWJlciB9O1xyXG4gICAgICAgICAgICByZXR1cm4gQ29tcG9zZXJDbGllbnQucG9zdChTdG9yZUxvY2F0b3JFbmRQb2ludFVybHMuR2V0U3RvcmVFbmRQb2ludFVybCwgZGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZ2V0U3RvcmVzKHNvdXRoV2VzdDogZ29vZ2xlLm1hcHMuTGF0TG5nLCBub3J0aEVhc3Q6IGdvb2dsZS5tYXBzLkxhdExuZyxcclxuICAgICAgICAgICAgc2VhcmNoUG9pbnQ6IGdvb2dsZS5tYXBzLkxhdExuZywgcGFnZTogbnVtYmVyLCBwYWdlU2l6ZTogbnVtYmVyKTogUS5Qcm9taXNlPGFueT4ge1xyXG5cclxuICAgICAgICAgICAgdmFyIGRhdGEgPSB7XHJcbiAgICAgICAgICAgICAgICBwYWdlOiBwYWdlLFxyXG4gICAgICAgICAgICAgICAgcGFnZVNpemU6IHBhZ2VTaXplLFxyXG4gICAgICAgICAgICAgICAgbWFwQm91bmRzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc291dGhXZXN0OiBzb3V0aFdlc3QsXHJcbiAgICAgICAgICAgICAgICAgICAgbm9ydGhFYXN0OiBub3J0aEVhc3RcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBzZWFyY2hQb2ludDogc2VhcmNoUG9pbnRcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiBDb21wb3NlckNsaWVudC5wb3N0KFN0b3JlTG9jYXRvckVuZFBvaW50VXJscy5HZXRTdG9yZXNFbmRQb2ludFVybCwgZGF0YSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZ2V0TWFwQ29uZmlndXJhdGlvbigpOiBRLlByb21pc2U8YW55PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBDb21wb3NlckNsaWVudC5nZXQoU3RvcmVMb2NhdG9yRW5kUG9pbnRVcmxzLkdldE1hcENvbmZpZ3VyYXRpb25FbmRQb2ludFVybCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgZ2V0TWFya2Vycyhzb3V0aFdlc3Q6IGdvb2dsZS5tYXBzLkxhdExuZywgbm9ydGhFYXN0OiBnb29nbGUubWFwcy5MYXRMbmcsIHpvb21MZXZlbDogbnVtYmVyLFxyXG4gICAgICAgICAgICBzZWFyY2hQb2ludDogZ29vZ2xlLm1hcHMuTGF0TG5nLCBpc1NlYXJjaDogYm9vbGVhbiwgcGFnZVNpemU6IG51bWJlcik6IFEuUHJvbWlzZTxhbnk+IHtcclxuXHJcbiAgICAgICAgICAgIHZhciBkYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgem9vbUxldmVsOiB6b29tTGV2ZWwsXHJcbiAgICAgICAgICAgICAgICBtYXBCb3VuZHM6IHtcclxuICAgICAgICAgICAgICAgICAgICBzb3V0aFdlc3Q6IHNvdXRoV2VzdCxcclxuICAgICAgICAgICAgICAgICAgICBub3J0aEVhc3Q6IG5vcnRoRWFzdFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHNlYXJjaFBvaW50OiBzZWFyY2hQb2ludCxcclxuICAgICAgICAgICAgICAgIGlzU2VhcmNoOiBpc1NlYXJjaCxcclxuICAgICAgICAgICAgICAgIHBhZ2VTaXplOiBwYWdlU2l6ZVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIENvbXBvc2VyQ2xpZW50LnBvc3QoU3RvcmVMb2NhdG9yRW5kUG9pbnRVcmxzLkdldE1hcmtlcnNFbmRQb2ludFVybCwgZGF0YSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi8uLi9Db21wb3Nlci5VSS9Tb3VyY2UvVHlwaW5ncy90c2QuZC50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIGV4cG9ydCBjbGFzcyBTdG9yZUxvY2F0b3JIaXN0b3J5U3RhdGUge1xyXG4gICAgICAgIHBvaW50OiBnb29nbGUubWFwcy5MYXRMbmc7XHJcbiAgICAgICAgcGFnZTogbnVtYmVyO1xyXG4gICAgICAgIHpvb206IG51bWJlcjtcclxuICAgICAgICBjZW50ZXI6IGdvb2dsZS5tYXBzLkxhdExuZztcclxuICAgICAgICBwb3M6IG51bWJlcjtcclxuICAgIH1cclxufSIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0NvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vLi4vQ29tcG9zZXIuVUkvU291cmNlL1R5cGVTY3JpcHQvTXZjL0lDb250cm9sbGVyQWN0aW9uQ29udGV4dC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL1NlcnZpY2VzL1N0b3JlTG9jYXRvclNlcnZpY2UudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9NYXBTZXJ2aWNlLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vU2VydmljZXMvR2VvTG9jYXRpb25TZXJ2aWNlLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vSVN0b3JlTG9jYXRvckluaXRpYWxpemF0aW9uT3B0aW9ucy50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL0lNYXBPcHRpb25zLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vU3RvcmVMb2NhdG9ySGlzdG9yeVN0YXRlLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uLy4uL0NvbXBvc2VyLlVJL1NvdXJjZS9UeXBlU2NyaXB0L0NhY2hlL0NhY2hlUHJvdmlkZXIudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuXHJcbiAgICBleHBvcnQgY2xhc3MgU3RvcmVMb2NhdG9yQ29udHJvbGxlciBleHRlbmRzIENvbnRyb2xsZXIge1xyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgX3N0b3JlTG9jYXRvclNlcnZpY2U6IElTdG9yZUxvY2F0b3JTZXJ2aWNlID0gbmV3IFN0b3JlTG9jYXRvclNlcnZpY2UoKTtcclxuICAgICAgICBwcm90ZWN0ZWQgX2dlb1NlcnZpY2U6IEdlb0xvY2F0aW9uU2VydmljZSA9IG5ldyBHZW9Mb2NhdGlvblNlcnZpY2UoKTtcclxuICAgICAgICBwcm90ZWN0ZWQgX21hcFNlcnZpY2U6IE1hcFNlcnZpY2UgPSBuZXcgTWFwU2VydmljZSh0aGlzLmV2ZW50SHViKTtcclxuICAgICAgICBwcm90ZWN0ZWQgX3N0b3JlTG9jYXRvck9wdGlvbnM6IElTdG9yZUxvY2F0b3JJbml0aWFsaXphdGlvbk9wdGlvbnM7XHJcbiAgICAgICAgcHJvdGVjdGVkIF9oaXN0b3J5U3RhdGU6IFN0b3JlTG9jYXRvckhpc3RvcnlTdGF0ZTtcclxuICAgICAgICBwcm90ZWN0ZWQgX2lzUmVzdG9yZUxpc3RQYWdpbmc6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgICAgICBwcm90ZWN0ZWQgX3NlYXJjaFBvaW50QWRkcmVzc0NhY2hlS2V5OiBzdHJpbmcgPSAnU3RvcmVMb2NhdG9yU2VhcmNoQWRkcmVzcyc7XHJcbiAgICAgICAgcHJvdGVjdGVkIGNhY2hlID0gQ2FjaGVQcm92aWRlci5pbnN0YW5jZSgpLmRlZmF1bHRDYWNoZTtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBfc2VhcmNoQm94OiBnb29nbGUubWFwcy5wbGFjZXMuU2VhcmNoQm94O1xyXG4gICAgICAgIHByaXZhdGUgX3NlYXJjaEJveEpROiBKUXVlcnk7XHJcbiAgICAgICAgcHJpdmF0ZSBfc2VhcmNoUG9pbnQ6IGdvb2dsZS5tYXBzLkxhdExuZztcclxuICAgICAgICBwcml2YXRlIF9zZWFyY2hQb2ludE1hcmtlcjogZ29vZ2xlLm1hcHMuTWFya2VyO1xyXG4gICAgICAgIHByaXZhdGUgX2lzU2VhcmNoOiBib29sZWFuID0gZmFsc2U7XHJcbiAgICAgICAgcHJpdmF0ZSBfdGltZXI6IG51bWJlcjtcclxuICAgICAgICBwcml2YXRlIF9lbnRlclByZXNzZWRUaW1lcjogbnVtYmVyO1xyXG4gICAgICAgIHByaXZhdGUgX2dldEN1cnJlbnRMb2NhdGlvbjogUS5EZWZlcnJlZDxnb29nbGUubWFwcy5MYXRMbmc+ID0gUS5kZWZlcjxnb29nbGUubWFwcy5MYXRMbmc+KCk7XHJcblxyXG4gICAgICAgIHB1YmxpYyBnZXRDdXJyZW50TG9jYXRpb24oKTogUS5Qcm9taXNlPGdvb2dsZS5tYXBzLkxhdExuZz4ge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2V0Q3VycmVudExvY2F0aW9uLnByb21pc2U7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgcHVibGljIGluaXRpYWxpemUob3B0aW9uczogSVN0b3JlTG9jYXRvckluaXRpYWxpemF0aW9uT3B0aW9ucyA9IHtcclxuICAgICAgICAgICAgbWFwSWQ6ICdtYXAnLFxyXG4gICAgICAgICAgICBjb29yZGluYXRlczogeyBMYXQ6IC0zMy44Njg4LCBMbmc6IDE1MS4yMTk1IH0sXHJcbiAgICAgICAgICAgIHNob3dOZWFyZXN0U3RvcmVJbmZvOiB0cnVlXHJcbiAgICAgICAgfSkge1xyXG4gICAgICAgICAgICBzdXBlci5pbml0aWFsaXplKCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJTdWJzY3JpcHRpb25zKCk7XHJcbiAgICAgICAgICAgIHRoaXMuaW5pdFNlYXJjaEJveCgpO1xyXG4gICAgICAgICAgICB0aGlzLl9zdG9yZUxvY2F0b3JPcHRpb25zID0gb3B0aW9ucztcclxuXHJcbiAgICAgICAgICAgIC8vIGdldCBjdXJyZW50IGxvY2F0aW9uXHJcbiAgICAgICAgICAgIHRoaXMuX2dlb1NlcnZpY2UuZ2VvbG9jYXRlKCkudGhlbihsb2NhdGlvbiA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9nZXRDdXJyZW50TG9jYXRpb24ucmVzb2x2ZShsb2NhdGlvbik7XHJcbiAgICAgICAgICAgIH0sIHJlYXNvbiA9PiB0aGlzLl9nZXRDdXJyZW50TG9jYXRpb24ucmVzb2x2ZShudWxsKSk7XHJcblxyXG4gICAgICAgICAgICAvLyBmaXJzdCBjaGVjayBpZiBhZGRyZXNzIGlzIHBvc3RlZCBmcm9tIG90aGVyIHBhZ2UuXHJcbiAgICAgICAgICAgIHZhciBwb3N0ZWRBZGRyZXNzID0gdGhpcy5fc2VhcmNoQm94SlEudmFsKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXBvc3RlZEFkZHJlc3MpIHtcclxuICAgICAgICAgICAgICAgIC8vIHRoZW4gY2hlY2sgaGlzdG9yeSBzdGF0ZVxyXG4gICAgICAgICAgICAgICAgdGhpcy5wYXJzZUhpc3RvcnlTdGF0ZSgpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIHRoZW4gaWYgYW55IGVudGVyZWQgYWRkcmVzcyBzYXZlZCBpbiBsb2NhbCBzdG9yYWdlXHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhY2hlLmdldDxhbnk+KHRoaXMuX3NlYXJjaFBvaW50QWRkcmVzc0NhY2hlS2V5KVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGNhY2hlZEFkZHIgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3N0ZWRBZGRyZXNzID0gY2FjaGVkQWRkcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2VhcmNoQm94SlEudmFsKGNhY2hlZEFkZHIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9zdG9yZUxvY2F0b3JTZXJ2aWNlLmdldE1hcENvbmZpZ3VyYXRpb24oKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oY29uZmlndXJhdGlvbiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1hcE9wdGlvbnMgPSB0aGlzLmdldE1hcE9wdGlvbnMoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY29uZmlndXJhdGlvbi5ab29tTGV2ZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fc3RvcmVMb2NhdG9yT3B0aW9ucy56b29tTGV2ZWwgPSBjb25maWd1cmF0aW9uLlpvb21MZXZlbDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpZ3VyYXRpb24uTWFya2VyUGFkZGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9zdG9yZUxvY2F0b3JPcHRpb25zLm1hcmtlclBhZGRpbmcgPSBjb25maWd1cmF0aW9uLk1hcmtlclBhZGRpbmc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX21hcFNlcnZpY2UuaW5pdGlhbGl6ZShtYXBPcHRpb25zKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLl9oaXN0b3J5U3RhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fbWFwU2VydmljZS5jZW50ZXJNYXAoY29uZmlndXJhdGlvbi5Cb3VuZHMpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZWFyY2hCb3hTZXRCb3VuZHMoY29uZmlndXJhdGlvbi5Cb3VuZHMpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fbWFwU2VydmljZS5tYXBJbml0aWFsaXplZCgpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC50aGVuKG1hcHNlcnZpY2UgPT4ge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5faGlzdG9yeVN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzdG9yZU1hcEZyb21IaXN0b3J5U3RhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAocG9zdGVkQWRkcmVzcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fZ2VvU2VydmljZS5nZXRMb2NhdGlvbkJ5QWRkcmVzcyhwb3N0ZWRBZGRyZXNzKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDdXJyZW50TG9jYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC50aGVuKGN1cnJlbnRMb2NhdGlvbiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRMb2NhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmV2ZW50SHViLnB1Ymxpc2goJ3NlYXJjaFBvaW50Q2hhbmdlZCcsIHsgZGF0YTogY3VycmVudExvY2F0aW9uIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuZmFpbChyZWFzb24gPT4gdGhpcy5oYW5kbGVQcm9taXNlRmFpbCgnU3RvcmVMb2NhdG9yIEluaXRpYWxpemUnLCByZWFzb24pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgcmVnaXN0ZXJTdWJzY3JpcHRpb25zKCkge1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnN1YnNjcmliZSgnbWFwQm91bmRzVXBkYXRlZCcsIGUgPT4gdGhpcy5vbk1hcEJvdW5kc1VwZGF0ZWQoZS5kYXRhLCB0aGlzLl9pc1NlYXJjaCkpO1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnN1YnNjcmliZSgnc2VhcmNoUG9pbnRDaGFuZ2VkJywgZSA9PiB0aGlzLnNldFNlYXJjaExvY2F0aW9uSW5NYXAoZS5kYXRhKSk7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIuc3Vic2NyaWJlKCdtYXJrZXJDbGljaycsIGUgPT4gdGhpcy5vbk1hcmtlckNsaWNrKGUuZGF0YSkpO1xyXG4gICAgICAgICAgICB0aGlzLmV2ZW50SHViLnN1YnNjcmliZSgnY2x1c3RlckNsaWNrJywgZSA9PiB0aGlzLm9uQ2x1c3RlckNsaWNrKGUuZGF0YSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBpbml0U2VhcmNoQm94KCkge1xyXG4gICAgICAgICAgICB0aGlzLl9zZWFyY2hCb3hKUSA9IHRoaXMuY29udGV4dC5jb250YWluZXIuZmluZCgnaW5wdXRbbmFtZT1cInN0b3JlTG9jYXRvclNlYXJjaElucHV0XCJdJyk7XHJcbiAgICAgICAgICAgIHRoaXMuX3NlYXJjaEJveCA9IG5ldyBnb29nbGUubWFwcy5wbGFjZXMuU2VhcmNoQm94KDxIVE1MSW5wdXRFbGVtZW50PnRoaXMuX3NlYXJjaEJveEpRWzBdKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoQm94T25QbGFjZXNDaGFuZ2VkKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc2VhcmNoQm94T25FbnRlclByZXNzZWQoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc2VhcmNoQm94T25QbGFjZXNDaGFuZ2VkKCkge1xyXG4gICAgICAgICAgICB0aGlzLl9zZWFyY2hCb3guYWRkTGlzdGVuZXIoJ3BsYWNlc19jaGFuZ2VkJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX2VudGVyUHJlc3NlZFRpbWVyKTtcclxuICAgICAgICAgICAgICAgIHZhciBwbGFjZXMgPSB0aGlzLl9zZWFyY2hCb3guZ2V0UGxhY2VzKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAocGxhY2VzICYmIHBsYWNlcy5sZW5ndGggJiYgcGxhY2VzWzBdLmdlb21ldHJ5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKCdzZWFyY2hQb2ludENoYW5nZWQnLCB7IGRhdGE6IHBsYWNlc1swXS5nZW9tZXRyeS5sb2NhdGlvbiB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHNlYXJjaEJveE9uRW50ZXJQcmVzc2VkKCkge1xyXG4gICAgICAgICAgICB0aGlzLl9zZWFyY2hCb3hKUS5vbigna2V5cHJlc3MnLCAoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IGUud2hpY2ggfHwgZS5rZXlDb2RlO1xyXG4gICAgICAgICAgICAgICAgaWYgKGtleSA9PT0gMTMpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9lbnRlclByZXNzZWRUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fc2VhcmNoUG9pbnQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0U2VhcmNoTG9jYXRpb25Jbk1hcCh0aGlzLl9zZWFyY2hQb2ludCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9LCA3NTApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBnZXRNYXBPcHRpb25zKCk6IElNYXBPcHRpb25zIHtcclxuICAgICAgICAgICAgdmFyIG1hcENlbnRlciA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcodGhpcy5fc3RvcmVMb2NhdG9yT3B0aW9ucy5jb29yZGluYXRlcy5MYXQsIHRoaXMuX3N0b3JlTG9jYXRvck9wdGlvbnMuY29vcmRpbmF0ZXMuTG5nKTtcclxuICAgICAgICAgICAgdmFyIG1hcE9wdGlvbnM6IElNYXBPcHRpb25zID0ge1xyXG4gICAgICAgICAgICAgICAgbWFwQ2FudmFzOiB0aGlzLmNvbnRleHQuY29udGFpbmVyLmZpbmQoYCMke3RoaXMuX3N0b3JlTG9jYXRvck9wdGlvbnMubWFwSWR9YClbMF0sXHJcbiAgICAgICAgICAgICAgICBpbmZvV2luZG93TWF4V2lkdGg6IDQ1MCxcclxuICAgICAgICAgICAgICAgIG9wdGlvbnM6IHtcclxuICAgICAgICAgICAgICAgICAgICBjZW50ZXI6IHRoaXMuX2hpc3RvcnlTdGF0ZSA/IHRoaXMuX2hpc3RvcnlTdGF0ZS5wb2ludCA6IG1hcENlbnRlcixcclxuICAgICAgICAgICAgICAgICAgICB6b29tOiB0aGlzLl9oaXN0b3J5U3RhdGUgPyB0aGlzLl9oaXN0b3J5U3RhdGUuem9vbSA6IDEsXHJcbiAgICAgICAgICAgICAgICAgICAgbWFwVHlwZUlkOiBnb29nbGUubWFwcy5NYXBUeXBlSWQuUk9BRE1BUCxcclxuICAgICAgICAgICAgICAgICAgICBwYW5Db250cm9sOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBrZXlib2FyZFNob3J0Y3V0czogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBzY2FsZUNvbnRyb2w6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbHdoZWVsOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICB6b29tQ29udHJvbDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBzdHJlZXRWaWV3Q29udHJvbDogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgb3ZlcnZpZXdNYXBDb250cm9sOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIG92ZXJ2aWV3TWFwQ29udHJvbE9wdGlvbnM6IHsgb3BlbmVkOiBmYWxzZSB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbWFwT3B0aW9ucztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByaXZhdGUgc2VhcmNoQm94U2V0Qm91bmRzKGJvdW5kczogYW55KSB7XHJcbiAgICAgICAgICAgIHZhciBzb3V0aFdlc3QgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKGJvdW5kcy5Tb3V0aFdlc3QuTGF0LCBib3VuZHMuU291dGhXZXN0LkxuZyk7XHJcbiAgICAgICAgICAgIHZhciBub3J0aEVhc3QgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKGJvdW5kcy5Ob3J0aEVhc3QuTGF0LCBib3VuZHMuTm9ydGhFYXN0LkxuZyk7XHJcbiAgICAgICAgICAgIGJvdW5kcyA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmdCb3VuZHMoc291dGhXZXN0LCBub3J0aEVhc3QpO1xyXG5cclxuICAgICAgICAgICAgdGhpcy5fc2VhcmNoQm94LnNldEJvdW5kcyhib3VuZHMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIG9uTWFwQm91bmRzVXBkYXRlZChkYXRhPzogYW55LCBpc1NlYXJjaD86IGJvb2xlYW4pOiB2b2lkIHtcclxuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVyKTtcclxuICAgICAgICAgICAgdGhpcy5fdGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlTWFya2VycyhkYXRhLCBpc1NlYXJjaCk7XHJcbiAgICAgICAgICAgIH0sIDc1MCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb25NYXJrZXJDbGljayhtYXJrZXI/OiBNYXJrZXIpOiB2b2lkIHtcclxuICAgICAgICAgICAgaWYgKG1hcmtlciAhPSBudWxsICYmIG1hcmtlci5zdG9yZU51bWJlcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc3RvcmVMb2NhdG9yU2VydmljZS5nZXRTdG9yZShtYXJrZXIuc3RvcmVOdW1iZXIpXHJcbiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKHN0b3JlKSA9PiB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmdldEN1cnJlbnRMb2NhdGlvbigpLnRoZW4obG9jYXRpb24gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGxvY2F0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RvcmUuR29vZ2xlRGlyZWN0aW9uc0xpbmsgPSB0aGlzLl9nZW9TZXJ2aWNlLmdldERpcmVjdGlvbkxhdExuZ1NvdXJjZUFkZHJlc3Moc3RvcmUuR29vZ2xlRGlyZWN0aW9uc0xpbmssIGxvY2F0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb250ZW50ID0gdGhpcy5nZXRSZW5kZXJlZFRlbXBsYXRlQ29udGVudHMoJ1N0b3JlTWFwTWFya2VySW5mbycsIHN0b3JlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX21hcFNlcnZpY2Uub3BlbkluZm9ybWF0aW9uV2luZG93KGNvbnRlbnQsIG1hcmtlci52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIC5mYWlsKHJlYXNvbiA9PiB0aGlzLmhhbmRsZVByb21pc2VGYWlsKCdTdG9yZUxvY2F0b3IgT25NYXJrZXJDbGljaycsIHJlYXNvbikpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgb25DbHVzdGVyQ2xpY2sobWFya2VyPzogTWFya2VyKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuX21hcFNlcnZpY2UuZ2V0SW5mb3JtYXRpb25XaW5kb3coKS5jbG9zZSgpO1xyXG4gICAgICAgICAgICB0aGlzLl9tYXBTZXJ2aWNlLmdldE1hcCgpLnBhblRvKG1hcmtlci52YWx1ZS5nZXRQb3NpdGlvbigpKTtcclxuICAgICAgICAgICAgbWFya2VyLnZhbHVlLnNldE1hcChudWxsKTtcclxuICAgICAgICAgICAgdGhpcy5fbWFwU2VydmljZS5nZXRNYXAoKS5zZXRab29tKHRoaXMuX21hcFNlcnZpY2UuZ2V0TWFwKCkuZ2V0Wm9vbSgpICsgMSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgdXBkYXRlTWFya2VycyhkYXRhPzogYW55LCBpc1NlYXJjaDogYm9vbGVhbiA9IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIHZhciBtYXBCb3VuZHMgPSB0aGlzLl9tYXBTZXJ2aWNlLmdldEJvdW5kcyh0aGlzLl9zdG9yZUxvY2F0b3JPcHRpb25zLm1hcmtlclBhZGRpbmcpO1xyXG4gICAgICAgICAgICB2YXIgem9vbUxldmVsID0gdGhpcy5fbWFwU2VydmljZS5nZXRab29tKCk7XHJcbiAgICAgICAgICAgIHZhciBzZWFyY2hQb2ludCA9IHRoaXMuX3NlYXJjaFBvaW50O1xyXG4gICAgICAgICAgICB2YXIgcGFnZVNpemUgPSB0aGlzLl9pc1Jlc3RvcmVMaXN0UGFnaW5nID8gdGhpcy5faGlzdG9yeVN0YXRlLnBhZ2UgKiB0aGlzLmNvbnRleHQudmlld01vZGVsLnBhZ2VTaXplIDogdGhpcy5jb250ZXh0LnZpZXdNb2RlbC5wYWdlU2l6ZTtcclxuXHJcblxyXG4gICAgICAgICAgICB0aGlzLl9zdG9yZUxvY2F0b3JTZXJ2aWNlLmdldE1hcmtlcnMobWFwQm91bmRzLmdldFNvdXRoV2VzdCgpLCBtYXBCb3VuZHMuZ2V0Tm9ydGhFYXN0KCksIHpvb21MZXZlbCwgc2VhcmNoUG9pbnQsIGlzU2VhcmNoLCBwYWdlU2l6ZSlcclxuICAgICAgICAgICAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LkxhdCAmJiByZXN1bHQuTG5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuX21hcFNlcnZpY2UuZXh0ZW5kQm91bmRzKHNlYXJjaFBvaW50LCBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKHJlc3VsdC5MYXQsIHJlc3VsdC5MbmcpKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9tYXBTZXJ2aWNlLnNldE1hcmtlcnMocmVzdWx0Lk1hcmtlcnMsIGlzU2VhcmNoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9pc1Jlc3RvcmVMaXN0UGFnaW5nICYmIHJlc3VsdC5OZXh0UGFnZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0Lk5leHRQYWdlLlBhZ2UgPSB0aGlzLl9oaXN0b3J5U3RhdGUucGFnZSArIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJTdG9yZXNMaXN0KHJlc3VsdCwgbnVsbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9pc1Jlc3RvcmVMaXN0UGFnaW5nICYmIHRoaXMuX2hpc3RvcnlTdGF0ZS5wb3MpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzY3JvbGxUb3A6IHRoaXMuX2hpc3RvcnlTdGF0ZS5wb3NcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDUwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmhpc3RvcnlQdXNoU3RhdGUobnVsbCwgbnVsbCwgbnVsbCwgbnVsbCwgMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5faXNSZXN0b3JlTGlzdFBhZ2luZyA9IGZhbHNlO1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLl9zdG9yZUxvY2F0b3JPcHRpb25zLnNob3dOZWFyZXN0U3RvcmVJbmZvICYmIHJlc3VsdC5TdG9yZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmaXJzdFN0b3JlID0gcmVzdWx0LlN0b3Jlc1swXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmaXJzdFN0b3JlICYmIGZpcnN0U3RvcmUuU2VhcmNoSW5kZXggPT09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldE5lYXJlc3RTdG9yZUluZm8oZmlyc3RTdG9yZS5EZXN0aW5hdGlvblRvU2VhcmNoUG9pbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaGlzdG9yeVB1c2hTdGF0ZSgxLCBzZWFyY2hQb2ludCwgem9vbUxldmVsLCB0aGlzLl9tYXBTZXJ2aWNlLmdldEJvdW5kcygpLmdldENlbnRlcigpKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9pc1NlYXJjaCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5mYWlsKHJlYXNvbiA9PiB0aGlzLmhhbmRsZVByb21pc2VGYWlsKCdTdG9yZUxvY2F0b3IgVXBkYXRlTWFya2VycyBnZXRNYXJrZXJzJywgcmVhc29uKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIHNldFNlYXJjaExvY2F0aW9uSW5NYXAocG9pbnQ6IGdvb2dsZS5tYXBzLkxhdExuZywgem9vbUxldmVsOiBudW1iZXIgPSB0aGlzLl9zdG9yZUxvY2F0b3JPcHRpb25zLnpvb21MZXZlbCkge1xyXG4gICAgICAgICAgICB0aGlzLl9zZWFyY2hQb2ludCA9IHBvaW50O1xyXG4gICAgICAgICAgICB0aGlzLmNyZWF0ZVNlYXJjaFBvaXRNYXJrZXIoKTtcclxuICAgICAgICAgICAgdGhpcy5faXNTZWFyY2ggPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLmNhY2hlLnNldCh0aGlzLl9zZWFyY2hQb2ludEFkZHJlc3NDYWNoZUtleSwgdGhpcy5fc2VhcmNoQm94SlEudmFsKCkpO1xyXG4gICAgICAgICAgICB0aGlzLl9tYXBTZXJ2aWNlLnNldExvY2F0aW9uSW5NYXAocG9pbnQsIHpvb21MZXZlbCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcml2YXRlIGNyZWF0ZVNlYXJjaFBvaXRNYXJrZXIoKSB7XHJcbiAgICAgICAgICAgIHZhciB0aXRsZSA9IHRoaXMuX3NlYXJjaEJveEpRLnZhbCgpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fc2VhcmNoUG9pbnRNYXJrZXIgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5fc2VhcmNoUG9pbnRNYXJrZXIgPSB0aGlzLl9tYXBTZXJ2aWNlLmNyZWF0ZU1hcmtlck9uTWFwKHRoaXMuX3NlYXJjaFBvaW50LCB0aXRsZSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zZWFyY2hQb2ludE1hcmtlci5zZXRQb3NpdGlvbih0aGlzLl9zZWFyY2hQb2ludCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9zZWFyY2hQb2ludE1hcmtlci5zZXRUaXRsZSh0aXRsZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEFjdGlvbiBvbiBDbGljayBvbiBsb2NhdG9yIGljb24gaW4gc2VhcmNoIGJveFxyXG4gICAgICAgIHB1YmxpYyBjdXJyZW50TG9jYXRpb25BY3Rpb24oYWN0aW9uQ29udGV4dDogSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0KSB7XHJcbiAgICAgICAgICAgIGFjdGlvbkNvbnRleHQuZXZlbnQucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX2dlb1NlcnZpY2UuZ2VvbG9jYXRlKClcclxuICAgICAgICAgICAgICAgIC50aGVuKGN1cnJlbnRMb2NhdGlvbiA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKCdzZWFyY2hQb2ludENoYW5nZWQnLCB7IGRhdGE6IGN1cnJlbnRMb2NhdGlvbiB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2dlb1NlcnZpY2UuZ2V0QWRkdHJlc3NCeUxvY2F0aW9uKGN1cnJlbnRMb2NhdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oYWRkcmVzcyA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2VhcmNoQm94SlEudmFsKGFkZHJlc3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3NlYXJjaFBvaW50TWFya2VyLnNldFRpdGxlKGFkZHJlc3MpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIC5mYWlsKHJlYXNvbiA9PiB0aGlzLmhhbmRsZVByb21pc2VGYWlsKCdTdG9yZUxvY2F0b3IgQ3VycmVudExvY2F0aW9uQWN0aW9uJywgcmVhc29uKSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBOZXh0IFBhZ2UgQWN0aW9uXHJcbiAgICAgICAgcHVibGljIG5leHRQYWdlKGFjdGlvbkNvbnRleHQ6IElDb250cm9sbGVyQWN0aW9uQ29udGV4dCkge1xyXG4gICAgICAgICAgICB2YXIgcGFnZTogbnVtYmVyID0gPGFueT5hY3Rpb25Db250ZXh0LmVsZW1lbnRDb250ZXh0LmRhdGEoJ3BhZ2UnKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZ2V0U3RvcmVzRm9yUGFnZShwYWdlLCB0aGlzLmNvbnRleHQudmlld01vZGVsLnBhZ2VTaXplLCBhY3Rpb25Db250ZXh0LmVsZW1lbnRDb250ZXh0KTtcclxuICAgICAgICAgICAgYWN0aW9uQ29udGV4dC5ldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gUmVtZW1iZXIgZWxlbWVudCBwb3NpdGlvbiBpbiBoaXN0b3J5XHJcbiAgICAgICAgcHVibGljIHJlbWVtYmVyUG9zaXRpb24oYWN0aW9uQ29udGV4dDogSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0KSB7XHJcbiAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9ICQoZG9jdW1lbnQpLnNjcm9sbFRvcCgpO1xyXG4gICAgICAgICAgICB0aGlzLmhpc3RvcnlQdXNoU3RhdGUobnVsbCwgbnVsbCwgbnVsbCwgbnVsbCwgcG9zaXRpb24pO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgc2V0TmVhcmVzdFN0b3JlSW5mbyhpbmZvOiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgdmFyIG5lYXJlc3RJbmZvUGFuZWwgPSAkKCcjc3RvcmUtbG9jYXRvci1uZWFyZXN0Jyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoISQoJyNuZWFyZXN0SW5mbycpLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgbmVhcmVzdEluZm9QYW5lbC5odG1sKG5lYXJlc3RJbmZvUGFuZWwuaHRtbCgpLnJlcGxhY2UoJ3swfScsICc8c3Ryb25nIGlkPVxcJ25lYXJlc3RJbmZvXFwnPjwvc3Ryb25nPicpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJCgnI25lYXJlc3RJbmZvJykuaHRtbChpbmZvKTtcclxuICAgICAgICAgICAgbmVhcmVzdEluZm9QYW5lbC5yZW1vdmVDbGFzcygnaGlkZScpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGdldFN0b3Jlc0ZvclBhZ2UocGFnZTogbnVtYmVyLCBwYWdlU2l6ZT86IG51bWJlciwgZWxlbWVudD86IGFueSkge1xyXG4gICAgICAgICAgICB2YXIgbWFwQm91bmRzID0gdGhpcy5fbWFwU2VydmljZS5nZXRCb3VuZHModGhpcy5fc3RvcmVMb2NhdG9yT3B0aW9ucy5tYXJrZXJQYWRkaW5nKTtcclxuICAgICAgICAgICAgdmFyIHNlYXJjaFBvaW50ID0gdGhpcy5fc2VhcmNoUG9pbnQ7XHJcbiAgICAgICAgICAgIHZhciBidXN5ID0gdGhpcy5hc3luY0J1c3koeyBlbGVtZW50Q29udGV4dDogZWxlbWVudCB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX3N0b3JlTG9jYXRvclNlcnZpY2UuZ2V0U3RvcmVzKG1hcEJvdW5kcy5nZXRTb3V0aFdlc3QoKSwgbWFwQm91bmRzLmdldE5vcnRoRWFzdCgpLCBzZWFyY2hQb2ludCxcclxuICAgICAgICAgICAgICAgIHBhZ2UsIHBhZ2VTaXplKVxyXG4gICAgICAgICAgICAgICAgLnRoZW4oKHN0b3JlcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1c3kuZG9uZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyU3RvcmVzTGlzdChzdG9yZXMsIGVsZW1lbnRbMF0ucGFyZW50RWxlbWVudCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuaGlzdG9yeVB1c2hTdGF0ZShwYWdlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCByZW5kZXJTdG9yZXNMaXN0KHN0b3JlczogYW55LCB0YXJnZXQ6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcblxyXG4gICAgICAgICAgICB2YXIgbGlzdEh0bWwgPSB0aGlzLmdldFJlbmRlcmVkVGVtcGxhdGVDb250ZW50cygnU3RvcmVzTGlzdCcsIHN0b3Jlcyk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGFyZ2V0ID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHZhciAkbGlzdCA9ICQoJyNzdG9yZXNMaXN0JykuaHRtbCgnJykuc3RvcCgpLmZhZGVPdXQoKTtcclxuICAgICAgICAgICAgICAgICRsaXN0Lmh0bWwobGlzdEh0bWwpLnN0b3AoKS5mYWRlSW4oKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9ICQodGFyZ2V0KS5vZmZzZXQoKS50b3AgKyAkKGRvY3VtZW50KS5zY3JvbGxUb3AoKTtcclxuICAgICAgICAgICAgICAgICQodGFyZ2V0KS5yZXBsYWNlV2l0aChsaXN0SHRtbCkuc3RvcCgpLmZhZGVJbigpO1xyXG4gICAgICAgICAgICAgICAgJCgnaHRtbCwgYm9keScpLmFuaW1hdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIHNjcm9sbFRvcDogcG9zaXRpb25cclxuICAgICAgICAgICAgICAgIH0sIDUwMCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHRoaXMuc2V0R29vZ2xlRGlyZWN0aW9uTGlua3MoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBzZXRHb29nbGVEaXJlY3Rpb25MaW5rcygpOiBRLlByb21pc2U8YW55PiB7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDdXJyZW50TG9jYXRpb24oKS50aGVuKGxvY2F0aW9uID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2dlb1NlcnZpY2UudXBkYXRlRGlyZWN0aW9uTGlua3NXaXRoTGF0TG5nU291cmNlQWRkcmVzcyh0aGlzLmNvbnRleHQuY29udGFpbmVyLCBsb2NhdGlvbik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBoaXN0b3J5UHVzaFN0YXRlKHBhZ2U6IG51bWJlciwgcG9pbnQ/OiBnb29nbGUubWFwcy5MYXRMbmcsIHpvb20/OiBudW1iZXIsIGNlbnRlcj86IGdvb2dsZS5tYXBzLkxhdExuZywgZWxlbWVudFBvcz86IG51bWJlcikge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuX2hpc3RvcnlTdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5faGlzdG9yeVN0YXRlID0gbmV3IFN0b3JlTG9jYXRvckhpc3RvcnlTdGF0ZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChwYWdlKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9oaXN0b3J5U3RhdGUucGFnZSA9IHBhZ2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHBvaW50KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9oaXN0b3J5U3RhdGUucG9pbnQgPSBwb2ludDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoem9vbSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5faGlzdG9yeVN0YXRlLnpvb20gPSB6b29tO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoY2VudGVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9oaXN0b3J5U3RhdGUuY2VudGVyID0gY2VudGVyO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoZWxlbWVudFBvcyA+PSAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9oaXN0b3J5U3RhdGUucG9zID0gZWxlbWVudFBvcztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuX2hpc3RvcnlTdGF0ZS5wb2ludCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG9iaiA9IHtcclxuICAgICAgICAgICAgICAgICAgICAncF9sYXQnOiB0aGlzLl9oaXN0b3J5U3RhdGUucG9pbnQubGF0KCksXHJcbiAgICAgICAgICAgICAgICAgICAgJ3BfbG5nJzogdGhpcy5faGlzdG9yeVN0YXRlLnBvaW50LmxuZygpLFxyXG4gICAgICAgICAgICAgICAgICAgICdwYWdlJzogdGhpcy5faGlzdG9yeVN0YXRlLnBhZ2UsXHJcbiAgICAgICAgICAgICAgICAgICAgJ3pvb20nOiB0aGlzLl9oaXN0b3J5U3RhdGUuem9vbSxcclxuICAgICAgICAgICAgICAgICAgICAnY19sYXQnOiB0aGlzLl9oaXN0b3J5U3RhdGUuY2VudGVyLmxhdCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICdjX2xuZyc6IHRoaXMuX2hpc3RvcnlTdGF0ZS5jZW50ZXIubG5nKCksXHJcbiAgICAgICAgICAgICAgICAgICAgJ3Bvcyc6IHRoaXMuX2hpc3RvcnlTdGF0ZS5wb3NcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGhpc3Rvcnkuc3RhdGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBoaXN0b3J5LnJlcGxhY2VTdGF0ZShvYmosIG51bGwsIG51bGwpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBoaXN0b3J5LnB1c2hTdGF0ZShvYmosIG51bGwsIG51bGwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgcGFyc2VIaXN0b3J5U3RhdGUoKSB7XHJcbiAgICAgICAgICAgIGlmIChoaXN0b3J5LnN0YXRlKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5faGlzdG9yeVN0YXRlID0gbmV3IFN0b3JlTG9jYXRvckhpc3RvcnlTdGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGhpc3Rvcnkuc3RhdGUucF9sYXQgJiYgaGlzdG9yeS5zdGF0ZS5wX2xuZykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2hpc3RvcnlTdGF0ZS5wb2ludCA9IG5ldyBnb29nbGUubWFwcy5MYXRMbmcoaGlzdG9yeS5zdGF0ZS5wX2xhdCwgaGlzdG9yeS5zdGF0ZS5wX2xuZyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGhpc3Rvcnkuc3RhdGUuY19sYXQgJiYgaGlzdG9yeS5zdGF0ZS5jX2xuZykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX2hpc3RvcnlTdGF0ZS5jZW50ZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKGhpc3Rvcnkuc3RhdGUuY19sYXQsIGhpc3Rvcnkuc3RhdGUuY19sbmcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuX2hpc3RvcnlTdGF0ZS56b29tID0gaGlzdG9yeS5zdGF0ZS56b29tO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5faGlzdG9yeVN0YXRlLnBhZ2UgPSBoaXN0b3J5LnN0YXRlLnBhZ2U7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9oaXN0b3J5U3RhdGUucG9zID0gaGlzdG9yeS5zdGF0ZS5wb3M7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCByZXN0b3JlTWFwRnJvbUhpc3RvcnlTdGF0ZSgpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ1Jlc3RvcmUgZGF0YSBmcm9tIGhpc3Rvcnkgc3RhdGUnKTtcclxuICAgICAgICAgICAgdGhpcy5fc2VhcmNoUG9pbnQgPSB0aGlzLl9oaXN0b3J5U3RhdGUucG9pbnQ7XHJcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlU2VhcmNoUG9pdE1hcmtlcigpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuX2hpc3RvcnlTdGF0ZS5jZW50ZXIpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX21hcFNlcnZpY2UuZ2V0TWFwKCkuc2V0Q2VudGVyKHRoaXMuX2hpc3RvcnlTdGF0ZS5jZW50ZXIpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5faGlzdG9yeVN0YXRlLnBhZ2UgPiAxKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl9pc1Jlc3RvcmVMaXN0UGFnaW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGhhbmRsZVByb21pc2VGYWlsKHRpdGxlOiBzdHJpbmcsIHJlYXNvbjogYW55KSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRpdGxlICsgJzogJyArIHJlYXNvbik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59IiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG5cclxuSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcignZXNjYXBlJywgZnVuY3Rpb24ob3B0aW9ucykge1xyXG4gICAgdmFyIGlubmVyQ29udGVudCA9IG9wdGlvbnMuZm4odGhpcyk7XHJcblxyXG4gICAgdmFyIGVzY2FwZWRDb250ZW50ID0gXy5lc2NhcGUoaW5uZXJDb250ZW50KTtcclxuXHJcbiAgICByZXR1cm4gbmV3IEhhbmRsZWJhcnMuU2FmZVN0cmluZyhlc2NhcGVkQ29udGVudCk7XHJcbn0pOyIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vVHlwaW5ncy90c2QuZC50cycgLz5cclxuXHJcbkhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ2lmX2VxJywgZnVuY3Rpb24obGVmdCwgcmlnaHQsIG9wdGlvbnMpIHtcclxuICAgIGlmIChsZWZ0ID09PSByaWdodCkge1xyXG4gICAgICAgIHJldHVybiBvcHRpb25zLmZuKHRoaXMpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gb3B0aW9ucy5pbnZlcnNlKHRoaXMpO1xyXG4gICAgfVxyXG59KTtcclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG5cclxuSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcignaWZfZXhpc3RzJywgZnVuY3Rpb24odmFsdWUsIG9wdGlvbnMpIHtcclxuICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMuZm4odGhpcyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBvcHRpb25zLmludmVyc2UodGhpcyk7XHJcbiAgICB9XHJcbn0pO1xyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcblxyXG5IYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdpZl9ndCcsIGZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCBvcHRpb25zKSB7XHJcbiAgICBpZiAobGVmdCA+IHJpZ2h0KSB7XHJcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMuZm4odGhpcyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBvcHRpb25zLmludmVyc2UodGhpcyk7XHJcbiAgICB9XHJcbn0pO1xyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcblxyXG5IYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdpZl9ndGUnLCBmdW5jdGlvbihsZWZ0LCByaWdodCwgb3B0aW9ucykge1xyXG4gICAgaWYgKGxlZnQgPj0gcmlnaHQpIHtcclxuICAgICAgICByZXR1cm4gb3B0aW9ucy5mbih0aGlzKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMuaW52ZXJzZSh0aGlzKTtcclxuICAgIH1cclxufSk7XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vVHlwaW5ncy90c2QuZC50cycgLz5cclxuXHJcbkhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ2lmX2x0JywgZnVuY3Rpb24obGVmdCwgcmlnaHQsIG9wdGlvbnMpIHtcclxuICAgIGlmIChsZWZ0IDwgcmlnaHQpIHtcclxuICAgICAgICByZXR1cm4gb3B0aW9ucy5mbih0aGlzKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgcmV0dXJuIG9wdGlvbnMuaW52ZXJzZSh0aGlzKTtcclxuICAgIH1cclxufSk7XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vVHlwaW5ncy90c2QuZC50cycgLz5cclxuXHJcbkhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ2lmX2x0ZScsIGZ1bmN0aW9uKGxlZnQsIHJpZ2h0LCBvcHRpb25zKSB7XHJcbiAgICBpZiAobGVmdCA8PSByaWdodCkge1xyXG4gICAgICAgIHJldHVybiBvcHRpb25zLmZuKHRoaXMpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gb3B0aW9ucy5pbnZlcnNlKHRoaXMpO1xyXG4gICAgfVxyXG59KTtcclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJSGFuZGxlYmFyc0xvY2FsaXphdGlvbiBleHRlbmRzIEhhbmRsZWJhcnNTdGF0aWMge1xyXG4gICAgICAgIGxvY2FsaXphdGlvblByb3ZpZGVyOiB7XHJcbiAgICAgICAgICAgIGhhbmRsZUJhcnNIZWxwZXJfbG9jYWxpemVGb3JtYXQoY2F0ZWdvcnlOYW1lOiBzdHJpbmcsIGtleU5hbWU6IHN0cmluZywgYXJnczogYW55KTogc3RyaW5nO1xyXG4gICAgICAgICAgICBoYW5kbGVCYXJzSGVscGVyX2xvY2FsaXplKGNhdGVnb3J5TmFtZTogc3RyaW5nLCBrZXlOYW1lOiBzdHJpbmcpOiBzdHJpbmc7XHJcbiAgICAgICAgICAgIGhhbmRsZUJhcnNIZWxwZXJfaXNMb2NhbGl6ZWQoY2F0ZWdvcnlOYW1lOiBzdHJpbmcsIGtleU5hbWU6IHN0cmluZyk6IGJvb2xlYW47XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9JSGFuZGxlYmFyc0xvY2FsaXphdGlvbi50cycgLz5cclxuXHJcbkhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ2lmX2xvY2FsaXplZCcsIGZ1bmN0aW9uKGNhdGVnb3J5TmFtZSwga2V5TmFtZSwgb3B0aW9ucykge1xyXG4gICAgaWYgKCg8T3Jja2VzdHJhLkNvbXBvc2VyLklIYW5kbGViYXJzTG9jYWxpemF0aW9uPkhhbmRsZWJhcnMpLmxvY2FsaXphdGlvblByb3ZpZGVyLmhhbmRsZUJhcnNIZWxwZXJfaXNMb2NhbGl6ZWQoY2F0ZWdvcnlOYW1lLCBrZXlOYW1lKSkge1xyXG4gICAgICAgIHJldHVybiBvcHRpb25zLmZuKHRoaXMpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gb3B0aW9ucy5pbnZlcnNlKHRoaXMpO1xyXG4gICAgfVxyXG59KTtcclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG5cclxuSGFuZGxlYmFycy5yZWdpc3RlckhlbHBlcignaWZfbmVxJywgZnVuY3Rpb24obGVmdCwgcmlnaHQsIG9wdGlvbnMpIHtcclxuICAgIGlmIChsZWZ0ICE9PSByaWdodCkge1xyXG4gICAgICAgIHJldHVybiBvcHRpb25zLmZuKHRoaXMpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICByZXR1cm4gb3B0aW9ucy5pbnZlcnNlKHRoaXMpO1xyXG4gICAgfVxyXG59KTtcclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vSUhhbmRsZWJhcnNMb2NhbGl6YXRpb24udHMnIC8+XHJcblxyXG5IYW5kbGViYXJzLnJlZ2lzdGVySGVscGVyKCdsb2NhbGl6ZUZvcm1hdCcsIGZ1bmN0aW9uKGNhdGVnb3J5TmFtZSwga2V5TmFtZSkge1xyXG4gICAgdmFyIGFyZ3MgPSBbXTtcclxuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID4gMikge1xyXG4gICAgICAgIGFyZ3MgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDIpO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciB2YWx1ZSA9ICg8T3Jja2VzdHJhLkNvbXBvc2VyLklIYW5kbGViYXJzTG9jYWxpemF0aW9uPkhhbmRsZWJhcnMpLmxvY2FsaXphdGlvblByb3ZpZGVyXHJcbiAgICAgICAgLmhhbmRsZUJhcnNIZWxwZXJfbG9jYWxpemVGb3JtYXQoY2F0ZWdvcnlOYW1lLCBrZXlOYW1lLCBhcmdzKTtcclxuXHJcbiAgICByZXR1cm4gbmV3IEhhbmRsZWJhcnMuU2FmZVN0cmluZyh2YWx1ZSk7XHJcbn0pO1xyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9JSGFuZGxlYmFyc0xvY2FsaXphdGlvbi50cycgLz5cclxuXHJcbkhhbmRsZWJhcnMucmVnaXN0ZXJIZWxwZXIoJ2xvY2FsaXplJywgZnVuY3Rpb24oY2F0ZWdvcnlOYW1lLCBrZXlOYW1lKSB7XHJcbiAgICB2YXIgdmFsdWUgPSAoPE9yY2tlc3RyYS5Db21wb3Nlci5JSGFuZGxlYmFyc0xvY2FsaXphdGlvbj5IYW5kbGViYXJzKS5sb2NhbGl6YXRpb25Qcm92aWRlci5oYW5kbGVCYXJzSGVscGVyX2xvY2FsaXplKGNhdGVnb3J5TmFtZSwga2V5TmFtZSk7XHJcbiAgICByZXR1cm4gbmV3IEhhbmRsZWJhcnMuU2FmZVN0cmluZyh2YWx1ZSk7XHJcbn0pO1xyXG4iLCIvL1RPRE86IEN1c3RvbSBlcnJvcnMgYW5kIG5vdCBiZWluZyBhYmxlIHRvIGluaGVyaXQgZnJvbSBFcnJvclxyXG4vLyBtb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuLy8gICAgIGV4cG9ydCBjbGFzcyBDb250cm9sbGVyQWxyZWFkeVJlZ2lzdGVyZWRFeGNlcHRpb24gaW1wbGVtZW50cyBFcnJvciB7XHJcbi8vICAgICAgICAgcHVibGljIG5hbWUgPSAnQ29udHJvbGxlckFscmVhZHlSZWdpc3RlcmVkRXhjZXB0aW9uJztcclxuXHJcbi8vICAgICAgICAgY29uc3RydWN0b3IocHVibGljIG1lc3NhZ2U6IHN0cmluZyA9ICdUaGUgY29udHJvbGxlciBoYXMgYWxyZWFkeSBiZWVuIHJlZ2lzdGVyZWQuJykge1xyXG4vLyAgICAgICAgIH1cclxuLy8gICAgIH1cclxuLy8gfVxyXG4iLCIvL1RPRE86IEN1c3RvbSBlcnJvcnMgYW5kIG5vdCBiZWluZyBhYmxlIHRvIGluaGVyaXQgZnJvbSBFcnJvclxyXG4vLyBtb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuLy8gICAgIGV4cG9ydCBjbGFzcyBNaXNzaW5nQ29udHJvbGxlckRpc3BhdGNoZXJOYW1lRXhjZXB0aW9uIGltcGxlbWVudHMgRXJyb3Ige1xyXG4vLyAgICAgICAgIHB1YmxpYyBuYW1lID0gJ01pc3NpbmdDb250cm9sbGVyRGlzcGF0Y2hlck5hbWVFeGNlcHRpb24nO1xyXG5cclxuLy8gICAgICAgICBjb25zdHJ1Y3RvcihwdWJsaWMgbWVzc2FnZTogc3RyaW5nID0gJ0EgbmFtZSBpcyByZXF1aXJlZCB0byBjcmVhdGUgYSBjb250cm9sbGVyIGRpc3BhdGNoZXIuJykge1xyXG4vLyAgICAgICAgIH1cclxuLy8gICAgIH1cclxuLy8gfVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uL0dlbmVyaWNzL0NvbGxlY3Rpb25zL0lIYXNoVGFibGUudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9JQ29udHJvbGxlci50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgZXhwb3J0IGNsYXNzIENvbnRyb2xsZXJSZWdpc3RyeSB7XHJcbiAgICAgICAgcHJpdmF0ZSBzdGF0aWMgX2luc3RhbmNlIDogQ29udHJvbGxlclJlZ2lzdHJ5O1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIF9yZWdpc3RyeSA6IElIYXNoVGFibGU8YW55PiA9IHt9OyAvL0lIYXNoVGFibGU8SUNvbnRyb2xsZXI+ID0ge307XHJcblxyXG4gICAgICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgICAgICBpZiAoQ29udHJvbGxlclJlZ2lzdHJ5Ll9pbnN0YW5jZSA9PT0gdm9pZCAwKSB7XHJcbiAgICAgICAgICAgICAgICBDb250cm9sbGVyUmVnaXN0cnkuX2luc3RhbmNlID0gdGhpcztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIENvbnRyb2xsZXJSZWdpc3RyeS5faW5zdGFuY2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwdWJsaWMgaXNSZWdpc3RlcmVkKGNvbnRyb2xsZXJOYW1lKTogYm9vbGVhbiB7XHJcbiAgICAgICAgICAgIHJldHVybiBDb250cm9sbGVyUmVnaXN0cnkuX3JlZ2lzdHJ5Lmhhc093blByb3BlcnR5KGNvbnRyb2xsZXJOYW1lKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyByZXRyaWV2ZUNvbnRyb2xsZXIoY29udHJvbGxlck5hbWU6IHN0cmluZykge1xyXG4gICAgICAgICAgICBpZiAoIXRoaXMuaXNSZWdpc3RlcmVkKGNvbnRyb2xsZXJOYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmFibGUgdG8gdW5yZWdpc3RlciB0aGUgY29udHJvbGxlciAnICsgY29udHJvbGxlck5hbWUgKyAnIGJlY2F1c2UgaXQgZG9lcyBub3QgZXhpc3QgaW4gdGhlIHJlZ2lzdHJ5Jyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiBDb250cm9sbGVyUmVnaXN0cnkuX3JlZ2lzdHJ5W2NvbnRyb2xsZXJOYW1lXTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyByZWdpc3Rlcihjb250cm9sbGVyTmFtZTogc3RyaW5nLCBjb250cm9sbGVyOiBhbnkgKSB7IC8vT3Jja2VzdHJhLkNvbXBvc2VyLklDb250cm9sbGVyKSB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmlzUmVnaXN0ZXJlZChjb250cm9sbGVyTmFtZSkpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIGNvbnRyb2xsZXIgJyArIGNvbnRyb2xsZXJOYW1lICsgJyBpcyBhbHJlYWR5IHJlZ2lzdGVyZWQuJyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIENvbnRyb2xsZXJSZWdpc3RyeS5fcmVnaXN0cnlbY29udHJvbGxlck5hbWVdID0gY29udHJvbGxlcjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyB1bnJlZ2lzdGVyKGNvbnRyb2xsZXJOYW1lOiBzdHJpbmcpOiBhbnkgeyAvLzogSUNvbnRyb2xsZXIge1xyXG4gICAgICAgICAgICB2YXIgdW5yZWdpc3RlcmVkQ29udHJvbGxlcjogYW55OyAvLyBJQ29udHJvbGxlcjtcclxuXHJcbiAgICAgICAgICAgIGlmICghdGhpcy5pc1JlZ2lzdGVyZWQoY29udHJvbGxlck5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuYWJsZSB0byB1bnJlZ2lzdGVyIHRoZSBjb250cm9sbGVyICcgKyBjb250cm9sbGVyTmFtZSArICcgYmVjYXVzZSBpdCBkb2VzIG5vdCBleGlzdCBpbiB0aGUgcmVnaXN0cnknKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZGVsZXRlIENvbnRyb2xsZXJSZWdpc3RyeS5fcmVnaXN0cnlbY29udHJvbGxlck5hbWVdO1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHVucmVnaXN0ZXJlZENvbnRyb2xsZXI7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL0lDb250cm9sbGVyQ29udGV4dC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi9FdmVudHMvSUV2ZW50SHViLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uL0lDb21wb3NlckNvbnRleHQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vSUNvbXBvc2VyQ29uZmlndXJhdGlvbi50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJQ3JlYXRlQ29udHJvbGxlck9wdGlvbnMge1xyXG4gICAgICAgIGNvbnRyb2xsZXJOYW1lOiBzdHJpbmc7XHJcbiAgICAgICAgY29udGV4dDogT3Jja2VzdHJhLkNvbXBvc2VyLklDb250cm9sbGVyQ29udGV4dDtcclxuICAgICAgICBldmVudEh1YjogT3Jja2VzdHJhLkNvbXBvc2VyLklFdmVudEh1YjtcclxuICAgICAgICBjb21wb3NlckNvbnRleHQ6IElDb21wb3NlckNvbnRleHQ7XHJcbiAgICAgICAgY29tcG9zZXJDb25maWd1cmF0aW9uOiBJQ29tcG9zZXJDb25maWd1cmF0aW9uO1xyXG4gICAgfVxyXG59XHJcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi8uLi90eXBpbmdzL3RzZC5kLnRzXCIgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4vSUNvbnRyb2xsZXIudHNcIiAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi9Db250cm9sbGVyUmVnaXN0cnkudHNcIiAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi9JQ3JlYXRlQ29udHJvbGxlck9wdGlvbnMudHNcIiAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vQ2FjaGUvSUNhY2hlLnRzXCIgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD1cIi4uL0V2ZW50cy9JRXZlbnRIdWIudHNcIiAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi4vSUNvbXBvc2VyQ29udGV4dC50c1wiIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuLi9JQ29tcG9zZXJDb25maWd1cmF0aW9uLnRzXCIgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIC8qKlxyXG4gICAgKiBGYWN0b3J5IGZvciBjcmVhdGluZyBjb250cm9sbGVycy5cclxuICAgICovXHJcbiAgICBleHBvcnQgY2xhc3MgQ29udHJvbGxlckZhY3Rvcnkge1xyXG4gICAgICAgIHByaXZhdGUgc3RhdGljIF9jb250cm9sbGVyUmVnaXN0cnkgPSBuZXcgT3Jja2VzdHJhLkNvbXBvc2VyLkNvbnRyb2xsZXJSZWdpc3RyeSgpO1xyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAqIENyZWF0ZXMgYW5kIHJldHVybnMgYW4gaW5zdGFuY2Ugb2YgYSBjb250cm9sbGVyLlxyXG4gICAgICAgICovXHJcbiAgICAgICAgc3RhdGljIGNyZWF0ZUNvbnRyb2xsZXIob3B0aW9uczogSUNyZWF0ZUNvbnRyb2xsZXJPcHRpb25zKSA6IElDb250cm9sbGVyIHtcclxuXHJcbiAgICAgICAgICAgIHZhciBjb250cm9sbGVyQ29uc3RydWN0b3IgPVxyXG4gICAgICAgICAgICAgICAgQ29udHJvbGxlckZhY3RvcnkuX2NvbnRyb2xsZXJSZWdpc3RyeS5yZXRyaWV2ZUNvbnRyb2xsZXIob3B0aW9ucy5jb250cm9sbGVyTmFtZSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IGNvbnRyb2xsZXJDb25zdHJ1Y3RvcihcclxuICAgICAgICAgICAgICAgIG9wdGlvbnMuY29udGV4dCxcclxuICAgICAgICAgICAgICAgIG9wdGlvbnMuZXZlbnRIdWIsXHJcbiAgICAgICAgICAgICAgICBvcHRpb25zLmNvbXBvc2VyQ29udGV4dCxcclxuICAgICAgICAgICAgICAgIG9wdGlvbnMuY29tcG9zZXJDb25maWd1cmF0aW9uKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIixudWxsLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9JQ29tcG9zZXJDb250ZXh0LnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgY2xhc3MgQ29tcG9zZXJDb250ZXh0IGltcGxlbWVudHMgSUNvbXBvc2VyQ29udGV4dCB7XHJcblxyXG4gICAgICAgIHB1YmxpYyBsYW5ndWFnZTogc3RyaW5nID0gKCgpID0+IHtcclxuICAgICAgICAgICAgcmV0dXJuIGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdodG1sJylbMF0uZ2V0QXR0cmlidXRlKCdsYW5nJyk7XHJcbiAgICAgICAgfSkoKTtcclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9NdmMvQ29udHJvbGxlclJlZ2lzdHJ5LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vTXZjL0NvbnRyb2xsZXJGYWN0b3J5LnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vVGVtcGxhdGluZy9JQ29tcG9zZXJUZW1wbGF0ZXMudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9UZW1wbGF0aW5nL0lDb21wb3NlclRlbXBsYXRlcy50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL012Yy9Mb2NhbGl6YXRpb24vTG9jYWxpemF0aW9uUHJvdmlkZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9NdmMvTG9jYWxpemF0aW9uL0lMb2NhbGl6YXRpb25Qcm92aWRlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL1ZhbGlkYXRpb24vSVBhcnNsZXlWYWxpZGF0b3IudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9Db21wb3NlckNvbnRleHQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9JQ29tcG9zZXJDb25maWd1cmF0aW9uLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vTXZjL0lDb250cm9sbGVyQ29uZmlndXJhdGlvbi50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL1BsdWdpbnMvSVBsdWdpbi50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi9UeXBlc2NyaXB0L0V2ZW50cy9FdmVudEh1Yi50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG5cclxuICAgICd1c2Ugc3RyaWN0JztcclxuXHJcbiAgICBmdW5jdGlvbiBsb2FkUGx1Z2lucyhwbHVnaW5zOiBzdHJpbmdbXSwgd2luZG93OiBXaW5kb3csIGRvY3VtZW50OiBIVE1MRG9jdW1lbnQpIHtcclxuICAgICAgICBpZiAoIV8uaXNFbXB0eShwbHVnaW5zKSkge1xyXG4gICAgICAgICAgICBwbHVnaW5zLmZvckVhY2goKHJhd1BsdWdpbk5hbWUpID0+IHtcclxuICAgICAgICAgICAgICAgIHZhciBwbHVnaW5OYW1lID0gYCR7cmF3UGx1Z2luTmFtZX1QbHVnaW5gLFxyXG4gICAgICAgICAgICAgICAgICAgIHBsdWdpbjogSVBsdWdpbjtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoT3Jja2VzdHJhLkNvbXBvc2VyLmhhc093blByb3BlcnR5KHBsdWdpbk5hbWUpICYmIF8uaXNGdW5jdGlvbihPcmNrZXN0cmEuQ29tcG9zZXJbcGx1Z2luTmFtZV0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGx1Z2luID0gKDxJUGx1Z2luPk9iamVjdC5jcmVhdGUoT3Jja2VzdHJhLkNvbXBvc2VyW3BsdWdpbk5hbWVdKS5wcm90b3R5cGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHBsdWdpbi5pbml0aWFsaXplKHdpbmRvdywgZG9jdW1lbnQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgZnVuY3Rpb24gbG9hZENvbnRyb2xsZXJzKGNvbnRyb2xsZXJSZWdpc3RyeTogT3Jja2VzdHJhLkNvbXBvc2VyLkNvbnRyb2xsZXJSZWdpc3RyeSwgY29udHJvbGxlcnM6IElDb250cm9sbGVyQ29uZmlndXJhdGlvbltdKSB7XHJcbiAgICAgICAgaWYgKCFfLmlzRW1wdHkoY29udHJvbGxlcnMpKSB7XHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXJzLmZvckVhY2goKGNvbnRyb2xsZXJDb25maWd1cmF0aW9uKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb250cm9sbGVyUmVnaXN0cnkucmVnaXN0ZXIoY29udHJvbGxlckNvbmZpZ3VyYXRpb24ubmFtZSwgY29udHJvbGxlckNvbmZpZ3VyYXRpb24uY29udHJvbGxlcik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiByYWlzZUxhbmd1YWdlU3dpdGNoRXZlbnRJZk5lZWRlZChjYWNoZVByb3ZpZGVyOiBJQ2FjaGVQcm92aWRlciwgZXZlbnRIdWI6IElFdmVudEh1Yikge1xyXG4gICAgICAgIGxldCBjYWNoZUtleSA9ICdsYW5ndWFnZVN3aXRjaEV2ZW50JztcclxuICAgICAgICByZXR1cm4gY2FjaGVQcm92aWRlci5kZWZhdWx0Q2FjaGUuZ2V0KGNhY2hlS2V5KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICBldmVudEh1Yi5wdWJsaXNoKCdsYW5ndWFnZVN3aXRjaGVkJywgbnVsbCk7XHJcbiAgICAgICAgICAgIGNhY2hlUHJvdmlkZXIuZGVmYXVsdENhY2hlLmNsZWFyKGNhY2hlS2V5KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBleHBvcnQgdmFyIGJvb3RzdHJhcCA9ICh3aW5kb3c6IFdpbmRvdywgZG9jdW1lbnQ6IEhUTUxEb2N1bWVudCwgY29tcG9zZXJDb25maWd1cmF0aW9uOiBJQ29tcG9zZXJDb25maWd1cmF0aW9uKSA9PiB7XHJcbiAgICAgICAgdmFyIGNvbnRyb2xsZXJSZWdpc3RyeTogT3Jja2VzdHJhLkNvbXBvc2VyLkNvbnRyb2xsZXJSZWdpc3RyeSA9IG5ldyBPcmNrZXN0cmEuQ29tcG9zZXIuQ29udHJvbGxlclJlZ2lzdHJ5KCksXHJcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6IE9yY2tlc3RyYS5Db21wb3Nlci5JQ29udHJvbGxlcixcclxuICAgICAgICAgICAgZXZlbnRIdWI6IE9yY2tlc3RyYS5Db21wb3Nlci5JRXZlbnRIdWIgPSBPcmNrZXN0cmEuQ29tcG9zZXIuRXZlbnRIdWIuaW5zdGFuY2UoKSxcclxuICAgICAgICAgICAgY2FjaGVQcm92aWRlcjogSUNhY2hlUHJvdmlkZXIgPSBDYWNoZVByb3ZpZGVyLmluc3RhbmNlKCksXHJcbiAgICAgICAgICAgIGxvY2FsaXphdGlvblByb3ZpZGVyOiBPcmNrZXN0cmEuQ29tcG9zZXIuSUxvY2FsaXphdGlvblByb3ZpZGVyID0gT3Jja2VzdHJhLkNvbXBvc2VyLkxvY2FsaXphdGlvblByb3ZpZGVyLmluc3RhbmNlKCksXHJcbiAgICAgICAgICAgIGNvbXBvc2VyQ29udGV4dDogT3Jja2VzdHJhLkNvbXBvc2VyLklDb21wb3NlckNvbnRleHQgPSBuZXcgQ29tcG9zZXJDb250ZXh0KCk7XHJcblxyXG4gICAgICAgIC8vIFRPRE86IE5lZWQgYSBiZXR0ZXIgc29sdXRpb24gdGhhdCA8YW55Pi5cclxuICAgICAgICAoPGFueT5IYW5kbGViYXJzKS5wYXJ0aWFscyA9ICg8YW55Pk9yY2tlc3RyYS5Db21wb3NlcikuVGVtcGxhdGVzO1xyXG4gICAgICAgICg8YW55PkhhbmRsZWJhcnMpLmxvY2FsaXphdGlvblByb3ZpZGVyID0gbG9jYWxpemF0aW9uUHJvdmlkZXI7XHJcblxyXG4gICAgICAgIGxvY2FsaXphdGlvblByb3ZpZGVyLmluaXRpYWxpemUoY29tcG9zZXJDb250ZXh0KS5mYWlsKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnRmFpbGVkIHRvIGluaXRpYWxpemUgdGhlIGxvY2FsaXphdGlvbiBwcm92aWRlcicpO1xyXG4gICAgICAgIH0pLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgICAgICB2YXIgYmxhZGVzID0gJCgnW2RhdGEtb2MtY29udHJvbGxlcl0nKSxcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXJzOiBJQ29udHJvbGxlcltdID0gW107XHJcblxyXG4gICAgICAgICAgICBsb2FkUGx1Z2lucyhjb21wb3NlckNvbmZpZ3VyYXRpb24ucGx1Z2lucywgd2luZG93LCBkb2N1bWVudCk7XHJcbiAgICAgICAgICAgIGxvYWRDb250cm9sbGVycyhjb250cm9sbGVyUmVnaXN0cnksIGNvbXBvc2VyQ29uZmlndXJhdGlvbi5jb250cm9sbGVycyk7XHJcblxyXG4gICAgICAgICAgICAvLyBOZWVkIGEgYmV0dGVyIHF1ZXJ5IHNlbGVjdG9yIGFzIHRoaXMgb25lIGlzIHNoaXRcclxuICAgICAgICAgICAgYmxhZGVzLmVhY2goKGluZGV4OiBudW1iZXIsIGl0ZW06IEhUTUxFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICB2YXIgYmxhZGVOYW1lOiBzdHJpbmcgPSBpdGVtLmdldEF0dHJpYnV0ZSgnZGF0YS1vYy1jb250cm9sbGVyJyksXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dDogT3Jja2VzdHJhLkNvbXBvc2VyLklDb250cm9sbGVyQ29udGV4dDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoY29udHJvbGxlclJlZ2lzdHJ5LmlzUmVnaXN0ZXJlZChibGFkZU5hbWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyOiAkKGl0ZW0pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhSXRlbUlkOiBpdGVtLmdldEF0dHJpYnV0ZSgnZGF0YS1pdGVtLWlkJyksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlTmFtZTogYmxhZGVOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2aWV3TW9kZWw6IEpTT04ucGFyc2UoaXRlbS5nZXRBdHRyaWJ1dGUoJ2RhdGEtY29udGV4dCcpIHx8ICd7fScpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3c6IHdpbmRvd1xyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIgPSBPcmNrZXN0cmEuQ29tcG9zZXIuQ29udHJvbGxlckZhY3RvcnkuY3JlYXRlQ29udHJvbGxlcih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXJOYW1lOiBibGFkZU5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHQ6IGNvbnRleHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50SHViOiBldmVudEh1YixcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29tcG9zZXJDb250ZXh0OiBjb21wb3NlckNvbnRleHQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbXBvc2VyQ29uZmlndXJhdGlvbjogY29tcG9zZXJDb25maWd1cmF0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXIuaW5pdGlhbGl6ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXJzLnB1c2goY29udHJvbGxlcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgZXZlbnRIdWIucHVibGlzaCgnYWxsQ29udHJvbGxlcnNJbml0aWFsaXplZCcsIG51bGwpO1xyXG5cclxuICAgICAgICAgICAgcmFpc2VMYW5ndWFnZVN3aXRjaEV2ZW50SWZOZWVkZWQoY2FjaGVQcm92aWRlciwgZXZlbnRIdWIpO1xyXG5cclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIFRoaXMgcGFydCBvZiB0aGUgY29kZSBpcyBtb3N0bHkgY3JlYXRlZCB0byBjbGVhbiB1cCBkb20gZXZlbnRzXHJcbiAgICAgICAgICAgICAqIGl0IHdhcyBjcmVhdGVkIHRvIHdvcmthcm91bmQgYSBidWcgd2l0aCBJRTggdGhhdCBoYWQgbWVtb3J5IGxlYWtzXHJcbiAgICAgICAgICAgICAqIHdoZW4gYSBjaXJjdWxhciByZWZlcmVuY2Ugd2FzIG1hZGUgd2l0aCBhIGRvbSBlbGVtZW50IChpZSBldmVudCArIHVwZGF0ZSBvZiB0aGUgZG9tIGVsZW1lbnQpXHJcbiAgICAgICAgICAgICAqIHNlZSA6IGh0dHA6Ly9jb20uaGVtaW9sYS5jb20vMjAwOS8xMS8yMy9tZW1vcnktbGVha3MtaW4taWU4L1xyXG4gICAgICAgICAgICAgKiBhbmQgOiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzMwODMxOTYvaW4taW50ZXJuZXQtZXhwbG9yZXItd2h5LWRvZXMtbWVtb3J5LWxlYWstc3RheS1ldmVuLXdoZW4tbmF2aWdhdGluZy1hd2F5LWZyb20gXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICAkKHdpbmRvdykub24oJ2JlZm9yZXVubG9hZCcsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnRyb2xsZXJzLmZvckVhY2goY29udHJvbGxlciA9PiBjb250cm9sbGVyLmRpc3Bvc2UoKSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pLmRvbmUoKTtcclxuICAgIH07XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgaW50ZXJmYWNlIElQb3BPdmVySnF1ZXJ5UGx1Z2luIGV4dGVuZHMgSlF1ZXJ5IHtcclxuICAgICAgICBwb3BvdmVyKG9wdGlvbnM/OiBhbnkpOiBhbnk7XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uL012Yy9Db250cm9sbGVyLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgY2xhc3MgU2VhcmNoQm94Q29udHJvbGxlciBleHRlbmRzIENvbnRyb2xsZXIge1xyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKCkge1xyXG4gICAgICAgICAgICBzdXBlci5pbml0aWFsaXplKCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJGb3Jtc0ZvclZhbGlkYXRpb24odGhpcy5jb250ZXh0LmNvbnRhaW5lci5maW5kKCdmb3JtJykpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufSIsIi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vVHlwaW5ncy90c2QuZC50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi9NdmMvQ29udHJvbGxlci50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgZXhwb3J0IGNsYXNzIFBhZ2VOb3RGb3VuZEFuYWx5dGljc0NvbnRyb2xsZXIgZXh0ZW5kcyBDb250cm9sbGVyIHtcclxuICAgICAgICBwdWJsaWMgaW5pdGlhbGl6ZSgpIHtcclxuICAgICAgICAgICAgc3VwZXIuaW5pdGlhbGl6ZSgpO1xyXG5cclxuICAgICAgICAgICAgdmFyIHBhZ2VVcmwgPSBkZWNvZGVVUklDb21wb25lbnQodXJsSGVscGVyLmdldFVSTFBhcmFtZXRlcih3aW5kb3cubG9jYXRpb24uaHJlZiwgJ2Vycm9ycGF0aCcpKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghcGFnZVVybCB8fCBwYWdlVXJsID09PSAnbnVsbCcpIHtcclxuICAgICAgICAgICAgICAgIHBhZ2VVcmwgPSB3aW5kb3cubG9jYXRpb24uaHJlZjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5ldmVudEh1Yi5wdWJsaXNoKCdwYWdlTm90Rm91bmQnLCB7IGRhdGE6IHsgUGFnZVVybDogcGFnZVVybCwgUmVmZXJyZXJVcmw6IGRvY3VtZW50LnJlZmVycmVyIH0gfSk7XHJcblxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn0iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vTXZjL0NvbnRyb2xsZXIudHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIGV4cG9ydCBjbGFzcyBMYW5ndWFnZVN3aXRjaENvbnRyb2xsZXIgZXh0ZW5kcyBDb250cm9sbGVyIHtcclxuXHJcbiAgICAgICAgcHJpdmF0ZSBsYW5ndWFnZVN3aXRjaEV2ZW50OiBzdHJpbmcgPSAnbGFuZ3VhZ2VTd2l0Y2hFdmVudCc7XHJcbiAgICAgICAgcHJpdmF0ZSBjYWNoZVByb3ZpZGVyOiBJQ2FjaGVQcm92aWRlcjtcclxuXHJcbiAgICAgICAgcHVibGljIGluaXRpYWxpemUoKSB7XHJcbiAgICAgICAgICAgIHN1cGVyLmluaXRpYWxpemUoKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuY2FjaGVQcm92aWRlciA9IENhY2hlUHJvdmlkZXIuaW5zdGFuY2UoKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHB1YmxpYyBvbkxhbmd1YWdlU3dpdGNoKCkge1xyXG4gICAgICAgICAgICB0aGlzLmNhY2hlUHJvdmlkZXIuZGVmYXVsdENhY2hlLnNldCh0aGlzLmxhbmd1YWdlU3dpdGNoRXZlbnQsIHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbn0iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPScuLi8uLi9UeXBpbmdzL3RzZC5kLnRzJyAvPlxyXG4vLy8gPHJlZmVyZW5jZSBwYXRoPScuLi9NdmMvQ29udHJvbGxlci50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi9JRXJyb3JDb2xsZWN0aW9uLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgY2xhc3MgRXJyb3JDb250cm9sbGVyIGV4dGVuZHMgQ29udHJvbGxlciB7XHJcbiAgICAgICAgcHJpdmF0ZSBsYXN0RXJyb3JDb2Rlczogc3RyaW5nW107XHJcblxyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKCkge1xyXG4gICAgICAgICAgICB0aGlzLnN1YnNjcmliZVRvRXZlbnRzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwcm90ZWN0ZWQgc3Vic2NyaWJlVG9FdmVudHMoKTogdm9pZCB7XHJcbiAgICAgICAgICAgIHRoaXMuZXZlbnRIdWIuc3Vic2NyaWJlKCdHZW5lcmFsRXJyb3JPY2N1cmVkJyxcclxuICAgICAgICAgICAgICAgIChldmVudEluZm86IElFdmVudEluZm9ybWF0aW9uKSA9PiB0aGlzLmhhbmRsZUdlbmVyYWxFcnJvcihldmVudEluZm8uZGF0YSwgZXZlbnRJbmZvLnNvdXJjZSkpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJvdGVjdGVkIGhhbmRsZUdlbmVyYWxFcnJvcihlcnJvcnM6IElFcnJvckNvbGxlY3Rpb24sIHNvdXJjZTogc3RyaW5nKSB7XHJcbiAgICAgICAgICAgIHZhciBlcnJvckNvZGVzOiBzdHJpbmdbXSA9IDxzdHJpbmdbXT5fLm1hcChlcnJvcnMuRXJyb3JzLCAnRXJyb3JDb2RlJykuc29ydCgpO1xyXG4gICAgICAgICAgICB2YXIgbGFzdEVycm9yQ29kZXMgPSB0aGlzLmxhc3RFcnJvckNvZGVzID8gdGhpcy5sYXN0RXJyb3JDb2RlcyA6IFtdO1xyXG4gICAgICAgICAgICB2YXIgaXNNYXRjaCA9IF8uaXNFcXVhbChlcnJvckNvZGVzLCBsYXN0RXJyb3JDb2Rlcyk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIWlzTWF0Y2gpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubGFzdEVycm9yQ29kZXMgPSBlcnJvckNvZGVzO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXIoJ0Zvcm1FcnJvck1lc3NhZ2VzJywgZXJyb3JzKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy9UT0RPOiBGb3JjZSBhIHNjcm9sbD9cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9Cb290c3RyYXAudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9KUXVlcnlQbHVnaW5zL0lQb3BPdmVySnF1ZXJ5UGx1Z2luLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4vSUNvbXBvc2VyQ29uZmlndXJhdGlvbi50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL0NvbnRyb2xsZXIvU2VhcmNoQm94Q29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL0NvbnRyb2xsZXIvUGFnZU5vdEZvdW5kQW5hbHl0aWNzQ29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuL0NvbnRyb2xsZXIvTGFuZ3VhZ2VTd2l0Y2hDb250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NvbXBvc2VyLlByb2R1Y3QuVUkvUHJvZHVjdFNlYXJjaC9Tb3VyY2UvVHlwZVNjcmlwdC9Tb3J0QnlTZWFyY2hDb250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NvbXBvc2VyLlByb2R1Y3QuVUkvUHJvZHVjdFNlYXJjaC9Tb3VyY2UvVHlwZVNjcmlwdC9GYWNldFNlYXJjaENvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ29tcG9zZXIuUHJvZHVjdC5VSS9Qcm9kdWN0U2VhcmNoL1NvdXJjZS9UeXBlU2NyaXB0L1NlYXJjaFJlc3VsdHNDb250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NvbXBvc2VyLlByb2R1Y3QuVUkvUHJvZHVjdFNlYXJjaC9Tb3VyY2UvVHlwZVNjcmlwdC9TZWFyY2hTdW1tYXJ5Q29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21wb3Nlci5Qcm9kdWN0LlVJL1Byb2R1Y3RTZWFyY2gvU291cmNlL1R5cGVTY3JpcHQvUXVpY2tWaWV3Q29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21wb3Nlci5Qcm9kdWN0LlVJL1Byb2R1Y3RTZWFyY2gvU291cmNlL1R5cGVTY3JpcHQvU2VsZWN0ZWRGYWNldFNlYXJjaENvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ29tcG9zZXIuQ2FydC5VSS9BZGRUb0NhcnROb3RpZmljYXRpb24vU291cmNlL1R5cGVTY3JpcHQvQWRkVG9DYXJ0Tm90aWZpY2F0aW9uQ29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21wb3Nlci5DYXJ0LlVJL0NhcnRTdW1tYXJ5L1NvdXJjZS9UeXBlU2NyaXB0L0Z1bGxDYXJ0Q29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21wb3Nlci5DYXJ0LlVJL01pbmlDYXJ0L1NvdXJjZS9UeXBlU2NyaXB0L01pbmlDYXJ0Q29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21wb3Nlci5DYXJ0LlVJL01pbmlDYXJ0L1NvdXJjZS9UeXBlU2NyaXB0L01pbmlDYXJ0U3VtbWFyeUNvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ29tcG9zZXIuQ2FydC5VSS9Db3Vwb25zL1NvdXJjZS9UeXBlc2NyaXB0L0NvdXBvbkNvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ29tcG9zZXIuUHJvZHVjdC5VSS9Qcm9kdWN0RGV0YWlsL1NvdXJjZS9UeXBlU2NyaXB0L1Byb2R1Y3REZXRhaWxDb250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NvbXBvc2VyLlByb2R1Y3QuVUkvUmVsYXRlZFByb2R1Y3RzL1NvdXJjZS9UeXBlU2NyaXB0L1JlbGF0ZWRQcm9kdWN0c0NvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ29tcG9zZXIuUHJvZHVjdC5VSS9Qcm9kdWN0U3BlY2lmaWNhdGlvbi9Tb3VyY2UvVHlwZVNjcmlwdC9Qcm9kdWN0U3BlY2lmaWNhdGlvbnNDb250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NvbXBvc2VyLkNhcnQuVUkvT3JkZXJTdW1tYXJ5L1NvdXJjZS9UeXBlU2NyaXB0L09yZGVyU3VtbWFyeUNvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ29tcG9zZXIuQ2FydC5VSS9DaGVja291dEd1ZXN0Q3VzdG9tZXJJbmZvL1NvdXJjZS9UeXBlU2NyaXB0L0d1ZXN0Q3VzdG9tZXJJbmZvQ2hlY2tvdXRDb250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NvbXBvc2VyLkNhcnQuVUkvQ2hlY2tvdXRTaGlwcGluZ0FkZHJlc3MvU291cmNlL1R5cGVTY3JpcHQvU2hpcHBpbmdBZGRyZXNzQ2hlY2tvdXRDb250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NvbXBvc2VyLkNhcnQuVUkvQ2hlY2tvdXRTaGlwcGluZ01ldGhvZC9Tb3VyY2UvVHlwZVNjcmlwdC9TaGlwcGluZ01ldGhvZENoZWNrb3V0Q29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21wb3Nlci5DYXJ0LlVJL0NoZWNrb3V0QmlsbGluZ0FkZHJlc3MvU291cmNlL1R5cGVTY3JpcHQvQmlsbGluZ0FkZHJlc3NDaGVja291dENvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ29tcG9zZXIuQ2FydC5VSS9DaGVja291dEJpbGxpbmdBZGRyZXNzUmVnaXN0ZXJlZC9Tb3VyY2UvVHlwZVNjcmlwdC9CaWxsaW5nQWRkcmVzc1JlZ2lzdGVyZWRDaGVja291dENvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ29tcG9zZXIuQ2FydC5VSS9DaGVja291dE9yZGVyQ29uZmlybWF0aW9uL1NvdXJjZS9UeXBlU2NyaXB0L0NoZWNrb3V0T3JkZXJDb25maXJtYXRpb25Db250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NvbXBvc2VyLkNhcnQuVUkvQ2hlY2tvdXRDb21wbGV0ZS9Tb3VyY2UvVHlwZVNjcmlwdC9DaGVja291dENvbXBsZXRlQ29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21wb3Nlci5NeUFjY291bnQuVUkvQWRkcmVzc0xpc3QvU291cmNlL1R5cGVTY3JpcHQvQWRkcmVzc0xpc3RDb250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NvbXBvc2VyLk15QWNjb3VudC5VSS9DaGFuZ2VQYXNzd29yZC9Tb3VyY2UvVHlwZVNjcmlwdC9DaGFuZ2VQYXNzd29yZENvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ29tcG9zZXIuTXlBY2NvdW50LlVJL0NyZWF0ZUFjY291bnQvU291cmNlL1R5cGVTY3JpcHQvQ3JlYXRlQWNjb3VudENvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ29tcG9zZXIuTXlBY2NvdW50LlVJL0VkaXRBZGRyZXNzL1NvdXJjZS9UeXBlU2NyaXB0L0VkaXRBZGRyZXNzQ29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21wb3Nlci5NeUFjY291bnQuVUkvRm9yZ290UGFzc3dvcmQvU291cmNlL1R5cGVTY3JpcHQvRm9yZ290UGFzc3dvcmRDb250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NvbXBvc2VyLk15QWNjb3VudC5VSS9BY2NvdW50SGVhZGVyL1NvdXJjZS9UeXBlU2NyaXB0L0FjY291bnRIZWFkZXJDb250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NvbXBvc2VyLk15QWNjb3VudC5VSS9VcGRhdGVBY2NvdW50L1NvdXJjZS9UeXBlU2NyaXB0L1VwZGF0ZUFjY291bnRDb250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NvbXBvc2VyLk15QWNjb3VudC5VSS9OZXdQYXNzd29yZC9Tb3VyY2UvVHlwZVNjcmlwdC9OZXdQYXNzd29yZENvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ29tcG9zZXIuTXlBY2NvdW50LlVJL1JldHVybmluZ0N1c3RvbWVyL1NvdXJjZS9UeXBlU2NyaXB0L1JldHVybmluZ0N1c3RvbWVyQ29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21wb3Nlci5NeUFjY291bnQuVUkvV2lzaExpc3QvU291cmNlL1R5cGVTY3JpcHQvTXlXaXNoTGlzdENvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ29tcG9zZXIuTXlBY2NvdW50LlVJL1dpc2hMaXN0U2hhcmVkL1NvdXJjZS9UeXBlU2NyaXB0L1NoYXJlZFdpc2hMaXN0Q29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21wb3Nlci5NeUFjY291bnQuVUkvV2lzaExpc3QvU291cmNlL1R5cGVTY3JpcHQvV2lzaExpc3RJbkhlYWRlckNvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ29tcG9zZXIuQ2FydC5VSS9DaGVja291dFNoaXBwaW5nQWRkcmVzc1JlZ2lzdGVyZWQvU291cmNlL1R5cGVTY3JpcHQvU2hpcHBpbmdBZGRyZXNzUmVnaXN0ZXJlZENvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ29tcG9zZXIuQ2FydC5VSS9DaGVja291dE9yZGVyU3VtbWFyeS9Tb3VyY2UvVHlwZVNjcmlwdC9DaGVja291dE9yZGVyU3VtbWFyeUNvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ29tcG9zZXIuQ2FydC5VSS9DaGVja291dE9yZGVyU3VtbWFyeS9Tb3VyY2UvVHlwZVNjcmlwdC9Db21wbGV0ZUNoZWNrb3V0T3JkZXJTdW1tYXJ5Q29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21wb3Nlci5DYXJ0LlVJL0NoZWNrb3V0UGF5bWVudC9Tb3VyY2UvVHlwZVNjcmlwdC9DaGVja291dFBheW1lbnRDb250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NvbXBvc2VyLkNhcnQuVUkvQ2hlY2tvdXRDb21tb24vU291cmNlL1R5cGVTY3JpcHQvQ2hlY2tvdXROYXZpZ2F0aW9uQ29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21wb3Nlci5NeUFjY291bnQuVUkvU2lnbkluSGVhZGVyL1NvdXJjZS9UeXBlU2NyaXB0L1NpZ25JbkhlYWRlckNvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ29tcG9zZXIuTXlBY2NvdW50LlVJL015QWNjb3VudC9Tb3VyY2UvVHlwZVNjcmlwdC9NeUFjY291bnRDb250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NvbXBvc2VyLkNhcnQuVUkvT3JkZXJIaXN0b3J5L1NvdXJjZS9UeXBlU2NyaXB0L0N1cnJlbnRPcmRlcnNDb250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NvbXBvc2VyLkNhcnQuVUkvT3JkZXJIaXN0b3J5L1NvdXJjZS9UeXBlU2NyaXB0L1Bhc3RPcmRlcnNDb250cm9sbGVyLnRzJyAvPlxyXG4vLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uLy4uL0NvbXBvc2VyLkNhcnQuVUkvT3JkZXJEZXRhaWxzL1NvdXJjZS9UeXBlU2NyaXB0L09yZGVyRGV0YWlsc0NvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ29tcG9zZXIuQ2FydC5VSS9GaW5kTXlPcmRlci9Tb3VyY2UvVHlwZVNjcmlwdC9GaW5kTXlPcmRlckNvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi9FcnJvckhhbmRsaW5nL0Vycm9yQ29udHJvbGxlci50cycgLz5cclxuXHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ29tcG9zZXIuU3RvcmUuVUkvU3RvcmVMb2NhdG9yL1NvdXJjZS9UeXBlU2NyaXB0L1N0b3JlTG9jYXRvckNvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ29tcG9zZXIuU3RvcmUuVUkvU3RvcmVMb2NhdG9yL1NvdXJjZS9UeXBlU2NyaXB0L1N0b3JlRGV0YWlsc0NvbnRyb2xsZXIudHMnIC8+XHJcbi8vLzxyZWZlcmVuY2UgcGF0aD0nLi4vLi4vLi4vQ29tcG9zZXIuU3RvcmUuVUkvU3RvcmVEaXJlY3RvcnkvU291cmNlL1R5cGVTY3JpcHQvU3RvcmVzRGlyZWN0b3J5Q29udHJvbGxlci50cycgLz5cclxuLy8vPHJlZmVyZW5jZSBwYXRoPScuLi8uLi8uLi9Db21wb3Nlci5TdG9yZS5VSS9TdG9yZUludmVudG9yeS9Tb3VyY2UvVHlwZVNjcmlwdC9TdG9yZUludmVudG9yeUNvbnRyb2xsZXIudHMnIC8+XHJcblxyXG4oKCkgPT4ge1xyXG4gICAgJ3VzZSBzdHJpY3QnO1xyXG5cclxuICAgIC8vIFRoaXMgZmlsZSBpcyBjdXJyZW50bHkgdXNlZCBmb3IgdGhlIGNvbXBvc2VyIHRlYW0gc28gdGhhdCB3ZSBjYW4gZGVwbG95IGFuZCBob29rIGludG9cclxuICAgIC8vIG91ciBjbGllbnQtc2lkZSBjb2RlLCBidXQgdGhlIHN0YXJ0ZXIgc2l0ZSB0aGF0IHNoaXBzLCB3aWxsIHNoaXAgd2l0aCBhbiBBcHAudHNcclxuICAgIC8vIHRoYXQgd2lsbCBsb29rIGxpa2UgdGhpcy5cclxuXHJcbiAgICAkKGRvY3VtZW50KS5yZWFkeSgoKSA9PiB7XHJcbiAgICAgICAgdmFyIGNvbXBvc2VyQ29uZmlndXJhdGlvbjogT3Jja2VzdHJhLkNvbXBvc2VyLklDb21wb3NlckNvbmZpZ3VyYXRpb24gPSB7XHJcbiAgICAgICAgICAgIHBsdWdpbnM6IFtcclxuICAgICAgICAgICAgICAgICdBbnRpSUZyYW1lQ2xpY2tKYWNraW5nJyxcclxuICAgICAgICAgICAgICAgICdDb21wb3NlclZhbGlkYXRpb25Mb2NhbGl6YXRpb24nLFxyXG4gICAgICAgICAgICAgICAgJ0hlbHBCdWJibGVzJyxcclxuICAgICAgICAgICAgICAgICdTdGlja3lBZmZpeCcsXHJcbiAgICAgICAgICAgICAgICAnU2xpY2tDYXJvdXNlbCcsXHJcbiAgICAgICAgICAgICAgICAnRm9jdXNFbGVtZW50JyxcclxuICAgICAgICAgICAgICAgICdHb29nbGVBbmFseXRpY3MnXHJcbiAgICAgICAgICAgIF0sXHJcblxyXG4gICAgICAgICAgICBjb250cm9sbGVyczogW1xyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnR2VuZXJhbC5FcnJvckNvbnRyb2xsZXInLCBjb250cm9sbGVyOiBPcmNrZXN0cmEuQ29tcG9zZXIuRXJyb3JDb250cm9sbGVyIH0sXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdHZW5lcmFsLlNlYXJjaEJveCcsIGNvbnRyb2xsZXI6IE9yY2tlc3RyYS5Db21wb3Nlci5TZWFyY2hCb3hDb250cm9sbGVyIH0sXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdHZW5lcmFsLkxhbmd1YWdlU3dpdGNoJywgY29udHJvbGxlcjogT3Jja2VzdHJhLkNvbXBvc2VyLkxhbmd1YWdlU3dpdGNoQ29udHJvbGxlciB9LFxyXG5cclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ0NhcnQuRnVsbENhcnQnLCBjb250cm9sbGVyOiBPcmNrZXN0cmEuQ29tcG9zZXIuRnVsbENhcnRDb250cm9sbGVyIH0sXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdDYXJ0Lk9yZGVyU3VtbWFyeScsIGNvbnRyb2xsZXI6IE9yY2tlc3RyYS5Db21wb3Nlci5PcmRlclN1bW1hcnlDb250cm9sbGVyIH0sXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdDYXJ0Lk1pbmlDYXJ0JywgY29udHJvbGxlcjogT3Jja2VzdHJhLkNvbXBvc2VyLk1pbmlDYXJ0Q29udHJvbGxlciB9LFxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnQ2FydC5NaW5pQ2FydFN1bW1hcnknLCBjb250cm9sbGVyOiBPcmNrZXN0cmEuQ29tcG9zZXIuTWluaUNhcnRTdW1tYXJ5Q29udHJvbGxlciB9LFxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnQ2FydC5Db3Vwb25zJywgY29udHJvbGxlcjogT3Jja2VzdHJhLkNvbXBvc2VyLkNvdXBvbkNvbnRyb2xsZXIgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ0NhcnQuQWRkVG9DYXJ0Tm90aWZpY2F0aW9uJywgY29udHJvbGxlcjogT3Jja2VzdHJhLkNvbXBvc2VyLkFkZFRvQ2FydE5vdGlmaWNhdGlvbkNvbnRyb2xsZXIgfSxcclxuXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdQcm9kdWN0LlNvcnRCeVNlYXJjaCcsIGNvbnRyb2xsZXI6IE9yY2tlc3RyYS5Db21wb3Nlci5Tb3J0QnlTZWFyY2hDb250cm9sbGVyIH0sXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdQcm9kdWN0LkZhY2V0U2VhcmNoJywgY29udHJvbGxlcjogT3Jja2VzdHJhLkNvbXBvc2VyLkZhY2V0U2VhcmNoQ29udHJvbGxlciB9LFxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnUHJvZHVjdC5Qcm9kdWN0RGV0YWlsJywgY29udHJvbGxlcjogT3Jja2VzdHJhLkNvbXBvc2VyLlByb2R1Y3REZXRhaWxDb250cm9sbGVyIH0sXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdQcm9kdWN0LlJlbGF0ZWRQcm9kdWN0cycsIGNvbnRyb2xsZXI6IE9yY2tlc3RyYS5Db21wb3Nlci5SZWxhdGVkUHJvZHVjdENvbnRyb2xsZXIgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ1Byb2R1Y3QuU2VhcmNoUmVzdWx0cycsIGNvbnRyb2xsZXI6IE9yY2tlc3RyYS5Db21wb3Nlci5TZWFyY2hSZXN1bHRzQ29udHJvbGxlciB9LFxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnUHJvZHVjdC5TZWFyY2hTdW1tYXJ5JywgY29udHJvbGxlcjogT3Jja2VzdHJhLkNvbXBvc2VyLlNlYXJjaFN1bW1hcnlDb250cm9sbGVyIH0sXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdQcm9kdWN0LlF1aWNrVmlldycsIGNvbnRyb2xsZXI6IE9yY2tlc3RyYS5Db21wb3Nlci5RdWlja1ZpZXdDb250cm9sbGVyIH0sXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdQcm9kdWN0LlNlbGVjdGVkU2VhcmNoRmFjZXRzJywgY29udHJvbGxlcjogT3Jja2VzdHJhLkNvbXBvc2VyLlNlbGVjdGVkRmFjZXRTZWFyY2hDb250cm9sbGVyIH0sXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdQcm9kdWN0LlByb2R1Y3RTcGVjaWZpY2F0aW9ucycsIGNvbnRyb2xsZXI6IE9yY2tlc3RyYS5Db21wb3Nlci5Qcm9kdWN0U3BlY2lmaWNhdGlvbnNDb250cm9sbGVyIH0sXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdQcm9kdWN0LlByb2R1Y3Rab29tJywgY29udHJvbGxlcjogT3Jja2VzdHJhLkNvbXBvc2VyLlByb2R1Y3Rab29tQ29udHJvbGxlciB9LFxyXG5cclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ0NoZWNrb3V0Lkd1ZXN0Q3VzdG9tZXJJbmZvJywgY29udHJvbGxlcjogT3Jja2VzdHJhLkNvbXBvc2VyLkd1ZXN0Q3VzdG9tZXJJbmZvQ2hlY2tvdXRDb250cm9sbGVyIH0sXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdDaGVja291dC5TaGlwcGluZ0FkZHJlc3MnLCBjb250cm9sbGVyOiBPcmNrZXN0cmEuQ29tcG9zZXIuU2hpcHBpbmdBZGRyZXNzQ2hlY2tvdXRDb250cm9sbGVyIH0sXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdDaGVja291dC5TaGlwcGluZ0FkZHJlc3NSZWdpc3RlcmVkJywgY29udHJvbGxlcjogT3Jja2VzdHJhLkNvbXBvc2VyLlNoaXBwaW5nQWRkcmVzc1JlZ2lzdGVyZWRDb250cm9sbGVyIH0sXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdDaGVja291dC5TaGlwcGluZ01ldGhvZCcsIGNvbnRyb2xsZXI6IE9yY2tlc3RyYS5Db21wb3Nlci5TaGlwcGluZ01ldGhvZENoZWNrb3V0Q29udHJvbGxlciB9LFxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnQ2hlY2tvdXQuT3JkZXJTdW1tYXJ5JywgY29udHJvbGxlcjogT3Jja2VzdHJhLkNvbXBvc2VyLkNoZWNrb3V0T3JkZXJTdW1tYXJ5Q29udHJvbGxlciB9LFxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnQ2hlY2tvdXQuQ29tcGxldGVPcmRlclN1bW1hcnknLCBjb250cm9sbGVyOiBPcmNrZXN0cmEuQ29tcG9zZXIuQ29tcGxldGVDaGVja291dE9yZGVyU3VtbWFyeUNvbnRyb2xsZXIgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ0NoZWNrb3V0LkNoZWNrb3V0Q29tcGxldGUnLCBjb250cm9sbGVyOiBPcmNrZXN0cmEuQ29tcG9zZXIuQ2hlY2tvdXRDb21wbGV0ZUNvbnRyb2xsZXIgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ0NoZWNrb3V0LkNoZWNrb3V0T3JkZXJDb25maXJtYXRpb24nLCBjb250cm9sbGVyOiBPcmNrZXN0cmEuQ29tcG9zZXIuQ2hlY2tvdXRPcmRlckNvbmZpcm1hdGlvbkNvbnRyb2xsZXIgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ0NoZWNrb3V0LkJpbGxpbmdBZGRyZXNzJywgY29udHJvbGxlcjogT3Jja2VzdHJhLkNvbXBvc2VyLkJpbGxpbmdBZGRyZXNzQ2hlY2tvdXRDb250cm9sbGVyIH0sXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdDaGVja291dC5CaWxsaW5nQWRkcmVzc1JlZ2lzdGVyZWQnLCBjb250cm9sbGVyOiBPcmNrZXN0cmEuQ29tcG9zZXIuQmlsbGluZ0FkZHJlc3NSZWdpc3RlcmVkQ2hlY2tvdXRDb250cm9sbGVyIH0sXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdDaGVja291dC5QYXltZW50JywgY29udHJvbGxlcjogT3Jja2VzdHJhLkNvbXBvc2VyLkNoZWNrb3V0UGF5bWVudENvbnRyb2xsZXIgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ0NoZWNrb3V0Lk5hdmlnYXRpb24nLCBjb250cm9sbGVyOiBPcmNrZXN0cmEuQ29tcG9zZXIuQ2hlY2tvdXROYXZpZ2F0aW9uQ29udHJvbGxlciB9LFxyXG5cclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ015QWNjb3VudC5BZGRyZXNzTGlzdCcsIGNvbnRyb2xsZXI6IE9yY2tlc3RyYS5Db21wb3Nlci5BZGRyZXNzTGlzdENvbnRyb2xsZXIgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ015QWNjb3VudC5DaGFuZ2VQYXNzd29yZCcsIGNvbnRyb2xsZXI6IE9yY2tlc3RyYS5Db21wb3Nlci5DaGFuZ2VQYXNzd29yZENvbnRyb2xsZXIgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ015QWNjb3VudC5DcmVhdGVBY2NvdW50JywgY29udHJvbGxlcjogT3Jja2VzdHJhLkNvbXBvc2VyLkNyZWF0ZUFjY291bnRDb250cm9sbGVyIH0sXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdNeUFjY291bnQuRWRpdEFkZHJlc3MnLCBjb250cm9sbGVyOiBPcmNrZXN0cmEuQ29tcG9zZXIuRWRpdEFkZHJlc3NDb250cm9sbGVyIH0sXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdNeUFjY291bnQuRm9yZ290UGFzc3dvcmQnLCBjb250cm9sbGVyOiBPcmNrZXN0cmEuQ29tcG9zZXIuRm9yZ290UGFzc3dvcmRDb250cm9sbGVyIH0sXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdNeUFjY291bnQuQWNjb3VudEhlYWRlcicsIGNvbnRyb2xsZXI6IE9yY2tlc3RyYS5Db21wb3Nlci5BY2NvdW50SGVhZGVyQ29udHJvbGxlciB9LFxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnTXlBY2NvdW50LlVwZGF0ZUFjY291bnQnLCBjb250cm9sbGVyOiBPcmNrZXN0cmEuQ29tcG9zZXIuVXBkYXRlQWNjb3VudENvbnRyb2xsZXIgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ015QWNjb3VudC5OZXdQYXNzd29yZCcsIGNvbnRyb2xsZXI6IE9yY2tlc3RyYS5Db21wb3Nlci5OZXdQYXNzd29yZENvbnRyb2xsZXIgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ015QWNjb3VudC5SZXR1cm5pbmdDdXN0b21lcicsIGNvbnRyb2xsZXI6IE9yY2tlc3RyYS5Db21wb3Nlci5SZXR1cm5pbmdDdXN0b21lckNvbnRyb2xsZXIgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ015QWNjb3VudC5TaWduSW5IZWFkZXInLCBjb250cm9sbGVyOiBPcmNrZXN0cmEuQ29tcG9zZXIuU2lnbkluSGVhZGVyQ29udHJvbGxlciB9LFxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnTXlBY2NvdW50Lk15QWNjb3VudE1lbnUnLCBjb250cm9sbGVyOiBPcmNrZXN0cmEuQ29tcG9zZXIuTXlBY2NvdW50Q29udHJvbGxlciB9LFxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnTXlBY2NvdW50Lk15V2lzaExpc3QnLCBjb250cm9sbGVyOiBPcmNrZXN0cmEuQ29tcG9zZXIuTXlXaXNoTGlzdENvbnRyb2xsZXIgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ015QWNjb3VudC5TaGFyZWRXaXNoTGlzdCcsIGNvbnRyb2xsZXI6IE9yY2tlc3RyYS5Db21wb3Nlci5TaGFyZWRXaXNoTGlzdENvbnRyb2xsZXIgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ015QWNjb3VudC5XaXNoTGlzdEluSGVhZGVyJywgY29udHJvbGxlcjogT3Jja2VzdHJhLkNvbXBvc2VyLldpc2hMaXN0SW5IZWFkZXJDb250cm9sbGVyIH0sXHJcblxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnT3JkZXJzLkN1cnJlbnRPcmRlcnMnLCBjb250cm9sbGVyOiBPcmNrZXN0cmEuQ29tcG9zZXIuQ3VycmVudE9yZGVyc0NvbnRyb2xsZXIgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ09yZGVycy5QYXN0T3JkZXJzJywgY29udHJvbGxlcjogT3Jja2VzdHJhLkNvbXBvc2VyLlBhc3RPcmRlcnNDb250cm9sbGVyIH0sXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdPcmRlcnMuT3JkZXJEZXRhaWxzJywgY29udHJvbGxlcjogT3Jja2VzdHJhLkNvbXBvc2VyLk9yZGVyRGV0YWlsc0NvbnRyb2xsZXIgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ09yZGVycy5GaW5kTXlPcmRlcicsIGNvbnRyb2xsZXI6IE9yY2tlc3RyYS5Db21wb3Nlci5GaW5kTXlPcmRlckNvbnRyb2xsZXIgfSxcclxuXHJcbiAgICAgICAgICAgICAgICB7IG5hbWU6ICdTdG9yZS5Mb2NhdG9yJywgY29udHJvbGxlcjogT3Jja2VzdHJhLkNvbXBvc2VyLlN0b3JlTG9jYXRvckNvbnRyb2xsZXIgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ1N0b3JlLkRldGFpbHMnLCBjb250cm9sbGVyOiBPcmNrZXN0cmEuQ29tcG9zZXIuU3RvcmVEZXRhaWxzQ29udHJvbGxlciB9LFxyXG4gICAgICAgICAgICAgICAgeyBuYW1lOiAnU3RvcmUuRGlyZWN0b3J5JywgY29udHJvbGxlcjogT3Jja2VzdHJhLkNvbXBvc2VyLlN0b3Jlc0RpcmVjdG9yeUNvbnRyb2xsZXIgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ1N0b3JlLkludmVudG9yeScsIGNvbnRyb2xsZXI6IE9yY2tlc3RyYS5Db21wb3Nlci5TdG9yZUludmVudG9yeUNvbnRyb2xsZXIgfSxcclxuICAgICAgICAgICAgICAgIHsgbmFtZTogJ1BhZ2VOb3RGb3VuZC5BbmFseXRpY3MnLCBjb250cm9sbGVyOiBPcmNrZXN0cmEuQ29tcG9zZXIuUGFnZU5vdEZvdW5kQW5hbHl0aWNzQ29udHJvbGxlciB9XHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBPcmNrZXN0cmEuQ29tcG9zZXIuYm9vdHN0cmFwKHdpbmRvdywgZG9jdW1lbnQsIGNvbXBvc2VyQ29uZmlndXJhdGlvbik7XHJcbiAgICB9KTtcclxufSkoKTtcclxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi9JUGx1Z2luLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgY2xhc3MgQW50aUlGcmFtZUNsaWNrSmFja2luZ1BsdWdpbiBpbXBsZW1lbnRzIElQbHVnaW4ge1xyXG5cclxuICAgICAgICBwdWJsaWMgaW5pdGlhbGl6ZSh3aW5kb3c6IFdpbmRvdywgZG9jdW1lbnQ6IEhUTUxEb2N1bWVudCk6IHZvaWQge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5nZXRPcmlnaW4od2luZG93LnNlbGYpICE9PSB0aGlzLmdldE9yaWdpbih3aW5kb3cudG9wKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdUaGlzIHNpdGUgY2Fubm90IGJlIGhvc3RlZCBpbiBhbiBpRnJhbWUuIFJlZGlyZWN0aW5nLicpO1xyXG4gICAgICAgICAgICAgICAgd2luZG93LnRvcC5sb2NhdGlvbi5ocmVmID0gd2luZG93LnNlbGYubG9jYXRpb24uaHJlZjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcHJpdmF0ZSBnZXRPcmlnaW4od2luZG93OiBXaW5kb3cpIDogc3RyaW5nIHtcclxuICAgICAgICAgICAgdmFyIG9yaWdpbjogc3RyaW5nO1xyXG5cclxuICAgICAgICAgICAgaWYgKCF3aW5kb3cubG9jYXRpb25bJ29yaWdpbiddKSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb25bJ29yaWdpbiddID0gd2luZG93LmxvY2F0aW9uLnByb3RvY29sICsgJy8vJyArIHdpbmRvdy5sb2NhdGlvbi5ob3N0O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBvcmlnaW4gPSB3aW5kb3cubG9jYXRpb25bJ29yaWdpbiddO1xyXG4gICAgICAgICAgICByZXR1cm4gb3JpZ2luO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4uLy4uL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uL1ZhbGlkYXRpb24vSVBhcnNsZXlWYWxpZGF0b3IudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uL0NvbXBvc2VyQ29udGV4dC50cycgLz5cclxuLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi9JUGx1Z2luLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgY2xhc3MgQ29tcG9zZXJWYWxpZGF0aW9uTG9jYWxpemF0aW9uUGx1Z2luIGltcGxlbWVudHMgSVBsdWdpbiB7XHJcbiAgICAgICAgcHVibGljIGluaXRpYWxpemUod2luZG93OiBXaW5kb3csIGRvY3VtZW50OiBIVE1MRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgdmFyIGxvY2FsZTogc3RyaW5nLFxyXG4gICAgICAgICAgICAgICAgcGFybHNleUNvbmZpZyA9ICg8SVBhcnNsZXlWYWxpZGF0b3I+d2luZG93KS5QYXJzbGV5Q29uZmlnLFxyXG4gICAgICAgICAgICAgICAgcGFyc2xleUxvY2FsZU1lc3NhZ2VzID1cclxuICAgICAgICAgICAgICAgICAgICBKU09OLnBhcnNlKCg8YW55Pk9yY2tlc3RyYS5Db21wb3NlcikuVGVtcGxhdGVzWydHbG9iYWxWYWxpZGF0aW9uJ10oKSksXHJcbiAgICAgICAgICAgICAgICBjb21wb3NlckNvbnRleHQgPSBuZXcgQ29tcG9zZXJDb250ZXh0KCk7XHJcblxyXG4gICAgICAgICAgICBsb2NhbGUgPSBjb21wb3NlckNvbnRleHQubGFuZ3VhZ2U7XHJcblxyXG4gICAgICAgICAgICBpZiAoXy5pc0VtcHR5KGxvY2FsZSkpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIGxvY2FsZSBoYXMgbm90IGJlZW4gc2V0Jyk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICg8SVBhcnNsZXlWYWxpZGF0b3I+d2luZG93KS5QYXJzbGV5Q29uZmlnID0gKDxJUGFyc2xleVZhbGlkYXRvcj53aW5kb3cpLlBhcnNsZXlDb25maWcgfHwge307XHJcbiAgICAgICAgICAgICg8SVBhcnNsZXlWYWxpZGF0b3I+d2luZG93KS5QYXJzbGV5Q29uZmlnLmkxOG4gPSAoPElQYXJzbGV5VmFsaWRhdG9yPndpbmRvdykuUGFyc2xleUNvbmZpZy5pMThuIHx8IHt9O1xyXG5cclxuICAgICAgICAgICAgKDxJUGFyc2xleVZhbGlkYXRvcj53aW5kb3cpLlBhcnNsZXlDb25maWcuaTE4bltsb2NhbGVdID1cclxuICAgICAgICAgICAgICAgIGpRdWVyeS5leHRlbmQoKDxJUGFyc2xleVZhbGlkYXRvcj53aW5kb3cpLlBhcnNsZXlDb25maWcuaTE4bltsb2NhbGVdIHx8IHt9LCBwYXJzbGV5TG9jYWxlTWVzc2FnZXMpO1xyXG5cclxuICAgICAgICAgICAgLy8gSWYgZmlsZSBpcyBsb2FkZWQgYWZ0ZXIgUGFyc2xleSBtYWluIGZpbGUsIGF1dG8tbG9hZCBsb2NhbGVcclxuICAgICAgICAgICAgaWYgKCg8SVBhcnNsZXlWYWxpZGF0b3I+d2luZG93KS5QYXJzbGV5VmFsaWRhdG9yICE9PSB2b2lkIDApIHtcclxuICAgICAgICAgICAgICAoPElQYXJzbGV5VmFsaWRhdG9yPndpbmRvdykuUGFyc2xleVZhbGlkYXRvci5hZGRDYXRhbG9nKGxvY2FsZSwgKDxJUGFyc2xleVZhbGlkYXRvcj53aW5kb3cpLlBhcnNsZXlDb25maWcuaTE4bltsb2NhbGVdLCB0cnVlKTtcclxuICAgICAgICAgICAgICAoPElQYXJzbGV5VmFsaWRhdG9yPndpbmRvdykuUGFyc2xleVZhbGlkYXRvci5zZXRMb2NhbGUobG9jYWxlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdGhpcy5kZWZpbmVWYWxpZGF0b3JzKCg8SVBhcnNsZXlWYWxpZGF0b3I+d2luZG93KS5QYXJzbGV5VmFsaWRhdG9yKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByb3RlY3RlZCBkZWZpbmVWYWxpZGF0b3JzKHBhcnNsZXlWYWxpZGF0b3I6IGFueSkge1xyXG4gICAgICAgICAgICB2YXIgcmVnZXg6IFJlZ0V4cCA9ICAvXig/ISgufFxcbikqPFthLXohXFwvP10pKD8hKC58XFxuKSomIykoLnxcXG4pKiQvaTtcclxuXHJcbiAgICAgICAgICAgIHBhcnNsZXlWYWxpZGF0b3IuYWRkVmFsaWRhdG9yKCdhbnRpeHNzJywgKHZhbHVlLCByZXF1aXJlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdmFyIGlzUmVxOiBib29sZWFuO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChfLmlzU3RyaW5nKHJlcXVpcmVtZW50KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlzUmVxID0gKDxzdHJpbmc+cmVxdWlyZW1lbnQpLnRvTG93ZXJDYXNlKCkgPT09ICd0cnVlJztcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXNSZXEgPSAhIXJlcXVpcmVtZW50O1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBpc1ZhbGlkOiBib29sZWFuID0gIWlzUmVxIHx8IHJlZ2V4LnRlc3QodmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGlzVmFsaWQ7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy9lbjogJ1RoaXMgZmllbGQgY29udGFpbnMgaW52YWxpZCBjaGFyYWN0ZXJzLicsXHJcbiAgICAgICAgICAgIC8vZnI6ICdDZSBjaGFtcCBjb250aWVudCBkZXMgY2FyYWN0w6hyZXMgaW52YWxpZGVzLidcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwiLy8vIDxyZWZlcmVuY2UgcGF0aD0nLi9JUGx1Z2luLnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICBleHBvcnQgY2xhc3MgRm9jdXNFbGVtZW50UGx1Z2luIGltcGxlbWVudHMgSVBsdWdpbiB7XHJcbiAgICAgICAgcHVibGljIGluaXRpYWxpemUod2luZG93OiBXaW5kb3csIGRvY3VtZW50OiBIVE1MRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgLyoqXHJcbiAgICAgICAgICAgICAqIE9uIGNsaWNrLCBzY3JvbGwgdG8gZmllbGQgYW5kIGZvY3VzIGluIGl0LlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgJCgnYm9keScsIGRvY3VtZW50KS5vbignY2xpY2snLCAnW2RhdGEtZm9jdXMtZWxlbWVudF0nLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0ID0gJCh0aGlzKS5kYXRhKCdmb2N1cy1lbGVtZW50Jyk7XHJcbiAgICAgICAgICAgICAgICAkKCdib2R5LCBodG1sJykuc2Nyb2xsVG9wKCQodGFyZ2V0KS5vZmZzZXQoKS50b3AgLSAyMCk7XHJcbiAgICAgICAgICAgICAgICAkKHRhcmdldCkuZm9jdXMoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPScuL0lQbHVnaW4udHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uL0pRdWVyeVBsdWdpbnMvSVBvcE92ZXJKcXVlcnlQbHVnaW4udHMnIC8+XHJcblxyXG5tb2R1bGUgT3Jja2VzdHJhLkNvbXBvc2VyIHtcclxuICAgIGV4cG9ydCBjbGFzcyBIZWxwQnViYmxlc1BsdWdpbiBpbXBsZW1lbnRzIElQbHVnaW4ge1xyXG4gICAgICAgIHB1YmxpYyBpbml0aWFsaXplKHdpbmRvdzogV2luZG93LCBkb2N1bWVudDogSFRNTERvY3VtZW50KSB7XHJcbiAgICAgICAgICAgIC8qKlxyXG4gICAgICAgICAgICAgKiBXaWxsIGNhbGN1bGF0ZSBpZiB0aGVyZSBpcyBlbm91Z2ggc3BhY2UgZm9yIHRoZSBwb3BvdmVyIG9uIHRoZSByaWdodFxyXG4gICAgICAgICAgICAgKiBlbHNlIHdpbGwgcHV0IGl0IGluIHRoZSBib3R0b20uXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBwb3BvdmVyUGxhY2VtZW50KHBvcG92ZXIsIHRyaWdnZXJpbmdFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdHJpZ2dlcmluZ0VsZW1lbnRXaWR0aCA9ICQodHJpZ2dlcmluZ0VsZW1lbnQpLm91dGVyV2lkdGgoKTtcclxuICAgICAgICAgICAgICAgIHZhciBwbGFjZW1lbnQgPSAnYm90dG9tJztcclxuXHJcbiAgICAgICAgICAgICAgICAvLyB3ZSB3aWxsIGNvbnNpZGVyIHRoYXQgaWYgdGhlIHRycmlnZXJpbmcgZWxlbWVudCBjYW4ndCBiZSBkb3VibGVkXHJcbiAgICAgICAgICAgICAgICAvLyB3ZSB3b24ndCBoYXZlIGVub3VnaCBzcGFjZSB0byBkaXNwbGF5IHRoZSBwb3BvdmVyIG9uIHRoZSByaWdodFxyXG4gICAgICAgICAgICAgICAgaWYgKCh3aW5kb3cuaW5uZXJXaWR0aCAtIHRyaWdnZXJpbmdFbGVtZW50V2lkdGgpID4gdHJpZ2dlcmluZ0VsZW1lbnRXaWR0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHBsYWNlbWVudCA9ICdyaWdodCc7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBsYWNlbWVudDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gIEFzIGRpc2N1c3NlZCB3aXRoIFNhbSwgdGhpcyBpcyBpbiB0aGUgYXBwLnRzIGZvciBub3cuIEJlY2F1c2Ugd2UgZG9uJ3QgaGF2ZSBhIHN0cmF0ZWd5XHJcbiAgICAgICAgICAgIC8vICB5ZXQgZm9yIGdlbmVyaWMgcHJlc2VudGF0aW9uL3BsdWdpbnMgamF2YXNjcmlwdC5cclxuICAgICAgICAgICAgLy8gIFBvcCBvdmVyIGluaXRpYWxpemF0aW9uLlxyXG4gICAgICAgICAgICAoPE9yY2tlc3RyYS5Db21wb3Nlci5JUG9wT3ZlckpxdWVyeVBsdWdpbj4kKCdib2R5JykpLnBvcG92ZXIoe1xyXG4gICAgICAgICAgICAgICAgaHRtbDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHBsYWNlbWVudDogcG9wb3ZlclBsYWNlbWVudCxcclxuICAgICAgICAgICAgICAgIHNlbGVjdG9yOiAnW2RhdGEtdG9nZ2xlPXBvcG92ZXJdJyxcclxuICAgICAgICAgICAgICAgIHRyaWdnZXI6ICdmb2N1cycsXHJcbiAgICAgICAgICAgICAgICBjb250ZW50OiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJCgnI3BvcG92ZXItY29udGVudCcpLmh0bWwoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICogTmVlZHMgdGhlIHNlbGVjdCBibG9jayBvZiBhIHNhbWUgZ3JvdXAgdG8gaGF2ZSBkYXRhLXBhcmVudCBkZWZpbmVkXHJcbiAgICAgICAgICAgICAqIE9SIHRoYXQgdGhleSBiZSBpbiB0aGUgc2FtZSBmb3JtLlxyXG4gICAgICAgICAgICAgKi9cclxuICAgICAgICAgICAgJCgnYm9keScpLm9uKCdjaGFuZ2UnLCAnLnNlbGVjdC1ibG9jaycsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICB2YXIgaW5wdXQgPSAkKHRoaXMpLmZpbmQoJy5pbnB1dCcpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHR5cGUgPSBpbnB1dC5hdHRyKCd0eXBlJyk7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IGlucHV0LmF0dHIoJ25hbWUnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBpZiBjaGVja2JveCBjaGVjayBjdXJyZW50IHN0YXRlIG9mIHByb3BcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlID09PSAnY2hlY2tib3gnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0LnByb3AoJ2NoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgPT09ICdyYWRpbycpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcGFyZW50U2VsZWN0b3IgPSAkKHRoaXMpLmRhdGEoJ3BhcmVudCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXJlbnRFbGVtZW50O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAocGFyZW50U2VsZWN0b3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyZW50RWxlbWVudCA9IGlucHV0LmNsb3Nlc3QocGFyZW50U2VsZWN0b3IpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIG5vIHBhcmVudCBzcGVjaWZpZWQsIGRlZmF1bHQgdG8gZm9ybSBhbmQgZmFsbGJhY2sgdG8gYm9keVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRFbGVtZW50ID0gaW5wdXQuY2xvc2VzdCgnZm9ybScpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcmVudEVsZW1lbnQubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJlbnRFbGVtZW50ID0gJCgnYm9keScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBwYXJlbnRFbGVtZW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5maW5kKCcuc2VsZWN0LWJsb2NrOmhhcyg6cmFkaW9bbmFtZT1cIicgKyBuYW1lICsgJ1wiXSknKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4uLy4uL1R5cGluZ3MvdHNkLmQudHMnIC8+XHJcbi8vLyA8cmVmZXJlbmNlIHBhdGg9Jy4vSVBsdWdpbi50cycgLz5cclxuXHJcbm1vZHVsZSBPcmNrZXN0cmEuQ29tcG9zZXIge1xyXG4gICAgZXhwb3J0IGNsYXNzIFN0aWNreUFmZml4UGx1Z2luIGltcGxlbWVudHMgSVBsdWdpbiB7XHJcbiAgICAgICAgcHVibGljIGluaXRpYWxpemUod2luZG93OiBXaW5kb3csIGRvY3VtZW50OiBIVE1MRG9jdW1lbnQpIHtcclxuICAgICAgICAgICAgJCgnW2RhdGEtc3RpY2t5LXRvcF0nKS5lYWNoKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHN0aWNreU9mZnNldCA9ICQodGhpcykuZGF0YSgnc3RpY2t5LXRvcC1vZmZzZXQnKTtcclxuICAgICAgICAgICAgICAgIHN0aWNreU9mZnNldCA9IHN0aWNreU9mZnNldCA/IHN0aWNreU9mZnNldCA6IDA7XHJcblxyXG4gICAgICAgICAgICAgICAgJCh0aGlzKS5hZmZpeCh7XHJcbiAgICAgICAgICAgICAgICAgICAgb2Zmc2V0OiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogZnVuY3Rpb24oZWxlbWVudCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICQoZWxlbWVudCkucGFyZW50KCkub2Zmc2V0KCkudG9wIC0gc3RpY2t5T2Zmc2V0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy88cmVmZXJlbmNlIHBhdGg9Jy4vSUNvbnRyb2xsZXJBY3Rpb25Db250ZXh0LnRzJyAvPlxyXG5cclxubW9kdWxlIE9yY2tlc3RyYS5Db21wb3NlciB7XHJcbiAgICAndXNlIHN0cmljdCc7XHJcblxyXG4gICAgLyoqXHJcbiAgICAqIFNpZ25hdHVyZSBmb3IgZXhlY3V0aW5nIGEgZnVuY3Rpb24gdGhhdCByZXF1aXJlcyBhIGNvbnRyb2xsZXIgYWN0aW9uIGNvbnRleHQuXHJcbiAgICAqL1xyXG4gICAgZXhwb3J0IGludGVyZmFjZSBJQ29udHJvbGxlckFjdGlvblNpZ25hdHVyZSB7XHJcbiAgICAgICAgKG9wdGlvbnM6IENvbXBvc2VyLklDb250cm9sbGVyQWN0aW9uQ29udGV4dCk6IHZvaWQ7XHJcbiAgICB9XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
